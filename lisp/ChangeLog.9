2001-10-20  Gerd Moellmann  <gerd@gnu.org>

	* (Version 21.1 released.)

2001-10-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Associate .indent.pro with
	Fundamental mode.  Suggested by Samuel Padgett <spadgett1@nc.rr.com>.

2001-10-18  Sam Steingold  <sds@gnu.org>

	Put the *Compile-Log* buffer in `compilation-mode'.
	* emacs-lisp/bytecomp.el (byte-goto-log-buffer): New function.
	(byte-compile-log-1, byte-compile-log-file)
	(displaying-byte-compile-warnings): Use it

2001-10-18  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/smtpmail.el (smtpmail-via-smtp): Use mail-envelope-from if set.

	* xml.el (xml-parse-tag): Use eq on char-after's return value.

2001-10-18  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-mode-map): Bind `mouse-movement' to nil.

	* obsolete/hilit19.el (hilit-lookup-face-create):
	Call set-face-font only if display-graphic-p.
	(toplevel): Remove references to window-system.

2001-10-18  Miles Bader  <miles@gnu.org>

	* simple.el (what-line): Avoid problems with field properties.

2001-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* wid-edit.el (widget-field-face, widget-single-line-field-face):
	Define special colors for a tty.

2001-10-17  Francesco Potortì  <pot@gnu.org>

	* comint.el (comint-password-prompt-regexp): Make it less
	restrictive, letting comint recognize OpenSSH2 passphrase prompts.

2001-10-17  John Wiegley  <johnw@gnu.org>

	* eshell/em-unix.el (eshell/cat): Do a quick test if something is
	a regular file, before checking if it is a directory or symlink.
	This avoids a call to eshell-file-attributes, which can be
	expensive in some situations.

	* eshell/em-ls.el (eshell-ls-dired-initial-args): Added an extra
	customization variable, to differentiate ls-in-dired from regular
	uses of ls.

2001-10-17  Miles Bader  <miles@gnu.org>

	* custom.el (defface): Mention `:inherit' in doc-string.

2001-10-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* paren.el: Update the Commentary with installation instructions.

2001-10-15  Dave Love  <fx@gnu.org>

	* international/mule.el (set-auto-coding): Fix regexps for local
	variables section not to eat newlines.

2001-10-15  Miles Bader  <miles@gnu.org>

	* simple.el (display-message-or-buffer): Pass the correct buffer
	to `display-buffer'.

2001-10-14  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/executable.el (executable-binary-suffixes): Make varalias.
	(executable-find): Use exec-suffixes.
	(executable-set-magic): Don't use make-local-hook.

	* bindings.el (exec-suffixes): Initialize to a system-dependent value.

2001-10-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* bindings.el (completion-ignored-extensions) [ms-dos, windows-nt]:
	Add .ico, .pif, .lnk, .dll, .drv, .vxd, and .386.
	Add .so to the Unix and GNU branch.

	* international/latin-1.el:
	* international/latin-2.el:
	* international/latin-3.el:
	* international/latin-4.el:
	* international/latin-5.el:
	* international/latin-8.el:
	* international/latin-9.el: Add no-byte-compile: t, since
	Makefile.in instructs make-docfile to look at .el files.

2001-10-14  Miles Bader  <miles@gnu.org>

	* button.el (define-button-type): Allow supertype property to be
	specified with a keyword `:supertype' too.
	(button-put, make-text-button): Allow button type property to be
	specified using the keyword `:type' too.
	(button-type): New function.
	(button): Add `button-category-symbol' property.

2001-10-13  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (esc-map): Revert `j' and `C-j' bindings to
	indent-new-comment-line from comment-indent-new-line.

	* textmodes/refill.el (refill-mode):
	Bind DEL to backward-delete-char-untabify.
	Set backward-delete-char-untabify-method to `hungry'.

	* textmodes/bib-mode.el (bib-mode):
	* play/gomoku.el (gomoku-mode):
	* textmodes/page-ext.el (pages-directory-mode):
	* textmodes/scribe.el (scribe-mode): Use define-derived-mode.

	* textmodes/two-column.el (2C-mode): Don't use make-local-hook.

	* emacs-lisp/syntax.el (syntax-ppss): Autoload.

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords):
	Handle here-docs differently.
	(sh-font-lock-heredoc): Remove.
	(sh-here-doc-open-re, sh-here-doc-markers, sh-here-doc-re): New vars.
	(sh-font-lock-here-doc, sh-font-lock-close-heredoc)
	(sh-font-lock-open-heredoc): New functions.
	(sh-mode): Don't copy sh-font-lock-syntactic-keywords any more.
	(sh-font-lock-keywords-1): Use regexp-opt.
	(sh-in-comment-or-string): Use syntax-ppss.
	(sh-case, sh-for, sh-indexed-loop, sh-function, sh-if, sh-repeat)
	(sh-select, sh-tmp-file): Add explicit terminating \n.

	* net/ange-ftp.el (ange-ftp-raw-send-cmd, ange-ftp-wait-not-busy):
	Use with-current-buffer.
	(ange-ftp-cd): New arg `noerror' to prevent signaling an error.
	(ange-ftp-send-cmd): If a `cd' is used (because of a space in the
	filename), catch any error that occurs in `ange-ftp-cd'.
	If an error happened, don't bother sending `cmd' at all.
	Fix a parenthesis typo.
	(ange-ftp-write-region): Don't blindly use binary if the remote host
	is unix-like.

	* play/pong.el (pong-init): Don't use make-local-hook.

2001-10-13  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el (ex-edit): Make checks for modified buffer/file.
	(viper-get-ex-address-subr): More precise addr for the $ marker

2001-10-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* version.el (emacs-version): Bump to 21.1.50.

2001-10-13  Pavel Janík  <Pavel@Janik.cz>

	* mail/mailalias.el (mail-directory-stream): Do not double
	variables in the lambda-list.

	* play/gomoku.el (gomoku-init-display): Ditto.

	* play/landmark.el (lm-init-display): Ditto.

	* delim-col.el (delimit-columns-rectangle-max): Ditto.
	(delimit-columns-rectangle-line): Ditto.

2001-10-12  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-region-internal): Don't rebind
	invisibility_spec now that the C routines handle it correctly.

	* help-funs.el (locate-library): Use load-suffixes and abbrev filename.

	* frame.el (special-display-popup-frame): Obey new specs `same-window'
	and `same-frame'.

	* menu-bar.el (minibuffer-local-*map): Take inheritance into account.

	* simple.el (minibuffer-local*-map): Remove redundant bindings.

	* bindings.el (minibuffer-local-map): Also bind next, C-n, C-s, prior,
	C-p and C-r.  Remove redundant bindings from inheriting maps.

	* progmodes/cperl-mode.el: Merged in changes from v4.32.
	 After 4.23 and: After 4.24:
	(cperl-contract-levels): Restore position.
	(cperl-beautify-level): Likewise.
	(cperl-beautify-regexp): Likewise.
	(cperl-commentify): Rudimentary support for length=1 runs.
	(cperl-find-pods-heres): Process 1-char long REx comments too /a#/x
	 After 4.25:
	(cperl-commentify): Was recognizing length=2 "strings" as length=1.
	(imenu-example--create-perl-index): Was not enforcing
	syntaxification-to-the-end.
	(cperl-invert-if-unless): Allow `for', `foreach'.
	(cperl-find-pods-heres): Quote `cperl-nonoverridable-face'.
	Mark qw(), m()x as indentable.
	(cperl-init-faces): Highlight `sysopen' too.
	Highlight $var in `for my $var' too.
	(cperl-invert-if-unless): Was leaving whitespace at end.
	(cperl-linefeed): Was splitting $var{$foo} if point after `{'.
	(cperl-calculate-indent): Remove old commented out code.
	Support (primitive) indentation of qw(), m()x.
	 After 4.26:
	(cperl-problems): Mention `fill-paragraph' on comment. \"" and
	q [] with intervening newlines.
	(cperl-autoindent-on-semi): New customization variable.
	(cperl-electric-semi): Use `cperl-autoindent-on-semi'.
	(cperl-tips): Mention how to make CPerl the default mode.
	(cperl-mode): Support `outline-minor-mode'.  From Mark A. Hershberger.
	(cperl-outline-level): New function.
	(cperl-highlight-variables-indiscriminately): New customization var.
	(cperl-init-faces): Use `cperl-highlight-variables-indiscriminately'.
	From Sean Kamath <kamath@pogo.wv.tek.com>.
	(cperl-after-block-p): Support CHECK and INIT.
	(cperl-init-faces, cperl-short-docs): Likewise and "our".
	From Doug MacEachern <dougm@covalent.net>.
	 After 4.27:
	(cperl-find-pods-heres): Recognize \"" as a string.
	Mark whitespace between q and [] as `syntax-type' => `prestring'.
	Allow whitespace between << and "FOO".
	(cperl-problems): Remove \"" and q [] with intervening newlines.
	Mention multiple <<EOF as unsupported.
	(cperl-highlight-variables-indiscriminately): Doc misprint fixed.
	(cperl-indent-parens-as-block): New configuration variable.
	(cperl-calculate-indent): Merge cases of indenting non-BLOCK groups.
	Use `cperl-indent-parens-as-block'.
	(cperl-find-pods-heres): Test for =cut without empty line instead of
	complaining about no =cut.
	(cperl-electric-pod): Change the REx for POD from "\n\n=" to "^\n=".
	(cperl-find-pods-heres): Likewise.
	(cperl-electric-pod): Change `forward-sexp' to `forward-word':
	POD could've been marked as comment already.
	(cperl-unwind-to-safe): Unwind before start of POD too.
	 After 4.28:
	(cperl-forward-re): Throw an error at proper moment REx unfinished.
	 After 4.29:
	(x-color-defined-p): Make an extra case to peacify the warning.
	Toplevel: `defvar' to peacify the warnings.
	(cperl-find-pods-heres): Could access `font-lock-comment-face' in -nw.
	No -nw-compile time warnings now.
	(cperl-find-tags): TAGS file had too short substring-to-search.
	Be less verbose in non-interactive mode.
	(imenu-example--create-perl-index): Set index-marker after name.
	(cperl-outline-regexp): New variable.
	(cperl-outline-level): Made compatible with `cperl-outline-regexp'.
	(cperl-mode): Made use `cperl-outline-regexp'.
	 After 4.30:
	(cperl-find-pods-heres): =cut the last thing, no blank line, was error.
	(cperl-outline-level): Make start-of-file same level as `package'.
	 After 4.31:
	(cperl-electric-pod): `head1' and `over' electric only if empty.
	(cperl-unreadable-ok): New variable.
	(cperl-find-tags): Use `cperl-unreadable-ok', do not fail
	on an unreadable file.
	(cperl-write-tags): Use `cperl-unreadable-ok', do not fail
	on an unreadable directory.

	* progmodes/compile.el (compile-mouse-goto-error, compile-goto-error):
	Consider the text between two errors as belonging to the first error.
	(compilation-goto-locus): Use pop-to-buffer rather than
	switch-to-buffer-other-frame.

	* progmodes/awk-mode.el (awk-mode-syntax-table): / has string syntax.
	(awk-font-lock-syntactic-keywords): New var.
	(awk-mode): Use it.

	* expand.el (expand-c-for-skeleton): Add explicit terminating \n.

	* faces.el (describe-face): Call help-setup-xref earlier.

	* jka-compr.el (jka-compr-load-suffixes): New var.
	(jka-compr-install): Add its content to load-suffixes.
	(jka-compr-uninstall): Remove its content from load-suffixes.

2001-10-12  Sam Steingold  <sds@gnu.org>

	* bindings.el (completion-ignored-extensions): CL-related
	extensions are platform-independent.

	* net/ange-ftp.el (ange-ftp-copy-files-async): New function for
	asynchronous multiple file copying.

2001-10-12  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-check-lambda-list):
	Turn error for repeated variables into warning.

	* emacs-lisp/bytecomp.el (byte-compile-check-lambda-list):
	New function checking that lambda-list consists of non-constant
	symbols, that &rest and &optional are followed by variable names,
	that &rest VAR is the last element, and that variables aren't doubled.
	(byte-compile-lambda): Use it.

2001-10-12  Eli Barzilay  <eli@barzilay.org>

	* calculator.el (calculator-eng-display): Don't call concat
	with an integer argument.

2001-10-12  Miles Bader  <miles@gnu.org>

	* help-mode.el (help-customize-face): New button-type.

	* faces.el (list-faces-display): Fix args to `help-xref-button'.
	(describe-face): Fix args to `help-xref-button'.
	Don't switch to help-buffer around call to `help-setup-xref'.
	Use `help-buffer' instead of hard-wired "*Help*".
	Require `help-mode'.

2001-10-11  Stefan Monnier  <monnier@cs.yale.edu>

	* net/goto-addr.el (goto-address-mail-regexp): Allow + in username.

	* help-mode.el (help-buffer): New function.
	Returns the buffer-name to use for help output.
	Change all the code to use it instead of hard-coding *Help*.
	(help-mode-map): Put back the mouse-2 binding.
	(help-xref-stack): Change the format and make buffer-local.
	(help-xref-stack-item): Make buffer-local.
	(help-setup-xref): Do the `push' here rather than in help-do-xref.
	(help-xref-interned): Display the face doc as well.
	(help-follow-mouse): Re-introduce.
	(help-xref-go-back): Adapt to the new use of help-xref-stack.
	(help-do-xref): Don't `push' any more.
	(help-follow): Also follow face names.

	* help-funs.el (describe-function-1): Remove unused `parens' arg.
	Don't call help-setup-xref anymore and remove its `interactive-p' arg.
	Autoload and cleanup.
	(describe-function): Call help-setup-xref.
	(describe-variable): Call help-setup-xref earlier.

	* help.el (describe-bindings-internal): New fun moved from keymap.c.
	(view-lossage): Call help-setup-xref correctly and earlier.
	(describe-bindings): Call help-setup-xref earlier.
	(describe-key): Call help-setup-xref.  Fix call to describe-function-1.
	(describe-mode): Don't autoload.  Call help-setup-xref earlier.

2001-10-11  Gerd Moellmann  <gerd@gnu.org>

	* master.el (master-mode): Use define-minor-mode instead of
	easy-mmode-define-minor-mode.  Add autoload cookie.
	(Commentary): Remove the line showing how to autoload master-mode,
	since it's always autoloaded.

	* master.el: New file.

2001-10-11  Dave Love  <fx@gnu.org>

	* emacs-lisp/byte-opt.el (byte-optimize-lapcode)
	<byte-constref-ops>: Consider byte-constant2 and clarify the code.
	<const-C varset-X const-C>: Fix car/cdr typo.

2001-10-11  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-display-log-head-p):
	New function extracted from byte-compile-log-1.
	(byte-compile-log-1): Change output to be more in line with
	the output of other GNU tools.
	(byte-compile-warn): Emit `warning' instead of `**' for warnings.
	(byte-compile-report-error): Downcase error message.
	Use `error' instead of `!!' for error messages.
	(byte-compile-print-syms): Treat non-interactive case specially.
	(displaying-byte-compile-warnings): Use backquote.
	(byte-compile-from-buffer): Bind byte-compile-last-line.
	(batch-byte-compile): Remove `Done' message.

2001-10-11  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/copyright.el (copyright): Add final \n.

2001-10-11  Miles Bader  <miles@gnu.org>

	* diff.el (diff): Display default values in prompts as
	`(default ...)', not `(...)'.

	* info.el (Info-follow-reference): Likewise.

2001-10-10  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/autoload.el (doc-string-elt): Remove.

	* newcomment.el (comment-indent): Be a little more robust in case
	comment-indent-function does funny things.
	(comment-normalize-vars): Autoload.
	(comment-region-internal): Fiddle with the visibility spec.
	(comment-valid-prefix): New function.
	(comment-indent-new-line): Use it.  Ignore adaptive-fill-prefixes
	that would turn comment-text into non-comment-text.

	* emacs-lisp/syntax.el: New file.

	* progmodes/tcl.el: Change maintainer to FSF and remove loads of
	compatibility cruft.
	(tcl-using-emacs-19, tcl-using-emacs-19-23, tcl-using-xemacs-19)
	(tcl-version, tcl-maintainer, tcl-use-hairy-comment-detector): Remove.
	(tcl-mode-map): Remove bindings for tcl-beginning-of-defun,
	tcl-end-of-defun, tcl-mark-defun, tcl-indent-for-comment,
	tcl-submit-bug-report.
	(tcl-mode-syntax-table): Leave \f alone.
	(inferior-tcl-mode-map): Remove bindings for tcl-beginning-of-defun,
	tcl-end-of-defun, tcl-submit-bug-report.
	(tcl-xemacs-menu): Fix up and pass it directly to easymenu.
	(tcl-add-emacs-menu): Remove.
	(tcl-fill-mode-map, tcl-fill-inferior-map): Moved into the defvar.
	(tcl-keyword-list): Add `chain'.
	(tcl-font-lock-syntactic-keywords): New variable.
	(tcl-pps-has-arg-6): Remove.
	(tcl-internal-beginning-of-defun, tcl-internal-end-of-defun)
	(tcl-internal-mark-defun): Remove.
	(tcl-set-proc-regexp, tcl-set-font-lock-keywords): Use regexp-opt.
	(tcl-mode): Use define-derived-mode.  Simplify.
	Set comment-indent-function.
	(tcl-indent-command): Use line-beginning-position and comment-indent.
	(tcl-calculate-indent): Renamed from calculate-tcl-indent.
	(tcl-indent-line): Use tcl-calculate-indent.
	(tcl-indent-exp): Renamed from indent-tcl-exp.  Use new names.
	(tcl-add-log-defun): Renamed from add-log-tcl-defun.  Use match-string.
	(tcl-filter): Use with-current-buffer, simplify.
	(inferior-tcl-mode): Use define-derived-mode.
	(tcl-hairy-in-comment): Renamed tcl-in-comment.
	(tcl-simple-in-comment, tcl-in-comment): Removed.
	(tcl-files-alist): New function.
	(tcl-help-snarf-commands): Use it and return the result directly
	rather than through a global variable.
	(tcl-reread-help-files): Fix up the call to tcl-help-snarf-commands.
	(tcl-help-on-word): Provide the default value to completing-read.
	(tcl-hilit): Remove.
	(tcl-hashify-buffer, tcl-popup-menu): Simplify.
	(tcl-comment-indent): New function.
	(tcl-submit-bug-report): Remove.
	(tcl-uncomment-region, tcl-indent-for-comment, add-log-tcl-defun)
	(indent-tcl-exp, calculate-tcl-indent, tcl-beginning-of-defun)
	(tcl-end-of-defun, tcl-mark-defun, tcl-mark): Redefine as aliases.

2001-10-10  Miles Bader  <miles@gnu.org>

	* info.el (Info-insert-dir): Don't call `Info-fontify-menu-headers'.
	(Info-fontify-node): Don't fontify the node if it's already been done.

2001-10-10  Gerd Moellmann  <gerd@gnu.org>

	* international/iso-transl.el (iso-transl-e-caret)
	(iso-transl-i-caret, iso-transl-o-caret, iso-transl-u-caret):
	Fix duplicates.  From Dave Love <d.love@dl.ac.uk>.

	* simple.el (end-of-buffer): Fix code scrolling specially
	for the buffer end.

	* startup.el (command-line-1): Bind tab-width to 8.

2001-10-10  Pavel Janík  <Pavel@Janik.cz>

	* emulation/tpu-edt.el: Use defalias instead of fset for
	user-visible commands.  From Rob Riepel
	<riepel@Networking.Stanford.EDU>.

2001-10-09  Gerd Moellmann  <gerd@gnu.org>

	* ruler-mode.el: New file.

2001-10-09  Miles Bader  <miles@gnu.org>

	* apropos.el (button): New require.

	* help-funs.el: New file, contents mostly from `help.el'.
	(describe-variable): Use `condition-case' instead of `ignore-errors'.

	* help-mode.el: New file, contents mostly from `help.el'.

	* help.el: Don't require `view' when compiling.
	(help-with-tutorial, describe-function, describe-function-1)
	(variable-at-point, describe-variable, locate-library):
	Functions moved into `help-funs.el'.
	(help-manyarg-func-alist): Variable moved into `help-funs.el'.
	(help-mode, help-mode-setup, help-mode-finish, help-button-action)
	(help-setup-xref, help-xref-following, help-make-xrefs)
	(help-xref-button, help-insert-xref-button, help-xref-interned)
	(help-xref-go-back, help-go-back, help-do-xref, help-follow)
	(help-xref-on-pp): Functions moved into `help-mode.el'.
	(help-mode-map, help-xref-stack, help-xref-stack-item)
	(help-highlight-p, help-highlight-face, help-back-label)
	(help-xref-symbol-regexp, help-xref-mule-regexp)
	(help-xref-info-regexp): Variables moved into `help-mode.el'.
	(help-symbol, help-back, help-info, help-customize-variable)
	(help-function-def, help-variable-def):
	Button-types moved into `help-mode.el'.
	(load-symbol-file-load-history, symbol-file):
	Functions moved into `subr.el'.
	(symbol-file-load-history-loaded): Variable moved into `subr.el'.
	(view-lossage): Call `help-setup-xref' instead of doing it manually.

	* subr.el (symbol-file-load-history-loaded)
	(load-symbol-file-load-history, symbol-file): Moved from `help.el'.

	* loadup.el ("button"): Load removed.

	* button.el (define-button-type): Respect any `supertype' property.
	(button-type-subtype-p, button-has-type-p): New functions.

	* rfn-eshadow.el (rfn-eshadow-regexp): Deal correctly with escaped
	dollar-signs.

	* comint.el (comint-insert-previous-argument): New function.
	(comint-mode-map): Bind `C-c .' to `comint-input-previous-argument'.
	(comint-insert-previous-argument-last-start-pos)
	(comint-insert-previous-argument-last-index): New variables.

	* apropos.el (apropos-next-label-button): Use the presence of a
	`apropos-label' property to detect label buttons.

2001-10-08  Miles Bader  <miles@gnu.org>

	* button.el (next-button, previous-button): Remove N and WRAP
	parameters.  Don't pay attention to `skip' properties.
	(forward-button): Implement wrapping, iterating, and skipping here
	instead.
	(button-activate): USE-MOUSE-ACTION is optional.
	(button-nop): Function removed.
	(default-button): Use `ignore' as default button action.

	* apropos.el (apropos-next-label-button): Update arguments to
	`next-button'.
	(apropos-symbol): Add `skip' property.
	(apropos-function, apropos-macro, apropos-command)
	(apropos-variable, apropos-face, apropos-group, apropos-widget)
	(apropos-plist): New button types.
	(apropos-label-properties): Variable removed.
	(apropos-print): Pass button-type to apropos-print-doc, rather
	than help function and label text.
	(apropos-print-doc): Remove ACTION and STR args, add TYPE arg.
	Get button label from TYPE.

2001-10-07  Stefan Monnier  <monnier@cs.yale.edu>

	* help.el (help-mode): Use define-derived-mode.
	(describe-mode): Add optional `buffer' arg.
	Use it instead of going through help-xref-mode.
	Avoid doubling the word `minor' when prettifying.
	(describe-function-1): List the corresponding key bindings.
	(describe-variable): Say if the var is automatically buffer-local.
	If the source is `loaddefs.el', look for the real source.
	(help-xref-mode): Remove.

	* emacs-lisp/bytecomp.el (byte-compile-file): Return success when
	the file says no-byte-compile.

2001-10-08  Miles Bader  <miles@gnu.org>

	* button.el (next-button, previous-button): Respect `skip' property.

2001-10-07  Miles Bader  <miles@gnu.org>

	* woman.el (woman-mode-map): Copy button-buffer-map instead of
	making a new keymap.  Don't bind mouse-2.  Bind M-mouse-2 to
	`woman-follow-word' instead of `woman-mouse-2'.
	(woman-follow-word): Renamed from `woman-mouse-2'.
	Follow current unconditionally, since this function is now only
	bound to M-mouse-2.  Use accessor functions.
	(WoMan-highlight-references): Use `make-text-button'.
	(woman-xref): New button type.

	* loadup.el ("faces"): Move load before loading "loaddefs.el".
	("button"): New load, just before "help" (which uses it).

	* help.el (help-mode-map): Make button-buffer-map our parent.
	Don't bind mouse events or tab/backtab.
	(help-function, help-variable, help-face, help-coding-system)
	(help-input-method, help-character-set, help-back, help-info)
	(help-customize-variable,  help-function-def, help-variable-def):
	New button types.
	(help-button-action): New function.
	(describe-function-1): Pass help button-types to
	`help-xref-button' rather than help function and help-echo string.
	Don't put multiple help-function args in a list to pass them to
	help-xref-button, just pass them as multiple arguments.
	Use `help-insert-xref-button' to make [back]-button, rather than
	`help-xref-button'.
	(help-xref-button): Take a button-type TYPE as a parameter rather
	than a function.  Remove HELP-ECHO parameter.  Remove DATA parameter
	and add a &rest parameter ARGS to serve the same purpose.
	Use `make-text-button' to add the button.
	(help-insert-xref-button): Use `insert-text-button' to add the button.
	(help-follow-mouse, help-next-ref, help-previous-ref):
	Functions removed.
	(help-do-xref): New function.
	(help-follow): Use `push-button' and `help-do-xref' to do most of
	the work.

	* apropos.el (apropos-symbol, apropos-label): New button types.
	(apropos-symbol-button-display-help)
	(apropos-label-button-display-help, apropos-next-label-button):
	New functions.
	(apropos-mode-map): Make button-buffer-map our parent.
	Don't bind mouse events.
	(apropos-print, apropos-print-doc): Create buttons instead of text
	properties.
	(apropos-mouse-follow): Function removed.
	(apropos-follow): Use buttons.

	* button.el: New file.

2001-10-07  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl.el (most-positive-fixnum, most-negative-fixnum):
	Remove.

2001-10-05  Richard M. Stallman  <rms@gnu.org>

	* add-log.el (add-change-log-entry): Skip copyright notice
	and copying permission notice at start of file, if any.
	Make use of terms "entry" and "item" accord with Emacs manual.
	Simplify the logic for moving point while entering or creating
	an entry and then an item.
	(add-change-log-entry-other-window): Doc fix.

2001-10-06  Miles Bader  <miles@gnu.org>

	* rfn-eshadow.el (read-file-name-electric-shadow): Autoload cookie
	removed; they apparently don't work with faces.

2001-10-05  Sam Steingold  <sds@gnu.org>

	* textmodes/sgml-mode.el (html-xhtml): New user option.
	(html-tag-alist, html-horizontal-rule, html-image, html-line)
	(html-ordered-list, html-unordered-list, html-list-item)
	(html-paragraph, html-checkboxes, html-radio-buttons): Use it.
	(sgml-skip-close-p): New function.
	(sgml-value): Use it.

2001-10-05  Sam Steingold  <sds@gnu.org>

	* calendar/diary-lib.el (diary-entry-compare): When times are
	identical, compare the entries lexicographically.

2001-10-06  Miles Bader  <miles@gnu.org>

	* rfn-eshadow.el (rfn-eshadow-update-overlay):
	Use `minibuffer-prompt-end'.

	* simple.el (previous-matching-history-element): Fix misplaced
	parentheses.

2001-10-05  Miles Bader  <miles@gnu.org>

	* rfn-eshadow.el: New file.

2001-10-05  Miles Bader  <miles@gnu.org>

	* cus-face.el (custom-face-attributes): Make sure each attribute
	has a valid default value.  Remove hacks that mapped `nil' to
	`off' and used nil to mean `unspecified'.  Remove `unspecified'
	choices from all attributes (unspecified is handled by the parent
	checklist).
	* cus-edit.el (custom-face-edit-convert-widget)
	(custom-face-edit-deactivate, custom-face-edit-activate)
	(custom-face-edit-delete, custom-face-edit-attribute-tag):
	New functions.
	(custom-face-edit): Specify a custom :convert-widget.
	(custom-pre-filter-face-spec, custom-post-filter-face-spec):
	Don't pass in default filters that map between `nil' and `off' and
	`unspecified' and `nil'.

2001-10-05  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compilation-buffer-name): New function.
	(compile-internal): Use it to determine the name of the
	compilation buffer.

2001-10-05  Miles Bader  <miles@gnu.org>

	* progmodes/compile.el (grep-use-null-device): New variable.
	(grep-command): Mention `grep-use-null-device'.
	(grep-compute-defaults): Compute `grep-use-null-device' if necessary.
	Make computation of `grep-command' respect `grep-use-null-device'.
	(grep): Respect `grep-use-null-device'.
	Call `grep-compute-defaults' even if grep-command is set, if
	grep-use-null-device is still tentative.

	* subr.el (call-process-shell-command): New function.

2001-10-05  Miles Bader  <miles@gnu.org>

	* simple.el (previous-matching-history-element)
	(next-history-element, next-complete-history-element): Use
	`minibuffer-' functions instead of calling `field-' functions directly.
	(minibuffer-prompt-end, minibuffer-contents):
	(minibuffer-contents-no-properties, delete-minibuffer-contents):
	Functions removed (now subrs).
	(minibuffer-prompt-width): Use `minibuffer-prompt-end'.

	* minibuf-eldef.el (minibuf-eldef-setup-minibuffer)
	(minibuf-eldef-update-minibuffer): Use `minibuffer-' functions
	instead of calling `field-' functions directly.
	(minibuf-eldef-setup-minibuffer): Remove unused variable `prompt'.

2001-10-05  Gerd Moellmann  <gerd@gnu.org>

	* files.el (find-file-noselect): If file's read-only status has
	changed on disk, ask if buffer's read-only status should be
	changed, unless NOWARN is set.

	* emacs-lisp/cl-macs.el (define-setf-expander): Make it an
	alias for define-setf-method.

	* bindings.el: Remove no-byte-compile from file local variables
	to enable bootstrapping.

2001-10-04  Andrew Innes  <andrewi@gnu.org>

	* faces.el (face-font-registry-alternatives) [windows-nt]:
	Make gb2312 an alias for gb2312.1980.

2001-10-04  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-get-proposed-name): Don't assume dirsep is /.
	(uniquify-reverse-components): Remove.

	* emacs-lisp/bytecomp.el (byte-recompile-directory):
	Make sure the file is readable.
	(byte-compile-file): Don't compile if `no-byte-compile' is set.
	(byte-compile-defvar): Update to reflect the change in Fdefvar.
	(batch-byte-recompile-directory): Pass arg=0.

	* progmodes/perl-mode.el (perl-indent-continued-arguments): New var.
	(perl-calculate-indent): Use it.
	(perl-backward-to-noncomment): Use forward-comment.

	* derived.el (define-derived-mode, derived-mode-make-docstring):
	Allow `parent' to be nil.

	* textmodes/nroff-mode.el (nroff-mode-abbrev-table, nroff-mode):
	Use define-derived-mode.
	(nroff-mode-map, nroff-mode-syntax-table): Massage.

	* mail/mailabbrev.el (mail-abbrev-in-expansion-header-p): Simplify.

	* emacs-lisp/lselect.el: Use facep iso find-face.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression):
	Use regexp-opt.
	(doc-string-elt): Set symbols' prop.  Copied from autoload.el.
	(lisp-font-lock-syntactic-face-function): New function.
	(lisp-mode-variables): Use it.  Make arg optional.
	(emacs-lisp-mode): Don't pass an arg to lisp-mode-variables.
	(lisp-mode): Don't pass an arg to lisp-mode-variables.
	Set comment-start-skip.

	* emacs-lisp/lisp-mnt.el (lm-history-header): Accept `ChangeLog'.

	* emacs-lisp/cl-macs.el (frame-parameter): Add a setf method.
	(ignore-errors): Don't bother using a `err' symbol.

	* emacs-lisp/autoload.el (autoload-ensure-default-file)
	(autoload-insert-section-header, autoload-before-p)
	(autoload-remove-section): New functions.
	(generate-file-autoloads): Use them.
	(update-file-autoloads): Use them.  Return FILE if there's no cookie.
	Make sure the autoload file is properly formatted when creating it.
	(update-autoloads-from-directories): Use them as well.
	Only update autoloads for files whose timestamp has changed.
	Add a dummy entry to remember the files which had no autoload cookies.

	* timer.el (timer-relative-time): Fix computation for negative `micro'.

	* subr.el (define-key-after): Allow `key' to be longer than 1.
	(make-local-hook): Make obsolete.
	(add-hook, remove-hook): Don't use make-local-hook any more.
	(make-syntax-table): Inherit all chars from s-s-t.

2001-10-04  Gerd Moellmann  <gerd@gnu.org>

	This is a fix for a report saying that resuming a search with C-s
	C-s doesn't use the case-fold-search setting of the previous
	search (C-s ... M-c ... then C-s C-s).

	* isearch.el (isearch-last-case-fold-search): New variable.
	(isearch-mode): Remember value of isearch-case-fold-search
	in isearch-last-case-fold-search.
	(isearch-done): Quote value of isearch-case-fold-search.
	(isearch-repeat): When resuming a search, restore
	isearch-case-fold-search from isearch-last-case-fold-search.

	Added to NEWS.

	* startup.el (inhibit-startup-buffer-menu): New user-option.
	(command-line-1): If inhibit-startup-buffer-menu is set, don't
	display the buffer menu.  From Simon Josefsson <jas@extundo.com>.

	This allows upto 99999 messages in the summary without screwing up
	the summary sorting.  Previously 9999 was the maximum.  Added to NEWS.

	* mail/rmailsum.el (rmail-make-summary-line)
	(rmail-make-summary-line-1, rmail-summary-next-same-subject)
	(rmail-summary-goto-msg, rmail-summary-goto-msg):
	Allow 5-digit message ids instead of 4.

	This adds expansion of environment variables in the value
	specified with M-x setenv.  Added to NEWS.

	* env.el (substitute-env-vars): New function.
	(setenv): Add parameter SUBSTITUTE-ENV-VARS.  If set, substitute
	environment variables in VALUE.  Return VALUE.

2001-10-04  Gerd Moellmann  <gerd@gnu.org>

	* Branch for 21.1.

2001-10-03  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-util.el (cvs-prefix-define): Typo cons->concat.

2001-10-03  Pavel Janík  <Pavel@Janik.cz>

	* emulation/tpu-edt.el: Make messages match original TPU/edt
	editor.  From riepel@Stanford.EDU (Rob Riepel).

2001-10-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* rect.el: Update maintainer's email address.

2001-10-02  Andreas Schwab  <schwab@suse.de>

	* net/ange-ftp.el (ange-ftp-skip-msgs): Add 227 and 228 for Long
	and Extended Passive Mode, resp.

2001-10-01  Eli Zaretskii  <eliz@is.elta.co.il>

	These changes add support for Calendar-related items in the
	menu bar on tty's as well:

	* calendar/calendar.el (calendar-mode-map): Require cal-menu
	unconditionally.
	(calendar-mode): Set up activate-menubar-hook unconditionally.

	* calendar/cal-menu.el (cal-menu-x-popup-menu): New function,
	calls x-popup-menu only if popup menus are supported.
	(calendar-mouse-insert-hebrew-diary-entry)
	(calendar-mouse-insert-islamic-diary-entry)
	(calendar-mouse-holidays, calendar-mouse-view-diary-entries)
	(calendar-mouse-view-other-diary-entries)
	(calendar-mouse-print-dates, calendar-mouse-2-date-menu)
	(calendar-mouse-cal-tex-menu, cal-tex-mouse-filofax):
	Call cal-menu-x-popup-menu instead of x-popup-menu.

2001-10-01  Gerd Moellmann  <gerd@gnu.org>

	* gs.el (gs-set-ghostview-window-prop): Fix args of `elt'.

	* emacs-lisp/edebug.el (rx): Add def-edebug-spec.

	* emacs-lisp/rx.el: New file.

2001-10-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (help-for-help): Doc fix.  From Pavel@Janik.cz (Pavel Janik).

2001-09-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (select-frame-by-name, other-frame): Doc fix.

2001-09-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/snake.el (snake-score-file): Use temporary-file-directory
	instead of a literal "/tmp".  Suggested by Robert
	<robert@chezmarshall.freeserve.co.uk>.

	* play/tetris.el (tetris-score-file): Ditto.

2001-09-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* apropos.el (apropos-print): Make the directions inserted at the
	beginning of the *Apropos* buffer more clear.

2001-09-27  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-mult.el (ediff-get-meta-info): Installed Gerd's changes.
	Added comments.

2001-09-27  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-normalize-vars): Use " \t" rather than
	"\\s-" when defining comment-end-skip.

2001-09-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/feedmail.el (feedmail-queue-send-edit-prompt-help):
	Call get-buffer-window first second arg `visible'.

	* international/mule-diag.el (list-input-methods-1):
	Output something that's independent of Emacs' version.

	* tar-mode.el (tar-mode-write-file): Don't signal an error by
	calling byte-to-position with a nil tar-header-offset.

2001-09-27  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (send-mail-function): Doc fix.
	(mail-do-fcc): Error if header-end is not a marker.
	(mail-do-fcc): Add a comment.
	(mail-reply-to): Doc fix.
	(mail-signature): Make ATPOINT optional.
	(mail-yank-original): Use cond instead of nested if.

2001-09-26  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-on-current-buffer): Default arg to "Top".

2001-09-25  Eli Barzilay  <eli@barzilay.org>

	* calculator.el (calculator-copy-displayer): New user-option.
	(calculator-displayer-prev, calculator-displayer-next):
	Renamed from calculator-displayed-{left,right}.
	(calculator, calculator-standard-displayer)
	(calculator-num-to-string, calculator-update-display)
	(calculator-copy, calculator-put-value): Bug and display fixes.

2001-09-24  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Eliminate make-local-hook calls.  Doc fix.
	(ebnf-version): New version (3.6.1).

	* ebnf-bnf.el: Fix character range regexp.  Doc fix.
	(ebnf-bnf-non-terminal-chars): New internal const.
	(ebnf-bnf-lex): Fix code.

	* ebnf-iso.el: Fix character range regexp.  Doc fix.
	(ebnf-iso-non-terminal-chars): New internal const.
	(ebnf-iso-lex): Fix code.

	* ebnf-yac.el: Fix character range regexp.  Doc fix.
	(ebnf-yac-skip-chars): New internal const.
	(ebnf-yac-skip-code): Fix code.

2001-09-24  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-checkin): Use vc-delete-automatic-version-backups.

	* pcvs-parse.el (cvs-parse-commit): Expand the file name before
	passing it to VC.

	* vc-hooks.el (vc-delete-automatic-version-backups): Handle the
	case where the file is relative.

2001-09-24  Gerd Moellmann  <gerd@gnu.org>

	* xml.el (xml-parse-attlist): Quotes around attributes must be the
	same on each side.  Make sure we properly handle simple quotes.
	From Daiki Ueno <ueno@unixuser.org>.

2001-09-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/sendmail.el (mail-mode): Doc fix.  From Simon Josefsson
	<jas@extundo.com>.

	* menu-bar.el (top-level): Minor fixes for text of help-echo in
	some items of the Options menu.

2001-09-22  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-parse.el (cvs-parse-commit): Remove the temp files used by VC.

	* vc-hooks.el (vc-delete-automatic-version-backups):
	Don't fail if the directory doesn't exist.

	* diff-mode.el (diff-default-read-only): New var.
	(diff-mode): Use it.

2001-09-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexl-mode-map): Fix the change of 2001-08-23:
	Use make-keymap instead of copy-keymap, since copying the global
	keymap messes up the menu bar.

	* info.el (Info-goto-node, Info-menu): Doc fix.  Suggested by
	Roland Winkler <Roland.Winkler@physik.uni-erlangen.de>.

2001-09-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-build-subdir-alist): Accept optional arg SWITCHES.

	* dired-aux.el (dired-insert-subdir): Pass switches to
	dired-build-subdir-alist.

2001-09-21  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-string-preprocess): Fix bug that
	caused %#a and %#b to be mis-formatted.

2001-09-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add elements for ada-mode,
	ccmode, emacs-mime, and eudc manuals.

2001-09-19  Sam Steingold  <sds@gnu.org>

	w32 find cannot be used with `grep-find'.
	* progmodes/compile.el (find-program): New variable.
	(grep-compute-defaults): Use it to set `grep-find-command'.

2001-09-19  Gerd Moellmann  <gerd@gnu.org>

	* ps-bdf.el (bdf-read-bitmap): Initialize returned values to defaults.

2001-09-19  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Replace "Prologue" by "Prolog" in PostScript
	programming.  Doc fix.
	(ebnf-version): New version (3.6).
	(ebnf-eps-begin): Data fix.
	(ebnf-begin-file): Code fix.

	* ebnf-bnf.el: Doc fix.
	(ebnf-bnf-lex): Fix regexp for non-terminal and terminal tokens.

	* ebnf-iso.el, ebnf-otz.el, ebnf-yac.el: Doc fix.

2001-09-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Better face mapping for black/white PostScript printers.
	Check if mark is active when printing a region.  Doc fix.
	(ps-print-version): New version number (6.5.5).
	(ps-print-color-p): Customization fix.
	(ps-black-white-faces): New option.
	(ps-black-white-faces-alist): New internal var.
	(ps-count-lines-preprint, ps-print-preprint-region): New funs.
	(ps-print-region, ps-print-region-with-faces, ps-nb-pages-buffer)
	(ps-nb-pages-region): Interactive fix.
	(ps-extend-face-list, ps-extend-face, ps-setup, ps-begin-job)
	(ps-face-attributes, ps-generate-postscript-with-faces): Code fix.

2001-09-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-move-to-filename-regexp): Allow one digit in the
	numeric month value, and allow the Kanji character after it to be
	missing (happens with ls-lisp's output on Japanese versions of
	MS-Windows).

2001-09-18  Miles Bader  <miles@gnu.org>

	* diff-mode.el (diff-mode): Don't make the buffer read-only if
	it's empty (and thus probably a new patch file about to be edited).

2001-09-17  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-this-string-valid-engine):
	Check for '(' in column 0 of doc string.

	* gs.el (gs-set-ghostview-window-prop): Use `elt' instead
	of `nth' so that using a vector as bounding-box works.
	From David.Kastrup@neuroinformatik.ruhr-uni-bochum.de.

2001-09-17  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-annotate): Use current workfile version explicitly as
	a default, suggested by Gustav Hållberg <gustav@virtutech.se>.

2001-09-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-bdf.el (bdf-cache-file) <ms-dos>: Use _bdfcache.el, since
	convert-standard-filename doesn't guarantee that the .el extension
	is preserved.

	* dos-fns.el (convert-standard-filename): Replace invalid
	characters only after converting dash/underscore to a period.
	(original-make-auto-save-file-name): New.
	(make-auto-save-file-name): New function, overrides the definition
	on files.el and calls the original function via
	original-make-auto-save-file-name.

	* mail/rmail.el (top-level): Require mule-utils when compiling.
	(rmail-decode-babyl-format): Use detect-coding-with-priority
	instead of detect-coding-region, to favor detection of emacs-mule
	encoded Babyl files written by rmailout.el etc.  Suggested by
	Kenichi Handa <handa@etl.go.jp>.

2001-09-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/em-unix.el (eshell-shuffle-files, eshell-shuffle-files):
	Use `equal', not `=', since the device number can be a cons cell.

2001-09-14  Gerd Moellmann  <gerd@gnu.org>

	* simple.el: Comment out change of 2001-09-13.

2001-09-13  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/compile.el (grep-compute-defaults): Don't set
	grep-command/grep-find-command when it is already non-nil.
	(grep-command): Make it a user option.
	(grep-find-command): Likewise.

2001-09-13  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-replace-char-subr, viper-envelop-ESC-key):
	inhibit quit.

2001-09-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-auto-save-file-name): If long file names are not
	supported on MS-DOS, truncate the file name to DOS 8+3 limits before
	generating an auto-save file name from it.

2001-09-13  Gerd Moellmann  <gerd@gnu.org>

	* ps-print.el (ps-print-region, ps-print-region-with-faces)
	(ps-nb-pages-region): Signal an error if called interactively
	and the mark is not active.

	* simple.el (minibuffer-prompt-modification)
	(minibuffer-prompt-insertion): New functions.
	(minibuffer-prompt-properties): Use `modification-hooks' and
	`insert-in-front-hooks'.

2001-09-12  Richard M. Stallman  <rms@gnu.org>

	* textmodes/outline.el (outline-regexp): Doc fix.
	Initialize it in the defcustom, the usual way.

2001-09-12  Gerd Moellmann  <gerd@gnu.org>

	* ediff-mult.el (ediff-get-meta-info): Take into account that data
	from `ediff-meta-info' properties need not be an overlay.
	From David Ponce <dponce@voila.fr>.

	* isearch.el (isearch-intersects-p): Fix end checks.

2001-09-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* gud.el (dbx) <gud-dbx-use-stopformat-p>: Move this case into the
	`t' branch of `cond', since Irix 6.1 and up is a special case of
	the standard dbx interface.

2001-09-11  Miles Bader  <miles@gnu.org>

	* comint.el (comint-send-input): When waiting for echoed input,
	don't save the expected end position in `echo-end', so that things
	work properly even if the buffer is modified elsewhere at the same
	time [this happens if `comint-truncate-buffer' is used].

2001-09-11  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/outline.el (outline-mode): Use `^' and a shy group
	when constructing imenu-generic-expression from outline-regexp.

2001-09-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/em-unix.el (eshell-shuffle-files): Compare inodes with
	`equal' instead of `=', since they can be cons cells.  From Nils
	Goesche <cartan@cartan.de>.

2001-09-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-annotate): Rewrote doc string.

2001-09-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* time-stamp.el: Update Stephen Gildea's email address.

2001-09-10  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-send): Obey mail-send-nonascii when
	enable-multibyte-characters = nil.  From Hallvard B Furuseth
	<h.b.furuseth@usit.uio.no>.

2001-09-09  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-init.el (ediff-highest-priority): Bug fix.

	* viper-cmd.el (viper-special-read-and-insert-char): New function
	that reads a character and uses the current input method or
	iso-accents when appropriate.

	* viper*.el: Corrections to the comment blocks at the top.

2001-09-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-goto-node): Doc fix.

2001-09-07  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-intersects-p): New function.
	(isearch-close-unnecessary-overlays): Renamed from *unecessary*,
	use isearch-intersects-p, and clean up.

2001-09-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (ispell-dictionary-alist-4): Add "german"
	and "german8", for the new German orthography dictionaries.
	(ispell-dictionary-alist-5, ispell-dictionary-alist-6): Rearrange
	the entries, to keep the line length balanced for loaddefs.el.

2001-09-07  Dr Francis J. Wright  <F.J.Wright@qmw.ac.uk>

	* comint.el (comint-send-input): Handle comint-process-echoes
	differently.

2001-09-07  Pavel Janík  <Pavel@Janik.cz>

	* locate.el (locate-insert-header): Remove unnecessary whitespace.

2001-09-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* arc-mode.el (archive-dostime): Fix a typo in minutes' computation.

2001-09-07  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-switch-buffer):
	* textmodes/refer.el (refer-find-entry-internal):
	* term/sup-mouse.el (sup-pos-to-window):
	* term/bg-mouse.el (bg-window-from-x-y):
	* emacs-lisp/edebug.el (edebug-window-live-p):
	Use get-window-with-predicate.

	* window.el (get-window-with-predicate): Renamed from some-window.
	(some-window): Make it an alias.

2001-09-06  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (undo): Remove positions from buffer-undo-list up to
	the next undo boundary only.

2001-09-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* makefile.nt (install): Don't copy sc.el.  Reported by Richard
	Kim <ryk@dspwiz.com>

	* cus-edit.el (custom-buffer-create-internal): Remove "100%" from
	the message "Creating customization items...done".

2001-09-05  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (toplevel): Require `jit-lock' only if
	font-lock-support-mode is set to jit-lock-mode.

2001-09-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/quail.el (quail-use-package, quail-inactivate)
	(quail-activate): Mention the hooks these functions run in their
	doc strings.

2001-09-05  Edward M. Reingold  <reingold@iit.edu>

	* cal-menu.el (calendar-mouse-view-other-diary-entries): Fix name
	of file in header of menu.

2001-09-04  Gerd Moellmann  <gerd@gnu.org>

	* env.el (setenv): Interactively, if VARIABLE has a current value,
	add that to the front of the history, as the doc string says.

	* comint.el (comint-send-input): Change help-echo.
	From "Dr Francis J. Wright" <F.J.Wright@qmw.ac.uk>.

	* bookmark.el (bookmark-write-file): Bind print-length and
	print-level to nil.  From Tom Capey <tomc@edina.co.uk>.

	* obsolete/uncompress.el: Moved there from lisp/.

	* comint.el (comint-insert-clicked-input): Goto point-max before
	deleting previous input.  From "Dr Francis J. Wright"
	<F.J.Wright@qmw.ac.uk>.

	* simple.el (backward-word): Doc fix.

2001-09-03  Pavel Janík  <Pavel@Janik.cz>

	* emacs-lisp/levents.el, emacs-lisp/lucid.el, emacs-lisp/pp.el
	* uncompress.el, uniquify.el, vc.el, view.el, window.el
	* w32-fns.el: Add Keywords header.

2001-09-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el: Fix separators in the Edit menu.  Bring "Fill" near
	"Text Properties".  Suggested by Simon Marshall
	<Simon.Marshall@midas-kapiti.com>.

2001-09-04  Andrew Choi  <akochoi@cse.cuhk.edu.hk>

	* term/mac-win.el (mac-drag-n-drop): Decode file name by
	consulting the value of file-name-coding-system.

2001-09-03  Stefan Monnier  <monnier@cs.yale.edu>

	* help.el (describe-function-1): Save precomputed `file-name' rather
	than recomputing it (incorrectly) with `symbol-file'.

2001-09-03  Gerd Moellmann  <gerd@gnu.org>

	* international/isearch-x.el (isearch-exit-recursive-edit):
	Take three parameters, since it's used as an after-change-function.

	* emacs-lisp/backquote.el (backquote-backquote-symbol)
	(backquote-unquote-symbol, backquote-splice-symbol): Remove `*'
	from doc strings.

2001-09-02  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/glasses.el (glasses-convert-to-unreadable):
	Consider underscores as in `glasses-make-readable'.

2001-09-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/cmacexp.el (c-macro-preprocessor): Use "gcc -E" for
	MS-DOS, since cpp might not be available.

	* menu-bar.el (menu-bar-edit-menu) <yank-menu, yank>:
	Mention "yank" in the help-echo text.
	Suggested by Pavel Janík <Pavel@Janik.cz>.

2001-09-01  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent): Insert spaces more carefully.

2001-08-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Make sure *Messages*
	exists.  From Andy Petrusenco <andy@int.spb.ru>.

	* hi-lock.el (hi-lock-unface-buffer): Don't call x-popup-menu if
	display-popup-menus-p returns nil.  Suggested by Andy Petrusenco
	<andy@int.spb.ru>.

2001-08-31  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-mouse-2): Renamed from isearch-mouse-yank.
	Instead of running mouse-yank-at-click, see what the event is
	bound to outside Isearch and run that.

2001-08-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-options-menu) <transient-mark-mode>:
	Fix the menu entry to mention transient-mark-mode.

2001-08-30  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (eval-expression-print-level): Fix last change.

	* bindings.el (mode-line-coding-system-map): New variable.
	(mode-line-mule-info): Give the "%Z" a local-map keymap.

	* simple.el (eval-expression-print-level): Change the type
	of the defcustom to allow nil.

	* emacs-lisp/find-gc.el: Moved here from lisp/.

	* international/quail.el (quail-completion-1):
	Reverse the ((CHAR . DEFN) ...) list before processing it.
	From Kenichi Handa <handa@etl.go.jp>.

	* obsolete/rsz-mini.el, obsolete/sun-curs.el, obsolete/sun-fns.el
	* obsolete/x-apollo.el, obsolete/x-menu.el: Moved here from lisp/.

2001-08-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* toolbar/tool-bar.el (tool-bar-mode): Make it a no-op if images
	aren't supported.  This avoids the annoying gray strip drawn by
	the Windows version instead of the missing tool bar.

2001-08-29  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-options-menu): Make option text, messages
	and tooltips more consistent.  From "Marshall, Simon"
	<Simon.Marshall@midas-kapiti.com>.

	* startup.el (fancy-splash-screens): Temporarily set
	minor-mode-map-alist to nil while displaying splash screens.

2001-08-29  Pavel Janík  <Pavel@Janik.cz>

	* buff-menu.el: Add Keywords header.
	Doc fix (C-x C-b is bound to list-buffers).

	* dired-x.el: Add keyword files to get listed in finder.
	Remove confusing notes about GNU Emacs 19.

	* dired.el, dired-aux.el: Add Keywords header.

2001-08-28  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-revert-file): Call the backend even if the FILE's
	contents can be reverted locally; pass new arg CONTENTS-DONE
	down to the backend.

	* vc-cvs.el, vc-rcs.el, vc-sccs.el (vc-*-revert-file): Handle new
	optional arg CONTENTS-DONE.

2001-08-28  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt (DONTCOMPILE): Sync list from makefile.w32-in.

2001-08-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* makefile.nt (install): Copy more *.el files.

2001-08-28  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-mode-map): Bind `y' to dired-show-file-type
	instead of `w' which is already in use.

	* gs.el (gs-load-image): Use sleep-for.
	From David.Kastrup@neuroinformatik.ruhr-uni-bochum.de.

2001-08-28  Miles Bader  <miles@gnu.org>

	* replace.el (query-replace-regexp-eval): Return args from
	`interactive' form in correct order.

2001-08-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-buffer-menu): If the buffer menu is split by
	major modes, don't create panes for modes for which
	mouse-buffer-menu-alist returns an empty alist.

2001-08-28  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el: Update first-line description.
	Sync comments w/ maintainer version 5.31.

	(hs-isearch-open): Default value now `code'.
	Fix docstring to use "code blocks" vs "comment blocks",
	as opposed to "block" vs "comment".
	(hs-flag-region): Accept `hs-isearch-open' value
	of `block' as synonymous w/ `code'.
	(hs-hide-block-at-point): For code blocks, pass `code'
	to `hs-flag-region' instead of `block'.

2001-08-28  Miles Bader  <miles@gnu.org>

	* comint.el (comint-next-prompt): Don't loop infinitely if
	{next,previous}-single-char-property-change returns its input
	position when the search fails.

2001-08-27  Miles Bader  <miles@gnu.org>

	* comint.el (comint-get-old-input-default): Don't signal an error
	if point is not on an input field; instead, return the current
	line (using `comint-bol' to skip any prompt, in case we're not
	using fields at all).

	* man.el (Man-mode-line-format): Variable removed.
	(Man-mode): Change `mode-line-buffer-identification' instead of
	`mode-line-format'.

2001-08-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-send-hook): Remove a duplicate defcustom.
	From Simon Josefsson <jas@extundo.com>.

2001-08-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texnfo-upd.el: Remove dots and exclams at end of error
	messages.  From Pavel Janík <Pavel@Janik.cz>.

	* emacs-lisp/levents.el: Specify FSF as Maintainer.  From Pavel
	Janík <Pavel@Janik.cz>.

	* emacs-lisp/lselect.el: Ditto.

	* hexl.el (hexl-insert-multibyte-char, hexl-insert-char):
	Remove periods from the end of error message strings.
	From Pavel Janík <Pavel@Janik.cz>.

	* progmodes/antlr-mode.el: Add Keywords header.  From Pavel
	Janík <Pavel@Janik.cz>.

	* net/telnet.el: Ditto.

2001-08-26  Gerd Moellmann  <gerd@gnu.org>

	* hl-line.el (hl-line-mode): Add args INIT-VALUE, LIGHTER, and
	KEYMAP to the call to define-minor-mode.

2001-08-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations) <hebrew-iso8859-8>:
	Replace some of the undefined characters with emulations of bidi
	formatting characters and Niqud as per SI 1311-1.
	(IT-unicode-translations): Ditto.
	(IT-display-table-setup, IT-setup-unicode-display):
	Fill characters without translations with dos-unsupported-char-glyph.

2001-08-24  Simon Josefsson  <jas@extundo.com>

	* hl-line.el (hl-line-mode): Don't be a global mode.
	(global-hl-line-mode): New function.

2001-08-24  Gerd Moellmann  <gerd@gnu.org>

	* gs.el (gs-load-image): Wait for GHOSTVIEW window property
	being reset by Ghostscript.  Don't kill the gs process.
	From David.Kastrup@neuroinformatik.ruhr-uni-bochum.de.

2001-08-24  Andrew Choi  <akochoi@cse.cuhk.edu.hk>

	* term/mac-win.el: Require scroll-bar.

2001-08-23  Stefan Monnier  <monnier@cs.yale.edu>

	* ebuff-menu.el (electric-buffer-list): Use list-buffers-noselect.

2001-08-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexl-insert-multibyte-char) New function.
	(hexl-quoted-insert, hexl-self-insert-command)
	(hexl-insert-hex-char, hexl-insert-decimal-char)
	(hexl-insert-octal-char): Call it instead of hexl-insert-char.
	Fix the doc strings accordingly.
	(hexl-insert-char): Reject characters whose code is above 255.
	Doc fix.
	(hexl-mode-map): Copy the global keymap instead of creating a
	sparse keymap, and bind all self-inserting characters to
	hexl-self-insert-command.

2001-08-22  Stefan Monnier  <monnier@cs.yale.edu>

	* wid-edit.el (text): Re-order docstring correctly.

	* mail/sendmail.el (mail-mode): Use adaptive-fill-regexp.

	* textmodes/fill.el (adaptive-fill-regexp): Admit tabs as well.

2001-08-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (line-number-mode): Mention the variable
	line-number-display-limit-width in the doc string.

2001-08-22  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (mode-line-unbury-buffer): Add EVENT parameter.
	Temporarily select EVENT's window for switching buffers.
	(mode-line-bury-buffer): New function.
	(mode-line-buffer-identification-keymap): Use it instead of
	bury-buffer.  Bind down-mouse events to prevent global down-mouse
	events from shining through.

2001-08-21  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-beginning): Make sure the comment-start
	we found isn't a comment-end (in cases where confusion is possible).

2001-08-22  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file): Remove TARGET-FILE
	before writing it, so that hard-links don't see new version.

2001-08-21  Gerd Moellmann  <gerd@gnu.org>

	* gs.el (gs-set-ghostview-colors-window-prop):
	Call x-change-window-property with 3rd arg FRAME.
	(gs-load-image): Wait for a previous Ghostscript process
	to complete before starting a new one.

	* image.el (image-type-regexps): Make sure that the TIFF
	pattern is only matched at the beginning of a string.
	From Markus Rost <rost@math.ohio-state.edu>.

	* international/swedish.el: Pre-Mule file removed.  From Jonas
	Oberg <jonas@gnu.org>.

2001-08-20  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-abort-on-error): Add custom variable
	to whitespace to abort a write-file if whitespace is detected in file.

	* whitespace.el (whitespace-write-file-hook): Hook to be called
	when writing a file. If `whitespace-abort-on-error' is set, the
	write will abort on detecting whitespaces.
	If `whitespace-auto-cleanup' is set, the file will be cleaned
	automatically prior to writing.

	* whitespace.el (whitespace-buffer-search): Let's not insert bogus
	whitespaces in the error output!

	* whitespace.el (whitespace-check-indent-whitespace): Defaults to
	`indent-tabs-mode', since the latter notes user preferences on
	TABs anyway.

	* whitespace.el (whitespace-version): 3.1. All of the above issues
	were raised by François Pinard, which led to the fixes described.

2001-08-20  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texnfo-upd.el (texinfo-every-node-update): Remove
	some spaces from a message.  From Pavel Janík  <Pavel@Janik.cz>.

	* whitespace.el (whitespace-global-mode): Add autoload cookie.

2001-08-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-db2): Doc change.

2001-08-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-postgres): Add the database at the end of the
	parameters instead of at the beginning.
	(sql-postgres-options): Doc change.

2001-08-17  Gerd Moellmann  <gerd@gnu.org>

	* custom.el (defcustom): Doc fix.

2001-08-16  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el (find-composition): Check if (char-after POS)
	returns a valid character.

2001-08-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexl-mode, hexl-mode-exit): Adjust hexl-max-address and
	original-point for extra CR characters that are added/removed when
	the buffer is written/read whose EOL type is -dos.

2001-08-16  Miles Bader  <miles@gnu.org>

	* simple.el (line-move): Undo previous change.

	* comint.el (comint-send-input): Add `inhibit-line-move-field-capture'
	property to input-terminating `boundary' overlays to avoid
	line-move weirdness.

2001-08-16  Gerd Moellmann  <gerd@gnu.org>

	* lazy-lock.el (lazy-lock-fontify-region): Widen the current
	buffer in a save-restriction.  Under one test case with Ediff,
	window-scroll-functions are run with a window start that's
	temporarily outside of the restriction.

2001-08-16  Robert J. Chassell  <bug-texinfo@gnu.org>

	* textmodes/texnfo-upd.el: Update copyright notice, fix minor typos.
	(texinfo-find-lower-level-node, texinfo-find-higher-level-node)
	(texinfo-menu-locate-entry-p, texinfo-start-menu-description)
	(texinfo-update-menu-region-beginning)
	(texinfo-update-menu-region-end, texinfo-find-pointer): Add new
	command, @ifnottex, to regexps, so it is found.

2001-08-16  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt (DONTCOMPILE): Omit bindings.el.
	(DONTCOMPILE): Omit sc.el.

	* makefile.w32-in (DONTCOMPILE): Omit bindings.el.
	(DONTCOMPILE): Omit sc.el.

2001-08-16  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (occur): Bind inhibit-read-only to t.

2001-08-16  Miles Bader  <miles@gnu.org>

	* simple.el (line-move): Pass an ESCAPE-FROM-EDGE argument of t when
	calling `constrain-to-field', to avoid problems with comint prompts.

2001-08-15  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (lisp-indent-defmethod): New function.
	(toplevel): Set it as `common-lisp-indent-function' for `defmethod'.

	* ediff-mult.el (ediff-get-meta-info): Fix the condition
	of a while-loop.

	* Makefile.in (DONTCOMPILE): Remove sc.el.

	* Makefile.in (finder_setwins): Renamed from nonobsolete_setwins.
	Don't include term/.

	* mail/sc.el: Moved to obsolete/.

2001-08-14  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Change error function arguments to follow Emacs
	message convention.  Doc fix.
	(ps-print-version): New version number (6.5.4).
	(coding-system-for-write): Change declaration position to avoid
	XEmacs compilation gripes.
	(coding-system-for-read, buffer-file-coding-system):
	Declarations to avoid XEmacs compilation gripes.

	* ps-mule.el: Doc fix.
	(ps-mule-encode-header-string): If STRING is not a string, replace
	STRING by empty string.

2001-08-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (show-trailing-whitespace): Doc fix.

2001-08-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* desktop.el (desktop-save): Insert the coding: tag before
	desktop-header.

2001-08-13  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (TAGS, TAGS-LISP): Remove "loaddefs.el" including
	its path from $els.

	* image.el (image-jpeg-p): Fix call of substring.

2001-08-10  Gerd Moellmann  <gerd@gnu.org>

	* play/animate.el (animate-string): Doc fix.  Use a buffer
	name with stars in it.
	(animate-sequence): New function.
	From Richard Stallman <rms@gnu.org>.

	* frame.el (select-frame-set-input-focus): New function
	extracted from other-frame.
	(other-frame): Use it.
	(next-multiframe-window, previous-multiframe-window): Use it.

	* isearch.el (isearch-other-meta-char): Don't switch to the
	buffer of a window clicked on, when the current buffer is
	in Isearch mode.

	* image.el (image-jpeg-p): Test for APPn markers in the range
	#xe0..#xef.

2001-08-09  Gerd Moellmann  <gerd@gnu.org>

	* desktop.el (desktop-save): Don't use concat to form a file
	name, use expand-file-name.

	* mouse.el (mouse-delete-window): Do nothing if frame has just
	one window.

	* bindings.el (minor-mode-alist): Use mode-line-minor-mode-keymap
	for the minor mode name.

	* view.el (toplevel): Use mode-line-minor-mode-keymap for the
	minor mode name.

	* time.el (display-time-string-forms): Use make-mode-line-mouse-map
	instead of make-mode-line-mouse2-map.

	* subr.el (add-minor-mode): Use mode-line-minor-mode-keymap for
	the minor mode name.

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use  mode-line-minor-mode-keymap for the minor mode name.

	* calendar/calendar.el (calendar-mode-line-format):
	Use make-mode-line-mouse-map instead of make-mode-line-mouse2-map.

	* bindings.el (make-mode-line-mouse-map): Renamed from
	make-mode-line-mouse2-map.  Take additional arg MOUSE.
	(mode-line-modified): Use mouse-3 instead of mouse-2.
	(mode-line-buffer-identification-keymap): Bind keys differently.
	(propertized-buffer-identification): Adapt help-echo to new bindings.

	* bindings.el (mode-line-format): Specify help-echo for line
	number, column number and buffer-percent part of the mode-line.

	* image.el (image-type-regexps): Allow whitespace at the start
	of the image data for XPM, XBM and PostScript, which are
	text files.
	(image-jpeg-p): Correct calculation of next field offset.

2001-08-08  Pavel Janík  <Pavel@Janik.cz>

	* battery.el: Fix typo.

2001-08-08  Gerd Moellmann  <gerd@gnu.org>

	* image.el (image-type-regexps): Allow predicates.  Change the way
	JPEG images are recognized.
	(image-jpeg-p): New function.
	(image-type-from-data): Handle predicates in image-type-regexps.

	* emacs-lisp/edebug.el (edebug-read-function): Fix handling of
	#:, #x, #o, and similar constructs.

2001-08-07  Gerd Moellmann  <gerd@gnu.org>

	* vc.el (vc-transfer-file): Fix malformed autoload cookie.

	* emulation/viper-util.el (viper-file-checked-in-p): Use `and'
	instead of `progn'.

	* tar-mode.el (tar-extract): Avoid generating a new buffer
	for each file visited.  From Markus Rost <rost@math.ohio-state.edu>.

	* textmodes/paragraphs.el (forward-sentence): Avoid building
	a regexp from sentence-end.  From Kenichi Handa <handa@etl.go.jp>.

	* progmodes/executable.el (executable-set-magic):
	If executable-find returns a quoted file name, unquote it before
	inserting it.

	* image.el (image-type-regexps): For JPEG files, use a regexp
	derived from the JFIF spec.

	* image.el (image-type-regexps): Use `\`' instead of `^' in
	most regular expressions.

2001-08-06  Pavel Janík  <Pavel@Janik.cz>

	* play/animate.el: Re-insert a reference to re-inserted function.

2001-08-06  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-function-1): Use find-function-search-for-symbol
	instead of find-function-noselect because the latter follows aliases.

	* play/animate.el (animate-birthday-present): Re-insert.

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu):
	Handle old-style menu definitions.

2001-08-06  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/makeinfo.el, textmodes/page-ext.el, textmodes/page.el,
	* textmodes/text-mode.el, textmodes/two-column.el: Keywords added.

	* play/studly.el, mail/unrmail.el, emacs-lisp/lucid.el,
	* emulation/pc-mode.el, diff.el, textmodes/fill.el, abbrev.el,
	* add-log.el, faces.el, mail/sc.el: Specify FSF as Maintainer.

2001-08-05  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/tildify.el: Milan Zamazal has new address.

2001-08-03  Gerd Moellmann  <gerd@gnu.org>

	* custom.el (custom-set-variables): Don't test `custom-requests'
	properties, check the third element of the options passed to
	custom-set-variables instead.

	* info.el (info-insert-file-contents): Use info-file-exists-p
	instead of file-exists-p.

	* play/zone.el (zone-pgm-stress): Use unwind-protect to make sure
	the mode-line face is restored.  Fix several bugs.

	* replace.el (perform-replace): Doc fix.

2001-08-02  Francesco Potortì  <pot@gnu.org>

	* uniquify.el (uniquify-ref-base, uniquify-ref-filename)
	(uniquify-ref-buffer, uniquify-ref-proposed): New functions.
	(uniquify-fix-item-base, uniquify-fix-item-filename)
	(uniquify-fix-item-buffer, uniquify-fix-item-proposed): Deleted.
	Callers changed.
	(uniquify-set-proposed): Changed to work with a vector item.
	(uniquify-rationalize-file-buffer-names): Use a list of arrays for
	the fix list, and a list of strings for the non-file buffer
	names.  Both changes reduce consing.
	(uniquify-rationalize-a-list): Local variable renaming.
	(uniquify-rationalize-conflicting-sublist): Use member instead of
	assoc.
	(uniquify-rename-buffer): Use unless instead of if not.

2001-08-02  Gerd Moellmann  <gerd@gnu.org>

	* recentf.el (recentf-dump-variable): Handle a value of nil correctly.

	* custom.el (custom-set-variables): Set options with :require
	clauses last.

	* custom.el (defcustom): Doc fix.

	* Makefile.in (TAGS, TAGS-LISP): Exclude loaddefs.el.

2001-08-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (man): Mention Man-switches in the doc string.
	(Man-switches): Mention -a in the doc string.

	* textmodes/ispell.el (ispell-alternate-dictionary):
	Add /usr/share/lib/dict/words, for Irix.

	* bindings.el: Bind shifted and control-shifted kp-* keys to the
	corresponding non-kp keys.  Suggested by Stephen Gildea
	<gildea@stop.mail-abuse.org>.

2001-08-01  Francesco Potortì  <pot@gnu.org>

	* uniquify.el: These changes correct a corner case that the old
	code managed correctly.
	(uniquify-fix-item-proposed): Renamed from
	uniquify-fix-item-min-proposed.
	(uniquify-set-proposed): New function.
	(uniquify-rationalize-file-buffer-names): Code reshuffled for
	clarity and speed.
	(uniquify-item-greaterp): Substitutes uniquify-item-lessp.
	This is equivalent to what the old code did.
	(uniquify-rationalize-a-list): Never recompute the proposed
	name.  Sort the conflicting sublist before rationalising it: this
	is equivalent to what the old code did, but one directory element
	at a time, and only when necessary.
	(uniquify-rationalize-conflicting-sublist): Recompute here the
	proposed name.

2001-08-01  Gerd Moellmann  <gerd@gnu.org>

	* play/animate.el: Add Keywords and Maintainer.  Remove a
	reference to a removed function.

	* play/animate.el (animate-string): Handle case that the string is
	longer than the window is wide.

2001-07-31  Gerd Moellmann  <gerd@gnu.org>

	* desktop.el (desktop-save): Bind coding-system-for-write to
	`emacs-mule' for write-region.

	* delsel.el (delete-selection-pre-hook): Don't set this-command
	to `ignore' if the region is empty.

	* international/mule.el (set-keyboard-coding-system):
	Set keyboard-coding-system.

	* smerge-mode.el (smerge-mode): Check if `font-lock-mode' is bound
	before accessing it.

2001-07-30  Andreas Schwab  <schwab@suse.de>

	* menu-bar.el (toggle-highlight-paren-mode):
	Use `(show-paren-mode)' as body.

2001-07-30  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-checkout-hook): New hook.
	(vc-checkout): Run it.

2001-07-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/make-mode.el (makefile-macroassign-regex):
	Recognize the ?= operator.  From Jonathan Kamens <jik@curl.com>.

2001-07-30  Gerd Moellmann  <gerd@gnu.org>

	* vc.el (vc-switch-backend): Fix autoload cookie.

	* desktop.el (desktop-save): Add `-*- coding: emacs-mule -*-' to
	the desktop file.

2001-07-30  Simon Josefsson  <jas@extundo.com>

	* mail/mail-utils.el (mail-strip-quoted-names): Replace text
	literally.  Reported by Sean Rima <sean@**Delete**.tcob1.net>.

2001-07-27  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (last-sexp-setup-props): New function.
	(last-sexp-toggle-display): Renamed from last-sexp-print.
	(last-sexp-toggle-display, eval-last-sexp-1):
	Use last-sexp-setup-props.

	* mwheel.el (mouse-wheel-down-button, mouse-wheel-up-button):
	New user-options.
	(mouse-wheel-change-button): New function.
	(mouse-wheel-mode): Use mouse-wheel-{up,down}-button.
	(mwheel-scroll): Ditto.

2001-07-26  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Don't search for
	`...', compare with unabbreviated printed representation instead.
	(last-sexp-print): Bind print-length and print-level to nil.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Look for a `...'
	before assigning text properties.  Make properties rear-nonsticky.

	* emacs-lisp/lisp-mode.el (last-sexp-print): New function.
	(eval-last-sexp-1): Give printed text a `keymap' property and bind
	<mouse-2> and <RET> in that map to a function printing the
	unabbreviated value.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): If standard-output
	is a buffer, put a text property `printed-value' on the printed
	representation, with the Lisp object printed as value.

2001-07-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/lisp-mode.el (eval-print-last-sexp, eval-defun):
	Mention the effect of eval-expression-print-length and
	eval-expression-print-level in the doc strings.  Suggested by
	Kevin Gallagher <kevingal@onramp.net>.

2001-07-25  Gerd Moellmann  <gerd@gnu.org>

	* xt-mouse.el (xterm-mouse-event): Recognize control sequences
	for buttons > 3.
	(xterm-mouse-translate): Handle the case that we don't get a
	down-event.

	* emacs-lisp/find-func.el (find-function-regexp):
	Add easy-mmode-define-global-mode to the regexp.  Allow newlines
	in front of the function name.

	* isearch.el (isearch-other-meta-char): Fix last change.

	* isearch.el (isearch-other-meta-char): Don't modify mode-line and
	similar events for which fake prefix keys are generated.  It's no
	longer necessary since read_key_sequence doesn't modify these
	events for internal purposes anymore.

	* files.el (auto-mode-alist): Use nroff-mode for files ending
	in `.9'.  From Assar Westerlund  <assar@stacken.kth.se>.

2001-07-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* avoid.el (mouse-avoidance-too-close-p): If the frame lacks a
	tool-bar-lines parameter, behave as if its value were zero.
	(mouse-avoidance-set-pointer-shape): Don't do anything if
	x-pointer-shape is not boundp.

2001-07-23  Francesco Potortì  <pot@gnu.org>

	* uniquify.el: Overall speedup changes when using many buffers.
	(uniquify-fix-item-base, uniquify-fix-item-filename)
	(uniquify-fix-item-buffer): Changed defmacro to defalias (cosmetic).
	(uniquify-fix-item-unrationalized-buffer): Deleted: was the fourth
	place in the item, but was never used.
	(uniquify-fix-item-min-proposed): New defalias: the fourth place
	in the item is now used as cache for the proposed name.
	(uniquify-rationalize-file-buffer-names): Move computation made on
	newbuffile out of the loop, in the newbuffile-nd local var.
	Use dolist (cosmetic change).  Compute the proposed name for the most
	common case and cache it in the fourth place in the item.
	(uniquify-rationalize-file-buffer-names): Used to return a list
	of buffer whose name was changed, but that return value was never used.
	(uniquify-item-lessp): Replaces uniquify-filename-lessp, works on
	the cached proposed name, does much less consing and is quicker.
	(uniquify-filename-lessp): Deleted.
	(uniquify-rationalize-a-list): Use dolist (cosmetic change).
	Do not bind locally the uniquify-possibly-resolvable flag.  Use the
	cached proposed name is possible.
	(uniquify-get-proposed-name): Arguments changed, callers changed.
	(uniquify-rationalize-conflicting-sublist): Explicitly reset the
	uniquify-possibly-resolvable flag, which is no more bound locally.
	(uniquify-rename-buffer): Do not set the old unrationalised-buffer
	flag, which does not exist any more.

2001-07-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-unicode-translations): Fix the appearance of
	"6`".

	* progmodes/compile.el (compile-internal): If EMACS is already
	defined in the environment, don't override its value.

2001-07-23  Gerd Moellmann  <gerd@gnu.org>

	* play/fortune.el: Undo change of 2001-07-13.
	Fix autoload cookies.  Add types to defcustoms.
	(fortune) <defgroup>: Add :link.
	(fortune-from-region): Use eq, not eql.
	From Dave Love <fx@gnu.org>.

	* play/animate.el (animate-birthday-present): Function removed.

	* play/animate.el: New file.

2001-07-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level-add-subdirs-to-load-path):
	On Windows, put into normal-top-level-add-subdirs-inode-list the
	canonicalized names of the directories instead of inode numbers.

2001-07-21  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el: Copyright years.
	(ediff-choose-syntax-table): New function.
	(ediff-setup): Use ediff-choose-syntax-table.
	(ediff-file-checked-out-p,ediff-file-checked-in-p): Check if
	vc-state is available.
	(ediff-make-temp-file): Use ediff-coding-system-for-write.

	* ediff-init.el (ediff-with-syntax-table): New macro, uses
	with-syntax-table.
	(ediff-coding-system-for-read): From ediff-diff.el.
	(ediff-coding-system-for-write): New variable.
	(ediff-highest-priority): Fixed the bug having to do with disappearing
	overlays.
	(ediff-file-remote-p): Use file-remote-p, if available.
	(ediff-listable-file): New function.
	(ediff-file-attributes): Use ediff-listable-file.

	* ediff-mult.el (ediff-meta-insert-file-info1):
	Use ediff-listable-file.

	* ediff-ptch.el (ediff-prompt-for-patch-file):
	Use ediff-coding-system-for-read.
	(ediff-patch-file-internal): Use ediff-coding-system-for-write.

	* ediff-diff.el (ediff-coding-system-for-read): Moved to ediff-init.el.
	(ediff-match-diff3-line,ediff-get-diff3-group): Improved pattern.

	* ediff.el: Date of last update, copyright years.

	* ediff-wind.el (ediff-setup-control-frame): Nill->nil.

	* viper-ex.el (ex-token-list,ex-cmd-execute): Revamped, courtesy
	of Scott Bronson.
	(ex-cmd-assoc,ex-compile,ex-cmd-one-letr): New functions.
	(viper-check-sub,viper-get-ex-command,viper-execute-ex-command):
	Deleted functions.
	(viper-get-ex-com-subr,viper-ex,ex-mark): Changed to use the new
	ex-token-list.
	(viper-get-ex-address-subr): Convert registers to char data type.

	* viper-util.el (viper-int-to-char,viper-char-equal): New functions.
	(viper-memq-char): Use viper-int-to-char.
	(viper-file-checked-in-p): Use vc-locking-user, if vc doesn't have
	vc-locking-state.
	(viper-read-key): Use viper-read-key-sequence.

	* viper.el (viper-major-mode-modifier-list):
	Added inferior-emacs-lisp-mode.
	(this-major-mode-requires-vi-state): New function that uses simple
	heuristics to decide if vi state is appropriate.
	(set-viper-state-in-major-mode): Use this-major-mode-requires-vi-state.
	(viper-non-hook-settings): Don't advise read-key-sequence.
	(viper-read-key-sequence): New function that replaces the
	previously used advice to read-key-sequence.

	* viper-cmd.el (viper-test-com-defun,viper-exec-change)
	(viper-exec-Change,viper-execute-com,viper-insert,viper-append)
	(viper-Append,viper-Insert,viper-open-line,viper-Open-line)
	(viper-open-line-at-point,viper-substitute,viper-overwrite)
	(viper-replace-char-subr,viper-forward-word,viper-forward-Word):
	Got rid of the negative character hack.
	(viper-escape-to-state,viper-replace-state-exit-cmd):
	Use viper-read-key-sequence.
	(viper-envelop-ESC-key): No need for ad-get-orig-definition.
	(viper-minibuffer-standard-hook,viper-read-string-with-history):
	Don't override existing minibuffer-setup-hook.
	(viper-mark-point,viper-goto-mark-subr,viper-brac-function):
	Convert registers to char data type.
	(viper-autoindent): Use viper-indent-line.

	* viper-keym.el: Use viper-exec-key-in-emacs.

2001-07-20  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-visit-files): Fix variable name typo.

2001-07-20  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-trailing-whitespace): Save match data
	around looking-at.  From Markus Rost <rost@math.ohio-state.edu>.

2001-07-19  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/compile.el (compilation-parse-errors): `linenum' might
	return a this-error using the alternative format (a pair of markers).

2001-07-19  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (c++-keywords): Add Standard C++ operator names.

	* mail/mh-utils.el (mh-find-progs): Also search in `lib'.
	From Mats Bengtsson <mats.bengtsson@s3.kth.se>,

2001-07-17  Pavel Janík  <Pavel@Janik.cz>

	* international/iso-transl.el: Fix typo in the header of the file.

	* textmodes/picture.el (picture): Doc fix.

	* international/ja-dic-cnv.el (skkdic-convert): Some fixes to
	follow coding conventions in generated files.

2001-07-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu)
	(tool-bar-add-item): Don't call image-related primitives if the
	display doesn't support images.

	* frame.el (display-images-p): New function.

2001-07-17  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-visit-files): Handle the case the specified
	column number is <= 0.

2001-07-17  Jan Nieuwenhuizen  <jan@netland.nl>

	* startup.el (command-line-1): Add support for +LINE:COLUMN
	command line argument.

2000-07-17  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* server.el (server-process-filter, server-visit-files):
	Add support for +LINE:COLUMN style emacsclient calls.

2001-07-16  Pavel Janík  <Pavel@Janik.cz>

	* emacs-lisp/easy-mmode.el: Add Keywords header.

	* play/pong.el: Author has new address.

	* play/landmark.el: Author is no more reachable.

	* play/handwrite.el: Author is no more reachable.

2001-07-17  Stefan Monnier  <monnier@cs.yale.edu>

	* term/sun.el (ignore-key, sun-esc-bracket, meta-flag): Remove.
	(sun-raw-prefix): Replace t3, t4, t6, and t7 with f3, f4, f6 and f7.
	Complete bindings for F<1..12> keys.
	(global-map): Remove `undo' binding (already in the default).
	Replace `t<n>' bindings with `f<n>' bindings.

2001-07-16  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/tcl.el (tcl-fill-mode-map): Use tcl-indent-exp.
	(tcl-mode): Use tcl-add-log-defun.
	(tcl-indent-line): Use tcl-calculate-indent.
	(tcl-calculate-indent): Renamed from calculate-tcl-indent.
	(tcl-indent-exp): Renamed from indent-tcl-exp.
	(tcl-add-log-defun): Renamed from add-log-tcl-defun.
	(tcl-indent-for-comment): Call comment-indent-function properly
	and handle the case where it returns nil.

2001-07-16  Gerd Moellmann  <gerd@gnu.org>

	* calendar/cal-islam.el (calendar-goto-islamic-date):
	Remove autoload cookie.

	* calendar/calendar.el (calendar-goto-islamic-date):
	Add call to autoload.

2001-07-16  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-mode.el (ada-mode): Avoid unneeded version checks.
	Don't change compile-auto-highlight globally.
	Don't bother with `font-lock-defaults' property since XEmacs
	also understands the `font-lock-defaults' variable.
	Use make-local-variable rather than make-variable-buffer-local.
	Don't `defconst' comment-indent-function: keep the default.
	Call easy-menu-add unconditionally.
	(ada-create-keymap): Use [(shift tab)] so it works on both Emacsen.
	(ada-create-menu): Use :included for Emacs as well.

	* vc.el (vc-do-command): Autoload.

	* progmodes/ada-xref.el (ada-xref-initialize): Fix call to add-hook.

2001-07-16  Pavel Janík  <Pavel@Janik.cz>

	* ps-print.el: Fix Author: header.

2001-07-16  Gerd Moellmann  <gerd@gnu.org>

	* mouse-sel.el (mouse-sel-bindings): Instead of unbinding
	mouse-1 etc., bind them to `ignore'.

	* eshell/esh-mode.el (eshell-send-invisible): Renamed from
	send-invisible, which is already defined in Comint.
	(eshell-watch-for-password-prompt): Use it.

2001-07-16  Pavel Janík  <Pavel@Janik.cz>

	* which-func.el (which-func-mode): Doc fix.

	* align.el, apropos.el, autorevert.el, battery.el, bookmark.el,
	* calculator.el, calendar/todo-mode.el, complete.el, cus-dep.el,
	* cus-edit.el, cus-face.el, delim-col.el, dos-fns.el, double.el,
	* edmacro.el, elide-head.el, emacs-lisp/autoload.el,
	* emacs-lisp/checkdoc.el, emacs-lisp/cl-compat.el,
	* emacs-lisp/cl-specs.el, emacs-lisp/copyright.el,
	* emacs-lisp/cust-print.el, emacs-lisp/easy-mmode.el,
	* emacs-lisp/elint.el, emacs-lisp/ewoc.el, emacs-lisp/find-func.el,
	* emacs-lisp/pp.el, emacs-lisp/re-builder.el, emacs-lisp/shadow.el,
	* emacs-lisp/sregex.el, emerge.el, emulation/edt-lk201.el,
	* emulation/edt-mapper.el, emulation/edt-pc.el,
	* emulation/edt-vt100.el, emulation/edt.el, emulation/pc-select.el,
	* emulation/tpu-edt.el, emulation/tpu-extras.el,
	* emulation/tpu-mapper.el, emulation/vip.el, expand.el, finder.el,
	* foldout.el, follow.el, format.el, forms-d2.el, forms.el,
	* generic.el, hi-lock.el, hilit-chg.el, hippie-exp.el, info-look.el,
	* international/isearch-x.el, international/iso-cvt.el,
	* international/ogonek.el, international/quail.el,
	* international/utf-8.el, jit-lock.el, language/devan-util.el,
	* language/devanagari.el, language/ethio-util.el,
	* language/ethiopic.el, language/european.el, language/indian.el,
	* language/romanian.el, language/tibet-util.el, language/tibetan.el,
	* mail/feedmail.el, mail/footnote.el, mail/mail-hist.el,
	* mail/mailheader.el, mail/mspools.el, mail/supercite.el,
	* mouse-sel.el, net/browse-url.el, net/net-utils.el,
	* net/quickurl.el, net/snmp-mode.el, net/webjump.el,
	* net/zone-mode.el, pcomplete.el, progmodes/antlr-mode.el,
	* progmodes/autoconf.el, progmodes/cmacexp.el,
	* progmodes/cperl-mode.el, progmodes/cpp.el, progmodes/cwarn.el,
	* progmodes/delphi.el, progmodes/ebnf-bnf.el, progmodes/ebnf-iso.el,
	* progmodes/ebnf-otz.el, progmodes/ebnf-yac.el,
	* progmodes/ebnf2ps.el, progmodes/executable.el,
	* progmodes/fortran.el, progmodes/idlw-shell.el,
	* progmodes/idlw-toolbar.el, progmodes/idlwave.el,
	* progmodes/m4-mode.el, progmodes/mantemp.el,
	* progmodes/meta-mode.el, progmodes/octave-inf.el,
	* progmodes/ps-mode.el, progmodes/scheme.el, progmodes/simula.el,
	* progmodes/tcl.el, ps-bdf.el, ps-mule.el, ps-print.el, recentf.el,
	* rect.el, regi.el, rsz-mini.el, s-region.el, scroll-all.el,
	* shadowfile.el, speedbar.el, term/AT386.el, term/internal.el,
	* term/iris-ansi.el, term/mac-win.el, term/tvi970.el,
	* textmodes/artist.el, textmodes/flyspell.el, textmodes/ispell.el,
	* textmodes/page-ext.el, textmodes/refer.el, textmodes/texinfmt.el,
	* textmodes/texinfo.el, textmodes/texnfo-upd.el,
	* textmodes/two-column.el, time-stamp.el, timezone.el,
	* toolbar/tool-bar.el, vc-rcs.el, vc-sccs.el, view.el, w32-fns.el,
	* which-func.el, whitespace.el, wid-browse.el, widget.el,
	* windmove.el, woman.el, xt-mouse.el: Some fixes to follow coding
	conventions.

2001-07-16  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (set-variable): Require 'cus-edit' instead of
	`wid-edit', so that the Custom widgets get defined.

2001-07-16  Pavel Janík  <Pavel@Janik.cz>

	* allout.el: A fix to follow coding conventions.

	* find-lisp.el: A fix to follow coding conventions.

	* term/w32-win.el: A fix to follow coding conventions.

	* textmodes/sgml-mode.el: A fix to follow coding conventions.

	* term/xterm.el: A fix to follow coding conventions.

	* term/news.el: A fix to follow coding conventions.

	* emulation/vi.el: A fix to follow coding conventions, Maintainer:
	header line fixed.

	* sun-curs.el: Fix Maintainer: header line.

	* emacs-lisp/easymenu.el: Address of the author added.

2001-07-16  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-insert-set-properties): Fix invalid mouse-face
	property.

2001-07-16  Pavel Janík  <Pavel@Janik.cz>

	* play/5x5.el, play/decipher.el, play/dunnet.el, play/fortune.el,
	* play/gamegrid.el, play/handwrite.el, play/landmark.el,
	* play/morse.el, play/pong.el, play/snake.el, play/tetris.el:
	Some fixes to follow coding conventions.

2001-07-16  Gerd Moellmann  <gerd@gnu.org>

	* which-func.el (which-func-mode): Doc fix.

2001-07-15  Stefan Monnier  <monnier@cs.yale.edu>

	* net/rcompile.el (remote-compile): Use make-local-variable.

	* progmodes/hideshow.el (hs-minor-mode): Use make-local-variable.

	* progmodes/make-mode.el (makefile-browse): Use make-local-variable.

	* mail/reporter.el (reporter-submit-bug-report):
	Don't abuse make-variable-buffer-local.  Fix call to add-hook.

2001-07-15  Pavel Janík  <Pavel@Janik.cz>

	* calendar/cal-china.el, calendar/cal-coptic.el,
	* calendar/cal-dst.el, calendar/cal-french.el,
	* calendar/cal-hebrew.el, calendar/cal-islam.el,
	* calendar/cal-iso.el, calendar/cal-julian.el,
	* calendar/cal-mayan.el, calendar/cal-persia.el,
	* calendar/cal-tex.el, calendar/calendar.el, calendar/diary-lib.el,
	* calendar/lunar.el, calendar/solar.el, ediff-diff.el,
	* ediff-help.el, ediff-hook.el, ediff-init.el, ediff-merg.el,
	* ediff-ptch.el, ediff-util.el, ediff-vers.el, ediff-wind.el,
	* net/eudc-bob.el, net/eudc-export.el, net/eudc-hotlist.el,
	* net/eudc-vars.el, net/ldap.el, pcvs-defs.el, pcvs-info.el,
	* pcvs-parse.el, pcvs-util.el, pcvs.el, progmodes/ada-mode.el,
	* progmodes/ada-prj.el, progmodes/ada-stmt.el,
	* progmodes/ada-xref.el, progmodes/cc-align.el,
	* progmodes/cc-bytecomp.el, progmodes/cc-cmds.el,
	* progmodes/cc-defs.el, progmodes/cc-engine.el,
	* progmodes/cc-langs.el, progmodes/cc-menus.el,
	* progmodes/cc-styles.el, progmodes/cc-vars.el,
	* textmodes/reftex-auc.el, textmodes/reftex-cite.el,
	* textmodes/reftex-dcr.el, textmodes/reftex-global.el,
	* textmodes/reftex-index.el, textmodes/reftex-parse.el,
	* textmodes/reftex-ref.el, textmodes/reftex-sel.el,
	* textmodes/reftex-toc.el, textmodes/reftex-vars.el,
	* textmodes/reftex.el: Some fixes to follow coding
	conventions in Elisp files with known maintainers.

	* emulation/viper.el: A fix to follow coding conventions.

	* eshell/em-alias.el, eshell/em-banner.el, eshell/em-basic.el,
	* eshell/em-cmpl.el, eshell/em-dirs.el, eshell/em-glob.el,
	* eshell/em-hist.el, eshell/em-ls.el, eshell/em-pred.el,
	* eshell/em-prompt.el, eshell/em-rebind.el, eshell/em-script.el,
	* eshell/em-smart.el, eshell/em-term.el, eshell/em-unix.el,
	* eshell/em-xtra.el, eshell/esh-arg.el, eshell/esh-cmd.el,
	* eshell/esh-ext.el, eshell/esh-io.el, eshell/esh-maint.el,
	* eshell/esh-mode.el, eshell/esh-module.el, eshell/esh-opt.el,
	* eshell/esh-proc.el, eshell/esh-test.el, eshell/esh-util.el,
	* eshell/esh-var.el, eshell/eshell.el: Some fixes to follow coding
	conventions in Elisp files.

	* composite.el, diff.el, emacs-lisp/levents.el,
	* emacs-lisp/lmenu.el, emacs-lisp/lselect.el, emacs-lisp/lucid.el,
	* emulation/pc-mode.el, emulation/viper-cmd.el,
	* emulation/viper-ex.el, emulation/viper-init.el,
	* emulation/viper-keym.el, emulation/viper-macs.el,
	* emulation/viper-mous.el, emulation/viper-util.el,
	* emulation/viper.el, forms-pass.el, international/ccl.el,
	* international/characters.el, international/encoded-kb.el,
	* international/fontset.el, international/ja-dic-cnv.el,
	* international/ja-dic-utl.el, international/kinsoku.el,
	* international/kkc.el, international/mule-cmds.el,
	* international/mule-diag.el, international/mule-util.el,
	* international/mule.el, international/titdic-cnv.el,
	* language/china-util.el, language/chinese.el,
	* language/cyril-util.el, language/cyrillic.el, language/english.el,
	* language/greek.el, language/hebrew.el, language/japan-util.el,
	* language/japanese.el, language/korea-util.el, language/korean.el,
	* language/lao-util.el, language/lao.el, language/misc-lang.el,
	* language/slovak.el, language/thai-util.el, language/thai.el,
	* language/viet-util.el, language/vietnamese.el, mail/mh-comp.el,
	* mail/mh-e.el, mail/mh-funcs.el, mail/mh-mime.el, mail/mh-pick.el,
	* mail/mh-seq.el, mail/mh-utils.el, mail/sc.el, mail/unrmail.el,
	* midnight.el, patcomp.el, pcmpl-cvs.el, pcmpl-gnu.el,
	* pcmpl-linux.el, pcmpl-rpm.el, pcmpl-unix.el, play/studly.el,
	* play/zone.el, replace.el, select.el, subr.el, talk.el, term.el,
	* term/apollo.el, term/bobcat.el, term/linux.el, term/lk201.el,
	* term/vt102.el, term/vt125.el, term/vt200.el, term/vt201.el,
	* term/vt220.el, term/vt240.el, term/vt300.el, term/vt320.el,
	* term/vt400.el, term/vt420.el, x-apollo.el, x-menu.el: Some fixes
	to follow coding conventions in files without maintainer or in files
	with clear maintainer (but without Maintainer header stating so).

	* emacs-lisp/elp.el: A fix to follow coding conventions.

	* gnus/binhex.el, gnus/binhex.el, gnus/earcon.el,
	* gnus/gnus-agent.el, gnus/gnus-art.el, gnus/gnus-audio.el,
	* gnus/gnus-logic.el, gnus/gnus-ml.el, gnus/gnus-mlspl.el,
	* gnus/gnus-setup.el, gnus/gnus-srvr.el, gnus/gnus-sum.el,
	* gnus/gnus-uu.el, gnus/gnus-vm.el, gnus/ietf-drums.el,
	* gnus/mail-parse.el, gnus/mail-prsvr.el, gnus/mail-source.el,
	* gnus/mm-bodies.el, gnus/mm-decode.el, gnus/mm-encode.el,
	* gnus/mm-partial.el, gnus/mm-util.el, gnus/mm-uu.el,
	* gnus/mm-view.el, gnus/mml.el, gnus/nnimap.el, gnus/nnoo.el,
	* gnus/parse-time.el, gnus/rfc1843.el, gnus/rfc2045.el,
	* gnus/rfc2047.el, gnus/rfc2104.el, gnus/rfc2231.el,
	* gnus/time-date.el, gnus/uudecode.el: Some fixes to follow coding
	conventions in files from Gnus.

	* abbrevlist.el, array.el, buff-menu.el, calendar/appt.el,
	* case-table.el, cdl.el, cmuscheme.el, compare-w.el, completion.el,
	* custom.el, derived.el, dired-aux.el, disp-table.el, dos-vars.el,
	* echistory.el, electric.el, emacs-lisp/authors.el,
	* emacs-lisp/backquote.el, emacs-lisp/byte-opt.el,
	* emacs-lisp/bytecomp.el, emacs-lisp/float.el, emacs-lisp/gulp.el,
	* emacs-lisp/helper.el, emacs-lisp/lisp-mode.el,
	* emacs-lisp/regexp-opt.el, emulation/mlconvert.el,
	* emulation/mlsupport.el, env.el, fast-lock.el, find-dired.el,
	* float-sup.el, frame.el, gnus/gnus-mule.el, gnus/pop3.el, gs.el,
	* gud.el, help-macro.el, hexl.el, imenu.el, info.el, informat.el,
	* international/codepage.el, international/iso-ascii.el,
	* international/iso-insert.el, international/iso-transl.el,
	* international/swedish.el, isearch.el, jka-compr.el, kermit.el,
	* lazy-lock.el, ledit.el, loadup.el, lpr.el, ls-lisp.el, macros.el,
	* mail/blessmail.el, mail/emacsbug.el, mail/mail-extr.el,
	* mail/mailabbrev.el, mail/mailpost.el, mail/rmail.el,
	* mail/rmailedit.el, mail/rmailkwd.el, mail/rmailmsc.el,
	* mail/rmailout.el, mail/rmailsort.el, mail/rmailsum.el,
	* mail/vms-pmail.el, man.el, map-ynp.el, menu-bar.el, misc.el,
	* msb.el, net/ange-ftp.el, net/goto-addr.el, novice.el,
	* obsolete/auto-show.el, obsolete/hilit19.el, obsolete/ooutline.el,
	* obsolete/rnews.el, obsolete/rnewspost.el, options.el, paren.el,
	* paths.el, play/dissociate.el, play/doctor.el, play/hanoi.el,
	* play/meese.el, progmodes/compile.el, progmodes/ebrowse.el,
	* progmodes/hideif.el, progmodes/modula2.el, register.el, rot13.el,
	* saveplace.el, scroll-bar.el, server.el, sort.el, soundex.el,
	* term/bg-mouse.el, term/pc-win.el, term/sup-mouse.el,
	* term/tty-colors.el, terminal.el, textmodes/bib-mode.el,
	* textmodes/makeinfo.el, textmodes/page.el, textmodes/paragraphs.el,
	* textmodes/picture.el, textmodes/scribe.el, textmodes/spell.el,
	* textmodes/tex-mode.el, textmodes/text-mode.el,
	* textmodes/underline.el, thingatpt.el, time.el, timer.el,
	* unused.el, vcursor.el, version.el, vms-patch.el, vmsproc.el,
	* vt100-led.el, window.el: Some fixes to follow coding conventions in
	files maintained by FSF.

2001-07-13  Pavel Janík  <Pavel@Janik.cz>

	* arc-mode.el: A fix to follow coding conventions.

	* bindings.el: Ditto.

	* cdl.el: Ditto.

	* comint.el: Ditto.

	* cus-start.el: Ditto.

	* shell.el: Ditto.

	* skeleton.el: Ditto.

2001-07-13  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-build-node-completions):
	Make Info-current-file-completions buffer local.

2001-07-13  Gerd Moellmann  <gerd@gnu.org>

	* which-func.el (which-func-mode, which-func-ff-hook)
	(which-function-mode): Remove references to which-func-mode-global.

	* calendar/cal-islam.el (calendar-goto-islamic-date):
	Add autoload cookie.

	* play/fortune.el: Add types to defcustoms.

2001-07-12  Pavel Janík  <Pavel@Janik.cz>

	* language/czech.el: A fix to follow coding conventions.

2001-07-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* speedbar.el (speedbar-supported-extension-expressions): Add .g
	to the extension list, for antlr-mode.  From Christoph Wedler
	<Christoph.Wedler@sap.com>.

2001-07-11  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-prefix-map): Moved back to vc-hooks.el.
	(vc-dired-mode-map): Fix the madness.

	* vc-hooks.el (vc-mode): Dummy function for doc purposes.
	(vc-prefix-map): Moved back from vc.el.

2001-07-11  Gerd Moellmann  <gerd@gnu.org>

	* mail/mail-extr.el (mail-extr-all-top-level-domains):
	Increase the size of the obarray.
	(mail-extr-all-top-level-domains): Add more toplevel domains,
	add more long names.
	From: Per Starbäck <starback@ling.uu.se>.

2001-07-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/ada-prj.el: Say that the file _is_ part of Emacs.
	From Pavel Janík <Pavel@Janik.cz>

	* progmodes/ada-mode.el: Ditto.

	* progmodes/ada-xref.el: Ditto.

2001-07-11  Miles Bader  <miles@gnu.org>

	* finder.el (finder-insert-at-column): Also move to the next line
	if exactly at COLUMN.

2001-07-10  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-function-1): When printing FUNCTION's
	documentation, don't assume FUNCTION is a symbol.

	* startup.el (normal-top-level): Don't operate on the initial
	frame if we failed to create one.

2001-07-10  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-exp): Keep the indentation of the block
	itself, i.e. only indent the contents in it.

2001-07-10  Markus Rost  <rost@math.ohio-state.edu>

	* mail/rmail.el (rmail-show-message): Show beginning of message in
	all windows containing it.

2001-07-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/tty-colors.el: Fix the header line and copyright years.

2001-07-09  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/advice.el (ad-make-advised-definition): If the
	original definition has an interactive form, but is Elp
	instrumented, use the interactive form of the function called by
	elp-wrapper.

	* winner.el (winner-equal): Make it a defun.  Don't compare Winner
	configurations with compare-window-configuration; they aren't
	window configurations.

	* net/ange-ftp.el (ange-ftp-file-modtime): Check a 213 response
	from the server for the format we expect.  Don't use it if it
	doesn't look like what the Internet draft for FTP extensions specifies.

	* toolbar/*.pbm: Cleaned up.
	From Luis Fernandes <elf@ee.ryerson.ca>.

2001-07-09  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el: Extended the kludge to interoperate with the
	delsel and pending-del packages wrt to the new function
	`c-electric-delete-forward'.

2001-07-08  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Use eval-after-load
	to delay the call to <mode> for global minor modes.
	(easy-mmode-define-navigation): Only recenter if interactive.

2001-07-06  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-shared-map): Bind TAB
	to lisp-indent-line.

	* net/ange-ftp.el (ange-ftp-file-modtime): Ignore 226 responses
	from the server.  Call encode-time only when we are sure that we
	got a 213 response.

2001-07-06  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (mail-specify-envelope-from): Doc fix.
	(mail-envelope-from): New user option.
	(sendmail-send-it): Use it.

2001-07-06  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Use locale dependent date to print date in header.
	Doc fix.
	(ps-print-version): New version number (6.5.3).
	(ps-right-header, ps-right-footer): Initialization and doc fix.
	(ps-time-stamp-locale-default): New fun.

2001-07-06  MORIOKA Tomohiko  <tomo@kanji.zinbun.kyoto-u.ac.jp>

	* mail/rmailout.el (rmail-output): Fix duplicate MIME-Version:
	field problem with MIME-mode.

	* mail/rmailout.el (rmail-output): Fix bug in MIME-mode.

2001-07-06  MORIOKA Tomohiko  <tomo@kanji.zinbun.kyoto-u.ac.jp>

	* mail/rmail.el (rmail-reply): Don't forget to narrow header in
	MIME-mode.

2001-07-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* bindings.el (mode-line-mule-info): Don't show the tip with
	buffer-file-coding-system if that is nil.

2001-07-05  Gerd Moellmann  <gerd@gnu.org>

	* calendar/todo-mode.el (todo-top-priorities): Use delete-region
	instead of kill-line.

	* play/pong.el: Fix first line.  From Pavel Janík <Pavel@Janik.cz>.

	* battery.el (battery-update): Add help-echo.  From Pavel Janík
	<Pavel@Janik.cz>.

2001-07-04  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (c-font-lock-keywords-3): When matching something
	like `struct X Y', finish with point after Y.

2001-07-04  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (sendmail-send-it): Look at `sendmail-program'
	in caller buffer.

2001-07-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* find-file.el (ff-find-the-other-file): Use file-name-nondirectory
	instead of string-match to find the basename of the file.
	From Pascal Obry <p.obry@wanadoo.fr>.

	* net/browse-url.el (browse-url-default-windows-browser):
	Support the MS-DOS port when it runs on Windows.
	(browse-url-browser-function) [ms-dos]: Default to
	browse-url-default-windows-browser.

	* help.el (locate-library): Enable code that looks for compressed
	libraries if auto-compression-mode is on.

2001-07-02  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-clone-buffer-hook): Really unconditionally copy marker.

2001-07-02  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-macs.el (cl-do-arglist): Revert change of 2000-10-15.

2001-07-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* allout.el: Fix the header line, so that finder.el recognizes it.
	From Pavel Janík <Pavel@Janik.cz>.

	* emacs-lisp/lisp-mnt.el (lm-header-prefix): Doc fix.
	From Pavel Janík <Pavel@Janik.cz>.

2001-06-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/w32-win.el (x-colors): Add colors from the recent rgb.txt file.

	* ps-bdf.el (bdf-directory-list): Use the value relative to
	installation-directory for MS-Windows as well.

2001-06-29  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-color-sample-face-get):
	Return ((foreground-color . COLOR)) instead of constructing a face.

2001-06-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (region): Change the background color for the
	light-background color display to lightgoldenrod2, to make it
	visible on some laptops.

2001-06-28  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-reformat-message): Bind inhibit-read-only to t.
	(rmail-msg-restore-non-pruned-header): Likewise.
	If point was in the old pruned header, put it at the top.
	(rmail-msg-prune-header): If point was at the top, keep it there.

	* mail/rmail.el (rmail-narrow-to-non-pruned-header): New function.
	(rmail-retry-failure): Use rmail-narrow-to-non-pruned-header.

2001-06-28  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-clone-buffer-hook): Unconditionally copy marker.

2001-06-28  Karl Fogel  <kfogel@red-bean.com>

	* saveplace.el: Update maintainer email address.

2001-06-27  Francesco Potortì  <pot@gnu.org>

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Undo previous change.

2001-06-27  Francesco Potortì  <pot@gnu.org>

	* uniquify.el (uniquify-rationalize-file-buffer-names): Do a
	preliminary quick reordering.  Can speed things up dramatically.

2001-06-26  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-get-filename): A file name starting with ~
	is not absolute in this context.

	* which-func.el (which-func-maxout): Increase default to 500000.
	(which-function-mode): This is now the "real" name of the function.
	(which-func-mode): Now an alias.
	(which-func-mode-global): Name deleted.

	* progmodes/hideshow.el (hs-minor-mode-map): Use mouse-2, not
	button-2, when binding hs-mouse-toggle-hiding.

2001-06-26  MORIOKA Tomohiko  <tomo@kanji.zinbun.kyoto-u.ac.jp>

	* mail/rmail.el (rmail-msg-restore-non-pruned-header): New function.
	(rmail-msg-prune-header): Likewise.
	(rmail-toggle-header): Use `rmail-msg-restore-non-pruned-header'
	and `rmail-msg-prune-header'.

2001-06-25  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-region-as-paragraph): Don't look further
	back than LINEBEG.

2001-06-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* xt-mouse.el (xterm-mouse-event): If the buffer displayed in the
	window where they clicked the mouse has a header line, adjust
	vertical movement by one.

2001-06-25  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/glasses.el (glasses-make-readable): Consider underscores
	too when separating a parenthesis.

2001-06-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* bookmark.el (bookmark-insert-location, bookmark-bmenu-list)
	(bookmark-bmenu-hide-filenames): Add help-echo to
	mouse-highlighted text.
	(bookmark-bmenu-show-filenames): Remove help-echo property from
	the whitespace.

2001-06-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Add configure.ac (autoconf).
	From Karl Eichwalder <ke@suse.de>.

2001-06-23  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-last-sexp): Doc fix.

	* progmodes/cc-styles.el (c-set-style): Don't specify initial
	contents for completing-read.

2001-06-22  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-make-toggle): Construct the
	function's doc string from HELP, not DOC, and make it accurate by
	adding "Toggle whether to " at the front and downcasing the initial.
	Change the HELP arg in some calls to make it fit this usage.

	* menu-bar.el (toggle-debug-on-quit, toggle-debug-on-error):
	Undo previous change.

2001-06-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* indent.el (indent-relative-maybe, indent-relative): Doc fix.

	* menu-bar.el (toggle-debug-on-quit, toggle-debug-on-error): Doc fix.

2001-06-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* toolbar/tool-bar.el (tool-bar-setup): Remove the EXIT button.

	* dabbrev.el (dabbrev--select-buffers): Fix last change.

2001-06-20  Richard M. Stallman  <rms@gnu.org>

	* dabbrev.el (dabbrev--make-friend-buffer-list): New function,
	broken out from dabbrev--find-expansion.  Handle minibuffer
	specially here.
	(dabbrev--find-expansion): Simplify code in various ways.
	Don't treat minibuffers specially.
	Call dabbrev--make-friend-buffer-list.
	(dabbrev--select-buffers): Don't treat minibuffers specially.  Simplify.
	(dabbrev--scanning-message): Do nothing when minibuffer is current.

2001-06-19  John Wiegley  <johnw@gnu.org>

	* eshell/eshell.el: Don't load in esh-util if it's already loaded.
	Also, added a comment describing how to greatly speedup Eshell
	loadup time, by concatenating together all of Eshell's .elc files.

2001-06-19  John Wiegley  <johnw@gnu.org>

	* eshell/esh-mode.el: Disabled a test that often yields false failures.

2001-06-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el (WoMan-highlight-references): Add help-echo to
	mouse-highlighted text.

2001-06-18  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-mode-map): Fix thinko.

2001-06-18  Gerd Moellmann  <gerd@gnu.org>

	* international/quail.el (quail-start-conversion):
	Reset quail-translating to nil.

	* antlr-mode.el (antlr-mode): Check that `c-Java-access-key' is
	bound.  Suggested by David B. Malkovsky <David.Malkovsky@sas.com>.

2001-06-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* bs.el (bs--get-name, bs--get-file-name): Add help-echo to
	mouse-highlighted text.

	* dired.el (dired-mark-pop-up): Fix last change.

2001-06-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/calendar.el (generate-calendar-month): Add help-echo to
	mouse-highlighted text.

	* net/quickurl.el (quickurl-url-file): Run through
	convert-standard-filename.
	(quickurl-list-populate-buffer): Add help-echo to
	mouse-highlighted text.
	(top-level): Update Dave's URL.

	* textmodes/tex-mode.el (tex-validate-buffer): Add help-echo to
	mouse-highlighted text.

	* textmodes/page-ext.el (pages-copy-header-and-position):
	Add help-echo to mouse-highlighted text.

	* tar-mode.el (tar-header-block-summarize): Add help-echo to
	mouse-highlighted text.

	* replace.el (occur): Add help-echo to mouse-highlighted text.

	* progmodes/sh-script.el (sh-mark-line): Add help-echo to
	mouse-highlighted text.

	* progmodes/cpp.el (cpp-make-button): Add help-echo to
	mouse-highlighted text.

	* progmodes/compile.el (compile-reinitialize-errors):
	Add help-echo to mouse-highlighted messages.
	(compilation-forget-errors): Remove help-echo property as well.

	* play/landmark.el (lm-plot-square, lm-init-display):
	Add help-echo to mouse-highlighted text.

	* play/gomoku.el (gomoku-plot-square, gomoku-init-display):
	Add help-echo to mouse-highlighted text.

	* dired.el (dired-insert-set-properties): Add help-echo to
	mouse-highlighted text.
	(dired-mark-pop-up): Remove help-echo property from the file name.

	* comint.el (comint-send-input): Add help-echo to
	mouse-highlighted text.

	* buff-menu.el (list-buffers-noselect): Add help-echo to
	mouse-highlighted text.

	* arc-mode.el (archive-summarize-files): Add help-echo to
	mouse-highlighted text.

	* ffap.el (ffap-machine-p): Always return nil if
	open-network-stream is not fboundp.

2001-06-17  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el: Move `provide' to the end.  Update copyright.
	(sgml-mode-map): Use `make-keymap' rather than make the keymap by hand.
	Bind the latin-1 charset-char to sgml-maybe-name-self rather than
	incorrectly binding chars between 128 and 256 to it.
	(sgml-maybe-name-self): Handle latin-1 chars properly.
	(sgml-tags-invisible): Bind buffer-file-name to nil.
	Use unwind-protect and restore-buffer-modified-p.
	(sgml-point-entered): Use buffer-substring-no-properties.
	(html-tag-alist): Add `div' and `span' and fix backquote/unquote typos.
	(html-mode): Don't force `imenu-sort-function'.

2001-06-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* tar-mode.el: Fix the copyright notice.

	* font-lock.el (font-lock-comment-face): For tty's with dark
	background, use "red1", since "lightred" is not one of the colors
	recognized by tty-colors.el.

	* tar-mode.el (tar-extract): Call generate-new-buffer-name to
	create a buffer for extracted file, in case there's more than one
	file by that name in an archive, possibly in different
	directories.  From Kevin Rodgers <kevinr@ihs.com>.

	* format.el (format-alist): Doc fix.  Suggested by Alex Schroeder
	<alex@gnu.org>.

2001-06-15  Miles Bader  <miles@gnu.org>

	* textmodes/texinfmt.el (texinfo-format-syntax-table):
	Revert previous change.

2001-06-14  Richard M. Stallman  <rms@gnu.org>

	* replace.el (keep-lines-read-args): Return just a regexp.
	Provide nil for the region args.
	(keep-lines, flush-lines, how-many):
	Calculate the defaults for the region here, when args are nil.

2001-06-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* rot13.el (rot13-other-window): Some more doc fix.

2001-06-14  Per Starbäck  <starback@ling.uu.se>

	* replace.el (case-replace, query-replace-from-history-variable)
	(query-replace-to-history-variable, keep-lines-read-args)
	(occur-revert-function, query-replace-help): Doc fix.

2001-06-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* rot13.el (rot13-other-window): Doc fix.

2001-06-14  Miles Bader  <miles@gnu.org>

	* textmodes/texinfo.el (texinfo-mode-syntax-table): Change syntax
	of " and \ to "." (punctuation).
	* textmodes/texinfmt.el (texinfo-format-syntax-table): Likewise.

2001-06-13  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/backquote.el (backquote-process): Handle `[,@SYMBOL].

	* simple.el (shell-command-on-region): Never kill the
	*Shell Command Output* buffer.

2001-06-13  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-font-lock-keywords): Fix unanchored regexp.

2001-06-10  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/perl-mode.el (perl-font-lock-syntactic-keywords):
	New var, to recognize ${ $' and PODs.
	(perl-font-lock-syntactic-face-function): New function.
	(perl-mode): Use them.
	(perl-continuation-line-p): New function, from perl-calculate-indent.
	(perl-calculate-indent): Use it, to properly handle continuation
	lines of continuation lines.

2001-06-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* server.el (server-process, server-buffer-clients): Doc fix.
	From Pavel Janík <Pavel@Janik.cz>.

2001-06-09  John Wiegley  <johnw@gnu.org>

	* eshell/esh-cmd.el (eshell-exit-success-p): Use a string-match to
	test if the last command was Lisp or not.
	(eshell-rewrite-if-command): "if" syntax is "if A B C", not "if A
	B x C".

2001-06-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (grep-regexp-alist): Remove definition, since the
	general one on compile.el supports drive letters.

2001-06-08  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex-ref.el (reftex-select-label-help): Add "z"
	key description.

	* textmodes/reftex-sel.el (reftex-select-jump): New command.

	* textmodes/reftex-toc.el (reftex-toc-help): Add "z" key description.
	(reftex-toc-jump): New command.

	* textmodes/reftex-cite.el (reftex-parse-bibitem): Regexp changed
	to parse international characters as well.

	* textmodes/reftex.el: Add autoloads for `reftex-varioref-vref',
	`reftex-fancyref-fref', `reftex-fancyref-Fref'.

	* textmodes/reftex-vars.el: Protect single backslash in docstrings.

	* textmodes/reftex-dcr.el (reftex-view-crossref): Add SPACE and
	TAB to the key separators.

2001-06-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (auto-coding-alist): Remove redundant
	up-cased versions of the extensions (auto-coding-alist-lookup is
	case-insensitive where needed).  Recognize .gz, .Z, .bz, .bz2, and
	.gpg files as binary.  Suggested by Karl Berry <karl@gnu.org>.

2001-06-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/lisp-mode.el (lisp-indent-offset): Add a doc string.

2001-06-01  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-variable): Put value on same line
	with preceding text, if it is short enough to look good that way.

2001-06-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-unicode-translations): New variable.
	(IT-setup-unicode-display): New function.

2001-06-01  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Handle before-string and after-string overlay properties
	in ps-print-*-with-faces commands.  Doc fix.
	(ps-print-version): New version number (6.5.2).
	(ps-e-overlay-end): Alias for overlay-end to avoid compilation gripes
	for XEmacs.
	(ps-prefix-quote): Doc fix.
	(ps-setup, ps-print-quote, ps-generate-postscript-with-faces): Code fix.
	(ps-basic-plot-str, ps-plot-string): New funs.

2001-05-31  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/etags.el (tags-compression-info-list): Fix docstring
	and :type spec.

2001-05-31  Gerd Moellmann  <gerd@gnu.org>

	* international/mule-cmds.el (inactivate-input-method):
	Set input-method-function to nil.

	* xml.el (xml-parse-tag): The document may contain invalid characters.
	From ShengHuo ZHU  <zsh@cs.rochester.edu>

2001-05-31  MORIOKA Tomohiko  <tomo@kanji.zinbun.kyoto-u.ac.jp>

	* mail/rmailsum.el (rmail-message-subject-p): Don't call
	`rmail-summary-line-decoder' if the message does not have
	a Subject: field.

	* mail/rmail.el (rmail-revert): Modify to work in rmail-view-buffer.

	* mail/rmail.el (rmail-insert-mime-resent-message-function):
	New variable.
	(rmail-resend): Modify to work in `rmail-view-buffer'; call
	`rmail-insert-mime-resent-message-function' if `rmail-enable-mime'
	is non-nil.

2001-05-30  Stefan Monnier  <monnier@rum.cs.yale.edu>

	* textmodes/tex-mode.el (latex-find-indent): Handle the BOBP case.

2001-05-29  Sam Steingold  <sds@gnu.org>

	* faces.el (face-valid-attribute-values): Bind `valid' directly
	instead of using `setq'.

	* textmodes/tex-mode.el (tex-feed-input, tex-display-shell):
	Use `tex-shell-buf'.
	(tex-shell-proc): Use `tex-shell-running'.
	(tex-shell-buf-no-error): New function.
	(tex-send-tex-command): Use it.
	(tex-shell-running): Kill tex-shell when the buffer is dead for w32.
	(tex-kill-job): Check the process before calling `quit-process'.

2001-05-29  Gerd Moellmann  <gerd@gnu.org>

	* international/utf-8.el (ccl-decode-mule-utf-8): Handle invalid
	UTF-8 sequences.

2001-05-28  Miles Bader  <miles@gnu.org>

	* comint.el (comint-carriage-motion): Renamed from
	`comint-cr-magic'.  Operate on the buffer instead of the string
	(for use as a comint post-output filter, instead of as a
	pre-output filter).  Handle backspaces too.  Add to the
	`comint-output-filter-functions' hook instead of
	`comint-preoutput-filter-functions'.

2001-05-28  Gerd Moellmann  <gerd@gnu.org>

	* language/japan-util.el (japanese-hankaku): Prefer the charset
	`jisx0201' when the optional argument `ascii-only' is not specified.
	(japanese-hankaku-region): Ditto.
	From Katsumi Yamaoka <yamaoka@jpl.org>

2001-05-28  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-mode): Fix font-lock-defaults.
	(outline-invisible-p): New function.
	(hide-leaves): Save excursion.
	(hide-other): Stop looping when reaching bobp.

2001-05-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* cus-edit.el (custom-file): Fix last change.

2001-05-27  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el (byte-compile-file-form-autoload): Use the
	same definition in byte-compile-function-environment as `autoload'
	would put in `symbol-function'.

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand): Complete Dave's
	patch to correct the error message as well.

2001-05-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* cus-edit.el (custom-file): Don't assume we were invoked with -q
	unless ~/.emacs exists.

	* novice.el (enable-command): If user-init-file is nil or does not
	exist, default to "~/.emacs" (~/_emacs on DOS and, maybe, Windows).

2001-05-25  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-mode-syntax-table): Add ^.
	(tex-font-lock-keywords-1, tex-font-lock-keywords-2):
	Allow spaces around macro arguments.
	(tex-mode-map): Inherit from text-mode-map, but rebind \t to
	indent-for-tab-command.
	(latex-mode-map, plain-tex-mode-map): New keymaps.
	Inherit from tex-mode-map.
	(tex-common-initialization): Don't setup the keymap any more
	since it's now done right by define-derived-mode.
	(latex-mode): Set skeleton-end-hook to nil.
	(latex-skeleton-end-hook): Remove.
	(tex-latex-block, latex-insert-item): Simplify.
	(latex-syntax-after): Use following-char rather than char-after.
	(tex-discount-args-cmds, tex-count-words): New functions.

	* textmodes/tildify.el (tildify-ignored-environments-alist):
	Recognize \verb* as well.

	* progmodes/perl-mode.el (perl-mode): Use define-derived-mode.
	(perl-comment-indent): Simplify to let newcomment.el do its job.
	(perl-electric-terminator, perl-calculate-indent, perl-indent-exp)
	(perl-mark-function): Cleanup the namespace.
	(perl-calculate-indent): Don't be fooled by nested functions.

	* speedbar.el (speedbar-find-selected-file): RE-quote the filename.

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand):
	Fix the arg of `load'.  From Dave Love <fx@gnu.org>.

2001-05-25  Andrew Choi  <akochoi@i-cable.com>

	* international/titdic-cnv.el (ctlau-gb-converter): `\' should
	actually be `\\'.
	(ctlau-b5-converter): Likewise.

2001-05-24  Andrew Choi  <akochoi@i-cable.com>

	* international/titdic-cnv.el (quail-misc-package-ext-info):
	Change CTLauB.el to CTLau-b5.el.

2001-05-23  Stefan Monnier  <monnier@cs.yale.edu>

	* gud.el (gud-gdb-run-command-fetch-lines): Use forward-line
	rather than beginning-of-line to avoid problems with fields.
	(gud-perldb-massage-args): Use unless and push.
	(gud-chdir-before-run): New var.
	(gud-common-init): Use it.

2001-05-24  Andrew Choi  <akochoi@i-cable.com>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info):
	delete entries for chinese-ctlau and chinese-ctlaub.
	(quail-misc-package-ext-info): Add entries for chinese-ctlau and
	chinese-ctlaub.
	(ctlau-converter, ctlau-gb-converter, ctlau-b5-converter):
	New functions.

2001-05-22  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (custom-comment-show): Remove debug code.

	* language/japan-util.el (japanese-symbol-table): Fix handling of
	Japanese long tone sign.  From Kenichi Handa <handa@etl.go.jp>.

2001-05-21  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-jump-to-old-file, diff-update-on-the-fly):
	Renamed by removing the silly `-flag' suffix.
	(diff-mode, diff-minor-mode, diff-find-source-location): Update.

2001-05-20  Stefan Monnier  <monnier@cs.yale.edu>

	* replace.el (keep-lines-read-args): Use `copy-marker'.
	(how-many): Save excursion properly.
	(occur-mode): Use define-derived-mode.
	(perform-replace): Use with-current-buffer.

2001-05-20  Richard M. Stallman  <rms@gnu.org>

	* play/landmark.el (lm): Use "p" not "P" for interactive spec.

	* mail/rmail.el (rmail-retry-failure): Do save-window-excursion.

	* info.el (Info-read-subfile): Widen before finding the
	desired node in the subfile.

	* startup.el (command-line-1): When >2 files visited,
	leave the last one visible, and make that the selected window.

2001-05-20  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Add `defvaralias'.

2001-05-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/ccl.el (define-ccl-program): Fix a typo.
	From Pavel Janík <Pavel@Janik.cz>.

	* international/mule.el (decode-char): Fix a typo.  From Pavel
	Janík <Pavel@Janik.cz>.

	* textmodes/artist.el (artist-mode): Fix a typo.  From Pavel
	Janík <Pavel@Janik.cz>.

	* frame.el (automatic-hscrolling): Fix a typo.  From Pavel
	Janík <Pavel@Janik.cz>.

2001-05-18  Sam Steingold  <sds@gnu.org>

	* pcvs-defs.el (cvs-mode-map): Bind "z" to `kill-this-buffer'
	and [RET] to `cvs-mode-find-file'.

2001-05-18  John Wiegley  <johnw@gnu.org>

	* eshell/esh-ext.el (eshell-explicit-command-char): A new
	configuration variable, which determines the initial character
	that forces use of an external version of a command.  The default
	is *, but may be set to \, for example.

	* eshell/esh-ext.el (eshell-explicit-command):
	Use `eshell-explicit-command-char' instead of ?*.

	* eshell/esh-cmd.el (eshell/which):
	Use `eshell-explicit-command-char' instead of ?*.

	* eshell/em-cmpl.el (eshell-completion-command-name)
	(eshell-complete-commands-list): Use `eshell-explicit-command-char'
	instead of ?*.

2001-05-18  Gerd Moellmann  <gerd@gnu.org>

	* net/ange-ftp.el (ange-ftp-fix-name-for-vms): Reverse args of
	subst-char-in-string.
	(ange-ftp-after-parse-ls-hook): New variable.
	(ange-ftp-ls): Run that hook.
	From Peter Milliken <Peter.Milliken@GTECH.COM>.

	* tmm.el (tmm-get-keymap): Fix handling of :filter.
	(tmm-add-prompt): Bind buffer-read-only to nil when inserting
	text into *Completions*.

	* net/goto-addr.el (goto-address-at-point): Deal with URLs
	part of which look like email addresses.

2001-05-18  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (compile-files-CMD, bootstrap-clean-CMD):
	Use . instead of absolute path for lisp dir, to avoid bug in W2K
	cmd.exe's handling of FOR loops.
	(autoloads): Set find-file-suppress-same-file-warnings to t to
	avoid slew of spurious messages.

2001-05-18  Simon Josefsson  <simon@josefsson.org>

	* mail/smtpmail.el (maybe-append-domain): Renamed to
	`smtpmail-maybe-append-domain'.
	(smtpmail-via-smtp): Use the new name.

	* net/browse-url.el (browse-url-browser-function): Add kde.
	(browse-url-kde-program, browse-url-kde-args): New variables.
	(browse-url-kde): New function.

2001-05-18  Miles Bader  <miles@gnu.org>

	* simple.el (delete-horizontal-space, just-one-space):
	Use `constrain-to-field' instead of `field-end'/`field-beginning',
	because it's more efficient for large files.

2001-05-17  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-require-mime-maybe): New function.
	(rmail): Use it.
	(rmail-mode): Handle the case of finding Rmail files.

	* emacs-lisp/elp.el (elp-instrument-function): Handle advised
	functions.

2001-05-17  Stefan Monnier  <monnier@cs.yale.edu>

	* jit-lock.el (jit-lock-after-change): Check the font-lock-multiline
	text-property after moving to the beginning of line and regardless
	of the value of font-lock-multiline.

2001-05-17  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Ignore events on the mode-line.

	* net/ange-ftp.el (ange-ftp-write-region): Make sure to record the
	last coding system used before calling set-buffer-modified-p
	because that function changes last-coding-system.

2001-05-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (switch-to-buffer-other-window)
	(switch-to-buffer-other-frame): Add an xref to display-buffer in
	the doc string.

2001-05-17  Gerd Moellmann  <gerd@gnu.org>

	* language/slovak.el, language/czech.el: New maintainer.

2001-05-16  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent the :method
	sub-form of `defgeneric' correctly.

2001-05-16  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip) <defgroup>: Put it in `gud' group instead
	of `c'.

	* textmodes/outline.el (outline-font-lock-level): Remove the
	condition-case, test what outline-level returns instead, to
	ease debugging.

	* international/mule.el (auto-coding-regexp-alist): New user-option.
	(auto-coding-from-file-contents): New function.
	(set-auto-coding): Use it to determine a coding system.

2001-05-15  Gerd Moellmann  <gerd@gnu.org>

	* mouse.el (mouse-delete-other-windows): Doc fix.

	* emacs-lisp/lisp-mode.el (lisp-mode):
	Make font-lock-keywords-case-fold-search a buffer-local variable with
	make-local-variable before setting it.

2001-05-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/elp.el (elp-instrument-package): Don't allow empty
	prefixes.

2001-05-14  Gerd Moellmann  <gerd@gnu.org>

	* hexl.el (hexl-current-address): Print a message when called
	interactively.

2001-05-11  Stefan Monnier  <monnier@cs.yale.edu>

	* gud.el (gud-jdb-build-source-files-list): Fix paren typo.

	* pcvs-defs.el (cvs-mode-map): Don't rebind `undo'.

	* files.el (auto-mode-alist): Add *.perl and fix the *.<rev> case.

2001-05-11  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): If parameters have been changed in
	the init files which influence font selection, clear the face
	cache so that faces get realized with the new parameters.

	* Makefile.in (compile-files): Redirect output of chmod to /dev/null.

2001-05-10  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-mode): Force font-lock-multiline to t.

2001-05-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Don't switch the buffer to
	unibyte.  Suggested by Kenichi Handa <handa@etl.go.jp>.

2001-05-10  Gerd Moellmann  <gerd@gnu.org>

	* net/browse-url.el (browse-url-filename-alist): Allow UNC file
	names for MS-Windows and MS-DOS.  From Dan Holmsand <dan@eyebee.com>.

2001-05-09  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (eshell-convert-numeric-arguments):
	Annotated the documentation string to tell users about
	`eshell-no-numeric-conversions'.

	* eshell/esh-cmd.el (eshell-lisp-command): Don't perform numeric
	conversions if a Lisp function has the property
	`eshell-no-numeric-conversions' set to a non-nil value.

	* eshell/em-dirs.el, eshell/em-ls.el, eshell/em-script.el,
	eshell/em-unix.el, eshell/esh-ext.el, eshell/esh-cmd.el: Set the
	property `eshell-no-numeric-conversions' on the following
	functions (which all deal with filesystem entities, and never Lisp
	numerical values): eshell/cd, eshell/pushd, eshell/popd,
	eshell/ls, eshell/source, eshell/., eshell/man, eshell/rm,
	eshell/mkdir, eshell/rmdir, eshell/mv, eshell/cp, eshell/ln,
	eshell/cat, eshell/make, eshell/diff, eshell/locate, eshell/occur,
	eshell/which, eshell/addpath.

2001-05-09  John Wiegley  <johnw@gnu.org>

	* eshell/esh-arg.el (eshell-parse-argument-hook): If a number is
	encountered as an argument, don't convert it right away, but tag
	the first character of the string with the text properties
	`number', which signifies to `eshell-lisp-command' that the
	argument should be passed through `string-to-number' if it is
	actually used in the call to a Lisp function.

	* eshell/esh-cmd.el (eshell-lisp-command): Before calling a Lisp
	function, convert any string arguments that have been tagged as
	"numbers", by calling string-to-number.

	* eshell/esh-util.el (eshell-number-regexp): Now that number
	conversions only happen for Lisp function calls, the number regexp
	should now match all integer and floating point forms.

	* eshell/esh-proc.el: Disable `eshell-stop-process' and
	`eshell-continue-process', since they are both nonfunctional at
	the moment.
	(eshell-proc-initialize): Don't bind keys for
	`eshell-stop-process' or `eshell-continue-process'.

	* eshell/em-unix.el (eshell-shuffle-files):
	Apply `directory-file-name' before calling `file-name-directory'.

	* eshell/em-hist.el (eshell-add-to-history): Reference to
	`eshell-history-ring' needed to be `eshell-history-index'.

	* calendar/timeclock.el (timeclock-find-discrep):
	Initialize `elapsed' to 0.
	(timeclock-find-discrep): Set `timeclock-last-event-workday' if
	it's still nil.

2001-05-09  Stefan Monnier  <monnier@cs.yale.edu>

	* arc-mode.el (archive-int-to-mode): Construct the string directly.
	(archive-mode): Use capitalize.
	(archive-unique-fname): Use make-temp-file.

2001-05-09  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-interaction-mode): Doc fix.

2001-05-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* tar-mode.el (tar-extract): Pay attention to the value of
	coding-system-for-read, if it is non-nil.

	* calendar/holidays.el (holidays): Add an autoload cookie.
	From Pavel Janík <Pavel@Janik.cz>.

2001-05-08  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-workday-remaining):
	Changed logic for determining how much time is remaining.
	(timeclock-workday-elapsed): Don't accept a "relative" argument
	for the current day's elapsed time.  What could that have meant?
	(timeclock-workday-elapsed-string): No "relative" argument anymore.
	(timeclock-when-to-leave): Changed logic, similarly to what was
	done for `timeclock-workday-remaining'.
	(timeclock-find-discrep): Removed "today-only" argument, which had
	no meaning.  Fixed some more math problems.  The function now
	returns a three member list: (TOTAL-TIME-DISCREPANCY
	TODAYS-TIME-DISCREPANCY TODAYS-ELAPSED-TIME).

2001-05-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* w32-fns.el (convert-standard-filename): Start replacing slashes
	from the beginning of the file name, not from where the last
	invalid character was.  From "Andrew Maguire (SWW)"
	<Andrew.Maguire@Smallworld.co.uk>

2001-05-07  MORIOKA Tomohiko  <tomo@m17n.org>

	The following changes are to provide infrastructure for handling
	MIME messages to rmail.  They don't affect the original behavior
	if rmail-enable-mime is nil.

	* mail/rmail.el (rmail-insert-mime-forwarded-message-function)
	(rmail-search-mime-message-function)
	(rmail-search-mime-header-function): New variables.
	(rmail-expunge-and-save): Be sure to set-buffer to the Rmail buffer.
	(rmail-quit, rmail-get-new-mail): Bury `rmail-buffer' after
	`rmail-view-buffer' is hidden.
	(rmail-toggle-header): Likewise.  If rmail-enable-mime is non-nil,
	call rmai-show-mime-function.
	(rmail-display-labels): If rmail-enable-mime is non-nil, update
	mode-line-process of rmail-view-buffer.
	(rmail-set-attribute): Be sure to set-buffer to the Rmail buffer.
	(rmail-show-message): Be sure to call rmail-auto-file in the Rmail
	buffer.
	(rmail-next-message, rmail-next-undeleted-message): Be sure to
	set-buffer to the Rmail buffer.
	(rmail-message-regexp-p): If rmail-enable-mime is non-nil, call
	rmail-search-mime-header-function.
	(rmail-search-message): New function.
	(rmail-search): Call rmail-search-message to check if a message
	matches REGEXP, lastly update point after calling
	rmail-show-message.
	(rmail-undelete-previous-message, rmail-expunge-confirmed)
	(rmail-only-expunge): Be sure to set-buffer to the Rmail buffer.
	(rmail-reply): If rmail-enable-mime is non-nil, don't narrow to
	header region, refer to rmail-msgref-vector while setting the
	current buffer to rmail-buffer temporarily.
	(rmail-forward): Be sure to bind forward-buffer to the Rmail buffer.
	If rmail-enable-mime is non-nil, call
	rmail-insert-mime-forwarded-message-function instead of inserting
	forwarded message by itself.

	* mail/rmailkwd.el (rmail-read-label): Be sure to work in the
	Rmail buffer.
	(rmail-set-label, rmail-next-labeled-message): Likewise.

	* mail/rmailout.el (rmail-output-read-rmail-file-name): Be sure to
	set-buffer to the Rmail buffer.
	(rmail-output-to-rmail-file): Likewise.
	(rmail-output): Likewise.

	* mail/rmailsum.el (rmail-message-subject-p): Process the result
	of mail-fetch-field by rmail-summary-line-decoder.
	(rmail-new-summary): Be sure to go to the Rmail buffer.
	If rmail-enable-mime is non-nil, set rmail-summary-buffer of
	rmail-view-buffer to nil.
	(rmail-summary-undelete): If rmail-enable-mime is non-nil, pop to
	rmail-view-buffer.
	(rmail-summary-scroll-msg-up): Handle rmail-view-buffer, not
	rmail-buffer.
	(rmail-summary-scroll-msg-down): Likewise.
	(rmail-summary-beginning-of-message): Likewise.
	(rmail-summary-wipe): Likewise.
	(rmail-summary-toggle-header): Use save-window-excursion, not
	save-excursion.  Update point in rmail-view-buffer, not in
	rmail-buffer.
	(rmail-summary-reply): Before calling rmail-reply, set buffer to
	rmail-view-buffer, not rmail-buffer.

2001-05-07  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (custom-file): Signal an error if user-init-file is
	nil (running -q).

	* mail/rmailedit.el (rmail-edit-mode-hook): Add :version.

	* mail/smtpmail.el (smtpmail-warn-about-unknown-extensions):
	Add :version.

	* mail/smtpmail.el (smtpmail-warn-about-unknown-extensions):
	New option.
	(smtpmail-via-smtp): Print warnings about unknown SMTP extensions
	only if smtpmail-warn-about-unknown-extensions is set.

	* mail/rmail.el (rmail-mode-map): Use rmail-sort-by-labels
	instead of rmail-sort-by-keywords.

	* mail/rmailsort.el (rmail-sort-by-labels): Renamed from
	rmail-sort-by-keywords.

	* mail/rmailsum.el (rmail-summary-sort-by-labels): Renamed from
	rmail-summary-sort-by-keywords.  Doc fix.
	(rmail-summary-mode): Doc fix.

	* mail/rmail.el (rmail-edit): New Custom group.

	* mail/rmailedit.el (rmail-edit-mode): Doc fix.
	(rmail-edit-mode-hook): New user-option.

2001-05-05  Richard M. Stallman  <rms@gnu.org>

	* help.el (help-xref-symbol-regexp): Recognize "source of"
	and friends, meaning make a link to the source file.
	(help-make-xrefs): Handle "source of" and friends
	by constructing a link that visits the source file.

	* dabbrev.el (dabbrev-select-buffers-function): Doc fix.

2001-05-04  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/cperl-mode.el (cperl-font-lock-keywords)
	(cperl-font-lock-keywords-1, cperl-font-lock-keywords-2):
	Renamed from perl-font-lock-keywords to avoid clashes.
	(cperl-mode, cperl-load-font-lock-keywords, cperl-init-faces)
	(cperl-load-font-lock-keywords-1, cperl-load-font-lock-keywords-2):
	Updated correspondingly.

	* diff-mode.el (diff-nonexistent-face, diff-font-lock-keywords):
	Typo `nonexistant' -> `nonexistent'.

2001-05-04  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-electric-delete, c-electric-delete-forward):
	Split `c-electric-delete' into two functions where
	`c-electric-delete-forward' always deletes forward and
	`c-electric-delete' only contains the code necessary for XEmacs to
	choose between backward and forward deletion.

	* cc-mode.el: `c-electric-delete-forward' is now bound to C-d to
	get the electric behavior on that key too.
	(c-fill-paragraph): Fixed bogus direct use of
	c-comment-prefix-regexp, which caused an error when it's a list.

2001-05-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired-aux.el (dired-diff): Doc fix.

	* dired.el (dired-diff): Likewise.

2001-05-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (ispell-change-dictionary): Doc fix.

2001-05-02  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-next-action-on-file): Only force buffer+file to writable
	if both the buffer and the file are read-only.

	* progmodes/sh-script.el (sh-prev-line): Look for sh-heredoc-face
	rather than font-lock-string-face.
	(sh-get-indent-info): Treat heredocs like strings.

2001-05-02  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfmt.el (texinfo-format-parse-args): Don't consume
	a newline following `}'.
	(texinfo-format-email): New function.
	(toplevel): Use texinfo-format-email for @email.
	(texinfo-format-kbd-regexp, texinfo-format-kbd-end-regexp):
	Add `display'.
	(texinfo-sort-region): Goto point-min before sorting.
	(texinfo-set): Remove leading white space from value.
	From yagi@is.titech.ac.jp.

	* replace.el (query-replace-regexp-eval): Doc fix.

2001-05-01  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-nonexistant-face): New face.
	(diff-font-lock-keywords): Use it.

2001-04-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* font-lock.el (font-lock-mode): Doc fix.

	* dired-aux.el (dired-do-rename-regexp, dired-do-copy-regexp)
	(dired-do-hardlink-regexp, dired-do-symlink-regexp): Doc fix.

2001-04-30  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-font-lock-heredoc): Allow optional
	backslash at the start of the here-document delimiter.
	(sh-font-lock-syntactic-keywords): Likewise.

	* mail/rmail.el (rmail-message-regexp-p): Yet another fix.

2001-04-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/tty-colors.el (tty-color-define, tty-color-off-gray-diag)
	(tty-color-translate, tty-color-by-index, tty-color-values)
	(tty-color-desc): Doc fix.

2001-04-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired-aux.el (dired-do-create-files, dired-do-copy)
	(dired-do-symlink, dired-do-hardlink, dired-do-rename):
	Mention dired-dwim-target in the doc string.

2001-04-28  Miles Bader  <miles@gnu.org>

	* dabbrev.el (dabbrev--ignore-buffer-p): New function.
	(dabbrev--find-expansion): Use it.
	(dabbrev--select-buffers): Don't select ignored buffers.

2001-04-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-message-regexp-p): Don't match before headers.

2001-04-26  Richard M. Stallman  <rms@gnu.org>

	* dabbrev.el: Add doc strings for some functions.
	(dabbrev--eliminate-newlines): New variable.
	(dabbrev--substitute-expansion): Convert newlines to spaces
	if dabbrev--eliminate-newlines is set.
	If abbrev and expansion are both all-lower-case,
	leave dabbrev--last-case-pattern nil.

2001-04-26  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-message-regexp-p): Use rfc822-goto-eoh
	if necessary, like in rmail-show-message.

2001-04-26  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Color specified by number is forced to be float number.
	(ps-print-version): New version number (6.5.1.1).
	(ps-header-frame-alist, ps-footer-frame-alist): Adjust color
	initialization.
	(ps-prefix-quote): New internal var.
	(ps-print-quote): New fun.
	(ps-setup, ps-output-frame-properties, ps-float-format)
	(ps-format-color): Code fix.
	(ps-plot-region): Eliminate redundant foreground color text setting.

2001-04-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* dabbrev.el (dabbrev--select-buffers): Add a doc string.

2001-04-25  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (tty-handle-reverse-video): Don't set inverse-video.

2001-04-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-additional-directory-list): Doc fix.

	* find-lisp.el (find-lisp-find-dired-filter)
	(find-lisp-find-dired-subdirectories, find-lisp-find-dired):
	Add autoload cookies.  From Richard Y. Kim <ryk@dspwiz.com>.

2001-04-25  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/make-mode.el (makefile-font-lock-keywords):
	Rationalize the rules for includes and conditionals and use the
	keyword face for them.

	* faces.el (modify-face): Add compatibility for non-interactive use.

2001-04-24  John Wiegley  <johnw@gnu.org>

	* eshell/esh-cmd.el (eshell-find-alias-function): Corrected the
	fix from last night, since it wasn't finding eshell/cd.

2001-04-24  Gerd Moellmann  <gerd@gnu.org>

	* rect.el (string-rectangle): Revert to 20.x behavior.
	(replace-rectangle): Make it an alias for string-rectangle.
	(string-insert-rectangle): New function.

2001-04-23  John Wiegley  <johnw@gnu.org>

	* eshell/em-unix.el (eshell/diff): Fixed problems that were
	occurring with Emacs 21's diff.el/compile.el interaction layer.

2001-04-23  Colin Walters  <walters@cis.ohio-state.edu>

	* eshell/esh-cmd.el (eshell-find-alias-function): Return t in the
	case where the function was defined in a file, but not part of an
	eshell module.

2001-04-23  John Wiegley  <johnw@gnu.org>

	* eshell/em-smart.el (eshell-smart-redisplay): Added some safety
	code to work around a redisplay problem I've been having.

2001-04-23  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-day-required): If the time
	required for a particular day is not set, use `timeclock-workday'.
	(timeclock-find-discrep): Added some sample code in a comment.

	* eshell/eshell.el (eshell-command): Made a few changes so that
	`eshell-command' could be called programmatically.

	* eshell/esh-mode.el (eshell-non-interactive-p): Moved to eshell.el.

	* eshell/eshell.el (eshell-non-interactive-p): Moved from esh-mode.el.

2001-04-23  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el: Updated copyright.
	(timeclock-generate-report): Don't report the daily or two-week
	total, if no time has been worked in that period.
	(timeclock-find-discrep): Moved call to `file-readable-p'; removed
	final computational form, which was unnecessary; corrected a
	parsing problem when timeclock-relative was nil.

2001-04-23  Kahlil Hodgson  <kahlil@discus.anu.edu.au>

	* calendar/timeclock.el (timeclock-modeline-display): Check if
	`list-entry' is null.
	(timeclock-use-display-time): The first argument to `set-variable'
	must be a symbol.

2001-04-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/calendar.el (diary-entry-marker)
	(calendar-today-marker, calendar-holiday-marker):
	Use display-color-p instead of window-system.
	(calendar-mode-map, calendar-mode): Use display-popup-menus-p
	instead of window-system.
	(calendar-hide-window): Use display-multi-frame-p instead of
	window-system.

	* calendar/cal-x.el (calendar-two-frame-setup)
	(calendar-only-one-frame-setup, calendar-one-frame-setup):
	Use display-multi-frame-p instead of window-system.

2001-04-23  Gerd Moellmann  <gerd@gnu.org>

	* play/fortune.el (fortune-from-region): Use `eq' instead of `eql'.

	* textmodes/ispell.el, emacs-lisp/checkdoc.el,
	* progmodes/ebrowse.el, play/fortune.el: Fix autoload cookies.

2001-04-23  Alex Schroeder  <alex@gnu.org>

	* goto-addr.el: Instead of defining line-beginning-position and
	line-end-position a defalias is used for point-at-bol and point-at-eol.

2001-04-23  Alex Schroeder  <alex@gnu.org>

	* goto-addr.el: Added XEmacs compatibility code.
	(goto-address-highlight-keymap): Made keybindings XEmacs compatible.

2001-04-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/paragraphs.el (sentence-end): Doc fix.

2001-04-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-escape-newlines-and-send): New function.
	(sql-db2): Set comint-input-sender to sql-escape-newlines-and-send.

2001-04-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-db2-program): New option.
	(sql-db2-options): New option.
	(sql-db2): New function.

2001-04-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-mode-menu): Added highlighting entries.
	(sql-highlight-oracle-keywords): New function.
	(sql-highlight-postgres-keywords): New function.
	(sql-highlight-ansi-keywords): New function.

2001-04-20  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-help): Doc change.

2001-04-19  Karl Fogel  <kfogel@collab.net>

	* saveplace.el (save-place-alist-to-file): Removed no-effect code
	that inserted file content only to delete it immediately.
	Probably a cut-and-paste bug.  Thanks to Juanma Barranquero
	<lektu@terra.es> for the patch.

2001-04-19  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-defsyntax): Unquote `doc'.

2001-04-18  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Comment out the spec
	for defmethod.

	* comint.el (comint-cr-magic): New function.
	(toplevel): Add it to comint-preoutput-filter-functions.

2001-04-18  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (EMACSLOADPATH): Define.
	(custom-deps, autoloads, .el.elc, compile-files-CMD, compile-files-SH)
	(recompile): Remove stuff to set EMACSLOADPATH.

2001-04-18  Gerd Moellmann  <gerd@gnu.org>

	* language/slovak.el ("Slovak"): Add tutorial entry.

	* net/browse-url.el (browse-url-new-window-flag): Renamed from
	browse-url-new-window-p.

2001-04-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-menu-update): When there are no menus and/or no
	cross references in the node, make the respective items of the
	Info menu-bar menu inactive.

2001-04-17  Gerd Moellmann  <gerd@gnu.org>

	* indent.el (indent-for-tab-command): Call indent-line-function
	with no argument if PREFIX-ARG is non-nil.

	* frame.el (delete-other-frames): Handle minibuffer-only frames.

2001-04-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* vc-cvs.el (vc-cvs-print-log, vc-cvs-diff): Don't invoke CVS as
	an async subprocess if start-process is unavailable.  Suggested by
	Tim Van Holder <tim.van.holder@pandora.be>.

2001-04-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-additional-directory-list): Doc fix.  Suggested by
	Kai Großjohann <Kai.Grossjohann@CS.Uni-Dortmund.DE>.

2001-04-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add an entry for the "info"
	manual.

2001-04-13  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-defs.el (cvs-mode-map): Bind C-o like in dired.
	(cvs-menu): Add a few entries.

	* pcvs.el (cvs-addto-collection): Don't merge MESSAGE fileinfos.
	(cvs-update-filter): Only advertise `cvs-mode-delete-lock' if the
	lock file appears to be reachable from Emacs.
	(cvs-mode-mark-on-state, cvs-mode-display-file): New functions.
	(cvs-mode-find-file): Look for cvs-header-face rather than
	cvs-dirname-face (which doesn't exist).
	(cvs-mode-find-file): Allow `other' to be set to `dont-select'.

	* pcvs-parse.el (cvs-parse-run-table): Remove misleading text.

2001-04-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* emulation/pc-select.el (pc-selection-mode): Don't turn on
	normal-erase-is-backspace on a tty.  Instead, bind some keys such
	as [delete] directly, like pc-select.el did before
	normal-erase-is-backspace was invented.

2001-04-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* ls-lisp.el (ls-lisp-format): Leave a blank before "root".

2001-04-11  John Wiegley  <johnw@gnu.org>

	* eshell/em-ls.el (eshell-ls-insert-directory):
	Set font-lock-defaults to nil, to prevent fontification in dired
	buffers, if Eshell's ls is being used.

2001-04-11  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-completing-read): New function.
	(timeclock-ask-for-project, timeclock-ask-for-reason):
	Call `timeclock-completing-read'.

	* eshell/em-alias.el (eshell-command-aliased-p): `assoc' was
	required where `member' was being used.

2001-04-11  Colin Walters  <walters@cis.ohio-state.edu>

	* eshell/em-hist.el (eshell-previous-matching-input):
	Don't display "History item" if the minibuffer is active.

2001-04-11  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Output a newline after printing
	an error from loading the window system's init file.

2001-04-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texinfo.el (texinfo-font-lock-keywords):
	Add fontification for @value, @dfn, @dmn, @acronym, @anchor, and
	@inforef.  Add an OVERRIDE of `keep' to highlight specs of
	keywords whose arguments routinely include @@.

2001-04-10  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/advice.el (ad-make-advised-definition):
	Construct advice for subrs differently.

	* textmodes/paragraphs.el (forward-sentence): Put the sentence-end
	regexp in parentheses when building the regexp for searching backwards.

	* simple.el (completion-list-mode-finish): New function.
	(toplevel): Add completion-list-mode-finish to temp-buffer-show-hook.

	* language/european.el ("Polish"): Change sample text.
	From jsbien@mimuw.edu.pl (Janusz S. Bień).

	* progmodes/sh-script.el (sh-indent-line): Add optional PREFIX-ARG
	parameter.

	* faces.el (menu): Doc fix.

2001-04-10  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Footer implementation.  Doc fix.
	(ps-print-version): New version number (6.5.1).
	(ps-header-frame-alist): New customization var for header frame
	properties.
	(ps-line-number-color): New customization var for line number color.
	(ps-footer-offset, ps-footer-line-pad, ps-print-footer)
	(ps-print-footer-frame, ps-footer-frame-alist, ps-footer-lines)
	(ps-footer-font-family, ps-footer-font-size, ps-left-footer)
	(ps-right-footer): New customization vars for footers.
	(ps-footer-pad, ps-footer-font-size-internal): New internal vars for
	footers.
	(ps-setup, ps-get-page-dimensions, ps-generate-header-line)
	(ps-generate-header, ps-begin-file, ps-begin-job, ps-begin-page):
	Code fix.
	(ps-prologue-file): Indentation fix.
	(ps-print-quote): Fun eliminated.
	(ps-value, ps-get, ps-put, ps-del): New funs for alist handling.
	(ps-output-frame-properties): New fun.
	(ps-fonts, ps-font-number, ps-rgb-color, ps-end-page, ps-next-page)
	(ps-skip-newline): Replace defun by defsubst.

2001-04-10  Colin Walters  <walters@cis.ohio-state.edu>

	* eshell/eshell.el (eshell-command): Needed a "%s" format
	specifier, in case the buffer contains percent characters.

2001-04-10  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-generate-report): Added a
	missing insert of the project name.

2001-04-09  Gerd Moellmann  <gerd@gnu.org>

	* obsolete/profile.el: Moved from emacs-lisp/.

	* Makefile.in (nonobsolete_setwins): New macro.
	(finder-data): Use it instead of `setwins'.
	From: Dave Love <fx@gnu.org>.

	* server.el (server-visit-files): Set server-existing-buffer correctly.
	(server-visit-files): Run server-visit-hook after going to
	line 1 so that the hook can set point as it sees fit.

	* bindings.el (mode-line-modified): Unify help messages.

2001-04-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-fns.el (dos-8+3-filename): Rename from dos-truncate-to-8+3.
	All callers changed.

2001-04-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/titdic-cnv.el (miscdic-convert): For MS-DOS, if
	long file names aren't supported, truncate the file names in
	quail-misc-package-ext-info to 8+3 before matching them against
	FILENAME.

	* dos-fns.el (dos-truncate-to-8+3): New function.

	* progmodes/compile.el (grep-compute-defaults): Use null-device
	instead of literal /dev/null. Reported by Jens Schmidt
	<schmidt@mathematik.uni-kl.de>.

	* simple.el (normal-erase-is-backspace-mode): Doc fix.

2001-04-06  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el: Add unknown maintainer.
	(sgml-tag): Pass `str' explicitly through skeleton-transformation.
	(html-mode-map): Use set-keymap-parent.

2001-04-06  Dave Love  <fx@gnu.org>

	* international/encoded-kb.el (encoded-kbd-self-insert-ccl):
	Remove redundant string-to-list.

2001-04-05  Stefan Monnier  <monnier@cs.yale.edu>

	* composite.el (reference-point-alist): Doc fix.

2001-04-05  Sam Steingold  <sds@gnu.org>

	* font-lock.el (font-lock-keywords-case-fold-search):
	Make buffer-local.  This fixes a very annoying bug when loading a Lisp
	file made font-lock case-insensitive.

2001-04-05  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (defface menu): Doc fix.

	* wid-edit.el (widget-color-sample-face-get): Don't make
	faces for undefined colors.

	* version.el (emacs-version): Include LessTif/Motif version info.

2001-04-04  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el: Eliminate cl package dependence.
	(char-valid-p, multibyte-string-p, string-make-multibyte): Define funs
	if they aren't defined yet.
	(ps-mule-encode-header-string, ps-mule-header-string-charsets):
	Eliminate cl package dependence.

2001-04-04  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/cc-cmds.el (c-outline-level):
	Bind buffer-invisibility-spec.  Originally from Dave Love, but
	got lost when incorporating version 5.26.

2001-04-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* emulation/pc-select.el (pc-selection-mode):
	Call normal-erase-is-backspace-mode instead of binding
	keys individually.

	* cus-load.el (normal-erase-is-backspace): Use it instead of
	delete-key-deletes-forward.

	* startup.el (command-line): Use normal-erase-is-backspace and
	normal-erase-is-backspace-mode.

	* simple.el (normal-erase-is-backspace): Rename from
	delete-key-deletes-forward.  Doc fix.
	(normal-erase-is-backspace-mode): Rename from
	delete-key-deletes-forward-mode.  Doc fix.
	Run normal-erase-is-backspace-hook.

	* dired.el (dired-move-to-filename-regexp): Support file sizes in
	``human-readable'' format produced by GNU `ls'.
	(dired-move-to-filename-regexp): Recognize ISO format dates.
	From Paul Eggert <eggert@twinsun.com>.

2001-04-04  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-keywords-list, lm-keywords-finder-p):
	New functions.
	(lm-verify): Check keywords.
	From Eric M. Ludlam <eric@siege-engine.com>.

2001-04-03  Eric M. Ludlam  <eric@siege-engine.com>

	* speedbar.el (speedbar-insert-image-button-maybe): Check for
	`xemacs' feature instead of for the function `set-extent-property'.

2001-04-03  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/mh-utils.el (mh-folder-hist): New var.
	(mh-prompt-for-folder): Use it and pass `default' to completing-read.

2001-04-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexl-scroll-up): If scrolling gets outside the hexl
	region, position point on the first or last 16-byte group.
	(hexl-mode-map): Bind C-Home and C-End to hexl-beginning-of-buffer
	and hexl-end-of-buffer.  Bind End and Home to hexl-end-of-line and
	hexl-beginning-of-line.

2001-04-03  Gerd Moellmann  <gerd@gnu.org>

	* icomplete.el (icomplete-mode): Treat an argument like other
	modes do.

	* startup.el (fancy-splash-head): Use splash8.xpm for color
	depth 8.

	* emacs-lisp/checkdoc.el (checkdoc-common-verbs-wrong-voice):
	Add an entry for ``converts''.

	* language/slovak.el ("Slovak"): Add documentation string.
	From Pavel@Janik.cz (Pavel Janík).

	* language/czech.el ("Czech"): Add documentation string.
	From Pavel@Janik.cz (Pavel Janík).

	* ps-mule.el (ps-mule-font-info-database-bdf): Change `isci24-etl.bdf'
	to `isci24-mule.bdf'.  From: Kenichi Handa <handa@etl.go.jp>.

2001-04-02  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/mail-extr.el (mail-extr-delete-char, mail-extr-safe-move-sexp)
	(mail-extr-skip-whitespace-forward, mail-extr-nuke-char-at)
	(mail-extr-skip-whitespace-backward, mail-extr-undo-backslash-quoting):
	Use `defsubst' rather than a macro to ease debugging.
	(mail-extr-last): Remove (use `last' instead).
	(mail-extract-address-components): Properly reset the syntax-table
	after parsing an address.  Use `last' rather than mail-extr-last.
	Make sure the end marker stays at the very end.

2001-04-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/titdic-cnv.el (miscdic-convert): Fix a typo in the
	last change.

2001-04-02  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Line and paragraph spacing feature.  Region to cut
	out when printing.  Doc fix.
	(ps-print-version): New version number (6.5).
	(ps-line-spacing, ps-paragraph-spacing, ps-paragraph-regexp):
	New vars.  Line and paragraph spacing feature.
	(ps-begin-cut-regexp, ps-end-cut-regexp): New vars.  Region to cut
	out when printing.
	(ps-setup, ps-nb-pages, ps-get-page-dimensions, ps-begin-file)
	(ps-get-font-size, ps-begin-job, ps-continue-line)
	(ps-plot-region): Code fix.
	(ps-print-prologue-2): Var eliminated.
	(ps-line-spacing-internal, ps-paragraph-spacing-internal):
	New internal vars.
	(ps-get-size): New fun.
	(ps-output-string-prim, ps-init-output-queue, ps-print-page-p)
	(ps-next-line): Replace defun by defsubst.
	(ps-mule-plot-string): Autoload doc fix.

	* ps-bdf.el: XEmacs compatibility.  Doc fix.
	(installation-directory, coding-system-for-read): Declare vars if
	it's not declared yet.
	(bdf-read-font-info, bdf-read-bitmap, bdf-get-bitmaps): Code fix.

	* ps-mule.el: XEmacs compatibility.  Doc fix.
	(leading-code-private-22): Declare var if it's not declared yet.
	(charset-bytes, charset-dimension, charset-id, charset-width)
	(find-charset-region, split-char, char-width, chars-in-region)
	(forward-point, decompose-composite-char, encode-coding-string)
	(coding-system-p, ccl-execute-on-string, define-ccl-program):
	Define funs if not defined yet.
	(encode-composition-rule, find-composition): Define funs if not
	loaded yet.
	(ps-mule-prologue): PostScript code fix.

2001-04-02  Kenichi Handa  <handa@etl.go.jp>

	* ps-mule.el (ps-mule-generate-font): New arg HEADER-P.  If it is
	non-nil, generate font for the header strings.
	(ps-mule-prepare-font): Likewise.
	(ps-mule-generate-glyphs): Likewise.
	(ps-mule-string-encoding): Likewise.
	(ps-mule-header-charsets): New variable.
	(ps-mule-encode-header-string): New function.
	(ps-mule-header-string-charsets): New function.
	(ps-mule-begin-job): Check charsets in the header strings.  If there
	are non-ASCII and non-Latin1 charsets, prepare fonts for them.

	* ps-print.el (ps-generate-header-line): Encode the header string by
	ps-mule-encode-header-string.
	(ps-mule-encode-header-string): Declare autoload.

2001-04-02  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (cursor-in-non-selected-windows):
	Replaces show-cursor-in-non-selected-windows.

2001-03-31  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info):
	Delete entries for "chinese-py" and "chinese-ziranma".
	(quail-misc-package-ext-info): New variable.
	(tsang-quick-converter): New function.
	(tsang-b5-converter, quick-b5-converter, tsang-cns-converter)
	(quick-cns-converter, py-converter, ziranma-converter)
	(miscdic-convert, batch-miscdic-convert): New functions.

2001-03-30  Kenichi Handa  <handa@etl.go.jp>

	* international/utf-8.el (ccl-encode-mule-utf-8): Fix handling of
	eight-bit-control chars.

	* international/encoded-kb.el (encoded-kbd-self-insert-ccl):
	Reduce making temporary vector (suggested by Dave Love).

2001-03-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (transient-mark-mode): Mention ESC ESC ESC in the doc
	string as well.

2001-03-30  Andreas Schwab  <schwab@suse.de>

	* files.el (backup-directory-alist): Fix typo.

2001-03-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* time-stamp.el (time-stamp-format): Doc fix.  From Paul Eggert
	<eggert@twinsun.com>.

2001-03-30  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-comment-region): Fix typo.

2001-03-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (transient-mark-mode): Mention C-g in the doc string.

2001-03-30  Miles Bader  <miles@gnu.org>

	* subr.el (interactive-form): Fix paren typo.

2001-03-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/profile.el: Say that it's obsolete in the header
	line, so that finder.el puts that into its data-base.
	Suggested by Alex Schroeder <alex@gnu.org>.

2001-03-29  Paul Eggert  <eggert@twinsun.com>

	* mail/emacsbug.el (report-emacs-bug): Report LC_COLLATE,
	LC_MESSAGES, LC_MONETARY, LC_NUMERIC, and LC_TIME as well.

2001-03-29  Stefan Monnier  <monnier@cs.yale.edu>

	* generic.el (generic-mode-set-comments): Use "" rather than nil
	for comment-end.

2001-03-29  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/advice.el (ad-make-advised-definition):
	Call interactive-form to obtain the interactive spec of subrs.

	* subr.el (interactive-form): New function.

2001-03-29  Andre Spiegel  <spiegel@gnu.org>

	* vc-sccs.el (vc-sccs-register): Use relative file names.

2001-03-28  Gerd Moellmann  <gerd@gnu.org>

	* bookmark.el (bookmark-get-bookmark): Handle case that
	BOOKMARK is not a string.

	* image.el (image-type-regexps): Change type for PS files
	to `postscript'.

	* subr.el (read-passwd): Clear command history after each
	character entered.  From: Stephen Gildea
	<gildea@stop.mail-abuse.org>.

2001-03-27  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-save-init-file): Locally bind
	print-length to nil.

2001-03-26  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el: Some doc fixes.
	(flyspell-maybe-correct-transposition)
	(flyspell-maybe-correct-doubling): Use a temporary buffer

	* textmodes/ispell.el (ispell-parse-output): Doc fix.

	* emacs-lisp/byte-opt.el (byte-optimize-while)
	(byte-optimize-form-code-walker): Diagnose too few arguments
	for `if' and `while'.

2001-03-26  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info):
	Prepend `\' to "\<quail-translation-docstring>".

2001-03-26  Gerd Moellmann  <gerd@gnu.org>

	* autorevert.el (global-auto-revert-non-file-buffers):
	Remove duplicate defcustom.

2001-03-26  Miles Bader  <miles@gnu.org>

	* international/latin1-disp.el (latin1-char-displayable-p):
	Add leading "-" for X font pattern.

2001-03-26  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-coding-system):
	For raw-text and emacs-mule, don't add anymore text about what
	charsets they can encode.

2001-03-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (view-lossage): Mention open-dribble-file in the doc
	string.  Suggested by Riku Saikkonen <rjs@lloke.dna.fi>.

2001-03-23  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-internal-list): Fix bogus logic.
	(skeleton-pair-insert-maybe): Don't pair after a backslash.

2001-03-23  Kenichi Handa  <handa@etl.go.jp>

	* international/encoded-kb.el (encoded-kbd-self-insert-ccl):
	Call ccl-execute-on-string directly so that CCL program handling
	multibyte sequence can work correctly.
	(encoded-kbd-setup-keymap): Fix the default value of `valid-codes'
	property of the coding system.

2001-03-23  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-individual-paragraphs-prefix):
	Fix transcription typo.

2001-03-22  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el: Add buffer local variables to toggle testing of
	whitespaces in buffers without affecting the default values.
	Bump version to 3.0 to account for a few other changes.
	(whitespace-toggle-ateol-check, whitespace-toggle-leading-check)
	(whitespace-toggle-trailing-check, whitespace-toggle-indent-check)
	(whitespace-toggle-spacetab-check): New functions.

2001-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* obsolete/cplus-md.el: Moved from progmodes/cplus-md.el.

2001-03-21  Gerd Moellmann  <gerd@gnu.org>

	* bs.el (bs-cycle-next, bs-cycle-previous): Fix handling of
	bs-cycle-configuration-name.  From Juanma Barranquero
	<lektu@terra.es>.

	* Makefile.in, makefile.w32-in (COMPILE_FIRST): Add cc-mode.el
	and cc-vars.el.

	* mail/sendmail.el (sendmail-send-it): Don't parse Resent-*
	headers.  Always invoke sendmail with option -t.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* Release of cc-mode 5.28.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-mode.el, cc-vars.el (c-common-init, c-default-style):
	Removed the hardcoded switch to "java" style in Java mode.
	It's instead taken care of by the default value for c-default-style.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-lineup-math): Fix bug where lineup was
	triggered by equal signs in string literals.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fill-paragraph): Fixed bug in the paragraph
	limit detection when at the ends of the buffer.

	* cc-engine.el (c-guess-basic-syntax): Removed bogus check for
	"for" statement clause in case 7F; a better one is done
	earlier in case 7D anyway.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-guess-fill-prefix): Improved the heuristics
	somewhat more and did a small optimization.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-beginning-of-statement, c-end-of-statement):
	Use the limit argument only to limit the syntactic context
	search, not to limit the actual movement.

	* cc-cmds.el (c-beginning-of-statement): Move by sentence
	inside multiline strings, just like in comments.  Also various
	fixes to the paragraph and comment prefix recognition, block
	comment ender handling etc.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fill-paragraph): Take more care to preserve
	the relative position of the point.

	* cc-cmds.el (c-electric-continued-statement): New function to
	use as abbrev hook to reindent for keywords such as "else"
	that continues an earlier statement.

	* cc-menus.el (cc-imenu-c++-generic-expression): Treat structs
	like classes.

	* cc-mode.el (c-mode, c++-mode, java-mode, objc-mode)
	(pike-mode): Populate the default abbrev tables to reindent for
	keywords such as "else" that can continue earlier statements.
	Abbrev mode is therefore turned on by default now.  (Note that
	this doesn't apply to idl-mode, since IDL afaik doesn't have
	statements at all.)

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-inside-bracelist-p): Fix for handling
	bracelists where the declaration contains template arguments.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-comment-indent):
	Use `c-get-syntactic-indentation' to correctly calculate the
	syntactic indentation.  Fixes bug with lineup functions that
	return vectors.

	* cc-engine.el (c-get-syntactic-indentation): Split the
	indentation sum calculation from `c-indent-line' to a separate
	function.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-beginning-of-statement, c-comment-indent):
	Fixed places where it was assumed that preprocessor directives
	have to start in column zero.

	* cc-engine.el (c-beginning-of-member-init-list): Handle C++
	template arguments after a class identifier properly.

	* cc-engine.el (c-guess-basic-syntax): Treat initializer brace
	lists for `new Foo[]' constructs in Java as expressions and
	not top level definition brace lists on the top level, so that
	they'll get indented consistently with the same type of
	expression in a normal block.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fill-paragraph): The kludge that checks
	whether the adaptive filling package fails to keep the comment
	prefix is now kludged further to check for filladapt-mode
	which doesn't have that problem. This is really icky, but it's
	the only way that works with the current misfeatures/bugs in
	both adaptive-fill-mode and filladapt-mode.

	* cc-cmds.el (c-fill-paragraph): Made the way the paragraph
	around point is recognized more robust.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el, cc-engine.el, cc-lobotomy.el (c-state-cache)
	(c-in-literal-cache, c-auto-fill-prefix, c-lit-limits)
	(c-lit-type): Fixed all internal variables used dynamically so
	that they are always bound.

	* cc-cmds.el, cc-engine.el: Improved recovery of syntactic
	errors:

	(c-indent-region): Fixed reporting of syntactic errors so that
	the region is fully reindented even when an error occurs.
	The last syntactic error is printed afterwards.  Also cleanup up a
	whole lot of code that tried to optimize indentation of whole
	sexps but in reality accomplishes nothing.

	(c-indent-sexp): Use c-indent-region.

	(c-parsing-error): Changed this variable to hold the message
	for any syntactic error that is discovered.

	(c-parse-state): Search backward from point instead of the bod
	position when the latter is invalid.  This makes CC Mode
	recover faster when there are unbalanced close braces.

	(c-backward-to-start-of-if): Use c-parsing-error to report
	dangling "else" clauses instead of throwing an error, and fall
	back to a reasonable position.

	(c-indent-line): Added argument to avoid reporting syntactic errors.

	(c-show-syntactic-information): Don't report any syntactic errors.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-beginning-of-statement): Fixed bugs with
	paragraph recognition when moving by sentence in literals.

	* cc-langs.el (c-Java-javadoc-paragraph-start): Modified paragraph
	start regexp for javadoc to recognize javadoc markup in general instead
	of a specific set of keywords, to be more future-safe.

	(c-Pike-pikedoc-paragraph-start)
	(c-Pike-pikedoc-paragraph-separate): New regexps to recognize
	pikedoc markup.

	* cc-mode.el: Fixed initialization and use of c-current-comment-prefix.

	(pike-mode): Initialize paragraph settings pikedoc recognition.

	* cc-vars.el (c-default-style): Made a nicer Customize widget.

	(c-comment-prefix-regexp): Made it possible to use an
	association list on this to specify mode specific regexps.
	The default value now use a special regexp in Pike mode to
	recognize pikedoc markup.

	(c-current-comment-prefix): New variable containing the actual
	regexp from c-comment-prefix-regexp for the current buffer.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-electric-brace): Fixed check for special brace
	lists: We can't look at the syntax, since a brace list can get
	recognized as a plain statement-cont.

	* cc-engine.el (c-guess-basic-syntax): Fixed bug where a
	special brace list opener broken over two lines got recognized
	as a statement on the second line.  Case 9A changed.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-electric-brace): Fixed bug in c-state-cache
	adjustment after line is reindented.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-point): Added optional argument for position
	to use instead of the current point.

	* cc-defs.el, cc-engine.el (c-add-class-syntax): Do not add
	the in-expression block symbols when the construct starts at
	boi, to avoid the extra level of indentation in that case.
	Cases 4, 16A and 17E affected.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el: Use `indent-according-to-mode' instead of direct
	calls to `c-indent-line', to adhere better to Emacs conventions.

	* cc-engine.el (c-indent-line): Use the syntax already bound
	to `c-syntactic-context', if there is any.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-get-offset): Fixed bug where the indentation
	wasn't added up correctly when a lineup function returned nil.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-collect-line-comments): Fixed bug where
	empty lines were ignored when collecting line comments backwards.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-lineup-dont-change): Return an absolute
	indentation column to work correctly in the case when several
	syntactic elements are processed for the same line.

	* cc-engine.el, cc-styles.el, cc-vars.el (c-evaluate-offset)
	(c-get-offset, c-indent-line, c-valid-offset, c-read-offset)
	(c-set-offset): Added absolute indentation column settings by
	using the vector type.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el, cc-vars.el (c-electric-paren, c-cleanup-list):
	Implemented two new cleanups `space-before-funcall' and
	`compact-empty-funcall'.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-paren-re, c-identifier-re): Two new macros for
	helping building regexps.

	* cc-engine.el (c-on-identifier): New function for detecting
	identifiers.  It takes keywords into account.

	* cc-langs.el, cc-mode.el: Added regexps for complete keyword
	lists.  `c-keywords' is set to a regexp matching all keywords
	in the current language.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-beginning-of-statement-1): Added '#' to the
	list of characters to skip backwards over at the beginning of
	a statement, since it can precede string literals in Pike.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-guess-fill-prefix): Fixed bug with prefix
	recognition when standing on the last line in a C++ comment
	with nothing but whitespace after the prefix.

	* cc-engine.el (c-backward-to-start-of-if): Fixed bug when
	given no limit argument.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-inside-bracelist-p): Fixed brace list
	recognition for the `[]= operator symbol in Pike.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-bytecomp.el (cc-eval-when-compile): New macro that works
	around a bug in `eval-when-compile' in the byte compiler.

	* cc-engine.el (c-forward-token-1): Fixed bug with return
	value when count is zero and there's no token start within the limit.

	(c-guess-basic-syntax): Don't add 'comment-intro to lines with
	"prefix comments", i.e. comments which are followed by code on
	the same line.

	* cc-mode-19.el: Fixes so that checks that must be done at
	compile time also are done then.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el: Make sure cc-mode-19 is loaded both at compile
	time and at runtime, and only when it's needed.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	Major cleanup for less error prone and more warning free
	compilation, including some fixes for bugs due to different
	compilation orders. Thanks to Martin Buchholz for providing
	the basis for all this.

	* cc-bytecomp.el: New file that provides some byte compilation
	features: It ensures that files always are loaded from the
	current source directory during compilation, and it provides a
	set of macros to turn off specific compiler warnings for
	specific symbols.  (It's not CC Mode specific in any way.)

	Fixed a nearly acyclic dependency tree (both runtime and
	compile-time) between all files.

	* cc-defs.el: Separated all macros before the inline functions,
	to ensure correct compilation.

	* cc-defs.el, cc-engine.el: Moved c-beginning-of-macro to from
	cc-defs.el to cc-engine.el and made it a function instead.

	* cc-mode-19.el: Patch the byte compiler in Emacs 19 not to warn
	about char-after.

	* cc-vars.el: Cope even when there isn't a custom package
	containing defcustom available.

	* cc-make.el: Removed since it's no longer necessary.

	README: Updated installation instructions.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el, cc-langs.el, cc-mode.el: Moved around things to
	improve the modularity: Moved all mode init stuff from
	cc-langs.el to cc-mode.el, including the keymap
	initialization; cc-langs now only contains the various
	variables for configuring the language syntax.

	* cc-engine.el, cc-styles.el (c-evaluate-offset)
	(c-get-offset): Moved from cc-styles to cc-engine since file
	dependency analysis suggests they belong there (which also
	makes more sense).  Thanks to Martin Buchholz for doing the analysis.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fn-region-is-active-p): New function that
	wraps the corresponding macro, for use in places that aren't
	compiled.  Thanks to Martin Buchholz for pointing out this.

	* cc-langs.el (c-mode-menu): Use c-fn-region-is-active-p.

	* cc-mode.el (c-prepare-bug-report-hooks): Hook variable to
	add things to the bug report.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-guess-fill-prefix): Fixed bug where the
	returned prefix could contain a newline when the search for a
	good prefix line failed.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-toggle-auto-state, c-toggle-hungry-state)
	(c-toggle-auto-hungry-state): Made the argument optional, as
	the documentation says it is.

2000-03-21  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Don't treat the Pike
	multiline string syntax, #"...", as a cpp macro.

2001-03-21  Paul Eggert  <eggert@twinsun.com>

	* international/mule-cmds.el (set-locale-environment):
	Set system-messages-locale and system-time-locale, but only if the
	caller specifies a non-nil locale name.

2001-03-20  Gerd Moellmann  <gerd@gnu.org>

	* pcvs-util.el (cvs-bury-buffer): Bodiless `if' statements cause
	problems for the interpreter.  From: John Wiegley  <johnw@gnu.org>

2001-03-20  Gerd Moellmann  <gerd@gnu.org>

	* follow.el (follow-avoid-tail-recenter): Doc fix.

	* custom.el (custom-set-variables): Avoid reversing the list
	of args needlessly.

	* startup.el (fancy-splash-head): Don't change the colors of the
	XPM image on a dark background.

	* comint.el (comint-exec-1): Set columns of the terminal to
	window-width instead of frame-width.

	* info.el (Info-scroll-down): Add missing WINDOW arg for
	pos-visible-in-window-p.

	* ehelp.el (electric-help-mode-hook): Add defcustom.

	* mail/sendmail.el (mail-mode): Activate case-folding in
	font-lock-defaults.

2001-03-19  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (mode-line-mode-menu): `glasses-mode' might be unbound.
	(completion-ignored-extensions): Remove duplicate ".class".

2001-03-19  Andreas Schwab  <schwab@suse.de>

	* textmodes/reftex-dcr.el (reftex-view-crossref): Doc fix.
	From Roland Winkler <Roland.Winkler@physik.uni-erlangen.de>.

2001-03-19  Gerd Moellmann  <gerd@gnu.org>

	* language/european.el ("Latin-5", "Latin-4"): Use postfix input
	methods since there are not prefix input methods.

2001-03-19  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (read-input-method-name):
	Locally bind enable-recursive-minibuffers to t.

2001-03-18  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lmenu.el (add-menu): Re-added (was erroneously removed).

2001-03-17  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el: Copyright years.
	(ediff-choose-syntax-table): New function.
	(ediff-setup): Use ediff-choose-syntax-table.

	* ediff-init.el (ediff-with-syntax-table): New macro, uses
	with-syntax-table.

	* ediff.el: Date of last update, copyright years.

	* ediff-wind.el (ediff-setup-control-frame): Nill->nil.

	* viper-ex.el (ex-token-list,ex-cmd-execute): Revamped, courtesy
	of Scott Bronson.
	(ex-cmd-assoc,ex-cmd-one-letr): New functions.
	(viper-check-sub,viper-get-ex-command,viper-execute-ex-command):
	Deleted functions.
	(viper-get-ex-com-subr,viper-ex,ex-mark): Changed to use the new
	ex-token-list.

	* viper-util.el: Spaces, indentation.

	* viper.el: Changed version, modification time.

2001-03-16  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-workday-remaining):
	Check whether `discrep' is non-null before using it.

2001-03-16  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-reread-log): Fixed problem with
	first-time checkins.
	(timeclock-log-data): Fixed problem with reading timelog log file.
	Resulting data in the "day list" was incorrect.
	(timeclock-find-discrep): Check if `timeclock-file' is readable
	before opening it.
	(timeclock-time-less-p): New function.
	(timeclock-day-base): New function.
	(timeclock-geometric-mean): New function.
	(timeclock-generate-report): Generate a summary report based on
	the contents of the log file.  This uses `timeclock-log-data', and
	is an example of writing a timelog manipulation function.
	(timeclock-visit-timelog): A quick command for opening the timelog
	file.
	(timeclock-log-data): Bound the variable event.

2001-03-16  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Fix typo: symbol-name -> symbol-value.

	* mail/rmail.el (rmail-insert-inbox-text): Call expand-file-name
	before substitute-in-file-name to handle double slashes in FILE
	correctly.

2001-03-15  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/ispell.el (ispell-dictionary-alist-6): Add support
	for Slovak.  From Pavel.Janik@suse.cz (Pavel Janík ml.).

2001-03-14  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (features): Add `md5' and `overlay' to the list.

	* scroll-bar.el (toplevel): Test if `x-toolkit-scroll-bars' is
	bound before using it.  It's not bound when configured without X,
	for instance.

2001-03-13  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el: Update copyright.
	(hs-minor-mode-map): Change bindings to use `C-c @' prefix.
	(hs-minor-mode-hook): Include `:version' in defcustom form.

2001-03-13  Gerd Moellmann  <gerd@gnu.org>

	* help.el (string-key-binding): Don't call event-start on
	a non-list.

2001-03-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (fancy-splash-tail, command-line-1): Fix the
	copyright year.

2001-03-13  Kenichi Handa  <handa@etl.go.jp>

	* term.el: These changes are based on a patch sent from Yong Lu
	<lyongu@yahoo.com>.
	(term-set-escape-char): Bind M-x to execute-extended-command in
	term-raw-escape-map.
	(term-move-columns): Don't try to move to negative column.
	(term-emulate-terminal): Insert a string before deleting a text to
	overwrite.

2001-03-12  Gerd Moellmann  <gerd@gnu.org>

	* play/life.el (life): Rearrange code so that all calls to
	life-display-generation are in a catch-form.

	* progmodes/etags.el (tags-loop-continue): Don't change point in a
	file that isn't interesting.  In an interesting file, push the old
	value of point on the mark ring.

	* mail/rmailsum.el (rmail-summary-override-mail-send-and-exit):
	New function.
	(rmail-summary-mail, rmail-summary-reply, rmail-summary-forward):
	Use it.

	* emacs-lisp/autoload.el (generate-file-autoloads):
	Remove warning about line lengths.

2001-03-12  Philippe Waroquiers  <wao@gull.tact.cfmu.eurocontrol.be>

	* progmodes/etags.el (tags-compression-info-list): New variable.
	(find-tag-in-order): Use it to deal with compressed source files.
	(tag-file-name-match-p): New function.
	(etags-recognize-tags-table): Use it for better match of file names.

2001-03-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (register-input-method): Doc fix.

	* international/quail.el (quail-translate-key): Fix condition to
	check if there's another breaking point in the current key.

2001-03-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmailout.el (rmail-output-to-rmail-file): When writing the
	Babyl header to the newly-created output file, bind
	coding-system-for-write to either rmail-file-coding-system or
	emacs-mule-unix.

2001-03-11  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texnfo-upd.el (texinfo-update-menu-lower-regexps):
	Fix the name and regexp used for subsubsections.

2001-03-10  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-setup): Don't suppress write-file
	and save-buffer if buffer-file-name non-nil.  From rms.

2001-03-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-do-command): If the destination buffer is already
	current, don't set it up and don't erase it.  Updated doc string
	to reflect that.
	(vc-version-diff): When doing a single file diff, don't switch to the
	*vc-diff* buffer before the command.  This is to preserve local
	variable bindings that might affect the diff command.
	(vc-print-log): Don't switch to the *vc* buffer before the
	command, so that local variable bindings are preserved.

	* vc-cvs.el, vc-rcs.el, vc-sccs.el (vc-*-print-log): Output to
	buffer *vc*, not the current buffer.
	(vc-*-diff): Output to buffer *vc-diff*, not the current buffer.

	* vc-cvs.el (vc-cvs-checkin): When removing the sticky tag,
	make output go to buffer *vc*, not the current buffer.

2001-03-09  Stefan Monnier  <monnier@cs.yale.edu>

	* hi-lock.el (hi-lock-line-face-buffer): Wrap the regexp in a group
	so ^, $, *, ? and + are interpreted correctly.

2001-03-09  Gerd Moellmann  <gerd@gnu.org>

	* help.el (string-key-binding): Renamed from
	mode-line-key-binding.  Handle any event on a string.
	Check for `keymap' properties as well as `local-map' properties.

	* comint.el (comint-insert-clicked-input): Use the last key
	from this-command-keys to lookup the global key definition.

2001-03-09  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Add category `j' for
	katakana-jisx0201.   Fix syntaxes of katakana-jisx0201.

	* international/mule-conf.el (no-conversion): Fix docstring.
	(raw-text): Fix docstring.

2001-03-08  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (choose-completion-string): When not leaving the
	minibuffer, raise the minibuffer frame when minibuffer-auto-raise
	is set.

	* window.el (shrink-window-if-larger-than-buffer): Handle frame
	parameter `(minibuffer . t)'.

2001-03-07  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/sh-script.el (sh-st-symbol): New symbol.
	(sh-font-lock-syntactic-keywords): Use it and fix bogus comment regexp.
	(sh-mode): Remove `make-local-variable' for unused var
	`font-lock-unfontify-region-function'.

2001-03-07  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-scroll-down): Fix previous change.

	* mail/rmail.el (rmail-toggle-header): Use a window which
	is showing the Rmail buffer, rather than the selected window.

2001-03-07  Dave Love  <fx@gnu.org>

	* imenu.el (imenu--create-keymap-2): Revert use of menu-item for
	now, to avoid problems with binding imenu directly to a mouse event.

2001-03-07  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-scroll-down): Call pos-visible-in-window-p with
	second arg t.

2001-03-07  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-common-indent): New var.
	(log-edit-set-common-indentation): Renamed from
	log-edit-delete-common-indentation.  Use the new var.
	(log-edit-insert-changelog, log-edit-done-hook): Use the new name.

	* pcvs.el (cvs-ignore-marks-modif): Use `rassoc' rather than `member*'.
	(cvs-mode-add-change-log-entry-other-window):
	Don't presume change-log-default-name is defined.

	* pcvs-util.el (cvs-bury-buffer): In doubt, don't delete window.

	* pcvs-defs.el (cvs-buffer-name-alist): Use *cvs-info* for
	the "tree" operation as well.

	* pcvs-parse.el (cvs-parse-table): Add another ignored message.

	* textmodes/fill.el (fill-context-prefix): Allow first-line-prefix
	to match paragraph-start.

	* textmodes/sgml-mode.el (sgml-mode-common): Correct value of
	comment-start-skip and set comment-end-skip as well.
	(sgml-comment-indent): Fix for new value of comment-start-skip.
	(html-autoview-mode): Don't bother using make-local-hook.

2001-03-07  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (custom-save-delete): Move in front of local
	variables, otherwise long Custom entries would make them ineffective.

	* uniquify.el: Set maintainer to FSF.

2001-03-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired-aux.el (dired-do-shell-command): Doc fix.

2001-03-06  Stefan Monnier  <monnier@cs.yale.edu>

	* emulation/viper.el (viper-vi-state-mode-list): Add cperl-mode.

	* which-func.el (which-func-modes): Add cperl-mode.
	(which-func-mode-global): Use define-minor-mode.

	* info-look.el: Docstring fixes and dead code eliminated.
	(cperl-mode): Add support.
	(emacs-lisp-mode): List all entries from elisp manual, whether
	or not they are currently (f)bound or not.  Update regexp.

	* add-log.el (add-log-current-defun): Accept `cperl-mode' as well.

	* progmodes/cperl-mode.el (cperl-mode): Set major-mode to cperl-mode
	so that C-h m shows the correct information.
	Use make-local-variable rather than make-variable-buffer-local.
	(cperl-info-buffer, cperl-setup-tmp-buf):
	Use make-local-variable rather than make-variable-buffer-local.
	(cperl-msb-fix, cperl-get-help-defer):
	Check major-mode for `cperl-mode' as well.

	* progmodes/cperl-mode.el: Updated to author version 4.23.
	(cperl-electric-pod): SYNOPSIS was misspelled.
	(cperl-find-pods-heres): @if ? a : b was considered a REx.
	(cperl-after-expr-p): Make true after __END__.

2001-03-06  Gerd Moellmann  <gerd@gnu.org>

	* bookmark.el (bookmark-get-bookmark): Use assoc-ignore-case if
	bookmark-completion-ignore-case is t.

	* term/x-win.el (x-handle-xrm-switch): Accept more than one -xrm
	switch, like xterm, and concat resource strings, with a newline
	between them.

2001-03-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp770-decode-table)
	(cp773-decode-table, cp774-decode-table): New variables.

	* man.el (Man-hyphenated-reference-regexp): New variable.
	(Man-build-references-alist): Use it to search for referenced
	manpages.  If hyphenated is non-nil, record a concatenated word in
	Man-refpages-alist only if it matches Man-reference-regexp.
	Update word's length when it is concatenated.  Reverse the list,
	to get the first manpage at the head.
	(Man-possibly-hyphenated-word): New function.
	(Man-follow-manual-reference): Use it instead of current-word to
	find a manpage at point, in a way that accounts for hyphenated
	references.

2001-03-06  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-interbase): New function.
	(sql-interbase-program): New option.
	(sql-interbase-options): New option.
	And some typos fixed: "customise" to "customize".

2001-03-06  Dave Love  <fx@gnu.org>

	* textmodes/flyspell.el (flyspell-region):
	Set up flyspell-local-mouse-map.

2001-03-05  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-retry-failure):
	Don't call rmail-beginning-of-message.
	Don't discard From: field.  Do discard Received: field.
	Use unwind-protect to re-prune.
	(rmail-retry-ignored-headers): Discard X-Authentication-Warning field.

2001-03-06  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-title): Add autoload cookie.

2001-03-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl.el (dotimes, dolist): Undef prior to autoloading
	new defs.

2001-03-05  Kenichi Handa  <handa@etl.go.jp>

	* language/ethio-util.el (ethio-toggle-space):
	Update current-input-method-title if necessary.
	(ethio-toggle-punctuation): Likewise.

	* international/quail.el (quail-title): Fix for the case that a
	title of an input method is specified by a list of the same form
	as used in mode-line-format.

	* international/mule-cmds.el (activate-input-method):
	If current-input-method-title is set by activating INPUT-METHOD,
	respect that value.

2001-03-05  Gerd Moellmann  <gerd@gnu.org>

	* play/dunnet.el (dun-mode): Set major-mode to `dun-mode'.

2001-03-05  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-sybase): Fix typo (was: query user about server two
	times instead of server and database).

	* sql.el (sql-sybase): Doc change.
	(sql-mysql): Doc change.
	(sql-postgres): Doc change.

2001-03-05  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el (emacs-mule, raw-text):
	Docstring modified.

2001-03-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el: Update copyright notice.

	* term/pc-win.el: Update copyright notice.

2001-03-02  Dave Love  <fx@gnu.org>

	* files.el (insert-file-contents-literally):
	Bind inhibit-file-name-handlers and inhibit-file-name-operation,
	not jka-compr-compression-info-list.

2001-03-02  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-normalize-vars): Use [ \t] for the trailing
	spaces in default comment-start-skip settings rather than \s-.

2001-03-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-handle-reverse-video): Look for reverse in
	default-frame-alist as well.

2001-03-01  Dave Love  <fx@gnu.org>

	* textmodes/reftex.el (defvar): Wrap some defvars in
	eval-when-compile.  From Markus Rost <rost@math.ohio-state.edu>.

	* subr.el (event-basic-type): Doc fix.

	* international/quail.el: Doc fixes.

	* international/utf-8.el: Doc fixes.

	* international/mule-cmds.el: Doc fixes.
	(leim-list-header): Fix header text.

	* international/mule.el (coding-system-category): Doc fix.

	* international/ccl.el (ccl-compile): Doc fix.

2001-03-01  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (save-buffer-state): Use inhibit-modification-hooks
	rather than (before|after)-change-functions.

2001-03-01  Gerd Moellmann  <gerd@gnu.org>

	* ediff-util.el (ediff-scroll-horizontally): Arrange for
	scroll-left and scroll-right being called interactively so that
	they set the window's min_hscroll.

2001-03-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-insert-file-contents-1): Accept an additional
	argument `lfn': if it is non-nil, concatenate `filename' and
	`suffix'; otherwise use the complicated MS-DOS code.
	All callers changed.
	(info-insert-file-contents, Info-find-node): If the MS-DOS port
	can access long file names, try the long file-name version of
	`info-insert-file-contents-1', then the short file-name version.

2001-02-28  TAKAHASHI Naoto  <ntakahas@m17n.org>

	* language/ethio-util.el (setup-ethiopic-environment-internal):
	Change bindings of functions keys to conform to "Emacs Lisp Coding
	Convention".

	* language/ethiopic.el ("Ethiopic"): Add documentation.

2001-02-28  Kenichi Handa  <handa@etl.go.jp>

	* international/utf-8.el (mule-utf-8): Set coding-category
	property to coding-category-utf-8.

2001-02-27  Richard M. Stallman  <rms@gnu.org>

	* lpr.el (lpr-page-header-switches, print-region-1):
	Undo 2000-07-06 change.
	(lpr-add-switches): Default to t on gnu/linux.

2001-02-27  Gerd Moellmann  <gerd@gnu.org>

	* bs.el (bs-attributes-list): Doc fix.

2001-02-26  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-project): Display the file THE-GNU-PROJECT.

	* help.el (view-order-manuals): Use goto-address.

	* startup.el (command-line-1): Add info about ordering manuals
	to the not so fancy splash screens.

2001-02-26  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-default-workfile-unchanged-p)
	(vc-default-latest-on-branch-p): Add missing BACKEND argument.

2001-02-26  Gerd Moellmann  <gerd@gnu.org>

	* lazy-lock.el (lazy-lock-fontify-after-idle): Make sure to
	fontify in the right buffer.

	* allout.el (outline-flag-region): Move macro in front of first
	use to avoid a run-time error.

2001-02-24  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: Fix copyright notice.

2001-02-24  Kenichi Handa  <handa@etl.go.jp>

	* international/utf-8.el (mule-utf-8): Set correct value for
	valid-codes property.

	* international/fontset.el (x-complement-fontset-spec): In the
	case that we use ASCII font for the other charsets, use only
	family and registry part of it.

2001-02-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* window.el (fit-window-to-buffer, window-safely-shrinkable-p)
	(shrink-window-if-larger-than-buffer): Doc fix.

2001-02-23  Stefan Monnier  <monnier@cs.yale.edu>

	* hi-lock.el (hi-lock-unface-buffer): Use nil rather than t for
	predicate passed to completing-read.

2001-02-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line): Fix last change.

2001-02-23  Jason Rumney  <jasonr@gnu.org>

	* startup.el (tool-bar-originally-present): New variable.
	(command-line): Set it if the tool-bar is switched on at startup.

	* frame.el (frame-notice-user-settings): Only adjust frame height
	for no tool-bar case if tool-bar was originally switched on.
	From E. Jay Berkenbilt.

2001-02-22  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-switch-buffer): Only switch window if the
	current one is dedicated.

	* textmodes/fill.el (fill-region-as-paragraph): Skip spaces backward
	rather than using (match-beginning 0) when searching for break point.

2001-02-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texinfmt.el (texinfo-format-scan): Signal an error if
	@ follows an accent command such as @'.  Support optional braces
	in commands that insert accents, like makeinfo does.

2001-02-22  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-text): Add a line for ordering
	manuals.  Reverse order of splash screens shown.
	(use-fancy-splash-screens-p): Adapt to the text line added.

	* menu-bar.el (menu-bar-help-menu): Add an item for ordering
	manuals from the FSF.

	* help.el (view-order-manuals): New function.
	(toplevel): Bind C-h C-m to this function.

2001-02-21  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-forward): Skip the comment-start before
	searching for the comment-end.

2001-02-21  Dave Love  <fx@gnu.org>

	* custom.el (custom-initialize-changed, defcustom): Doc fix.

	* international/mule-cmds.el, international/mule.el: Doc fixes.

2001-02-21  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Use display-hourglass
	instead of display-busy-cursor.

	* frame.el (display-hourglass): Renamed from busy-cursor.
	(hourglass-delay): Renamed from busy-cursor-delay-seconds.
	(show-cursor-in-non-selected-windows): Doc fix.

2001-02-20  Dave Love  <fx@gnu.org>

	* international/utf-8.el: Doc and commentary fixes.

2001-02-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* ehelp.el (with-electric-help): Doc fix.

2001-02-20  Gerd Moellmann  <gerd@gnu.org>

	* msb.el (msb-mode): Call the update-buffers function explicitly
	with a FORCE argument.

	* menu-bar.el (menu-bar-update-buffers): Add optional parameter
	FORCE.  If set, update the menu even if frame-or-buffer-changed-p
	returns nil.

2001-02-20  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Timestamp package replacement.  Some enhancements.
	Some XEmacs compatibility.  Doc fix.
	(ps-print-version): New version number (6.4).
	(ps-printer-name): Initialization fix.
	(ps-zebra-stripe-follow): Functionality enhancement.
	(ps-prologue-file): Code enhancement.
	(ps-right-header): Timestamp package replacement.
	(ps-setup, ps-face-bold-p, ps-face-italic-p)
	(ps-get-page-dimensions)
	(ps-generate-header, ps-begin-file, ps-begin-job)
	(ps-generate-postscript-with-faces, ps-do-despool): Code fix.
	(ps-time-stamp-mon-dd-yyyy, ps-time-stamp-hh:mm:ss): New funs.
	(ps-zebra-stripe-full-p, ps-zebra-stripe-alist): New vars.
	(coding-system-for-write): Var declaration (XEmacs compatibility).

2001-02-20  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-extensions): Add "tif".

2001-02-19  Gerd Moellmann  <gerd@gnu.org>

	* wid-edit.el (widget-button-click): Save the selected window
	around the code handling clicks on buttons.

2001-02-18  Dave Love  <fx@gnu.org>

	* imenu.el (imenu--generic-function): Use mapc to iterate over
	syntax characters.

2001-02-17  Richard M. Stallman  <rms@gnu.org>

	* progmodes/fortran.el (fortran-strip-sqeuence-nos): Doc fix.

	* uniquify.el (uniquify-buffer-name-style): Doc fix.

2001-02-16  Gerd Moellmann  <gerd@gnu.org>

	* mouse.el (mouse-save-then-kill): If the distance from the new
	point to the mark is equal to the distance of point from the new
	point, move point instead of the mark.

2001-02-16  Dave Love  <fx@gnu.org>

	* textmodes/flyspell.el (flyspell-get-word): Return string without
	properties.

2001-02-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* generic.el (generic-find-file-regexp): Doc fix.
	(generic-ignore-files-regexp): New defcustom.
	(generic-mode-find-file-hook): If the file's name matches the
	regexp in `generic-ignore-files-regexp', don't enter
	default-generic-mode.  Doc fix.

2001-02-16  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el (flyspell-region, flyspell-buffer):
	Add autoload cookies.

	* calendar/cal-tex.el (cal-tex-weekly4-box): Respect setting
	of cal-tex-24.

2001-02-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (kill-region, kill-line, kill-ring-save): Doc fix.

	* progmodes/compile.el (grep-regexp-alist): Remove the blank from
	the character class after the (optional) drive, to support file
	names with embedded blanks.

2001-02-15  Sam Steingold  <sds@gnu.org>

	* textmodes/tex-mode.el (tex-shell-running):
	Check the process buffer too.

2001-02-15  Dave Love  <fx@gnu.org>

	* battery.el (battery-status-function): Fix doc, :type.

	* calendar/timeclock.el (timeclock-get-workday-function): Fix :type.

2001-02-15  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (read-passwd): Clear Lisp memory holding password.

2001-02-15  Miles Bader  <miles@gnu.org>

	* info.el (Info-copy-current-node-name): New function.
	(Info-mode-menu): Add it to the menu.

2001-02-14  Richard M. Stallman  <rms@theobromine.ai.mit.edu>

	* international/mule-cmds.el (toggle-input-method): Doc fix.

2001-02-13  Stefan Monnier  <monnier@cs.yale.edu>

	* replace.el (occur): Stop at end of buffer.

2001-02-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (set-input-method): Another doc fix.

2001-02-13  David M. Koppelman  <koppel@ee.lsu.edu>

	* hi-lock.el (hi-lock-find-patterns): Don't activate font-lock-mode.

2001-02-13  Miles Bader  <miles@gnu.org>

	* faces.el (set-face-background, set-face-foreground)
	(set-face-stipple): Treat a value of nil as being `unspecified'.

2001-02-12  Dave Love  <d.love@dl.ac.uk>

	* international/latin1-disp.el: Doc fixes.
	(latin1-display) <defgroup>: Add :link.
	(latin1-display) <function>: Set variable latin1-display.

2001-02-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (set-input-method): Doc fix.

2001-02-12  Eric M. Ludlam  <zappo@choochoo.ultranet.com>

	* speedbar.el (speedbar-frame-parameters): No toolbar lines.
	(speedbar-line-file): Return nil if not a file.
	(speedbar-buffers-line-path): Return file for tags, and dir for files.

2001-02-12  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-make-diff2-buffer): Removed bogus checks
	for remote files.
	(ediff-coding-system-for-read): Replaced the no-conversion default
	with raw-text.

	* ediff-init.el: Removed :version from defcustom vars.

	* ediff-util.el (ediff-compute-custom-diffs-maybe):
	Better handling of the diff mode.

	* ediff.texi: Added ediff-coding-system-for-read.

	* viper.texi: Fix typos.

2001-02-11  Dave Love  <fx@gnu.org>

	* shadowfile.el: Doc fixes.
	(shadow) <defgroup>: Add :link.
	(shadowfile-unload-hook): New function.
	(shadow-initialize): Use defalias, not fset.
	(shadow-define-cluster, shadow-define-literal-group)
	(shadow-define-regexp-group, shadow-initialize): Add autoload cookie.

	* international/mule.el: Doc and message fixes.

	* international/ccl.el (define-ccl-program): Doc fix.

2001-02-11  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (mode-line): Set :line-width property to -1.

2001-02-10  Richard M. Stallman  <rms@gnu.org>

	* complete.el (partial-completion-mode): Doc fix.

	* simple.el (delete-key-deletes-forward-mode):
	Change `let' to `let*' to fix gross bug in last change.

	* repeat.el (repeat): Don't let execute-kbd-macro alter
	real-last-command.

2001-02-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (eval-expression): Doc fix.

2001-02-09  Dave Love  <fx@gnu.org>

	* imenu.el (imenu-generic-expression): Doc fix.

	* emacs-lisp/re-builder.el (reb-mode): Quote the hook name.
	From Juanma Barranquero <lektu@terra.es>.

	* emacs-lisp/authors.el (authors): Expand `root' before running find.

2001-02-09  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (set-face-attribute): Describe the case of a negative
	value specified for :line-width.

2001-02-08  Stefan Monnier  <monnier@cs.yale.edu>

	* which-func.el (which-func-mode): Invert which-func-mode-global.
	From Juanma Barranquero <lektu@terra.es>.

2001-02-08  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-plist-convert-widget): Replace binding of
	widget-plist-value-type.
	(widget-alist-convert-widget): Replace binding of
	widget-alist-value-type.

	* textmodes/paragraphs.el (sentence-end): Doc fix.

	* eshell/em-rebind.el (eshell-cannot-leave-input-list):
	Remove `backward-line'.

	* play/pong.el (pong-blank-color, pong-bat-color)
	(pong-ball-color, pong-border-color, pong-left-key)
	(pong-right-key, pong-up-key, pong-down-key, pong-quit-key)
	(pong-pause-key, pong-resume-key, pong-timer-delay):
	* mail/mh-comp.el (mh-compose-letter-function):
	* eshell/esh-mode.el (eshell-skip-prompt-function):
	* emulation/viper-ex.el (ex-unix-type-shell-options):
	* recentf.el (recentf-menu-filter):
	* ps-print.el (ps-print-region-function):
	* lpr.el (print-region-function):
	* forms.el (forms-mode-hooks):
	* dirtrack.el (dirtrack-directory-change-hook):
	* cus-start.el (temp-buffer-show-function, display-buffer-function):
	* textmodes/spell.el (spell-filter):
	* textmodes/fill.el (adaptive-fill-function):
	* textmodes/bibtex.el (bibtex-autokey-before-presentation-function):
	* progmodes/etags.el (find-tag-default-function):
	* progmodes/dcl-mode.el (dcl-calc-command-indent-function):
	* progmodes/ada-mode.el (ada-popup-key): Fix :type.

2001-02-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* emulation/viper-init.el (viper-fast-keyseq-timeout)
	(viper-translate-all-ESC-keysequences): Doc fix.  From Jim
	Meyering <jim@meyering.net>.

	* loadup.el: Revert last change.

2001-02-07  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (transform-make-coding-system-args):
	Make it work also for coding systems not using CCL.

2001-02-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (previous-matching-history-element)
	(next-matching-history-element): Doc fix.

	* loadup.el: Load ccl before utf-8; don't load ccl in the ms-dos
	specific part.

2001-02-06  Dave Love  <fx@gnu.org>

	* add-log.el (add-log-current-defun-function)
	(add-log-buffer-file-name-function, add-log-file-name-function):
	Fix :type.
	(change-log-mode) <font-lock-defaults>: Set SYNTAX-BEGIN.

2001-02-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-initialize): Remove the test for system-type when
	invocation-directory is non-nil.

	* progmodes/make-mode.el (makefile-mode): Set SYNTAX-BEGIN member
	of `font-lock-defaults' to `backward-paragraph' rather than nil.

2001-02-06  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (EMACS): Use $(THISDIR) to make emacs.exe path
	absolute.

2001-02-06  David M. Koppelman  <koppel@ee.lsu.edu>

	* hi-lock.el (hi-lock-mode): Toggling hi-lock-mode now affects all
	buffers.  When hi-lock turned on rather than only checking current
	buffer for regexps, all buffers are checked. Moved activation of
	font-lock to hi-lock-refontify. When font-lock turned off rather
	than removing added highlighting just in current buffer, remove it
	in all buffers.  Changed edit menu text from "Automatic
	Highlighting" to "Regexp Highlighting" Documentation for
	highlighting phrases, minor documentation changes.
	(hi-lock-set-file-patterns): Execute only if there are new or
	existing file patterns.
	(hi-lock-refontify): Assume font-lock-fontify-buffer will first
	unfontify and, if a support mode is active, will not refontify the
	whole buffer.  If necessary, turn on font lock. (Removed
	font-lock-unfontify and font-lock support-mode-specific calls,
	such as lazy-lock-fontify-window.)
	(hi-lock-find-patterns): Do not turn on hi-lock-mode even if
	patterns are found. Not useful now since find-file-hook is removed
	if hi-lock is off, but may be needed for per-buffer hi-lock activation.
	(hi-lock-face-phrase-buffer): New function.  Also added related
	menu item and keybinding.
	(highlight-phrase): New alias, to hi-lock-face-phrase-buffer.
	(hi-lock-process-phrase): New function.
	(hi-lock-line-face-buffer): Doc fixes.
	(hi-lock-face-buffer): Doc fixes.
	(hi-lock-unface-buffer): Doc fixes.

2001-02-06  Gerd Moellmann  <gerd@gnu.org>

	* dabbrev.el (dabbrev-ignored-buffer-regexps): Renamed from
	dabbrev-ignored-regexps.

2001-02-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (kill-line): Doc fix.

2001-02-05  Dave Love  <fx@gnu.org>

	* loadup.el: Revert last two changes -- bootstrapping works with
	regenerated loaddefs.

2001-02-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch-forward): Doc fix.

	* textmodes/nroff-mode.el (nroff-mode): Set the SYNTAX-BEGIN part
	of font-lock-defaults to backward-paragraph.

2001-02-05  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-ignored-headers): Add X-Trace,
	X-Complaints-To, NNTP-Posting-Date, and User-Agent.

2001-02-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Eliminate time-stamp functions.
	(ebnf-version): New version (3.5).
	(ebnf-eps-finish-and-write): Replace time-stamp functions by
	format-time-string.

2001-02-05  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (next-line): Goto end-of-line before inserting a newline.

2001-02-05  Miles Bader  <miles@gnu.org>

	* image-file.el (insert-image-file): When visiting an image, also
	set `truncate-lines' to t so that any fringe arrow looks correct.

2001-02-05  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-forward): Add description about input method
	in the docstring.

2001-02-04  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-internal-1): Always push the mark for @.

2001-02-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-initialize): If installation-directory is nil, for
	DOS/Windows systems try looking in a sibling of invocation-directory.

2001-02-02  Gerd Moellmann  <gerd@gnu.org>

	* wid-edit.el (widget-button-click): Fix last change.

	* frame.el (frame-notice-user-settings): When resizing the initial
	frame because the tool bar is off, also change the frame's top
	position if a negative top position was specified.

2001-02-02  Miles Bader  <miles@gnu.org>

	* image-file.el (insert-image-file): When visiting an image,
	suppress the cursor in the image buffer.

2001-02-01  Dave Love  <fx@gnu.org>

	* progmodes/f90.el (f90-mode): Remove startup message.

	* vc-cvs.el: Remove autoloads.  Require vc when compiling.

2001-02-01  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Fix code determining whether or not
	to use delete-key-deletes-forward-mode.

2001-02-01  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-switches): New user option.
	(vc-version-diff): Use it.
	(vc-diff-switches-list): New macro.

	* vc-rcs.el, vc-cvs.el, vc-sccs.el (vc-BACKEND-diff-switches):
	New customization options.
	(vc-BACKEND-diff): Use new options via vc-diff-switches-list.

	* vc-sccs.el (vc-sccs-workfile-unchanged-p): Return correct status.

2001-02-01  Gerd Moellmann  <gerd@gnu.org>

	* msb.el (toplevel): Quote hook symbols.

2001-02-01  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): Add description
	about recognized properties in the docstring.

	* international/mule-conf.el: Remove unused charsets
	mac-roman-lower and mac-roman-upper.

2001-01-31  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/fill.el (set-fill-prefix): Cancel fill prefix if point
	is in front of the left-margin, if any.

	* simple.el (delete-key-deletes-forward-mode): Treat `kp-delete'
	like `delete'.

	* bindings.el: Define `kp-delete' like `delete' in function-key-map.

	* term/w32-win.el (mouse-set-font): Doc fix.

2001-01-31  Stefan Monnier  <monnier@cs.yale.edu>

	* hi-lock.el (hi-lock-mode, hi-lock-line-face-buffer): Doc fix.
	(hi-lock-find-patterns): Turn on font-lock-mode, if it is not
	on already.

2001-01-31  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (save-buffer): Don't give message if (buffer-file-name)
	returns nil.

2001-01-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* toolbar/tool-bar.el (tool-bar-add-item): Doc fix.

	* emacs-lisp/re-builder.el (reb-update-modestring): Don't use
	concat for integers.  From Juanma Barranquero <lektu@terra.es>.

	* term/w32-win.el (redisplay-dont-pause): Set to t to alleviate
	display problems.

2001-01-31  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (charset-info): Fix docstring.

	* international/mule-diag.el (describe-character-set): Check final
	char valid before printing it.

2001-01-30  Gerd Moellmann  <gerd@gnu.org>

	* lpr.el (lpr-windows-system, lpr-lp-system): Add autoload cookies.

	* frame.el (frame-notice-user-settings): Do the tool-bar
	stuff only for graphical displays.  Fix a braino.

	* frame.el (frame-initialize): Create initial frame visible.
	(frame-notice-user-settings): When tool-bar has been switched off,
	correct the frame size and sync tool-bar-mode.

	* startup.el (command-line): Remove manipulation of frame
	height for tool bars.

2001-01-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* lpr.el: Compatibility with XEmacs and doc fixes.
	(lpr-windows-system, lpr-lp-system): New vars.
	(lpr-printer-switch): New defcustom.
	(printer-name, lpr-command): Customization fix.
	(print-region-1): Code fix.
	(print-region-new-buffer, printify-region): Indentation fix.
	(lpr-eval-switch, lpr-flatten-list, lpr-flatten-list-1):
	New functions.

2001-01-29  Gerd Moellmann  <gerd@gnu.org>

	* msb.el (toplevel): Fix the eval-after-load.

2001-01-29  Dave Love  <fx@gnu.org>

	* eshell/esh-ext.el (eshell-windows-shell-file): Fix :type.

	* eshell/em-ls.el (eshell-ls-exclude-regexp): Fix :type.

	* progmodes/tcl.el (outline, dabbrev, add-log): Require when compiling.
	(tcl-using-emacs-19-23): Consider Emacs 21+.
	(tcl-help-directory-list, tcl-command-switches): Fix :type.
	(tcl-add-emacs-menu): Supply menu name.
	(tcl-beginning-of-defun, tcl-end-of-defun): Defalias, don't fset.

2001-01-29  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-trailing-whitespace): Don't delete formfeeds.

2001-01-29  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-mark-fis-dead): New function.
	(cvs-mode-add): Use it.
	(cvs-mode-add-change-log-entry-other-window):
	Rebind change-log-default-name to itself rather than to nil.

2001-01-29  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el: Replaced (require 'vc) with a bunch of
	`autoload' statements.

2001-01-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (confirm-kill-emacs): Doc fix.

	* frame.el (frame-initialize): Doc fix.

	* time-stamp.el (time-stamp-string): Doc fix.

	* woman.el (WoMan-log-1): Make the log buffer writable.
	From Markus Rost <rost@math.ohio-state.edu>.

2001-01-29  Gerd Moellmann  <gerd@gnu.org>

	* imenu.el (imenu-syntax-alist): Add autoload cookie for
	the `make-variable-buffer-local'.

2001-01-29  Dave Love  <fx@gnu.org>

	* ansi-color.el (ansi-color-for-comint-mode): Add :version.
	(ansi-color-for-comint-mode-on, ansi-color-process-output):
	Add autoload cookie.
	(ansi-color-apply-sequence): Fix typo.

2001-01-29  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-files-menu): Add menu items for
	PostScript printing in black and white.

	* mail/rmail.el (rmail-ignored-headers): Add X-Sign, X-BeenThere,
	X-Mailman-Version, Precedence, List-Help, List-Post,
	List-Subscribe, List-Id, List-Unsubscribe, List-Archive,
	Content-Type, Content-Length.

2001-01-29  Dave Love  <fx@gnu.org>

	* elide-head.el (elide-head): Make overlay evaporate.

	* international/mule-conf.el (chinese-big5-1, chinese-big5-2): Doc fix.

2001-01-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch-highlight): Don't punt if the display
	doesn't support colors, since isearch faces are defined for
	monochrome displays as well.

2001-01-27  Sam Steingold  <sds@gnu.org>

	* shell.el (shell-write-history-on-exit): Make sure that we are in
	the shell buffer (M-x tex-file RET inserted the error message into
	the TeX buffer).

2001-01-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (transient-mark-mode): Doc fix.

2001-01-27  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/etags.el (find-tag-noselect): Don't bind tags-file-name.

2001-01-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* shell.el (shell-unquote-argument): If the shell is one of the
	mentioned in shell-dumb-shell-regexp, don't treat a backslash as a
	quote character.
	(shell-dumb-shell-regexp): Document that the shells which match
	this regexp are supposed to not treat a backslash as a quote character.

	* emacs-lisp/lisp-mode.el (lisp-mode-shared-map): Undo the change
	from 2001-01-12.  It is not needed, since backspace is mapped into DEL.

2001-01-27  Richard M. Stallman  <rms@gnu.org>

	* dabbrev.el (dabbrev--substitute-expansion):
	Treat a one-capital-letter abbrev as "not all upper case",
	so as to force preservation of the expansion's pattern
	if the expansion starts with a capital letter.

2001-01-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* facemenu.el (facemenu-set-face, facemenu-set-face-from-menu):
	Doc fix.

	* simple.el (transient-mark-mode): Document the fact that many
	commands act on the region when mark is active.

2001-01-27  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-setup-completion-buf): Make the
	multibyteness of current buffer inherited to Quail completion buffer.
	(quail-show-guidance-buf): Make the multibyteness of current
	buffer inherited to Quail guidance buffer.
	(quail-help): Make the multibyteness of current buffer inherited
	to Quail help buffer.

2001-01-26  Dave Love  <fx@gnu.org>

	* time-stamp.el: Doc fixes.

	* progmodes/delphi.el (delphi-comment-face, delphi-string-face)
	(delphi-keyword-face, delphi-other-face): Fix :type.

	* textmodes/flyspell.el: Doc fixes.  Add :version to new options.

	* mail/feedmail.el (feedmail): Add :link.
	(feedmail-send-it): Doc fix.

	* mail/sendmail.el: Doc fixes.
	(sendmail-send-it): Fix the non-ASCII regexp and use
	rfc2047-encode-string.

	* dired.el, dired-aux.el: Revert last change.

2001-01-26  Gerd Moellmann  <gerd@gnu.org>

	* makefile.w32-in (DONTCOMPILE): Add various term files.

2001-01-26  Dave Love  <fx@gnu.org>

	* Makefile.in (DONTCOMPILE): Add various term files.

2001-01-26  Gerd Moellmann  <gerd@gnu.org>

	* man.el (Man-default-man-entry, Man-mode): Doc fix.

	* startup.el (display-startup-echo-area-message): Make sure
	the echo area is resized to fit the size of the startup message.

	* gud.el (gud-perldb-massage-args): Avoid nreverse'ing a list
	part of which is a constant.

2001-01-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* loadup.el (Top-level) [ms-dos]: Don't load international/ccl twice.

2001-01-26  Richard M. Stallman  <rms@gnu.org>

	* simple.el (next-line): Don't let `newline' expand abbrevs.
	Simplify slightly.
	(open-line): Don't let `newline' expand abbrevs.

2001-01-25  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (eshell-ange-ls-uids): Changed use of `alist'
	to `repeat' in the :type field.

	* pcomplete.el (pcomplete-file-ignore): Changed a :type field to
	allow a choice of regexp or nil.
	(pcomplete-dir-ignore): Same.

	* eshell/em-unix.el (eshell/occur): Fixed bug causing `occur' (as
	a command) to always fail.

2001-01-25  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-make-buflist): When nconc'ing lists, don't
	discard the result.
	(iswitchb-to-end): Likewise.

2001-01-25  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el (vc-cvs-mode-line-string): Doc & comment fix.
	Require vc.

2001-01-25  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-font-lock-keywords): Relax submatch 1.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Docstring fix.

2001-01-25  Dave Love  <fx@gnu.org>

	* international/mule-diag.el (describe-char-after): Doc fix.
	(describe-coding-system): Tweak the English text.

	* loadup.el: Preload international/ccl for utf-8.

2001-01-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmail.el (rmail-redecode-body): Doc fix.

2001-01-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (reset-language-environment):
	Reset coding-category-utf-8 to mule-utf-8.

	* international/mule-conf.el (coding-category-utf-8):
	Initialize to mule-utf-8.

	* loadup.el: Preload international/utf-8.

	* international/utf-8.el: New file.

2001-01-24  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-mode): Disable preliminary support for `compile'.

2001-01-24  Sam Steingold  <sds@gnu.org>

	* dired.el (dired-replace-in-string): Removed.
	(dired-sort-toggle): Use `replace-regexps-in-string'
	instead of `dired-replace-in-string'.

	* dired-aux.el (dired-shell-stuff-it, dired-rename-subdir)
	(dired-rename-subdir-2, dired-insert-subdir-doinsert): Ditto.

	* gs.el (gs-replace-in-string): Removed.
	(gs-options): Use `replace-regexps-in-string'
	instead of `gs-replace-in-string'.

2001-01-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Mention the fact that the
	bug report is mailed to an email list and posted to a news group.

2001-01-24  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-replace-by-expanded-history-before-point):
	Fix change of 2000-08-03 to move point to the start of the line again.

	* startup.el (tool-bar-images-pixel-height): New variable.
	(command-line): After loading the user's init file, when
	tool-bar-mode is on, increase the frame's size by some lines for
	the tool-bar.

	* frame.el (frame-initialize): Create the initial frame invisible.

2001-01-24  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* language/chinese.el (chinese-iso-8bit): MIME:GB2312.
	(chinese-big5): MIME:Big5.

2001-01-24  Gerd Moellmann  <gerd@gnu.org>

	* international/mule-cmds.el (universal-coding-system-argument):
	Handle commands with prefix args.

2001-01-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* calendar/diary-lib.el (diary-float): Fix case of MONTH
	being a list of numbers.
	(diary-mail-entries): Rewritten.

2001-01-23  Dave Love  <fx@gnu.org>

	* international/mule.el (make-coding-system): Fix typo.

	* textmodes/outline.el (outline-mode) <font-lock-defaults>:
	Add backward-paragraph as font-lock-beginning-of-syntax-function.

2001-01-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* font-lock.el (font-lock-mode): Doc fix.

2001-01-23  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-translation-table): Fix docstring.

2001-01-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmail.el (rmail-redecode-body): New function.

	* icomplete.el (icomplete-minibuffer-setup-hook): Doc fix.

2001-01-22  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-case-fold-search)
	(isearch-lazy-highlight-regexp): New variables.
	(isearch-lazy-highlight-cleanup): Update lazy highlight if
	case-fold search or regexp search has been toggled.

	* wid-edit.el (widget-button-click): Avoid a save-excursion
	around running a global binding.

	* isearch.el (isearch-lazy-highlight-initial-delay): Set default
	to 0.25.

2001-01-20  Miles Bader  <miles@gnu.org>

	* cus-edit.el (custom-face-save): Do post-processing on the face's
	new value like `custom-face-set' does.

2001-01-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Report the value of
	LC_CTYPE, not LC_TYPE.

	* isearch.el (isearch-forward): Add isearch-toggle-case-fold,
	isearch-toggle-regexp and isearch-edit-string to doc string.

2001-01-19  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Use backward-paragraph
	as font-lock-beginning-of-syntax-function in font-lock-defaults.

	* jit-lock.el (jit-lock-fontify-now): Don't bind
	font-lock-beginning-of-syntax-function to nil.

2001-01-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Report values of
	locale-coding-system, default-enable-multibyte-characters, and the
	environment variables LC_ALL, LC_TYPE, and LANG.

2001-01-19  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (font-lock-default-fontify-region): Fix last change.

	* font-lock.el (font-lock-multiline): Default to nil.
	(font-lock-default-fontify-region): If font-lock-multiline is
	nil, don't check the property `font-lock-multiline'.

	* jit-lock.el (jit-lock-after-change): If font-lock-multiline
	is nil, don't check the `font-lock-multiline' text property.

2001-01-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el: Call initial-major-mode on startup.

	* ediff.el (ediff-patch-file): Use better defaults.

	* ediff-vers.el: Fix for 8+3 DOS file systems.

2001-01-19  Colin Walters  <walters@cis.ohio-state.edu>

	* ediff-util.el (ediff-compare-custom-diffs-maybe): Put diff in
	diff mode, if available.

2001-01-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-hook.el (ediff-xemacs-init-menus): Fixed add-menu-button.

	* ediff-init.el (subst-char-in-string): Define and use it, unless
	it's already defined.

2001-01-18  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-hide-delay): New user-option.
	(tooltip-show): Use tooltip-hide-delay instead of the default.

2001-01-18  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (mail-setup): Call set-buffer-multibyte because
	kill-local-variable doesn't work for enable-multibyte-characters.

2001-01-17  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-before-setup-hook)
	(ediff-merge-filename-prefix): Add :version.

	* international/latin1-disp.el: Require disp-table.
	(latin1-display): Fix :set.

	* net/eudc-vars.el (eudc-server, eudc-protocol): Fix :type.

2001-01-17  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-initial-delay)
	(isearch-lazy-highlight-interval): Default to 0.

2001-01-17  Bob Glickstein  <bobg@zanshin.com>

	* isearch.el (isearch-highlight): Set isearch-overlay priority to
	1 here rather than each time through
	isearch-lazy-highlight-new-loop.
	(isearch-lazy-highlight-max): Variable deleted.
	(isearch-lazy-highlight-max-at-a-time): New user variable, like
	isearch-lazy-highlight-max but controls a single invocation of
	isearch-lazy-highlight-update.
	(isearch-lazy-highlight-wrapped): Variable recreated.
	(isearch-lazy-highlight-window-start): New variable.
	(isearch-lazy-highlight-cleanup): Restored to behavior of
	before 2-Jan.
	(isearch-lazy-highlight-remove-overlays): Function deleted;
	behavior folded into isearch-lazy-highlight-cleanup.  "Keep"
	behavior removed.
	(isearch-lazy-highlight-new-loop): Restore old behavior of calling
	isearch-lazy-highlight-update in a loop rather than just once.
	Test isearch-invalid-regexp here and decide not to start a new
	loop, rather than testing it each time through
	isearch-lazy-highlight-update.
	(isearch-lazy-highlight-search): Function restored.
	(isearch-lazy-highlight-update): Get called in a timer loop again,
	but this time highlight more than one match each time through.
	Only highlight matches in the visible part of the window.
	Start at point, move in the direction of the search, and wrap around at
	the edge of the window.  Use sit-for to force redisplay and ensure
	window-start is credible.  "Face suppressing" behavior removed;
	overlay priorities should make it unnecessary, right?
	(isearch-highlight): Face suppressing behavior removed.
	(isearch-dehighlight): Face suppressing behavior removed.
	(isearch-set-lazy-highlight-faces-at): Removed.

2001-01-17  Kenichi Handa  <handa@etl.go.jp>

	* language/european.el ("Latin-1"): Make the format of description
	about additional language environments same as that of Latin-2.

2001-01-16  Dave Love  <fx@gnu.org>

	* isearch.el (isearch-lazy-highlight): Add :version.

	* simple.el (backward-delete-char-untabify-method)
	(next-line-add-newlines): Add :version.

2001-01-16  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el: Bind <backspace> and <delete> via function-key-map.
	Don't bind <delete> otherwise.

	* simple.el (delete-key-deletes-forward-mode): Bind <backspace>
	and <delete> via function-key-map.

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Check in
	Subject line only if point is after the `Subject:'.

2001-01-16  Kenichi Handa  <handa@etl.go.jp>

	* language/japanese.el ("Japanese"): Add japanese-jisx0213-1 and
	japanese-jisx0213-2 in `charset' property of this lang. env.

	* language/european.el ("Latin-1"): Add description for Dutch and
	Spanish lang. env.

	* international/mule.el (decode-char): Fix conditions.
	(encode-char): Handle eight-bit-control too.
	(transform-make-coding-system-args): New function.
	(make-coding-system): Accept XEmacs style arguments for CCL base
	coding system.

2001-01-15  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/etags.el (find-tag-noselect): Save the value of
	tags-file-name before switching buffers, for the case it has a
	buffer-local value.

2001-01-15  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-colors) <defgroup>: Fix :version.
	From Dave Love <fx@gnu.org>.
	(ansi-color-for-comint-mode): Fix :version.

2001-01-15  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-unfontify-region): Doc change.

2001-01-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-insert-directory): If file-system-info fails,
	remove the " free " part, but don't signal an error.

2001-01-12  Sam Steingold  <sds@gnu.org>

	* bookmark.el (bookmark-maybe-historicize-string):
	Use new backquote syntax.

2001-01-12  Richard M. Stallman  <rms@gnu.org>

	* subr.el (last): Handle a list that doesn't end in nil.

2001-01-12  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-shared-map): Bind `backspace'
	to `backward-delete-char-untabify'.

2001-01-12  Dave Love  <fx@gnu.org>

	* cus-edit.el (customize-menu-create): Fix the :filter following
	easymenu change.

	* wid-edit.el (function): Add :match-alternatives.
	(widget-color-action): Doc fix.

2001-01-12  Gerd Moellmann  <gerd@gnu.org>

	* calendar/calendar.el (calendar-basic-setup): Doc fix.

2001-01-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (prefer-coding-system): Fix docstring.

	* international/ccl.el (define-ccl-program): Fix docstring.

2001-01-11  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (standard-display-european-internal):
	Set display table for 2208 as for 160.

	* progmodes/ada-mode.el (ada-popup-key): Fix last change.

	* progmodes/fortran.el (fortran-mode-map): Modify Customization
	entry for custom-menu-create change.
	(fortran-strip-sqeuence-nos): Make arg optional.  Fix regexp and
	don't cons it in the search loop.

	* imenu.el (imenu--truncate-items): Revert last change.

2001-01-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-setup-header-line): If the node header includes
	either Next: or Prev: links, don't show the File: and Node: parts
	in the header line.

2001-01-11  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-goto-process-mark): Don't print a message
	when running in batch mode.

	* isearch.el (isearch-search): In the condition-case handler for
	`error', set isearch-invalid-regexp to the whole error message.

	* subr.el (eval-after-load): Call load-symbol-file-load-history to
	ensure that eval-after-load works for files dumped with Emacs.

	* help.el (load-symbol-file-load-history): New function extracted
	from function symbol-file.
	(symbol-file): Use it.

	* toolbar/save.xpm, toolbar/undo.xpm: Use the same colors as exit.xpm.

2001-01-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/etags.el (find-tag-interactive): If last-tag is nil,
	behave as if there were no prefix argument.
	(find-tag-noselect): If last-tag is nil, behave as if the NEXT-P
	argument were nil.

2001-01-11  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-lazy-highlight-update):
	Don't look for more potential matches once maximum is exceeded.
	Use overlays-in to check correctly for overlap with current match.
	Ignore empty matches.

2001-01-11  Miles Bader  <miles@gnu.org>

	* textmodes/ispell.el (ispell-adjusted-window-height): New function.
	(ispell-overlay-window, ispell-help, ispell-show-choices)
	(ispell-command-loop): Use it instead of `window-height'.

2001-01-10  Gerd Moellmann  <gerd@gnu.org>

	* files.el (confirm-kill-emacs): New user-option.
	(save-buffers-kill-emacs): Ask for final confirmation before
	killing Emacs.

	* isearch.el (isearch-done): Set isearch-lazy-highlight-start
	to nil.

2001-01-10  Dave Love  <fx@gnu.org>

	* progmodes/etags.el (tags-apropos-additional-actions): Fix :type.

	* progmodes/sh-script.el (sh-imenu-generic-expression): Fix doc, :type.

	* hi-lock.el (hi-lock-exclude-modes): Fix :type.

	* calculator.el (calculator-number-digits): Fix :type.

	* vc-cvs.el (vc-cvs-header): Fix :type.
	* vc-rcs.el (vc-rcs-header): Fix :type.
	* vc-sccs.el (vc-sccs-header): Fix :type.

	* progmodes/ada-mode.el (ada-popup-key): Fix :type.

	* ansi-color.el (ansi-colors) <defgroup>: Fix :version.

	* eshell/esh-util.el (eshell-ange-ls-uids): Fix :type.

2001-01-10  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (set-variable): Force a thorough redisplay for the
	case that the variable has an effect on the display, like
	`tab-width' has.

2001-01-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Add documentation for backend interface.

2001-01-10  Kenichi Handa  <handa@etl.go.jp>

	* font-lock.el (c-font-lock-extra-types): Add "Lisp_Object".

	* international/mule-conf.el (latin-extra-code-table): Set to t
	for \223 and \224.

2001-01-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (locale-language-names): Map "es" to
	"Spanish" and "nl" to "Dutch".

2001-01-09  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (global-map): Bind <home> to beginning-of-line,
	<end> to end-of-line, C-<home> to beginning-of-buffer, and
	C-<end> to end-of-buffer.

	* language/european.el: Add Dutch and Spanish language info
	to be able to use the appropriate tutorials.

2001-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process-output): Use markers instead
	of positions for start and end of region.
	(ansi-color-apply-on-region): Rewrote code to make it more robust.
	Previously, occasional mistakes happend when fontifying many
	chunks of output (eg. ls --color=yes /dev).  This happened
	whenever an overlay was created up to the end of the region, which
	coincided with the process-mark.  New text would then be added
	within that overlay instead of after it.
	(ansi-color-make-extent): Overlays are created with the property
	`modification-hooks' set to '(ansi-color-freeze-overlay).
	(ansi-color-freeze-overlay): New function.  When inserting text at
	the end of the overlay, the overlay will resize.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process-output): Doc change.
	(ansi-color-unfontify-region): Doc change.  No longer installed
	automatically in font-lock-unfontify-region-function.
	(ansi-color-apply): Doc change.
	(ansi-color-apply-on-region): Use extents or overlays instead of
	text-properties.
	(ansi-color-make-extent): New function.
	(ansi-color-set-extent-face): New function.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-process): Removed, Emacs and XEmacs
	both use ansi-color-process-output, now.
	(ansi-color-process-output): Doesn't return string anymore.  It is
	installed in comint-output-filter-functions for both Emacs and
	XEmacs, now.
	(ansi-color-unfontify-region): Simplified code removing variables
	pos and start-ansi.
	(ansi-color-apply): Put text-property ansi-color before putting
	text-property face because ansi-color-unfontify-region is called
	immediately after the call to put-text-property.
	(ansi-color-context-region): Doc change.
	(ansi-color-filter-region): Simplified code.
	(ansi-color-apply-on-region): Changed start to start-marker, using
	a marker explicitly.  Put text-property ansi-color before putting
	text-property face because ansi-color-unfontify-region is called
	immediately after the call to put-text-property.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-faces-vector): Doc change.
	(ansi-color-for-comint-mode): Changed :type property to choice.
	(ansi-color-last-context): Removed.
	(ansi-color-process-output): Don't use ansi-color-last-context, as
	the main functions will store their context now.
	(ansi-color-context): Doc change.
	(ansi-color-filter-apply): Rewrote it based on ansi-color-apply.
	Uses ansi-color-context such that repeated calls will strip
	partial escape sequences, too.
	(ansi-color-apply): Simplified code.  Colorize end of string if
	face is not null.  Store context in new (FACE STRING) format, such
	that repeated calls will strip partial escape sequences, too.
	Append faces to face property using ansi-color-apply-sequence such
	that cumulative mode actually works.
	(ansi-color-context-region): New variable.
	(ansi-color-filter-region): Rewrote it based on
	ansi-color-apply-on-region.  Uses ansi-color-context-region such
	that repeated calls will strip partial escape sequences, too.
	(ansi-color-apply-on-region): Simplified code.  Colorize end of
	region if face is not null.  Store context in new (FACE POS)
	format, such that repeated calls will strip partial escape
	sequences, too.  Append faces to face property using
	ansi-color-apply-sequence such that cumulative mode actually works.
	(ansi-color-apply-sequence): New function.
	(ansi-color-get-face): When the default face is added to the list
	of faces, all previous settings are discarded and the list of
	faces is set to '(default).

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-faces-vector): Use nil for the default
	face, such that ansi-color-apply and ansi-color-apply-on-region
	will do the right thing.
	(ansi-color-apply): Do the right thing, ie. if ansi-color-get-face
	returns nil, set the list of faces back to nil instead of
	appending the result of ansi-color-get-face to the front of the list.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-comint-mode): Doc change.
	(ansi-color-process): Doc change.
	(ansi-color-last-context): New buffer-local variable.
	(ansi-color-process-output): New function.  It is automatically
	added to comint-output-filter-functions if this is XEmacs.
	(ansi-color-unfontify-region): New optional parameter for XEmacs
	compatibility.  Check whether font-lock-syntactic-keywords is
	boundp before removing the syntax table text property, as XEmacs
	doesn't have it.
	(ansi-color-filter-region): Doc change.
	(ansi-color-apply-on-region): Doc change.
	(ansi-color-make-face): New function.  Compatibility layer for
	XEmacs.  Return temporary faces instead of cons cells for XEmacs.
	(ansi-color-make-color-map): Use ansi-color-make-face.
	(ansi-color-get-face): Avoid face text property '(nil) as results
	in an error for XEmacs.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-unfontify-region): New function.
	Uses text-property ansi-color in order to preserve fontification by
	ansi-color.  When the package is loaded, a lambda expression is
	put onto font-lock-mode-hook.  This lambda expression will check
	font-lock-unfontify-region-function and replace
	font-lock-default-unfontify-region with ansi-color-unfontify-region.
	(ansi-color-apply): Add text-property ansi-color in addition to
	text-property face.
	(ansi-color-apply-on-region): Add text-property ansi-color in
	addition to text-property face.
	(save-buffer-state): Copy of the macro that is also used by
	lazy-lock and font-lock.

	(ansi-color-for-comint-mode): New option.
	(ansi-color-for-comint-mode-on): Set ansi-color-for-comint-mode.
	(ansi-color-for-comint-mode-off): Ditto.
	(ansi-color-for-comint-mode-filter): Ditto.
	(ansi-color-process): New function.  Uses ansi-color-for-comint-mode to
	decide what to do.  This function is added to
	comint-preoutput-filter-functions when the package is loaded.

	(ansi-color-for-shell-mode-set): Removed.
	(ansi-color-for-shell-mode): Removed.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-shell-mode-set): New function with
	the lambda expression from the ansi-color-for-shell-mode :set
	property.  Additionally, modify shell-mode-hook to enable or
	disable font-lock-mode for future shell buffers.
	(ansi-color-for-shell-mode): The :set property calls
	ansi-color-for-shell-mode-set instead of a lambda expression.

2000-01-09  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-color-for-shell-mode): Doc change.
	(ansi-color-context): New variable.
	(ansi-color-apply): Save context between calls.

2001-01-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch, isearch-lazy-highlight-face):
	New definitions for face colors and attributes.

	* wid-edit.el (widget-choose): Call display-popup-menus-p instead
	of display-mouse-p.

2001-01-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): If the coding system
	accepts extra latin codes, register such codes as safe for the
	coding system.

2001-01-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-log-1): In non-batch case,
	don't mention the file name or the date here, because they are
	logged at the start of the file.

2001-01-08  Richard M. Stallman  <rms@gnu.org>

	* mouse-drag.el (mouse-drag-should-do-col-scrolling):
	Change screen-width to frame-width.

2001-01-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-search): Print the default as part of the prompt.

2001-01-08  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-default-latest-on-branch-p): New function, replaces
	constant implementations in backends.

	* vc-cvs.el (vc-cvs-latest-on-branch-p): Removed.
	(vc-cvs-checkout): Renamed arg WRITABLE to EDITABLE.

	* vc-rcs.el (vc-rcs-checkout, vc-rcs-cancel-version): Renamed arg
	WRITABLE to EDITABLE.

	* vc-sccs.el (vc-sccs-latest-on-branch-p): Removed.
	(vc-sccs-checkout, vc-sccs-cancel-version): Renamed arg WRITABLE
	to EDITABLE.

2001-01-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/copyright.el (copyright-current-year): Now a defvar.
	(copyright, copyright-update): Compute the current year at run time.

2001-01-08  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-old-signal-hook): Removed.
	(isearch-mode): Add isearch-done to kbd-macro-termination-hook
	instead of setting signal-hook-function.
	(isearch-done): Remove isearch-done from kbd-macro-termination-hook.

2001-01-08  Kevin Gallagher  <kevingal@onramp.net>

	* emulation/edt.el: Update to version 4.0.  Provide support for
	EDT scroll margins at top and bottom of the window.  Provide an
	emulation of the EDT SUBS command (bound to GOLD-Enter, by
	default).  Enhance edt-quit, bound to GOLD-q by default, to warn
	user when file-related buffer modifications exist.
	Provide support for running EDT Emulation in XEmacs.
	Provide customize access to some user updatable variables.
	Add Commentary section to file header.
	Fixed a few minor bugs and cleaned up some code.

	* emulation/edt-mapper.el: Update to version 4.0.  Provide support
	for detecting a keypress that generates an ASCII key sequence.
	(Previously, only a keypress that generates a vector was
	recognized.)  Embed Window Manager name into name of the generated
	EDT Emulation initialization file since the initialization file is
	Window Manager specific.  Add Commentary section to file header.

2001-01-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/sendmail.el (mail-mode): Doc fix.

	* info.el (Info-goto-emacs-command-node): Doc fix.
	(Info-goto-emacs-key-command-node): Doc fix.

2001-01-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* ediff-vers.el (noninteractive): Don't load generic-sc on MS-DOS
	systems without long file-name support.

2001-01-06  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (custom-deps): Set EMACSLOADPATH explicitly.

2001-01-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* isearch.el (isearch-lazy-highlight-remove-overlays): Doc fix.
	(isearch-lazy-highlight-update): Doc fix.

	* ffap.el (ffap-bindings): Doc fix.

	* dired-x.el (dired-virtual-guess-dir): Doc fix.

2001-01-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-seq.el (remove, remq): Remove.

2001-01-05  Gerd Moellmann  <gerd@gnu.org>

	* mouse-drag.el (mouse-drag-safe-scroll):
	Bind scroll-preserve-screen-position to nil.

	* isearch.el (isearch-old-signal-hook): New variable.
	(isearch-mode): Set signal-hook-function to isearch-done.
	(isearch-done): Restore old signal-hook-function.

	* info.el (Info-fontify-node): Mark one more char as intangible.

2000-01-05  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (compose-last-chars): New argument COMPONENTS.
	If it is non-nil, compose preceding characters by compose-region with
	COMPONENTS.

	* international/quail.el (quail-input-string-to-events): New function.
	(quail-input-method): Convert input string to events here.
	(quail-start-translation): Return input string, not event list.
	(quail-start-conversion): Likewise.

2001-01-04  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-cancel-delayed-tip)
	(tooltip-start-delayed-tip): Renamed from tooltip-disable-timeout
	and tooltip-add-timeout.
	(tooltip-show): Set border color from faces's foreground.
	(tooltip-show-help-function): If called with the same help string
	as last time, do nothing.
	(tooltip-help-tips): Don't set tooltip-help-message to nil.

	* startup.el (fancy-splash-screens): Don't bind show-help-function
	to nil.

	* tooltip.el (tooltip-frame-parameters): Remove colors.
	(tooltip): New face.
	(tooltip-set-param): New function.
	(tooltip-show): Set up color frame parameters from face `tooltip'.
	Display the tooltip text in face `tooltip'.

2001-01-04  Dave Love  <fx@gnu.org>

	* whitespace.el (whitespace-global-mode): Fix typo.

	* hilit19.el, mail/rnewspost.el, mail/rnews.el: Moved to obsolete.

2001-01-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (help-for-help): Fix a typo in a doc string.
	From kwzh@gnu.org (Karl Heuer).

2001-01-03  Dave Love  <fx@gnu.org>

	* dired-x.el: Doc fixes.  Maintainer change.
	(dired-guess-shell-gnutar, dired-guess-shell-znew-switches): Fix :type.
	(dired-guess-shell-alist-default): Don't use xloadimage for PNG.
	(dired-guess-shell-alist-user): Customize.
	(dired-x-help-address): Set to bug-gnu-emacs.
	(dired-x-maintainer, dired-x-file, dired-x-version): Deleted.
	(dired-default-directory): Renamed from default-directory.

	* hl-line.el (hl-line): Doc fix.

2001-01-03  Karl Fogel  <kfogel@red-bean.com>

	* mail/mail-hist.el (mail-hist-text-too-long-p): Doc fix.

2001-01-02  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-lazy-highlight-cleanup): Arg now says
	to remove all the current alternative-match highlighting.
	If nil, remove only what's outside the current window.
	(isearch-lazy-highlight-remove-overlays): Take optional
	region within which NOT to remove them.
	(isearch-lazy-highlight-new-loop): Greatly simplified.
	(isearch-lazy-highlight-update): Find all the other occurrences
	visible in the window, in just one call.
	(isearch-lazy-highlight-start): Now holds start of region to scan.
	(isearch-lazy-highlight-end): Now holds end of region to scan.
	(isearch-lazy-highlight-wrapped): Variable deleted.
	(isearch-lazy-highlight-search): Function deleted.

2000-01-02  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (convert-standard-filename): Do length check on name
	before aref.

2001-01-02  Dave Love  <fx@gnu.org>

	* progmodes/cperl-mode.el (cperl-invalid-face): Don't double-quote
	value.
	(cperl-init-faces): Allow cperl-invalid-face to be a normal face.

	* ls-lisp.el (ls-lisp) <defgroup>: Add :version.

	* net/browse-url.el (browse-url-filename-alist): Avoid backquote
	read syntax.

	* calendar/todo-mode.el (todo): Add :link, :version.
	(todo-save-top-priorities): Remove autoload cookie.
	(todo-add-category, todo-add-item-non-interactively)
	(todo-insert-item, todo-mode, todo-cp, todo-show): Fix autoload cookie.

2001-01-02  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-input-history-ignore): New variable.
	(comint-read-input-ring): Ignore entries matching
	comint-input-history-ignore.

2001-01-02  Eric M. Ludlam  <zappo@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-copyright-prefix): New Variable.
	(lm-copyright-mark): New function.
	(lm-crack-copyright): New function.
	(lm-verify): Check that the file has a copyright.
	Check that the file is copyright Free Software Foundation.

2000-12-30  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (print-fontset): Indent font name by
	24 columns, not 25.

2000-12-29  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Spell-check
	in Subject line.

	* mail/mailabbrev.el (mail-abbrevs-enable, mail-abbrevs-disable):
	Use mail-mode-hook instead of mail-setup-hook.
	Otherwise continuing an interrupted message with C-u C-x m for
	instance, winds up in Mail mode without abbrevs.

2000-12-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Handle form feed better when ps-zebra-stripe-follow is
	non-nil.  Adding almost all customization variables on ps-setup.
	Doc fix.
	(ps-print-version): New version number (6.3.3).
	(ps-end-with-control-d): Initialization fix.
	(ps-lines-printed): New var.
	(ps-skip-newline): New fun.
	(ps-setup, ps-prologue-file, ps-begin-job, ps-begin-page)
	(ps-next-line, ps-continue-line, ps-plot-region)
	(ps-generate-postscript-with-faces, ps-end-job): Code fix.

2000-12-29  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (x-complement-fontset-spec):
	Resolve ASCII font name so that the same family name is used for fonts
	registered in x-font-name-charset-alist.
	(create-fontset-from-fontset-spec): Adjusted for the above change.
	The name of fontset alias should be a unresolved ASCII font name.

2000-12-28  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Bind backspace
	and delete in isearch-mode-map.

2000-12-28  Richard M. Stallman  <rms@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default):
	Use xpdf instead of acroread.

2000-12-28  Kenichi Handa  <handa@etl.go.jp>

	* textmodes/artist.el (artist-butlast): Deleted.
	(artist-ellipse-mirror-quadrant): Use butlast instead of
	artist-butlast.

	* subr.el (butlast, nbutlast): Moved from cl.el to here.

	* emacs-lisp/cl.el (butlast, nbutlast): Moved to subr.el.

2000-12-27  Eli Zaretskii  <eliz@is.elta.co.il>

	From Francis J. Wright <F.J.Wright@maths.qmw.ac.uk>:

	* ls-lisp.el: Better support for the Mac and MS-Windows.
	(ls-lisp): New defgroup.
	(ls-lisp-emulation, ls-lisp-ignore-case, ls-lisp-dirs-first)
	(ls-lisp-verbosity, ls-lisp-use-insert-directory-program)
	(ls-lisp-support-shell-wildcards): New defcustoms.
	(ls-lisp-parse-symlink): New function.
	(insert-directory): Code to convert switches to a list and set up
	the wildcard argument copied from ls-lisp-insert-directory.
	(ls-lisp-insert-directory): New argument TIME-INDEX.  Add support
	for -C and -R switches.
	(ls-lisp-column-format): New function.
	(ls-lisp-delete-matching, ls-lisp-handle-switches)
	(ls-lisp-format-time): Add doc strings.
	(ls-lisp-handle-switches): Handle -U, -S, -X, and -F switches.
	Support ls-lisp-dirs-first.
	(ls-lisp-classify, ls-lisp-extension): New functions.
	(ls-lisp-format): Optionally support emulation of symlinks.
	Support -i, -s, and -G switches.

2000-12-27  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Set fill-column to 70.

	* version.el (emacs-version): Print X scroll bar information.

	* scroll-bar.el (toplevel): Check for x-toolkit-scroll-bars
	instead of x-toolkit-scroll-bars-p.

	* loadup.el (toplevel): Check for x-toolkit-scroll-bars instead
	of x-toolkit-scroll-bars-p.

2000-12-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* ffap.el (ffap-bindings): Make interactive and add an autoload cookie.
	(ffap-bindings): Doc fix, to reflect the above change.

2000-12-27  Kenichi Handa  <handa@etl.go.jp>

	* term.el (term-char-mode): Define all non-ascii self-inserting
	characters to 'term-send-raw in term-raw-map.

2000-12-25  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el (viper-restore-cursor-type): Added condition-case guard.

	* ediff-init.el (ediff-quit-hook,ediff-suspend-hook):
	Changed initialization; use add-hook.
	(ediff-file-remote-p): Use file-local-copy.

	* ediff-ptch.el (ediff-prompt-for-patch-buffer): Improved defaults.

	* ediff.el (ediff-patch-buffer): Bug fix.
	(ediff-revision): Allow selection of the file at the prompt.

2000-12-23  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (combine-run-hooks): Remove.

	* emacs-lisp/edebug.el (define-minor-mode): Improve the spec
	and remove the rogue second spec.

2000-12-23  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compilation-forget-errors): Fix indentation.

2000-12-22  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-basic-map): Use `=' rather than `d'.
	Use minibuffer menu prompt for the `=' prefix.
	(smerge-command-prefix): Change default to C-^.
	(smerge-mode): Don't assume font-lock doesn't move point.

	* skeleton.el (skeleton-internal-1): Make sure the first line of
	the region is also re-indented.
	(skeleton-end-newline): New var.
	(skeleton-end-hook): Use it.

2000-12-22  Markus Rost  <markus.rost@mathematik.uni-regensburg.de>

	* comint.el (comint-password-prompt-regexp): Support CVS.

2000-12-22  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Simplify.
	Also backspace key combinations, depending on
	delete-key-deletes-forward.

	* bindings.el ([C-backspace]): Bind C-backspace to kill-word.

	* simple.el (delete-key-deletes-forward): Doc fix.

2000-08-22  Emmanuel Briot  <briot@gnat.com>

	* xml.el (top level comment): Updated to reflect the fact that
	white spaces are relevant in the XML file.
	(xml-parse-file): Do not kill an existing Emacs buffer if the file
	to parse was already edited. This allows for on-the-fly analysis
	of XML files.
	(xml-parse-tag): Check that the casing is the same in the start
	tag and end tag, since XML is case-sensitive.  Allows for spaces
	in the end tag, after the name of the tag.
	(xml-parse-attlist): Allow for the character '-' in the name of
	attributes, as in the standard http-equiv attribute Do not save
	the properties in the XML tree, since they are not relevant.

2000-12-21  Stefan Monnier  <monnier@cs.yale.edu>

	* generic.el (generic-read-type): Undo last change, inline into
	`generic-mode' and then remove.
	(generic-mode): Inline generic-read-type.
	(define-generic-mode): Push the symbol name rather than the symbol
	onto generic-mode-list.

2000-12-21  Gerd Moellmann  <gerd@gnu.org>

	* generic.el (generic-read-type): Build an alist for
	completing-read as in 20.7.

	* play/landmark.el (lm): Use interactive spec `P'.
	(toplevel): Don't set debug-on-error.

	* server.el (server-switch-buffer): Choose a window on a visible frame.

2000-12-21  Dave Pearson  <davep@davep.org>

	* quickurl.el: Commentary change, I've moved my web site.

2000-12-21  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ebnf2ps.el: Fix a problem with skip-chars-forward: it doesn't accept
	ranges like \177-\237, but accepts the character sequence from \177 to
	\237.  Doc fix.
	(ebnf-version): New version (3.4).
	(ebnf-setup): Code fix.
	(ebnf-range-regexp): New fun.
	(ebnf-8-bit-chars): Const fix.

	* ebnf-bnf.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-bnf-lex): Code fix.
	(ebnf-bnf-comment-chars): Const fix.

	* ebnf-iso.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-iso-comment-chars): Const fix.

	* ebnf-otz.el: Doc fix.

	* ebnf-yac.el: Fix the same problem as described on ebnf2ps.el log
	entry.  Doc fix.
	(ebnf-yac-skip-code): Code fix.
	(ebnf-yac-comment-chars): Const fix.

2000-12-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (insert-directory-safely): New function.
	(recover-file): Use it instead of insert-directory.
	From Markus Rost <markus.rost@mathematik.uni-regensburg.de>

2000-12-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Check coding-category-list more rigidly.  Improve help message.

	* dired.el (dired-move-to-filename-regexp): Fix previous change.

2000-12-21  Miles Bader  <miles@gnu.org>

	* mail/sendmail.el (mail-mode): Set `comment-start' to the yank prefix.

2000-12-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Make *Help*
	buffer inherit multibyteness of the current buffer.

	* international/mule.el (make-char): Docstring adjusted for the
	change of make-char-internal.

2000-12-20  Stefan Monnier  <monnier@cs.yale.edu>

	* international/iso-cvt.el: Docstrings fix.

2000-12-20  Dave Love  <fx@gnu.org>

	* subr.el (eval-after-load): Doc fix.

2000-12-20  Kenichi Handa  <handa@etl.go.jp>

	* jka-compr.el (jka-compr-partial-uncompress): Don't use `concat'
	for numbers.

2000-12-20  Miles Bader  <miles@gnu.org>

	* international/quail.el (quail-help): Resize the help window
	again after it has all its contents.  Remove unneeded progn.

2000-12-19  Gerd Moellmann  <gerd@gnu.org>

	* pcmpl-linux.el: Fix copy/paste error.

2000-12-19  Andrew Innes  <andrewi@gnu.org>

	* simple.el (delete-key-deletes-forward-mode): Fix typo in docstring.

2000-12-19  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlw-rinfo.el: Fixed copyright notice.

	* progmodes/idlw-toolbar.el: Fixed copyright notice.

	* progmodes/idlw-shell.el: Fixed copyright notice.

	* progmodes/idlwave.el: Fixed copyright notice.

	* textmodes/reftex-dcr.el (reftex-view-crossref): Added SPACE and
	TAB as key separators.

2000-12-19  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-sybase-options): New option.
	(sql-sybase): Use it.  Add sql-database to the list of parameters
	provided for login.  The options -w 2048 -n are not used any more.
	(sql-postgres-options): Changed default from "--pset" to "-P".
	(sql-mysql-options): Doc change.
	(sql-stop): Doc change.

2000-12-19  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-input-method): Always hide
	the guidance buffer on exiting.

2000-12-18  Gerd Moellmann  <gerd@gnu.org>

	* tooltip.el (tooltip-mode): Signal an error if x-show-tip
	isn't fboundp.

	* server.el (server-buffer-done): Bury the buffer before
	killing it.

	* faces.el (face-spec-set): Interpret a nil in specs for
	foreground and background colors as `unspecified', for
	compatibility with 20.x.

2000-12-18  Dave Love  <fx@gnu.org>

	* simple.el (mail-user-agent): Doc fix.
	(input-mode-8-bit): Removed.

	* international/mule.el (set-keyboard-coding-system): Doc fix.
	(keyboard-coding-system): New option.

	* mail/sendmail.el (send-mail-function): Customize.

2000-12-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp866-decode-table): New table.

2000-12-18  Gerd Moellmann  <gerd@gnu.org>

	* version.el (emacs-version): Remove `%a' from the time format
	because the weekday doesn't fit well into each locale.

2000-12-18  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-extensions): Add "pgm" and "ppm".

	* textmodes/artist.el (artist-replace-chars, artist-replace-char):
	Check that emacs-major-version is `=' to 20, not `>='.
	(artist-replace-chars): Use `make-string' instead of a loop.

2000-12-17  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-diff-backup-extractor): Return full-path for file.
	(cvs-execute-single-file): Don't change directory.
	Patch from Per Cederqvist.

2000-12-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (check-ispell-version):
	If `ispell-program-name' is "aspell", pass it the -v switch instead
	of -vv.

2000-12-16  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (mule-diag): Insert information about
	configure options, multibyte awareness, language env.

	* international/ja-dic-cnv.el (skkdic-get-candidate-list): Fix the
	regexp to search for candidates.

2000-12-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-forward-node): If the node has an
	Info-header-line, widen the buffer before searching for "next:"
	and "up:" pointers, and set the search limit to stay in the
	current node.

2000-12-16  Miles Bader  <miles@gnu.org>

	* simple.el (delete-trailing-whitespace): Remove extraneous let.

2000-12-15  Miles Bader  <miles@gnu.org>

	* comint.el (comint-send-string, comint-send-region): Also accept
	a buffer, buffer-name, or nil for PROCESS, for compatibility with
	process-send-string/region.

2000-12-15  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-max): New user-option.
	(isearch-lazy-highlight-update): Don't highlight more than
	isearch-lazy-highlight-max matches.

	* mail/mh-utils.el (mh-find-path): Set read-mail-command.

2000-12-15  Richard M. Stallman  <rms@gnu.org>

	* sort.el (sort-columns): Fix error message.

	* dabbrev.el (dabbrev--last-case-pattern): Value is now
	`upcase' or `downcase' or nil.
	(dabbrev-expand): Don't do anything with dabbrev--last-case-pattern.
	Pass new record-case-pattern arg to dabbrev--substitute-expansion.
	(dabbrev--substitute-expansion): New arg record-case-pattern.
	If it is non-nil, set dabbrev--last-case-pattern.
	If ABBREV is " ", use dabbrev--last-case-pattern to change EXPANSION.

	* dabbrev.el (dabbrev--find-expansion): Remove extra nreverse.

2000-12-15  Miles Bader  <miles@gnu.org>

	* paths.el (Info-default-directory-list): Don't delete
	configure-info-directory from the list of standard info
	directories when appending it to the end -- their order is important.

	* faces.el (read-face-attribute): If there's no entry for the
	user's input in VALID, just use it as-is (this will often result
	in an error, but it may be OK for e.g. colors using hexadecimal
	notation, and at least will yield a better error message).

	* window.el (mode-line-window-height-fudge): Function removed.
	(height-affecting-face-attributes, mode-line-window-height-fudge):
	Variables removed.
	* textmodes/ispell.el (ispell-overlay-window): Ensure that the new
	window is really the right size.  Use vertical-motion
	rather than forward-line.
	(ispell-help): Don't use ispell-mode-line-window-height-fudge.
	(ispell-command-loop, ispell-show-choices): Use the variable
	ispell-choices-win-default-height, rather than the function.
	(ispell-choices-win-default-height): Function removed.
	(ispell-mode-line-window-height-fudge): Function removed.

2000-12-14  Stefan Monnier  <monnier@cs.yale.edu>

	* add-log.el (add-change-log-entry): Only expand-file-name if non-nil.

2000-12-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* paths.el (Info-default-directory-list):
	If configure-info-directory is not one of the standard directories,
	put it first in the list; otherwise put it last.  Doc string
	changed accordingly.

	* info.el (Info-directory-list): Change doc string to reflect the
	change in Info-default-directory-list.

	* simple.el (delete-key-deletes-forward-mode): Treat ms-dos and
	windows-nt as windowed environments, even under -nw.

	* startup.el (command-line): Don't call x-backspace-delete-keys-p
	if not fboundp.  Switch delete-forward mode for the <delete> key
	on all PC platforms, even under -nw.

	* term/internal.el ([M-delete]): Remap to M-d.

2000-12-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mnt.el: Change maintainer to FSF.

2000-12-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (show-cursor-in-non-selected-windows): Doc fix.

2000-12-14  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Call delete-key-deletes-forward-mode,
	if appropriate.

	* simple.el (delete-key-deletes-forward): New user-option.
	(delete-key-deletes-forward-mode): New function.

	* bindings.el: Bind `delete' to backward-delete-char.

	* emacs-lisp/easymenu.el (easy-menu-current-active-maps):
	Test if symbol is bound before getting its value.

	* tooltip.el (tooltip-show): If an error is signaled in
	x-show-tip, display that error, and display the help in the
	echo area.

2000-12-14  Kenichi Handa  <handa@etl.go.jp>

	* international/ja-dic-cnv.el (skkdic-set-okuri-nasi):
	Show "... entries" messages for every 10000 entries, not 10.

2000-12-13  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Provide a generic exit hook, as suggested by
	Ovidiu Predescu <ovidiu@cup.hp.com>:
	(bookmark-exit-hook): New var.
	(bookmark-exit-hook-internal): New func, replaces
	old raw lambda form in `kill-emacs-hook', and runs new
	`bookmark-exit-hooks'.  No longer tests for the bookmark feature,
	as logically that feature must have been provided if this function
	is running.
	Removed ;;;###autoload before the `add-hook' call.

2000-12-13  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-define): Setup indentation.
	(easy-menu-current-active-maps): New function.
	(easy-menu-get-map): Use it.
	Make a proper menu entry when creating a new keymap.

2000-12-13  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Fix cases and syntaxes for
	mule-unicode-0100-24ff.

	* dired.el (dired-move-to-filename-regexp): Fixed for the case
	that a Japanese character is not appended after day and year.

	* info.el (Info-suffix-list): Change format for a command that
	requires arguments.
	(info-insert-file-contents): Adjusted for the above change.

2000-12-12  Andreas Schwab  <schwab@suse.de>

	* tar-mode.el (tar-extract): Base the name of the subfile buffer
	on the name of the tar buffer.  Verify that the existing buffer is
	visiting the same subfile.

2000-12-12  Dave Love  <fx@gnu.org>

	* subdirs.el: Add obsolete.

2000-12-12  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmailsum.el (rmail-summary-expunge)
	(rmail-summary-expunge-and-save): Use rmail-expunge-confirmed
	instead of rmail-confirm-expunge.

	* replace.el (perform-replace): Don't use an empty match adjacent
	to a non-empty match when computing the next match before the
	replacement is performed.

2000-12-12  Milan Zamazal  <pdm@freesoft.cz>

	* progmodes/glasses.el: Use `define-minor-mode' for the minor mode
	definition (patch by Stefan Monnier).
	(glasses-mode): Use jit-lock instead of `after-change-functions'
	(patch by Stefan Monnier).

2000-12-12  Miles Bader  <miles@gnu.org>

	* info.el (Info-last-preorder): Don't barf on nodes without a prev.
	(Info-scroll-down): Respect `Info-scroll-prefer-subnodes'.

2000-12-12  Andrew Choi  <akochoi@i-cable.com>

	* term/mac-win.el: Remove load for ls-lisp.

	* loadup.el: Load ls-lisp for system-type `macos'.

2000-12-12  Miles Bader  <miles@gnu.org>

	* simple.el (delete-horizontal-space): Add BACKWARD-ONLY parameter.
	Respect field end too.
	(just-one-space): Respect fields as `delete-horizontal-space'.
	(newline-and-indent, reindent-then-newline-and-indent):
	Use `delete-horizontal-space'.

2000-12-11  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent-new-line): Use delete-horizontal-space
	(so as to obey the field property in the minibuffer).

	* obsolete/c-mode.el: Moved from lisp/progmodes.
	* obsolete/auto-show.el: Moved from lisp.
	* obsolete/ooutline.el: Moved from lisp/textmodes.

2000-12-11  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlwave.el: Updated to IDLWAVE version 4.7.  Too many
	changes to list them here.

	* progmodes/idlw-shell.el: Updated to IDLWAVE version 4.7.
	Too many changes to list them here.

	* progmodes/idlw-rinfo.el: Updated to IDLWAVE version 4.7.
	Too many changes to list them here.

	* progmodes/idlw-toolbar.el: Updated to IDLWAVE version 4.7.

2000-12-11  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (kill-new): Don't try to setcar kill-ring if it is nil.

	* cus-edit.el (custom-save-variables, custom-save-faces):
	Comment fix.

	* hscroll.el: Moved to `obsolete' subdir.

2000-12-11  Miles Bader  <miles@gnu.org>

	* window.el (window-text-height): Function removed (now in C).

2000-12-10  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-parent-buffer): New var.
	(log-edit): Set it.  Add BUFFER argument.
	(log-edit-done): Use char-before.
	Don't bother checking validity of vc-comment-ring.
	Only bury the buffer if log-edit popped it up.

	* pcvs.el: Update references to CVS-Edit (now Log-Edit).
	(cvs-mode-diff-help): Remove.
	(cvs-mode-commit): Use the new `log-edit' BUFFER argument.
	(cvs-mode-marked): Set up the default for CMD manually.

	* pcvs-defs.el (cvs-mode-diff-map): Use minibuffer menu prompt.
	Remove binding for ? now made unnecessary.

2000-12-10  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-scanning-info-available-p): New function.
	(reftex-TeX-master-file): Check for `tex-main-file' early enough.

	* textmodes/reftex-global.el (reftex-create-tags-file): Fixed bug
	when master file is not open.

2000-12-09  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-stmt.el: Update `maintainer'.

2000-12-09  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-old-format-warn): Reorder custom
	choices to match documentation string.

2000-12-09  Miles Bader  <miles@gnu.org>

	* minibuf-eldef.el: New file.

	* window.el (fit-window-to-buffer): Don't pass last argument to
	pos-visible-in-window-p, now that its meaning is inverted.

2000-12-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* image.el (create-image): Doc fix; spotted by Per Cederqvist
	<ceder@lysator.liu.se>.

2000-12-08  Stefan Monnier  <monnier@cs.yale.edu>

	* autoinsert.el (auto-insert-alist): Add missing final \n.

	* pcvs-defs.el (cvs-menu): Move.  Make submenu for diff commands.
	(cvs-menu-map): Remove.
	* pcvs.el (cvs-menu): Use `cvs-menu' rather than `cvs-menu-map'.
	(cvs-mode-quit): Turn it back into a plain function.

	* textmodes/texnfo-upd.el (texinfo-chapter-level-regexp)
	(texinfo-filter): Remove (move to texinfo.el).

	* textmodes/texinfo.el: Move the (require 'cl) to the front of the
	file where it's more visible.
	(texinfo-filter, texinfo-chapter-level-regexp): New variables
	moved from texnfo-upd.el (for AUCTeX's compatibility, originally).
	(texinfo-mode): Use texinfo-chapter-level-regexp for page-delimiter.
	(texinfo-inside-macro-p): Only catch `scan-error's.
	(texinfo-inside-env-p): Make better use of the match info.
	(texinfo-insert-quote): Collapse calls to `texinfo-inside-macro-p'.
	(texinfo-insert-@end): Slight re-organization.
	Also remove useless `looking-at' call.

2000-12-08  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el: Add clipboard support from term/w32-win.el, so it is
	accessible in -nw mode.

	* term/w32-win.el: Remove stuff about selection timeout, which is
	irrelevant on Windows.  Move clipboard support to w32-fns.el, so
	it is accessible in -nw mode.

2000-12-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode):
	Set font-lock-keywords-case-fold-search.

2000-12-08  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/ispell.el (ispell): Doc fix.

2000-12-08  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-insert-decode-map): Check the
	frame width of a window displaying the current buffer, not that of
	the selected frame.
	(quail-help): Make sure that the help buffer has window before
	inserting text in it.

2000-12-07  Sam Steingold  <sds@gnu.org>

	* loadup.el: Load emacs-lisp/backquote instead of autoloading.
	Backquote is used in isearch.el, so autoloading saves nothing.

2000-12-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level-add-subdirs-to-load-path):
	Ignore the CVS and RCS subdirectories case-insensitively.

	* dired.el (dired-insert-directory): If file-system-info is
	fboundp, call it instead of invoking dired-free-space-program.

2000-12-07  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-visit-files): Push files on file-name-history.

	* progmodes/cc-langs.el: Update copyright.

	* progmodes/idlw-shell.el, progmodes/idlwave.el: Update copyright.

	* bindings.el (mode-line-mode-menu): Add glasses-mode.

	* bindings.el (mode-line-mode-menu): Reverse the order
	of define-keys so that the menu appears in alphabetical order.

2000-12-07  Milan Zamazal  <pdm@freesoft.cz>

	* progmodes/glasses.el (glasses-mode): Update mode line at the end
	of the function.

2000-12-07  Dave Love  <fx@gnu.org>

	* jka-compr.el (jka-compr-compression-info-list): Fix :type.

	* facemenu.el (facemenu-unlisted-faces): Fix value.

2000-12-07  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-default-fontify-region):
	Include the terminating \n (off-by-one error).
	(font-lock-set-defaults): Use dolist.

	* derived.el (define-derived-mode): Don't use combine-run-hooks.

2000-12-07  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (describe-language-environment):
	Fix for the case that an input method title is not string but a list.

	* ps-bdf.el (bdf-read-font-info): Modify the kludgy code for fonts
	of wrong SIZE record.

2000-12-06  Dave Love  <fx@gnu.org>

	* newcomment.el (comment-region, comment-dwim): Doc fix.

	* textmodes/texinfo.el: Require tex-mode when compiling.
	(texinfo-update-node): Doc fix.
	(texinfo-imenu-generic-expression): Add @anchor.
	(texinfo-font-lock-keywords): Add @uref.
	(texinfo-inside-macro-p): Don't use ignore-errors.
	(texinfo-insert-quote): Match more contexts.

	* international/mule.el (decode-char, encode-char): Doc fix.
	(auto-coding-alist): Customize.

	* files.el (load-file): Fix change of 2000-03-12.

	* wid-edit.el (widget-text-keymap): Doc fix.

2000-12-06  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (lisp): Set to an absolute directory, namely
	$(CURDIR).

2000-12-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/autoload.el (update-file-autoloads): Use raw-text to
	read generated-autoload-file, and set buffer-file-coding-system to
	raw-text-unix after reading the file.

	* international/mule-conf.el (file-coding-system-alist):
	Use raw-text for reading loaddefs.el and raw-text-unix for writing it.

2000-12-06  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (occur): Make line-number-width 1 smaller for the
	colon following the line number.

	* startup.el (fancy-splash-text, command-line-1):
	Use `File' for the menu name instead of `Files'.

	* tmm.el: Update copyright.

	* cus-start.el: Add entry for even-window-heights.

2000-12-06  Miles Bader  <miles@gnu.org>

	* faces.el (frame-set-background-mode): Avoid stomping on
	locally modified faces.

2000-12-06  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Correct the font registries for
	japanese-jisx0213-1 and japanese-jisx0213-2.

2000-12-05  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/reftex-toc.el (reftex-toc-menu): Fix typo.

	* iswitchb.el: Update customization commentary.

2000-12-05  Rob Riepel  <riepel@Stanford.EDU>

	* emulation/tpu-edt.el (tpu-help): Fixed previous screen logic.
	(tpu-search-highlight): Fixed comparison of overlay end positions.
	(tpu-trim-line-ends): Implemented trimming logic locally.

	* emulation/tpu-extras.el (tpu-write-file-hook)
	(tpu-set-cursor-bound): Replaced picture-clean with tpu-trim-line-ends.

2000-12-05  Kenichi Handa  <handa@etl.go.jp>

	* language/chinese.el (chinese-iso-8bit): Change mime-charset name
	to cn-gb.
	(cn-gb, gb2312): New aliases for chinese-iso-8bit.

2000-12-04  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-indent.el: Remove erroneous spec for condition-case.

2000-12-04  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmailsum.el (rmail-summary-expunge)
	(rmail-summary-expunge-and-save): Ask for confirmation with
	rmail-expunge-confirmed.

	* mail/rmail.el (rmail-expunge-confirmed): New function.
	(rmail-expunge): Use it.

2000-12-04  Philippe Waroquiers  <wao@gull.tact.cfmu.eurocontrol.be>

	* progmodes/etags.el (tag-partial-file-name-match-p): New function.
	(etags-recognize-tags-table, find-tag-in-order):
	New functionality: interpret file names as tags.

2000-12-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-scroll-prefer-subnodes): New defcustom.
	(Info-scroll-up): If Info-scroll-prefer-subnodes is nil, don't visit
	the first subnode until the bottom of the current node is visible.

2000-12-04  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-decode): Don't change buffer's undo list.

2000-12-04  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (face-font-registry-alternatives): Add entries for CJK
	fonts.  Doc-string adjusted for the actual usage of this data.

	* international/fontset.el: Change the font registries for CJK
	fonts in the default fontset.  Don't append '*' to registries.

2000-12-03  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-derived-mode)
	(easy-mmode-derived-mode-p): Remove (moved to derived.el).

	* derived.el (define-derived-mode): Revived, moved from easy-mmode.el.
	(derived-mode-p): New function.
	(derived-mode-make-docstring): Add `docstring' argument.
	Use it if available and complete it if necessary.

2000-12-03  Andreas Schwab  <schwab@suse.de>

	* type-break.el (type-break): Don't make parent of itself.

2000-12-03  Miles Bader  <miles@gnu.org>

	* simple.el (delete-trailing-whitespace): Don't delete newlines too.

2000-12-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-start-shell): Obey shell-file-name.
	(tex-main-file, tex-file): Simplify.
	(tex-generate-zap-file-name): Use subst-char-in-string.
	(tex-strip-dots): Remove.

	* tmm.el (tmm-get-keymap): Eval the menu name in `menu-item'.

	* textmodes/ispell.el (check-ispell-version): Don't use match-beginning
	to check if the match succeeded.

2000-12-02  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (use-fancy-splash-screens-p): New function.
	(command-line-1): Use it to determine whether or not to use
	a fancy splash screen.

2000-12-02  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/eldoc.el (eldoc): Don't make parent of itself.

2000-12-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (make-char): Fix last change.

	* textmode/texinfo.el (texinfo-open-quote, texinfo-close-quote):
	New defcustoms.
	(texinfo-insert-quote): Don't call tex-insert-quote, to avoid
	autoloading tex-mode; instead, do the same manually.
	Use texinfo-open-quote and texinfo-close-quote.  Insert literal quote
	with numeric argument.  Docstring fix.
	(toplevel): Require cl when compiling.

	* international/mule.el (make-char): Doc fix.

2000-12-02  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (x-select-enable-clipboard): Customize (as per
	the Emacs Lisp manual)

2000-12-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (find-buffer-file-type-coding-system): Doc fix.

	* term/pc-win.el (x-select-enable-clipboard): Customize (as per
	the Emacs Lisp manual).

2000-12-02  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (next-line-add-newlines): Change default to nil.

2000-12-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (revert-buffer, recover-file):
	Bind coding-system-for-read to emacs-mule-unix, not to no-conversion.

2000-12-01  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el (hi-lock-refontify): Call jit-lock-refontify.

2000-12-01  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): Handle non-nil `truncate-lines'.

2000-12-01  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Fix typo.
	(describe-character-set, non-iso-charset-alist): Fix typo.

2000-12-01  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-regexp): Automatically add
	upper-case variants of each filename extension in
	`image-file-name-extensions', since they seem to be common.

	* simple.el (minibuffer-contents)
	(minibuffer-contents-no-properties, delete-minibuffer-contents):
	New functions.
	* filecache.el (file-cache-directory-name)
	(file-cache-minibuffer-complete): Ignore the minibuffer prompt.

2000-12-01  Milan Zamazal  <Milan.Zamazal@qbizm.com>

	* filecache.el (file-cache-minibuffer-complete): Don't try to
	delete the minibuffer prompt.

2000-11-30  Dave Love  <fx@gnu.org>

	* cus-start.el: Fix read-buffer-function type.

2000-11-30  Gerd Moellmann  <gerd@gnu.org>

	* md5.el: Removed.  There's a built-in function, now.

2000-11-30  Markus Rost  <rost@math.ohio-state.edu>

	* mail/rmail.el (rmail-set-message-counters): Don't use "D"
	as dummy 0-th char of rmail-deleted-vector.

2000-11-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-print.el (ps-end-job): Bind case-fold-search only after
	switching to ps-spool-buffer.

2000-11-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Line number font customization.  PostScript: Lines and
	PageCount are initialized on each page.  Doc Fix.
	(ps-print-version): New version number (6.3.2).
	(ps-lpr-switches, ps-font-info-database, ps-font-size)
	(ps-header-font-size, ps-header-title-font-size, ps-left-header)
	(ps-right-header): Customization fix.
	(ps-setup, ps-select-font, ps-begin-file, ps-header-sheet, ps-end-job):
	Fix code.
	(ps-end-with-control-d, ps-line-number-font, ps-line-number-font-size):
	New vars.

2000-11-30  Gerd Moellmann  <gerd@gnu.org>

	* bs.el: Fix typos and spelling errors.
	(bs-appearance) <defgroup>: Renamed from bs-appearence.
	(bs-configuration): Doc fix.

	* bs.el: Undo mistaken change of 2000-11-28.  Update copyright.

2000-11-30  Rob Riepel  <riepel@Stanford.EDU>

	* emulation/tpu-edt.el (tpu-version): New version.
	(tpu-search-overlay, tpu-replace-overlay): New initial range.
	(tpu-original-mode-line): Variable deleted.
	(tpu-mark-flag): New initial value.
	(tpu-set-mode-line): Don't redefine mode-line-format.
	Add tpu-mark-flag to minor-mode-alist.
	(tpu-update-mode-line): New mark flag logic.
	(tpu-get): Use find-file-wildcards.
	(tpu-search-highlight): Move overlay less, reset overlay properly.
	(tpu-unselect): Deactivate mark.
	(tpu-lm-replace): Reset overlay properly.
	(tpu-forward-line): Use forward-visible-line.
	(tpu-edt-on): Set transient mark mode.  ispell autoloads deleted.

	* emulation/tpu-extras.el (tpu-forward-line): Use forward-visible-line.

2000-11-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-face-value-create): Always emphasize tag.

2000-11-30  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* calendar/diary-lib.el (diary-entry-time): Anchor pattern correctly
	and skip whitespace and newlines.

2000-11-30  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl.el (third...tenth): Really undo change of 2000-08-05.

2000-11-29  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-function-1): Regexp-quote function name
	when used as part of a regexp.

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu):
	Use face-attribute instead of face-foreground and face-background.
	(tool-bar-add-item): Likewise, and handle unspecified colors.

	* enriched.el (enriched-face-ans): Use face-attribute instead
	of face-foreground and face-background.

	* faces.el (face-foreground, face-background, face-stipple):
	Return nil if attribute is unspecified, for backward compatibility.

	* files.el (auto-mode-alist): Add an entry for antlr-mode.

	* play/5x5.el: Remove version info.

	* toolbar/tool-bar.el (tool-bar-mode): Doc fix.

	* frame.el (blink-cursor-mode): Doc fix.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: New commands to run ANTLR from within Emacs and
	to create Makefile rules.
	(antlr-tool-command): New user option.
	(antlr-ask-about-save): New user option.
	(antlr-makefile-specification): New user option.
	(antlr-file-formats-alist): New variable.
	(antlr-special-file-formats): New variable.
	(antlr-unknown-file-formats): New user option.
	(antlr-help-unknown-file-text): New variable.
	(antlr-help-rules-intro): New variable.
	(antlr-mode-map): Add [C-c C-r] for `antlr-run-tool'.
	(antlr-mode-menu): Add entries.
	(antlr-file-dependencies): New function.
	(antlr-directory-dependencies): New function.
	(antlr-superclasses-glibs): New function.
	(antlr-run-tool): New command.
	(antlr-makefile-insert-variable): New function.
	(antlr-insert-makefile-rules): New function.
	(antlr-show-makefile-rules): New command.

	* antlr-mode.el: More Emacs/XEmacs stuff.
	(antlr-no-action-keywords): New constant with value nil.
	(antlr-font-lock-keywords-alist): Use it.  Old value would break
	syntax highlighting in Emacs-21.0.
	(antlr-default-directory): Emacs/XEmacs dependent function.
	(antlr-read-shell-command): Ditto.
	(antlr-with-displaying-help-buffer): Ditto.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: imenu, parsing and highlighting changes.
	(antlr-imenu-create-index-function): Don't create extra submenus
	for definitions in different grammar classes.  It is not necessary
	for the menu and would make command `imenu' awkward to use.
	(antlr-skip-file-prelude): With ANTLR-2.7+, you can specify named
	header actions and more than one.
	(antlr-font-lock-tokendef-face): Changed color.
	(antlr-font-lock-tokenref-face): Changed color.
	(antlr-font-lock-additional-keywords): Also highlight lowercase.
	(antlr-mode-syntax-table): New variable.
	(antlr-mode): Populate and use it instead `java-mode-syntax-table'.
	(antlr-with-syntax-table): Don't copy syntax table.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: Minor changes: language setting.
	(antlr-language-alist): The value for file option "language" can
	be both an identifier and a string.
	Reported by Rajesh Radhakrishnan <radhakrs@email.uc.edu>.
	(antlr-language-limit-n-regexp): Change accordingly.

2000-11-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: Minor changes: tabs, hiding.
	(antlr-tab-offset-alist): Set `indent-tabs-mode' to nil instead t.
	(antlr-action-visibility): Also allow value nil to also hide the
	braces.  Renamed from `antlr-tiny-action-length'.
	Suggested by Jay@aol.com.
	(antlr-hide-actions): Change accordingly.  Hide line if completely
	hidden action is on a line of its own.

2000-11-29  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (combine-run-hooks): Only run-hooks if there's a hook to run.

	* sort.el (sort-columns): Don't concat strings with numbers.

2000-11-29  Dave Love  <fx@gnu.org>

	* cus-edit.el (face): Fix :format.

	* mail/feedmail.el: Require smtpmail when compiling.
	(mail-do-fcc): Autoload.
	(feedmail) <defgroup>: Fix :link.
	(feedmail-nuke-body-in-fcc): Fix :type.
	(feedmail-send-it): Add autoload cookie.

2000-11-29  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent): Save excursion around call to
	comment-indent-function.

2000-11-29  Miles Bader  <miles@gnu.org>

	* subr.el (member-ignore-case): Return the tail of the list who's
	car matches, like `member', not the matching element itself.

2000-11-29  Kenichi Handa  <handa@etl.go.jp>

	* xml.el (xml-parse-tag): Fix finding opening tag.  A tag name
	should not contain `\n'.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el (hi-lock-refontify): Call jit-lock-refontify.

	* hscroll.el: Add hints to `automatic-hscrolling' to doc strings.

	* dired-aux.el (dired-do-create-files): Construct default file
	name for dired-mark-read-file-name so that when the user enters
	just RET, the target file will end up in the target directory.

	* abbrev.el (prepare-abbrev-list-buffer): Get the value of
	local-abbrev-table before changing buffers because it might
	have a buffer-local binding.

2000-11-28  Miles Bader  <miles@gnu.org>

	* simple.el (delete-horizontal-space): Handle fields more generally.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (delete-horizontal-space): Handle minibuffer prompt.

2000-11-28  Dave Love  <fx@gnu.org>

	* progmodes/ps-mode.el (ps-mode): Set comment-start and
	comment-start-skip locally.

	* progmodes/fortran.el (fortran-mode): Don't set
	fortran-comment-line-start-skip.  Set comment-start to
	fortran-comment-line-start.
	(fortran-fill-paragraph) <non-empty-comment>: Remove regexp group.
	(fortran-comment-line-start-skip): Simplify slightly.

2000-11-28  Gerd Moellmann  <gerd@gnu.org>

	* play/5x5.el: Remove RCS keyword.

	* bs.el: Mistaken commit, undone 2000-11-30.

2000-11-28  Milan Zamazal  <pdm@freesoft.cz>

	* textmodes/tildify.el (tildify-string-alist):
	Add `plain-tex-mode' here.

2000-11-28  Colin Walters  <walters@cis.ohio-state.edu>

	* chistory.el (Command-history-setup): Remove extraneous `keymap'
	reference.

2000-11-28  Miles Bader  <miles@gnu.org>

	* cus-face.el (custom-face-attributes): Add post-filter function
	for :box.  Make pre-filter function for :box handle all cases.

	* wid-edit.el (widget-choose): Make sure pop-up window is large
	enough to display all the choices, as there's no way to scroll it.

2000-11-28  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: Make the coding system no-conversion
	safe for all characters.

2000-11-27  Dave Love  <fx@gnu.org>

	* net/ldap.el (ldap) <defgroup>: Add :version.

	* tooltip.el (tooltip-use-echo-area): Doc fix.

	* cus-start.el <minibuffer-prompt-properties>: Add version.
	<read-buffer-function>: Add.

	* apropos.el (apropos-print): Add help-echo to active text.

	* term/x-win.el (x-select-enable-clipboard): Customize (per lispref).

2000-11-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-automatic-folder-directives): Add a custom
	type, group and version.

2000-11-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* select.el (x-get-selection): Docstring fix.

2000-11-27  Dave Pearson  <davep@hagbard.demon.co.uk>

	* play/5x5.el (5x5-play-solution): Bind inhibit-quit to t.

2000-11-27  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt (.SUFFIXES): Add .SUFFIXES.

	* makefile.w32-in (.SUFFIXES): Add .SUFFIXES.

2000-11-27  Miles Bader  <miles@gnu.org>

	* dired.el (dired-get-filename): Return filename verbatim if
	LOCALP is `verbatim'.
	* dired-aux.el (dired-add-entry): Call `dired-get-filename' with
	`verbatim' so that we don't inadvertently delete a non-existent
	directory name.

2000-11-27  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Specify cases and syntaxes for
	mule-unicode-0100-24ff.

2000-11-27  Gerd Moellmann  <gerd@gnu.org>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu): Handle case
	that foreground and/or background colors of the face `tool-bar'
	are unspecified.

2000-11-27  Miles Bader  <miles@gnu.org>

	* wid-edit.el (widget-field-buffer, widget-field-start)
	(widget-field-end): Handle widget field `pseudo-overlays'.
	(widget-field-value-delete): Delete WIDGET from `widget-field-new'
	if it's there instead of in `widget-field-list'.

	* help.el (help-manyarg-func-alist): Correct entry for `vconcat'.
	(help-make-xrefs): Delete extraneous newlines at the end of the
	docstring.

2000-11-25  Jason Rumney  <jasonr@gnu.org>

	* startup.el (command-line): Call set-locale-environment after
	Window System init file is read, as it can result in a call to
	redraw-frame.

2000-11-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (shell-command): Mention the effect of the prefix
	argument in the doc string.

2000-11-25  Miles Bader  <miles@gnu.org>

	* cus-face.el (custom-face-attributes): Add "None" choice to :stipple.

	* wid-edit.el (widget-field-value-delete): Don't try to delete
	overlay when it's the `pseudo-overlay' that exists at some points.

2000-11-24  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (locale-language-names): Add "jp" as
	a non-standard alternative for Japanese.

2000-11-24  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el: Require 'cl during compilation.

2000-11-24  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-set-after-frame-default): Let face attributes
	specified for new frames override frame parameters.

	* startup.el (command-line): Fix computation of the source file
	for user-init-file when user-init-file is a compiled file.

2000-11-24  Miles Bader  <miles@gnu.org>

	* cus-edit.el (custom-filter-face-spec, custom-pre-filter-face-spec)
	(custom-post-filter-face-spec): New functions.
	(custom-face-set, custom-face-value-create): Filter the face spec
	before and after customization.
	(custom-face-set): If VALUE specifies a null face, pass a
	non-null-but-otherwise-ignored face-spec instead to `face-spec-set'.
	* cus-face.el (custom-face-attributes): Remove SET and GET
	functions.  Add some IN-FILTER and OUT-FILTER functions in the few
	cases they're needed.

	* wid-edit.el (checkbox): Add a small `X' to the :on-glyph, so
	that it's distinguishable from the :off-glyph on dark-background
	displays.  Set its background color too.

	* cus-start.el (all): Restore entry for `mode-line-inverse-video',
	so that people can easily turn it off.

2000-11-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el: Moved variables around to have it compile under NT.

	* ediff-help.el (ediff-use-long-help-message): Made it customizable.

	* ediff-init.el (ediff-abbrev-jobname): Use capitalize.

	* ediff-wind.el (ediff-skip-unsuitable-frames): Deleted the
	redundant skip-small-frames test.

	* viper-cmd.el (viper-change-state-to-vi): Disable overwrite mode.
	(viper-downgrade-to-insert): Protect against errors in hooks.

	* viper-init.el (viper-vi-state-hook,viper-insert-state-hook)
	(viper-replace-state-hook,viper-emacs-state-hook): Do cursor handling.
	(viper-restore-cursor-type,viper-set-insert-cursor-type):
	New functions.

	* viper-util.el (viper-memq-char): Bug fixes.

	* viper.el (viper-mode): Fix cursor handling.

2000-11-24  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-iso-charset-chars):
	For two-byte charset, fix the `while' condition.
	(list-non-iso-charset-chars): Fix the `while' condition.

2000-11-23  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (add-hook, remove-hook): Don't call make-local-hook
	if the variable is make-variable-buffer-local.

	* progmodes/ada-stmt.el (ada-template-map):
	Initialize and bind it to C-c t in ada-mode-map.
	(ada-stmt-mode-hook): New function extracted from old code.
	Only change the buffer-local side of skeleton-*.
	(ada-mode-hook): Use it.

2000-11-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* iswitchb.el (iswitchb-minibuf-depth): New variable.
	(iswitchb-read-buffer): Record in iswitchb-minibuf-depth the value
	we expect to be returned by minibuffer-depth once we prompt the
	user in the minibuffer.
	(iswitchb-entryfn-p): If minibuffer-depth returns the same value
	as recorded in iswitchb-minibuf-depth, return non-nil.

2000-11-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* hscroll.el (turn-on-hscroll, hscroll-mode, hscroll-global-mode)
	(hscroll-window-maybe): Docstring fix.

2000-11-23  Dave Love  <fx@gnu.org>

	* rect.el (string-rectangle): Don't test delete-selection-mode.

2000-11-23  Gerd Moellmann  <gerd@gnu.org>

	* avoid.el (mouse-avoidance-too-close-p): Return nil if mouse
	is in the tool bar.

	* dired-aux.el (dired-add-entry): Don't call dired-get-filename
	with `no-dir'; we want the directory part to be able to remove it.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-flag-region):
	Don't bind inhibit-read-only since we don't modify the buffer.
	(outline-isearch-open-invisible): Don't jump to overlay-start
	since we're trying to unhide text around point.
	(outline-discard-overlays): Use dolist.

	* autoinsert.el (auto-insert-alist): Add `provide' to elisp skeleton.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-confirm-expunge): Default to y-or-n-p.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-font-lock-keywords-1):
	Fix ARG regexp to skip quoted braces.
	(tex-font-lock-keywords-2): Fix ARG regexp to skip quoted braces.
	Remove `bf' and `it' from `bold' and `italic' (they were wrong and
	are (correctly) handled separately).
	Remove `caption' and `footnote' from `citations': they contain text.
	Don't highlight `textmd', `texttt' and `textrm' with bold-italic.
	(latex-skeleton-end-hook): New function.
	(latex-mode): Use it.
	(tex-start-tex-marker): Remove.
	(tex-send-tex-command): Don't set tex-start-tex-marker.
	(tex-error-parse-syntax-table): New var.
	(tex-compilation-parse-errors): Use it.
	Ignore tex-start-tex-marker.  Don't bother with marker-position.
	(tex-validate-buffer): Don't bother with marker-position.

	* textmodes/flyspell.el (flyspell-prog-text-faces): New var.
	(flyspell-generic-progmode-verify): Use it.

2000-11-22  Sam Steingold  <sds@gnu.org>

	* simple.el (delete-trailing-whitespace): New interactive function.

	* progmodes/ada-mode.el (ada-mode): Use it instead of
	`ada-remove-trailing-spaces'.
	(ada-remove-trailing-spaces): Removed.

	* textmodes/two-column.el (2C-merge): Recommend it in the doc.

	* textmodes/picture.el (picture-clean): Removed.
	(picture-mode-exit): Call it instead of `picture-clean'.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (show-cursor-in-non-selected-windows): Doc fix.

	* hi-lock.el (hi-lock-refontify): Don't call non-existent
	jit-lock-fontify-buffer; it should anyway be unnecessary to
	do anything special when jit-lock is active.
	(hi-yellow, hi-pink, hi-green, hi-blue): Fix defface specs.

2000-11-22  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el (todo-top-priorities): Use
	todo-tmp-buffer-name.  From Milan Zamazal <Milan.Zamazal@qbizm.com>.

	* language/chinese.el, language/cyrillic.el:
	* language/devanagari.el, language/ethiopic.el, language/greek.el:
	* language/hebrew.el, language/indian.el, language/japanese.el:
	* language/korean.el, language/lao.el, language/misc-lang.el:
	* language/thai.el, language/tibetan.el, language/vietnamese.el:
	Use provide.

	* cus-edit.el (custom-buffer-create-internal): Save some consing.
	(custom-variable-set): Improve validation error message.

	* rect.el (string-rectangle): Revert last change.
	(string-rectangle-line): New arg DELETE.
	(string-rectangle): Check delete-selection-mode.

	* emacs-lisp/edebug.el (edebug-version)
	(edebug-maintainer-address): Deleted.
	(edebug-submit-bug-report): Just alias to report-emacs-bug.
	(edebug-read-function): Account for other `'#' read forms.
	(edebug-mode-menus): Make some items toggles.
	(edebug-outside-unread-command-event, unread-command-event):
	Remove these to avoid warnings.

2000-11-22  David Ponce  <david@dponce.com>

	* recentf.el (recentf-menu-items-for-commands)
	(recentf-make-menu-items, recentf-make-menu-item)
	(recentf-filter-changer): Added :help and :active menu-item properties.

	(recentf-build-dir-rules, recentf-dump-variable)
	(recentf-edit-list, recentf-open-files-item)
	(recentf-open-files): Replaced unnecessary `mapcar' with new
	built-in `mapc'.

2000-11-23  Miles Bader  <miles@gnu.org>

	* faces.el (menu): Make inverse-video on ttys too.

2000-11-22  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (comment-line-break-function): Use the new name
	indent-new-comment-line -> comment-indent-new-line.
	(clone-indirect-buffer): Don't ignore NORECORD.
	(next-completion): Properly handle the case where items are adjacent.

	* mouse.el (popup-menu): Stupid typo.

2000-11-22  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el: Remove autoload cookies, add author,
	maintainer, keywords tags.

	* rect.el (replace-rectangle): Don't call string-rectangle-line
	with too many arguments.

2000-11-22  Andre Spiegel  <spiegel@gnu.org>

	* ediff-util.el (ediff-file-checked-out-p)
	(ediff-file-checked-in-p): Call vc-state instead of
	vc-locking-user, which no longer exists.

	* emulation/viper-util.el (viper-file-checked-in-p): Same as above.

2000-11-22  Dave Love  <fx@gnu.org>

	* md5.el (md5): Provide.
	(md5): Fix error call.

2000-11-22  Miles Bader  <miles@gnu.org>

	* textmodes/refill.el (refill-adjust-ignorable-overlay)
	(refill-fill-paragraph-at): Remove debugging code.

	* calendar/calendar.el (generate-calendar-window): When we don't
	call `fit-window-to-buffer', make sure the top line is fully visible.

	* image-file.el (insert-image-file): Don't make `read-only'
	property rear-nonsticky.

	* isearch.el (isearch-original-minibuffer-message-timeout): New var.
	(isearch-mode): Set `minibuffer-message-timeout' to nil, after
	stashing away its original value.
	(isearch-edit-string): Temporarily restore `minibuffer-message-timeout'
	in the recursive edit.
	Bind `isearch-original-minibuffer-message-timeout' to protect it.
	(isearch-done): Restore `minibuffer-message-timeout'.

	* cus-start.el: Remove entry for `mode-line-inverse-video'.

2000-11-21  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-mode.el (ada-mode): `set '' -> `setq'.

	* find-lisp.el (find-lisp-find-files-internal):
	Use dolist, when and file-name-as-directory.

	* emacs-lisp/edebug.el (edebug-form-spec prop): Use dolist.
	(define-derived-mode, define-minor-mode): Add specs.

	* window.el: General comment and spacing fixes.
	(save-selected-window): Use backquotes.
	(window-safely-shrinkable-p): New function.
	(shrink-window-if-larger-than-buffer): Use it.

	* subr.el (make-local-hook): Docstring fix.

	* shell.el (shell-mode): Use define-derived-mode.

	* newcomment.el (comment-indent): Insert comment before calling
	comment-indent-function.  Don't insert in column 0.
	(comment-dwim): Indent before inserting comment.

	* isearch.el (isearch-mode-map): Fix docstring.  Init in defvar.
	(minibuffer-local-isearch-map): Init in defvar.  Use inheritance.
	(isearch-clean-overlays, isearch-range-invisible, isearch-unread):
	Use mapc rather than map.

	* files.el (find-buffer-visiting): Compare all attributes before
	declaring two files identical (rather than just their inode-no).
	(auto-mode-alist): Use \' rather than $.

	* which-func.el: Update maintainer line.

	* pcvs.el (uniquify-buffer-file-name): Remove advice.
	* uniquify.el (uniquify-list-buffers-directory-modes): New var.
	(uniquify-buffer-file-name): Use it.

2000-11-22  Miles Bader  <miles@gnu.org>

	* cus-start.el: Add entry for `minibuffer-prompt-properties'.
	* simple.el (minibuffer-avoid-prompt): New function.

2000-11-21  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (.SUFFIXES): Add .SUFFIXES.

2000-11-21  Miles Bader  <miles@gnu.org>

	* emacs-lisp/advice.el (ad-special-forms): Correct the conditional
	inclusion of `track-mouse'.

	* textmodes/refill.el (refill-ignorable-overlay): New variable.
	(refill-adjust-ignorable-overlay): New function.
	(refill-fill-paragraph-at): Use `refill-ignorable-overlay' to fill
	only the paragraph's tail if possible.
	Update `refill-ignorable-overlay'.
	(refill-mode): Initialize/cleanup `refill-ignorable-overlay'.

	* textmodes/refill.el (refill-fill-paragraph-at): Don't leave
	point inside the fill-prefix.

	* textmodes/refill.el (refill-post-command-function): Don't reset
	refill-doit in the case where a self-insertion command doesn't
	case a refill.  Use `refill-fill-paragraph-at', getting position
	from `refill-doit'.
	(refill-after-change-function): Set `refill-doit' to END.
	(refill-fill-paragraph-at): New function, mostly from old
	refill-fill-paragraph.
	(refill-fill-paragraph): Use `refill-fill-paragraph-at'.
	(refill-pre-command-function): New function.
	(refill-mode): Add it to `pre-command-hook'.

2000-11-20  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/artist.el (artist-mode): Fix autoload cookie.

	* font-lock.el (java-keywords): Add MATCH-HIGHLIGHT part for
	javadoc tags.

2000-11-20  Andre Spiegel  <spiegel@gnu.org>

	* vc.el, vc-hooks.el: Undo prev change (moved functions back to
	vc.el).

	* vc-rcs.el (vc-rcs-state): Before calling vc-workfile-unchanged-p,
	require vc.

	* vc-cvs.el (vc-cvs-checkout): Fix bug that broke C-x v ~-style
	checkouts.

2000-11-20  Dave Love  <fx@gnu.org>

	* Makefile.in (DONTCOMPILE): Omit bindings.el.

2000-11-20  Eli Barzilay  <eli@www.barzilay.org>

	* calculator.el (calculator-paste): Use `if' instead of `and'
	and `or'.
	(calculator-help): Don't use electric-describe-mode for XEmacs.

2000-11-19  Gerd Moellmann  <gerd@gnu.org>

	* info.el (info-menu-5): Doc fix.

	* textmodes/artist.el: New file.

2000-11-19  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-state): Call vc-workfile-unchanged-p only here,
	and differentiate according to checkout model.
	(vc-rcs-fetch-master-state): Don't call vc-workfile-unchanged-p,
	since this function is only concerned with master state.

	* vc-hooks.el (vc-workfile-unchanged-p)
	(vc-default-workfile-unchanged-p): Moved here from vc.el.

	* vc.el (vc-workfile-unchanged-p)
	(vc-default-workfile-unchanged-p): See above.

2000-11-19  Miles Bader  <miles@gnu.org>

	* image-file.el (insert-image-file): Make `intangible' and
	`read-only' properties rear-nonsticky too.

2000-11-18  Gerd Moellmann  <gerd@gnu.org>

	* ps-print.el: Update copyright notice.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): New user-options.
	(tooltip-show): Use the offsets.

	* bindings.el (mode-line-modified): Fix a typo.
	(mode-line-toggle-modified, mode-line-widen)
	(mode-line-abbrev-mode, mode-line-auto-fill-mode): Fix typos.

2000-11-17  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el (toplevel): Test for find-coding-system being
	fboundp before calling ps-x-find-coding-system.

2000-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-version-diff): Bind inhibit-read-only when inserting text.
	(vc-version-backup-file): Docstring fix.

2000-11-16  Gerd Moellmann  <gerd@gnu.org>

	* files.el (basic-save-buffer): Don't add a newline if
	find-file-literally is non-nil.
	(find-file-literally): Extend doc string.

	* sort.el (sort-columns): If sort-fold-case it non-nil, invoke
	sort(1) with the `-f' argument.

2000-11-16  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Updated backend documentation.
	(vc-default-check-headers): New function.

	* vc-cvs.el, vc-rcs.el, vc-sccs.el: Functions reordered.

	* vc.el (vc-revert-buffer): Ask for confirmation if file seems
	up-to-date.
	(vc-do-command): In the asynchronous case, output messages only if
	the minibuffer is not active.

	* vc-cvs.el (vc-cvs-revert): Use `cvs unedit' only if
	`vc-cvs-use-edit' is on.
	(vc-cvs-checkout): When this is used for reverting the workfile,
	make a backup of the original contents and revert to that in case
	of error.
	(vc-cvs-print-log, vc-cvs-diff): Use asynchronous mode only for
	remote repositories.

	* vc.el (vc-annotate): Changed handling of prefix arg; now asks
	for both version and ratio in the minibuffer.

	* vc-cvs.el (vc-cvs-annotate-command): New optional arg VERSION.
	Use vc-do-command to perform the annotation, not call-process.

2000-11-16  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Don't call
	`message' before reading key sequence.

2000-11-16  Miles Bader  <miles@lsi.nec.co.jp>

	* net/ange-ftp.el (ange-ftp-file-modtime): Don't use `caddr'.

2000-11-16  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Be sure to acquire at least
	one text line even if the buffer is empty.

2000-11-16  Gerd Moellmann  <gerd@gnu.org>

	* net/ange-ftp.el (ange-ftp-file-writable-p)
	(ange-ftp-file-readable-p, ange-ftp-file-executable-p):
	Bind ange-ftp-process-verbose to nil.

2000-11-15  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-specify-field, widget-specify-button):
	If :help-echo is a function, set help-echo of overlay to
	widget-mouse-help.
	(widget-mouse-help): New function.
	(widget-echo-help): Rewritten for :help-echo functions only taking
	a widget arg.

	* net/eudc-bob.el (eudc-bob-can-display-inline-images):
	Use display-graphic-p.
	(eudc-bob-display-jpeg) <!eudc-xemacs-p>: Test create-image bound
	and that JPEG is available.
	(eudc-bob-toggle-inline-display): Avoid non-existent `imagep'.

	* international/mule-cmds.el (locale-charset-language-names):
	Match @euro.

2000-11-15  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-set-after-frame-default):
	If `inhibit-default-face-x-resources' is bound, don't initialize the
	default face from X resources.

2000-11-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* Makefile.in (custom-deps, finder-data, autoloads, recompile):
	Don't set EMACSLOADPATH.

2000-11-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texinfo.el (texinfo-insert-@uref): Renamed from
	texinfo-insert-@url.
	(texinfo-insert-@url): A defalias for texinfo-insert-@uref.
	(texinfo-mode-map): Bind "C-c C-c u" to texinfo-insert-@uref.

2000-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/checkdoc.el (checkdoc-minor-mode) <defvar>: Remove.
	(checkdoc-minor-mode-map): New map, replaces checkdoc-minor-keymap.
	(checkdoc-minor-keymap): Backward compatibility.
	(checkdoc-minor-menu): Don't bother checking checkdoc-minor-keymap.
	(checkdoc-minor-mode) <defun>: Use easy-mmode-define-minor-mode.
	(checkdoc-this-string-valid-engine): Be a bit more strict
	to avoid matching substrings of `...' quoted vars/funs.
	(checkdoc-defun-info): Only look for `interactive' if alone.
	(debug-ignored-errors): Add "arg doesn't appear in docstring".

	* progmodes/compile.el (grep): `tag-default' can be nil.

	* newcomment.el (comment-indent): Paren typo.

2000-11-14  Dave Love  <fx@gnu.org>

	* calculator.el: New maintainer version.

	* diff-mode.el (diff-imenu-generic-expression): Modify unidiff pattern.

	* cmuscheme.el: Doc fixes.
	(cmuscheme) <defgroup>: Use `scheme' as parent.
	(cmuscheme-program-name): Remove.  Change uses to scheme-program-name.

	* xscheme.el (scheme-program-name): Don't define here.

	* progmodes/scheme.el (scheme-program-name): New variable
	(originally in cmuscheme).

2000-11-14  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): Handle windows without mode-lines.
	Handle header-lines.  Don't loop forever if we can't enlarge the
	window anymore.  Simplify a bit.

2000-11-14  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Don't check
	window-text-height.  Assure that the last line is fully visible.

	* international/quail.el (quail-show-guidance-buf):
	Call fit-window-to-buffer to assure the enough height of the guidance
	buffer.
	(quail-update-guidance): Avoid making the guidance buffer shorter.

2000-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-font-lock-keywords-1): Use `keep'
	rather than `prepend' and add an interesting comment.
	(tex-math-face, tex-font-lock-syntactic-face-function):
	New face and function to use it.
	(tex-define-common-keys, tex-mode-map): Use menu-item rather
	than `menu-enable' symbol property.
	(tex-mode-map): Bind {, (, [ and $ to skeleton-pair-insert-maybe.
	(tex-mode): Add some latex-mode commands for auto-selection.
	Use tex-font-lock-syntactic-face-function.
	(tex-insert-quote): Simplify.
	(tex-shell): New mode.
	(tex-start-shell): Use it.
	(tex-shell-proc, tex-shell-buf): New functions.
	(tex-send-command): Use it.
	(tex-main-file): Fix the meaning of the new arg REALFILE.
	(tex-send-tex-command): New function split from `tex-start-tex'.
	Set compilation-last-buffer and compilation-parsing-end.

	* newcomment.el (comment-indent-default): Stick \s<\s< to the left
	when it follows non-comment text on the line.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set font-lock-defaults.
	(lisp-mode-shared-map): Init inside the defvar.
	(emacs-lisp-mode, lisp-mode, lisp-interaction-mode):
	Use define-derived-mode.

2000-11-14  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (header-line): Use `:box nil' for color/gs displays too.

2000-11-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/byte-opt.el (byte-compile-unfold-lambda):
	Don't recursively optimize body because that can lead to infinite
	recursion; see comment there.

2000-11-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (face-spec-set-match-display): Revert the change from
	2000-10-24.  Add a FIXME for after v21.1.

2000-11-13  Miles Bader  <miles@gnu.org>

	* textmodes/fill.el (skip-line-prefix): New function.
	(fill-region-as-paragraph, fill-region): Return the fill-prefix.
	(fill-paragraph): Don't leave point inside the fill-prefix.
	* textmodes/refill.el (refill-fill-paragraph-at): Don't leave
	point inside the fill-prefix.

2000-11-13  Miles Bader  <miles@lsi.nec.co.jp>

	* calendar/calendar.el (generate-calendar-window):
	Use `fit-window-to-buffer'.

2000-11-12  Stefan Monnier  <monnier@cs.yale.edu>

	* gud.el (gud-minor-mode): New var.
	(gud-symbol, gud-val): New functions.
	(gud-find-file): Copy gud-minor-mode to the new buffer.
	(gud-menu-map): Include entries for commands that are not always
	available, using :enable to (de)activate them.
	(gud-minor-mode-map): New map.  Add it to minor-mode-map-alist.
	(gud-mode-map): New map.
	(gud-gdb-find-file, gud-sdb-find-file, gud-dbx-find-file)
	(gud-xdb-find-file, gud-perldb-find-file, gud-pdb-find-file):
	Don't set up gud's menu (it's done by the minor-mode).
	(gud-minibuffer-local-map): New.
	Replace gdb-minibuffer-local-map and pdb-minibuffer-local-map.
	(gud-query-cmdline): New function.
	(gdb, sdb, dbx, xdb, perldb, pdb, jdb): Use it.  Set gud-minor-mode.
	(gud-mode): Use define-derived-mode.
	Don't set up gud's menu (it's done by the minor-mode).
	(gud-chop-words): Remove.
	(gud-common-init): Use split-string instead.
	(gud-new-keymap, gud-make-debug-menu): Eradicate.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-keymap):
	Add keyword arg :name.

	* diff-mode.el (diff-mode-menu): Add entry for applying hunk.
	(diff-count-matches, diff-split-hunk): New functions.
	(diff-mode-map): Bind C-c C-s to diff-split-hunk.

	* pcvs-info.el (cvs-fi-conflict-face): New var.

	* progmodes/sh-script.el (sh-mode-syntax-table) <defvar>:
	Make it into a simple syntax-table, shared among all submodes.
	(sh-heredoc-face): Re-introduce.
	(sh-font-lock-syntactic-face-function): New function.
	(sh-mode): Use it.  Also use define-derived-mode.
	Remove old bogus setting of indent-region-function.
	(sh-set-shell): Don't set the syntax-table any more.
	(sh-mode-syntax-table) <defun>: Remove.

2000-11-12  Miles Bader  <miles@gnu.org>

	* textmodes/flyspell.el (flyspell-mode-on): Only output welcome
	message if interactive.

2000-11-12  Dave Love  <fx@gnu.org>

	* mail/feedmail.el: Fix header.
	(feedmail) <defgroup>: Add :link.

	* view.el: Use local-map property, not keymap on mode-line string.

	* scroll-all.el (scroll-all-mode): Customize variable.
	Add autoload cookie to function.

	* lazy-lock.el: Remove compatibility code.

	* finder.el (finder-known-keywords): Add `files', remove `vms'.
	(finder-help-echo): New variable.
	(finder-mouse-face-on-line): Add help-echo stuff.
	(finder-list-keywords, finder-list-matches): Use mapc.

	* faces.el (face-font-registry-alternatives): Add :version.

	* progmodes/etags.el (visit-tags-table-buffer): Beware of `t' in
	tags-table-list.

	* net/browse-url.el (browse-url-browser-function): Update :version.

	* mail/sendmail.el (mail-font-lock-keywords): Use [:alpha:], not a-z.
	(mail-mode): Use [:alnum:] in some regexps.

2000-11-10  Dave Love  <fx@gnu.org>

	* ediff.el (ediff-regions-internal, ediff-documentation):
	* ediff-vers.el (rcs-ediff-view-revision): Put temp buffer into
	fundamental mode.

	* ediff-util.el (ediff-status-info, ediff-debug-info): Put temp
	buffer into fundamental mode.
	(ediff-set-difference): Use copy-sequence if available.

	* ediff-ptch.el (ediff-dispatch-file-patching-job):
	Check ediff-patch-map non-nil.
	(ediff-fixup-patch-map, ediff-fixup-patch-map)
	(ediff-fixup-patch-map, ediff-patch-file-internal): Put temp
	buffer into fundamental mode.

	* ediff-merg.el (state-or-merge): Defvar when compiling.

2000-11-10  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-add-charset-info): New function.
	(w32-charset-info-alist): Use it.

2000-11-10  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-font-registry-alternatives): New user-option.

2000-11-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-block-default): New var.
	(texinfo-insert-block): Use it.  Insert a newline if needed.

	* textmodes/fill.el (fill-indent-according-to-mode): New var.
	(fill-region-as-paragraph): Use it.

	* textmodes/tex-mode.el (standard-latex-block-names): Add "math".
	(latex-mode): Tweak tex-*-(head|trail)er regexps.
	Tweak paragraph regexps to allow a leading [ \t]*.
	(tex-latex-block): Insert a newline if necessary.
	(latex-insert-item): Only insert a newline if necessary.
	(tex-guess-main-file): New function.
	(tex-main-file): Use it.  Add arg `realfile'.  Trim `.tex'.
	Set tex-main-file if TeX-master is provided.
	(tex-latex-indent-syntax-table): Map ( and ) to punctuation.

2000-11-10  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Set the default tooltip-mode
	to t for graphical displays which implement x-show-tip.

	* tooltip.el (tooltip-mode): Add a comment about startup.el
	setting the default value of this user-option.

2000-11-09  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-*-face) <defvar>: Move.
	(font-lock-defaults-alist): Mark obsolete.
	(font-lock-mode, font-lock-mode-hook) <defvar>: Remove.
	(font-lock-mode): Use define-minor-mode.
	(font-lock-support-mode): Tweak type to default to jit-lock-mode.
	(font-lock-turn-off-thing-lock): Be more explicit.
	(font-lock-apply-syntactic-highlight): Use string-to-syntax after eval.
	(font-lock-syntactic-face-function): New var.
	(font-lock-fontify-syntactically-region): Use it.
	(font-lock-doc-face): New.

	* pcvs.el (cvs-enabledp): Ignore errors.
	(cvs-commit-filelist): Never query.
	(cvs-mode-insert): Always add a terminating / in the initial prompt.
	(cvs-mode-diff-backup): Use cvs-partition rather than delete-if-not.
	(cvs-do-removal): Use cvs-partition rather than delete-if.
	Use cvs-insert-strings, cvs-pop-to-buffer-same-frame and
	cvs-bury-buffer.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation):
	Allow `next' to jump to after the end of the last match.

2000-11-09  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (byte-compiling-files-p): New function.

	* textmodes/ispell.el (toplevel): Use byte-compiling-files-p
	if it is there.

	* emacs-lisp/bytecomp.el (byte-compile-current-file): Bind it to
	nil again.

	* textmodes/ispell.el (ispell-library-path): Don't call
	check-ispell-version when byte-compiling because that starts
	an ispell process, and ispell might not be installed.
	(toplevel): Don't set up a menu when byte-compiling.

	* emacs-lisp/bytecomp.el (byte-compile-current-file): Don't bind
	it, so that a boundp test can be used to determine if we're
	currently byte-compiling.

2000-11-09  Dave Love  <fx@gnu.org>

	* pcvs.el (uniquify-buffer-file-name): Wrap advice in eval-after-load.

2000-11-09  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Patch for variable initialization when spooling.
	Doc fix.
	(ps-output-list): Fun eliminated.
	(ps-begin-file, ps-begin-job): Code fix.

2000-11-08  Dave Love  <fx@gnu.org>

	* ediff-wind.el (ediff-control-frame-parameters): Zero tool-bar-lines.

2000-11-08  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (shell-command, display-message-or-buffer)
	(shell-command-on-region): Mention resize-mini-windows in the doc
	string.
	(display-message-or-buffer): Take the value of resize-mini-windows
	into account.

2000-11-07  Gerd Moellmann  <gerd@gnu.org>

	* macros.el (insert-kbd-macro): Print semi-colons as `?\;'.

	* dired.el (dired-between-files): Add `^. find' as an alternative
	to the regular expression, for find-dired.

2000-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texnfo-upd.el: Require texinfo.
	(defmacro, defgroup): Remove.
	(texinfo-section-to-generic-alist): Remove.
	Use texinfo-section-list instead (i.e. level is changed string->int).
	(texinfo-filter): New function.
	(texinfo-chapter-level-regexp, texinfo-subsubsection-level-regexp)
	(texinfo-subsection-level-regexp, texinfo-section-level-regexp):
	Use it.  And use regexp-opt.
	(texinfo-find-higher-level-node, texinfo-hierarchic-level)
	(texinfo-update-menu-region-beginning)
	(texinfo-update-menu-higher-regexps, texinfo-update-menu-lower-regexps)
	(texinfo-update-the-node, texinfo-sequentially-update-the-node)
	(texinfo-update-menu-same-level-regexps): Update.
	(texinfo-update-node, texinfo-every-node-update)
	(texinfo-sequential-node-update): Remove autoload cookie.

	* textmodes/texinfo.el (texinfo-section-list): Change majorheading.
	(texinfo-font-lock-syntactic-keywords): Use syntax-strings.
	(texinfo-chapter-level-regexp): Remove.
	(texinfo-mode): Hard code texinfo-chapter-level-regexp.

2000-11-06  Dave Love  <fx@gnu.org>

	* autoinsert.el (auto-insert-alist) <latex-mode>: Use \documentclass.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression):
	Match defun*.

2000-11-06  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (composition-function-table): Variable declaration
	moved to src/composite.c.
	(compose-chars-after): New optional arg object.

2000-11-06  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el (mode-line-toggle-read-only)
	(mode-line-toggle-modified, mode-line-widen)
	(mode-line-abbrev-mode, mode-line-auto-fill-mode): New functions.
	(make-mode-line-mouse2-map): Rewritten.
	(mode-line-modified, mode-line-format, minor-mode-alist): Use new
	functions so that C-h k can show something with a doc string.

	* startup.el (fancy-splash-delay): Set to 10 seconds.
	(fancy-splash-max-time): New user-option.
	(fancy-splash-stop-time): New variable.
	(fancy-splash-screens): Set it.  Catch `stop-splashing'.
	(fancy-splash-screens-1): Throw `stop-splashing' when current
	time is greater than fancy-splash-stop-time.

2000-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-insert-file): Don't assume byte==char.

	* pcvs.el (cvs-mode-marked): New arg `noquery'.
	Prompt user for a file rather than raising an error.
	(cvs-enabledp): Fix call to cvs-mode-marked.
	(cvs-insert-file): New function (extracted from cvs-mode-insert).
	(cvs-mode-insert): Use it.  Change the init prompt' value.
	(cvs-mode-tree): Use cvs-status-cvstrees instead of cvs-status-trees.

	* emacs-lisp/ewoc.el (ewoc-goto-prev, ewoc-goto-next):
	Don't pass default arg to ewoc-locate.
	(ewoc-collect): Return result in the right order.

	* log-edit.el (log-edit-show-files): Use cvs-insert-strings.

	* cvs-status.el (cvs-tree-merge): Use cvs-butlast (avoid CL).
	(cvs-status-get-tags): Fix regexp.
	(cvs-status-trees, cvs-status-cvstrees):
	Combine after change hooks and don't sit-for.
	(cvs-tree-use-jisx0208): Rename from cvs-tree-dstr-2byte-ready.
	(cvs-tree-char-*): Rename from cvs-tree-dstr-char-*.
	Use make-char rather than hard-coded cryptic data.
	(cvs-status-cvstrees): Convert the buffer to multibyte if necessary.

	* pcvs-defs.el (cvs-menu): Add entries for tree and insert.

	* pcvs-util.el (cvs-butlast, cvs-nbutlast): New (copied from CL).
	(cvs-insert-strings): New function.

2000-11-06  Miles Bader  <miles@lsi.nec.co.jp>

	* mwheel.el (mouse-wheel-scroll-amount): Renamed from
	`mwheel-scroll-amount'.
	(mouse-wheel-follow-mouse): Renamed from `mwheel-follow-mouse'.
	(mouse-wheel-mode): Use (featurep 'xemacs) instead of
	string-matching against the version string.

2000-11-06  Kenichi Handa  <handa@etl.go.jp>

	* language/thai.el ("Thai"): Set a lisp form that produces
	composed string in `sample-text' language info.

	* language/tibetan.el ("Tibetan"): Set a lisp form that produces
	composed string in `sample-text' language info.

	* international/mule-cmds.el (describe-language-environment):
	Eval `sample-text' data and insert the result.

	* international/mule-conf.el (compound-text): Define this coding
	system here.  Make x-ctext and ctext aliases of it.

	* language/european.el (compound-text, ctext): Moved to
	international/mule-conf.el.

2000-11-05  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (w32-version): New function.

2000-11-05  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/awk-mode.el: Update copyright.
	(awk-mode-abbrev-table): Remove.
	(awk-font-lock-keywords): Use regexp-opt.
	(awk-mode): Use define-derived-mode.

	* emacs-lisp/regexp-opt.el (regexp-opt-group): Sort the strings
	when extracting a suffix.

2000-11-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-insert-file): Rewritten.  Don't bother about
	auto-save-mode.

2000-11-04  Jason Rumney  <jasonr@gnu.org>

	* language/european.el (decode-mac-roman): Test against r1 not r0.

2000-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/icon.el (icon-mode-map): Don't rebind \t.
	(icon-mode): Define indent-line-function.
	(icon-comment-indent): Simplify.
	(icon-font-lock-keywords-2): Use the `words' arg to regexp-opt.

	* emacs-lisp/find-func.el (find-function-do-it): Quote the hook.

	* pcvs.el (cvs-mode-add-change-log-entry-other-window):
	Bind change-log-default-mode to defeat the caching done on it.
	Don't bother saving excursion any more.

	* menu-bar.el (minibuffer maps): Use dolist rather than mapcar.

	* frame.el (after-setting-font-hook): Rename hooks -> hook.
	(set-frame-font): Use the new name (and the old for compatibility).

	* toolbar/tool-bar.el (tool-bar-mode):
	* time.el (display-time-mode):
	* recentf.el (recentf-mode):
	* paren.el (show-paren-mode):
	* mwheel.el (mouse-wheel-mode):
	* msb.el (msb-mode):
	* jka-compr.el (auto-compression-mode):
	* image-file.el (auto-image-file-mode):
	* hl-line.el (hl-line-mode):
	* delsel.el (delete-selection-mode):
	* autoinsert.el (auto-insert-mode):
	* complete.el (partial-completion-mode): Drop unneeded positional args.

	* info.el (Info-mode):
	* comint.el (comint-mode): Don't bother with make-local-hook.

	* log-edit.el (log-edit-menu): New menu.

2000-11-03  Miles Bader  <miles@gnu.org>

	* wid-edit.el (widget-end-of-line): Reinstate, with a new
	definition, so that trailing spaces are handled properly.
	(widget-field-keymap, widget-text-keymap): Likewise C-e binding.

2000-11-03  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-text, fancy-splash-text): Use a single
	tab character.
	(fancy-splash-screens): Set tab-width to 20.

2000-11-03  Dave Love  <fx@gnu.org>

	* comint.el (comint-completion-addsuffix): Fix custom type.

2000-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-buffers): Remove.
	(font-lock-global-modes): Define with easy-mmode-define-global-mode.
	(font-lock-change-major-mode): Remove.
	(turn-on-font-lock-if-enabled): Only apply to the current buffer.
	(font-lock-default-fontify-region): Extend the multiline
	fontification to whole lines.
	(font-lock-fontify-anchored-keywords)
	(font-lock-fontify-keywords-region): If matching just one
	line (with \n) only mark the \n as multiline.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Remove :toggle arg.
	Correctly handle the case where several :group args are supplied.
	Allow :extra-args.
	(easy-mmode-define-global-mode): Allow :extra-args.
	Correctly handle the case where several :group args are supplied.

2000-11-02  Miles Bader  <miles@gnu.org>

	* calendar/calendar.el (diary-face, calendar-today-face)
	(holiday-face): Remove dependency on `window-system'.

2000-11-02  Ken Raeburn  <raeburn@gnu.org>

	* Makefile.in (emacs): Set EMACSLOADPATH always.
	(update-authors, .el.elc, compile-files): Don't do it explicitly here.
	(compile-files): Bomb out if compilation of a file fails.

2000-11-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/find-func.el (find-variable-regexp): Avoid defgroup.

2000-11-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/emacsbug.el (report-emacs-bug): Fix whitespace and
	punctuation in the warning inserted into the *mail* buffer.

2000-11-02  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el (authors-public-domain-files): New variable.
	(authors-public-domain-p): New function.
	(authors-print): Use it.

	* help.el (view-emacs-news): Use ONEWS.* instead of NEWS.* files.

	* mail/mh-e.el, mail/mh-comp.el: Change maintainer.

2000-11-02  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Extension for even/odd printing.  Doc fix.
	(ps-print-version): New version number (6.3.1).
	(ps-even-or-odd-pages): Customization fix.
	(ps-print-page-p, ps-begin-file, ps-begin-job, ps-page-number)
	(ps-header-sheet, ps-header-page, ps-end-job): Code fix.
	(ps-page-count): Var replaced by `ps-page-column'.
	(ps-page-column, ps-page-sheet, ps-page-printed): New vars.
	(ps-print-sheet-p): New fun.

2000-11-02  Miles Bader  <miles@lsi.nec.co.jp>

	* tooltip.el (tooltip-gud-tips-setup): New function.
	(tooltip-gud-tips-p): Add :set to call tooltip-gud-tips-setup.
	(tooltip-mode): Call tooltip-gud-tips-setup.
	(tooltip-gud-tips): Use `gud-basic-call' instead of
	process-send-string, so the prompt gets frobbed appropriately.
	Handle nil return value from `tooltip-gud-print-command'.

2000-11-01  Eric M. Ludlam  <zappo@ultranet.com>

	* comint.el (comint-add-to-input-history): New function.
	(comint-send-input): Use `comint-add-to-input-history'.

2000-11-02  Miles Bader  <miles@lsi.nec.co.jp>

	* info.el (info-menu-header): New face.
	(Info-fontify-menu-headers): New function.
	(Info-fontify-node, Info-insert-dir): Call `Info-fontify-menu-headers'.

	* info.el (Info-insert-dir): Don't include blank lines at
	beginning of additional dir files (one is added automatically).

2000-11-01  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Revert the latest changes.
	Allow the three positional arguments to be skipped and replaced
	by keyword arguments.
	Add a :toggle argument to determine whether a nil arg means toggle
	or means turn-on.  The default is unchanged.
	Add a call to force-mode-line-update.

2000-11-01  Dave Love  <fx@gnu.org>

	* emacs-lisp/elp.el (elp-restore-function): Remove autoload cookie.

2000-11-01  Miles Bader  <miles@lsi.nec.co.jp>

	* calendar/calendar.el (diary-face, holiday-face):
	Add dark-background variants.

2000-10-31  Sam Steingold  <sds@gnu.org>

	* textmodes/tex-mode.el (tex-file): Use `default-directory' when
	`tex-main-file' does not have directory in it.

2000-10-31  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-mode-map): Switch back to a sparse keymap.

2000-10-31  Thien-Thi Nguyen  <ttn@gnu.org>

	* ediff-init.el (ediff-prepare-buffer-hook): Expand docstring, no
	functional change.

2000-10-31  Gerd Moellmann  <gerd@gnu.org>

	* files.el (find-file-noselect): When we expand a wildcard, return
	a list of buffers, as we should do according to the doc string.

2000-10-31  Ken Raeburn  <raeburn@gnu.org>

	* loadup.el (top level): Adjust load path if program name is
	"../src/bootstrap-emacs", in case it's not dumped and thus the
	load path adjustment hasn't already been done.

2000-10-31  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug on selected pages for printing.
	Use `color-values' for Emacs 21.  Ensure fontification when jit-lock
	is on.  Try to avoid warning messages when compiling.  Doc Fix.
	(ps-print-version): New version number (6.3).
	(ps-color-device): Use `color-values' to determine if device
	supports color.
	(ps-color-values): Try to use `x-color-values' when using XEmacs.
	(ps-print-page-p): Changed from defsubst to defun.
	(ps-page-number): Changed from defmacro to defun.
	(ps-header-sheet, ps-header-page): Fix bug on selected pages for
	printing.
	(ps-print-ensure-fontified): Ensure fontification when jit-lock is on.
	(ps-end-file, ps-dummy-page): Funs eliminated.
	(ps-print-color-scale): Changed default value.
	(ps-page-n-up, ps-print-page-p): New internal vars.
	(ps-print-preprint, ps-output, ps-begin-file, ps-begin-page)
	(ps-plot-region, ps-generate, ps-end-job): Code fix.

	* delim-col.el: Little programming improvement.
	(delimit-columns-str): New macro.
	(delimit-columns-region, delimit-columns-rectangle): Code fix.

2000-10-31  Kenichi Handa  <handa@etl.go.jp>

	* term/mac-win.el (decode-mac-roman, encode-mac-roman, mac-roman):
	Moved to european.el.
	(ccl-encode-mac-roman-font, fontset-mac): Modified for
	mule-unicode-2500-33ff and mule-unicode-e000-ffff.
	(mac-roman-kbd-insert, mac-roman-kbd-mode): These functions deleted.
	(mac-roman-kbd-mode, mac-roman-kbd-mode-map): These variables deleted.

2000-10-30  Dave Love  <fx@gnu.org>

	* progmodes/cc-menus.el (imenu-generic-expression)
	(imenu-progress-message): Only defvar when compiling.

	* emacs-lisp/elp.el (elp-unload-hook): New function.

	* loadhist.el (unload-feature): Call elp-restore-function,
	checking for symbols; don't use elp-restore-all.
	(loadhist-hook-functions): Doc fix.

2000-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-confirm): Fix the default.

2000-10-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* delim-col.el: Little fix: replace delimit-columns-align-columns by
	delimit-columns-format.
	(delimit-columns-region, delimit-columns-rectangle): Code fix.

2000-10-30  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-replace-by-expanded-history): Don't use
	comint-get-old-input (we're not looking at *old* input).
	(comint-get-old-input-default): If using fields, signal an error
	when the point is not in an input field.

2000-10-30  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: New charsets mule-unicode-2500-33ff
	and mule-unicode-e000-ffff.

	* international/mule.el (decode-char, encode-char): New functions.
	(make-coding-system): Accept a symbol of translation table as a
	value of property `safe-chars'.

	* international/mule-cmds.el (encode-coding-char): Check property
	safe-chars instead of safe-charsets.

	* international/fontset.el (fontset-default): Modified for
	mule-unicode-2500-33ff and mule-unicode-e000-ffff.
	(x-font-name-charset-alist): Likewise.
	(ccl-encode-unicode-font): New CCL program.  Record it in
	font-ccl-encoder-alist to be used for fonts "ISO10646-1".

	* language/european.el (mac-roman-decoder, mac-roman-encoder):
	New translation tables.
	(decode-mac-roman, encode-mac-roman): Definition of these CCL
	programs are modified and moved from mac-win.el.
	(mac-roman): Definition of this coding system is modified and
	moved from mac-win.el.

2000-10-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-wind.el (ediff-setup-control-frame): Enclose
	face-attribute in condition-case to avoid errors in older emacsen.

2000-10-29  Miles Bader  <miles@gnu.org>

	* custom.el (custom-add-to-group): Allow multiple entries for a
	given value OPTION, as long as their widget types are different.
	* cus-edit.el (custom-face-value-create): If face name doesn't end
	with "face", add such here (similar to custom group widgets).

	* comint.el (comint-highlight-prompt): Add :type.

2000-10-28  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-log): Doc fix.
	(timeclock-last-event): Doc fix.
	(timeclock-log): Kill the timelog buffer after appending a new event.
	(timeclock-find-discrep): Use a temp buffer to read in the
	timelog, instead of visiting the file.
	(timeclock-log-data): A new function, along with a host of helper
	functions, for the purpose of making timelog data accessible to
	programmers.

	* eshell/esh-mode.el (window-height test): Make certain that
	`eshell-stringify-t' is non-nil.
	(eshell-password-prompt-regexp): Changed to a much simpler
	password regexp.
	(eshell-send-input): If `eshell-invoke-directly' returns t,
	directly invoke the parsed command using `eval'.  This improves
	turn-around time on simple commands by a factor of three or
	greater, such as cd, ls, pwd, etc. -- which get used very often.
	It also conserves thousands of cons cells per call (since
	`eshell-do-eval' consumes memory like a Cookie Monster set loose
	in the Pacific Cookie Company).

	* eshell/esh-test.el (eshell-test): Whitespace fix.

	* eshell/em-ls.el (eshell-ls-insert-directory):
	Make `eshell-ls-initial-args' nil when inserting directory contents.

	* eshell/em-script.el (eshell-script-initialize): Add names to
	`eshell-complex-commands, since `source' and `.' are complex.

	* eshell/esh-cmd.el (eshell-rewrite-for-command)
	(eshell-rewrite-while-command): Use `eshell-protect' instead of
	`eshell-copy-handles'.
	(eshell-rewrite-if-command): Use `eshell-protect' to wrap the call
	bodies.
	(eshell-separate-commands): Whitespace fix.
	(eshell-complex-commands): Added a new list of names, for
	determining whether a given command is as simple as it looks.
	(eshell-invoke-directly): New function.  Returns t if a command
	should be invoked directly (using `eval'), rather than indirectly
	using `eshell-do-eval'.
	(eshell-do-eval): Whitespace fix.

	* eshell/em-unix.el (eshell-default-target-is-dot): New variable,
	which provides an emulation of the DOS shell behavior of assuming
	that cp/mv/ln should copy/move/link to the current directory.
	(eshell-remove-entries): Added a doc string.
	(eshell-shuffle-files): Removed the check for `target' being null.
	(eshell-mvcp-template, eshell-mvcpln-template): Renamed
	`eshell-mvcp-template' to `eshell-mvcpln-template', and extended
	it to do a smarter check of whether a destination was provided.
	(eshell/mv, eshell/cp): Enable `:preserve-args'.
	(eshell/ln): Enable `:preserve-args', and use
	`eshell-mvcpln-template' to implement the body of the function.
	(eshell/cat, eshell/make, eshell-poor-mans-grep, eshell-grep)
	(eshell/du, eshell/diff, eshell/locate): Stringify the argument
	list after flattening it.  This makes it possible to cat files
	with numerical names.
	(eshell-unix-initialize): Added several names to
	`eshell-complex-commands.
	(eshell-unix-command-complex-p): Return t if a given command name
	may result in external processes being invoked.

	* eshell/em-glob.el (eshell-glob-show-progress): Make this
	variable nil by default, since it slows down glob processing by a
	factor of two or more, and increases memory consumption.

	* eshell/em-smart.el: Added a note about how memory consumptive
	smart display mode can be (at least this is true in Emacs 21).
	(eshell-smart-initialize): Whitespace fix.
	(eshell-refresh-windows): Use `if' instead of `when'.
	(eshell-smart-scroll-window): Calling `save-current-buffer' was
	not necessary.
	(eshell-currently-handling-window): Added a missing global variable.

	* eshell/em-ls.el (eshell-do-ls): Code simplification.
	(eshell-ls-sort-entries, eshell-ls-entries, eshell-ls-dir):
	Whitespace fix.
	(eshell-ls-exclude-hidden): Added this variable in addition to
	`eshell-ls-exclude-regexp'.  This one prevents files beginning
	with . from even being read, which can improve memory consumption
	quite a bit.
	(eshell-ls-dir): If `eshell-ls-exclude-hidden' is non-nil, do not
	read file entries beginning with a dot.  In home directories with
	lots of hidden files, fully two-thirds of the time spent in ls is
	used to read directory entries that are immediately thrown away.
	(eshell-ls-initial-args): Added back this configuration variable,
	for specifying default initial arguments to every call to ls.
	Much faster than using an alias to do the same thing.
	(eshell-do-ls): Use `eshell-ls-initial-args', if set.
	(eshell-ls-dir): Whitespace change.

	* eshell/em-dirs.el (eshell/pwd): Small code simplification.

	* eshell/esh-util.el: Don't require `ange-ftp' if it's not available.
	(eshell-stringify-t): Added a customization variable, to indicate
	whether `t' should be rendered as a string at all.  If not, one
	can still determine if the result of an expression is true using
	"file-exists-p FILE && echo true".
	(eshell-stringify): If `eshell-stringify-t' is nil, don't
	stringify t!

	* eshell/esh-module.el: Whitespace fix.

	* eshell/em-alias.el (eshell-alias-initialize):
	Added `eshell-command-aliased-p' to `eshell-complex-commands'.
	(eshell-command-aliased-p): New function that returns t if a
	command name names an aliased.

2000-10-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-preserve-cursor-color): New test that avoids
	redrawing the screen when changing cursor color.
	(viper-insert-state-pre-command-sentinel)
	(viper-replace-state-pre-command-sentinel)
	(viper-replace-state-post-command-sentinel):
	Use viper-preserve-cursor-color.
	Many functions changed to use viper= instead of = when comparing
	characters.
	* viper-util.el (viper-memq-char,viper=): New functions for
	working with characters.
	(viper-change-cursor-color): Fixed buglet.
	Many functions changed to use viper= instead of = when comparing
	characters.
	* viper.el (viper-insert-state-mode-list): Added eshell.

	* ediff-init.el (ediff-before-setup-hook): New hook.
	Several typos fixed in various docstrings.
	* ediff-merg.el (ediff-show-clashes-only): Docstring typo fixed.
	* ediff-mult.el (ediff-before-session-group-setup-hooks): New hook.
	(ediff-show-meta-buffer): Run ediff-before-session-group-setup-hooks.
	* ediff-util.el (ediff-setup): Run ediff-before-setup-hook.
	(ediff-other-buffer): Use selected buffers if in Buffer-menu buffer.
	(ediff-get-selected-buffers): New function.
	* ediff-vers.el (ediff-vc-internal,ediff-rcs-internal)
	(ediff-vc-merge-internal,ediff-rcs-merge-internal):
	Use save-window-excursion.
	* ediff-wind.el (ediff-skip-unsuitable-frames): More robust
	termination check in while loop.
	* ediff.el (ediff-get-default-file-name): Better defaults when in
	dired buffer.
	(ediff-files,ediff-merge-files,ediff-files3)
	(ediff-merge-files-with-ancestor): Use ediff-get-default-file-name.

2000-10-28  Dave Love  <fx@gnu.org>

	* info.el (Info-fontify-node): Add help-echo for menu items.

2000-10-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level): If the value of $TERM indicates
	we are running from xterm or one of its work-alikes, default to a
	light background mode.

	Support for -fg, -bg, and -rv command-line arguments for TTYs:
	* faces.el (tty-handle-reverse-video): New function.
	(tty-create-frame-with-faces): Call it.

	* frame.el (frame-notice-user-settings): Don't apply
	default-frame-alist and initial-frame-alist to MS-DOS frames.
	Call tty-handle-reverse-video, frame-set-background-mode, and
	face-set-after-frame-default for non-MS-DOS frames.

	* startup.el (tty-long-option-alist): New variable.
	(tty-handle-args): New function.
	(command-line): Call tty-handle-args.

	* term/pc-win.el (x-long-option-alist, msdos-handle-args): Remove;
	startup.el now does that for all character-terminal frames.

2000-10-28  Miles Bader  <miles@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Generate `turn-on-MODE' and `turn-off-MODE' functions unless the mode
	is global.  If :global is followed by a non-nil but non-t value,
	make the mode buffer-local, but also generate a `global-MODE'
	version using `easy-mmode-define-global-mode'.
	Add :conditional-turn-on keyword argument.

2000-10-28  Dave Love  <fx@gnu.org>

	* international/latin1-disp.el (latin1-char-displayable-p):
	Don't use window-system.

2000-10-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (find-file-not-found-set-buffer-file-coding-system):
	Don't call find-buffer-file-type-coding-system.  Instead, just
	set eol-type to -unix if inhibit-eol-conversion is in effect, or
	if the file is on an untranslated filesystem.
	(add-untranslated-filesystem): Use "D" instead of "f" inside
	interactive.

2000-10-27  Dave Love  <fx@gnu.org>

	* textmodes/refill.el (refill-late-fill-paragraph-function): New var.
	(refill-mode): Use it.

2000-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* international/quail.el (quail-activate): Don't make-local-hook.

2000-10-27  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-version-backup-file-name): Use file.~<rev>~ for
	manual backups and file.~<rev>.~ for automatic ones.
	(vc-make-version-backup): Don't do it on MS-DOS without long file
	names.

	* vc.el (vc-version-other-window): If an automatic backup of the
	desired version exists, rename it instead of copying it.

	* vc-cvs.el (vc-cvs-checkin): Check both status and error message
	after command.  If there's an unexpected error, signal it instead
	of being silent.
	(vc-cvs-merge-news): Be prepared for no news at all.

2000-10-27  Miles Bader  <miles@lsi.nec.co.jp>

	* shell.el (shell): Add BUFFER argument.
	* comint.el (make-comint-in-buffer): New function.
	(make-comint): Use it.

	* faces.el (face-spec-choose): Change syntax so that the list of
	attribute-value pairs is now the cdr of each clause, not the cadr.
	Detect old-style entries, and handle them.  Use pop.

2000-10-26  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-mode-map): Use a sparse map.
	(custom-mode): Don't bother with make-local-hook.

	* wid-edit.el (widget-add-change): Don't bother with make-local-hook.

	* vc.el (vc-start-entry): Only erase the buffer if comment is set.

2000-10-26  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Avoid compilation gripes.
	(ps-print-version): New version number (6.2.1).

2000-10-26  Dave Love  <fx@gnu.org>

	* menu-bar.el: Modify some menu item help strings.
	(menu-bar-help-menu): Add link to MORE.STUFF.

	* cus-edit.el (custom-mode): Add `special' mode-class property.

	* wid-browse.el (widget-browse-mode): Likewise.

	* wid-edit.el (widget-specify-field): Revert to using local-map
	property, not keymap.

2000-10-26  Miles Bader  <miles@lsi.nec.co.jp>

	* wid-edit.el (widget-field-end): When checking for a `boundary'
	field, do so in the correct buffer.

	* simple.el (undo): Correctly distinguish between numeric and
	non-numeric prefix args in non-transient-mark-mode, as per the doc
	string.  When in transient-mark-mode, treat all prefix-args as
	numeric.

	* simple.el (previous-matching-history-element): Miscellaneous cleanup.
	Position point on match.  Handle N == 0 correctly.

	* comint.el (comint-mode): Locally set `next-line-add-newlines' to nil.
	(comint-mode-map): Reverse order of `comint-write-output' and
	`comint-append-output-to-file'.
	(comint-append-output-to-file): Reinstate this function, for the
	benefit of the menu.

2000-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-version-other-window): Bind `file'.

2000-10-25  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (update-authors): New target for maintenance purposes.

	* emacs-lisp/authors.el (batch-update-authors): New function.
	(authors-fixed-entries): New defconst.
	(authors-add-fixed-entries): New function.
	(authors): Call it.: Don't process lispref/.

2000-10-25  Jason Rumney  <jasonr@gnu.org>

	* cus-edit.el (custom-button-face, custom-button-pressed-face):
	Merge x w32 and mac definitions.

2000-10-25  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-options-menu): Add a help string for
	`uniquify'.

2000-10-25  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-string-preprocess):
	Fix a wrong type argument error.

2000-10-25  Miles Bader  <miles@gnu.org>

	* recentf.el (recentf-mode): Variable removed.
	(recentf-mode): Use `define-minor-mode'.

	* mwheel.el (mouse-wheel-mode): New global minor mode.
	(mwheel-install): Use `mouse-wheel-mode'.

2000-10-25  Dave Love  <fx@gnu.org>

	* progmodes/cperl-mode.el (cperl-mode):
	Set normal-auto-fill-function correctly.

	* wid-edit.el (widget-field-keymap, widget-text-keymap):
	Don't inherit from global-map and don't nullify menu-bar and tool-bar
	bindings.

2000-10-25  Miles Bader  <miles@lsi.nec.co.jp>

	* wid-edit.el (widget-field-at): New function.
	(widget-at, widget-field-activate): Use it.
	(widget-tabable-at): Use `widget-at'.
	(widget-specify-field): If the terminating character of the widget
	field (which is read-only) is a newline, put it into a special
	`boundary' field so that C-n/C-p act more naturally.
	(widget-field-end): Also don't subtract one if a special
	`boundary' field has been added after the widget field.

	* comint.el (comint-output-filter, comint-send-input):
	Don't bother adding stickiness fields to overlays to fool the field
	code, since it should notice the overlay insertion-types now.

	* wid-edit.el (widget-beginning-of-line, widget-end-of-line):
	Replace with aliases of the normal emacs b-o-l/e-o-l functions.
	(widget-field-keymap, widget-text-keymap): Don't bind C-a/C-e.

2000-10-24  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el (authors-aliases): Add some more aliases.
	(authors): Set file coding system to iso-2022-7bit.
	Add file-local variables to output buffer.

	* files.el (after-find-file): Don't print any warnings if
	WARN is nil.

2000-10-24  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el (ps-generate): Fix odd/even pages printing bug.

	* delim-col.el: Now there is a column formatting mechanism.
	Modified to customization mechanisms convention.  Doc fix.
	(columns): New group for delim-col.
	(delimit-columns-before, delimit-columns-after)
	(delimit-columns-format, delimit-columns-extra, delimit-columns-start)
	(delimit-columns-end): New vars.
	(delimit-columns-customize, delimit-columns-format): New funs.
	(delimit-columns-region, delimit-columns-rectangle)
	(delimit-columns-rectangle-line): Modified to support column
	formatting.

2000-10-24  Dave Love  <fx@gnu.org>

	* log-edit.el (log-edit): Add :version and a :group for vc.

2000-10-24  Gerd Moellmann  <gerd@gnu.org>

	* files.el (after-find-file): Don't print a message ``New file''
	if WARN is nil.

	* wid-edit.el (widget-field-keymap, widget-text-keymap):
	Define the tool-bar map as nil, as for the menu-bar.  Otherwise, we'll
	get duplicate tool-bar entries because we'll see the global ones
	on more than one path through keymaps.

	* emacs-lisp/lisp.el (defun-prompt-regexp): Doc fix.

	* progmodes/cmacexp.el: Change Francesco's email address.

2000-10-24  Kenichi Handa  <handa@etl.go.jp>

	* window.el (fit-window-to-buffer): Adjust point of the window
	buffer, not that of the current buffer.

2000-10-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/cmacexp.el: Update the author's email address.

2000-10-24  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-spec-set-match-display): Add `graphic' display
	type (the inverse of `tty').  Use `display-graphic-p' instead of
	the window-system variable.

2000-10-24  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el (isearch-with-input-method):
	Call input-method-function with the first event in
	unread-command-events.

2000-10-24  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-default-spec, face-user-default-spec): Make defsubsts.

2000-10-24  Andrew Choi  <akochoi@i-cable.com>

	* international/mule-conf.el (mac-roman-lower, mac-roman-upper):
	New charsets.

	* term/mac-win.el: Remove definitions of mac-roman-lower and
	mac-roman-upper, require dired, and define instead of set
	mac-ready-for-drag-n-drop to avoid compilation error.

2000-10-23  Andrew Innes  <andrewi@gnu.org>

	* files.el (make-backup-file-name-1) [windowsnt, ms-dos]:
	Remove superfluous calls to subst-char-in-string; instead apply
	expand-file-name after convert-standard-filename to ensure
	expected directory separators are used.

2000-10-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add an entry for Eshell.

2000-10-23  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu)
	(tool-bar-add-item): Set foreground and background for XBM icons.

	* international/latin1-disp.el (latin1-char-displayable-p):
	New function (from Handa).
	(latin1-display-check-font): Use it.

	* imenu.el (imenu--create-keymap-2): Build menu with menu-item
	using :key-sequence, making it much more usable.
	Use nconc, not append.
	(imenu--create-keymap-1): Avoid append.

	* textmodes/refill.el: Remove bits redundant with define-minor-mode.

2000-10-23  Miles Bader  <miles@lsi.nec.co.jp>

	[the following changes fix a bug where `define-minor-mode' didn't
	correctly generate :require clauses for defcustoms in compiled files]
	* emacs-lisp/bytecomp.el (byte-compile-last-logged-file): New variable.
	(byte-compile-log-file, byte-compile-log-1): Don't set
	`byte-compile-current-file' to nil.  Instead set
	`byte-compile-last-logged-file' to it.  Test whether
	byte-compile-current-file equals byte-compile-last-logged-file
	instead of whether its nil.
	(byte-compile-file): Bind `byte-compile-last-logged-file' to nil.

2000-10-23  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/refill.el: Fix var names in doc.
	(refill-mode): Don't bother with make-local-hook anymore.

2000-10-23  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (face-user-default-spec, face-default-spec): New functions.
	(face-spec-choose, face-spec-set): Document nil-SPEC behavior.
	(frame-set-background-mode, face-set-after-frame-default):
	Use `face-user-default-spec'.  Simplify code slightly.

	* woman.el (woman-italic-face, woman-bold-face)
	(woman-unknown-face): Add dark-background variants.
	(woman-default-faces): Renamed from `woman-colour-faces'.
	Set using the stored defaults, rather than using hard-wired colors.
	(woman-monochrome-faces): Renamed from `woman-black-faces'.
	Just make the foreground `unspecified' rather than "black".
	(woman-menu): Rename menu entries accordingly.

	* faces.el (header-line): Make more reasonable on mono/grayscale
	displays.

2000-10-23  Andrew Choi  <akochoi@i-cable.com>

	* cus-edit.el (custom-button-face): Use 3D look for mac.
	(custom-button-pressed-face): Likewise.

	* faces.el (set-face-attributes-from-resources): Handle mac frames
	in the same way as x and w32 frames.
	(face-valid-attribute-values): Likewise.
	(read-face-attribute): Likewise.
	(defined-colors): Likewise.
	(color-defined-p): Likewise.
	(color-values): Likewise.
	(display-grayscale-p): Likewise.
	(face-set-after-frame-default): Likewise.
	(mode-line): Same default face as for x and w32.
	(tool-bar): Likewise.

	* frame.el: Remove call to frame-notice-user-settings at end of
	the file.

	* info.el (Info-fontify-node): Make underlines invisible for mac
	as for x, pc, and w32 frame types.

	* term/mac-win.el: New file.

2000-10-22  Dave Love  <fx@gnu.org>

	* textmodes/refill.el: New file.

2000-10-22  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-version-backup-file-name): New optional args
	MANUAL and REGEXP.
	(vc-delete-automatic-version-backups, vc-make-version-backup):
	New functions.
	(vc-before-save): Use the latter.
	(vc-default-make-version-backups-p): Added `-p' suffix to avoid
	confusion.

	* vc-cvs.el (vc-cvs-make-version-backups-p): Added `-p' suffix as
	expected by vc[-hooks].el.

	* vc.el (vc-checkout): Added `-p' suffix in call to
	vc-make-version-backups-p; use vc-make-version-backup to actually
	make the backup.
	(vc-version-other-window, vc-version-backup-file): Handle both
	automatic and manual backups.
	(vc-revert-file): Use vc-delete-automatic-version-backups to get rid
	of all of them.

2000-10-22  Miles Bader  <miles@gnu.org>

	* comint.el (comint-highlight-input, comint-highlight-prompt):
	Renamed, `-face' at end removed.
	(comint-send-input, comint-output-filter): Use renamed faces.

	* window.el (fit-window-to-buffer): Change defaulting of
	MAX-HEIGHT slightly.

	* faces.el (color-values, color-defined-p): Use `member', not
	`memq', because it works correctly for strings.
	(frame-set-background-mode): Actually, "unspecified-fg" and
	"unspecified-bg" *are* strings.  Use `member', not `memq', and
	`equal', not `eq', when a string value is possible.

2000-10-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add an entry for Speedbar.

2000-10-21  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/sh-script.el (sh-mode-map): Remove bindings for
	sh-electric-rparen, sh-electric-less and sh-electric-hash.
	(sh-st-punc, sh-here-doc-syntax): Use string-to-syntax.
	(sh-font-lock-heredoc, sh-font-lock-paren): New funs.
	(sh-font-lock-syntactic-keywords): Use them.
	(sh-heredoc-face, sh-st-face, sh-special-syntax): Remove.
	(sh-mkword-regexp, sh-electric-rparen-needed-here): Remove.
	(sh-mode): Don't override font-lock-unfontify-region-function.
	Use a copy of sh-font-lock-syntactic-keywords.
	(sh-set-shell): Don't set sh-electric-rparen-needed-here.
	Don't call sh-scan-buffer since font-lock does it on the fly.
	(sh-get-indent-info): Use `face' rather than `syntax-table'
	text-property to detect here-documents.
	Replace sh-special-syntax with sh-st-punc.
	(sh-prev-line): Use `face' rather than `syntax-table'
	text-property to skip over here-documents.
	(sh-font-lock-unfontify-region-function, sh-check-paren-in-case)
	(sh-set-char-syntax, sh-electric-rparen, sh-electric-hash)
	(sh-electric-less, sh-set-here-doc-region)
	(sh-remove-our-text-properties, sh-search-word, sh-scan-case)
	(sh-scan-buffer, sh-rescan-buffer): Remove.

2000-10-21  Andrew Innes  <andrewi@gnu.org>

	* w32-fns.el (make-auto-save-file-name): Don't apply conversion to
	remote (ange-ftp) file names.

2000-10-21  Miles Bader  <miles@gnu.org>

	* window.el (fit-window-to-buffer): New function.
	(shrink-window-if-larger-than-buffer): Use it.
	(window-text-height): Don't expect minibuffers to have mode-lines.

	* help.el (resize-temp-buffer-window): Use `fit-window-to-buffer'.
	* international/quail.el (quail-update-guidance):
	Use `fit-window-to-buffer' instead of `set-window-text-height'.

	* international/quail.el (quail-show-guidance-buf): Make sure
	guidance window really has enough room.
	(quail-update-guidance): If quail-guidance-win is already shown,
	make sure its height is OK.

	* window.el (window-text-height, set-window-text-height):
	New functions.
	(shrink-window-if-larger-than-buffer): Use `window-text-height'
	instead of `window-height' & `mode-line-window-height-fudge'.
	(mode-line-window-height-fudge): Add FACE parameter.
	* help.el (resize-temp-buffer-window): Use `set-window-text-height'
	instead of `enlarge-window' & `mode-line-window-height-fudge'.

2000-10-20  Miles Bader  <miles@gnu.org>

	* window.el (height-affecting-face-attributes): Use `defconst'.

	* textmodes/ispell.el (ispell-mode-line-window-height-fudge):
	New function, conditionally aliased to `mode-line-window-height-fudge'.
	(ispell-help): Use it.
	(ispell-choices-win-default-height): Don't include mode-line fudge.
	(ispell-choices-win-default-height): New function.
	(ispell-show-choices, ispell-command-loop): Use function
	`ispell-choices-win-default-height' instead of variable.

2000-10-20  Miles Bader  <miles@lsi.nec.co.jp>

	* window.el (mode-line-window-height-fudge): New variable.
	(height-affecting-face-attributes): New variable.
	(mode-line-window-height-fudge): New function.
	(shrink-window-if-larger-than-buffer): Use it.
	* help.el (resize-temp-buffer-window): Likewise.

	* info.el (Info-fontify-node): Add support for @subsubsection
	titles, which use `Info-title-4-face'.
	(Info-title-4-face): New face.
	(Info-title-3-face): Inherit from Info-title-4-face instead of
	variable-pitch.

2000-10-19  Jason Rumney  <jasonr@gnu.org>

	* dired.el (dired-insert-directory): Do not let errors signaled by
	attempt to run dired-free-space-program prevent dired from working.

2000-10-19  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-find-file-name): Fix regex subgroup number.

2000-10-19  Gerd Moellmann  <gerd@gnu.org>

	* dirtrack.el (dirtrack): Fix call to run-hooks.

	* cmuscheme.el (cmuscheme-program-name): Renamed from
	scheme-program-name because xscheme.el contains a defcustom with
	the same name.  As a consequence, customizing group `cmuscheme'
	loaded `xscheme' which redefined run-scheme.
	(run-scheme): Use cmuscheme-program-name.

	* ps-print.el (ps-print-emacs-type): Move into the eval-and-compile.

	* play/doctor.el (doctor-death): Update the Samaritans'
	anonymous address, and add a website for Befrienders International.

2000-10-19  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Even/odd pages fix.  Fix little bug on XEmacs.
	Avoid compilation gripes.  Doc fix.
	(ps-print-version): New version number (6.2).
	(ps-x-color-instance-p, ps-x-color-instance-rgb-components)
	(ps-x-color-name, ps-x-color-specifier-p, ps-x-copy-coding-system)
	(ps-x-device-class, ps-x-extent-end-position, ps-x-extent-face)
	(ps-x-extent-priority, ps-x-extent-start-position)
	(ps-x-face-font-instance, ps-x-find-coding-system)
	(ps-x-font-instance-properties, ps-x-make-color-instance)
	(ps-x-map-extents): Alias for functions without the prefix `ps-x-', to
	avoid compilation gripes without defining functions.
	(ps-e-find-composition): Alias for function find-composition, to have a
	suitable function depending on Emacs version.
	(ps-color-device, ps-color-values, ps-face-foreground-name)
	(ps-face-background-name, ps-face-bold-p, ps-face-italic-p, ps-mapper)
	(ps-extent-sorter, ps-xemacs-face-kind-p, ps-xemacs-color-name)
	(ps-print-ensure-fontified): Function definitions surrounded by
	`eval-and-compile' to avoid compilation gripes.
	(ps-font-lock-face-attributes): `font-lock-face-attributes' evaluated
	by symbol-value to avoid compilation gripes.
	(ps-end-file, ps-header-sheet, ps-plot-region): Even/odd pages fix.
	(ps-generate-postscript-with-faces): Fix little bug on XEmacs.

2000-10-19  Miles Bader  <miles@lsi.nec.co.jp>

	* startup.el (normal-top-level): Call `frame-set-background-mode'
	after `frame-notice-user-settings' because the latter doesn't call
	the former on a tty.

	* faces.el (frame-set-background-mode): `unspecified' &c are
	symbols, not strings.

2000-10-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/tty-colors.el (color-name-rgb-alist): Add a comment explaining
	why some "light*" colors are deliberately absent from the alist.

	* info.el (Info-title-1-face, Info-title-2-face, Info-title-3-face):
	Change colors for tty's, as suggested by Miles Bader.

2000-10-19  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Use registry "MuleTibetan-2" for Tibetan.
	(ccl-encode-mule-unicode-0100-24ff): New CCL program.  Register it
	for ISO10646-1 fonts.
	(x-font-name-charset-alist): Add an entry for "iso10646-1".

2000-10-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (frame-set-background-mode): If a tty frame defines a
	background color, use that to compute the background mode, instead
	of always defaulting to "dark".

2000-10-19  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-write-output): New function.
	(comint-mode-map): Add it to the menu.
	Bind `C-c C-s' to comint-write-output.

2000-10-18  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Set buffer-undo-list to t.
	Use fancy-splash-delay.

2000-10-18  Alex Schroeder  <alex@gnu.org>

	* progmodes/sql.el (sql-sybase-options): New option.
	(sql-sybase): Use it.  Add sql-database to the list of parameters
	provided for login.  The options -w 2048 -n are not used any more.

	* comint.el (comint-read-input-ring): Bugfix such that the first
	and the last entry of the input ring file are not lost.

2000-10-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Internal variable changes to defcustom,
	make-local-hook changes to defvar.  Doc fix.
	(ps-print-version): New version number (6.1).
	(ps-setup, ps-do-despool): Code fix.
	(ps-printer-name): Customization fix.
	(ps-printer-name-option): Now is a defcustom instead of an
	internal variable.
	(ps-print-hook, ps-print-begin-sheet-hook, ps-print-begin-page-hook)
	(ps-print-begin-column-hook): Now are defvar instead of
	make-local-hook.

2000-10-18  Miles Bader  <miles@gnu.org>

	* comint.el (comint-delete-output): Renamed from `comint-kill-output'.
	(comint-kill-output): Changed into an alias for `comint-delete-output',
	and made obsolete.
	(comint-mode-map): Rename references to comint-kill-output.

2000-10-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-changed-face): Add bold and italic attributes to tty faces.
	(diff-function-face): New face.
	(diff-font-lock-keywords): Use it.

2000-10-18  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-output-filter): Fixup comint-last-input-end too.
	Remove commented-out call to force-mode-line-update.
	(comint-kill-output): Use `forward-line 0' instead of
	beginning-of-line to make sure we get past the prompt.

2000-10-17  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-header-face, diff-file-header-face):
	Add specific setting for dark background.
	(diff-context-face): Renamed from diff-comment-face.
	Set explicitly rather than inheriting from font-lock-comment-face.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line): Move the code which sets the default
	TTY colors to before before-init-hook.

2000-10-17  Gerd Moellmann  <gerd@gnu.org>

	* jit-lock.el (jit-lock-stealth-time): Doc fix.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Add .dif and .pat as diff-mode
	extensions, for MS-DOS.

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-changed-face): Define tty-specific colors.

2000-10-17  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-text): Realign the text.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* font-lock.el (font-lock-comment-face): Define a separate default
	for dark-background tty's.

2000-10-17  Miles Bader  <miles@gnu.org>

	* help.el (resize-temp-buffer-window): Add hack to avoid last line
	being obscured by whizzy mode-lines on graphics displays.

2000-10-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-title-1-face, Info-title-2-face)
	(Info-title-3-face): Define colors for tty's.
	(info-header-node): Remove unneeded tty-specific definition.

2000-10-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-handle-reverse-video): Don't remove
	reverse from the frame parameters, and don't invert foreground and
	background colors.

2000-10-16  Miles Bader  <miles@gnu.org>

	* info.el (Info-set-mode-line): Use `%b' instead of hardwired
	string "*Info*".  Call propertized-buffer-identification to spruce
	up the result.

2000-10-16  Gerd Moellmann  <gerd@gnu.org>

	* help.el: Provide `help' for the sake of define-minor-mode
	which generates defcustoms with requires.

	* jit-lock.el (jit-lock-after-change): If we're in text that
	matches a multi-line font-lock pattern, make sure the whole text
	will be redisplayed.

	* emacs-lisp/authors.el (authors-add): Don't add an entry if
	author's name is unknown.

	* eshell/esh-var.el, eshell/esh-util.el, eshell/esh-test.el,
	* eshell/esh-proc.el, eshell/esh-opt.el, eshell/esh-mode.el,
	* eshell/esh-maint.el, eshell/esh-io.el, eshell/esh-ext.el,
	* eshell/esh-cmd.el, eshell/esh-arg.el, eshell/em-xtra.el,
	* eshell/em-unix.el, eshell/em-term.el, eshell/em-smart.el,
	* eshell/em-script.el, eshell/em-rebind.el, eshell/em-prompt.el,
	* eshell/em-pred.el, eshell/em-ls.el, eshell/em-hist.el,
	* eshell/em-glob.el, shell/em-dirs.el, eshell/em-cmpl.el,
	* eshell/em-basic.el, eshell/em-banner.el, eshell/em-alias.el:
	Add author information.

2000-10-16  Miles Bader  <miles@lsi.nec.co.jp>

	* toolbar/up_arrow.xpm, toolbar/right_arrow.xpm:
	* toolbar/left_arrow.xpm, toolbar/home.xpm: Re-convert from
	full-color version (using the Gimp) to eliminate dithering artifacts.

2000-10-15  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-syntactic-keywords): Fix docstring.

	* simple.el (syntax-flag-table, string-to-syntax): Remove.

2000-10-15  Dave Love  <fx@gnu.org>

	* progmodes/sh-script.el: Require skeleton and comint when compiling.

	* pcomplete.el (pcomplete) <defgroup>: Add :version.

	* whitespace.el: Doc fixes.
	(top-level): Don't add hooks here.
	(whitespace-running-emacs): Deleted.
	(timer): Don't require.
	(whitespace): Add back :version conditional on xemacs test.
	(whitespace-spacetab-regexp, whitespace-indent-regexp)
	(whitespace-ateol-regexp, whitespace-modes): Fix custom type.
	(whitespace-force-mode-line-update, whitespace-refresh-rescan-list)
	(whitespace-tickle-timer, whitespace-rescan-files-in-buffers):
	Avoid specific xemacs test.
	(whitespace-global-mode): New option.
	(whitespace-global-mode): New command.
	(whitespace-unload-hook): New function.

	* info.el (Info-mouse-follow-nearest-node): Use mouse-set-point.
	(Info-fontify-node, Info-goto-node, Info-mode-menu)
	(Info-fontify-node): `Goto' goes to `Go to'.
	(Info-fontify-node): Add help-echo to xref links.

2000-10-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/em-unix.el (eshell-du-prefer-over-ange): Doc fix.

2000-10-15  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-syntax):
	Use plist-get and allow :inherit.

	* emacs-lisp/cl-macs.el (cl-do-arglist):
	Use plist-get and plist-member instead of memq.

	* emacs-lisp/ewoc.el (ewoc-location): New function.
	(ewoc-enter-after, ewoc-enter-before): Document return value.
	* pcvs.el (cvs-make-cvs-buffer, cvs-run-process):
	Don't need make-local-hook any more.
	(cvs-addto-collection): Return the new tin.
	(cvs-mode-insert): Jump to the new line.

	* jit-lock.el (jit-lock-fontify-buffer): Remove.

	* arc-mode.el (archive-zoo-summarize): Fix from gnu.emacs.bug.

	* font-lock.el (font-lock-syntactically-fontified): New var.
	(font-lock-fontify-syntactic-keywords-region): Use it.
	(font-lock-mode): Fix docstring.  Don't need make-local-hook anymore.

	* diff-mode.el (diff-find-file-name): Fix regexp.

	* emacs-lisp/cl-extra.el (cl-builtin-gethash, cl-builtin-remhash)
	(cl-builtin-clrhash, cl-builtin-maphash): Add for byte-compatibility.

	* progmodes/sh-script.el (sh-imenu-generic-expression): Fix.
	(sh-mode-syntax-table): Add punctuation syntax for < and >.
	(sh-mode): Don't make all vars local here.
	(sh-kw): Reformat.
	(sh-set-shell): Use dolist.  Don't set indent-region-function.
	(sh-mode-syntax-table): Use pop.
	(sh-remember-variable): Use push.
	(sh-help-string-for-variable): Use memq.
	(sh-safe-backward-sexp): Remove.
	(sh-safe-forward-sexp): Add ARG.
	(sh-get-indent-info, sh-prev-stmt): Use it.
	(sh-prev-line): Simplify by using forward-comment.
	(sh-this-is-a-continuation): Simplify.
	(sh-learn-buffer-indent): Use dolist.
	(sh-do-nothing): Remove.
	(sh-set-char-syntax, sh-set-here-doc-region):
	Use inhibit-modification-hooks.
	(sh-name-style): Use mapcar and push.
	(sh-load-style): Use dolist.
	(sh-save-styles-to-buffer): Use with-current-buffer and pp.
	(sh-case, sh-while-getopts): Use propertize directly rather
	than sh-electric-rparen.

2000-10-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el: Require CL when compiling.
	(tex-mode-syntax-table): Init immediately.
	(tex-mode-map): Bind M-RET to latex-insert-item.
	(latex-mode): Set indent-line-function to latex-indent.
	(tex-common-initialization): Don't setup the syntax-table any more.
	(latex-insert-item): New skeleton.
	(tex-next-unmatched-end): Fix copy/paste braino.
	(latex-syntax-after, latex-skip-close-parens, latex-down-list)
	(latex-indent, latex-find-indent): New functions.
	(tex-indent-allhanging, tex-indent-arg, tex-latex-indent-syntax-table)
	(tex-indent-item, tex-indent-item-re, tex-indent-basic): New vars.
	(tex-compilation-parse-errors): Use with-syntax-table.

2000-10-15  Miles Bader  <miles@gnu.org>

	* font-lock.el (font-lock-comment-face): Change dark-background,
	color, non-tty, default to `chocolate1'.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (require): Added a missing `require' form,
	needed when compiling (for an ange-ftp macro definition).

2000-10-13  Dave Love  <fx@gnu.org>

	* toolbar/paste.pbm, toolbar/saveas.pbm: Retouch.

2000-10-13  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp.el (down-list, backward-up-list, up-list): Doc fix.

	* toolbar/*.xpm: Reduce to max. 8 colors (mogrify -colorspace
	transparent -colors 8).

2000-10-13  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp): Fixed bug in new multi-line code
	that breaks with old list format timestamps.
	(time-stamp-warn-inactive, time-stamp-old-format-warn)
	(time-stamp-count, time-stamp-conversion-warn): Improved doc strings.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* align.el, pcomplete.el, calendar/timeclock.el,
	eshell/esh-module.el, eshell/eshell.el: Removed URL reference.

	* calendar/timeclock.el (timeclock-find-discrep): A fix to some
	faulty math, where holiday hours were being computing as seconds.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* desktop.el (desktop-buffer-modes-to-save): Added a global for
	specifying what "other" kinds of buffers should be saved.
	This used to be hard-coded.
	(desktop-buffer-misc-functions): A global for specifying how
	auxiliary data should be determined for special buffer types.
	(desktop-save-buffer-p): Use `desktop-buffer-modes-to-save',
	instead of hard-coding the special buffer types.
	(desktop-save): Run `desktop-buffer-misc-functions' to gather
	auxiliary data, instead of hard-coding for Info buffers and dired.
	(desktop-buffer-info-misc-data): Aux function for determining Info
	buffer auxiliary info.
	(desktop-buffer-dired-misc-data): Likewise, but for dired buffers.
	(desktop-buffer-info): Changed this function to use the info
	gathered above.
	(desktop-create-buffer): Be a little more careful about what
	`minor-mode' means before calling it.  This is important for some
	buffer types.

2000-10-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el: Added a global form which declares an
	autoload for `parse-time-string', if that function is not already
	defined, and if parse-time.el is available on the user's system.

	* eshell/em-ls.el (eshell-ls-applicable): Extended this function
	to be aware of ange-ftp user info.
	(eshell-do-ls): Bind `ange-cache'.  Also, use `eshell-file-attributes'.
	(eshell-ls-annotate): Use `eshell-file-attributes'.
	(eshell-ls-file): Made the user-id printing code a bit smarter.

	* eshell/esh-util.el (eshell-ange-ls-uids): Added variable, to
	allow identification of alias user ids in remote directories.
	It's manual, but there's no other way to know when the current user
	on the local machine, is also the owning user on the remote machine.
	(fboundp): Bind `ange-cache'.
	(eshell-directory-files-and-attributes): Re-organized the logic a
	bit to use `eshell-file-attributes' instead of `file-attributes'.
	The former is more sensitive to directories that are read via FTP,
	and knows how to use ange-ftp to determine full attribute
	information, instead of just the name and last modtime.
	(eshell-current-ange-uids): Return the current user id when in a
	remote directory.
	(eshell-parse-ange-ls): Parse a full directory listing that has
	been returned by ange-ftp.
	(eshell-file-attributes): This beefed up version of
	`file-attributes' is only special if the user is currently in a
	remote directory, in which case it does a lot of work to find out
	what the real attributes of a file are, as they appear on the
	remote machine.  This makes usage of remote directories (i.e.,
	ange-ftp pathnames) much more useful.  You can now use Eshell as a
	full-fledged FTP client, with much more manipulation ability than
	most other clients.

	* eshell/em-unix.el (eshell-du-prefer-over-ange): Added a new
	variable, which means that Eshell's du should always be preferred
	in remote directories.
	(eshell-shuffle-files): Use `eshell-file-attributes', rather than
	just `file-attributes'.
	(eshell-mvcp-template): Bind `ange-cache', to improve performance
	when reading remote directories.  This is an Eshell-specific
	variable (not part of ange-ftp).
	(eshell/ln): Bind `ange-cache'.
	(eshell/du): Added some extra logic for determining when to use
	Eshell's du (which is slow), and when to use the external version
	(which may or may not exist).

	* eshell/em-rebind.el (eshell-delchar-or-maybe-eof):
	Call `eshell-interactive-process', rather than using
	`get-buffer-process', since backgrounded processes don't count in
	the context of this function's logic.

	* eshell/esh-arg.el (eshell-parse-double-quote): Moved a call to
	`forward-char', so that null strings are parsed correctly.

2000-09-13  John Wiegley  <johnw@gnu.org>

	* eshell/em-pred.el (eshell-pred-file-type)
	(eshell-pred-file-links, eshell-pred-file-size):
	Use `eshell-file-attributes'.  This is more correct over ange-ftp.

	* eshell/em-glob.el (eshell-extended-glob): Bind `ange-cache', so
	that remote file globbing is more efficient.

	* eshell/em-ls.el (eshell-ls-dir): Use `expand-file-name' when
	gathering the files and attributes within a directory.

	* eshell/em-unix.el (eshell/cat): If any of the files passed on
	the command line is a special file (not a regular file, directory
	or symlink), always attempt to call the external version of cat.

2000-09-13  John Wiegley  <johnw@gnu.org>

	* eshell/esh-mode.el (eshell-find-tag): Corrections to the
	Eshell-friendly version of find-tag.

2000-10-13  Miles Bader  <miles@lsi.nec.co.jp>

	* image-file.el (image-file-name-extensions)
	(image-file-name-regexps): Add autoload cookies.

2000-10-13  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system): If FROM
	is string, show it in *Warning* buffer.

2000-10-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (normal-top-level): Use display-popup-menus-p instead
	of window-system.
	(command-line): Use display-graphic-p instead of window-system.
	(command-line-1): Use display-popup-menus-p and display-mouse-p
	instead of window-system.

2000-10-12  Sam Steingold  <sds@gnu.org>

	* tooltip.el (tooltip-use-echo-area): New user variable.
	(tooltip-show): Use it to choose between `x-show-tip' and `message'.

2000-10-12  Dave Love  <fx@gnu.org>

	* recentf.el: Maintainer's checkdoc fixes.

	* startup.el (normal-top-level-add-subdirs-to-load-path):
	Use character class, not ASCII when matching file names.
	(fancy-splash-head): Add trailing slash to URL.
	(command-line): Don't require XPM support for toolbar.

	* progmodes/cperl-mode.el (cperl-tips-faces): Doc fix.
	(cperl-invalid-face): Revert last change.
	(cperl-init-faces): Quote cperl-invalid-face.

2000-10-12  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (fancy-splash-text): Remove superfluous quote.

2000-10-12  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-screens): Don't add a pre-command hook.
	(fancy-splash-pre-command, fancy-splash-pending-command): Removed.
	(command-line-1): Don't use fancy-splash-pending-command.
	(fancy-splash-screens-1): Goto point-min after inserting text.

	* calendar/diary-lib.el (diary-cyclic): Doc fix from Ed Reingold.

	* progmodes/scheme.el (scheme-mode-map): Use lisp-mode-shared-map
	instead of shared-lisp-mode-map.

2000-10-12  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (header-line): Change tty-variant to use underlining.

	* isearch.el (isearch-set-lazy-highlight-faces-at): New function.
	(isearch-highlight): Restore lazy-isearch face properties at old
	position, and suppress them at new position.
	(isearch-dehighlight): Restore lazy-isearch face properties.
	(isearch-lazy-highlight-update): Add lazy-isearch overlays even
	over the real isearch overlay, but in that case, don't give it a
	face property.  Use `push'.

2000-10-12  Kenichi Handa  <handa@etl.go.jp>

	* man.el (Man-getpage-in-background): Fix previous change.
	Decode the process output only when we are in multibyte mode.

2000-10-11  Dave Love  <fx@gnu.org>

	* info.el (Info-mode-menu): Fix some help.
	(info-tool-bar-map): Add entry for Info-last.

	* toolbar/cancel.xpm, toolbar/jump_to.xpm, toolbar/right_arrow.xpm:
	* toolbar/close.xpm, toolbar/left_arrow.xpm, toolbar/save.xpm:
	* toolbar/copy.xpm, toolbar/mail.xpm, toolbar/saveas.xpm:
	* toolbar/cut.xpm, toolbar/mail_compose.xpm:
	* toolbar/search-replace.xpm, toolbar/exit.xpm:
	* toolbar/mail_send.xpm, toolbar/search.xpm, toolbar/fld_open.xpm:
	* toolbar/new.xpm, toolbar/spell.xpm, toolbar/help.xpm:
	* toolbar/open.xpm, toolbar/undo.xpm, toolbar/home.xpm:
	* toolbar/paste.xpm, toolbar/up_arrow.xpm, toolbar/index.xpm:
	* toolbar/preferences.xpm, toolbar/info.xpm, toolbar/print.xpm:
	Reduce color requirements to 25 overall.  (Probably wants
	revisiting from the originals to reduce further.)

2000-10-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* hexl.el (hexlify-buffer): Bind coding-system-for-write to
	buffer-file-coding-system, instead of raw-text.
	(dehexlify-buffer): Bind coding-system-for-read to
	buffer-file-coding-system, instead of raw-text.

2000-10-11  Sam Steingold  <sds@gnu.org>

	* progmodes/cperl-mode.el (cperl-invalid-face): Double-quote
	`underline' - fixes the bug introduced on 2000-09-21.

2000-10-11  Dave Love  <fx@gnu.org>

	* progmodes/scheme.el (scheme-mode-variables, dsssl-mode):
	Avoid compiler warnings.
	(scheme-mode): Doc fix.
	(scheme-font-lock-keywords-1): Match `define-syntax'.

2000-10-11  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (frame-set-background-mode): Pay attention to saved
	face specs as well as default ones.  Only do anything if the
	bg-mode or display-type has actually changed.  Use `dolist'.
	(region): Make dark-background `region' face less in-your-face.

2000-10-10  Sam Steingold  <sds@gnu.org>

	* chistory.el, ielm.el, ledit.el:
	* progmodes/inf-lisp.el, progmodes/scheme.el:
	Use `lisp-mode-shared-map' instead of `shared-lisp-mode-map'.

2000-10-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el: Update copyright and fix typo.

	* desktop.el (desktop-modes-not-to-save): New var.
	(desktop-save-buffer-p): Use it.
	Also, obey desktop-buffers-not-to-save even for non-file buffers.
	(desktop-buffer-file): Use pop-to-buffer if switch-to-buffer fails.

2000-10-10  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-add-item)
	(tool-bar-add-item-from-menu): Don't favor XPM icons on mono display.

	* toolbar/attach.pbm, toolbar/cancel.pbm, toolbar/close.pbm:
	* toolbar/copy.pbm, toolbar/cut.pbm, toolbar/exit.pbm:
	* toolbar/fld_open.pbm, toolbar/help.pbm, toolbar/home.pbm:
	* toolbar/index.pbm, toolbar/info.pbm, toolbar/jump_to.pbm:
	* toolbar/left_arrow.pbm, toolbar/mail.pbm, toolbar/mail_compose.pbm:
	* toolbar/mail_send.pbm, toolbar/new.pbm, toolbar/open.pbm:
	* toolbar/paste.pbm, toolbar/preferences.pbm, toolbar/print.pbm:
	* toolbar/right_arrow.pbm, toolbar/save.pbm, toolbar/saveas.pbm:
	* toolbar/search-replace.pbm, toolbar/search.pbm, toolbar/spell.pbm:
	* toolbar/undo.pbm, toolbar/up_arrow.pbm: New files straight from
	the .xpms; probably need retouching.

2000-10-10  Miles Bader  <miles@lsi.nec.co.jp>

	* subr.el (add-to-list): Add optional argument APPEND.
	* battery.el (display-battery): Use `add-to-list'.

2000-10-09  Thien-Thi Nguyen  <ttn@gnu.org>

	* play/zone.el (zone-timer, zone-wc-tbl): Rework these vars as symbol
	properties.
	(zone, zone-when-idle, zone-leave-me-alone)
	(zone-pgm-whack-chars): Use new symbol properties.

	* battery.el (display-battery): Doc spelling fix.

	* vc.el (with-vc-file, edit-vc-file): Specify `indent-function'
	property.

2000-10-09  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-mode): Check whether tool-bar-map
	has been initialized before calling tool-bar-setup.
	(tool-bar-add-item-from-menu): Add autoload cookie.

2000-10-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (send-mail-item-name): New function.
	(menu-bar-tools-menu) <compose-mail>: Use it to display the value
	of mail-user-agent in the menu.  Don't display the "Send Mail"
	item if mail-user-agent is nil or its value is ignore.
	(menu-bar-tools-menu) <rmail>: Don't display the "Read Mail" item
	if read-mail-command is nil or its value is ignore.

	* mouse.el ([header-line mouse-1]): Bind to mouse-select-window.

2000-10-09  Miles Bader  <miles@gnu.org>

	* toolbar/up_arrow.xpm: Flip to put highlight in correct place.
	Correct image size.
	* toolbar/left_arrow.xpm: Correct image size.

	* jka-compr.el: Don't call `jka-compr-install' when loading (it
	will be done by the definition of `auto-compression-mode' if
	necessary.  Move code to uninstall existing file-name handler
	before definition of `auto-compression-mode'.

	* image-file.el (auto-image-file-mode): Move to the end of the
	file, because `define-minor-mode' actually calls the mode-function
	if the associated variable is non-nil, which requires that all
	needed functions be already defined.

	* mouse.el (popup-menu): Balance parens.

2000-10-08  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (popup-menu): Move the command call outside the loop
	so that popup-menu returns whatever the command returns.

	* progmodes/etags.el: Docstring fixes.  Maintainer line updated.
	(initialize-new-tags-table): Use run-hook-with-args-until-success.
	(find-tag): Use pop-to-buffer if switch-to-buffer failed.
	(tags-table-format-functions): Renamed from tags-table-format-hooks.

	* vc.el (vc-version-diff): diff-switches can be a list.
	Use relative filenames for prettier output.

	* pcvs.el (cvs-append-to-ignore, cvs-vc-command-advice)
	(vc-post-command-functions): Remove old-VC compatibility code.

	* newcomment.el (comment-indent-default): Autoload.

	* font-lock.el (font-lock-defaults): Make buffer-local.
	(font-lock-turn-on-thing-lock): Use jit-lock-refontify.
	(font-lock-choose-keywords):
	Ignore LEVEL unless KEYWORDS is a list of syms.
	(c-keywords, c++-keywords, objc-keywords, java-keywords):
	Don't wrap regexp-opt things in \(...\) unnecessarily.

	* jit-lock.el: Don't require font-lock any more.
	(jit-lock-functions): Make buffer-local.
	(jit-lock-saved-fontify-buffer-function): Remove.
	(jit-lock-mode): Remove autoload cookie.
	Remove font-lock specific code.
	(jit-lock-unregister): Don't bother handling complex hooks any more.
	(jit-lock-refontify): New function.
	(jit-lock-fontify-buffer): Use it.
	(jit-lock-function-1): Replaced by jit-lock-fontify-now.
	(jit-lock-fontify-now): Renamed from jit-lock-function-1.
	Add optional args START and END.
	Never call font-lock-fontify-region directly.
	(jit-lock-function, jit-lock-stealth-fontify): Use it.

	* emacs-lisp/regexp-opt.el (regexp-opt): Add \<...\> if PAREN=`words'.

2000-10-08  Dave Love  <fx@gnu.org>

	* progmodes/ada-mode.el (ada-mode-menu): Add name to menu map.

	* progmodes/icon.el (icon-mode-map): Add name to menu-bar keymap.

	* play/studly.el (studlify-region, studlify-word): Add autoload
	cookie.

	* play/morse.el (morse-region, unmorse-region): Add autoload
	cookie.

	* play/spook.el (spook-phrases-file): Use expand-file-name, not
	concat.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression): Don't
	insist on symbols starting with word syntax.
	(lisp-mode-shared-map): Renamed from shared-lisp-mode-map.
	(eval-defun-1): Doc fix.
	(indent-sexp): Use nconc to build up indent-stack.

	* mail/sendmail.el: Byte-compile-dynamic since it gets loaded by
	Gnus with little use.
	(mail-setup-hook): Add mail-abbrevs-setup to options.

	* recentf.el: Doc fixes.

	* vcursor.el (vcursor-cs-binding): Remove compatibility code.
	Clean up remainder.

	* timezone.el (timezone-parse-date): Doc fix.  Fix regexps for (5)
	without timezone and (8) with timezone to enforce some whitespace.
	Simplify code somewhat.

	* options.el (list-options): Doc that you should use customize.

	* iswitchb.el (iswitchb-mode): Add :require.

	* info.el (Info-goto-node, Info-menu): Doc fix.
	(Info-mode-menu): Bind beginning-of-buffer, Info-edit.
	(info-tool-bar-map): New variable.
	(Info-mode): Use it.
	(Info-edit-map): Define all in defvar.
	(speedbar-attached-frame): Avoid compiler warning.

	* toolbar/tool-bar.el (tool-bar-map): Define it empty.
	(global-map): Bind [tool-bar] to a filtered map.
	(tool-bar-add-item): Remove MAP arg.  Allow PBM icons.
	(tool-bar-add-item-from-menu): Use tool-bar-map, not tb-map.
	Allow PBM icons.
	(tool-bar-setup): Adjust calls of tool-bar-add-item.

	* toolbar/index.xpm, toolbar/jump_to.xpm, toolbar/attach.xpm:
	* toolbar/up_arrow.xpm, toolbar/left_arrow.xpm, toolbar/home.xpm:
	* toolbar/right_arrow.xpm: New files.  Renamed from tigert's
	icons, except up_arrow, which is left-arrow rotated.

	* imenu.el (imenu-add-to-menubar): Fix last change.

2000-10-08  Peter Breton  <pbreton@ne.mediaone.net>

	* generic-x.el (rul-generic-mode): Remove eval-when-compile
	statements. Suggested by Stefan Monnier  <monnier@cs.yale.edu>.

2000-10-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info): Fix
	typos in doc strings.

	* font-lock.el (font-lock-mode, global-font-lock-mode): Mention in
	the doc strings how to customize Font Lock faces.

	* mouse.el (mouse-drag-mode-line-1): Fix an off-by-one error in
	computing growth when dragging the header line.

2000-10-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (kill-line): Doc fix.

2000-10-08  Miles Bader  <miles@gnu.org>

	* faces.el (secondary-selection): Make foreground visible on tty.

	* jka-compr.el (auto-compression-mode): Move to the end of the
	file, because `define-minor-mode' actually calls the mode-function
	if the associated variable is non-nil, which requires that all
	needed functions be already defined.
	(with-auto-compression-mode): Add autoload cookie.

2000-10-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (find-backup-file-name) [ms-dos]: If support for long
	file names is not available, behave as if version-control were set
	to never.

2000-10-07  Dave Love  <fx@gnu.org>

	* net/browse-url.el (browse-url-gnome-moz-arguments): New option.
	(browse-url-gnome-moz): New function.
	(browse-url-browser-function): Use it.
	Suggested by Colin Walters <walters@cis.ohio-state.edu>.

2000-10-07  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (tab-always-indent): New var.
	(indent-for-tab-command): Use it.

	* files.el (set-auto-mode): Ignore unknown -*- mode -*- rather than
	raise an error.  This way it can still default to a sane value.

2000-10-06  Stefan Monnier  <monnier@cs.yale.edu>

	* startup.el (fancy-splash-screens): Use local rather than global map.
	Don't use `update-menu-bindings' any more.
	Get rid of assumptions about keymap representation.

2000-10-06  Dave Love  <fx@gnu.org>

	* textmodes/fill.el (sentence-end-double-space)
	(sentence-end-without-period): Doc fix.
	(adaptive-fill-regexp): Purecopy.
	(unjustify-current-line): Use line-end-position.
	(fill-individual-paragraphs-prefix): Use line-beginning-position.

	* net/eudc-vars.el (eudc): Add :version, :link.

	* international/mule-conf.el (file-coding-system-alist): Use \', not $.

	* emacs-lisp/find-func.el (find-function-regexp): Remove spurion.
	Fix for define-minor-mode.
	(function-at-point): Alias to function-called-at-point.

	* custom.el (custom-declare-variable, custom-set-variables): Use mapc.

	* simple.el (backward-word): Doc fix.

	* image-file.el (image-file-name-regexp): image-file-regexps ->
	image-file-name-regexps.
	(image-file-name-extensions): Add pbm.

2000-10-06  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-diff): Setup the buffer's default-directory
	and add filename to the names so that diff-mode can jump to source.

	* font-lock.el (font-lock-defaults-alist): Remove the TeX entries.
	(tex-font-lock-keywords, tex-font-lock-keywords-2)
	(tex-font-lock-keywords-1): Remove.
	(font-lock-turn-on-thing-lock): Use jit-lock-register.
	(font-lock-turn-off-thing-lock): Use jit-lock-unregister.
	(font-lock-default-fontify-region):
	Expand beg..end correctly when just following a multiline region.
	(font-lock-fontify-anchored-keywords):
	Include the anchor text as part of the multiline.

2000-10-06  Gerd Moellmann  <gerd@gnu.org>

	* loadup.el (toplevel): Load `loaddefs' before `help' because the
	latter needs the autoloaded define-minor-mode macro during the
	bootstrap.

	* startup.el (command-line): For now, activate tool-bar-mode only
	if XPM images are supported.

	* mouse.el (mouse-drag-header-line): Don't allow resizing a
	window by dragging a header-line at the top of the frame; that's
	confusing because the header-line doesn't move.
	(mouse-drag-mode-line-1): Use event-* and posn-* functions instead
	of treating the event as a list.  Some cleanup.

2000-10-06  Miles Bader  <miles@gnu.org>

	* simple.el (display-message-or-buffer): New function.
	(shell-command-on-region): Use `display-message-or-buffer'.

	* emacs-lisp/easy-mmode.el (define-derived-mode): Tweak generated
	docstring parts.

	* net/net-utils.el (nslookup-prompt-regexp, ftp-prompt-regexp)
	(smbclient-prompt-regexp): Add usage note to doc string.
	(ftp-font-lock-keywords, smbclient-font-lock-keywords): Removed.
	(ftp-mode, smbclient-mode): Don't set `font-lock-defaults'.
	Use add-hook for adding the comint filter function, and only do so
	if it's not already in the global hook list.
	(ftp-mode, smbclient-mode, nslookup-mode): Remove redundant calls
	to `make-local-variable'.
	(nslookup-font-lock-keywords): Remove prompt entry.
	(nslookup): Don't set the process-filter.
	(finger): Exit the loop correctly when the regexps list runs out.
	(ftp, smbclient, smbclient-list-shares):
	Set the real major mode immediately, not after execing.
	Use `pop-to-buffer' instead of `switch-to-buffer-other-window'.

	* comint.el (comint-watch-for-password-prompt): Use STRING as a prompt.

2000-10-05  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/compile.el (compile-collect-regexps): Use dolist and push.

	* which-func.el (which-func-format): Remove spurious space.
	(which-func-mode): Don't make it permanent-local.
	(which-func-ff-hook): Allow which-func-maxout to be nil.
	(which-func-update): Simplify a bit.  Only run if which-func-mode is t.
	(which-func-mode): Simplify.
	Use post-command-idle-hook rather than post-command-hook.
	Go through all buffers and update their state.
	(which-function): Also try add-log-current-defun-function.

	* vc.el (with-vc-properties): Use conses rather than length-2 lists.
	(vc-checkout, vc-finish-steal, vc-checkin, vc-revert-file):
	Update call to with-vc-properties accordingly.
	(vc-comment-search-reverse, vc-comment-search-forward): Docstring fix.
	(vc-revert-buffer): More careful about window selection and deletion.
	(vc-switch-backend): Slight reorg to avoid calling `registered' twice.

	* pcvs.el (cvs-ediff-exit-hook): Expect delete-window to fail.
	(cvs-retrieve-revision): Reuse a pre-existing buffer.
	(cvs-dired-action): Change the default to quickdir.

	* newcomment.el (comment-indent): Delegate to indent-according-to-mode
	if comment-indent-function returns nil.
	(comment-indent-default): New function.
	(comment-indent-function): Use it and document the new semantics.

	* image-file.el: Docstring fixes.

	* help.el (help-xref-on-pp): Use match-string.
	(describe-variable): New arg BUFFER.
	Store the current buffer in the help-xref-stack.
	(temp-buffer-resize-mode): Use define-minor-mode.

	* jit-lock.el (jit-lock-mode): Use jit-lock-defer-contextually
	consistently with its docstring.
	Set jit-lock-first-unfontify-pos in an idempotent way.
	(jit-lock-register): Autoload and add arg CONTEXTUAL.

2000-10-05  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-mysql-options): New variable.
	(sql-mysql): Use it.

2000-10-05  Miles Bader  <miles@lsi.nec.co.jp>

	* image.el (image): New group.

	* smerge-mode.el (smerge-mine-face, smerge-other-face)
	(smerge-base-face, smerge-markers-face): Add dark-background variants.

2000-10-04  Peter Breton  <pbreton@ne.mediaone.net>

	* net/net-utils.el (nslookup-font-lock-keywords)
	(ftp-font-lock-keywords, smbclient-font-lock-keywords):
	Ignore the value of window-system; always define keywords.

2000-10-05  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (fancy-splash-screens): Remove the code for
	debugging; `(trace-to-stderr "EXITTT\n")'.

2000-10-05  Miles Bader  <miles@gnu.org>

	* diff-mode.el (diff-goto-source): Update call to
	`diff-hunk-status-msg' to reflect new REV variable.

2000-10-04  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/icon.el (icon-mode):
	Don't gratuitously override the default for comment-column.

	* vc-hooks.el (vc-mode-line): Fix interactive spec.

	* jit-lock.el (with-buffer-unmodified): Use unwind-protect.
	(jit-lock-mode): Make sure font-lock-keywords-only is bound before use.
	(jit-lock-functions): New var.
	(jit-lock-function-1): Use it if non-nil.
	Don't switch the syntax-table.  Don't set parse-sexp-lookup-properties.
	Set the `fontified' property before doing the fontification to avoid
	repeatedly going through the same error.
	Don't turn errors into messages.
	(jit-lock-register, jit-lock-unregister): New functions.

	* dired.el (dired-mark-pop-up): Turn comment into docstring.
	Use with-current-buffer.

	* dired-aux.el (dired-do-create-files, dired-kill-tree):
	Turn comment into docstring.

	* apropos.el (apropos-mode): Use define-derived-mode.

2000-10-04  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-pending-command): New variable.
	(fancy-splash-pre-command): New function.
	(fancy-splash-screens): Rewritten.
	(command-line-1): If fancy-splash-pending-command is set, call it
	interactively.

2000-10-04  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-setup): New function.
	(tool-bar-mode): Use it.

	* subr.el (substitute-key-definition): Doc fix.
	(play-sound-file): New command.

2000-10-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-before-save, vc-default-make-version-backups,
	vc-version-backup-file-name): New functions.

	* files.el (basic-save-buffer): Call vc-before-save before saving.

	* vc-cvs.el (vc-cvs-make-version-backups): Return t if
	vc-cvs-stay-local-p.

	* vc.el (vc-revert-buffer): Handle empty diff properly.
	(vc-version-backup-file): New function.
	(vc-checkout): Create a version backup if necessary.
	(vc-checkin): If a version backup file exists, delete it.
	(vc-version-diff): Diff locally using version backups, if available.
	(vc-revert-file): If there's a version backup, revert locally.
	(vc-transfer-file): Use version backup for base version, if
	available.  If not, ask for confirmation whether to get it from the
	server.  Update mode line before check-in.

2000-10-04  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el (tool-bar-setup): New function.
	(tool-bar-mode): Use it.

2000-10-04  Peter Breton  <pbreton@ne.mediaone.net>

	* net/net-utils.el (nslookup-font-lock-keywords)
	(ftp-font-lock-keywords, smbclient-font-lock-keywords):
	Only set if window-system is non-nil.
	(net-utils-run-program): Returns buffer.
	(network-connection-reconnect): Added this function.

	* generic.el:
	Incorporates extensive cleanup and docfixes by
	Stefan Monnier (monnier+gnu/emacs@flint.cs.yale.edu).
	Uses cl compile-time macros.
	(generic-mode-name, generic-comment-list)
	(generic-keywords-list, generic-font-lock-expressions)
	(generic-mode-function-list, generic-mode-syntax-table):
	Removed variables.
	(generic-mode-alist): Renamed to generic-mode-list.
	(generic-find-file-regexp): Default changed to "^#".
	(generic-read-type): Uses completing read on generic-mode-list.
	(generic-mode-sanity-check): Removed this function.
	(generic-add-to-auto-mode): Removed this function.
	(generic-mode-internal): Bind mode-specific definitions
	into function instead of putting them in alist.
	(generic-mode-set-comments): Reworked extensively.
	(generic-mode-find-file-hook): Simplified regexp searching.
	(generic-make-keywords-list): Omit extra pair of parens.

	* find-lisp.el (find-lisp-find-files-internal):
	Make sure directory name ends with "/".

	* generic-x.el (apache-conf-generic-mode):
	Regexp now allows leading whitespace.
	(rc-generic-mode): Added eval-when-compile
	around generic-make-keywords-list.
	Deleted duplicate regexp.
	(rul-generic-mode): Added eval-when-compile
	around generic-make-keywords-list.
	(etc-fstab-generic-mode): New generic mode.
	(rul-generic-mode): Removed one eval-when-compile
	which caused a max-specpdl-size exceeded error.

2000-10-04  Miles Bader  <miles@gnu.org>

	* simple.el (minibuffer-temporary-goal-position): New variable.
	(next-history-element): Try to keep the position of point in the
	input string constant.

	* dired-aux.el (dired-mark-read-file-name): Add optional arg DEFAULT.
	(dired-do-create-files): If there's only one file, pass it in as
	the DEFAULT arg to dired-mark-read-file-name.

2000-10-03  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-font-lock-keywords): Minor regex fix.
	(diff-goto-source): Be smarter when choosing REVERSE or not.

	* textmodes/texinfo.el (texinfo-heading-face): Forgot the var def.
	(texinfo-mode-menu): Add an explicit shortcut for update all.

2000-10-03  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-transfer-file, vc-default-receive-file): Rewritten to
	factorize backend-specific code cleanly (this was essentially
	conceived by Stefan Monnier).
	(vc-unregister): Function removed.
	(vc-revert-file): New function.
	(vc-revert-buffer): Delegate some of the work to it.

	* vc-rcs.el (vc-rcs-fetch-master-state): Parse and remember
	default branch unconditionally.
	(vc-rcs-set-default-branch): New function.
	(vc-rcs-cancel-version, vc-rcs-checkin, vc-rcs-checkout): Use it.
	(vc-rcs-checkin): If an appropriate default branch has been set,
	force creation of that branch.
	(vc-rcs-receive-file): Rewritten to contain only backend-specific
	code (as suggested by Stefan Monnier).

2000-10-02  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-lazy-highlight-update): Don't put a lazy
	highlighting overlay with a different face over the overlay
	isearch uses to highlight the current match because that can lead
	to bad face combinations.

	* loadup.el (toplevel): Load faces before isearch.

	* isearch.el (isearch-faces): New custom group.
	(isearch): New defface; was already tested for in the code.
	(isearch-lazy-highlight-face): Changed to defface from defcustom.
	(isearch-highlight): Always use face `isearch'.

2000-10-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/byte-opt.el (byte-optimize-lapcode): Don't bind
	unused vars.  Treat byte-constant2 like byte-constant.  Fix bogus
	comparison of opcode with operand.

2000-10-03  Miles Bader  <miles@gnu.org>

	* play/yow.el (yow): Don't display multi-line quotations in a *Help*
	buffer, since the echo area will now grow to accommodate them.

2000-10-02  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-registered): If FILE used to be registered under
	a certain backend, try that one first.

	* vc.el (vc-responsible-backend): Undo the previous change in the
	argument list.  Handle multiple backends correctly.
	(vc-find-new-backend): Function removed.
	(vc-register): Use vc-responsible-backend, as before.
	(vc-next-action-on-file): Do use vc-registered, not vc-backend.

2000-10-02  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-head): Change message below the
	logo.

2000-10-02  Miles Bader  <miles@lsi.nec.co.jp>

	* diff-mode.el (diff-goto-source): Emit a status message.
	(diff-test-hunk, diff-apply-hunk): Remove unneeded `let'.
	(diff-test-hunk): Fix doc string.
	(diff-apply-hunk): Only advance if `diff-advance-after-apply-hunk'.
	(diff-advance-after-apply-hunk): New variable.
	(diff-apply-hunk): Don't return a value.

2000-10-01  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-editable-p): Minor optimization.
	(edit-vc-file, vc-next-action-on-file): Don't use find-file.
	(vc-find-new-backend): New function split from vc-responsible-backend.
	(vc-register): Use it.
	(vc-responsible-backend): Remove REGISTER arg and add BACKENDS arg.
	(vc-unregister): Drop BACKEND arg (it doesn't work anyway).
	(vc-default-unregister, vc-revert-buffer): Docstring fix.
	(vc-clear-headers): Don't use find-file.
	(vc-revert-buffer): Use `and' again (must have been a braino).
	(vc-switch-backend): Only prompt if requested.
	Short circuit if nothing is to be done.
	Don't use vc-resynch-buffer which could lose unsaved editing.
	(vc-default-receive-file): Update call to vc-unregister.
	(with-vc-file, vc-next-action-on-file):
	Use vc-backend rather than vc-registered.
	(vc-next-action-on-file): Use intern-soft.
	Deal with read-only *vc-diff* buffer.
	(vc-transfer-file): Docstring fix.

	* vc-rcs.el (vc-rcs-unregister): Keep a backup of the master file.
	(vc-rcs-receive-file): Avoid with-vc-properties.
	Update call to vc-unregister.
	Use constant `RCS' rather than (dynamically bound) var `backend'.

2000-10-01  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Update mode line only if file
	is visited.
	(vc-start-entry): New argument initial-contents.  Don't visit the file
	if it isn't already visited.  Brought documentation up-to-date.
	(vc-next-action, vc-register): Updated calls to vc-start-entry.
	(vc-checkin): New optional arg initial-contents, which is passed to
	vc-start-entry.
	(vc-finish-logentry): Make sure to bury log buffer only if there
	really is one.  Call `vc-resynch-buffer' on log-file, not
	buffer-file-name.
	(vc-default-comment-history, vc-default-wash-log): New functions.
	(vc-index-of): Removed.
	(vc-transfer-file): Make do without the above.
	(vc-default-receive-file): Call comment-history unconditionally.  Pass
	the resulting string to vc-checkin, instead of inserting it into the
	comment ring.

	* vc-rcs.el (vc-rcs-receive-file): Call comment-history
	unconditionally.  Use the comments as initial contents of the log
	entry buffer.  Document the trick to force branch creation with no
	changes.

2000-10-01  Miles Bader  <miles@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation): Call
	`recenter' with an arg to prevent redrawing the display.

2000-09-30  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-pretty-mode-name): Prettier.

	* emacs-lisp/lisp.el (lisp-complete-symbol): Only jump 2 not 3 levels.

	* progmodes/c-mode.el (c-mode):
	Don't gratuitously override the default for comment-column.

	* textmodes/tex-mode.el (latex-metasection-list): New var.
	(latex-imenu-create-index): Use it.
	Move the regexp construction outside loops (and use push).
	(tex-font-lock-keywords-1, tex-font-lock-keywords-2)
	(tex-font-lock-keywords): Moved from font-lock.el.
	(tex-comment-indent): Remove.
	(tex-common-initialization): Don't set comment-indent-function.
	(latex-block-default): New var.
	(tex-latex-block): Use it to provide a default choice.
	Add any unknown choice to latex-block-names.
	Insert [...] after {...}.
	(tex-last-unended-begin): Simplify regexp.
	(tex-goto-last-unclosed-latex-block, latex-backward-sexp-1)
	(latex-forward-sexp-1, latex-forward-sexp): New functions.
	(latex-mode): Set forward-sexp-function.

	* textmodes/texinfo.el (texinfo-font-lock-syntactic-keywords):
	Add regexp for @ignore ... @end ignore.
	(texinfo-heading-face): New face.
	(texinfo-font-lock-keywords): Use it.
	(texinfo-mode-menu): New menu.
	(texinfo-inside-macro-p, texinfo-inside-env-p, texinfo-insert-quote):
	New functions.
	(texinfo-mode-map): Bind " to insert-quote and M-RET to insert-@item.
	(texinfo-section-types-regexp, texinfo-section-level-regexp)
	(texinfo-subsection-level-regexp, texinfo-subsubsection-level-regexp):
	Remove declaration.
	(texinfo-show-structure): Use outline-regexp and texinfo-section-list.

	* delsel.el (delete-selection-mode): Use define-minor-mode.

	* emacs-lisp/regexp-opt.el (regexp-opt-group): Put more parenthesis.

2000-09-29  Stefan Monnier  <monnier@cs.yale.edu>

	* dired.el (dired-map-over-marks): Use modern backquotes and docstring.

2000-09-30  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (keep-lines-read-args): New function.
	(keep-lines, flush-lines, how-many): Use keep-lines-read-args to
	read arguments interactively.  Add parameters RSTART and REND.
	Operate on the active region in Transient Mark mode.

	* files.el (auto-mode-alist): Add pattern for `#*mail*...'.

	* emacs-lisp/authors.el (authors-obsolete-file-p): New function.
	(authors-obsolete-files-regexps): New variable.
	(authors-add): Don't record changes in obsolete files.

2000-09-29  Stefan Monnier  <monnier@cs.yale.edu>

	* autoinsert.el (auto-insert-mode): Use define-minor-mode.

	* newcomment.el (comment-indent-function): Use 0 for ;;; and %%%.
	(comment-indent): Make sure there's a space between code and comment.
	Shift comments left to avoid going past fill-column.

2000-09-29  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (startup-echo-area-message): New function.
	(display-startup-echo-area-message): Use it.
	(fancy-splash-screens): Rewritten to use keymaps and a timer.
	(fancy-splash-default-action): New function.
	(fancy-splash-screens-1): New function.
	(fancy-splash-head): Put a help-echo and a keymap under the image.

2000-09-29  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-add-log-file-name): Remove.
	(diff-mode): Use add-log-buffer-file-name-function.

	* add-log.el (find-change-log): New arg BUFFER-FILE.
	(add-log-file-name): Obey add-log-file-name-function.
	(add-log-buffer-file-name-function): New var.
	(add-change-log-entry): Use it.

2000-09-29  Miles Bader  <miles@gnu.org>

	* image-file.el (image-file-name-extensions): New variable.
	(image-file-name-regexps): Renamed from `image-file-regexps'.
	New default value is nil.  Call `auto-image-file-mode'.
	(image-file-name-regexp): New function.
	(auto-image-file-mode): New minor mode.
	(insert-image-file): Don't make conditional on the image-file
	handler being enabled.
	(image-file-handler): Make the call here conditional instead.
	(set-image-file-handler-enabled, enable-image-file-handler)
	(disable-image-file-handler): Functions removed.

	* emacs-lisp/authors.el (authors-print): Rephrase many-files
	string.

2000-09-29  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/tex-mode.el (latex-outline-regexp): Don't use `list*';
	it's a function from CL.
	(latex-imenu-create-index): Replace eval-when-compile with progn
	because latex-section-alist is not bound while compiling.

2000-09-28  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-minor-mode): Use define-minor-mode.
	(outline-mode): Use define-derived-mode.

	* progmodes/perl-mode.el (perl-mode):
	* progmodes/awk-mode.el (awk-mode):
	* progmodes/asm-mode.el (asm-mode):
	Don't gratuitously override the default for comment-column.

	* emacs-lisp/lisp.el (lisp-complete-symbol):
	Distinguish the let-binding case from the funcall case.
	(forward-sexp-function): New variable.
	(forward-sexp): Use it.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-keymap): Autoload.
	(easy-mmode-defmap): Remove the now useless autoload.

	* time.el (display-time-mode): Use define-minor-mode.

	* subr.el (add-minor-mode): Don't eval NAME.
	Don't depend on the presence of TOGGLE-FUN for any special behavior.
	Use if rather than cond.

	* simple.el (read-expression-map): Define more properly.
	(comment-indent-hook): Remove.
	(string-to-syntax): Bug fix.

	* pcvs.el (cvs-ediff-exit-hook): Kill buffer before window.
	(cvs-ediff-diff): Fix typo.
	(cvs-revert-if-needed): Don't bother preserving read-only.

	* paren.el (show-paren-mode): Use define-minor-mode.

	* jka-compr.el (auto-compression-mode): Use define-minor-mode.
	(toggle-auto-compression): Remove.
	(jka-compr-build-file-regexp): Remove useless grouping.

	* diff-mode.el (diff-mode-map, diff-minor-mode-prefix):
	Avoid user-reserved bindings.
	(diff-mode, diff-minor-mode): Drop make-local-hook (done by add-hook).
	(diff-header-face): Revert to grey85.

	* cvs-status.el (cvs-status-entry-leader-re): Minor fix.

	* complete.el (partial-completion-mode) <defcustom>: Remove.
	(partial-completion-mode): Use define-minor-mode.
	(PC-do-completion): Understand `completion-auto-help = delay'
	to mean to popup the completion buffer only the second time.
	(PC-include-file-all-completions, PC-include-file-all-completions)
	(PC-include-file-all-completions): Don't quote lambda.

	* comint.el (comint-mode-hook): Docstring fix.
	(comint-mode): Use define-derived-mode.
	(comint-mode-map): Remove obsolete comment.
	(make-comint): Minor stylistic change.
	(comint-insert-clicked-input): Be more careful to find the overlay.
	Use this-command-keys rather than hardcoding mouse-2.

	* font-lock.el: Replace confusing (,@ with ,.
	(tex-font-lock-keywords-1, tex-font-lock-keywords-2):
	Don't use regexp-opt-depth.  Spice up the regexp for args.
	Don't distinguish between cmds that can take an opt arg or not.
	Use `append' and `prepend' rather than `keep'.

	* textmodes/tex-mode.el (latex-imenu-indent-string): Add a space.
	(latex-outline-regexp): New var.
	(latex-outline-level): New fun.
	(latex-section-alist): New var.
	(latex-imenu-create-index): Use it.  Use `push' as well.
	(tex-shell-map): Initialize it properly.
	(tex-mode): Minor stylistic change.
	(plain-tex-mode): Use define-derived-mode.
	(latex-mode): Use define-derived-mode.
	Construct the paragraph regexps in a more readable way.
	Set the buffer-local outline-{level,regexp} vars.
	(slitex-mode): Derive from latex-mode.
	(tex-common-initialization): Don't kill-all-vars anymore.
	Add setting for comment-add and font-lock-defaults.
	(tex-start-shell): Use with-current-buffer and don't re-init keymap.
	(tex-main-file): New fun.  Obey TeX-master as well and remove `.tex'.
	(tex-start-tex): New arg DIR (and send a chdir command for it).
	Also display the shell buffer and save it in tex-last-buffer-texed.
	(tex-region): Use expand-file-name rather than concat.
	Remove code made useless by changes in tex-start-tex.
	(tex-file): Use tex-main-file and adapt to new tex-start-tex.

	* map-ynp.el (map-y-or-n-p): Fix missing backquotes.

2000-09-28  Dave Love  <fx@gnu.org>

	* eshell/eshell.el (eshell) <defgroup>: Add :version.

2000-09-28  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el (authors-add): Use `nconc' instead of
	`append'.

2000-09-28  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-extract-pointer): Undo last change.
	Instead, fix the position of the `bound' arg to re-search-backward.

2000-09-27  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-extract-pointer):
	Widen more carefully, to avoid finding pointers in other nodes.
	(Info-index): Use push.

2000-09-27  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (set-frame-font): Remove call to obsolete function
	frame-update-faces.
	(set-foreground-color, set-background-color): Likewise for
	frame-update-face-colors.

2000-09-27  Miles Bader  <miles@gnu.org>

	* image-file.el: New file.

2000-09-27  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (frame-notice-user-settings): Don't call
	frame-update-faces, which is a no-op now.

	* ediff-wind.el (ediff-control-frame-parameters): Add zero
	tool-bar-lines.

2000-09-27  Dave Love  <fx@gnu.org>

	* mouse.el: Fix last change.

2000-09-27  Miles Bader  <miles@lsi.nec.co.jp>

	* toolbar/tool-bar.el (tool-bar-help): Use `mouse-pixel-position'.

2000-09-22  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-help): The output message is
	improved.

2000-09-26  Dave Love  <fx@gnu.org>

	* mouse.el (popup-menu): If POSITION is nil, set it using
	mouse-position.

2000-09-25  Sam Steingold  <sds@gnu.org>

	* net/browse-url.el (browse-url-file-url): Check for null maps.

2000-09-26  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (frame-notice-user-settings): Don't add a
	tool-bar-lines frame parameter to default-frame-alist in batch mode.

	* frame.el (frame-notice-user-settings):
	Make tool-bar-mode and default-frame-alist consistent.

	* toolbar/tool-bar.el (tool-bar-help): New function.

2000-09-25  Gerd Moellmann  <gerd@gnu.org>

	* bytecomp.el (byte-compile-defvar-or-defconst): Only cons onto
	current-load-list in top-level forms.  Else this leaks a cons cell
	every time a defun is called.

	* mail/mail-utils.el (rmail-dont-reply-to): Fix last change.

2000-09-25  Dave Love  <fx@gnu.org>

	* startup.el (fancy-splash-head): Check XPM is available.

	* autoinsert.el (auto-insert): Doc fix.
	(auto-insert-alist): Following GNU notices, don't say `copyright
	_by_'.  Use line-beginning-position.
	(auto-insert): Check buffer-file-name is non-nil before use.

2000-09-25  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Prevent filling lines
	starting with `@def' or `@multitable', in addition to ones
	specified by the user in auto-fill-inhibit-regexp.

2000-09-25  Markus Rost  <rost@math.ohio-state.edu>

	* mail/mail-utils.el (rmail-dont-reply-to): Avoid infinite loop if
	rmail-dont-reply-to-names matches the empty string.

2000-09-25  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line-1, fancy-splash-text): Change the
	text to sound more friendly.

2000-09-23  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el: Update author email address.
	Generally, sync w/ maintainer version 5.22.
	(hs-hide-all-non-comment-function): New var.
	(hs-hide-hook, hs-show-hook, hs-minor-mode): Update docstrings.
	(hs-hide-all): Use `hs-hide-all-non-comment-function'.
	(hs-show-region): Delete this command.
	(hs-minor-mode-map): Change bindings to leave "C-c LETTER" alone.

2000-09-22  Dave Love  <fx@gnu.org>

	* hl-line.el (hl-line-overlay): Don't make it buffer-local.
	(hl-line-highlight): Specify buffer when moving overlay.

	* progmodes/fortran.el (fortran-mode): Locally set
	normal-auto-fill-function.
	(fortran-auto-fill-mode): Just alias to auto-fill-mode.
	(fortran-mode-map): Adjust auto-fill menu entry.

2000-09-22  Gerd Moellmann  <gerd@gnu.org>

	* vc-rcs.el (toplevel): Require `vc' when compiling.

	* startup.el (fancy-splash-head): Use splash.pbm instead of splash.xbm.

2000-09-22  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-switch-backend): Signal an error if the file is not
	registered under the new backend.

	* vc-rcs.el (vc-rcs-checkin): Fix bug that prevented check-in
	without explicit revision number.

2000-09-21  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-file-header-face): Reset to its previous value.
	(diff-hunk-text): Correctly use offsets rather than buffer-positions.
	(diff-xor): New function.
	(diff-find-source-location): Use it.  Fix a stupid name clash.
	(diff-hunk-status-msg): New function.
	(diff-apply-hunk): Drop args OTHER-FILE, DRY-RUN, POPUP and NOERROR.
	(diff-test-hunk): Use diff-find-source-location.
	(diff-goto-source): Favor the `reverse'.
	(diff-hunk-text): Properly handle one-sided context diffs.
	(diff-apply-hunk): When done, advance to the next hunk.

2000-09-21  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): If frame was created with a non-zero
	tool-bar-lines parameter, switch tool-bar-mode on.

	* add-log.el (change-log-date-face, change-log-name-face)
	(change-log-email-face, change-log-file-face)
	(change-log-list-face, change-log-conditionals-face)
	(change-log-function-face, change-log-acknowledgement-face):
	New faces, inheriting from font-lock faces.
	(change-log-font-lock-keywords): Use them.

2000-09-21  Dave Love  <fx@gnu.org>

	* progmodes/cperl-mode.el (top-level): Clean up
	`eval-when-compile's and assorted defvars.
	(cperl-invalid-face): Don't double-quote value.  Change custom
	type.
	(cperl-mode): Set normal-auto-fill-function and don't zap
	auto-fill-function.
	(cperl-imenu--function-name-regexp-perl): Renamed from
	imenu-example--function-name-regexp-perl.
	(cperl-imenu--create-perl-index): Renamed from
	imenu-example--create-perl-index.
	(cperl-xsub-scan): Don't require cl.

	* msb.el (msb-mode-map): Use substitute-key-definition.
	(msb-mode): Use msb-mode-map.

2000-09-21  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-index-of, vc-transfer-file, vc-default-receive-file):
	New functions.
	(vc-next-action-on-file): Call vc-transfer-file at appropriate places.
	(vc-switch-backend): New function.
	(vc-prefix-map): Bind `vc-switch-backend' to `b'.
	(vc-register): Fix prompt.
	(vc-unregister, vc-default-unregister): New functions.
	(vc-version-diff): Handle empty buffer in sentinel.

	* vc-rcs.el (vc-rcs-workfile-is-newer): New function.
	(vc-rcs-state-heuristic): Use it to guess the state of files with
	non-strict locking.
	(vc-rcs-find-most-recent-rev): Handle the case when a branch has
	been set with -b, but not created yet.
	(vc-rcs-fetch-master-state): With non-strict locking, compare file
	contents in order to find the state.
	(vc-rcs-checkin): Allow creation of branches with no changes.
	(vc-rcs-unregister, vc-rcs-receive-file)
	(vc-rcs-set-non-strict-locking): New functions.

	* vc-hooks.el (vc-name): Force correct computation of the value
	in case it is missing.

2000-09-21  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (fancy-splash-tail): Use a different foreground
	color on a dark frame background.

2000-09-21  Miles Bader  <miles@lsi.nec.co.jp>

	* info.el: Use the correct capitalization when making Info-mode
	and Info-edit-mode `special' modes.

2000-09-20  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-add-log-file-name, diff-current-defun): New funs.
	(diff-mode): Add support for add-log.el.
	(diff-hunk-text): Use char offsets rather than line offsets.
	(diff-find-source-location): Replace LINE with line-offset (nil
	if not found) and always set POS to a meaningful position.
	Adapt to the new char-offsets.
	(diff-apply-hunk): Drop support for the unused `select' POPUP.
	Adapt to the new diff-find-source-location.
	(diff-goto-source): Adapt to the new diff-find-source-location.

	* add-log.el (add-log-file-name): New function (split out of
	add-change-log-entry).
	(add-change-log-entry): Use it.
	Call add-log-file-name-function with the changelog file name if
	the current buffer is not associated with any file.
	Avoid find-file if the selected window is dedicated.

	* diff-mode.el (diff-find-source-location):
	Move code from diff-apply-hunk.  Return buffer rather than file.
	(diff-apply-hunk): Use the new result from  diff-find-source-location.
	(diff-goto-source): Use the new diff-find-source-location.

2000-09-20  Dave Love  <fx@gnu.org>

	* iswitchb.el: Some doc fixes.
	(iswitchb-mode-map): Define completely initially.  Inherit
	minibuffer-local-map.
	(iswitchb-completion-help) <!iswitchb-xemacs>: Use
	fundamental-mode.
	(iswitchb-global-map): New variable.
	(iswitchb-summaries-to-end): Amalgamate regexps.
	(iswitchb-mode): New.
	(iswitchb-mode-hook): New variable.
	(iswitchb) <defgroup>: Add URL link.  Use group `completion', not
	`extensions'.

2000-09-20  Gerd Moellmann  <gerd@gnu.org>

	* ehelp.el (electric-help): New defgroup.
	(electric-help-shrink-window): New user-option.
	(with-electric-help): Use it.

	* window.el (shrink-window-if-larger-than-buffer): If face
	`mode-line' has a :box, and we're on a graphical frame, add 1
	to the needed window height.

	* frame.el (frame-notice-user-settings): Add a last parameter nil
	to a call to `append', because the last list passed to `append' is
	not copied, and so subsequent calls to assq-delete-all will modify
	default-frame-alist.

	* startup.el (fancy-splash-image): Change :type.
	(fancy-splash-head): Use an XBM image if appropriate.
	(command-line-1): Show splash screens in more cases.

	* startup.el (fancy-splash-text): Don't quote faces.

	* dired.el (dired-font-lock-keywords): Undo last change.
	(dired-readin): Bind indent-tabs-mode to nil.

	* startup.el (fancy-splash-head): If frame's background mode
	is `dark', change the black background of the image to gray.
	(fancy-splash-screens): Display startup echo area message.
	(display-startup-echo-area-message): New function.

2000-09-20  Miles Bader  <miles@lsi.nec.co.jp>

	* faces.el (mode-line, tool-bar): Merge entries for `x' and `w32'.

	* info.el (info-header-node): Tweak for color ttys.

	* faces.el (face-valid-attribute-values): Make sure directories we
	search for stipples both exist and are readable before trying to
	search them.

	* diff-mode.el (diff-apply-hunk): Jump to the correct line offset
	in the dry-run case.

	* jka-compr.el (with-auto-compression-mode): New macro.

	* cus-edit.el (custom-face-tag-face, custom-group-tag-face-1)
	(custom-group-tag-face, custom-variable-tag-face): Use relative
	:height and inherit from `variable-pitch' face instead of
	hardwiring :family.
	* hi-lock.el (hi-black-hb): Likewise.

	Reapply Gerd's change from 2000-09-18, which seems to have gotten lost:
	* toolbar/tool-bar.el (tool-bar-add-item-from-menu): Like in
	toolbar-add-item, if image doesn't have a mask add a `:mask
	heuristic'.

2000-09-19  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el: Docstring fixes.
	(diff-header-face, diff-comment-face): New faces.
	(diff-font-lock-keywords): Highlight a bit differently.
	(diff-find-source-location): Don't return SPAN any more.
	(diff-hunk-text): Don't bother erasing the temp buffer.
	(diff-find-text): Drop argument LINE.
	(diff-apply-hunk): Update calls to diff-find-text.
	(diff-goto-source): Use pop-to-buffer again and don't raise an error.

	* calendar/calendar.el: Docstring fixes.
	(calendar-make-alist): Don't quote lambda.
	(calendar-star-date): Use make-local-variable.

2000-09-19  Dave Love  <fx@gnu.org>

	* toolbar/tool-bar.el: Renamed from toolbar.el.
	Change `toolbar' to `tool-bar' generally in symbols.
	Make some items invisible in `special' major modes.
	(tool-bar-add-item-from-menu): Renamed from toolbar-like-menu-item.
	Add arg PROPS.

	* startup.el (fancy-splash-screen) <defgroup>: Fix syntax.
	Add :version here.
	(fancy-splash-delay, fancy-splash-image): Remove :version here.

2000-09-19  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-search-word): Remove call to `debug'.

	* files.el (find-file-suppress-same-file-warnings): New user-option.
	(find-file-noselect): Use it.

	* startup.el (fancy-splash-delay, fancy-splash-image): Add :version.
	(fancy-splash-screen): Defgroup.

	* add-log.el (change-log-font-lock-keywords): Match names
	more exactly for the case that font-lock-constant-face is
	underlined.

2000-09-19  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-search-word): Rewritten for speed.

2000-09-19  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-revert-buffer): Set vc-checkout-time correctly.

2000-09-19  Gerd Moellmann  <gerd@gnu.org>

	* gnus/: Update to emacs-21-branch of the Gnus CVS repository.
	* gnus/binhex.el, gnus/flow-fill.el, gnus/format-spec.el
	* gnus/gnus-ml.el, gnus/gnus-mlspl.el, gnus/ietf-drums.el,
	* gnus/imap.el, gnus/mail-parse.el, gnus/mail-prsvr.el,
	* gnus/mail-source.el, gnus/mailcap.el, gnus/mm-bodies.el,
	* gnus/mm-decode.el, gnus/mm-encode.el, gnus/mm-partial.el,
	* gnus/mm-util.el, gnus/mm-uu.el, gnus/mm-view.el,
	* gnus/mml.el, gnus/nnimap.el, gnus/nnslashdot.el,
	* gnus/nnultimate.el, gnus/nnwarchive.el, gnus/qp.el,
	* gnus/rfc1843.el, gnus/rfc2045.el, gnus/rfc2047.el,
	* gnus/rfc2104.el, gnus/rfc2231.el, gnus/time-date.el,
	* gnus/utf7.el, gnus/uudecode.el, gnus/webmail.el: New files.

	* startup.el (fancy-splash-text): New variable.
	(fancy-splash-delay, fancy-splash-image): New user-options.
	(fancy-splash-insert, fancy-splash-head, fancy-splash-tail)
	(fancy-splash-screens): New functions.
	(command-line-1): If display has a `display' frame parameter, has
	colors, and we have XPM support, show more fancy splash screens.

2000-09-19  Dave Love  <fx@gnu.org>

	* map-ynp.el (map-y-or-n-p): Check use-dialog-box.  Don't lose
	with null `help'.  Use modern backquote syntax.

2000-09-19  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (font-lock-mode): Change message telling the user
	that ``the buffer is too big''.

	* dired.el (dired-font-lock-keywords): Allow tabs and spaces,
	for instance for the case that tab-width is 2.

2000-09-18  Gerd Moellmann  <gerd@gnu.org>

	* toolbar/toolbar.el (toolbar-like-menu-item): Like in
	toolbar-add-item, if image doesn't have a mask add a `:mask
	heuristic'.

2000-09-18  Miles Bader  <miles@lsi.nec.co.jp>

	* diff-mode.el (diff-hunk-text): Add new optional arg LINE-OFFSET,
	and return a cons if it's non-nil.
	(diff-apply-hunk): Try to jump to the line in the source text
	corresponding to the position of point in the in the hunk.

	* info.el (Info-title-3-face, Info-title-2-face)
	(Info-title-1-face): Use face inheritance and relative sizes
	instead of hard-wiring things.

	* faces.el (secondary-selection): Make dark-background variant sane.

2000-09-16  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (compile-files-CMD): No need to make .elc files
	read-only, since they aren't under VC now.

2000-09-17  Dave Love  <fx@gnu.org>

	* tmm.el: Replace mapcar with mapc in several places.

	* loadhist.el (unload-feature): Maybe call elp-restore-list and
	ad-unadvise.

	* international/latin1-disp.el: New file.

	* calendar/cal-move.el (scroll-calendar-left)
	(scroll-calendar-right): Make arg optional (for active mode line).

	* calendar/calendar.el (calendar-mode-line-format): Make fields
	mouse-sensitive.
	(calendar-read-date, calendar-read-date, calendar-window-list):
	Unquote lambda.
	(calendar-month-name): Use aref, not sref.

	* view.el (minor-mode-alist): Propertize the string.

	* international/characters.el (standard-case-table): Add entries
	for Greek.

2000-09-18  Miles Bader  <miles@gnu.org>

	* info.el (info-node, info-xref): Add dark-background variants.

	* faces.el (header-line): Change defaults to be less confusing
	when mixed with mode-lines.

	* info.el (Info-fontify-node): Make a few cleanups.
	Add extra `help-echo' and `local-map' props to node xrefs.
	Use header-specific faces for node-names & xrefs.
	(Info-use-header-line): New variable.
	(info-header-xref, info-header-node): New faces.
	(Info-setup-header-line): New function.
	(Info-select-node): Call Info-setup-header-line when enabled.
	(Info-extract-pointer): Work even if the header line is hidden.
	(Info-header-line): New variable.

2000-09-16  Stefan Monnier  <monnier@cs.yale.edu>

	* vms-patch.el (print-region-function): Don't quote lambda.

	* tempo.el (tempo-expand-if-complete): Quote paren in docstring.

	* emacs-lisp/lisp-mnt.el (lm-header-prefix): Cleanup the regexp.
	(lm-get-header-re): Allow spaces between the header and the colon.
	(lm-header): Allow $ in non-RCS headers.
	(lm-header-multiline): Put the strings back into order.
	Stop at an empty line.  Don't require two space chars if the
	line is clearly not another header line.

	* emacs-lisp/lmenu.el (popup-menu, popup-menu-internal)
	(popup-menu-popup): Remove.

2000-09-15  Gerd Moellmann  <gerd@gnu.org>

	* toolbar/toolbar.el (toolbar-add-item): Use the same image
	specification if or if not tool-bar item contains an `:enabled'
	property.

	* menu-bar.el (menu-bar-files-menu): Disable ``Save'' if
	current buffer has no file name.

2000-09-15  Dave Love  <fx@gnu.org>

	* strokes.el: Sync with maintainer's current version with changes
	for Emacs, but avoid runtime cl and levents.
	(toplevel): Change autoloads and compilation requires.
	(strokes-version, strokes-bug-address, strokes-lift): Values
	changed.
	(strokes-xpm-header, strokes-insinuated): New variable.
	(strokes): Add :link.
	(strokes-mode): Customized.
	(strokes-while-inhibiting-garbage-collector): New macro.
	(strokes-remassoc): Avoid remove-if.
	(strokes-fix-button2-command): Don't use ad-do-it.
	(strokes-insinuate): New function.
	(strokes-button-press-event-p, strokes-button-release-event-p):
	New functions, used instead of non-`strokes-' versions..
	(strokes-mouse-event-p): Rewritten.
	(strokes-event-closest-point): Avoid event-point.
	(strokes-get-grid-position): Avoid cdadr, caadr.
	(strokes-read-stroke, strokes-read-complex-stroke): Avoid levents
	functions.
	(strokes-help): Use with-output-to-temp-buffer.
	(strokes-window-configuration-changed-p): New function.
	(strokes-update-window-configuration): Use buffer-live-p,
	strokes-window-configuration-changed-p.
	(strokes-mode): Use strokes-insinuate.  Alter mouse bindings.
	(strokes-char-face): New face.
	(strokes-char-table, strokes-base64-chars): New variable.
	(strokes-xpm-for-stroke, strokes-list-strokes)
	(strokes-xpm-char-on-p, strokes-xpm-char-bit-p)
	(strokes-xpm-encode-length-as-string, strokes-xpm-decode-char)
	(strokes-xpm-to-compressed-string, strokes-decode-buffer)
	(strokes-encode-buffer, strokes-xpm-for-compressed-string)
	(strokes-compose-complex-stroke, strokes-alphabetic-lessp): New
	functions.

2000-09-15  Gerd Moellmann  <gerd@gnu.org>

	* toolbar/toolbar.el (toolbar-add-item): Use image-mask-p.

	* image.el (create-image): Doc fix.

	* toolbar/toolbar.el (toolbar-add-item): Use `:mask heuristic'
	instead of `:heuristic-mask t'.

2000-09-14  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: Revert to Unix line endings.

2000-09-14  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: Add bootstrap support.  Also copy lisp source
	when installing.

	* makefile.nt (DONTCOMPILE): Fix typo.

	* shell.el (shell-write-history-on-exit): New function.
	(shell-dumb-shell-regexp): New custom variable.
	(shell-mode): Make shell-write-history-on-exit the process
	sentinel if shell name matches shell-dumb-shell-regexp.

	* w32-fns.el: Comment out before-init-hook function which resets
	source-directory based; this breaks bootstrap.

2000-09-14  Dave Love  <fx@gnu.org>

	* toolbar/cancel.xpm, toolbar/close.xpm, toolbar/copy.xpm,
	* toolbar/cut.xpm, toolbar/exit.xpm, toolbar/fld_open.xpm,
	* toolbar/help.xpm, toolbar/info.xpm, toolbar/mail.xpm,
	* toolbar/mail_compose.xpm, toolbar/new.xpm, toolbar/open.xpm,
	* toolbar/paste.xpm, toolbar/preferences.xpm, toolbar/print.xpm,
	* toolbar/save.xpm, toolbar/saveas.xpm, toolbar/search-replace.xpm,
	* toolbar/search.xpm, toolbar/spell.xpm, toolbar/undo.xpm: New.
	From Tuomas Kuosmanen <tigert@gimp.org>.  (Gnome icons fetched
	from <URL:http://tigert.gimp.org/gnome/gnome-stock/>.)

	* toolbar/toolbar.el: New.

	* subdirs.el: Add toolbar.

2000-09-14  Gerd Moellmann  <gerd@gnu.org>

	* indent.el (indent-for-tab-command): Doc fix.

2000-09-14  Alex Schroeder  <alex@gnu.org>

	* ansi-color.el (ansi-colors): Doc change.
	(ansi-color-get-face): Simplified regexp.
	(ansi-color-faces-vector): Added more faces, doc change.
	(ansi-color-names-vector): Doc change.
	(ansi-color-regexp): Simplified regexp.
	(ansi-color-parameter-regexp): New regexp.
	(ansi-color-filter-apply): Doc change.
	(ansi-color-filter-region): Doc change.
	(ansi-color-apply): Use ansi-color-regexp and ansi-color-get-face,
	deal with zero length parameters.
	(ansi-color-apply-on-region): Doc change.
	(ansi-color-map): Doc change.
	(ansi-color-map-update): Removed debugging message.
	(ansi-color-get-face-1): Added condition-case to trap
	args-out-of-range errors.
	(ansi-color-get-face): Doc change.
	(ansi-color-make-face): Removed.
	(ansi-color-for-shell-mode): New option.

2000-09-13  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Translate KEY
	if necessary even if it doesn't have any mapping in the current
	input method.
	(quail-start-conversion): Likewise.
	(quail-help): The output message is improved.

2000-09-13  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Revert to using
	`insert-before-markers'.  Add bletcherous hack to undo damage
	caused by `insert-before-markers'.  Put `front-sticky' property on
	overlays created here so that the field code understands how the
	overlay works.  Use a let when making comint-last-prompt-overlay,
	so that the code is easier to read.

2000-09-13  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-default-format-handler): DTRT when
	doc-property is a function.

2000-09-12  Francesco Potortì  <pot@gnu.org>

	* mail/sendmail.el (mail-mode-fill-paragraph): Do not get the
	filed name if it's not there.

2000-09-12  Dave Love  <fx@gnu.org>

	* simple.el (read-mail-command): Doc fix.
	(mail-user-agent): Add gnus-user-agent option for upcoming Gnus.

	* vc.el (vc-dired-listing-switches): Fix :version.

	* vc-hooks.el: Doc fixes.

	* subr.el (add-minor-mode): Use toggle-fun arg.

	* speedbar.el: Add :version to several defcustoms.

	* imenu.el (imenu--truncate-items, imenu--cleanup)
	(imenu--generic-function): Avoid mapcar.
	(imenu--replace-spaces): Function removed.
	(imenu--completion-buffer): Use subst-char-in-string.
	(imenu-add-to-menubar): Use keymap inheritance.

2000-09-12  Miles Bader  <miles@gnu.org>

	* diff-mode.el (diff-hunk-text): Use `with-temp-buffer'.
	(diff-mode-map): Bind `diff-test-hunk'.
	(diff-apply-hunk): Use `select-window' instead of `pop-to-buffer'.

2000-09-11  Gerd Moellmann  <gerd@gnu.org>

	* bytecomp.el (byte-compile-defvar): Undo last change
	because it breaks '(make-variable-buffer-local (defvar ...)'
	which is used at least in dired.

2000-09-12  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-define-package): Docstring
	modified.

2000-09-12  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info): Add
	extra docstrings for "chinese-ccdospy", "chinese-ecdict",
	"chinese-etzy", "chinese-sw", and "chinese-ziranma".  Modify the
	docstring of "chinese-py".

	* international/quail.el (quail-translation-docstring): New
	variable.
	(quail-show-keyboard-layout): Docstring modified.
	(quail-select-current): Likewise.
	(quail-build-decode-map): Change arg MAP to MAP-LIST to avoid
	infinite recursive call.
	(quail-help): Check quail-translation-docstring.  Format of the
	output changed.
	(quail-help-insert-keymap-description): Adjusted for the above
	change.

2000-09-11  Gerd Moellmann  <gerd@gnu.org>

	* bytecomp.el (byte-compile-defvar): Only cons onto
	current-load-list in top-level forms.  Else this leaks a cons cell
	every time a defun is called.

2000-09-11  Miles Bader  <miles@lsi.nec.co.jp>

	* diff-mode.el (diff-apply-hunk): Function basically rewritten.
	Now understands non-unified diffs.  Some functionality moved into
	`diff-hunk-text' and `diff-find-text'.  Add OTHER-FILE, DRY-RUN,
	POPUP, and NOERROR arguments.  If DRY-RUN is true, don't actually
	modify anything.  Only reposition point in the patched file if the
	patch succeeds.  Only pop up another window if POPUP is true.
	Emit a message describing what happened if successful, and at what
	line-offset.  Automatically detect reversed hunks and do something
	appropriate.
	(diff-hunk-text, diff-find-text): New functions.
	(diff-filter-lines): Function removed.
	(diff-test-hunk): New function.
	(diff-goto-source): Rewritten in terms of diff-apply-hunk.

2000-09-10  Dave Love  <fx@gnu.org>

	* textmodes/tildify.el: Minor doc/commentary fixes.
	(tildify) <defgroup>: Add :version.

	* faces.el (face-x-resources): Make custom type more specific.
	(frame-background-mode): Use mapc.
	(region) <defcustom>: Add :version.

2000-09-08  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-sccs.el (vc-sccs-register):
	* vc-rcs.el (vc-rcs-register):
	* vc-cvs.el (vc-cvs-register): Don't clear file's properties.
	* vc.el (vc-register): Clear file's properties.

2000-09-08  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-spec-set): Only face-spec-reset-face when
	ATTRS is non-nil.

2000-09-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (help-insert-xref-button): Fix a typo in doc string.

2000-09-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/titdic-cnv.el (quail-cxterm-package-ext-info):
	Fix doc strings of chinese-py-b5, chinese-py, and chinese-tonepy input
	methods.

	* menu-bar.el (read-mail-item-name): New function.
	(menu-bar-tools-menu): Use it to compute and display the package
	used to read email.
	(menu-bar-tools-menu): Fix typo in GUD's help string.

2000-09-07  Dave Love  <fx@gnu.org>

	* diff-mode.el (diff-mouse-goto-source): New function.

	* vc-sccs.el: Doc fixes.
	(vc-sccs-register-switches, vc-sccs-master-templates): Add :version.

	* vc-rcs.el: Doc fixes.
	(vc-rcs-register-switches, vc-rcs-checkin-switches)
	(vc-rcs-checkout-switches, vc-rcs-header)
	(vc-rcs-master-templates): Add or change :version.

	* vc-cvs.el: Doc fixes.
	(vc-cvs-register-switches, vc-cvs-header, vc-cvs-use-edit)
	(vc-cvs-stay-local): Add :version.

	* menu-bar.el (menu-bar-options-menu): Fix the font-lock toggle.

2000-09-07  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-help): Fix previous change.

2000-09-07  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (color-values): Doc fix.

	* faces.el (frame-set-background-mode): Use frame-parameter
	instead of frame-parameters.

	* frame.el (filtered-frame-list): Reduce consing.
	(frames-on-display-list): Call frame-parameter instead of
	frame-parameters.

2000-09-07  Kenichi Handa  <handa@etl.go.jp>

	* language/devan-util.el (devanagari-to-indian-region): In the
	loop, change the following char, not preceding char.

2000-09-07  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-update-buffers): Call frame-parameter
	instead of frame-parameters.

	* faces.el (set-face-attribute): Simplify by calling
	internal-set-lisp-face-attribute with FRAME being 0.

	* vc.el: Remove `Id' version control keyword.

2000-09-07  Kenichi Handa  <handa@etl.go.jp>

	* help.el (help-make-xrefs): Adjusted for the change of
	help-xref-mule-regexp.
	(help-insert-xref-button): New function.

	* international/mule-cmds.el (help-xref-mule-regexp-template):
	Include the pattern for character set.
	(leim): New group.

	* international/quail.el: Don't require face.
	(quail): New group.
	(quail-other-command): Dummy command to make quail-help work better.
	(quail-keyboard-layout-alist): Add Keyboard type "jp106".
	(quail-keyboard-layout-substitution): New variable.
	(quail-update-keyboard-layout): New function.
	(quail-keyboard-layout-type): New customizable variable.
	(quail-set-keyboard-layout): Call quail-update-keyboard-layout.
	(quail-keyboard-translate): Pay attention to
	quail-keyboard-layout-substitution.
	(quail-insert-kbd-layout): New function.
	(quail-show-keyboard-layout): New function.
	(quail-get-translation): If the definition is a vector of length
	1, and the element is a string of length 1, return the character
	in that string.
	(quail-update-current-translations): Fix the case of
	relative-index out of range.
	(quail-build-decode-map, quail-insert-decode-map): New Functions.
	(quail-help): Show keyboard layout by quail-insert-kbd-layout.
	Show key sequences for all available characters.
	(quail-help-insert-keymap-description): Don't show such verbose
	key bindings as quail-self-insert-command.

	* international/titdic-cnv.el (quail-cxterm-package-ext-info):
	Format changed, and each element now have extra documentations.
	(tit-process-header): Delete invalid characters from TIT-PROMPT.
	Adjusted for the change of quail-cxterm-package-ext-info.

2000-09-06  Gerd Moellmann  <gerd@gnu.org>

	* vc-hooks.el (toplevel): Don't require `vc' during compilation;
	requiring it leads to a recursive loading of vc.el and vc-hooks.el
	during bootstrap.

2000-09-05  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (toplevel): Don't require `dired' at run-time.
	(vc-dired-resynch-file): Remove autoload cookie.

2000-09-05  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Made several backend functions optional.
	(vc-default-responsible-p): New function.
	(vc-merge): Use RET for first version to trigger merge-news, not
	prefix arg.
	(vc-annotate): Handle backends that do not support annotation.
	(vc-default-merge-news): Removed.  The existence of a merge-news
	implementation is now checked on caller sites.

	* vc-hooks.el (vc-default-mode-line-string): Removed CVS special
	case.

	* vc-cvs.el (vc-cvs-mode-line-string): New function, handles the
	special case that has been removed from the default in vc-hooks.el.

2000-09-05  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-log-edit): Properly handle the case where FILE is nil.

2000-09-05  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el: Require vc during compilation.
	(vc-file-setprop): Use `vc-touched-properties' if bound by the new
	macro `with-vc-properties' in vc.el.
	(vc-file-getprop): Doc fix.
	(vc-after-save): Call `vc-dired-resynch-file' only if vc is loaded.

	* vc.el: Require dired-aux during compilation.
	(vc-name-assoc-file): Moved to vc-sccs.el.
	(with-vc-properties): New macro.
	(vc-checkin, vc-checkout, vc-revert, vc-cancel-version,
	vc-finish-steal): Use it.
	(vc-cancel-version): Moved RCS-specific code to vc-rcs.el.  The call
	to the backend-specific function is now supposed to do the checkout,
	too.
	(vc-log-edit): Handle FILE being nil and added a FIXME for log-edit.

	* vc-cvs.el (vc-cvs-checkin, vc-cvs-checkout): Don't bother to
	set file properties; that gets done in the generic code now.

	* vc-rcs.el (vc-rcs-uncheck): Renamed to `vc-rcs-cancel-version'.
	Changed parameter list, added code from vc.el that does the
	checkout, possibly with a double-take.

	* vc-sccs.el (vc-sccs-name-assoc-file): Moved here from vc.el.
	(vc-sccs-add-triple, vc-sccs-rename-file, vc-sccs-lookup-triple): Use
	the above under the new name.
	(vc-sccs-uncheck): Renamed to `vc-sccs-cancel-version'.  Changed
	parameter list, added checkout command.
	(vc-sccs-checkin, vc-sccs-checkout): Don't bother to set file
	properties; that gets done in the generic code now.

2000-09-05  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el: Docstring fixes (courtesy of checkdoc).

2000-09-05  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-checkout-writable-buffer-hook)
	(vc-checkout-writable-buffer): Remove.
	(vc-start-entry): Always call vc-log-edit, never vc-log-mode.
	(vc-log-mode): Make it into a clean derived major mode.
	(vc-log-edit): Mark buffer unmodified (as vc-log-mode did) and use
	vc-log-mode if log-edit is not available.
	(vc-dired-mode-map): Don't set-keymap-parent yet.
	(vc-dired-mode): Do set-keymap-parent here.
	(vc-dired-buffers-for-dir): Nop if dired is not loaded.

2000-09-05  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (set-face-attribute, face-spec-reset-face)
	(face-spec-set): Avoid consing by removing calls to `apply'.

	* frame.el (frame-parameter): Move to C code.

2000-09-05  Dave Love  <fx@gnu.org>

	* help.el (help-manyarg-func-alist): Add ml-prefix-argument-loop,
	insert-before-markers-and-inherit.  Now checked systematically!

2000-09-05  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-postgres): Use sql-postgres-options.
	(sql-postgres-options): New variable.

2000-09-05  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-mode-menu): Work around missing variable mark-active
	in XEmacs.
	(sql-mode): Added call to easy-menu-add for XEmacs compatibility.
	(sql-interactive-mode): Added call to easy-menu-add for XEmacs
	compatibility.

2000-09-04  Gerd Moellmann  <gerd@gnu.org>

	* vc.el (vc-dired-resynch-file): Add autoload cookie.

	* vc.el (toplevel): Require `dired' at run-time for dired-mode-map.

	* Makefile.in (DONTCOMPILE): Fix typo in file name.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-sccs.el (vc-sccs-latest-on-branch-p): Always return t; we
	don't support anything else under SCCS yet.

	* vc-hooks.el: Minor doc fixes.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Do not visit the file if it's
	not necessary.  If verbose in state `needs-patch', do the same as
	under `up-to-date'.  When NOT verbose and `needs-patch', check out
	latest version instead of `merge-news'.
	(vc-next-action-dired): Don't mess with default-directory here; it
	breaks other parts of dired.  It is the job of the
	backend-specific functions to adjust it temporarily if they need it.
	(vc-next-action): Remove a special CVS case.
	(vc-clear-headers): New optional arg FILE.
	(vc-checkin, vc-checkout): Set properties vc-state and
	vc-checkout-time properly.
	(vc-finish-steal): Call steal-lock, not steal, which doesn't exist.
	(vc-print-log): Use new backend function `show-log-entry'.
	(vc-cancel-version): Do the checks in a different order.  Added a
	FIXME concerning RCS-only code.

	* vc-rcs.el (vc-rcs-show-log-entry): New function.
	(vc-rcs-checkin, vc-rcs-checkout): Don't set all properties.

	* vc-cvs.el (vc-cvs-show-log-entry): New function.

	* vc-hooks.el (vc-default-mode-line-string): Show state
	`needs-patch' as a `-' too.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-responsible-backend): New optional arg REGISTER.
	(vc-default-could-register): New function.
	(vc-dired-buffers-for-dir, vc-dired-resynch-file): New functions.
	(vc-resynch-buffer): Call vc-dired-resynch-file.
	(vc-start-entry, vc-finish-logentry, vc-revert-buffer): Use
	vc-resynch-buffer instead of vc-resynch-window.
	(vc-next-action-dired): Don't redisplay here, that gets done as a
	result of the individual file operations.
	(vc-retrieve-snapshot): Corrected prompt order.

	* vc-hooks.el (vc-after-save): Call vc-dired-resynch-file.

	* vc-cvs.el (vc-cvs-stay-local): Allow it to be a hostname regexp
	as well.
	(vc-cvs-remote-p): Renamed to vc-cvs-stay-local-p.  Handle
	hostname regexps.  Updated all callers.
	(vc-cvs-responsible-p): Handle directories as well.
	(vc-cvs-could-register): New function.
	(vc-cvs-retrieve-snapshot): Parse "cvs update" output, keep file
	properties up-to-date.

	* vc-rcs.el (vc-rcs-register): If there is no RCS subdir, ask the
	user whether to create one.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-file-not-found-hook): Ask the user whether to
	check out a non-existing file.

	* vc-cvs.el (vc-cvs-checkout): Do the right thing when the
	workfile does not exist.

	* vc.el (vc-version-diff): Use `require' to check for existence of
	diff-mode.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-registered): Use new function
	vc-cvs-parse-entry to do the actual work.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-find-backend-function): If function doesn't
	exist, return nil instead of error.
	(vc-call-backend): Doc fix.

	* vc.el (vc-do-command): Doc fix.
	(vc-finish-logentry): When checking in from vc-dired, choose the
	right backend for logentry check.
	(vc-dired-mode-map): Inherit from dired-mode-map.
	(vc-dired-mode): Local value of dired-move-to-filename-regexp
	simplified.
	(vc-dired-state-info): Removed, updated caller.
	(vc-default-dired-state-info): Use parentheses instead of hyphens.
	(vc-dired-hook): Use vc-BACKEND-dir-state, if available.
	(vc-dired-listing-switches): New variable.
	(vc-directory): Use it, instead of dired-listing-switches.

	* vc-cvs.el (vc-cvs-remote-p): Allow FILE to be a directory, too.
	(vc-cvs-dir-state): New function.
	(vc-cvs-dir-state-heuristic): New function, subroutine of the above.
	(vc-cvs-parse-entry): New function, also to be used in
	vc-cvs-registered.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-revert-buffer): Hide the frame for dedicated windows
	*or* single-window-frames.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-update-changelog): Split into generic part and default
	implementation.  Doc string adapted.
	(vc-default-update-changelog): New function.  Call the `rcs2log'
	script in exec-directory, to fix a long-standing nuisance.

	* vc-sccs.el (vc-sccs-update-changelog): Dummy implementation that
	simply signals an error.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-checkout): Slight restructuring to make the
	control-flow more clear and to avoid running `cvs' twice.

	* vc.el (vc-next-action-on-file): Doc fix.
	(vc-maybe-resolve-conflicts): Don't just toggle smerge-mode.
	(vc-print-log): Eval `file' before constructing the continuation.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Corrected several messages.
	(vc-merge): Add prefix arg `merge-news'; handle it.

	* vc-cvs.el (vc-cvs-workfile-version): Removed comment that this
	is not reached.  It is.
	(vc-cvs-merge): Set state to 'edited after merge.
	(vc-cvs-merge-news): Set workfile version to nil if not known.
	(vc-cvs-latest-on-branch-p): Recommented.  Candidate for removal.

	* vc-*.el (vc-*-checkout): Switch off coding systems for checkout
	via stdout. (Merge from main line.)

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-finish-logentry): Thinko in the "same comment"
	detection.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-parent-buffer, vc-parent-buffer-name): Protect them
	against kill-all-local-variables.
	(vc-log-edit): Don't save vc-parent-buffer any more.
	(vc-last-comment-match): Initialize to an empty string.
	(vc-post-command-functions): New hook.
	(vc-do-command): Run it.
	(vc-next-action-on-file): Remove unnecessary pop-to-buffer.
	(vc-finish-logentry): Only add the comment to the ring if it's
	different from the last comment entered.
	(vc-new-comment-index): New function.
	(vc-previous-comment): Use it.  Make the minibuffer message
	slightly less terse.
	(vc-comment-search-reverse): Make it work forward as well.  Don't
	set vc-comment-ring-index if no match is found.  Use
	vc-new-comment-index.
	(vc-comment-search-forward): Use vc-comment-search-reverse.
	(vc-dired-mode-map): Don't inherit from dired-mode-map since
	define-derived-mode will do it for us.  Bind `v' to a keymap that
	inherits from vc-prefix-map so that we can bind `vt' without
	binding C-x v t.
	(vc-retrieve-snapshot): Parenthesis typo.

	* vc-cvs.el (vc-cvs-checkin): Raise the max-correct status from 0
	to 1.  Make sure to switch to *vc* before looking for an error
	message.  Use vc-parse-buffer.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-create-snapshot, vc-default-create-snapshot): Swap DIR
	and NAME.
	(vc-retrieve-snapshot): Split into two parts.
	(vc-default-retrieve-snapshot): New function.

	* vc-cvs.el ((vc-cvs-create-snapshot): Swap DIR and NAME.
	(vc-cvs-retrieve-snapshot): New function (untested).
	(vc-cvs-stay-local): Default to t.
	(vc-cvs-remote-p): New function and property.
	(vc-cvs-state): Stay local only if the above is t.
	(vc-handle-cvs): Removed.
	(vc-cvs-registered): Don't check vc-handle-cvs -- it should all be
	done via vc-handled-backends now.
	(vc-cvs-header): Escape Id.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-do-command): Remove unused commands.
	(vc-version-diff): Make sure default-directory ends with a slash.
	Move the window commands into a vc-exec-after.
	(vc-print-log): Move more of the code into the `vc-exec-after'.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-exec-after): Fix disassembly of previous sentinel.
	(vc-print-log): Search current revision from beginning of buffer.
	(vc-revert-buffer): Clear echo area after the diff is finished.
	(vc-prefix-map): Removed definition of "t" for terse display in vc
	dired.
	(vc-dired-mode-map): Inherit from dired-mode-map.  Added
	definition of "vt" for terse display.
	(vc-dired-mode): Fix dired-move-to-filename-regexp.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-exec-after): Avoid caddr.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-exec-after): New function.
	(vc-do-command): Use it to add a termination message for async
	procs.
	(vc-checkout): Try to handle a missing-backend situation.
	(vc-version-diff): Use vc-exec-after to fix the behavior for diffs
	of a directory with a backend using async diffs.
	(vc-print-log): Use vc-exec-after and use log-view-goto-rev if
	present.

	* vc-sccs.el (vc-sccs-state-heuristic): Use
	file-ownership-preserved-p.

	* vc-rcs.el (vc-rcs-state-heuristic): Use
	file-ownership-preserved-p.
	(vc-rcs-checkout): Remove the error-handling for missing-rcs.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-sccs.el (vc-sccs-workfile-unchanged-p): Fix call to
	vc-do-command.

	* vc.el (vc-next-action-on-file): Use vc-revert-buffer to revert
	when there are no changes.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-sccs.el (vc-sccs-state-heuristic): Don't use file-writable-p.

	* vc-rcs.el (vc-rcs-state-heuristic): Don't use file-writable-p.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-prefix-map): Move the autoload from vc.el.

	* vc.el (vc-prefix-map): Move the autoload to vc-hooks.el and move
	the `fset' outside of the defvar so that it works even if
	vc-prefix-map was already defined.
	(vc-setup-buffer): New function, split out of vc-do-command.
	(vc-do-command): Allow BUFFER to be t to mean `just use the
	current buffer without any fuss'.
	(vc-version-diff): Change the `diff' backend operation to just put
	the diff in the current buffer without erasing it.  Always use
	*vc-diff* even for directory-diffs.  Use vc-setup-buffer.  Protect
	shrink-window-if-larger-than-buffer.
	(vc-print-log): Change the `print-log' backend operation to just
	put the log in the current buffer without erasing it.  Protect
	shrink-window-if-larger-than-buffer.
	(vc-update-change-log): Fix setd typo.

	* vc-sccs.el (vc-sccs-workfile-unchanged-p): Fix parenthesis.
	(vc-sccs-print-log, vc-sccs-diff): Insert in the current buffer.

	* vc-rcs.el (vc-rcs-print-log): Insert in the current buffer.
	(vc-rcs-diff): Insert in the current buffer and remove unused arg
	CMP.

	* vc-cvs.el (vc-cvs-state, vc-cvs-fetch-status): Use
	with-temp-file.  Use the new BUFFER=t argument to vc-do-command.
	(vc-cvs-print-log, vc-cvs-diff): Insert in the current buffer.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-workfile-unchanged-p): If checkout-time comparison is
	not possible, use vc-BACKEND-workfile-unchanged-p.
	(vc-default-workfile-unchanged-p): New function.  Delegates to a
	full vc-BACKEND-diff.

	* vc-hooks.el (vc-simple-command): Removed.

	* vc-rcs.el (vc-rcs-workfile-unchanged-p): Use vc-do-command
	instead of vc-simple-command.
	(vc-rcs-fetch-master-state): Removed check for unlocked-changes to
	avoid doing a diff when opening a file.
	(vc-rcs-state): Added check for unlocked-changes.
	(vc-rcs-header): Escape Id.
	(vc-rcs-workfile-unchanged-p): Remove optional arg VERSION.
	(vc-rcs-state): Call vc-workfile-unchanged-p, not the RCS-specific
	version.

	* vc-sccs.el (vc-sccs-workfile-unchanged-p): Rewritten.
	(vc-sccs-diff): Remove optional arg CMP.
	(vc-sccs-state): Call vc-workfile-unchanged-p, not the
	SCCS-specific function.

	* vc-cvs.el (vc-cvs-state): Use vc-do-command instead of
	vc-simple-command.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-editable-p): Renamed from vc-writable-p.
	(with-vc-file, vc-merge): Use vc-editable-p.
	(vc-do-command): Remove unused var vc-file and fix the
	doubly-defined `status' var.  Add a user message when starting an
	async command.
	(vc-restore-buffer-context, vc-resynch-buffer, vc-start-entry)
	(vc-finish-steal, vc-checkin, vc-finish-logentry, vc-rename-file):
	Use with-current-buffer.
	(vc-buffer-sync): Use unless.
	(vc-next-action-on-file): If the file is 'edited by read-only,
	make it read-write instead of trying to commit.
	(vc-version-diff, vc-update-change-log): Use `setq
	default-directory' rather than `cd'.
	(vc-log-edit): Don't forget to set default-directory in the
	buffer.

	* vc-sccs.el (vc-sccs-state): Fix obviously wrong parenthesis.
	(vc-sccs-state-heuristic): Use file-writable-p instead of
	comparing userids.
	(vc-sccs-checkout): Use `unless'.

	* vc-rcs.el (vc-rcs-state-heuristic): Use file-writable-p instead
	of comparing userids.
	(vc-rcs-fetch-master-state): Handle the case where rcs is missing.
	Simplify the logic by eliminating unreachable code.
	(vc-rcs-diff): Only pass `2' to vc-do-command if necessary and
	just do a recursive call if we need to retry.
	(vc-rcs-checkout): Handle the case where rcs is missing by making
	the buffer read-write if requested and re-signaling the error.

	* vc-cvs.el (vc-cvs-diff): Remove unused and unsupported argument CMP.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-handled-backends): Docstring change.
	(vc-ignore-vc-files): Mark obsolete.
	(vc-registered): Check vc-ignore-vc-files.
	(vc-find-file-hook, vc-file-not-found-hook): Don't check
	vc-ignore-vc-files.

	* vc-cvs.el (vc-cvs-registered): Obey vc-handle-cvs.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-checkout): Don't do anything special for ange-ftp
	files since ange-ftp already has vc-registered return nil.

	* vc-sccs.el (vc-sccs-state): Use with-temp-buffer.
	(vc-sccs-workfile-version): Use with-temp-buffer and new
	vc-parse-buffer and don't bother setting the property.
	(vc-sccs-add-triple): Use with-current-buffer and
	find-file-noselect.
	(vc-sccs-lookup-triple): New vc-parse-buffer and turn cond -> if.

	* vc-rcs.el (vc-rcs-find-most-recent-rev): New function.  The code
	derives from the old vc-parse-buffer but uses the revision number
	rather than the date (much easier to compare robustly).
	(vc-rcs-fetch-master-state): Use `with-temp-buffer'.  Adapt to the
	new vc-parse-buffer (and vc-rcs-find-most-recent-rev).  Find the
	locking-user more directly.  Check strict locking and set
	checkout-model appropriately.
	(vc-rcs-parse-locks): Remove.
	(vc-rcs-latest-on-branch-p): Use with-temp-buffer and adapt to the
	new vc-parse-buffer (and vc-rcs-find-most-recent-rev).
	(vc-rcs-system-release): Use with-current-buffer and
	vc-parse-buffer.
	(vc-rcs-register, vc-rcs-checkout): Use with-current-buffer.

	* vc-hooks.el (vc-parse-buffer): Lobotomize the monster.
	(vc-simple-command): Docstring fix.
	(vc-registered): Align the way the file-handler is called with the
	way the function itself works.
	(vc-file-owner): Remove.

	* vc-cvs.el (vc-cvs-registered): Use with-temp-buffer.  Reorder
	extraction of fields and call to file-attributes because of a
	temporary bug in rcp.el.
	(vc-cvs-fetch-status): Use with-current-buffer.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-do-command): Use file-relative-name.
	(vc-responsible-backend): Use vc-backend if possible.
	(vc-create-snapshot): Improve the `interactive' spec. Add support
	for branches and dispatch to backend-specific `create-snapshot'.
	(vc-default-create-snapshot): New function, containing the bulk of
	the old vc-create-snapshot.
	(vc-retrieve-snapshot): Improve the interactive spec.

	* vc-hooks.el (vc-header-alist): Move the dummy def from vc.el.
	(vc-backend-hook-functions): Remove.
	(vc-find-backend-function): Don't try to load vc-X-hooks anymore.
	(vc-backend): Reintroduce the test for `file = nil' now that I
	know why it was there (and added a comment to better remember).

	* vc-sccs-hooks.el: Merge into vc-sccs.el * vc-sccs.el: Merge in
	code from vc-sccs-hooks.el.
	(vc-sccs-release, vc-sccs-system-release): Remove.  Don't require
	'vc anymore.
	(vc-sccs-responsible-p): Use expand-file-name instead of concat
	and file-directory-p instead of file-exists-p.
	(vc-sccs-check-headers): Simplify the regexp.

	* vc-rcs-hooks.el: Merge into vc-rcs.el * vc-rcs.el: Merge in code
	from vc-rcs-hooks.el.  Don't require 'vc anymore.
	(vc-rcs-responsible-p): Use expand-file-name instead of concat and
	file-directory-p instead of file-exists-p.

	* vc-cvs-hooks.el: Merge into vc-cvs.el * vc-cvs.el: Merge in code
	from vc-cvs-hooks.el.
	(proto vc-cvs-registered): Require 'vc-cvs instead of
	'vc-cvs-hooks.  Don't require 'vc anymore.
	(vc-cvs-responsible-p): Use expand-file-name instead of concat and
	file-directory-p instead of file-exists-p.
	(vc-cvs-create-snapshot): New function, replacing
	vc-cvs-assign-name.
	(vc-cvs-assign-name): Remove.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-header): New var.

	* vc-rcs.el (vc-rcs-exists): Remove.
	(vc-rcs-header): New var.

	* vc-sccs.el (vc-sccs-responsible-p, vc-sccs-register): Use
	`vc-sccs-search-project-dir' instead of `vc-sccs-project-dir'.
	(vc-sccs-header): New var.

	* vc.el (vc-do-command): Get rid of the `last' argument.
	(vc-header-alist): Remove, replaced by vc-X-header.
	(vc-insert-headers): Use vc-X-header instead of vc-header-alist.
	(vc-dired-hook): Use expand-file-name instead of concat.
	(vc-directory): Use file-name-as-directory.
	(vc-snapshot-precondition, vc-create-snapshot)
	(vc-retrieve-snapshot): Allow the command to operate on any
	directory.

	* vc-rcs.el, vc-sccs.el, vc-cvs.el: Update calls to vc-do-command by either
	just removing the 'WORKFILE argument or by removing the 'MASTER
	argument and replacing `file' with (vc-name file).

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el: Update Copyright and add a crude list of backend funs.
	(vc-writable-p): New function.
	(with-vc-file): Use vc-writable-p.
	(vc-next-action-on-file): Update call to vc-steal-lock and cleanup.
	(vc-register): Avoid vc-name.
	(vc-locking-user): Remove.
	(vc-steal-lock): Make the `owner' arg non-optional.
	(vc-merge): Use vc-writable-p instead of vc-locking-user and
	vc-checkout-model.
	(vc-default-dired-state-info): Use vc-state instead of
	vc-locking-user and return special strings for special states.
	(vc-dired-hook): Use vc-up-to-date-p instead of vc-locking-user
	and get rid of one of the special CVS cases.
	(vc-cancel-version): prettify error message with \\[...].
	(vc-rename-master): New function.
	(vc-rename-file): Use vc-BACKEND-rename-file (which might in turn
	use vc-rename-master) instead of vc-BACKEND-record-rename.  Make
	the CVS special case generic.
	(vc-default-record-rename): Remove.
	(vc-file-tree-walk-internal): Only call FUNC for files that are
	under control of some VC backend and replace `concat' with
	expand-file-name.
	(vc-file-tree-walk): Update docstring.
	(vc-version-diff, vc-snapshot-precondition, vc-create-snapshot)
	(vc-retrieve-snapshot): Update call to vc-file-tree-walk.

	* vc-sccs.el (vc-sccs-rename-file): Renamed from
	vc-sccs-record-rename.  Use `find-file-noselect' rather than
	`find-file' and call `vc-rename-master' to do the actual move.
	(vc-sccs-diff): Remove unused `backend' variable.

	* vc-sccs-hooks.el (vc-sccs-registered): Preloaded trivial version
	to delay loading of vc-sccs until it is really used.
	(vc-sccs-master-templates): Preload.
	(vc-sccs-state): Update call to vc-sccs-parse-locks.
	(vc-sccs-project-dir): Remove (merged into
	vc-sccs-search-project-dir).
	(vc-sccs-search-project-dir): Rewrite using file name handling ops
	rather than `concat', make sure it is preloaded and don't bother
	to check that the file actually exists.
	(vc-sccs-parse-locks): Remove unused `file' argument, remove
	`locks' argument (use buffer's content instead) and eliminate n^2
	behavior.

	* vc-rcs.el: Update Copyright.
	(vc-rcs-rename-file): New function.
	(vc-rcs-diff): Remove unused `backend' variable.

	* vc-hooks.el: Update Copyright.
	(vc-backend): Don't accept a nil argument any more.
	(vc-up-to-date-p): Turn into a defsubst.
	(vc-possible-master): New function.
	(vc-check-master-templates): Use `vc-possible-master' and allow
	funs in vc-X-master-templates to return a non-existent file.

	* vc-cvs.el: Update Copyright.
	(vc-cvs-diff): Remove unused `backend' variable.
	(vc-cvs-checkout): Only toggle read-only if the buffer is setup right.

	* vc-cvs-hooks.el: Preload a proto vc-cvs-registered.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-rcs-hooks.el (vc-rcs-registered): Provide a trivial version
	since it can be called from vc-rcs.el.
	(vc-rcs-parse-locks): Cleanup to remove an n^2 behavior.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-version-diff): Expand file name read from the
	minibuffer.  Handle the case when a previous version number can't
	be guessed.  Give suitable messages when there were no differences
	found.
	(vc-clear-headers): Call backend-specific implementation, if one
	exists.
	(vc-cancel-version): Made error checks generic.  When done, clear
	headers generically, too.

	* vc-rcs.el (vc-rcs-clear-headers): New function; code moved here
	from vc-clear-headers in vc.el.

	* vc-rcs-hooks.el (vc-rcs-fetch-master-state): Use vc-parse-buffer
	correctly.
	(vc-rcs-latest-on-branch-p): Made second argument VERSION
	optional.  Handle the case when it's not there.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-locking-user): Moved from vc-hooks.el.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-loadup): Remove.
	(vc-find-backend-function): Use `require'.  Also, handle the case
	where vc-BACKEND-hooks.el doesn't exist.
	(vc-call-backend): Cleanup.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-rcs-hooks.el (vc-rcs-templates-grabbed,
	vc-rcs-grab-templates)
	(vc-rcs-registered): Remove.  The default function works as well.
	* vc-sccs-hooks.el (vc-sccs-templates-grabbed,
	vc-sccs-grab-templates)
	(vc-sccs-registered): Remove.  The default function works as well.

	* vc.el (vc-version-diff): Left out a vc- in call to
	vc-call-backend.
	(vc-default-dired-state-info, vc-default-record-rename)
	(vc-default-merge-news): Update for the new backend argument.

	* vc-hooks.el (vc-find-backend-function): Return a cons cell if
	using the default function.
	(vc-call-backend): If calling the default function, pass it the
	backend as first argument.  Update the docstring accordingly.
	(vc-default-state-heuristic, vc-default-mode-line-string): Update
	for the new backend argument.
	(vc-make-backend-sym): Renamed from vc-make-backend-function.
	(vc-find-backend-function): Use the new name.
	(vc-default-registered): New function.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-merge): Use vc-find-backend-function.

	* vc-hooks.el (vc-backend-functions): Remove.
	(vc-loadup): Don't setup 'vc-functions.
	(vc-find-backend-function): New function.
	(vc-call-backend): Use above fun and populate 'vc-functions
	lazily.
	(vc-backend-defines): Remove.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-register): Put a FIXME note for a newly found bug.
	Call vc-call-backend without the leading vc-.
	(vc-responsible-backend, vc-finish-logentry, vc-annotate)
	(vc-check-headers): Call vc-call-backend without the leading vc-.
	(vc-annotate-time-span): Replace confusing use of `cond' with `or'.
	(vc-annotate-display): Replace confusing use of `cond' with `or'.
	Call vc-call-backend without the leading vc-.

	* vc-cvs.el (tail): Provide vc-cvs.
	* vc-sccs.el (tail): Provide vc-sccs.
	* vc-rcs.el (tail): Provide vc-rcs and remove vc-rcs-logentry-check.

	* vc-hooks.el (vc-backend-hook-functions, vc-backend-functions)
	(vc-make-backend-function, vc-call): Pass names without leading
	`vc-' to vc-call-backend so we can blindly prefix them with vc-BACKEND.
	(vc-loadup): Don't load vc-X-hooks if vc-X is requested.
	(vc-call-backend): Always try to load vc-X-hooks.
	(vc-registered): Remove vc- in call to vc-call-backend.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-process-filter): New function.
	(vc-do-command): Setup `vc-process-filter' for the async process.
	(vc-maybe-resolve-conflicts): New function to reduce
	code-duplication.  Additionally, it puts the buffer in
	`smerge-mode' if applicable.
	(vc-next-action-on-file): Use `vc-maybe-resolve-conflicts' after
	calling `merge-news'.
	(vc-merge): Use `vc-maybe-resolve-conflicts' after calling `merge'.
	(vc-log-edit): New function.  Replacement for `vc-log-mode' by
	interfacing to log-edit.el.
	(vc-start-entry): Call `vc-log-edit' instead of `vc-log-mode' if
	log-edit is available.
	(vc-resolve-conflicts): Delegate to `smerge-ediff' if available.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-register): Remove `vc-buffer-backend' setup.
	(vc-log-mode-map): New name for vc-log-entry-mode and merge the
	defvar and the initialization.
	(vc-log-mode): Minor docstring fix and use vc-log-mode-map.

	* vc-hooks.el (vc-default-back-end, vc-buffer-backend): Remove.
	(vc-kill-buffer-hook): Remove `vc-buffer-backend' handling.

	* vc-cvs-hooks.el (vc-handle-cvs): Make it a defvar and add a FIXME.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-file-clear-masterprops): Removed.
	(vc-checkin, vc-revert-buffer): Removed calls to the above.
	(vc-version-diff): Use buffer-size without argument.
	(vc-register): Heed vc-initial-comment.

	* vc-rcs-hooks.el (vc-rcs-fetch-master-state): Fix regexp for
	default branch.

	* vc-rcs.el (vc-rcs-register): Parse command output to find master
	file name and workfile version.
	(vc-rcs-checkout): Removed call to vc-file-clear-masterprops.

	* vc-cvs.el (vc-cvs-merge-news, vc-cvs-checkout): Removed call to
	vc-file-clear-masterprops.

	* vc-sccs.el (vc-sccs-checkout): Removed call to
	vc-file-clear-masterprops.  If writable, set vc-state to 'edited
	rather than user login name.


2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-workfile-unchanged-p): Remove unused argument
	`want-differences-if-changed' and simplify.
	(vc-next-action-on-file) [needs-merge]: Resynch the buffer.
	(vc-revert-buffer): Use `unchanged-p' rather than vc-diff's status
	output (which is invalid for async vc-diff) to decide whether to
	do the revert silently or not.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-hooks.el (vc-loadup): Load files quietly.
	(vc-call-backend): Oops, brain fart.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-state): Typo.
	(vc-cvs-merge-news): Return the status code rather than the error msg.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (with-vc-file, vc-next-action, vc-version-diff)
	(vc-dired-mark-locked): Replaced usage of vc-locking-user with
	vc-state or vc-up-to-date-p.
	(vc-merge): Use vc-backend-defines to check whether merging is
	possible.  Set state to 'edited after successful merge.

	* vc-hooks.el (vc-locking-user): If locked by the calling user,
	return that name.  Redocumented.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-recompute-state, vc-next-action-on-file): Update to
	new `vc-state' semantics.
	(vc-finish-steal): Set 'vc-state to 'edited rather than setting
	'vc-locking-user to the current user.
	(vc-merge): Inline vc-backend-merge.  Comment out code that I
	don't understand and hence can't adapt to the new `vc-state' and
	`vc-locking-user' semantics.
	(vc-backend-merge): Remove.

	* vc-rcs.el, vc-scc.el (vc-{sc,r}cs-check{in,out}): Update 'vc-state
	rather than 'vc-locking-user.

	* vc-rcs-hooks.el (vc-rcs-consult-headers): Adapt to new `vc-state'.

	* vc-hooks.el (vc-user-login-name): Simplify the code a tiny bit.
	(vc-state): Don't use 'reserved any more.  Just use the same
	convention as the one used for vc-<backend>-state where the
	locking user (as a string) is returned.
	(vc-locking-user): Update, based on the above convention. The
	'vc-locking-user property has disappeared.
	(vc-mode-line, vc-default-mode-line-string): Adapt to new `vc-state'.

	* vc-cvs.el (vc-cvs-state): Don't overwrite a non-heuristic state
	with a heuristic one.
	(vc-cvs-merge-news): Just use 'edited for the case with conflicts.
	(vc-cvs-checkin): Do a trivial parse to set the state in case of
	error.  That allows us to get to 'needs-merge even in the
	stay-local case.  There's still no way to detect 'needs-patch in
	such a setup (or to force an update for that matter).
	(vc-cvs-logentry-check): Remove, the default works as well.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-print-log, vc-cvs-diff): Run cvs asynchronously.

	* vc.el (vc-do-command): kill-all-local-variables, to reset any
	major-mode in which the buffer might have been put earlier.  Use
	`remove' and `when'.  Allow `okstatus' to be `async' and use
	`start-process' in this case.
	(vc-version-diff): Handle the case where the diff looks empty
	because of the use of an async process.

2000-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Removed optional parameter
	`simple'.  Recompute state unconditionally.
	(vc-default-toggle-read-only): Removed.

	* vc-hooks.el (vc-backend-functions): Removed vc-toggle-read-only.
	(vc-toggle-read-only): Undid prev change.

	* vc-cvs.el (vc-cvs-stay-local): Renamed from
	vc-cvs-simple-toggle.  Redocumented.
	(vc-cvs-state): If locality is wanted, use vc-cvs-state-heuristic.
	(vc-cvs-toggle-read-only): Removed.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-backend-dispatch, vc-annotate-mode-syntax-table): Remove.
	(vc-prefix-map): Move from vc-hooks.el and make autoloaded.
	(vc-release-greater-or-equal-p): Move to vc-rcs.el.
	(vc-file-clear-masterprops): Braindead "fix".  It was a nop and
	still is. So maybe it should be removed.
	(vc-head-version, vc-find-binary): Remove.
	(vc-recompute-state): Move from vc-hooks.el.
	(vc-next-action-on-file): Add a `simple' argument to allow
	avoiding the `recompute' step (use for vc-cvs-simple-toggle).
	(vc-default-toggle-read-only, vc-default-record-rename): New funs.
	(vc-next-action, vc-dired-hook): Use vc-state instead of vc-cvs-status.
	(vc-dired-mode-map): Properly defvar it.
	(vc-print-log): Call log-view-mode if available.
	(small-temporary-file-directory): defvar instead of use boundp.
	(vc-merge-news): Moved to vc-cvs.el.
	(vc-default-merge-news): New function.

	* vc-sccs.el: Require 'vc and 'vc-sccs-hooks.
	(vc-sccs-register-switches): New var, copied off of vc-rcs-hooks.
	(vc-sccs-latest-on-branch-p): Add a `FIXME' for a call to the
	unknown `vc-latest-version' function.  It should probably refer to
	vc-workfile-version or somesuch, but it's very unclear to me and I
	don't have SCCS to test things.

	* vc-sccs-hooks.el: Provide 'vc-sccs-hooks.
	(vc-sccs-state-heuristic): Fix typo.
	(vc-sccs-workfile-unchanged-p): Add missing argument.

	* vc-rcs.el: Require vc and vc-rcs-hooks.
	(vc-rcs-trunk-p, vc-rcs-branch-part): Move to vc-rcs-hooks.
	(vc-rcs-backend-release-p): Remove (use vc-rcs-release-p).
	(vc-release-greater-or-equal-p): Move from vc.
	(vc-rcs-trunk-p, vc-rcs-branch-p, vc-rcs-branch-part,
	vc-rcs-minor-part, vc-rcs-previous-version): Remove duplicates.
	(vc-rcs-checkout): Add a missing `new-version' argument in the
	call to vc-rcs-latest-on-branch-p.  Hopefully that was the right one.

	* vc-rcs-hooks.el: Provide 'vc-rcs-hooks.
	(vc-rcs-trunk-p, vc-rcs-branch-part): Moved from vc-rcs.el.
	(vc-rcs-latest-on-branch-p): Use the `version' argument rather
	than the apparently unbound `workfile-version'.

	* vc-hooks.el (vc-master-templates): Def the obsolete var.
	(vc-file-prop-obarray): Use `make-vector'.
	(vc-backend-functions): Add new hookable functions
	vc-toggle-read-only, vc-record-rename and vc-merge-news.
	(vc-loadup): If neither backend nor default functions exist, use
	the backend function rather than nil.
	(vc-call-backend): If the function if not bound yet, try to load
	the non-hook file to see if it provides it.
	(vc-call): New macro plus use it wherever possible.
	(vc-backend-subdirectory-name): Use neither `vc-default-back-end'
	nor `vc-find-binary' since it's only called from
	vc-mistrust-permission which is only used once the backend is known.
	(vc-checkout-model): Fix parenthesis.
	(vc-recompute-state, vc-prefix-map): Move to vc.el.

	* vc-cvs.el: Require 'vc and 'vc-cvs-hooks (for compiler warnings).
	(vc-cvs-release, vc-cvs-system-release): Remove.
	(vc-cvs-use-edit, vc-cvs-simple-toggle): New config variables.
	(vc-cvs-dired-state-info): Use `cvs-state' and slightly different
	status symbols.
	(vc-cvs-parse-status, vc-cvs-state): Move from vc-cvs-hooks.el.
	(vc-cvs-toggle-read-only): First cut at a function to allow a
	cvs-status-free vc-toggle-read-only.
	(vc-cvs-merge-news): Move from cvs-merge-news in vc.el.
	(vc-cvs-checkin): Use vc-recompute-state+vc-state instead of
	vc-cvs-status.  Also set vc-state rather than vc-locking-user.
	(vc-cvs-checkout): Modify access rights directly if the user
	requested not to use `cvs edit'.  And refresh the mode line.

	* vc-cvs-hooks.el: Provide 'vc-cvs-hooks.
	(vc-cvs-state, vc-cvs-parse-status): Move to vc-cvs.el.

2000-09-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-checkout): Docstring fix.  Added a `(if
	workfile' that got lost when the code was extracted from vc.el.
	And merged the tail with the rest of the code (not possible in the
	old vc.el where the tail was shared among all backends).  And
	explicitly set the state to 'edited if `writable' is set.

	* vc-cvs-hooks.el (vc-cvs-registered): Use expand-file-name.
	(vc-cvs-state): Be careful to return the value from
	vc-cvs-parse-state.
	(vc-cvs-parse-status): Use expand-file-name.  Don't set 'vc-state
	property but return it instead.  Also be careful to handle a nil
	or "" `rev' when workfile is non-nil (it was handled properly when
	workfile was nil).

	* vc.el: Removed those pesky unnecessary `(function' quotes.
	(vc-annotate-mode-map, vc-annotate-mode-syntax-table): Initialize
	directly in the defvar.
	(vc-do-command): Bind inhibit-read-only so as to properly handle
	the case where the destination buffer has been made read-only.
	(vc-diff): Delegate to vc-version-diff in all cases.
	(vc-version-diff): Setup the *vc-diff* buffer as was done in vc-diff.
	(vc-annotate-mode-variables): Removed (code moved partly to
	defvars and partly to vc-annotate-add-menu).
	(vc-annotate-mode): Turned into a derived-mode.
	(vc-annotate-add-menu): Moved in code in
	vc-annotate-mode-variables.
	(vc-update-change-log): Use make-temp-file if available.

2000-09-04  Martin Lorentzson  <martinl@delysid.gnu.org>

	* vc-cvs.el (vc-cvs-revert,vc-cvs-checkout): References to
	`vc-checkout-model' updated to `vc-cvs-update-model'.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action-on-file): Added handling of state
	`unlocked-changes'.
	(vc-checkout-carefully): Is now practically obsolete, unless the
	above is too slow to be enabled unconditionally.
	(vc-update-change-log): Fixed typo.

	* vc-sccs.el (vc-sccs-steal-lock): Renamed from `vc-sccs-steal'.

	* vc-sccs-hooks.el (vc-sccs-state): Somewhat rewritten.
	Now handles state `unlocked-changes'.
	(vc-sccs-workfile-unchanged-p): New function, to support the above.

	* vc-rcs.el (vc-rcs-steal-lock): Renamed from `vc-rcs-steal'.

	* vc-rcs-hooks.el (vc-rcs-state): Fixed typo.
	(vc-rcs-fetch-master-state): Bug fixes.  Recognize state
	`unlocked-changes'.
	(vc-rcs-workfile-unchanged-p): Renamed from
	`vc-rcs-workfile-unchanged'.  This is not a real backend-specific
	function yet, but supposed to become one soon.

	* vc-hooks.el (vc-backend-functions): Renamed `vc-steal' to
	`vc-steal-lock'.
	(vc-call-backend): Changed error message.
	(vc-state): Added description of state `unlocked-changes'.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-cvs-hooks.el (vc-cvs-registered): Fixed bug that caused it to
	always return t in CVS-controlled directories.

	* vc.el (vc-responsible-backend): New function.
	(vc-register): Largely rewritten.
	(vc-admin): Removed (implementation moved into vc-register).
	(vc-checkin): Redocumented.
	(vc-finish-logentry): If no backend defined yet (because we are in
	the process of registering), use the responsible backend.

	* vc-hooks.el (vc-backend-hook-functions, vc-backend-functions):
	Updated function lists.
	(vc-call-backend): Fixed typo.

	* vc-sccs.el, vc-rcs.el, vc-cvs.el (vc-BACKEND-responsible-p):
	New functions.
	(vc-BACKEND-register): Renamed from `vc-BACKEND-admin'.
	Removed query option.  Redocumented.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs.el, vc-cvs.el: Updated everything to use `vc-checkout-model'.

	* vc.el: Updated callers of `vc-checkout-required' to use
	`vc-checkout-model'.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-rcs.el (vc-rcs-backend-release-p): function added.  other
	stuff updated to reference this function instead of the old
	`vc-backend-release-p'.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-sccs-hooks.el (vc-uses-locking): Renamed to
	vc-checkout-model.  Return appropriate values.  Updated callers.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el (vc-backend-release, vc-backend-release-p): Moved to vc-rcs.el.
	(vc-backend-revert): Function moved into `vc-revert';
	`vc-next-action' must be updated to accommodate this change.
	(vc-backend-steal): Function moved into `vc-finish-steal'.
	(vc-backend-logentry-check): Function moved into
	`vc-finish-logentry'.
	(vc-backend-printlog): Function moved into `vc-print-log'.
	(vc-backend-uncheck): Function moved into `vc-cancel-version'.
	(vc-backend-assign-name): Function moved into
	`vc-create-snapshot'.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs-hooks.el, vc-cvs-hooks.el (vc-uses-locking):
	Rename to vc-checkout-model.  Return appropriate values.
	Update callers.

	* vc-hooks.el (vc-backend-hook-functions): Rename vc-uses-locking
	to vc-checkout-model.
	(vc-checkout-required): Rename to vc-checkout-model.
	Re-implement and re-comment.
	(vc-after-save): Use vc-checkout-model.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el (vc-workfile-unchanged-p,vc-diff,vc-version-diff):
	Update to use the vc-BACKEND-diff functions instead.
	`vc-diff' is now working.

	* vc-rcs.el (vc-rcs-logentry-check): New function.

	* vc-cvs.el (vc-cvs-logentry-check): New function.

	* vc-sccs.el (vc-sccs-diff): Function changed name from
	`vc-backend-diff'.  This makes `vc-diff' work.

	* vc-hooks.el (vc-backend-functions): Add `vc-diff' to the list
	of functions possibly implemented in a vc-BACKEND library.
	(vc-checkout-required): Fix bug that caused an error to be
	signaled during `vc-after-save'.

	* vc.el: Fix typo.
	This checkin is made with our new VC code base for the very first time.
	A simple `(vc-checkin (buffer-file-name))' was used to perform it.

	* vc-cvs.el (vc-cvs-revert,vc-cvs-checkout): Function calls to
	`vc-checkout-required' updated to `vc-cvs-uses-locking'.

	* vc-hooks.el (vc-backend-hook-functions): `vc-checkout-required'
	updated to `vc-uses-locking'.
	(vc-checkout-required): Call to backend function.
	`vc-checkout-required' updated to `vc-uses-locking' instead.

	* vc-rcs-hooks.el (vc-rcs-fetch-master-state): Function calls to
	`vc-checkout-required' updated to `vc-rcs-uses-locking'.

	* vc.el (vc-checkin): Merge with `vc-backend-checkin' and update
	to match the split into various backends.
	(vc-backend-checkin): Remove.  Merge with `vc-checkin'.
	(vc-retrieve-snapshot): Bug fix.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-sccs.el (vc-sccs-release): Doc fix.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el (vc-next-action-on-file): Bug found and fixed.
	(vc-checkout, vc-version-other-window, vc-retrieve-snapshot)
	(vc-cancel-version): Handle of vc-BACKEND-checkout updated.

	* vc-rcs.el (vc-rcs-checkin, vc-rcs-previous-version)
	(vc-rcs-checkout): Name space cleaned up.  No more revision number
	crunching function names that are not prefixed with vc-rcs.
	(vc-rcs-checkout-model): Function added.  References to
	`vc-checkout-model' replaced.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action-on-file): Rewritten for the new state model.
	(vc-backend-merge-news): Renamed to `vc-merge-news'.  (Specific parts
	still need to be split, and implemented for RCS).

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-sccs-hooks.el (vc-sccs-state-heuristic): Bug found and fixed.

	* vc-sccs.el (vc-sccs-admin): Added the query-only option as
	required by the vc.el file.

	* vc-rcs.el (vc-rcs-admin): Added the query-only option as
	required by the vc.el file.
	(vc-rcs-exists): Function added.

	* vc-cvs.el (vc-cvs-admin): Added the query-only option as
	required by the vc.el file.

	* vc.el (vc-admin): Updated to handle selection of appropriate
	backend.  Current implementation is crufty and need re-thinking.

	* vc-hooks.el (vc-parse-buffer): Bug found and fixed.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-cvs.el (vc-cvs-annotate-difference): Updated to handle
	beginning of annotate buffers correctly.

	* vc.el (vc-annotate-get-backend, vc-annotate-display-default)
	(vc-annotate-add-menu, vc-annotate, vc-annotate-display): Annotate
	functionality updated quite a lot to support multiple backends.
	Variables `vc-annotate-mode', `vc-annotate-buffers',
	`vc-annotate-backend' added.

	* vc-hooks.el (vc-backend-functions): `vc-annotate-command',
	`vc-annotate-difference' added to supported backend functions.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs.el, vc-sccs.el, vc-cvs.el (vc-*-checkout):
	Use with-temp-file instead of /bin/sh.  Merged from mainline

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-sccs-hooks.el (vc-sccs-registered): Updated.

	* vc-rcs-hooks.el (vc-rcs-registered): Updated.

	* vc-cvs-hooks.el (vc-cvs-registered): Updated.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-hooks.el: vc-state-heuristic added to
	vc-backend-hook-functions.

	* vc-sccs-hooks.el (vc-sccs-registered): Bug fix.

	* vc-rcs-hooks.el (vc-rcs-registered): Bug fix.

	* vc.el, vc-sccs-hooks.el, vc-rcs-hooks.el, vc-hooks.el: Rename
	`vc-uses-locking' to `vc-checkout-required'.  Rename the `locked'
	state to `reserved'.

	* vc-cvs.el, vc-cvs-hooks.el: Rename `vc-uses-locking' to
	`vc-checkout-required'.  Rename the `locked' state to `reserved'.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs-hooks.el: Implement new state model.  Hardly anything
	untouched.

	* vc-rcs.el (vc-rcs-latest-on-branch-p): Move to vc-rcs-hooks.el.

	* vc.el (vc-update-change-log): Use small-temporary-file-directory,
	if defined.  (Merged from main line, slightly adapted.)

	* vc-cvs.el (vc-cvs-annotate-difference): Handle possible
	millenium problem (merged from mainline).

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-cvs.el: Split the annotate feature into a BACKEND-specific
	part and moved the non-BACKEND stuff to vc.el.

	* vc.el: Split the annotate feature into a BACKEND specific part
	and moved it from the vc-cvs.el file to this one.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el: Implement new state model.
	(vc-state, vc-state-heuristic, vc-default-state-heuristic): New funs.
	(vc-locking-user): Simplify.  Now only needed if the file is
	locked by somebody else.
	(vc-lock-from-permissions): Remove.  Functionality is in
	vc-sccs-hooks.el and vc-rcs-hooks.el now.
	(vc-mode-line-string): New name for former vc-status.  Adapted.
	(vc-mode-line): Adapt to use the above.  Remove optional parameter.

	* vc-cvs-hooks.el (vc-cvs-state, vc-cvs-state-heuristic): New funs.
	Various simplifications and adaptations all over the place.

	* vc-sccs-hooks.el (vc-sccs-state, vc-sccs-state-heuristic): New funs.
	Simplify and adapt the rest.

	* vc.el (vc-resynch-window): Add TODO comment: check for
	interaction with view mode according to recent RCS change.
	(vc-backend-merge-news): Merge "CMUP" patch from mainline.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el: Convert the remaining function comments to docstrings.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el (vc-backend-release, vc-release-greater-or-equal)
	(vc-backend-release-p, vc-trunk-p, vc-branch-p, vc-branch-part)
	(vc-minor-part, vc-previous-version): Functions that operate and
	compare revision numbers got proper documentation.  Comments added
	about their possible removal.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc.el (vc-latest-on-branch-p): Function removed and replaced in
	the vc-backend.el files.

	* vc-sccs.el (vc-sccs-latest-on-branch-p): Function added.

	* vc-rcs.el (vc-rcs-latest-on-branch-p, vc-rcs-trunk-p)
	(vc-rcs-branch-p, vc-rcs-branch-part, vc-rcs-minor-part)
	(vc-rcs-previous-version): Functions added.

	* vc-cvs.el (vc-cvs-latest-on-branch-p): Function added.

	* vc-rcs-hooks.el (vc-rcs-master-templates): Extra `)' removed.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-master-templates): Is really obsolete.
	Comment out the definition for now.  What is the right procedure
	to get rid of it?
	(vc-registered, vc-backend, vc-buffer-backend, vc-name): Largely
	rewritten.
	(vc-default-registered): Remove.
	(vc-check-master-templates): New function; does mostly what the
	above did before.
	(vc-locking-user): Don't rely on the backend to set the property.

	* vc-rcs-hooks.el (vc-rcs-master-templates): Use simpler values.
	Rewrite documentation.
	(vc-rcs-templates-grabbed): New variable.
	(vc-rcs-grab-templates): New function.
	(vc-rcs-registered): Rewrite to use above mechanism.

	* vc-sccs-hooks.el (vc-sccs-master-templates): Use simpler values.
	Rewrite documentation.
	(vc-sccs-templates-grabbed): New variable.
	(vc-sccs-grab-templates): New function.
	(vc-sccs-registered): Rewrite to use above mechanism.
	(vc-sccs-search-project-dir): Rename from vc-search-sccs-project-dir.
	Don't throw the result, simply return it.

	* vc-cvs-hooks.el (vc-cvs-master-templates): Remove.
	(vc-cvs-find-master): Remove.  Code is now in vc-cvs-registered.
	(vc-cvs-registered): Does the check itself now.  Simplify.

	* vc-cvs.el (vc-cvs-revert): Merge and adapt "unedit" patch
	from main line.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-cvs.el (vc-cvs-diff): New function.

	* vc-sccs.el (vc-sccs-diff): New function.

	* vc-rcs.el (vc-rcs-diff): New function.
	(vc-rcs-checkout): Bug (typo) found and fixed.
	(vc-rcs-register-switches): New variable.

	* vc.el (vc-backend-diff): Function removed and placed in the
	backend files.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-cvs.el (vc-cvs-checkout): Function `vc-cvs-checkout' added.

	* vc.el (vc-backend-checkout): Function removed and replaced in
	the vc-backend.el files.

	* vc-sccs.el (vc-sccs-checkout): Added function `vc-sccs-checkout'.

	* vc.el (vc-backend-admin): Removed and replaced in the
	vc-backend.el files.

	* vc.el (Martin): Removed all the annotate functionality since it
	is CVS backend specific.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* spec.txt: Added specification of vc-state.

	* vc-sccs-hooks.el (vc-sccs-master-properties):
	Remove handling of vc-latest-version and
	vc-your-latest-version.  What used to be vc-latest-version, is now
	returned as vc-workfile-version.
	(vc-sccs-workfile-version): Adapt.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc.el: [Merged from mainline.]
	(vc-dired-mode): Make the dired-move-to-filename-regexp
	regexp match the date, to avoid treating date as file size.
	Add YYYY S option to WESTERN/

2000-09-04  Dave Love  <fx@gnu.org>

	* vc.el: Require `compile' when compiling.
	(vc-logentry-check-hook): New option.
	(vc-steal-lock): Use compose-mail.
	(vc-dired-mode-map): Defvar when compiling.
	(vc-add-triple, vc-record-rename, vc-lookup-triple): Moved to
	vc-sccs.el and renamed.  Callers changed.
	(vc-backend-checkout, vc-backend-logentry-check)
	(vc-backend-merge-news): Doc fix.
	(vc-default-logentry-check): New function.
	(vc-backend-checkin, vc-backend-revert, vc-backend-steal)
	(vc-backend-uncheck, vc-backend-print-log, vc-backend-assign-name)
	(vc-backend-merge): Doc fix.  Use backend functions.
	(vc-check-headers): Use backend functions.

	* vc-cvs.el: Require vc when compiling.
	(vc-cvs-register-switches): Doc fix.
	(vc-annotate-color-map, vc-annotate-menu-elements): Fix custom type.
	(vc-cvs-print-log, vc-cvs-assign-name, vc-cvs-merge)
	(vc-cvs-check-headers, vc-cvs-steal, vc-cvs-revert, vc-cvs-checkin):
	New functions (code from vc.el).
	(vc-annotate-display-default): Fix interactive spec.
	(vc-annotate-time-span): Doc fix.

	* vc-rcs.el: Require vc when compiling.
	(vc-rcs-print-log, vc-rcs-assign-name, vc-rcs-merge)
	(vc-rcs-check-headers, vc-rcs-steal, vc-rcs-uncheck, vc-rcs-revert)
	(vc-rcs-checkin): New functions (code from vc.el).
	(vc-rcs-previous-version, vc-rcs-system-release, vc-rcs-checkout):
	Doc fix.
	(vc-rcs-release): Deleted.  (Duplicated vc-rcs-system-release).

	* vc-sccs.el: Require vc when compiling.
	(vc-sccs-print-log, vc-sccs-assign-name, vc-sccs-merge)
	(vc-sccs-check-headers, vc-sccs-steal, vc-sccs-uncheck)
	(vc-sccs-revert)
	(vc-sccs-checkin, vc-sccs-logentry-check): New functions (code
	from vc.el).
	(vc-sccs-add-triple, vc-sccs-record-rename)
	(vc-sccs-lookup-triple): Moved from vc.el and renamed.
	(vc-sccs-admin): Doc fix.

2000-09-04  Martin Lorentzson  <martinl@gnu.org>

	* vc-rcs.el (vc-rcs-trunk-p, vc-rcs-branch-p, vc-rcs-branch-part)
	(vc-rcs-minor-part, vc-rcs-previous-version, vc-rcs-release)
	(vc-rcs-release-p, vc-rcs-admin, vc-rcs-checkout): New functions
	from vc.el.

	* vc-sccs.el (vc-admin-sccs): Added from vc.el

	* vc-cvs.el: Moved the annotate functionality from vc.el.
	(vc-cvs-admin, vc-cvs-fetch-status): Added from vc.el.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc.el (vc-backend-release): Call vc-system-release.

	* vc-sccs.el (vc-sccs-system-release):
	Renamed from vc-sccs-backend-release.

	* vc-rcs.el (vc-rcs-system-release):
	Renamed from vc-rcs-backend-release.

	* vc-cvs.el (vc-cvs-system-release):
	Renamed from vc-cvs-backend-release.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc.el (vc-rcs-release, vc-cvs-release, vc-sccs-release): Moved to
	backend files.
	(vc-backend-release): Dispatch to backend functions.
	(vc-backend-release-p): Don't mention CVS, RCS.  [The SCCS case
	probably needs attention.]

	* vc-sccs.el, vc-rcs.el (vc-sccs-release): Moved from vc.el.
	(vc-sccs-backend-release): New function.

	* vc-cvs.el (vc-cvs-release): Moved from vc.el.
	(vc-cvs-backend-release): New function.

	* vc.el (vc-dired-mode, vc-dired-reformat-line, vc-dired-purge):
	Doc fix.
	(vc-fetch-cvs-status): Moved to vc-cvs.el and renamed.
	(vc-default-dired-state-info): New function.
	(vc-dired-state-info): Dispatch to backends.
	(vc-dired-hook): Doc fix.  Simplify, pending removal of CVS specifics.

	* vc-cvs.el (vc-cvs-dired-state-info, vc-cvs-fetch-status): Moved
	from vc.el and renamed.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-file-clear-masterprops, vc-latest-on-branch-p)
	(vc-version-other-window, vc-backend-assign-name): Removed
	references to vc-latest-version; sometimes changed into
	vc-workfile-version.

	* vc-rcs-hooks.el (vc-master-workfile-version): Renamed to
	vc-rcs-master-workfile-version.
	(vc-rcs-workfile-version): Use the above.  Don't call
	vc-latest-version (that was unreachable code, anyway).
	(vc-rcs-fetch-master-properties): Doc fix.

	* vc-hooks.el (vc-latest-version, vc-your-latest-version): Removed.
	(vc-backend-hook-functions): Removed them from this list, too.
	(vc-fetch-properties): Removed.
	(vc-workfile-version): Doc fix.

	* vc-rcs-hooks.el (vc-rcs-consult-headers): New function.
	(vc-rcs-workfile-version, vc-rcs-locking-user)
	(vc-rcs-uses-locking): Use it.

	* vc-hooks.el (vc-consult-rcs-headers):
	Moved into vc-rcs-hooks.el, under the name
	vc-rcs-consult-headers.

	* vc-cvs-hooks.el (vc-cvs-workfile-version): Don't consult RCS
	headers.
	(vc-cvs-find-master): Use this name only; correct different
	versions of the name.

	* vc-sccs-hooks.el (vc-sccs-master-locks, vc-sccs-master-locking-user):
	New functions.
	(vc-sccs-locking-user): Use the latter.

	* vc-rcs-hooks.el (vc-rcs-master-locks, vc-rcs-master-locking-user):
	New functions.

	* vc-hooks.el (vc-master-locks, vc-master-locking-user):
	Moved into both
	vc-rcs-hooks.el and vc-sccs-hooks.el.  These properties and access
	functions are implementation details of those two backends.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs-hooks.el (vc-rcs-fetch-master-properties)
	(vc-rcs-parse-locks): RCS-specific code moved here from vc-hooks.

	* vc-sccs-hooks.el (vc-sccs-fetch-master-properties)
	(vc-sccs-parse-locks): SCCS-specific code moved here from
	vc-hooks.

	* vc-cvs-hooks.el (vc-cvs-fetch-master-properties): CVS-specific
	code moved here from vc-hooks.

	* vc-hooks.el (vc-parse-locks, vc-fetch-master-properties): Split
	into back-end specific parts and removed.  Callers not updated
	yet; because I guess these callers will disappear into back-end
	specific files anyway.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (with-vc-file, vc-next-action-on-file, vc-merge)
	(vc-backend-checkout): Changed calls to `vc-checkout-model' to
	`vc-uses-locking'.

	* vc-hooks.el (vc-checkout-model): Renamed to vc-uses-locking.
	Store yes/no in the property, and return t/nil.  Updated all
	callers.

	* vc-sccs-hooks.el (vc-sccs-checkout-model): Renamed to
	vc-sccs-uses-locking.  Don't set property.
	(vc-sccs-locking-user): Don't set property.

	* vc-cvs-hooks.el (vc-cvs-checkout-model): Renamed to
	vc-cvs-uses-locking.  Don't set property here; leave that to
	vc-hooks.
	(vc-cvs-locking-user): Reflect above change.  Streamlined.

	* vc-rcs-hooks.el (vc-rcs-checkout-model): Renamed to
	vc-rcs-uses-locking.
	(vc-rcs-locking-user): Reflect above change.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc-sccs-hooks.el (vc-sccs-checkout-model): New function.

	* vc-rcs-hooks.el (vc-rcs-checkout-model): New function.

	* vc-hooks.el (vc-checkout-model): Punt to backends.

	* vc-cvs-hooks.el (vc-cvs-checkout-model): New function.

	* vc.el (vc-fetch-cvs-status): Use renamed vc-cvs-parse-status.

	* vc-rcs-hooks.el (vc-rcs-workfile-version, vc-rcs-locking-user):
	New functions.

	* vc-sccs-hooks.el (vc-sccs-workfile-version, vc-sccs-locking-user):
	New functions.

	* vc-cvs-hooks.el (vc-handle-cvs): Doc fix.
	(vc-cvs-workfile-version, vc-cvs-locking-user): New functions.

	* vc-hooks.el (vc-default-locking-user): New function.
	(vc-locking-user, vc-workfile-version): Punt to backends.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc-hooks.el (vc-rcsdiff-knows-brief, vc-rcs-lock-from-diff)
	(vc-master-workfile-version): Moved from vc-hooks.

	* vc-rcs-hooks.el: Fix duplicate code in last change.

	* vc-rcs-hooks.el: Require vc-hooks when compiling.
	(vc-rcs-master-templates): Improve :type.
	(vc-rcsdiff-knows-brief, vc-rcs-lock-from-diff,
	vc-master-workfile-version): Moved from vc-hooks.

	* vc-sccs-hooks.el: Require vc-hooks when compiling.
	(vc-sccs-master-templates): Improve :type.
	(vc-sccs-lock-file): Moved/renamed from vc-hooks.el vc-lock-file.

	* vc-hooks.el (vc-lock-file): Moved to vc-sccs-hooks and renamed.

	* vc-cvs-hooks.el: Require vc-hooks when compiling.
	(vc-cvs-master-templates): Improve :type.  Use
	vc-cvs-find-cvs-master.
	(vc-handle-cvs, vc-cvs-parse-status, vc-cvs-status): Moved here
	from vc-hooks.
	(vc-vc-find-cvs-master): Renamed to vc-cvs-find-cvs-master.

	* vc-hooks.el (vc-handle-cvs, vc-cvs-parse-status, vc-cvs-status):
	Moved to vc-cvs-hooks.

	* vc-hooks.el: Add doc strings in various places.  Simplify the
	minor mode setup.
	(vc-handled-backends): New user variable.
	(vc-parse-buffer, vc-insert-file, vc-default-registered): Minor
	simplification.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc.el: Some doc fixes for autoloaded and interactive functions.
	Fix compilation warnings from ediff stuff.
	(vc-rcs-release, vc-cvs-release, vc-sccs-release): Custom fix.

	* vc-sccs-hooks.el (vc-sccs-master-templates): Add :version.

	* vc-cvs-hooks.el (vc-cvs-master-templates): Add :version.

	* vc-rcs-hooks.el (vc-rcs-master-templates): Add :version.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc-hooks.el (vc-backend-hook-functions, vc-backend-functions):
	New variable.
	(vc-make-backend-function, vc-loadup, vc-call-backend)
	(vc-backend-defines): New functions.

	* vc-hooks.el: Various doc fixes.
	(vc-default-back-end, vc-follow-symlinks): Custom fix.
	(vc-match-substring): Function removed.  Callers changed to use
	match-string.
	(vc-lock-file, vc-consult-rcs-headers, vc-kill-buffer-hook):
	Simplify.

2000-09-04  Dave Love  <fx@gnu.org>

	* vc-sccs-hooks.el (vc-sccs-master-templates): Fix doc, custom
	type.
	(vc-sccs-project-dir, vc-search-sccs-project-dir)
	(vc-sccs-registered): Doc fix.

	* vc-cvs-hooks.el (vc-cvs-master-templates): Fix doc, custom type.
	(vc-cvs-registered): Doc fix.

	* vc-rcs-hooks.el (vc-rcs-master-templates): Fix doc, custom type.
	(vc-rcs-registered): Doc fix.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-rcs-hooks.el, vc-cvs-hooks.el, vc-sccs-hooks.el: New file.

	* vc-hooks.el: vc-registered has been renamed
	vc-default-registered.  Some functions have been moved to the
	backend specific files.  they all support the
	vc-BACKEND-registered functions.

2000-09-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el: This is 1.113 from the emacs sources

	* vc.el: This is 1.244 from the emacs sources

2000-09-04  Dave Love  <fx@gnu.org>

	* mouse.el (mouse-major-mode-menu, mouse-popup-menubar): Run
	menu-bar-update-hook.

	* help.el (help-manyarg-func-alist): Add
	find-operation-coding-system.

	* wid-edit.el (widget-sexp-validate): Fix garbled code.

	* custom.el (custom-set-variables): Print message about errors in
	setting.

2000-09-03  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: Change to DOS line endings.

2000-09-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-popup-menubar): Supply the prompt string for
	minor-mode keymaps, if they don't have one.

2000-09-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/esh-module.el (eval-when-compile): Don't lose if
	esh-module.el's file name is truncated to DOS 8+3 limits.

2000-09-01  John Wiegley  <johnw@gnu.org>

	* pcomplete.el (pcomplete-dirs-or-entries): Added a missing
	predicate, which caused entries in the completion list to be
	doubled.

2000-08-30  John Wiegley  <johnw@gnu.org>

	* eshell/esh-mode.el (eshell-mode): Bound C-c M-d to toggle direct
	sending to subprocesses.  Also, hook pre-command-hook if
	`eshell-send-direct-to-subprocesses' is non-nil.
	(eshell-send-direct-to-subprocesses): New config variable.  If t,
	subprocess input is send immediately.
	(eshell-toggle-direct-send): New function.
	(eshell-self-insert-command): New function.
	(eshell-intercept-commands): New function.
	(eshell-send-input): If direct subprocess sending is enabled,
	don't echo any input to the Eshell buffer.  Let the subprocess
	handle that.  This requires "stty echo" in bash, for example.

2000-08-28  John Wiegley  <johnw@gnu.org>

	* eshell/esh-var.el (pcomplete/eshell-mode/unset): Added
	completion function for Eshell's implementation of `unset'.

2000-09-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-directory-list): Doc fix.

2000-08-31  Peter Breton  <pbreton@ne.mediaone.net>

	* filecache.el (file-cache-add-directory-using-find): Don't quote
	wildcards on MS-DOS. Suggested by Eli Zaretskii <eliz@is.elta.co.il>.

2000-08-31  Kenichi Handa  <handa@etl.go.jp>

	* help.el (help-make-xrefs): Don't make hyperlinks for incorrect
	coding systems.

2000-08-30  Andrew Innes  <andrewi@gnu.org>

	* timer.el (run-with-idle-timer): Undo last change, so that timer
	is not activated immediately if Emacs is already idle.  Some
	existing code relies on this behavior.

2000-08-30  Miles Bader  <miles@gnu.org>

	* frame.el (set-frame-font): Do completion of font-name for
	interactive use.

2000-08-30  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Bind locally
	last-command-event, last-command, and this-command.
	(quail-start-conversion): Likewise.
	(quail-self-insert-command): Fix docstring.

2000-08-29  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/executable.el
	(executable-make-buffer-file-executable-if-script-p): Check that
	buffer contains at least 2 characters.

2000-08-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* help.el (help-make-xrefs, help-xref-mule-regexp): Doc fix.

2000-08-29  Dave Love  <fx@gnu.org>

	* diff-mode.el (diff-mode) <defgroup>: Add :version.
	(diff-mode-shared-map): Bind mouse-2.
	(diff-imenu-generic-expression): New variable.
	(diff-mode): Use it.

	* mouse.el (mouse-major-mode-menu): Use local-key-binding.
	(mouse-popup-menubar): Add minor mode menus.
	(popup-menu): Check for lookup-key returning number.

2000-08-29  Miles Bader  <miles@gnu.org>

	* comint.el (comint-send-input): Create overlays using the proper
	front/read-advance arguments.

2000-08-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Even/odd pages printing.  Doc fix.
	(ps-print-version): New version number (6.0).
	(ps-setup, ps-print-page-p, ps-background-text, ps-background-image)
	(ps-background, ps-begin-file, ps-begin-job): Code fix.
	(ps-print-duplex-feature): Variable eliminated.
	(ps-even-or-odd-pages): New variable.

	* progmodes/ebnf2ps.el: Doc fix.
	(ebnf-version): New version (3.3).
	(ebnf-user-arrow): Change variable customization to sexp.
	(ebnf-user-arrow): Function eliminated.
	(ebnf-eps-finish-and-write, ebnf-insert-ebnf-prologue): Code fix.

2000-08-29  Kenichi Handa  <handa@etl.go.jp>

	* help.el (help-xref-mule-regexp): New variable.
	(help-make-xrefs): Handle help-xref-mule-regexp.

	* international/mule-cmds.el (help-xref-mule-regexp-template): New
	variable.
	(describe-input-method): Temporarily activate the specified input
	method to display the information.
	(describe-language-environment): Hyperlinks to mule related items.

	* international/mule-diag.el (charset-multibyte-form-string): New
	function.
	(list-character-sets-1): Use charset-multibyte-form-string.
	(describe-character-set): New function.
	(describe-coding-system): Hyperlinks to safe character sets.

	* international/quail.el (quail-help): New arg PACKAGE.
	Hyperlinks to mule related items.
	(quail-help-insert-keymap-description): Use
	substitute-command-keys instead of describe-bindings.
	(quail-translation-help): Hyperlinks to mule related items.

2000-08-28  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (eshell-flatten-list): It's not too wise to
	have a defsubst call itself.  Made `eshell-flatten-list' back into
	a function again.

	* eshell/em-smart.el (eshell-smart-redisplay): Added a safety
	catch, in case re-centering point at bottom messes up the display.
	This happens frequently in Emacs 21, due I believe to variable
	line heights.

	* eshell/esh-mode.el (eshell-find-tag): Require `etags', in order
	to call `find-tag-interactive'.

	* eshell/em-dirs.el (eshell/cd): Use buffered printing to display
	the list of remember directories.

2000-08-28  John Wiegley  <johnw@gnu.org>

	* align.el: Test align-region-separate to see if it's a symbol.

2000-08-28  John Wiegley  <johnw@gnu.org>

	* eshell/esh-util.el (eshell-flatten-list): Made this function
	into a defsubst form.  It gets used very frequently, although
	calls don't occur all that often.

	* eshell/em-dirs.el (eshell/cd): Flatten the argument list before
	examining it.

	* eshell/esh-cmd.el (eshell-rewrite-while-command):
	(eshell-rewrite-for-command): Use `eshell-copy-handles' instead of
	`eshell-protect'.
	(eshell-copy-handles): Created a new macro for duplicating the
	current set of open handles.  This is needed by the looping
	functions.
	(eshell-do-eval): Fixed while and if, so that the eshell-test-body
	is not incorrectly stomped on.

	* eshell/em-cmpl.el (eshell-cmpl-use-paring): Mirror
	declaration for pcomplete-use-paring.
	(eshell-cmpl-initialize): Set pcomplete-use-paring based on the
	value of eshell-cmpl-use-paring.
	* pcomplete.el (pcomplete-use-paring): New config variable, to
	indicate whether paring should be used.
	(pcomplete-do-complete): If pcomplete-use-paring is t, pare out
	completion alternatives that have already been used.

	* eshell/esh-mode.el (eshell-repeat-argument): Added function,
	bound to C-c C-y, which will repeat the previous N arguments
	(based on prefix argument).
	(eshell-mode): Bind C-c C-y to eshell-repeat-argument.

	* eshell/esh-cmd.el (eshell/which): Don't kill the *Help* buffer
	if there is no *Help* buffer.  This is for XEmacs, which renames
	its help buffers uniquely.  TODO: Find out what the current buffer
	name to delete is.

	* eshell/esh-util.el (eshell-read-passwd-file): Only keep the
	first entry that correlates to a passwd/group number.  Later
	entries (used for group/user name aliasing to multiple IDs) are
	ignored.

	* eshell/em-xtra.el (eshell/expr):
	* eshell/em-unix.el (eshell/du, eshell/cat, eshell/make)
	(eshell-grep, eshell/diff, eshell/locate):
	* eshell/em-dirs.el (eshell-dirs-substitute-cd): Flatten the
	argument list, before passing it to the system command.

	* eshell/esh-mode.el (eshell-find-tag): Added a special version of
	`find-tag' for use at final position in Eshell buffers (which
	otherwise triggers an error on Emacs 21).
	(eshell-mode): Bind M-. to `eshell-find-tag' with the Eshell
	buffer, if it is currently bound to `find-tag'.

	* pcmpl-gnu.el (pcmpl-gnu-makefile-regexps): Include GNUmakefile
	in the list of matched Makefile names.
	(pcmpl-gnu-make-rule-names): If GNUmakefile exists in the current
	directory, prefer its contents to Makefile.

	* eshell/em-dirs.el (eshell/cd): cd commands that look up
	directory parts (like "cd old new", or "cd =regexp"), are now case
	sensitive on non-Windows/DOS platforms.

	* eshell/esh-mode.el (eshell-parse-command-input): When a user
	types RET after an open delimiter (like "), display a message
	indicating that Eshell is waiting for the closing delimiter.

	* eshell/esh-var.el (eshell/unset): Added a command for unsetting
	environment variables.

	* eshell/em-unix.el (eshell/diff): Added logic to fail more
	gracefully if the user enters incorrect arguments.

	* eshell/esh-mode.el (eshell-mode): Disable auto-fill-function in
	Eshell buffers.

	* eshell/esh-var.el (eshell-interpolate-variable):
	* eshell/esh-mode.el (eshell-move-argument):
	* eshell/em-unix.el (eshell-du-sum-directory):
	* eshell/em-rebind.el (eshell-delchar-or-maybe-eof):
	* eshell/em-ls.el (eshell-ls-decorated-name): Use /= instead of
	(not (= ...)).

	* eshell/em-unix.el (eshell-shuffle-files): Added use of `apply',
	to ensure the `preserve' flag gets propagated when doing recursive
	directory copies.

2000-08-28  Stefan Monnier  <monnier@cs.yale.edu>

	* eshell/em-hist.el (eshell-put-history, eshell-get-history):
	Don't convert \n into \0177 in memory.
	(eshell-read-history, eshell-write-history): Convert \n to \0177,
	and back again, when reading and writing.

2000-08-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/esh-util.el (eshell-processp): Added to relieve constant
	testing of `fboundp' on `processp'.

	* eshell/esh-proc.el (eshell/kill): Use eshell-processp.
	(eshell/jobs): Don't call process-list if it is not bound.
	(eshell-gather-process-output): Support systems where async
	subprocesses aren't supported.
	(eshell-scratch-buffer, eshell-last-sync-output-start): New
	variables.

	* eshell/esh-cmd.el (eshell-resume-eval): Handle the case when
	eshell-do-eval returns t.
	(eshell-do-pipelines-synchronously): New defmacro.
	(eshell-execute-pipeline): Call it instead of eshell-do-pipelines
	when async subprocesses aren't supported.
	(eshell-do-eval): Use eshell-processp.  Don't throw eshell-defer
	if async subprocesses aren't supported.
	(eshell-resume-command): Don't assume STATUS is a string.

	* eshell/em-unix.el (eshell/rm): Use eshell-processp.

	* eshell/esh-io.el (eshell-virtual-targets): Doc fix.
	(eshell-close-target, eshell-get-target): Use eshell-processp.
	(eshell-print, eshell-error, eshell-errorn, eshell-printn): Doc
	fix.
	(eshell-get-target, eshell-create-handles): Doc fix.

2000-08-28  Miles Bader  <miles@lsi.nec.co.jp>

	* eshell/em-smart.el (eshell-smart-maybe-jump-to-end): Change the
	criterion to include commands that output something, as long as it
	leaves both the command and the end-of-buffer visible when the
	command has exited.
	(eshell-review-quick-commands): Adjust the help doc string
	accordingly.

2000-08-28  Peter Breton  <pbreton@ne.mediaone.net>

	* locate.el (locate): Cleaned up locate command's interactive prompting
	Thanks to François_Pinard <pinard@iro.umontreal.ca> for suggestions.

	* filecache.el (file-cache-case-fold-search): New variable.
	(file-cache-assoc-function): New variable.
	(file-cache-minibuffer-complete): Use file-cache-assoc-function.
	Use file-cache-case-fold-search variable.
	(file-cache-add-file): Use file-cache-assoc-function.
	(file-cache-delete-file): Likewise.
	(file-cache-directory-name): Likewise.
	(file-cache-debug-read-from-minibuffer): Likewise.

2000-08-28  Gerd Moellmann  <gerd@gnu.org>

	* abbrev.el (list-abbrevs): Add optional parameter LOCAL.
	(abbrev-table-name): New function.
	(prepare-abbrev-list-buffer): Add optional parameter LOCAL.
	If non-nil list local abbrev, only.

2000-08-28  Stanislav Shalunov  <shalunov@internet2.edu>

	* mail/uce.el (uce-reply-to-uce): Remove hard-coded "*Article*"
	from Gnus support code, and use special article copy buffer
	`(gnus-original-article-buffer)' instead.  This allows to get rid
	of article-hide-headers usage (which breaks in the latest Gnus
	version).  Thanks to Detlev Zundel.

2000-08-28  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-use-package): Hide "... loaded"
	message.
	(quail-start-translation, quail-start-conversion): Likewise.

	* international/kkc.el (kkc-region): Hide "... loaded" message.

2000-08-27  Dave Love  <fx@gnu.org>

	* emacs-lisp/bytecomp.el (mapc): Use byte-compile-funarg.

2000-08-27  Miles Bader  <miles@gnu.org>

	* faces.el (read-face-font, read-face-and-attribute): Tweak prompts.

2000-08-27  Kenichi Handa  <handa@etl.go.jp>

	* international/ja-dic-cnv.el (skkdic-convert): Insert (require
	'ja-dic-cnv), not (require 'skkdic-cnv).

2000-08-26  Miles Bader  <miles@gnu.org>

	* faces.el (face-x-resources): Add entry for :inherit.
	* cus-face.el (custom-face-attributes): Add support for :inherit
	attribute.  Add support for relative face heights.
	(custom-face-attributes-get): Treat `nil' as being a default value
	for :inherit (as well as `unspecified').

	* faces.el (set-face-attribute): Update doc string.
	(face-attribute-name-alist): Add :inherit.
	(face-valid-attribute-values): Handle :inherit.
	(face-read-string): Rephrase prompt to be less confusing.
	Assume that DEFAULT is a string, since we must return a string.
	(face-read-integer): Use `format' to turn DEFAULT into an
	acceptable default for face-read-string.  Match NEW-VALUE against
	the string "unspecified", not the symbol `unspecified', since
	that's what face-read-string returns.
	(read-face-attribute): Lookup a name for old-value in valid, and
	use it as a default if we find one.  Treat all values from
	face-read-string as strings.  If the default is used, don't do any
	more processing on the value, just use the old value directly.
	(read-face-and-attribute, modify-face): Tweak prompt.
	(read-face-name): Don't assume prompt ends with a space.

	* faces.el (describe-face): Add support for :inherit attribute.

2000-08-25  Kenichi Handa  <handa@etl.go.jp>

	* terminal.el (terminal-emulator): Fix args to `concat'.  Now
	concat doesn't accept integer.

	* international/kkc.el: Remove SKK from Keywords.  Require
	ja-dic-utl instead of skkdic-utl.

	* international/ja-dic-cnv.el: Renamed from skkdic-cnv.el.
	Provide ja-dic-cnv instead of skkdic-cnv.
	(ja-dic-filename): Renamed from skkdic-filename.  Referrers changed.
	(iso-2022-7bit-short): Add safe-charsets property.
	(skkdic-convert-postfix): Search Japanese chou-on character in
	addition to Hiragana character.
	(skkdic-convert-prefix, skkdic-collect-okuri-nasi): Likewise.
	(skkdic-convert): Change file names from skkdic.el to ja-dic.el.
	(batch-skkdic-convert): Likewise.

	* international/ja-dic-utl.el: Renamed from skkdic-utl.el.
	Provide ja-dic-utl instead of skkdic-utl.
	(skkdic-lookup-key): Load ja-dic/ja-dic, not skkdic/skkdic.

2000-08-24  Dave Love  <fx@gnu.org>

	* disp-table.el (standard-display-default): Make the test of `l'
	useful.

	* language/european.el ("Latin-8", "Latin-9"): Add input methods,
	mod sample text.

	* international/iso-ascii.el: Make pilcrow convenient string
	consistent with section.
	(iso-ascii-display): Set up multibyte characters as well as
	unibyte.

2000-08-24  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (reset-language-environment): Set
	default-process-coding-system to '(undecided . iso-latin-1), which
	makes process I/O almost consistent with file I/O.   Call this
	function when mule-cmds.el[c] is loaded.

2000-08-22  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in: New file.

2000-08-22  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-output-filter): Compare end of
	comint-last-output-overlay with the start of the newly inserted
	text, not the end, when deciding whether to extend it.
	Set saved-point's insertion type to advance after insertion.

	* shell.el (shell-font-lock-keywords): Remove prompt highlighting,
	since this is now done independently of font-lock mode.

2000-08-21  Gerd Moellmann  <gerd@gnu.org>

	* server.el (server-kill-new-buffers): New user option.
	(server-existing-buffer): New buffer-local variable.
	(server-visit-files): When using an existing buffer, set
	server-existing-buffer to t.
	(server-buffer-done): If server-kill-new-buffers is t, kill the
	buffer, unless it was already present before visiting it with
	Emacs server.

2000-08-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (Man-init-defvars): Don't reset Man-fontify-manpage-flag,
	even if the display doesn't support colors: some displays will
	support bold/underline faces.

2000-08-21  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl.el (cl-macroexpand): Doc fix.

	* startup.el (command-line): If user's init file had an error,
	add explanatory text to *Messages*.

2000-08-21  Kenichi Handa  <handa@etl.go.jp>

	* man.el (Man-getpage-in-background): Decode the process output by
	the system locale coding system.

2000-08-20  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-choose, widget-choice-mouse-down-action):
	Don't test x-popup-menu.
	(function) <complete-function>: Complete only fbound symbols.
	<validate, value>: New.
	(variable) <complete-function>: Complete only bound symbols.
	(coding-system): Add :base-only, :complete-function, :validate,
	:value, :prompt-match.
	(widget-coding-system-prompt-value): Use read-coding-system and
	act on :base-only.
	(editable-field): Add :help-echo.
	(widget-push-button-gui, widget-push-button-cache)
	(widget-gui-action, widget-editable-list-gui): COmment out, along
	with uses.
	(widget-at): Make arg optional.
	(widget-echo-help): Adjust for current help-echo calling sequence.
	(widget-specify-field, widget-specify-button)
	(widget-specify-insert, widget-get-sibling, widget-image-find)
	(widget-convert, widget-insert, widget-leave-text)
	(widget-beginning-of-line, widget-end-of-line, widget-kill-line)
	(widget-setup, widget-field-find, widget-before-change)
	(widget-after-change, widget-default-complete)
	(widget-default-create, widget-default-delete)
	(widget-push-button-value-create, editable-field)
	(widget-field-prompt-value, widget-field-validate)
	(widget-choice-value-create, widget-choice-action)
	(widget-choice-validate, widget-checklist-add-item)
	(widget-radio-add-item, widget-radio-chosen)
	(widget-radio-value-inline, widget-editable-list-value-create)
	(widget-editable-list-entry-create)
	(widget-documentation-link-add)
	(widget-documentation-string-value-create)
	(widget-regexp-validate, widget-file-complete)
	(widget-sexp-validate, widget-plist-convert-widget)
	(widget-plist-convert-widget, widget-alist-convert-widget)
	(widget-alist-convert-widget, widget-color-complete): Simplify,
	particularly to avoid bindings which aren't optimized out.

	* emacs-lisp/lisp.el (defun-prompt-regexp, parens-require-spaces):
	Doc fix.
	(down-list, backward-up-list, up-list, kill-sexp)
	(backward-kill-sexp, mark-sexp): Make arg optional.
	(lisp-complete-symbol): Add optional arg PREDICATE.

	* cus-start.el: Add display-buffer-reuse-frames,
	file-coding-system-alist.

2000-08-20  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Clear realized faces after
	modifying TTY color mappings.

2000-08-20  Miles Bader  <miles@gnu.org>

	* faces.el (face-attr-match-p): Don't return true if ATTRS are
	merely a subset of FACE's attributes.

2000-08-19  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Save the point with a marker,
	not just a buffer position.

	* international/mule.el (set-buffer-process-coding-system): Make
	interactive prompt less confusing.

2000-08-19  Gerd Moellmann  <gerd@gnu.org>

	* hilit-chg.el: General cleanup of doc strings, comments and
	code formatting.

2000-08-19  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-beginning-of-line):
	Compiler macro removed; beginning-of-line is no longer always
	equivalent to forward-line, in the presence of fields.

	* comint.el (comint-output-filter): Remove ad-hoc saving of
	restriction, and just use save-restriction, now that it works
	correctly.  Don't adjust comint-last-input-start to account for
	our insertion; it shouldn't have moved because we don't use
	insert-before-markers anymore.  Comment out call to
	`force-mode-line-update'; why is it here?

	* gud.el (gud-basic-call): Temporarily widen gud comint buffer
	while checking for prompt to delete.  Use `forward-line 0'
	instead of beginning-of-line.
	(gud-filter): Temporarily widen gud comint buffer while
	examining output.

2000-08-18  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/sh-script.el: Big bag of typos.

	* textmodes/ispell.el (ispell-menu-map-needed): Put back the boundp
	check since ispell-process is not bound when ispell is not yet loaded.

2000-08-18  Dave Love  <fx@gnu.org>

	* image.el (find-image): Copy `spec' before using plist-put.

2000-08-18  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/ispell.el (ispell-dictionary-alist-6): Add
	`portugues'.

	* bindings.el (esc-map): Bind `C-delete' and `C-backspace' to
	backward-kill-sexp, analogous to kill-sexp.

	* progmodes/icon.el (icon-indent-line)
	(icon-is-continuation-line): Handle comments specially.

2000-08-17  Ken Stevens  <k.stevens@ieee.org>

	* ispell.el: Set to standard author/maintainer/keyword fields.
	Fine tuning to menu map appearance and operation, and added help.
	Remove `start' and `end' error messages when compiling.
	(ispell-choices-win-default-height): Fixed comment string.
	(ispell-dictionary-alist-1): Fixed regexp in castellano and
	castellano8 dictionaries.
	(ispell-dictionary-alist-3): Fixed regexp in francais dictionary.
	(ispell-dictionary-alist-4): Fixed regexp in francais-tex
	dictionary, added italiano dictionary.
	(ispell-skip-region-alist): Removed regexp thrashing when `-' is a
	word character.
	(ispell-tex-skip-alists): Added psfig support.
	(ispell-skip-html): Renamed from ispell-skip-sgml.
	(ispell-begin-skip-region-regexp, ispell-skip-region)
	(ispell-minor-check): Improved html skipping support to skip across
	code, and recognize `&' commands without proper `;' syntax.
	(ispell-process-line): Fix alignment error when manually
	correcting spelling.
	(ispell): Fix comment string.
	(ispell-add-per-file-word-list): Always put word list on new line.

2000-08-17  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-encode-run-method): Fix error message to say
	`encode' instead of `decode'.  Use save-window-excursion around
	shell-command-on-region as in format-decode-run-method because
	shell-command-on-region can display a buffer with error output.
	(format-decode): Don't record undo information for the decoding.
	(format-annotate-function): Add parameter FORMAT-COUNT.  Make
	that number part of the temporary buffer name so that more than
	one decoding using a temporary buffer can happen safely.

	* enriched.el (enriched-annotation-regexp): Use `A-Z' instead
	of `A-z' in the regexp.

	* hilit-chg.el: Fix typos in commentary.

	* help.el (view-emacs-news): Rewritten for new naming scheme
	for old NEWS files.

	* startup.el (command-line): Pop to *Messages* in case an error
	is signaled while loading user-init-file.

2000-08-17  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Don't lose original file name,
	undoing an undocumented change.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-magic-go): Use comint-bol.
	(sql-copy-column): Use comint-line-beginning-position.
	(comint-line-beginning-position): Define a replacement for
	comint-line-beginning-position if it is not fboundp.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-mode-map): TAB is no longer defined in sql-mode-map;
	it didn't have any effect anyway.

2000-08-17  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-postgres): Jason Beegan's patch uses the parameters
	--pset and pager=off instead of sending \\o|cat at the beginning
	of the session.

2000-08-17  Miles Bader  <miles@gnu.org>

	* progmodes/octave-inf.el: Add compatibility definition of
	comint-line-beginning-position.

2000-08-17  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (normal-top-level): Look in each dir in load-path for
	a leim-list.el file too.  This assures of loading leim-list.el
	that is created at Emacs installation time even if a user have his
	own leim-list.el.

2000-08-17  Miles Bader  <miles@gnu.org>

	* hi-lock.el (hi-yellow, hi-pink, hi-green, hi-blue): Force the
	foreground color to black if the background is dark.

2000-08-16  Stefan Monnier  <monnier@cs.yale.edu>

	* loadhist.el (unload-feature): Typo.

	* finder.el (finder-compile-keywords):
	* cus-dep.el (custom-make-dependencies): Add local-variable settings
	to the generated file.

	* mail/mh-e.el (mh-make-local-vars):
	Replace make-variable-buffer-local with make-local-variable.

	* play/landmark.el:
	* options.el (Edit-options-{set,toggle,t,nil}):
	* mail/mailabbrev.el (mail-abbrevs-mode):
	* textmodes/tex-mode.el (tex-expand-files):
	* textmodes/outline.el (outline-minor-mode): Don't quote lambda.

	* term/bg-mouse.el (bg-mouse-report): screen-height -> frame-height.

	* emacs-lisp/ewoc.el (ewoc-locate): Default POS to (point).
	(ewoc-goto-prev, ewoc-goto-next): Remove arg POS.
	Allow going past the last element.
	* pcvs.el (cvs-mode-previous-line, cvs-mode-next-line, cvs-mode-mark)
	(cvs-mode-unmark-up, cvs-get-marked): Update calls to ewoc.
	(cvs-mouse-toggle-mark): Don't move point.
	(cvs-revert-if-needed): Avoid re-eval of local variables and modes.

	* progmodes/compile.el (grep): Provide a default set of files.
	(next-error): Docstring fix.
	(compilation-find-file): Avoid find-file (fails in a dedicated window).

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use `symbol-value' to keep the byte-compiler quiet.

	* diff-mode.el (diff-mode-map): Bind diff-apply-hunk.
	(diff-find-source-location): New fun, extracted from diff-goto-source.
	(diff-goto-source): Use it.
	(diff-next-complex-hunk, diff-filter-lines): New function.
	(diff-apply-hunk): New command.

	* smerge-mode.el (smerge-mode-menu): Doc fix.

	* msb.el (msb-mode): Define it in terms of define-minor-mode.

2000-08-16  Dave Love  <fx@gnu.org>

	* windmove.el (windmove) <defgroup>: Add :version.

	* net/goto-addr.el: Don't require browse-url.  Require thingatpt.
	(goto-address-fontify-p, goto-address-highlight-p)
	(goto-address-url-face, goto-address-url-mouse-face)
	(goto-address-mail-face, goto-address-mail-mouse-face): Doc fix.
	(goto-address-url-regexp): Use thing-at-point-url-regexp.
	(goto-address-fontify, goto-address-at-mouse): Simplify.
	(goto-address-at-point): browse-url-url-at-point,
	goto-address-find-address-at-point can return nil.
	(goto-address-find-address-at-point): Return nil on failure.

	* align.el (align) <defgroup>: Add :version.

	* calculator.el (calculator): Add :version.
	(calculator): Use two lines for calculator window if `modeline'
	face is boxed.

	* play/5x5.el: Doc fixes.
	(5x5) <defgroup>: Add :version.

	* play/fortune.el (fortune) <defgroup>: Add :version.
	(fortune-append): Fix error message.
	(fortune-from-region): Doc fix.

	* play/pong.el (pong): Doc fix.

	* play/morse.el: Keywords, commentary, autoloads.

2000-08-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* desktop.el (desktop-save): Don't look at symbol-value of a
	member of minor-mode-alist, unless it is boundp.

2000-08-16  Sam Steingold  <sds@gnu.org>

	* buff-menu.el (list-buffers-noselect): Use `dolist' instead Of
	`while'; use `with-current-buffer' instead of `save-excursion'.
	Removed unnecessary kludges now that "*Buffer List*" is excluded.

2000-08-16  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (declare-ccl-program): Docstring modified.
	(ccl-execute-with-args): Likewise.

2000-08-16  Miles Bader  <miles@gnu.org>

	* progmodes/sql.el: Add compatibility definition of
	comint-line-beginning-position.

2000-08-15  Gerd Moellmann  <gerd@gnu.org>

	* buff-menu.el (list-buffers-noselect): Set `buffer' as well as
	'buffer-menu' property.
	(Buffer-menu-buffer): Use `buffer' property if `buffer-name'
	fails.
	(Buffer-menu-execute): When deleting, test `(and buf (buffer-name
	buf))', instead of `(Buffer-menu-buffer nil)', to see if buffer
	wasn't killed.

	* buff-menu.el (list-buffers-noselect): Don't display the
	*Buffer List* buffer.

	* font-lock.el: Require jit-lock to prevent a very late
	`Loading jit-lock' message.

	* emacs-lisp/cust-print.el, emacs-lisp/cl-specs.el
	* emacs-lisp/edebug.el, progmodes/hideif.el: Change authors'
	mail address.

2000-08-15  Miles Bader  <miles@gnu.org>

	* textmodes/ispell.el (ispell-graphic-p): New constant.
	(ispell-choices-win-default-height, ispell-help): Use
	`ispell-graphic-p' instead of `xemacsp'.

2000-08-15  Dave Love  <fx@gnu.org>

	* simple.el: Autoload widget-convert when compiling.
	(mail-user-agent): Doc fix.

	* help.el (function-called-at-point, variable-at-point): Use
	with-syntax-table.
	(help-manyarg-func-alist): Add insert-and-inherit.

	* thingatpt.el (thing-at-point-url-regexp): Prepend `\<'.

	* delsel.el (delsel-unload-hook): New function.

	* find-file.el: Doc fixes.  Move provide to end.
	(ff) <defgroup>: Add :link.
	(ff-goto-click): Deleted.
	(ff-mouse-find-other-file, ff-mouse-find-other-file-other-window):
	Use mouse-set-point.

	* textmodes/tildify.el: Doc fixes.
	(tildify) <defgroup>: Add:version.

	* progmodes/glasses.el (glasses) <defgroup>: Add :version.
	(glasses-custom-set): Use set-default, not set.
	(minor-mode-alist): Propertize the lighter.
	(glasses-mode): Provide optional arg.

	* progmodes/cwarn.el (cwarn) <defgroup>: Add :version, :link.
	(global-cwarn-mode): Don't make it a user option.  Unquote lambda.
	(cwarn-font-lock-feature-keywords-alist): Don't make it a user
	option.  Provide :type.
	(cwarn-configuration): Provide :type.
	(cwarn-mode): Doc fix.

	* add-log.el (change-log-merge): Doc fix.
	(change-log-redate): New command.

	* net/browse-url.el (browse-url-filename-alist): Add a clause for
	Doze and Dog.
	(browse-url): Use dolist, not mapcar.
	(browse-url-at-point): Check for null url.
	(browse-url-event-buffer, browse-url-event-point): Functions
	deleted.
	(browse-url-at-mouse, browse-url-netscape): Simplify.

	* msb.el (msb--few-menus, msb--very-many-menus): Use current Gnus
	modes.
	(msb--init-file-alist, msb--aggregate-alist, msb--add-separators):
	Fix previous change to mapcan.
	(msb--init-file-alist, msb--add-separators)
	(msb--make-keymap-menu): Simplify.
	(msb--choose-file-menu): Use copy-sequence.
	(msb-mode-map): Add title to keymap.
	(msb-unload-hook): New function.

	* bs.el: Fix indentation.
	(bs) <defgroup>: Add :links.
	(bs-show): Doc fix.
	(bs-apply-sort-faces): Don't use window-system.
	(bs-mode-font-lock-keywords): Avoid testing for XEmacs.

2000-08-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/timeclock.el (timeclock-file): Run .timelog through
	convert-standard-filename.

2000-08-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/authors.el: New file.

	* paren.el (show-paren-priority): New user option.
	(show-paren-function): Set overlay priorities to
	show-paren-priority.

2000-08-14  Miles Bader  <miles@gnu.org>

	* comint.el (comint-bol): Use `forward-line 0' instead of calling
	beginning-of-line with inhibit-field-text-motion bound.

2000-08-14  Gerd Moellmann  <gerd@gnu.org>

	* calendar/timeclock.el: New file.

2000-08-14  David Ponce  <david@dponce.com>

	* recentf.el (recent-dialog-mode-map): Bind down-mouse-1 to
	`widget-button-click'. so that one can use left mouse button to
	click on dialog buttons.

2000-08-14  Emmanuel Briot  <briot@gnat.com>

	* xml.el (xml-parse-tag, xml-parse-attlist): Do not downcase
	identifiers, since XML is case sensitive

2000-08-12  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Don't bother frobbing
	window-start, it doesn't seem to be necessary.

	* comint.el (comint-send-string, comint-send-region): Make into
	real functions.  Snapshot the prompt before sending.

2000-08-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-find-emacs-command-nodes): Rewrite to use
	technique similar to Info-index, instead of relying on specific
	names of relevant Index nodes.
	(Info-goto-emacs-command-node): Bind Info-history to nil when
	going to the first node found by Info-find-emacs-command-nodes.

2000-08-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-help-menu): Add a :help string.

2000-08-10  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Doc fixes & misc code cleanup.

2000-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): More elements for the
	autotype, vip, ebrowse, cl, idlwave, reftex, widget, pcl-cvs,
	and woman manuals.

2000-08-10  Miles Bader  <miles@lsi.nec.co.jp>

	* comint.el (comint-send-input): Make the newline boundary overlay
	rear-nonsticky.  Use `insert' instead of `insert-before-markers'.
	(comint-output-filter): Use `insert' instead of
	`insert-before-markers'.  Extend comint-last-output-overlay when
	necessary since we can't rely on insert-before-markers to do it.
	* gud.el (gud-filter): Use `with-current-buffer' instead of
	save-excursion when inserting the output, so that point gets
	updated correctly; the old method relied on a rather dodgy
	side-effect of comint-output-filter to avoid the effect of
	save-excursion.

2000-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (recover-file): Call insert-directory instead of
	invoking `ls' directly.

2000-08-10  Miles Bader  <miles@gnu.org>

	* comint.el (comint-highlight-prompt, comint-highlight-prompt-face)
	(comint-last-prompt-overlay): New variables.
	(comint-output-filter): Implement prompt highlighting.
	(comint-snapshot-last-prompt): New function.
	(comint-send-input): Snapshot the last prompt.
	Use comint-highlight-input-face.
	(comint-highlight-input-face): Renamed from `comint-highlight-face'.
	Use defface instead of defcustom.
	(send-invisible, comint-send-eof): Snapshot the last prompt.
	(comint-delchar-or-maybe-eof): Use comint-send-eof.
	(comint-mode): Make `comint-last-prompt-overlay' buffer-local.

2000-08-09  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el (make-bool-vector): Remove.
	(regexp-opt-group): Use a list of chars for `letters'.
	(regexp-opt-charset): `chars' is now a list of chars.
	Use a char-table rather than a vector so it works for multibyte chars.

	* pcvs.el (cvs-menu): Don't move point.  Use popup-menu.
	Set cvs-minor-current-files to the selected fileinfo.
	(cvs-get-marked): Accept fileinfos in cvs-minor-current-files.
	(cvs-mode-insert): Manually macroexpand `ignore-errors'.

2000-08-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (insert-directory): Don't call access-file on
	directories on DOS and Windows.

2000-08-09  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-embed-data): Make ccl-program-vector
	longer if necessary.
	(ccl-embed-code): Call ccl-embed-data to store CODE in
	ccl-program-vector.

2000-08-09  Miles Bader  <miles@gnu.org>

	* comint.el (comint-output-filter): Properly handle the case where
	the text surrounded by comint-last-output-overlay was deleted.

2000-08-08  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-insert-dir): Use Info-additional-directory-list if
	non-nil.
	(Info-file-list-for-emacs): Remove "info" from the list because
	that leads to trying to use the documentation from file `info'
	in various situations where it isn't appropriate, for instance
	C-h C-k C-h i.

	* ffap.el (ffap-read-file-or-url-internal): Handle case that
	DIR and/or STRING are nil.

	* progmodes/compile.el (compilation-setup): Make variable
	compilation-error-screen-columns buffer-local, as some comment
	in the code suggests it should be.

	* files.el (auto-mode-interpreter-regexp): New variable.
	(set-auto-mode): Use it.

	* indent.el (indent-for-tab-command): Doc fix.

	* mouse-sel.el (mouse-sel-mode): Doc fix.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Handle `#N='
	labels.

	* help.el (print-help-return-message): When
	display-buffer-reuse-frames is set, let the help window been quit,
	instead of deleting it, which might delete a reused frame.

2000-08-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired-aux.el (dired-do-create-files): On DOS/Windows, allow to
	rename a directory to a name that differs only by its letter case.

2000-08-08  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-define-rules): Handle Quail decode
	map correctly.  Add code for supporting annotations.
	(quail-install-decode-map): New function.
	(quail-defrule-internal): New optional arguments decode-map and
	props.
	(quail-advice): New function.

2000-08-07  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent `defclass',
	`defconst', `define-condition', `with-slots'.
	* font-lock.el (lisp-font-lock-keywords-2): Added `with-' and `do-'.

2000-08-03  Miles Bader  <miles@gnu.org>

	* comint.el (comint-use-prompt-regexp-instead-of-fields):
	New variable.
	(comint-prompt-regexp, comint-get-old-input): Document dependence on
	comint-use-prompt-regexp-instead-of-fields.
	(comint-send-input): Add `input' field property to stuff we send to
	the process, if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-output-filter): Add `output' field property to process
	output, if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-replace-by-expanded-history)
	(comint-get-old-input-default, comint-show-output)
	(comint-backward-matching-input, comint-forward-matching-input)
	(comint-next-prompt, comint-previous-prompt): Use field
	properties if comint-use-prompt-regexp-instead-of-fields is nil.
	(comint-line-beginning-position): New function.
	(comint-bol): Use comint-line-beginning-position.  Make ARG optional.
	(comint-replace-by-expanded-history-before-point): Use
	comint-line-beginning-position and line-end-position.
	(comint-last-output-overlay): New variable.
	(comint-mode): Make `comint-last-output-overlay' buffer-local.

	* shell.el (shell-prompt-pattern): Doc change.
	(shell-backward-command): Use line-beginning-position.

	* gud.el (gud-gdb-complete-command): Use
	comint-line-beginning-position.

	* ielm.el (ielm-indent-line): Detect a "prompt" line by seeing if
	comint-bol doesn't actually go to the beginning of the line.

	* hippie-exp.el (try-expand-line): Only use comint-prompt-regexp
	if comint-use-prompt-regexp-instead-of-fields is non-nil.
	(try-expand-line-all-buffers): Likewise.

	* progmodes/sql.el (sql-magic-go): Use comint-bol instead of
	explicitly matching comint-prompt-regexp.
	(sql-copy-column): Use comint-line-beginning-position instead of
	explicitly matching comint-prompt-regexp.

	* progmodes/octave-inf.el (inferior-octave-complete): Use
	comint-line-beginning-position.

	* progmodes/inf-lisp.el (inferior-lisp-prompt): Doc change.

	* progmodes/idlw-shell.el (idlwave-shell-send-command): When
	looking for a prompt, use `forward-line 0' instead of
	`beginning-of-line', to avoid getting caught by an input field.

2000-08-07  Gerd Moellmann  <gerd@gnu.org>

	* files.el (shell-quote-wildcard-pattern): Make sure to return
	PATTERN, in the Unix case.

2000-08-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/zone.el (zone): Discard any pending input before running
	the randomly-chosen pgm.

2000-08-07  Kenichi Handa  <handa@etl.go.jp>

	* emacs-lisp/bytecomp.el (byte-compile-fix-header): Fix the way of
	checking the existence of any multibyte characters.

2000-08-06  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-mode): Test minor-mode symbol for being
	bound before testing its value for being nil.

	* pcvs-util.el, cvs-status.el, pcvs.el: Use `nth' instead of
	`first', `second', and `third'.

	* emacs-lisp/cl.el (third...tenth): Undo change of 2000-08-05.
	(second): Make it an alias for `cadr'.

2000-08-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* bs.el (bs-apply-sort-faces): Don't use window-system, since all
	types of display support faces now.

2000-08-05  Gerd Moellmann  <gerd@gnu.org>

	* pcvs.el (require): Require `cl' during compilation, only.

	* emacs-lisp/cl.el (first, ..., tenth): Make them macros.
	(toplevel): Remove `remq' and `remove' from autoloads.
	(cl-fake-autoloads): New variable.  If set, arrange for an error
	when CL functions etc. are autoloaded.

2000-08-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/zone.el (zone, zone-pgm-stress): Don't use window-system.

	* hi-lock.el (hi-lock-unface-buffer): If a menu of regexps is
	popped up, but the user clicks outside the menu, return an empty
	regexp (that causes unhighlight-regexp to have no effect).

	* menu-bar.el (menu-bar-games-menu): Add Zone.

	* hi-lock.el (toplevel): Require font-lock.

2000-08-03  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* progmodes/ebnf2ps.el: Get around a bug on skip-chars-forward.
	(ebnf-8-bit-chars): New var for bug fix.
	(ebnf-string): Bug fix.

2000-08-03  Sam Steingold  <sds@gnu.org>

	* pcvs.el (cvs-do-commit): Use `buffer-substring-no-properties'
	instead of `buffer-string'.
	(require 'cl): Always, not just when compiling.
	`ignore-errors' in `interactive', `list*', `defun*' &c make this
	necessary.

2000-08-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (select-safe-coding-system): Make
	the message text about selecting a safe coding system more clear.

2000-08-02  Gerd Moellmann  <gerd@gnu.org>

	* hi-lock.el: New file.

	* play/zone.el: New file.

	* replace.el (occur): Set tab-width in the *Occur* buffer to the
	value of tab-width in the original buffer.  Choose a line number
	format that's a multiple of the original buffer's tab width, so
	that lines appear right.

	* textmodes/ispell.el (ispell): New function, replacing an alias.
	Spell-check active region if in transient-mark-mode and mark
	is active; otherwise spell-check buffer.

2000-08-02  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el: Fix a customization problem on
	ps-mule-font-info-database-default.

2000-08-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/ebrowse.el (ebrowse-tree-mode-map): Use
	display-mouse-p instead of window-system.
	(ebrowse-member-mode-map): Ditto.

2000-08-01  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* progmodes/ebnf2ps.el: Update ps-print functions call.
	Indentation fix.  Doc fix.
	(ebnf-version): New version number (3.2).
	(ebnf-format-color, ebnf-begin-job): Code fix.

2000-08-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* net/net-utils.el (nslookup-font-lock-keywords): Don't condition
	font lock support on window-system.
	(ftp-font-lock-keywords, smbclient-font-lock-keywords): Likewise.

	* textmodes/ispell.el (ispell-highlight-spelling-error): Use
	display-color-p, if fboundp, instead of window-system.

2000-07-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/appt.el (appt-disp-window): Use display-multi-frame-p
	instead of window-system.

	* wid-edit.el (widget-choose): Use display-mouse-p instead of
	window-system.
	(widget-choice-mouse-down-action): Use display-popup-menus-p
	instead of window-system.

	* strokes.el (strokes-file): Run the file name through
	convert-standard-filename.
	(strokes-mode): Call display-mouse-p instead of looking at
	window-system.  Change the error message accordingly.

	* progmodes/cpp.el (toplevel): Support faces on tty's.

	* play/landmark.el (lm-font-lock-face-O, lm-font-lock-face-X)
	(lm-plot-square, lm-init-display): Don't use window-system.

	* play/gomoku.el (gomoku-font-lock-O-face, gomoku-font-lock-X-face)
	(gomoku-plot-square, gomoku-init-display): Don't use window-system.

	* mail/rmail.el (rmail-start-mail): Use display-multi-frame-p
	instead of looking at window-system.

2000-07-30  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-entryfn-p): Test this-command instead
	of testing if iswitchb-prepost-hooks is bound, because the
	latter will always be true when invoking a recursive minibuffer
	from an active Iswitchb buffer.

2000-07-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (shell-quote-wildcard-pattern): New function.
	(insert-directory): Call it.  Only prepend "\" to command on Unix
	and GNU/Linux systems.

2000-07-30  Gerd Moellmann  <gerd@gnu.org>

	* eshell/esh-groups.el: Change custom :link file names
	from `eshell.info' to `eshell'.

2000-07-30  Francis Wright  <fjw@maths.qmw.ac.uk>

	* dired.el (dired-build-subdir-alist): Expand subdirectory names
	correctly in recursive ange-ftp listings.

2000-07-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug 1: if ps-font-size-internal,
	ps-header-font-size-internal and
	ps-header-title-font-size-internal variables are not set,
	ps-nb-pages and ps-line-lengths-internal crashes.  Fix bug 2: if
	face text property is (foreground-color . COLOR) or
	`(background-color . COLOR)', ps-print crashes.  Doc fix.
	(ps-print-version): New version number (5.2.4).
	(ps-plot-region): Code fix.
	(ps-nb-pages, ps-line-lengths-internal): Bug fix 1.
	(ps-face-attribute-list, ps-face-attributes, ps-face-background):
	Bug fix 2.

2000-07-30  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el (glasses-make-readable): Fix uncapitalization of
	identifiers like `myXMLDocument'.

2000-07-28  Karl Fogel  <kfogel@red-bean.com>

	* mail/mail-hist.el (mail-hist-previous-input)
	(mail-hist-next-input): Do the obvious code factorization.
	(mail-hist-retrieve-and-insert): New func, contains common
	code of above two.
	If inserting a message body, leave point at top.

2000-07-28  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el (ange-ftp-verify-visited-file-modtime):
	Use `<=', not `<' to compare times!
	(ange-ftp-ls): Remove.

2000-07-27  Gerd Moellmann  <gerd@gnu.org>

	* play/cookie1.el: Add explanation of how to make cookie.el
	compatible with strfile(1) to comment.

	* subr.el (remove, remq): New functions.

	* midnight.el (clean-buffer-list-kill-never-regexps): Correctly
	escape `*' in regexps.
	(midnight-find): Reverse order of arguments in the funcall of
	TEST.

	* bindings.el (completion-ignored-extensions): Add `.la', `.lo',
	and `.class'.

	* play/meese.el: Add Commentary section.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-ms): Added autoload cookie.
	(sql-ingres, sql-solid, sql-mysql, sql-informix, sql-sybase)
	(sql-oracle): Ditto.
	(sql-help): Doc change.

	(sql-mode-oracle-font-lock-keywords): Added PL/SQL keywords, data
	types and exceptions.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-placeholder-history): New variable.
	(sql-query-placeholders-and-send): New function that will query
	the user and replace placeholders with user input.
	(sql-oracle): If running on NT, set comint-input-sender to
	sql-query-placeholders-and-send.

	(sql-stop): If in the SQLi buffer, insert stop notification, else
	present it as a message.

2000-07-27  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-input-ring-separator): Doc change.
	(sql-input-ring-file-name): Doc change.
	(sql-interactive-mode): Use `sql-input-ring-separator' and
	`sql-input-ring-file-name' to set the comint-mode equivalents
	without making them local variables.
	(sql-stop): Don't bind `sql-input-ring-separator' and
	`sql-input-ring-file-name' dynamically to their comint-mode
	equivalents.

2000-07-27  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (register-char-codings): New function.
	(make-coding-system): Handle `safe-chars' specification in the arg
	PROPERTY.

	* international/mule-cmds.el
	(find-coding-systems-region-subset-p): This function deleted.
	(sort-coding-systems-predicate): New variable.
	(sort-coding-systems): New function.
	(find-coding-systems-region): Use
	find-coding-systems-region-internal.
	(find-coding-systems-string): Use find-coding-systems-region.
	(find-coding-systems-for-charsets): Check
	char-coding-system-table.
	(select-safe-coding-system-accept-default-p): New variable.
	(select-safe-coding-system): Mostly rewritten.  New argument
	ACCEPT-DEFAULT-P.
	(select-message-coding-system): Call select-safe-coding-system
	with ACCEPT-DEFAULT-P arg.
	(reset-language-environment): Reset default-sendmail-coding-system
	to the default value iso-latin-1.
	(set-language-environment): Don't set the obsolete variable
	charset-origin-alist.

	* international/codepage.el (cp-coding-system-for-codepage-1):
	Give `safe-chars' property to make-coding-system.

	* mail/sendmail.el (sendmail-send-it): Improve the way to avoid
	calling select-message-coding-system twice.

	* language/cyrillic.el (cyrillic-koi8): Use `safe-chars' property
	instead of `safe-charsets'.
	(cyrillic-alternativnyj): Likewise.
	(ccl-encode-alternativnyj): Don't check the charset
	cyrillic-iso8859-5.

2000-07-27  Kenichi Handa  <handa@etl.go.jp>

	* composite.el (compose-chars-after): Preserve match data.

2000-07-26  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el (ange-ftp-file-newer-than-file-p): New function.
	(ange-ftp-real-file-newer-than-file-p): New function.
	(ange-ftp-verify-visited-file-modtime): Use `float-time'.
	(ange-ftp-dot-to-slash): Removed (use `subst-char-in-string').

	* tooltip.el (tooltip-float-time): Removed (use `float-time').
	* midnight.el (midnight-float-time): Ditto.

2000-07-26  Andreas Schwab  <schwab@suse.de>

	* files.el (normal-backup-enable-predicate): Correct
	interpretation of the return value of compare-strings.

2000-07-26  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-resume): New function.
	(isearch-done): Add something to command-history to resume
	the search.
	(isearch-yank-line, isearch-yank-word): Use
	buffer-substring-no-properties instead of buffer-substring.

	* textmodes/flyspell.el (flyspell-mouse-map): Use `map' instead
	of flyspell-mouse-map.

	* progmodes/make-mode.el (makefile-mode-abbrev-table): Remove
	duplicate definition.
	(makefile-mode): Remove duplicate setting of local-abbrev-table.

	* progmodes/m4-mode.el (m4-mode-abbrev-table): New variable.
	(m4-mode): Set local-abbrev-table to m4-mode-abbrev-table.

2000-07-25  Sam Steingold  <sds@gnu.org>

	* net/ange-ftp.el: Get modtime over the net.
	(ange-ftp-file-modtime): New function.
	(ange-ftp-write-region, ange-ftp-insert-file-contents)
	(ange-ftp-file-attributes, ange-ftp-verify-visited-file-modtime):
	Use it.
	(ange-ftp-dot-to-slash): New function.
	(ange-ftp-fix-name-for-vms): Use it.

	* midnight.el (midnight-buffer-display-time): Use
	`with-current-buffer'.

2000-07-25  Gerd Moellmann  <gerd@gnu.org>

	* find-dired.el: Update copyright notice.
	(find-dired): Offer to kill a running `find'.

	* enriched.el (enriched-face-ans): For a `foreground-color'
	property, return '(("x-color" COLOR))' so that COLOR will be
	output as a parameter of the x-color annotation.  Likewise for the
	`background-color' property.  In the case of normal face
	properties, don't return annotations for unspecified foreground
	and background face attributes.

2000-07-25  Kenichi Handa  <handa@etl.go.jp>

	* language/japan-util.el (japanese-katakana-region): Fix handling
	HANKAKU argument.

2000-07-25  Miles Bader  <miles@gnu.org>

	* simple.el (line-move): Pass INHIBIT-CAPTURE-PROPERTY argument to
	constrain-to-field.  Pass nil ESCAPE-FROM-EDGE argument to
	constrain-to-field.

2000-07-24  Andrew Innes  <andrewi@gnu.org>

	* timer.el (timer-activate-when-idle): Add optional parameter
	DONT-WAIT.  Update docstring.
	(run-with-idle-timer): Specify extra parameter to
	timer-activate-when-idle, so that timer will be activated
	immediately if Emacs is already idle.

	* w32-fns.el (w32-using-nt): Fix docstring.

2000-07-24  Dave Love  <fx@gnu.org>

	* mouse.el (popup-menu): Set last-command-event.
	(mouse-major-mode-menu-prefix): Declare.

2000-07-24  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/flyspell.el: Update to author's version 1.5d.

	* progmodes/hideshow.el: Update copyright notice.

	* vcursor.el: Set maintainer to FSF, since author cannot
	be reached.

2000-07-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-goto-emacs-key-command-node): Leave a space after
	the prompt.

	* mouse.el (popup-menu): Run the keymap through indirect-function,
	in case it was defined with define-prefix-key.  If the menu is a
	list of keymaps, look up the binding of user's choice in each one
	of the keymaps.
	(mouse-popup-menubar): If the global and local menu-bar keymaps
	don't have a prompt string, create one and insert it into the
	keymap.  Don't barf if current-local-map returns nil.

2000-07-24  Francis Wright  <fjw@maths.qmw.ac.uk>

	* dired.el (dired-sort-R-check): Added to allow recursive listing
	to be undone.
	(dired-sort-other): Use it.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* Release of cc-mode 5.27

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-looking-at-inexpr-block): Replaced a call to
	c-beginning-of-statement-1 that caused a bad case of recursion
	which could consume a lot of CPU in large classes in languages
	that have in-expression classes (i.e. Java and Pike).

	* cc-engine.el (c-guess-basic-syntax): Check for in-expression
	statements before top level constructs (i.e. case 6 is moved
	before case 5 and is now case 4) to catch in-expression
	classes in top level expressions correctly.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Less naive handling of
	objc-method-intro. Case 4 removed and case 5I added.

	* cc-langs.el (c-append-paragraph-start): New variable used by
	c-common-init to get paragraph-start correct.
	* cc-langs.el (c-common-init): Use c-append-paragraph-start to
	initialize paragraph-start to make it correct both with and
	without the javadoc special case.

	* cc-mode.el (java-mode): Use c-append-paragraph-start to
	initialize paragraph-start for javadoc markup.

	* cc-vars.el (c-style-variables-are-local-p): Incompatible
	change by defaulting this to t.  It's motivated by the
	confusing behavior that otherwise arise from the style system
	when editing both java and non-java files at the same time
	(see the comments about style setting in c-common-init).

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-new-comment-line): Added a kludge
	similar to the one in c-fill-paragraph to check the fill
	prefix from the adaptive fill function for sanity.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-end-of-defun-1): Fixed forward scanning into
	defun block.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-lineup-multi-inher): Handle lines with
	leading comma nicely. Extended to handle member initializers
	too.

	* cc-engine.el (c-beginning-of-inheritance-list)
	(c-guess-basic-syntax): Fixed recognition of inheritance lists
	when the lines begins with a comma.

	* cc-vars.el (c-offsets-alist): Changed default for
	member-init-cont to c-lineup-multi-inher since it now handles
	member initializers and indents better for leading commas.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-electric-brace): Fixed some bugs in the state
	handling that caused class open lines to be recognized as
	statement-conts in some cases.

	* cc-cmds.el (c-indent-new-comment-line): Keep the fill prefix
	guessed by the adaptive fill function unless point is on the
	first line of a block comment.

	* cc-engine.el (c-forward-syntactic-ws): Fixed an infloop bug
	when the buffer ends with a macro continuation char.

	* cc-engine.el (c-guess-basic-syntax): Added support for
	function definitions as statements in Pike.  The first
	statement in a lambda block is now labeled defun-block-intro
	instead of statement-block-intro.

	* cc-engine.el (c-narrow-out-enclosing-class): Whack the state
	so that the class surrounding point is selected, not the one
	innermost in the state.

	* cc-engine.el (c-guess-basic-syntax): Fixed bug in
	recognition of switch labels having hanging multiline
	statements.

	* cc-engine.el (c-beginning-of-member-init-list): Broke out
	some code in c-guess-basic-syntax to a separate function.
	* cc-engine.el (c-just-after-func-arglist-p): Fixed
	recognition of member inits with multiple line arglists.
	* cc-engine.el (c-guess-basic-syntax): New case 5B.3 to detect
	member-init-cont when the commas are in funny places.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-auto-newline): Removed this macro since it's
	not used anymore.

	* cc-engine.el (c-looking-at-bos): New helper function.
	* cc-engine.el (c-looking-at-inexpr-block): More tests to tell
	inexpr and toplevel classes apart in Pike.

	* cc-engine.el (c-guess-basic-syntax): Fixed bogus recognition
	of case 9A.

	* cc-langs.el, cc-mode.el (c-Pike-inexpr-class-key): New
	constant, since "class" can introduce an in-expression class
	in Pike nowadays.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-align.el (c-gnu-impose-minimum): Don't impose minimum
	indentation on cpp-macro lines.

	* cc-engine.el (c-guess-basic-syntax): Made the cpp-macro
	a syntax modifier like comment-intro, to make it possible to
	get syntactic indentation for preprocessor directives.  It's
	incompatible wrt to lineup functions on cpp-macro, but it has
	no observable effect in the 99.9% common case where cpp-macro
	is set to -1000.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Fixed bug with missed
	member-init-cont when the preceding arglist is several lines.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-styles.el (c-style-alist): The basic offset for the BSD
	style corrected to 8.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-styles.el (c-style-alist): Adjusted the indentation of
	brace list openers in the gnu style.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-command): Obey c-syntactic-indentation.

	* cc-cmds.el (c-electric-brace, c-electric-slash,
	c-electric-star, c-electric-semi&comma, c-electric-colon,
	c-electric-lt-gt, c-electric-paren): Don't reindent old lines
	when c-syntactic-indentation is nil.

	* cc-engine.el (c-beginning-of-statement-1): Fixed bug where
	we were left at comments preceding the first statement when
	reaching the beginning of the buffer.

	* cc-vars.el (c-syntactic-indentation): New variable to turn
	off all syntactic indentation.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-fill-paragraph): Keep one or two spaces
	between the text and the block comment ender when it hangs,
	depending on how many there are before the fill.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-beginning-of-closest-statement): New helper
	function to go back to the closest preceding statement start,
	which could be inside a conditional statement.
	* cc-engine.el (c-guess-basic-syntax): Use
	c-beginning-of-closest-statement in cases 10B.2, 17B and 17C.

	* cc-engine.el (c-guess-basic-syntax): Better handling of
	arglist-intro, arglist-cont-nonempty and arglist-close when
	the arglist is nested inside parens.  Cases 7A, 7C and 7F
	changed.

	* cc-langs.el (c-Java-javadoc-paragraph-start): Brought
	up-to-date with javadoc 1.2.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-beginning-of-statement-1): Fixed handling of
	multiline Pike type decls.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-cmds.el (c-indent-new-comment-line): Always break
	multiline comments in multiline mode, regardless of
	comment-multi-line.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-engine.el (c-guess-basic-syntax): Fixed bug with
	fully::qualified::names in C++ member init lists.  Preamble in
	case 5D changed.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-langs.el (c-common-init): Handling of obsolete variables
	moved to c-initialize-cc-mode.  More compatible style override
	when using global style variables.
	* cc-mode.el (c-initialize-cc-mode): Handling of obsolete
	variables moved here.

	* cc-styles.el (c-make-styles-buffer-local): Flag style
	variable localness in c-style-variables-are-local-p to make
	the compatibility measure in c-common-init work well.

	* cc-styles.el (c-set-style-1): c-special-indent-hook can no
	longer contain set-from-style.
	* cc-styles.el (c-initialize-builtin-style): Don't check for
	set-from-style on c-special-indent-hook.
	* cc-styles.el (c-copy-tree): Obsolete.  The standard function
	copy-alist is sufficient now.

	* cc-styles.el (c-set-style, c-set-style-1,
	c-get-style-variables): Fixes to variable initialization so
	that duplicate entries in styles have the same effect
	regardless of DONT-OVERRIDE.

	* cc-styles.el (c-set-style-2): Fixed bug where the
	initialization of inheriting styles failed when the
	dont-override flag is set.

	* cc-vars.el (c-special-indent-hook): Don't use set-from-style
	on this.

2000-07-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* cc-defs.el (c-forward-comment): Removed the workaround
	introduced in 5.38 since it had worse side-effects.  If a line
	contains the string "//\"", it regarded the // as a comment
	start since the \ temporarily doesn't have escape syntax.

2000-07-17  Emmanuel Briot  <briot@act-europe.fr>

	* ada-mode.el: Got rid of all byte-compiler warnings on Emacs Load
	ada-xref.el before ada-prj.el, so that the Project menu is created
	when ada-prj tries to add to it.
	(ada-activate-keys-for-case): Suppress the characters that are not
	part of the Ada syntax. Better compatibility with else-mode.
	(ada-adjust-case-interactive): When auto-casing is not active,
	correctly insert newlines (used to insert only ^M).  Prevent the
	syntax table from being changed in case of an error
	(or '_' becomes part of a word and some commands are confused).
	Do nothing if ada-auto-case is nil.
	(ada-after-keyword-p): Ignore keywords that are also attributes.
	(ada-batch-reformat): Update usage comment.
	(ada-call-from-contextual-menu): New function.
	(ada-case-read-exceptions): Reinitialize the casing exception list
	first to nil first, so that the casing exception file can be
	shared.
	(ada-check-defun-name): Handles "configure" keyword for gnatdist
	files.
	(ada-compile-goto-error): Fix regexp used to detect a file:line
	anywhere in the error message.
	(ada-contextual-menu-last-point): New variable.
	(ada-create-keymap): If the variable delete-key-deletes-forward is
	t on XEmacs, it means that DEL should delete one character
	forward.
	(ada-create-menu): Use :included instead of :visible for XEmacs.
	New submenu "Options".
	(ada-end-stmt-re): Correctly indent "select ... then abort"
	statements.
	(ada-fill-comment-paragraph): Correctly delete all leading '--'
	even if they don't match ada-fill-comment-prefix Fix handling of
	paragraphs on the first or last line of a file.
	(ada-format-paramlist): Fix handling of default parameter values.
	(ada-get-body-name): New function.
	(ada-get-current-indent): Optimized by searching directly for an
	existing generic part or a statement outside of it.  Handle
	ada-indent-align-comments when indenting comments Replaced some
	regexps by testing directly the next character. This results in a
	huge speedup on some files.  New indentation scheme for renames
	statements.  Stop looking for the 'while' or 'for' associated with
	a 'loop' at the first semicolon encountered.  A "return" can also
	match an anonymous access subprogram declaration.
	(ada-get-indent-noindent): Ignore strings and comments when
	looking for the keywords "record" and "private".
	(ada-goto-matching-decl-start): When matching "if", make sure we
	are not in fact seeing "end if".  Ignore "when" statements except
	when initial keyword was "begin".  Fix handling of nested
	procedures.  Add a recursive call to this function to skip over
	other 'end' statmts.  Fix indentation for "when .. => begin".
	(ada-in-open-paren-p): Fix indentation for complex boolean
	expressions, where 'and then', 'or else' and parenthesis
	statements are mixed up.
	(ada-in-paramlist-p): Skip comments while searching for the
	beginning Fix handling of operator declarations.
	(ada-indent-align-comments): New variable.
	(ada-indent-current): Change the syntax table only in the
	protected section, so that we are sure it is restored correctly.
	(ada-indent-on-previous-lines): Use ada-use-indent and
	ada-with-indent.  Correctly indent "select ... then".
	(ada-indent-region): Slight speedup.
	(ada-indent-renames): New variable.
	(ada-last-which-function-subprog, ada-last-which-function-line):
	New variables.
	(ada-looking-at-semi-private): Correctly indent the 'private'
	keyword when it is the first word in a package declaration.
	(ada-loose-case-word): Stop searching if at the end of the buffer.
	(ada-loose-case-word, ada-capitalize-word): Recase the whole word
	even if point is not initially at the end of the word.
	(ada-matching-decl-start-re): Add "when".
	(ada-mode): Add support for abbrev-mode, outline-mode and
	which-func-mode Override the old find-file.el entry in
	ff-special-constructs since it is using the obsolete
	ada-spec-suffix variable.
	(ada-no-auto-case): New function.
	(ada-scan-paramlist): When parsing the argument type, accept
	spaces (as in "X 'Class", generated by Rational Rose).
	(ada-other-file-name): No longer loads the other file.
	(ada-popup-menu): Save and restore the current buffer and cursor
	position before and after displaying the menu.
	(ada-search-ignore-complex-boolean): New function.
	(ada-uncomment-region): Emacs21 already knows how to delete
	comments not starting in the first column.
	(ada-use-indent): New variable.
	(ada-which-function): New function.
	(ada-with-indent): New variable.
	(ada-xemacs): Evaluate it at compile time too, so that ada-mode.el
	can be batch-compiled from the command line.

	* ada-xref.el: Got rid of all byte-compiler warnings on Emacs.
	Add to the menu when the file is loaded, not in ada-mode-hook.
	Add -toolbar to the default ddd command Switches moved from
	ada-prj-default-comp-cmd and ada-prj-default-make-cmd to
	ada-prj-default-comp-opt.
	(ada-add-ada-menu): Remove the map and name parameters.  Add the Ada
	Reference Manual to the menu.
	(ada-check-current): Rewritten as a call to ada-compile-current.
	(ada-compile): Removed.
	(ada-compile-application, ada-compile-current, ada-check-current):
	Set the compilation-search-path so that compile.el automatically
	finds the sources in src_dir.  Automatic scrolling of the
	compilation buffer.  C-uC-cC-c asks for confirmation before
	compiling.
	(ada-compile-current): New parameter, prj-field.
	(ada-complete-identifier): Load the .ali file before doing
	processing.
	(ada-find-ali-file-in-dir): prepend build_dir to obj_dir to
	conform to gnatmake's behavior.
	(ada-find-file-in-dir): New function.
	(ada-find-references): Set the environment variables for gnatfind.
	(ada-find-src-file-in-dir): New function.
	(ada-first-non-nil): Removed.
	(ada-gdb-application): Add support for jdb, the java debugger.
	(ada-get-ada-file-name): Load the original-file first if not done
	yet.
	(ada-get-all-references): Handles the new ali syntax (parent types
	are found between <>).
	(ada-initialize-runtime-library): New function.
	(ada-mode-hook): Always load a project file when a file is opened,
	so that the casing exceptions are correctly read.
	(ada-operator-re): Add all missing operators ("abs", "rem", "**").
	(ada-parse-prj-file): Use find-file-noselect instead of find-file
	to open the project file, since the latter does not work with
	speedbar Get default values before loading the prj file, or the
	default executable file name is wrong.  Use the absolute value of
	src_dir to initialize ada-search-directories and
	compilation-search-path,...  Add the standard runtime library to
	the search path for find-file.
	(ada-prj-default-debugger): Was missing an opening '{'.
	(ada-prj-default-bind-opt, ada-prj-default-link-opt): New
	variables.
	(ada-prj-default-gnatmake-opt): New variable.
	(ada-prj-find-prj-file): Handles non-file buffers For non-Ada
	buffers, the project file is the default one Save the windows
	configuration before displaying the menu.
	(ada-prj-src-dir, ada-prj-obj-dir, ada-prj-comp-opt,...): Removed.
	(ada-read-identifier): Fix xrefs on operators (for "mod", "and",
	...)  regexp-quote identifiers names to support operators +,
	-,... in regexps.
	(ada-remote): New function.
	(ada-run-application): Erase the output buffer before starting the
	run Support remote execution of the application.  Use
	call-process, or the arguments are incorrectly parsed.
	(ada-set-default-project-file): Reread the content of the active
	project file, not the one from the current buffer When a project
	file is set as the default project, all directories are
	automatically associated with it.
	(ada-set-environment): New function.
	(ada-treat-cmd-string): New special variable ${current}.
	(ada-treat-cmd-string): Revised.  The substitution is now done for
	any ${...} substring.
	(ada-xref-current): If no body was found, compiles the spec
	instead.  Setup ADA_{SOURCE,OBJECTS}_PATH before running the
	compiler to get rid of command line length limitations.
	(ada-xref-get-project-field): New function.
	(ada-xref-project-files): New variable.
	(ada-xref-runtime-library-specs-path)
	(ada-xref-runtime-library-ali-path): New variables.
	(ada-xref-set-default-prj-values): Default run command now does a
	cd to the build directory.  New field: main_unit Provide a default
	file name even if the current buffer has no prj file.

	* ada-prj.el:
	Rewritten to show a tabbed-dialog.
	(ada-prj-add-ada-menu): Remove the map and name parameters.
	(ada-prj-display-page, ada-prj-field, ada-prj-initialize-values):
	New function.
	(ada-prj-load-directory, ada-prj-subdirs-of): New functions.
	(ada-prj-load-from-file): New function.
	(ada-prj-save): Always save fields that depend on the current buffer.
	(ada-prj-show-value): New function

	* ada-stmt.el (ada-stmt-add-to-ada-menu): Hide the menu if not in
	Ada mode. This will allow us to display the Ada menu in any buffer
	we want (for project items).
	(ada-header-tmpl): Use ada-fill-comment-prefix to put the correct
	number of spaces in the header.

2000-07-24  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Bind face-help.

2000-07-23  Noah Friedman  <friedman@splode.com>

	* type-break.el (type-break): perform autosave.
	Suggested by Stephen Gildea <gildea@stop.mail-abuse.org>.
	(type-break-do-query): Cancel query schedule while performing
	actual query, to avoid possibility of a second query being made
	while first one is already in progress.
	(type-break-time-stamp-format): New variable.
	(type-break-time-stamp): New function.
	(type-break-time-warning): Use it.
	(type-break-keystroke-warning): Use it.
	(type-break-noninteractive-query): Use it.

	* emacs-lisp/eldoc.el (eldoc-minor-mode-string): Add autoload
	cookie.
	Use add-minor-mode to set minor-mode-alist, if available.
	(eldoc-echo-area-use-multiline-p): New user option.
	(eldoc-echo-area-multiline-supported-p): New variable.
	(eldoc-docstring-format-sym-doc): Use them.
	(eldoc-mode): If not using idle timers, append to local post and
	pre command hooks.  Suggested by David Byers <davby@ida.liu.se>.
	(eldoc-display-message-no-interference-p): Don't interfere with
	edebug.
	Add autoload cookie for eldoc-mode minor-mode-alist initialization.
	(eldoc-function-arglist): New function.
	(eldoc-function-argstring): Use it.

	* menu-bar.el (menu-bar-files-menu [recover-session]): Make sure
	auto save directory exists before calling directory-files.

2000-07-23  Dave Love  <fx@gnu.org>

	* international/iso-transl.el (iso-transl-char-map): Fix ^e, ^i,
	^o, ^u.

2000-07-21  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Modify to use overlay
	now passed to the function.  It now works properly.

	* smerge-mode.el (smerge-mode-menu): Fill it out.

2000-07-20  Gerd Moellmann  <gerd@gnu.org>

	* info-look.el (info-lookup): If *info* is shown in another frame
	on the same display, select that frame, instead of switching to
	the Info buffer in another window of the selected frame.

	* simple.el (universal-argument-map): Bind numeric keypad keys
	kp-0 to kp-9 and kp-subtract.
	(digit-argument): Handle these keys.

2000-07-20  Dave Love  <fx@gnu.org>

	* net/goto-addr.el (goto-address-fontify): Don't bother with
	buffer-modified and read-only stuff -- irrelevant with overlays.
	Put an extra property on the overlays and use it to clean up in
	case goto-address is re-run.

2000-07-19  Richard M. Stallman  <rms@gnu.org>

	* timer.el (run-with-idle-timer): Doc fix.

	* mail/mail-utils.el (mail-strip-quoted-names):
	Handle case where <...> appears inside "...".
	Use replace-match to edit the string more simply.
	(rmail-dont-reply-to): Cope with an unmatched ".

2000-07-19  Dave Love  <fx@gnu.org>

	* ediff-init.el (ediff-region-help-echo): Partially fix for Emacs
	implementation.

	* mouse.el (popup-menu): Allow a list of keymaps for menu arg.
	(mouse-popup-menubar, mouse-popup-menubar-stuff): New functions.
	(global-map): Bind c-down-mouse-3 to mouse-popup-menubar-stuff.

2000-07-19  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/refer.el: Correct maintainer's email address.

	* progmodes/hideif.el: Correct author's email address.
	Fix typo in comment.

	* xml.el: New file.

	* mail/mailheader.el: Correct author's mail address.

	* gnus/parse-time.el: Correct author's mail address.

2000-07-19  Colin Walters  <walters@cis.ohio-state.edu>

	* comint.el (comint-highlight-input, comint-highlight-face):
	New user options.
	(comint-input-ring-file-name): Change custom type.
	(comint-mode-map): Bind mouse-2.
	(comint-insert-clicked-input): New function.
	(comint-send-input): Handle input highlighting.

2000-07-18  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (popup-menu): New function.
	(mouse-major-mode-menu): Use it.

2000-07-18  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-mule-info, mode-line-modified): help-echo
	improvements.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (face-font-selection-order)
	(face-font-family-alternatives): Add custom type.

2000-07-18  Dave Love  <fx@gnu.org>

	* cus-edit.el (custom-variable-reset-saved)
	(custom-variable-reset-standard): Remove unused bindings.

	* rect.el (open-rectangle-line): Remove unused let.

	* hl-line.el (hl-line-highlight): Check hl-line-mode.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* cdl.el: Fix `Maintainer' keyword.

	* play/pong.el: Add author's email address.

2000-07-17  Sam Steingold  <sds@gnu.org>

	* files.el (insert-directory): Call `split-string' instead of
	re-implementing it.

2000-07-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/vms-pmail.el: Change maintainer to FSF.

	* net/goto-addr.el: Change maintainer to FSF.

	* info.el (Info-title-face-alist): Removed.

2000-07-18  David Ponce  <david@dponce.com>

	* recentf.el (recentf-open-files): New command that works like
	`recentf-open-more-files', but shows the whole list of files (not just
	those omitted from the menu). Useful if you don't use a menu-bar!
	(recentf-open-more-files) Modified to use `recentf-open-files'.

	(recentf-open-files, recentf-open-more-files)
	(recentf-edit-list): Dialogs use `recentf-dialog-mode'

	(recentf-dialog-mode): New mode for dialogs. You can now just type
	"q" to cancel the dialogs.

2000-07-18  David Ponce  <david@dponce.com>

	* recentf.el: This is a major update of recentf.el. It adds new
	features to better organize the recentf menu and "More..." buffer.

	Using new provided menu filtering functions you can now organize the
	recent files list:

	- by major modes
	- by directories
	- by user defined rules

	Finally, with the new `recentf-filter-changer' customizable filter you
	can define a ring of filters and dynamically (via the menu) cycle on
	each menu organization in the ring (a la msb).

2000-07-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/eshell.el (eshell): Replace links to eshell.info with
	links to eshell, to avoid problems on systems where the manual is
	installed as `eshell'.
	* eshell/esh-cmd.el (eshell-cmd): Ditto.
	* eshell/em-smart.el (eshell-smart): Ditto.
	* eshell/em-banner.el (eshell-banner): Ditto.
	* eshell/em-alias.el (eshell-alias, eshell-bad-command-tolerance): Ditto.

	* eshell/em-unix.el (eshell-shuffle-files): Don't disable
	same-file check in the MS-DOS version (it does support inodes).

	* eshell/em-alias.el (eshell-maybe-replace-by-alias): Doc fix.

	* eshell/eshell.el (eshell-directory-name):
	Run default directory name through convert-standard-filename.

2000-07-18  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Fix typo in the comment.

	* language/european.el (compound-text):
	Force katakana-jisx0201 to be designated to G1.

	* international/mule-conf.el (oldjis-newjis-jisroman-ascii):
	Don't translate some national variant characters of latin-jisx0201.
	(x-ctext): Force katakana-jisx0201 to be designated to G1.

	* international/kkc.el (kkc-after-update-conversion-functions):
	New variable.
	(kkc-update-conversion): Run functions in it at the tail.

2000-07-16  John Wiegley  <johnw@gnu.org>

	* align.el (align-newline-and-indent): Adding new function,
	for auto-aligning blocks of code on RET.
	(align-region): Fixed badly formatted minibuffer message.

2000-07-17  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-show-conversion-list-count): Customize it.
	(kkc-region): Update kkc-next-count and kkc-prev-count here.  Show
	the conversion list at first if appropriate.
	(kkc-next): Don't update kkc-next-count here.
	(kkc-prev): Don't update kkc-prev-count here.
	(kkc-show-conversion-list-update): Fix setting up of conversion
	list message.

2000-07-16  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (mouse-major-mode-menu-1): Get the submenu with lookup-key.

2000-07-16  Dave Love  <fx@gnu.org>

	* cus-edit.el (custom-buffer-create-internal): Use a help-echo
	function to be more specific.

	* wid-edit.el (widget-specify-field, widget-specify-button): Allow
	non-string help-echo.
	(widget-types-convert-widget): Defsubst it.
	(widget-echo-help): Try to cope with a help-echo function of two
	possible sorts.

2000-07-15  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-enable-italics, w32-charset-to-codepage-alist):
	Declare as obsolete.

	* term/w32-win.el: Make FONTNAME arg to set-fontset-font a cons.

2000-07-14  Gerd Moellmann  <gerd@gnu.org>

	* hilit-chg.el: Fix typo.

2000-07-14  Dave Love  <fx@gnu.org>

	* info.el (Info-mode-menu): Fix use of :help, :enable.

2000-07-14  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-convert-item-1): Intern the label.

2000-07-13  Dave Love  <fx@gnu.org>

	* emacs-lisp/easymenu.el: Doc fixes.
	(easy-menu-remove): Defalias to ignore.

	* textmodes/reftex-cite.el (reftex-bibtex-selection-callback):
	Call throw correctly.

2000-07-13  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (frame-background-mode): Doc fix.

	* simple.el (eval-expression-print-length): Change custom type to
	allow entering nil as value.

2000-07-13  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-imenu-generic-expression):
	Change definition layout.
	(fortran-mode-menu): Reinstate customize entries.

	* cus-edit.el (custom-group-menu-create, customize-menu-create):
	Use :filter, per old XEmacs code.

2000-07-12  Gerd Moellmann  <gerd@gnu.org>

	* term.el (term-send-raw-meta): Strip modifiers from the keyboard
	event when deciding what to send to the terminal.

2000-07-12  Dave Love  <fx@gnu.org>

	* cus-start.el: Add optional version as 4th element of specs and
	use it for several things new in v21.  Remove load-path.  Fix type
	of line-number-display-limit.

2000-07-11  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el: Don't require easymenu.
	Use repeat counts in various regexps.
	(fortran-mode-syntax-table): Defvar directly.
	(fortran-font-lock-keywords-1, fortran-font-lock-keywords-2)
	(fortran-font-lock-keywords-3, fortran-font-lock-syntactic-keywords):
	Use defvar, not defconst.
	(fortran-mode-map): Change locals in `let'.  Use `fortran-auto-fill'.
	(fortran-mode): Set fortran-comment-line-start-skip,
	fortran-comment-line-start-skip, dabbrev-case-fold-search.
	(fortran-comment-indent): Use defsubst.
	(fortran-indent-comment, fortran-indent-to-column, fortran-break-line):
	Use fortran-comment-indent, not fortran-comment-indent-function.
	(fortran-comment-region, fortran-electric-line-number): Simplify.
	(fortran-auto-fill): New function.
	(fortran-do-auto-fill): Deleted.
	(fortran-find-comment-start-skip):
	Check for non-null comment-start-skip.
	(fortran-auto-fill-mode, fortran-fill-statement):
	Use fortran-auto-fill.
	(fortran-fill): Use fortran-auto-fill.  Check for null
	comment-start-skip.  Simplify final clause and use end-of-line finally.

	* widget.el (widget-plist-member): New alias.

2000-07-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/esh-module.el (toplevel): Reference
	byte-compile-current-file only if it is bound.

2000-07-10  Gerd Moellmann  <gerd@gnu.org>

	* dired.el: Don't require `dired-aux'.

2000-07-10  Miles Bader  <miles@lsi.nec.co.jp>

	* dired-aux.el (dired-show-file-type): New function.
	* dired.el (dired-mode-map): Bind `w' to dired-show-file-type.
	(dired-show-file-type): Add autoload.

2000-07-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-font): Adjusted for the
	change of fontset-info.
	(print-fontset): Likewise.

2000-07-09  Stefan Monnier  <monnier@cs.yale.edu>

	* mouse.el (mouse-drag-region): Use functionp rather than fboundp.

2000-07-07  Gerd Moellmann  <gerd@gnu.org>

	* bindings.el: Bind `[delete]' to delete-char.

	* dired.el (dired-find-alternate-file): New function.
	(dired-mode-map): Bind `a' to dired-find-alternate-file.
	(toplevel): Require dired-aux when compiling.
	(dired-buffers): Move defvar within file to avoid compiler warning.

	* info.el (Info-last-search): Variable removed.
	(Info-search-history): New variable.
	(Info-search): New Info-search-history.

	* battery.el, info-look.el: Change author's mail address.

2000-07-07  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* mail/rmail.el (rmail-clear-headers): Don't throw an error
	if rmail-ignored-headers is nil.
	(rmail-retry-failure): Bind rmail-ignored-headers and
	rmail-displayed-headers to nil.

2000-07-06  Gerd Moellmann  <gerd@gnu.org>

	* lpr.el (lpr-page-header-switches): Add `-h' switch.
	(print-region-1): Don't hard code `-h' here.

	* Makefile.in (TAGS-LISP): Don't use `$(lispsource)'.

2000-07-01  Francesco Potortì  <pot@gnu.org>

	* rmail.el (mail-unsent-separator): Changed "the" to "\\w+", as
	exim can use "your message" instead of "the message".

2000-07-06  Stefan Monnier  <monnier@cs.yale.edu>

	* facemenu.el: Docstrings fixes.
	(facemenu-get-face): Don't use internal-find-face.
	(facemenu-iterate): Rename arg to match the docstring.

	* newcomment.el (uncomment-region): Be more careful when skipping
	backwards over `=' not to bump into BOBP.

2000-07-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-wordify): Use syntax table.
	* ediff-init.el (ediff-has-face-support-p): Use
	ediff-color-display-p.
	(ediff-color-display-p): Use display-color-p, changed to defun
	from defsubst.
	Got rid of special cases for NeXT and OS/2.
	* ediff-wind.el (ediff-setup-control-frame): Set proper modeline
	face.

2000-07-05  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lucid.el: Require CL.
	(copy-tree, remprop): Remove, it's provided by CL.
	(map-keymap): Define in terms of cl-map-keymap.
	(extent-property, set-extent-end-glyph): New functions.

	* emacs-lisp/cl-extra.el (cl-map-keymap): Handle char-tables.

2000-07-05  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (DONTCOMPILE): Add comment that the name may
	not be changed without changing the make-dist script.

	* emacs-lisp/cl-extra.el (cl-old-mapc): Removed; don't defalias mapc.
	(cl-mapc): Use mapc instead of cl-old-mapc.

2000-07-05  Andrew Innes  <andrewi@gnu.org>

	* makefile.nt: Add support for `bootstrap' and related targets.

2000-07-05  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-define): Docstring fix.
	(easy-menu-do-define): Use `menu-item' format.
	Handle case where easy-menu-create-menu returns a symbol.
	Manually call the potential top-level filter in the function binding.
	(easy-menu-filter-return): New arg NAME.
	Convert to a keymap if MENU is an XEmacs menu.
	(easy-menu-convert-item-1): New.  Extracted from easy-menu-do-add-item.
	(easy-menu-converted-items-table, easy-menu-convert-item):
	New var and fun to memoize easy-menu-convert-item-1.
	(easy-menu-do-add-item): Use it.
	(easy-menu-create-menu): Use easy-menu-convert-item.
	Wrap easy-menu-filter-return around any :filter specification.
	Don't convert the menu if a filter was specified.
	Tell easy-menu-make-symbol not to check for MENU being an expression.
	(easy-menu-make-symbol): New arg NOEXP.

2000-07-05  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-defun-2): Remove parameter
	EVAL-DEFUN-ARG-INTERNAL; always print to minibuffer.
	(eval-defun): If called with prefix arg, instrument code for
	Edebug.

	* emacs-lisp/edebug.el (edebug-eval-defun): Make doc string
	similar to that of eval-defun.

2000-07-04  Dave Love  <fx@gnu.org>

	* hl-line.el (hl-line-overlay): Make it permanent-local.

	* calendar/todo-mode.el: Replaced with a working version, based on
	revision 1.34 tidied up.

2000-07-03  Miles Bader  <miles@lsi.nec.co.jp>

	* paths.el (prune-directory-list): New function.
	(Info-default-directory-list): Rewritten to more methodically
	enumerate a big list of possible info directories (based on the
	list used by the standalone info reader).

	* info.el (info-initialize): Use prune-directory-list to remove
	non-existent directories from Info-directory-list.

	* paths.el (Info-default-directory-list): Try a list of possible
	info-directories instead of a single one.  Add the possible
	info directory "/usr/share/info".

	* woman.el (woman-man.conf-path): Explicitly include the debian
	man-db config file "/etc/manpath.config".
	(woman-parse-man.conf): Also handle MANDATORY_MANPATH entries, as
	are present in `manpath.config'.
	(woman-manpath): Include "/usr/share/man".

2000-07-03  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (blink-cursor-mode): Don't hide cursor initially.

	* startup.el (command-line): Initialize blink-cursor based
	on window-system.

	* frame.el (blink-cursor): Default to nil if not running under
	a window-system.

	* faces.el (face-spec-set): Ignore invalid attributes like 20.x.
	(face-x-resources): Remove duplicate entry for :font.

	* textmodes/refer.el (refer-find-entry-internal): Use some-window
	instead of cycling through windows with next-window.

	* term/sup-mouse.el (sup-pos-to-window): Use some-window instead
	of cycling through windows with next-window.

	* term/bg-mouse.el (bg-window-from-x-y): Use some-window instead
	of cycling through windows with next-window.

	* emacs-lisp/edebug.el (edebug-window-live-p, edebug-window-list)
	(edebug-get-displayed-buffer-points): Use walk-windows/some-window
	instead of cycling through windows with next-window.

	* calendar/appt.el (appt-select-lowest-window): Use walk-windows
	instead of cycling through windows with next-window.

	* dabbrev.el (dabbrev--find-expansion): Use walk-windows instead
	of cycling through windows with next-window.

	* terminal.el (te-process-output): Use walk-windows instead of
	cycling through windows with next-window.

	* server.el (server-switch-buffer): Use some-window instead of
	cycling through windows with next-window.

	* window.el (some-window): New function.
	(walk-windows): Remove reference to walk-windows-start.

	* hilit19.el (hilit-lookup-face-create): Don't set face colors to nil.

2000-07-03  Richard Stallman  <rms@gnu.org>

	* window.el (walk-windows): Guarantee termination by keeping a list
	of all the windows already handled.

2000-06-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-show-mark, mouse-save-then-kill): Don't use
	window-system.

	* man.el (Man-notify-when-ready): Don't use window-system.  If
	Man-notify-method is newframe, and the display is not
	multi-frame, select the frame created for the man page.
	(Man-init-defvars): Doc fix.

2000-06-28  Gerd Moellmann  <gerd@gnu.org>

	* faces.el (region): Change background color for light background.

	* ediff-wind.el (ediff-setup-control-frame): Remove :box
	attribute from mode-line face of Ediff control frame.

	* replace.el (query-replace-map): Bind `e' like `E'.

2000-06-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-edit-menu) <mark-whole-buffer>:
	Change name to "Select All".

	* dos-fns.el (convert-standard-filename): Fix last change.

2000-06-27  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-variable): Don't insert a second `'s' in front
	of the string `value is shown below'.  Since the syntax-table is
	set to emacs-lisp-mode-syntax-table, forward-sexp skips over
	an existing `'s', so that this won't be deleted.

	* pcmpl-cvs.el, pcmpl-gnu.el, pcmpl-linux.el, pcmpl-rpm.el:
	* pcmpl-unix.el: New files.

2000-06-26  Stefan Monnier  <monnier@cs.yale.edu>

	* wid-edit.el (widget-member): Use the new plist-member.

2000-06-26  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Undo change of 2000-04-04.
	Instead, move backward 1 character at the end of the loop when
	necessary.

	* faces.el (fringe): Change face for different backgrounds.

	* eshell/esh-module.el (toplevel): Load defgroup's differently;
	patch from John.

	* eshell/*.el: Change spelling of the Free Software Foundation.

	* eshell/esh-toggle.el: Removed.

	* Makefile.in (DONTCOMPILE): Add eshell/esh-group.el.

	* menu-bar.el (menu-bar-tools-menu): Call read-mail-command
	interactively.

2000-06-26  Alex Schroeder  <alex@gnu.org>

	* sql.el (sql-interactive-mode-map): Use `kbd' in calls to
	`define-key'; instead of checking `(emacs-version)' check for
	`set-keymap-parent' and `set-keymap-name' directly.  Add entries
	for `;' and `o' which might be electric.

	(sql-electric-stuff): New user option.
	(sql-magic-go): New function which uses `sql-electric-stuff'.
	(sql-magic-semicolon): New function which uses
	`sql-electric-stuff'.

	(sql-accumulate-and-indent): Insert newline if `comint-accumulate'
	is not fboundp.

	(sql-oracle-options): New variable.
	(sql-oracle): Use it.

	(sql-imenu-generic-expression): Doc change.
	(sql-find-sqli-buffer): Make sure the default-value of sql-buffer
	is used.

	(sql-informix): Added command line parameter "-" to force
	sql-informix-program to use stdout.

2000-06-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-coding-system-for-codepage-1): Doc fix.
	(cp864-decode-table): Doc fix.
	(cp720-decode-table): New variable, supports the Arabic OEM
	codepage used by Windows.
	(cp737-decode-table): New, Greek OEM codepage used by Windows.

2000-06-23  Dave Love  <fx@gnu.org>

	* font-lock.el (font-lock-support-mode) <defgroup>: Add :version.
	(font-lock-fontify-anchored-keywords): Use
	line-beginning-position.
	(global-font-lock-mode): Use mapc.

2000-06-23  Stefan Monnier  <monnier@cs.yale.edu>

	* eshell/esh-module.el: Require CL when compiling.

2000-06-23  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-substitute-in-file-name): Call replace-match
	with second and third arg t.

	* cus-edit.el (custom-button-face, custom-button-pressed-face):
	Specify foreground color.

	* faces.el (tool-bar, mode-line, header-line): Specify foreground
	color.

	* Makefile.in (DONTCOMPILE): Add eshell/esh-maint.el.

	* eshell/esh-cmd.el (eshell-rewrite-for-command): Use cdr and
	cddr instead of cdddr.

	* eshell/esh-util.el (eshell-sublist): Use eshell-copy-list
	instead of copy-list.

	* eshell/esh-mode.el (eshell-mode): Use eshell-copy-list instead
	of copy-list.

	* subdirs.el: Add eshell subdirectory.

	* eshell: New subdirectory containing the Eshell package.

	* pcomplete.el: New file.

2000-06-23  Paul Eggert  <eggert@twinsun.com>

	* mail/mailpost.el (post-mail-send-it): Make sure file has
	proper permissions from birth.

	* files.el (basic-save-buffer-2): When temporarily setting
	file modes, set them to current modes plus 0200, not to 0777.

	* emerge.el (emerge-make-temp-file): Make sure file has proper
	permissions from birth.

2000-06-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-backup-file-name-1): On DOS/Windows, run the
	backup file name through convert-standard-filename.

	* dos-fns.el (convert-standard-filename): Convert leading
	directories as well.  When long file names are supported, convert
	characters that are invalid in Windows file names.

2000-06-22  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix bug: if ^L is the very first buffer character,
	ps-print crashes.  New feature: page selection for printing.  Create
	raw-text-unix coding system for XEmacs.  Doc fix.
	(ps-print-version): New version number (5.2.3).
	(ps-plot-region): Bug fix.
	(ps-setup, ps-init-output-queue, ps-output, ps-begin-job, ps-end-file)
	(ps-header-sheet, ps-generate, ps-end-job): Code fix.
	(ps-restore-selected-pages, ps-selected-pages, ps-print-page-p): New
	funs.
	(ps-selected-pages, ps-last-selected-pages, ps-first-page)
	(ps-last-page): New vars.

2000-06-21  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-while-getopts): Fix handling of
	empty option string.

2000-06-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (man): Doc fix.

2000-06-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (set-language-info-alist): Docstring
	fixed.

2000-06-20  Gerd Moellmann  <gerd@gnu.org>

	* version.el (emacs-version): Use ISO date format.

	* emulation/pc-select.el (pc-selection-mode): Bind `M-\d'
	instead of `M-backspace'.

	* simple.el (turn-off-auto-fill): New function.

2000-06-20  Stefan Monnier  <monnier@cs.yale.edu>

	* jit-lock.el (with-buffer-prepared-for-jit-lock):
	Renamed from with-buffer-prepared-for-font-lock and use
	inhibit-modification-hooks rather than setting *-change-functions.
	Update all functions to use the new name.
	(jit-lock-first-unfontify-pos): New semantics (and doc).
	(jit-lock-mode): Make non-interactive.
	Don't automatically turn on font-lock.
	Set jit-lock-first-unfontify-pos to indicate deferred-contextual mode.
	Always use jit-lock-after-change.
	Remove and restore font-lock-after-change-function.
	(turn-on-jit-lock, jit-lock-after-fontify-buffer)
	(jit-lock-after-unfontify-buffer): Remove.
	(jit-lock-stealth-fontify):
	Reset jit-lock-first-unfontify-pos to point-max rather than to nil.
	(jit-lock-after-change): Set the `fontified' text-prop to nil.

2000-06-20  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent
	`print-unreadable-object' properly.  Untabify.

2000-06-14  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-find-citation-regexp-format):
	Support for bibentry.
	(reftex-compile-variables): Fixed problem with end of section-re.

	* texmodes/reftex-dcr.el (reftex-view-crossref,
	reftex-view-crossref-from-bibtex):
	Deal with changed `reftex-find-citation-regexp-format'.
	(reftex-view-regexp-match, reftex-view-crossref-from-bibtex):
	Replaced `remprop' with `put'.
	(reftex-view-crossref, reftex-view-crossref-when-idle):
	Support for bibentry.

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	New entry for bibentry package.

	* textmodes/reftex-parse.el (reftex-locate-bibliography-files):
	Regexp also matches "\nobibliography".

	* textmodes/reftex-global.el (reftex-renumber-simple-labels):
	Call `reftex-ensure-write-access' before doing anything.
	(reftex-ensure-write-access): New function.

2000-06-14  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* progmodes/idlwave.el: File re-installed (update to version 4.2)

	* progmodes/idlw-shell.el: File re-installed (update to version 4.2)

	* progmodes/idlw-rinfo.el: File re-installed (update to version 4.2)

	* progmodes/idlw-toolbar.el: File re-installed (update to version 4.2)


2000-06-20  Dave Love  <fx@gnu.org>

	* faces.el (frame-background-mode): Use set-default, not set, in
	setter.
	(frame-update-faces, frame-update-face-colors): Define with
	defalias.

	* enriched.el (enriched-decode-foreground)
	(enriched-decode-background): Don't use internal-find-face.

	* apropos.el: Doc fixes.

	* cus-edit.el (customize-changed-options): Check arg.
	(customize-version-lessp): Don't require decimal point.

	* custom.el (defcustom, defgroup): Doc fix.

	* newcomment.el (comment) <defgroup>: Add :version.
	(comment-multi-line): Doc fix.

	* emulation/mlsupport.el (define-hooked-local-abbrev,
	define-hooked-global-abbrev): Fix, using define-abbrev.

2000-06-19  Gerd Moellmann  <gerd@gnu.org>

	* menu-bar.el (menu-bar-edit-menu): Add menu item for marking
	the whole buffer.

2000-06-19  Dave Love  <fx@gnu.org>

	* menu-bar.el (menu-bar-options-save): New function.
	(menu-bar-options-menu): Use it.
	(menu-bar-options-menu) <toggle-global-lazy-font-lock-mode>:
	Simplify.

2000-06-19  Andreas Schwab  <schwab@suse.de>

	* progmodes/etags.el (tags-query-replace): Put new parameters
	START and END at the end, for backward compatibility.

2000-06-19  Kenichi Handa  <handa@etl.go.jp>

	* international/codepage.el:
	(cp-coding-system-for-codepage-1): Delete special codes for
	generating xxx-dos coding system because now a CCL based coding
	system can handle EOL conversion by default.

	* international/mule.el (make-coding-system): Generate subsidiary
	coding systems for EOL handling variants even for a CCL based
	coding system.

2000-06-19  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el (isearch-minibuffer-input-method)
	(isearch-minibuffer-input-method-function): These variables
	deleted.
	(isearch-with-input-method): Don't use the above variables.
	(isearch-process-search-multibyte-characters): Likewise.  Call
	read-string with the arg INHERIT-INPUT-METHOD t.

2000-06-17  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-after-fontify-buffer)
	(font-lock-after-unfontify-buffer): No need to call back to jit-lock.

	* jit-lock.el (jit-lock-mode): Force jit-refontify when turned on.
	Use consistent make-local-variable style for font-lock-fontified.
	(jit-lock-fontify-buffer):
	Don't bother checking for font-lock-mode and jit-lock-mode.

	* time.el: Remove trailing ^M that prevent CVS-merging.

2000-06-16  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (distclean): New target.

2000-06-16  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile.in (srcdir): Define for update-subdirs.

2000-06-16  Gerd Moellmann  <gerd@gnu.org>

	* find-lisp.el: New file.

2000-06-16  Andrew Innes  <andrewi@gnu.org>

	* time.el (display-time-mail-function): New variable, to allow
	external packages to indicate when new mail is available.
	(display-time-update): Use it.

2000-06-16  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (mule-version): Change version name to
	SAKAKI.  AOI has already been used by Meadow.

	* international/quail.el (quail-show-guidance-buf): To find the
	bottom window (but minibuffer), pay attention to the height of
	minibuffer.

2000-06-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* arc-mode.el (archive-mode-map): Use the new menu-item format for
	menu-bar menus.  Add help strings.  Don't remove the Edit menu
	from the menu bar, as the menu bar has enough space now.

	* Makefile.in (SHELL): Make sure /bin/sh is used.

	* woman.el (woman-man-buffer): Fix bold and underlined CJK
	characters, which use series of two ^H characters instead of one.

2000-06-15  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-find-in-tag-table-1, Info-find-in-tag-table)
	(Info-find-node-in-buffer-1, Info-find-node-in-buffer): New
	functions.
	(Info-find-node-2): Try a case-sensitive search first, then
	do a case-insensitive search.

	* menu-bar.el (menu-bar-help-menu): Add menu item for non-English
	tutorials.

	* info.el (Info-set-mode-line): Show file name in mode line,
	use `*Info*' instead of `Info:'.

	* startup.el (command-line-1): Change copyright messages to year
	2000.

2000-06-15  Ehud Karni  <ehud@unix.mvs.co.il>

	* complete.el (PC-env-vars-alist): New variable.
	(PC-complete-as-file-name): New function.
	(partial-completion-mode): Initialize PC-env-vars-alist from
	process-environment.
	(PC-do-completion): Handle completion of env vars.

2000-06-15  Dave Love  <fx@gnu.org>

	* net/goto-addr.el (goto-address-fontify): Use keymap property,
	not local-map.

2000-06-15  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): Almost
	rewritten to handle `undecided' as no-op.

2000-06-14  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in: New file.

	* Makefile: Removed.

	* net/goto-addr.el (goto-address): Don't bind C-c RET locally.
	(goto-address-highlight-keymap): Bind C-c RET.

2000-06-14  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (sendmail-send-it): The temporary buffer
	inherits buffer-file-coding-system of the current buffer.

	* tar-mode.el (tar-extract): For goto-char, use (point-min), not
	0.  Give correct argument to set-auto-coding-function.
	(tar-expunge): For goto-char, use (point-min), not 0.
	(tar-clear-modification-flags): For goto-char, use (point-min), not 1.
	(tar-subfile-save-buffer): Likewise.

	* international/mule.el
	(after-insert-file-set-buffer-file-coding-system): Call
	set-buffer-file-coding-system with the arg FORCE t.

2000-06-13  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-specify-envelope-from): Initialize to
	nil.  Contemporary sendmails issue an X-Authentication-Warning if
	the sender is set with `-f'.

2000-06-13  Dave Love  <fx@gnu.org>

	* help.el (describe-function-1): Kluge around cases of functions
	fset to subrs whose doc doesn't match their symbol-name.

	* image.el (insert-image): Default STRING to a space.

	* info.el: Doc fixes.
	(Info-build-node-completions): Match Ref tags.

2000-06-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (display-multi-frame-p, display-multi-font-p): New
	defaliases for display-graphic-p.

	* hl-line.el: Fixed a typo in commentary.

2000-06-13  Kenichi Handa  <handa@etl.go.jp>

	* language/tibet-util.el (tibetan-tibetan-to-transcription): Typo
	fixed.

2000-06-12  Dave Love  <fx@gnu.org>

	* image.el (insert-image): Save a little consing.

2000-06-12  Kenichi Handa  <handa@etl.go.jp>

	* language/tibet-util.el: Convert all tibetan-1-column characters
	to the corresponding tibetan characters.
	(tibetan-add-components): Delete code for the special treatment of
	'a chung.

	* language/tibetan.el (tibetan-composable-pattern): Fix previous
	change.
	(tibetan-vowel-transcription-alist): More rules added.
	(tibetan-composite-vowel-alist): New variable.
	(tibetan-precomposition-rule-alist): More rules added.

2000-06-12  Stefan Monnier  <monnier@cs.yale.edu>

	* startup.el (command-line): Only call menu-bar-mode if interactive.

	* thingatpt.el (toplevel symbol-properties):
	* textmodes/makeinfo.el (makeinfo-compile):
	* progmodes/make-mode.el (makefile-pickup-filenames-as-targets):
	* progmodes/hideif.el (hif-compress-define-list)
	(hide-ifdef-use-define-alist):
	* net/ange-ftp.el (ange-ftp-vms-delete-file-entry)
	(ange-ftp-vms-add-file-entry):
	* menu-bar.el (menu-bar-update-buffers, menu-bar-update-buffers):
	* man.el (Man-build-man-command):
	* mail/rnewspost.el (news-reply-header-hook):
	* info.el (Info-insert-dir):
	* emulation/mlconvert.el (backward-word, forward-word, setq):
	* emacs-lisp/gulp.el (gulp-send-requests):
	* emacs-lisp/byte-opt.el (byte-compile-log-lap-1)
	(byte-optimize-inline-handler, byte-optimize-form-code-walker)
	(byte-optimize-apply, end of file):
	* emacs-lisp/advice.el (ad-advice-class-completion-table)
	(ad-make-freeze-definition):
	* startup.el (command-line, command-line-1): Don't quote lambdas.

	* pcvs.el (cvs-parse-process): Don't blindly refresh all cookies.
	(cvs-cleanup-removed): New function.
	(cvs-cleanup-functions): New var.
	(cvs-cleanup-collection): Use cvs-cleanup-functions to allow the user
	some flexibility in specifying additional entries to auto-cleanup.
	(cvs-quickdir): New function.
	(cvs-mode-insert): Use cvs-fileinfo-from-entries.
	(cvs-mode-imerge): Use smerge-ediff rather than vc-resolve-conflicts.
	(cvs-mode-find-file): Check that we are on a filename or dirname
	when invoked through a mouse-click.
	(cvs-full-path): Remove.
	(cvs-dired-action): Re-introduced.
	(cvs-dired-noselect): Use it.
	(vc-post-command-functions): use this new hook if available.

	* pcvs-info.el (cvs-fi-up-to-date-face, cvs-fi-unknown-face): New vars.
	(cvs-status-map): Don't inherit from cvs-mode-map anymore.
	(cvs-filename-map, cvs-dirname-map): Remove.
	(cvs-default-action): Remove.
	(cvs-add-face): Use `keymap' rather than `local-map' property, and only
	if the arg is really a keymap.
	(cvs-fileinfo-pp): Don't use any special map for file and dir names.
	Don't hardcode the mapping from state (aka type) to face, but check
	the var cvs-fi-<type>-face instead.
	(cvs-fileinfo-from-entries): New function.

	* pcvs-defs.el (cvs-default-ignore-marks, cvs-diff-ignore-marks):
	Docstring fix.
	(cvs-find-file-and-jump): Change default to be safer.
	(cvs-mode-diff-map): Define it as a function as well.
	(cvs-mode-map): Refer to the function variant of cvs-mode-diff-map.
	Bind mouse-2 in this global map rather than with text-properties.

	* pcvs-parse.el (cvs-parse-table): Look for conflict markers in the
	file to resolve the ambiguity between C(conflict) and C(need-merge).

2000-06-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): If
	CODING-SYSTEM is nil, set buffer-file-coding-system to nil
	unconditionally.

2000-06-12  Dave Love  <fx@gnu.org>

	* wid-edit.el (widget-specify-button): Really suppress the face if
	required.

2000-06-11  Gerd Moellmann  <gerd@gnu.org>

	* term/x-win.el (x-colors): Add colors from recent rgb.txt.

2000-06-11  Stefan Monnier  <monnier@cs.yale.edu>

	* imenu.el (imenu-generic-expression): Docstring fix.

	* composite.el (composition-function-table): Move the `put'
	below the autoload cookie so we can load the file before loaddefs.

	* avoid.el (mouse-avoidance-random-shape): Don't quote lambda.

	* emacs-lisp/autoload.el (make-autoload): Use `cond'.
	Handle easy-mmode-define-global-mode.
	For complex macros like define-minor-mode that can generate
	several autoload entries, try to autoload entries in the
	macroexpanded code.

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	If KEYMAP is a symbol, just use it.
	Use byte-compile-current-file and load-file-name to infer the
	proper :require to pass to defcustom.
	Wrap the hook var into `progn' so as not to autoload it.
	Add a :autoload-end cookie.
	Be more careful about the evaluation of KEYMAP.
	(easy-mmode-define-global-mode): Add a :autoload-end cookie.
	(define-derived-mode): Move define-abbrev-table outside of defvar.

2000-06-10  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile (EMACSOPT): Remove --no-init-file (implied by -batch).
	(autoloads): Explicitly load `autoload' to bootstrap without loaddefs.
	(backup-compiled-files): Ignore errors during `tar'.
	(bootstrap): Make autoloads before elc files.

2000-06-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-buffer-file-coding-system): If one of
	undecided-XXX is specified, change only EOL conversion.

	* international/mule-conf.el (unix): New alias for the coding
	system undecided-unix.

2000-06-09  Dave Love  <fx@gnu.org>

	* tar-mode.el (tar-copy): Supply MUSTBENEW arg to write-region.

	* progmodes/executable.el: Byte compile dynamic.
	(executable-insert): Change custom type.
	(executable-find): Add autoload cookie.
	(executable-make-buffer-file-executable-if-script-p): New
	function.  After Noah Friedman.

	* files.el (after-save-hook): Customize, with
	executable-make-buffer-file-executable-if-script-p as an option.

2000-06-09  Kenichi Handa  <handa@etl.go.jp>

	* ps-mule.el (ps-mule-font-info-database-bdf): Prefer the font
	"tib24p-mule.bdf" for Tibetan.

	* composite.el (decompose-composite-char): Declare it as obsolete.

	* man.el (Man-fontify-manpage): Pay attention to underline and
	overstrike pattern for CJK characters (e.g. __^H^H and X^H^HX).

2000-06-08  Gerd Moellmann  <gerd@gnu.org>

	* thingatpt.el (forward-thing): Use functionp instead of fboundp.
	Set maintainer to FSF since author isn't reachable.

2000-06-08  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system): If
	DEFAULT-CODING-SYSTEM is not specified, also check the most
	preferred coding-system if buffer-file-coding-system is
	`undecided'.  From Handa.

2000-06-08  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el
	(after-insert-file-set-buffer-file-coding-system): If the buffer
	size is greater than INSERTED, judge that we are not visiting.

2000-06-07  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (defgroup whitespace): Comment out `:version'.
	XEmacs 20.4 has problems defining the group with this present.
	We'll have this commented out till get resolve the problem.

2000-06-07  John Wiegley  <johnw@gnu.org>

	* align.el (align-dq-string-modes, align-sq-string-modes)
	(align-open-comment-modes): Add python-mode.
	(align-rules-list): Use get-text-property instead of
	text-properties-at.
	(align-rules-list): Add python-assignment.
	(align-rules-list): Change perl-comma-delimiter to
	basic-comma-delimiter.  Use if for Perl modes and python-mode.
	(align-rules-list): Add python-chain-logic and
	basic-line-continuation.

2000-06-07  Jari Aalto  <jari.aalto@poboxes.com>

	* apropos.el (apropos-mode-hook): New user variable.
	(apropos-mode): Run apropos-mode-hook.

2000-06-07  David Ponce  <david@dponce.com>

	* recentf.el: Fixed recentf-edit-list and recentf-open-more-files
	commands.  Require `wid-edit' at run-time.

2000-06-07  David Ponce  <david@dponce.com>

	* recentf.el: Added some "Commentary".
	(recentf-open-more-files, recentf-edit-list): Minor changes to
	move the point at the top of the file list.  This behavior is
	consistent with the menu one when the list contains a lot of
	files.
	(recentf-cleanup): Now displays the number of items removed from
	the list.
	(recentf-relative-filter) New menu filter to show filenames
	relative to `default-directory'.

2000-06-07  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: XEmacs compatibility.  Doc fix.  Can select page size
	with/without giving an error if PostScript printer doesn't have this
	kind of page size.  Zebra Stripe continues or restarts on next page.
	Manual/automatic paper feeding.  Switch or not the header.
	(ps-print-version): New version number (5.2.2).
	(ps-windows-system): Include emx as a Windows system.
	(ps-setup, ps-begin-file, ps-color-values, ps-screen-to-bit-face)
	(ps-generate-postscript-with-faces, ps-generate-postscript-with-faces)
	(ps-background-text): Code fix.
	(ps-error-handler-message, ps-user-defined-prologue)
	(ps-print-prologue-header, ps-printer-name)
	(ps-print-control-characters, ps-n-up-filling, ps-zebra-color)
	(ps-line-number-step, ps-spool-config, ps-default-fg, ps-default-bg)
	(ps-use-face-background): Customization fix.
	(ps-n-up-database): Data fix.
	(ps-warn-paper-type, ps-zebra-stripe-follow, ps-manual-feed)
	(ps-switch-header): New vars.
	(ps-xemacs-color-name, ps-face-foreground-name)
	(ps-face-background-name, ps-boolean-constant): New funs.

2000-06-07  Dave Love  <fx@gnu.org>

	* allout.el: New version from Manheimer.

2000-06-07  Kenichi Handa  <handa@etl.go.jp>

	* textmodes/fill.el (fill-find-break-point): Check the validity of
	charset.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* bookmark.el (bookmark-insert-location, bookmark-bmenu-list)
	(bookmark-bmenu-show-filenames, bookmark-bmenu-hide-filenames):
	Call display-color-p and display-mouse-p instead of looking at
	window-system.

2000-06-06  Dave Love  <fx@gnu.org>

	* image.el (find-image): Doc fix.  Return nil if image not found.
	(put-image, insert-image): Make STRING arg optional.

2000-06-06  Kenichi Handa  <handa@etl.go.jp>

	* language/vietnamese.el: Remove eval-when-compile.
	(viet-viscii-nonascii-translation-table): Define it as a
	translation table made from viet-viscii-decode-table.
	(viet-viscii-encode-table): Define it as a translation table made
	from the reverse map of above.
	(viet-vscii-nonascii-translation-table): Define it as a
	translation table made from viet-vscii-decode-table.
	(viet-vscii-encode-table): Define it as a translation table made
	from the reverse map of above.
	(ccl-decode-viscii): Use translate-character.
	(ccl-encode-viscii, ccl-encode-viscii-font)
	(ccl-decode-vscii, ccl-encode-vscii, ccl-encode-vscii-font):
	Likewise.

	* language/cyrillic.el: Remove eval-when-compile.
	(cyrillic-koi8-r-nonascii-translation-table): Define it as a
	translation table made from cyrillic-koi8-r-decode-table.
	(cyrillic-koi8-r-encode-table): Define it as a translation table
	made from the reverse map of above.
	(ccl-decode-koi8): Use translate-character.
	(ccl-encode-koi8, ccl-encode-koi8-font): Likewise.
	(cyrillic-alternativnyj-nonascii-translation-table): Define it as
	a translation table made from cyrillic-alternativnyj-decode-table.
	(cyrillic-alternativnyj-encode-table): Define it as a translation
	table made from the reverse map of above.
	(ccl-decode-alternativnyj): Use translate-character.
	(ccl-encode-alternativnyj, ccl-encode-alternativnyj-font):
	Likewise.

	* international/mule-diag.el (non-iso-charset-alist): Specify
	translation table symbol instead of translation table itself.
	(list-block-of-chars): CHARSET may be a translation table symbol.

	* international/mule.el (make-coding-system): If CODING-SYSTEM
	already exists, override it.

	* international/fontset.el: Use family `proportional' for Tibetan
	fonts.

	* international/ccl.el (ccl-compile-translate-character): Don't
	check if Rrr has property translation-table.
	(ccl-compile-map-multiple): Modified to avoid compiler warning.

2000-06-05  Gerd Moellmann  <gerd@gnu.org>

	* info.el: Bind case-fold-search to t when searching in case
	a user sets it to nil in a hook.

2000-06-05  Stefan Monnier  <monnier@cs.yale.edu>

	* autoarg.el (autoarg-mode, autoarg-kp-mode):
	* hl-line.el (hl-line-mode): Use the new :global key argument.

	* tar-mode.el (tar-header-block-recompute-checksum): Remove.
	(tar-clip-time-string): Prepend a space.
	(tar-grind-file-mode): Construct a string rather than modifying one.
	(tar-header-block-summarize): Fix docstring.
	Use `format' rather than an error-prone set of copy-loops.

	* diff-mode.el (diff-font-lock-keywords, diff-hunk-header-re)
	(diff-goto-source, diff-unified->context, diff-context->unified)
	(diff-reverse-direction, diff-fixup-modifs): Fix the regexps to
	understand the format output by the `-p' argument to diff.

	* progmodes/sh-script.el (sh-symbol-list, sh-number-or-symbol-list)
	(sh-re-done): Use defconst.
	(sh-indent-supported-here, sh-electric-rparen-needed-here): Add defvar.
	(sh-help-string-for-variable, sh-guess-basic-offset):
	Don't quote lambdas.
	(sh-electric-rparen, sh-electric-hash, sh-search-word): Docstring typo.
	(sh-regexp-for-done, sh-kw-alist, sh-kw): Moved to before their use.

	* mail/mh-comp.el (mh-send-sub): Check mh-etc is bound before using it.
	(mh-letter-mode): Derive from text-mode.
	This implicitly means that it now calls kill-all-local-variables.
	Also remove the Emacs-18 compatibility code.

	* emacs-lisp/autoload.el (make-autoload): Simplify docstring.
	Make use of symbol-property doc-string-elt.
	Use memq rather than a sequence of eq.
	(doc-string-elt): Fix the wrong or missing previously unused values.
	(autoload-print-form): New function extracted from
	generate-file-autoloads to allow recursion when handling progn
	so that defvar's and defun's docstrings are properly printed.
	(generate-file-autoloads): Use it.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode): Autoload.
	Use find-file-hooks in the minor-mode function.
	Be careful not to loop indefinitely in the post-command-hook function.

2000-06-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-init.el (ediff-has-face-support-p): Make it paint faces on
	tty's.
	* ediff-diff.el (ediff-exec-process): Use --binary for fine
	differences whenever appropriate.
	* viper-cmd.el (viper-smart-suffix-list): Rearranged list members.
	* viper.el (find-file, find-file-other-window): Get viper to do
	wildcards.

2000-06-04  Stefan Monnier  <monnier@cs.yale.edu>

	* jit-lock.el (jit-lock-saved-fontify-buffer-function): New var.
	(jit-lock-fontify-buffer): New function for JIT refontification.
	(jit-lock-mode): Fix docstring.
	Use jit-lock-fontify-buffer for font-lock-fontify-buffer-function.
	Remove jit-lock-after-change from the _local_ hook.
	(jit-lock-function-1): Fix docstring.

	* info.el (Info-on-current-buffer): Initialize info.

	* newcomment.el (comment-indent): Ignore comment-indent-hook.

	* progmodes/tcl.el (tcl-indent-for-comment):
	Ignore comment-indent-hook.

	* emacs-lisp/easy-mmode.el: Require CL during compilation.
	(easy-mmode-define-toggle): Remove (inline into define-minor-mode).
	(easy-mmode-pretty-mode-name): Rename from easy-mmode-derive-name
	and improve to use the lighter to guess the capitalization.
	(define-minor-mode): Inline code from easy-mmode-define-toggle.
	Add keyword arguments to specify global-ness or the custom group.
	Add local-map and help-echo properties to the lighter.
	(easy-mmode-define-navigation): Add the errors to debug-ignored-errors.
	(easy-mmode-define-global-mode): New macro.

2000-06-02  Dave Love  <fx@gnu.org>

	* wid-edit.el: byte-compile-dynamic since we typically don't use
	all the widgets.  Don't require cl or widget.  Remove
	eval-and-compile.  Don't autoload finder-commentary.  Doc fixes.
	(widget-read-event): Removed.  Callers changed to use read-event.
	(widget-button-release-event-p): Renamed from
	button-release-event-p.
	(widget-field-add-space, widget-field-use-before-change):
	Uncustomize.
	(widget-specify-field): Use keymap property, not local-map.
	(widget-specify-button): Obey :suppress-face.
	(widget-specify-insert): Use modern backquote syntax.
	(widget-image-directory): Renamed from widget-glyph-directory.
	(widget-image-enable): Renamed from widget-glyph-enable.
	(widget-image-find): Replaces widget-glyph-find.
	(widget-button-pressed-face): Move defvar.
	(widget-image-insert): Replaces widget-glyph-insert.
	(widget-convert): Use keywordp.
	(widget-leave-text, widget-children-value-delete): Use mapc.
	(widget-keymap): Remove XEmacs stuff.
	(widget-field-keymap, widget-text-keymap): Define all inside defvar.
	(widget-button-click): Don't set point at the click, but re-center
	if we scroll out of window.  Rewritten for images v. glyphs &c.
	(widget-tabable-at): Use POS arg, not point.
	(widget-beginning-of-line, widget-end-of-line)
	(widget-item-value-create, widget-sublist, widget-princ-to-string)
	(widget-sexp-prompt-value, widget-echo-help): Simplify.
	(widget-default-create): Use widget-image-insert; some rewriting.
	(widget-visibility-value-create)
	(widget-push-button-value-create, widget-toggle-value-create): Use
	widget-image-insert.
	(checkbox): Create on and off images dynamically.
	(documentation-link): Change :help-echo.
	(widget-documentation-link-echo-help): Remove.

2000-06-02  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-done): Thinko in the "same comment" detection.

	* emacs-lisp/easy-mmode.el (easy-mmode-derive-name): New function.
	(easy-mmode-define-toggle, define-minor-mode): Use it.
	(easy-mmode-define-keymap): Docstring fix.
	(define-derived-mode): Default PARENT to fundamental-mode.
	Add the derived-mode-parent symbol-property.
	(easy-mmode-derived-mode-p): New function.

2000-06-02  Dave Love  <fx@gnu.org>

	* files.el (convert-standard-filename): Doc fix.
	(normal-backup-enable-predicate): New function.
	(backup-enable-predicate): Use it to replace the lambda form.

	* calendar/todo-mode.el: [This needs more work on the outline
	stuff.]  Doc fixes.
	(todo) <defgroup>: Add :version.
	(todo-add-category): Don't use pushnew.
	(todo-cmd-raise): Fix typo.
	(todo-top-priorities): Change temp buffer name.
	(todo-category-alist): Avoid redundant lambda.
	(todo-mode): Set paragraph-separate, outline-regexp from todo-prefix.
	Use outline-next-heading.

	* autoarg.el: Rewritten to use define-minor-mode.
	(autoarg-kp-digits, autoarg-kp-mode-map): New variable.
	(autoarg-kp-mode, autoarg-kp-digit-argument): New command.

2000-06-02  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-other-meta-char): Fix previous change.

2000-06-01  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-mode): Make vc-comment-ring-index local.
	(log-edit-done): Only add the comment to the ring if it's different
	from the last comment entered.

	* isearch.el (isearch-highlight): Turn internal-find-face into facep.

2000-06-01  Dave Love  <fx@gnu.org>

	* hl-line.el: Rewritten using define-minor-mode.

	* help.el (describe-function-1): Distinguish special form from
	builtin function.  Sanity-check presence of arglist for builtins.

2000-06-01  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Fix syntax/category setting of
	Tibetan characters.

	* language/tibet-util.el (tibetan-add-components): Fixes for new
	encoding of Tibetan characters.
	(tibetan-decompose-precomposition-alist): New variable.
	(tibetan-decompose-region): Convert precomposed characters to
	non-precomposed characters.
	(tibetan-decompose-string): Likewise.
	(tibetan-composition-function): Fix args to
	tibetan-compose-string.

	* language/tibetan.el (tibetan-composable-pattern): More
	characters included.
	(tibetan-consonant-transcription-alist): Rule for "R" added.
	(tibetan-subjoined-transcription-alist): Rules for "+W", "+Y", and
	"+R" added.
	(tibetan-base-to-subjoined-alist): Rule for "RA" added.

	* language/lao-util.el (lao-composition-function): Fix args to
	compose-string.

	* language/thai-util.el (thai-composition-function): Fix args to
	compose-string.

	* isearch.el (isearch-update): Set disable-point-adjustment to t
	to prevent the point moving to the end of a composition when a
	part of a composition is searched.
	(isearch-other-meta-char): If the key invoking this command can be
	mapped by function-key-map to a printing char, call
	isearch-process-search-char directly.

2000-06-01  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el:
	* frame.el:
	* international/mule-cmds.el:
	* international/mule-util.el:
	* international/mule.el:
	* mouse.el:
	* subr.el:
	* faces.el: Update calls to make-obsolete with a WHEN argument.

	* byte-run.el (make-obsolete, make-obsolete-variable):
	Add an optional WHEN argument and change the format of the
	symbol-property information.
	* emacs-lisp/bytecomp.el (byte-compile-log): Don't quote lambda.
	(byte-compile-obsolete, byte-compile-variable-ref): Understand the
	new obsolete-symbol-property format and print WHEN if it is provided.

2000-05-31  Dave Love  <fx@gnu.org>

	* loadhist.el (loadhist-hook-functions): Remove
	before-change-function, after-change-function.
	(unload-feature): Deal with symbols which are both bound and
	fbound.

	* mouse.el (mouse-save-then-kill-delete-region): Don't bind
	before-change-function, after-change-function.

	* simple.el (newline): Don't bind before-change-function,
	after-change-function.

2000-05-31  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-rescan-timer-time): Update interval
	set to 600 seconds (10 minutes) instead of 60 seconds since
	a large number of whitespace buffers causes emacs to `freeze'
	for a considerable amount of time.

	* whitespace.el: Updated email address

2000-05-31  Dave Love  <fx@gnu.org>

	* add-log.el (change-log-font-lock-keywords) <function>: Add
	pattern for function of change.
	(change-log-font-lock-keywords) <acknowledgements>: Amalgamate
	acknowledgements patterns.

2000-05-31  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-printing-char): If keyboard coding system is
	being used, call isearch-process-search-multibyte-characters.

	* international/isearch-x.el: Mostly rewritten.

	* international/quail.el (quail-start-conversion): Don't include
	unhandled events in the returned events, but set them in
	unread-command-events.  Exit if all inputs are deleted.

2000-05-30  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Add each charset separately.

	* term/w32-win.el: Doc changes to reduce diffs with x-win.el.
	Reenable code to create initial fontsets.
	Use set-fontset-font in place of put-charset-property.

2000-05-30  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/perl-mode.el (perl-indent-line): When looking for a
	label, ensure that the first colon isn't followed by another.

	* paths.el (Info-default-directory-list): Doc fix.

	* net/net-utils.el (finger-X.500-host-regexps): New user-option.
	(finger): If HOST matches a regexp from finger-X.500-host-regexps,
	send a query containing USER only, not USER@HOST.

	* mail/rmail.el (rmail-widen-to-current-msgbeg): Use rmail-msgbeg
	and rmail-msgend to compute the restriction at the end, instead of
	computing it.

2000-05-29  Gerd Moellmann  <gerd@gnu.org>

	* dabbrev.el (dabbrev-expand): Don't display messages in the
	echo area if the minibuffer window is active.

	* jit-lock.el (jit-lock-mode): Add after change function to
	local hook.

2000-05-29  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: New commands: hide/unhide actions,
	upcase/downcase literals.
	(antlr-tiny-action-length): New user option.
	(antlr-hide-actions): New command.  Suggested by
	Bjoern Mielenhausen <Bjoern.Mielenhausen@sap.com>.
	(antlr-mode-map): New binding [C-c C-v].
	(antlr-mode-menu): New entries.
	(antlr-downcase-literals): New command.
	(antlr-upcase-literals): Ditto.

	* antlr-mode.el: Minor changes: indendation, mode-name.
	(antlr-indent-line): Indent cpp directive at column 0.
	(antlr-mode): Use mode-name prefix "Antlr." instead of "Antlr/".

	* antlr-mode.el: XEmacs bug workaround, XEmacs hint.
	(antlr-font-lock-additional-keywords): Workaround for intentional
	bug in XEmacs version of font-lock.
	(antlr-mode): Set symbol property `mode-name' to "Antlr".  Could
	be used by a smarter version of `buffers-menu-grouping-function'.

2000-05-29  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-prompt): Recognize menu item definitions of the for
	`(menu-item ...)' when looking for the position of DEFAULT-ITEM.

2000-05-29  Kenichi Handa  <handa@etl.go.jp>

	* international/encoded-kb.el
	(encoded-kbd-iso2022-designation-map): Pay attention to that
	charset-iso-final-char return -1 for eight-bit-control and
	eight-bit-graphic.

2000-05-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* speedbar.el (speedbar-use-images, speedbar-update-flag)
	(speedbar-easymenu-definition-base): Use display-graphic-p where
	available, instead of window-system.

2000-05-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-coding-system-for-codepage-1): Add
	eight-bit-graphic and eight-bit-control to safe charsets for cpNNN
	coding systems.

2000-05-26  Dave Love  <fx@gnu.org>

	* disp-table.el (standard-display-underline): Don't use
	internal-find-face.

	* mail/reporter.el: Maintainer change.  Doc fixes.
	(reporter-version): Deleted.

	* emacs-lisp/elp.el: Maintainer change.
	(elp-help-address, elp-submit-bug-report, elp-version): Deleted.

2000-05-26  Stefan Monnier  <monnier@cs.yale.edu>

	* add-log.el (add-change-log-entry): Merge the current entry with the
	previous one if the previous one is empty.

2000-05-26  Dave Love  <fx@gnu.org>

	* loadhist.el (unload-feature): Fix interactive spec [from
	lijnzaad@ebi.ac.uk].

	* emacs-lisp/bytecomp.el (byte-compile-callargs-warn): Use
	subr-arity to check primitives.
	(byte-compile-flush-pending, byte-compile-file-form-progn)
	(byte-compile-normal-call, byte-compile-list, byte-compile-concat)
	(byte-compile-insert, byte-compile-funcall): Use mapc instead of
	mapcar.

2000-05-26  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el: Set family names of non-latin charsets
	in default fontset to "*".

	* international/mule-diag.el (print-fontset): Combine family part
	and registry part of the fontname by "-*-" instead of "-".

	* international/mule-cmds.el (encode-coding-char): Make strings
	multibyte before calling encode-coding-string.

2000-05-25  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el: Fix keywords.
	(define-derived-mode): Only define if needed.

	* simple.el (fill-comment, comment-column, comment-start)
	(comment-start-skip, comment-end, comment-indent-function)
	(block-comment-start, block-comment-end, indent-for-comment)
	(set-comment-column, kill-comment, comment-padding, comment-region)
	(comment-multi-line, indent-new-comment-line): Remove.

	* bindings.el (esc-map): Change ; to comment-dwim and use the new
	function names for comment operations.

	* newcomment.el: Add abundant autoload cookies.
	(comment-style): Don't depend on runtime data at compile-time.
	(comment-indent-hook): Remove.
	(comment-indent): Check if comment-indent-hook is bound.
	(comment-region): Docstring fix.

2000-05-25  Dave Love  <fx@gnu.org>

	* emacs-lisp/elp.el (elp-restore-function): Don't use obsolete
	byte-code-function-p.

	* mail/rmailsum.el: Add provide.

	* net/goto-addr.el (goto-address-fontify): Add help-echo property.

	* smerge-mode.el (smerge-diff-switches): Don't use list* in
	defcustom.

2000-05-25  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-exec-process): delete --binary option from
	non-buffer ediff jobs.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* hilit-chg.el (highlight-changes-mode): Ask about color or
	grayscale support, not about window-system.

	* ffap.el (ffap-menu-text-plist): Use display-mouse-p, not
	window-system.
	(ffap-highlight): Always default to t.

	* emacs-lisp/edebug.el (edebug-emacs-19-specific): Call
	display-popup-menus-p instead of looking at window-system.

	* disp-table.el (standard-display-g1, standard-display-graphic):
	Only refuse to use string glyphs on X and MS-Windows.

	* avoid.el: Remove window-system from commentary, suggest to use
	display-*-p instead.

	* apropos.el (apropos-print): Use display-mouse-p instead of
	window-system.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-decoding-vector-for-codepage):
	Fill up unsupported characters with their own codes.  From Kenichi
	Handa.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el (describe-char-after): Use
	display-graphic-p instead of window-system, so that this function
	works on MS-DOS.

2000-05-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (cp-make-coding-systems-for-codepage):
	Remove the eight-bit-graphic and eight-bit-control charsets from
	the list of charsets which we convert into `?'.

2000-05-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el: Specify CHARSET-ID explicitly for
	private charsets.
	(mule-unicode-0100-24ff, japanese-jisx0213-1,
	japanese-jisx0213-2): New charsets.

	* international/fontset.el: Setup default fontset for new charsets.

2000-05-24  Dave Love  <fx@gnu.org>

	* info.el (Info-find-node-2): Restructure [following "Vadim
	S. Solomin" <sovs@uic.nnov.ru>].

	* icomplete.el: Fix header for Finder.

2000-05-24  Eric M. Ludlam  <zappo@ultranet.com>

	* rmailout.el (rmail-output-to-rmail-file): Added optional param
	STAY.

	* rmail.el (rmail-automatic-folder-directives): New user variable.
	(rmail-show-message): Add call to `rmail-auto-file' during
	display.
	(rmail-auto-file): New function.

2000-05-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-forward-word): Take syntactic word class into
	account.
	(ediff-test-utility,ediff-diff-mandatory-option)
	(ediff-reset-diff-options): Utilities for proper initialization of
	ediff-diff-options and ediff-diff3-options on Windows.

	* ediff-init.el (ediff-merge-filename-prefix): New customizable
	variable.

	* ediff-mult.el (ediff-filegroup-action): Use
	ediff-merge-filename-prefix.

2000-05-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el (ex-write): Set selective display to nil.

2000-05-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* language/hebrew.el (iso-8859-8-e, iso-8859-8-i): For now, just
	aliases for hebrew-iso-8bit.

2000-05-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el: New version from Francis J. Wright
	<F.J.Wright@Maths.QMW.ac.uk>.
	(woman-parse-colon-path): Support Cygwin-style //d/foo/bar file
	names in environment variables regardless of the path separator.
	(woman-topic-all-completions-1): Don't call file-name-directory-p
	on all files, since woman-file-regexp already filters out any
	directories.

2000-05-24  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-start-translation): Don't change
	modified-p of the current buffer.
	(quail-start-conversion): Likewise.

	* international/kkc.el (kkc-region): Don't change modified-p of
	the current buffer.

	* language/japanese.el (iso-2022-jp): Exclude katakana-jisx0201 to
	conform to RFC1468.
	(iso-2022-jp-2): Exclude katakana-jisx0201 to conform to RFC1554.

2000-05-23  Eric M. Ludlam  <zappo@ballista.ultranet.com>

	* speedbar.el (speedbar-easymenu-definition-base): Image toggle fix.
	(speedbar-insert-button): Invisible text property fix.
	(speedbar-directory-plus): Renamed from speedbar-directory-+.
	(speedbar-directory-minus): Renamed from speedbar-directory--.
	(speedbar-page-plus): Renamed from speedbar-file-+.
	(speedbar-page-minus): Renamed from speedbar-file--.
	(speedbar-page): Renamed from speedbar-file-.
	(speedbar-tag): Renamed from speedbar-tag-.
	(speedbar-tag-plus): Renamed from speedbar-tag-+.
	(speedbar-tag-minus): Renamed from speedbar-tag--.
	(speedbar-expand-image-button-alist): Use above renames.

	* sb-dir-plus.xpm: Renamed from sb-dir+.xpm
	* sb-dir-minus.xpm: Renamed from sb-dir-.xpm
	* sb-pg-plus.xpm: Renamed from sb-file+.xpm
	* sb-pg-minus.xpm: Renamed from sb-file-.xpm
	* sb-pg.xpm: Renamed from sb-file.xpm
	* sb-tag-plus.xpm: Renamed from sb-tag+.xpm
	* sb-tag-minus.xpm: Renamed from sb-tag-.xpm

2000-05-24  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-show-guidance-buf): Set
	current-input-method of the guidance buffer to the name of the
	current input method.

2000-05-23  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/compile.el (compile-internal): Style typo.

	* mail/mh-e.el (mh-do-not-confirm, mh-folder-mode):
	quote vars and functions in the docstring.

	* newcomment.el (comment-make-extra-lines): Don't use `assert'.

	* completion.el (dynamic-completion-mode, dynamic-completion-mode):
	Don't quote lambdas.

	* ffap.el (ffap-highlight): Use facep rather than internal-find-face.

2000-05-23  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): Determine source file of compiled
	user init file differently.  Warn if compiled user init file
	is older than its source file.

	* ffap.el (ffap-url-regexp): Add `https'.

2000-05-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-backup-file-name-1): Replace slashes with `!'
	rather than `|' (which is not allowed on Windows).  Replace the
	drive letters with a string "drive_X".

2000-05-23  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-ancestor-alist): Add `bash2'.

	* files.el (interpreter-mode-alist): Add `bash2'.

2000-05-22  Dave Love  <fx@gnu.org>

	* loadhist.el (feature-symbols, file-provides, file-requires): Use
	mapc.
	(feature-file): Avoid calling symbol-name.  Doc fix.
	(file-set-intersect, file-dependents): Use dolist, not mapcar.
	(loadhist-hook-functions): Add mouse-position-function.
	(unload-feature): Change uses of mapcar.

	* files.el (parse-colon-path): Doc fix.
	(auto-mode-alist, interpreter-mode-alist): Purecopy the cars.
	(set-auto-mode): Use mapc.

	* complete.el (PC-look-for-include-file): Use :alnum: character
	class.
	(partial-completion-mode): Add autoload cookie.

2000-05-22  Sam Steingold  <sds@gnu.org>

	* info.el (Info-fontify-node): Fixed the call to
	`add-text-properties' (bug introduced on 2000-05-18).

2000-05-22  Dave Love  <fx@gnu.org>

	* bindings.el: Remove debug-ignored-errors set in other files.

	* progmodes/etags.el: Add to debug-ignored-errors.
	(visit-tags-table-buffer): Clear out buffers holding old tables
	when making a new list.
	(etags-recognize-tags-table, tags-recognize-empty-tags-table): Use
	mapc.

	* completion.el: Doc fixes.  Add to debug-ignored-errors.  Don't
	quote keywords.
	(cmpl-string-case-type): Use character classes.

	* comint.el:
	* textmodes/ispell.el:
	* imenu.el:
	* mail/mh-e.el:
	* progmodes/compile.el: Add to debug-ignored-errors.

	* dabbrev.el: Add to debug-ignored-errors.
	(dabbrev-completion): Use mapc.

2000-05-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el (From Francis J. Wright <F.J.Wright@Maths.QMW.ac.uk)
	(woman-mapcan, woman-parse-man.conf)
	(woman-toggle-use-extended-font, woman-toggle-use-symbol-font)
	(woman-reset-emulation, woman-select-symbol-fonts): New functions.
	(woman-parse-colon-path): Call woman-mapcan.  Recognize Cygwin
	path syntax better.
	(woman-man.conf-path, woman-use-own-frame): New defcustoms.
	(woman-manpath): Call woman-parse-man.conf.
	(woman-emulation): New defcustom, defaults to nroff.
	(woman-font-support): New defconst.
	(woman-use-symbol-font): New defcustom.
	(woman-menu): Add new menu items: "Colored/BW", "Advanced",
	"Emulation".
	Many functions: Doc fix.

2000-05-22  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-simple-translation-keymap): Map
	128..255 to quail-self-insert-command.
	(quail-keyboard-layout-alist): Add definition for "pc102-de".

2000-05-22  Stefan Monnier  <monnier@cs.yale.edu>

	* help.el (help-manyarg-func-alist): Typo.

	* emacs-lisp/sregex.el: Rewritten to take advantage of shy-groups and
	intervals which makes it heaps simpler.

	* newcomment.el (comment-region-internal): Go back to BEG after quoting
	the nested comment markers.

	* subr.el (remove-hook): Don't turn the hook's value into a list.

2000-05-21  Dave Love  <fx@gnu.org>

	* edmacro.el (edmacro-parse-keys): Return vector if any elements
	are invalid characters.

	* international/mule-util.el (detect-coding-with-priority): Use
	mapc.  Remove redundant lambda.

	* international/mule-diag.el (list-non-iso-charset-chars)
	(describe-fontset): Remove redundant lambda.

	* emulation/crisp.el (brief-mode): New alias.

	* emacs-lisp/ring.el (ring-elements): New function.

	* emacs-lisp/easymenu.el (easy-menu-create-menu)
	(easy-menu-do-add-item): Use keywordp.

	* emacs-lisp/byte-opt.el: Update side-effect free function lists.

	* replace.el: Doc and error message fixes.
	(replace-highlight): Use facep, not internal-find-face.

2000-05-20  Stefan Monnier  <monnier@cs.yale.edu>

	* international/ccl.el (ccl-compile-map-multiple): Don't quote lambda.

	* log-edit.el (log-edit-done): Cleanup trailing empty lines.
	(log-edit-insert-changelog): Drop `:' as well.

	* log-view.el: Fix file description.
	(log-view-mode-map): Unsatisfying fix for when cvs-mode-map is not
	available.
	(log-view-font-lock-keywords): Only use cvs-filename-face if present.
	(log-view-current-file): Only use cvs-pcl-cvs-dirchange-re if present.

	* emacs-lisp/easy-mmode.el: Update copyright and commentary.
	(easy-mmode-define-toggle): Deprecate the use of *-(on|off)-hook.
	Print a status message if the toggle is called interactively.
	(define-minor-mode): Allow INIT-VALUE to be (global . INIT-VALUE)
	for global minor modes and use `defcustom' for them.
	Use add-minor-mode.
	(easy-mmode-define-derived-mode): Remove.
	(define-derived-mode): Fancier default docstring.
	(easy-mmode-define-navigation): Signal an error rather than (ding).

	* newcomment.el (comment-styles): New `box-multi'.
	(comment-normalize-vars): Better default for comment-continue to
	avoid whitespace-only continuations.
	(comment-search-forward): Always move even in the no-syntax case.
	(comment-padright): Only obey N if it's only obeyed for padleft.
	(comment-make-extra-lines): Better handling of empty continuations.
	Use `=' for the filler if comment-start has only one character.
	(uncomment-region): Try handling the special `=' filler.
	(comment-region): Allow LINES even if MULTI is nil.
	(comment-box): Choose box style based on comment-style.

2000-05-20  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-compile-write-string): Make STR unibyte.
	(ccl-compile-write-repeat): If ARG is string, make it unibyte.

2000-05-20  Kenichi HANDA  <handa@etl.go.jp>

	* mail/rmail.el (rmail-decode-quoted-printable): Use delete-region
	and insert, not subst-char-in-region.

	* international/mule-diag.el (list-character-sets-1): Handle
	charsets eight-bit-control and eight-bit-graphic.
	(list-iso-charset-chars): Likewise.
	(list-block-of-chars): If CHARSET is not char-table, insert 8-bit
	characters as is.  Use indent-to to align characters.

	* international/mule-cmds.el (find-multibyte-characters): Never
	exclude charsets eight-bit-control and eight-bit-graphic.

2000-05-19  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/ada-mode.el (ada-mode, ada-create-case-exception):
	Don't quote lambdas.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Set comment-add.

2000-05-19  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-directories): Doc fix.

2000-05-19  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el: New file.

2000-05-19  Gerd Moellmann  <gerd@gnu.org>

	* files.el (auto-mode-alist): Add pattern for POSIX `.shrc'.

2000-05-18  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-between-files): Also skip lines beginning with
	`used'.

2000-05-18  Gerd Moellmann  <gerd@gnu.org>

	* msb.el (msb-menu-cond): Add choice `user'.

2000-05-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Compatibility, customization and doc fix.
	(ps-printer-name-option): Replace defconst by defvar.
	(ps-postscript-code-directory): XEmacs compatibility.
	(ps-header-sheet, ps-setup, ps-begin-file, ps-begin-job): Code
	fix.
	(ps-user-defined-prologue, ps-print-prologue-header)
	(ps-xemacs-face-kind-p, ps-face-bold-p, ps-face-italic-p): XEmacs
	compatibility and code fix.
	(ps-print-background-image, ps-print-background-text):
	Customization fix.
	(ps-line-number-start, ps-n-up-on): New vars.

2000-05-18  Espen Skoglund  <esk@ira.uka.de>

	* pascal.el (pascal-indent-alist, pascal-indent-comment): Changed
	the indent-comment function to just return the appropriate indent.

2000-05-18  Eric M. Ludlam  <zappo@ultranet.com>

	* sb-dir+.xpm, sb-dir-.xpm, sb-dir.xpm, sb-file+.xpm, sb-file-.xpm,
	sb-file.xpm, sb-mail.xpm, sb-tag+.xpm, sb-tag-.xpm, sb-tag-gt.xpm,
	sb-tag-type.xpm, sb-tag-v.xpm, sb-tag.xpm: New Files

2000-05-18  Dave Love  <fx@gnu.org>

	* info.el (Info-fontify-node): Add intangible property as well as
	invisible.

	* calendar/appt.el (appt-make-list): Match all lines of entry.
	From "Stefan M. Walther (SMW)" <walther@netz.klinik.uni-mainz.de>

2000-05-18  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-char-after): Call
	internal-char-font, not char-font.  If internal-char-font returns
	nil, display "-- none --".

2000-05-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* image.el (image-type-available-p): Don't reference image-types
	if it isn't bound.

2000-05-17  Stefan Monnier  <monnier@cs.yale.edu>

	* autoarg.el (autoarg-mode): Typo in the :set argument.

2000-05-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line-1): Don't signal an error if the
	directory for auto-save-list files does not yet exist.

2000-05-17  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-conf.el (arabic-iso8859-6): Fix typo.

2000-05-16  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (remove-hook): `setq' hook-value, not `set'.

2000-05-16  Sam Steingold  <sds@gnu.org>

	* info.el (debug-ignored-errors): More errors to ignore.

2000-05-16  Dave Love  <fx@gnu.org>

	* cus-edit.el: Don't require cl or easymenu.
	(custom-variable-prompt): Test standard-value property, not
	user-variable-p.

2000-05-16  Sam Steingold  <sds@gnu.org>

	* subr.el (add-hook): `setq' hook-value, not `set'.

2000-05-16  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line-1): Mention the FAQ in the startup
	message.

	* help.el (view-emacs-FAQ): Change `emacs-faq' to `efaq'.

	* progmodes/compile.el (compilation-parse-errors): Collect
	`nomessage' regexps last.

	* dired.el (dired-mode-map): Use dired-do-query-replace-regexp.

	* dired-aux.el (dired-do-query-replace-regexp): Add `-regexp'
	to the function name.

2000-05-15  Dave Love  <fx@gnu.org>

	* speedbar.el (speedbar-recenter): Typo.
	(speedbar-expand-line): Make arg optional.
	(speedbar-mode): Avoid a compiler warning.

2000-05-15  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/sh-script.el (sh-while-getopts) <sh>: Handle case that
	user-specified option string is empty.

	* mouse.el (mouse-yank-at-click): Doc fix.

2000-05-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): More updates of
	latin-iso8859-14 and latin-iso8859-15 from the latest ISO/IEC
	documents.

2000-05-15  Gerd Moellmann  <gerd@gnu.org>

	* env.el (getenv): New function, interactively callable.
	(setenv, getenv): Remove autoload cookies.

	* loadup.el: Load `env'.

	* progmodes/f90.el: Change author's mail address.

2000-05-14  Dave Love  <fx@gnu.org>

	* mail/rmail.el (rmail-show-message-hook): Customize and offer
	goto-addr as an option.

	* help.el (help-xref-stack): Doc fix.
	(help-xref-following): New variable.
	(help-make-xrefs): Use it.
	(help-xref-go-back): Use position information from stack element.
	(help-follow): Make position in stack element a pair.  Use
	help-xref-following.

	* autoarg.el: New file.

	* faces.el: Declare more functions obsolete.

	* viet-util.el, thai-util.el, tibet-util.el, slovak.el
	* misc-lang.el, romanian.el, korea-util.el, lao-util.el
	* japan-util.el, greek.el, hebrew.el, european.el, ethio-util.el
	* english.el, czech.el, devan-util.el, cyril-util.el, china-util.el:
	Remove all the setup-...-environment functions.

2000-05-13  Eric M. Ludlam  <zappo@ultranet.com>

	* speedbar.el: Updated the commentary section.  xemacs20p now uses
	>= when detecting.  Require `defimage' safely.
	(speedbar-easymenu-definition-base): Add toggle for images.
	(speedbar-easymenu-definition-special): Add flush cache & expand.
	(speedbar-visiting-tag-hook): Set new defaults.  Added options.
	(speedbar-reconfigure-keymaps-hook): New variable.
	(speedbar-frame-parameters): Updated documentation.
	(speedbar-use-imenu-flag): Updated custom tag.
	(speedbar-dynamic-tags-function-list): New variable.
	(speedbar-tag-hierarchy-method): Updated doc & custom.
	(speedbar-indentation-width, speedbar-indentation-width) New
	variables.
	(speedbar-hide-button-brackets-flag): Customizable.
	(speedbar-vc-indicator): Doc update.
	(speedbar-ignored-path-expressions): Updated default value.
	(speedbar-supported-extension-expressions): Updated default value.
	(speedbar-syntax-table): Remove {} paren status.
	(speedbar-file-key-map, speedbar-buffers-key-map): Add "=" to act
	as "+".  Added overlay aliases.
	(speedbar-mode): Use `speedbar-mode-line-update' instead of
	`force-mode-line-update'.
	(speedbar-mode, speedbar-quick-mouse, speedbar-click)
	(speedbar-double-click): Use `speedbar-mouse-set-point' instead of
	`mouse-set-point'.
	(speedbar-reconfigure-keymaps): Run configure keymap hooks.
	(speedbar-item-info-tag-helper): Revamped to handle a wider range
	of arbitrary text, and new helper functions.
	(speedbar-item-copy, speedbar-item-rename): Fixed trailing \ in
	filename finder.
	(speedbar-make-button): Call `speedbar-insert-image-button-maybe'.
	(speedbar-directory-buttons): Update path search/expansion.
	(speedbar-make-tag-line): Pay attention to
	`speedbar-indentation-width'.  Use more care w/ invisible
	properties.
	(speedbar-change-expand-button-char): Call
	`speedbar-insert-image-button-maybe'.
	(speedbar-apply-one-tag-hierarchy-method): Deleted (and replaced).
	(speedbar-sort-tag-hierarchy, speedbar-prefix-group-tag-hierarchy)
	(speedbar-trim-words-tag-hierarchy)
	(speedbar-simple-group-tag-hierarchy): New functions.
	(speedbar-create-tag-hierarchy): Update doc, use new tag hooks.
	(speedbar-insert-imenu-list, speedbar-insert-etags-list): New
	functions.
	(speedbar-mouse-set-point): New function.
	(speedbar-power-click): Updated documentation.
	(speedbar-line-token, speedbar-goto-this-file): Handle more types
	of tag prefix text.
	(speedbar-expand-line, speedbar-contract-line): Make more robust
	to strange text.
	(speedbar-expand-line): Takes universal argument to flush the
	cache.
	(speedbar-flush-expand-line): New function.
	(speedbar-tag-file): Use new `speedbar-fetch-dynamic-tags' fn.
	Use new generator insertion method.
	(speedbar-fetch-dynamic-tags): New function.
	(speedbar-fetch-dynamic-imenu): Removed code now handled in
	`speedbar-fetch-dynamic-imenu'.
	(speedbar-fetch-dynamic-etags): Fix current buffer problem.
	(speedbar-buffer-easymenu-definition): Added "Kill Buffer", and
	"Revert Buffer" menu items.
	(speedbar-buffer-buttons-engine): Be smarter when creating a
	filename tag (for expansion purposes.).
	(speedbar-highlight-one-tag-line)
	(speedbar-unhighlight-one-tag-line, speedbar-recenter-to-top)
	(speedbar-recenter): New functions.
	(defimage-speedbar): Image loading abstraction.
	(speedbar-directory-+, speedbar-directory--, speedbar-file-+)
	(speedbar-file--, speedbar-file-, speedbar-tag-, speedbar-tag-+)
	(speedbar-tag--, speedbar-tag-gt, speedbar-tag-v)
	(speedbar-tag-type, speedbar-tag-mail): New images.
	(speedbar-expand-image-button-alist): New variable.
	(speedbar-insert-image-button-maybe): Insert an image over some
	buttons.

2000-05-13  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (encode-coding-char): An ASCII
	character is always encodable.

	* international/mule-conf.el: Add more information in descriptions
	of character sets.

	* international/mule-diag.el (describe-char-after): New function.
	(describe-font-internal): Adjusted for the change of font-info.
	(describe-font): Likewise.
	(print-fontset): Rewritten for the new fontset implementation.
	(describe-fontset): Include fontset alias names in completion.
	(list-fontsets): Adjusted for the change of print-fontset.

	* simple.el (what-cursor-position): If DETAIL is non-nil, call
	describe-char-after instead of displaying the detail in the echo
	area.
	(syntax-code-table): Format changed.
	(string-to-syntax): Adjusted for the above change.

2000-05-12  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (lisp-font-lock-keywords-1): Add define-minor-mode.

2000-05-12  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el: Remove some compatibility stuff and CL
	dependence.  Use line-{beginning,end}-position, not
	point-at{b,e}ol.  Some doc fixes.
	(todo-position): New function.  Fix callers of position to use it.
	(todo-save-top-priorities, todo-print): Use with-temp-buffer.

2000-05-12  Gerd Moellmann  <gerd@gnu.org>

	* time.el (display-time-mail-icon): Use `:ascent center'.

	* ange-ftp.el (ange-ftp-skip-msgs): Include 500 code.for
	handling FTP security extensions.

2000-05-11  Dave Love  <fx@gnu.org>

	* calendar/todo-mode.el: New file.

2000-05-11  Gerd Moellmann  <gerd@gnu.org>

	* comint.el (comint-read-input-ring): Move reference to
	comint-input-ring-size outside of the save-excursion.  It was
	causing the default value to be the only one ever seen.

	* font-lock.el: Update copyright.  Remove Simon Marshall's email
	address on request from him.

	* subr.el (substitute-key-definition): Add comment describing
	the meaning of PREFIX.

2000-05-10  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Fix regexp.

	* subr.el (add-hook, remove-hook): Make hook buffer-local if needed..
	(add-minor-mode): Don't make the variable buffer-local and add a
	reference to define-minor-mode in the docstring.

	* pcvs.el (cvs-cleanup-collection): Remove obsolete code for
	HEADER/FOOTER and fix bug with trailing empty directory.
	(cvs-append-to-ignore): Use vc-editable-p if available.
	(cvs-dir-member-p): Remove obsolete code for HEADER/FOOTER.
	(vc-do-command): Tweak advice to handle the new VC.

	* log-view.el (log-view-goto-rev): New function for the new VC.
	(log-view-minor-wrap): Use mark-active.

	* log-edit.el (cvs-changelog-full-paragraphs): Mark obsolete.
	(log-edit-changelog-full-paragraphs): New var.
	(log-edit-insert-changelog): Remove a lonely leading `* file'.
	(log-edit-narrow-changelog, log-edit-changelog-paragraph)
	(log-edit-changelog-subparagraph, log-edit-changelog-entry)
	(log-edit-changelog-ours-p, log-edit-changelog-entries)
	(log-edit-changelog-insert-entries, log-edit-insert-changelog-entries):
	Replace the `cvs' prefix with `log-edit'.

	* iswitchb.el (iswitchb-completion-help): Unquote lambda.

	* diff-mode.el (diff-font-lock-keywords): Recognize comments.
	(diff-font-lock-defaults): Explicitly turn off multiline.
	(diff-end-of-hunk): Handle comments and fix end-of-buffer bug.
	(diff-ediff-patch): Fix call to ediff-patch-file.
	(diff-end-of-file, diff-reverse-direction, diff-fixup-modifs):
	Handle comments.

	* frame.el (automatic-hscrolling): Typo.

	* cvs-status.el (cvs-status-minor-wrap): Use mark-active.

2000-05-09  Sam Steingold  <sds@goems.com>

	* apropos.el (apropos-print): use `describe-face' instead of
	`customize-face-other-window'.

2000-05-09  Dave Love  <fx@gnu.org>

	Changes mostly following Richard Sharman <rsharman@wave.home.com>.

	* help.el (describe-variable): Have customize button pop the
	help-xref stack when invoked.
	(help-xref-symbol-regexp): Add `face'.
	(help-make-xrefs): Check for quoted face names and adapt regexp
	submatch numbers to cope.
	(help-xref-interned): Maybe insert face doc too.  Separate
	sections with a line of hyphens.

	* faces.el: Some doc fixes.  Declare some functions obsolete.
	(describe-face): Add customize button.  Return the help
	text.  Fix prompt.

2000-05-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): Fix last change.

2000-05-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* woman.el: New file
	(from Francis J. Wright <F.J.Wright@Maths.QMW.ac.uk>).

2000-05-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): Update ASCII
	simulations for greek-iso8859-7, add latin-iso8859-14 and
	latin-iso8859-15.

	* international/mule-cmds.el (set-language-info-alist): Call
	define-prefix-command with 3 arguments, to make the map suitable
	for a menu.

2000-05-07  Dave Love  <fx@gnu.org>

	* time.el: Small doc fixes from Pavel Janík ml.

2000-05-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-macs.el: Doc fixes; mainly avoid duplicating arg
	list in doc string.  Don't quote keyword symbols.
	* emacs-lisp/cl.el: Likewise.
	* emacs-lisp/cl-seq.el: Likewise.

2000-05-05  Gerd Moellmann  <gerd@gnu.org>

	* abbrev.el (abbrev-mode): Make ARG optional.

2000-05-04  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse.el: Change file name `EBROWSE' to `BROWSE'.

	* files.el (auto-mode-alist): Change `EBROWSE' to `BROWSE'.

	* subr.el (substitute-key-definition): Clarify documentation.

2000-05-04  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el (glasses-convert-to-unreadable): Use
	`glasses-separator' instead of the hard-wired "_".
	(glasses-mode): Call `glasses-make-unreadable' only in a single
	place.

2000-05-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (cjk-codepages-alist): Add associations for
	Chinese and Korean codepages.  Remove FIXME comment.

2000-05-03  Dave Love  <fx@gnu.org>

	* time.el (display-time-mail-face, display-time-use-mail-icon):
	New option.
	(display-time-mail-icon): New variable.
	(display-time-string-forms): Use the above.  Fix the local-map.

2000-05-03  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (query-replace-map): Add binding for `E'.
	(query-replace-help): Extend help text.
	(perform-replace): Allow editing the replacement string.

	* make-mode.el (makefile-mode-abbrev-table): New variable.
	(makefile-mode): Set local abbrev table to
	makefile-mode-abbrev-table.
	(makefile-font-lock-keywords): Fontify includes and conditionals.

	* subr.el (add-minor-mode): Handle AFTER for keymaps. Don't
	set TOGGLE's value.

	* mailabbrev.el (mail-abbrev-insert-alias): Renamed from
	mail-interactive-insert-alias.
	(mail-abbrev-complete-alias): New command.
	(mail-mode-map): Bind it to `M-TAB'.

2000-05-03  Kenichi Handa  <handa@etl.go.jp>

	* language/lao-util.el (lao-compose-region): New function.

2000-05-02  Gerd Moellmann  <gerd@gnu.org>

	* files.el (recover-session): Make directories as necessary
	if they don't exist yet.

	* calendar/cal-french.el
	(french-calendar-multibyte-special-days-array)
	(french-calendar-special-days-array): Change French text.
	(calendar-french-date-string): Change output.
	(calendar-goto-french-date): Likewise.

2000-05-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-default-active): Obey `:always-active'.
	(widget-documentation-string-value-create): Set `:always-active'.

2000-05-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (auto-save-list-file-prefix): For ms-dos, set the
	default prefix to `~/_emacs.d/auto-save.list/_s'.
	(normal-top-level): Create the directory for auto-save files, if
	it doesn't already exist (in the ms-dos case only).

2000-05-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-cmds.el (set-language-environment): Don't
	concat an integer (dos-codepage), use format instead.

2000-05-02  Dave Love  <fx@gnu.org>

	* help.el (help-xref-on-pp): Check for constant symbols.

2000-04-29  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (normal-top-level): Put a condition-case around
	the code loading subdirs.el.

2000-04-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Upside-down and face background color printing,
	line number step, doc fix.
	(ps-print-version): New version number (5.2).
	(ps-setup, ps-prologue-file, ps-begin-file, ps-begin-job)
	(ps-face-attribute-list, ps-plot-with-face): Code fix.
	(ps-spool-config): Var fix.
	(ps-printer-name-option): Const fix.
	(ps-print-upside-down, ps-use-face-background)
	(ps-line-number-step): New vars.
	(ps-window-system, ps-lp-system): New consts.
	(ps-face-background): New fun.

2000-04-28  Richard Stallman  <rms@gnu.org>

	* files.el (make-auto-save-file-name):
	Apply auto-save-file-name-transforms to visited file name
	before generating auto save file name.
	(auto-save-file-name-transforms): New variable.

	* files.el (backup-enable-predicate):
	Correctly test for a file under a temporary directory.

2000-04-28  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (add-minor-mode): Rewritten.

2000-04-28  Kenichi Handa  <handa@etl.go.jp>

	* mail/sendmail.el (sendmail-send-it): Set
	buffer-file-coding-system to the selected coding system for MIME
	header.

2000-04-27  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-move-to-filename-regexp): Allow format where
	YYYY is followed by two spaces.

	* progmodes/etags.el (etags-tags-completion-table): Add a `:'
	in the second character class of the regexp.

	* mail/mh-comp.el (mh-send-sub): Look for mh-comp-formfile in
	mh-etc, too.

	* textmodes/texinfmt.el (texinfo-format-xref): Don't try to insert
	nil.

	* subr.el (add-minor-mode): Use `set' instead of `setq'.

	* gud.el (gud-gdb-find-file): Call find-file-noselect with NOWARN
	argument.

2000-04-27  Sen Nagata  <sen@eccosys.com>

	* emacs-lisp/crm.el (crm-completion-table): New variable.
	(crm-collection-fn, crm-test-completion)
	(completing-read-multiple): Use it.

2000-04-27  Dave Love  <fx@gnu.org>

	* help.el (locate-library): Use mapc.
	(help-manyarg-func-alist): Add call-process-region.

2000-04-26  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (add-minor-mode): Make argument MAP optional.

	* desktop.el (desktop-save): Save list of minor modes.
	(desktop-create-buffer): Restore minor modes.
	(desktop-minor-mode-table): New user-option.

	* subr.el (add-minor-mode): New function.

	* image.el (find-image): New function.
	(defimage): Rewritten to find image at load time.

	* startup.el (normal-top-level-add-to-load-path): Handle
	case that the default directory is not in load-path.

	* help.el: Old patch from Stefan Monnier.
	(help-xref-on-pp): New function.
	(describe-variable): Use it to display xrefs in a symbol's value.

2000-04-26  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-face): Fix parenthesis.

2000-04-26  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail-expunge): When there are no deleted
	messages, do nothing.

2000-04-26  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (locale-translation-file-name):
	Defvar to nil.
	(set-locale-environment): Set it here (at runtime).

2000-04-25  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Add parameters START and END.  Use
	them instead of the check for a region in Transient Mark mode.
	(query-replace-read-args): Return two more list elements for the
	start and end of the region in Transient Mark mode.
	(query-replace, query-replace-regexp, query-replace-regexp-eval)
	(map-query-replace-regexp, replace-string, replace-regexp): Add
	optional last arguments START and END and pass them to
	perform-replace.

	* progmodes/ebrowse.el (ebrowse-tags-query-replace): Construct a
	form with additional arguments for perform-replace.

	* progmodes/etags.el (tags-query-replace): Add parameters START
	and END.  Construct a form with additional arguments for
	perform-replace.

	* simple.el (shell-command): Set default directory for "*Shell
	Command Output" buffer.

	* language/european.el (iso-latin-4): Fix typo.

	* emacs-lisp/crm.el: New file.

2000-04-24  Dave Love  <fx@gnu.org>

	* cus-edit.el (Custom-set, Custom-save, Custom-reset-current)
	(Custom-reset-saved, Custom-reset-standard)
	(custom-group-value-create, custom-group-set, custom-group-save)
	(custom-group-reset-current, custom-group-reset-saved)
	(custom-group-reset-standard): Use mapc.
	(custom-buffer-create-internal): Disable undo when creating items.
	Use mapc.
	(custom-face): Avoid redundant lambda.

2000-04-24  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (auto-save-list-file-prefix): Set default to
	`~/.emacs.d/auto-save-list/.saves-' for systems other than MS-DOS.

2000-04-24  Sam Steingold  <sds@gnu.org>

	* time-stamp.el (time-stamp-string-preprocess): Always convert
	`field-result' to a string.

2000-04-24  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (scrolling): New group.
	(automatic-hscrolling): New user-option.

	* startup.el (command-line-x-option-alist): Add `-lsp' and
	`--line-spacing'.

2000-04-19  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-extra.el (cl-old-mapc): Fix definition.
	(cl-mapc): Rename from mapc.  Fix the funcall.

2000-04-19  Gerd Moellmann  <gerd@gnu.org>

	* simple.el (clone-indirect-buffer-other-window): New command.
	(clone-indirect-buffer): Add optional arg NORECORD.
	(toplevel): Bind `C-x 4 c' to clone-indirect-buffer-other-window.

	* help.el (resize-temp-buffer-window): Use count-screen-lines.

	* window.el (count-screen-lines): New function.
	(shrink-window-if-larger-than-buffer): Use count-screen-lines
	instead of window-buffer-height.

	* progmodes/inf-lisp.el (inferior-lisp-mode): Don't set
	non-existing variable comint-input-sentinel.
	(inferior-lisp-args-to-list): Removed.
	(inferior-lisp): Use split-string instead of
	inferior-lisp-args-to-list.

	* hexl.el (hexl-insert-hex-string): New command.

	* emacs-lisp/gulp.el (gulp-maintainer): Use expand-file-name
	instead of concat.

2000-04-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/sendmail.el (mail-do-fcc): Prevent inserting a newline
	at the start of an existing but empty folder.

2000-04-18  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-mule.el: Customization fix, doc fix.
	(ps-multibyte-buffer): Customization fix.

2000-04-17  Richard M. Stallman  <rms@gnu.org>

	* subr.el (read-passwd): Use read-char-exclusive.

2000-04-17  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-insert-@email)
	(texinfo-insert-@emph, texinfo-insert-@quotation)
	(texinfo-insert-@strong, texinfo-insert-@url): New functions.
	(texinfo-mode-map): Add key bindings for them.

	* files.el (basic-save-buffer-2): Use a template with `$'
	instead of `#' for VMS.

	* simple.el (clone-indirect-buffer): New function.

2000-04-16  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-case): New function.  If the user input
	contains any upper-case characters, the search is made
	case-sensitive.

2000-04-17  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-mode-syntax-table): Add \n as
	comment-end.
	(texinfo-font-lock-syntactic-keywords): New var.
	(texinfo-font-lock-keywords): Remove comment regexp.
	(texinfo-insert-block): New function.
	(texinfo-mode-map): Add C-c C-o -> texinfo-insert-block.
	(texinfo-mode): Use define-derived-mode.  Tweak comment-start-skip
	and font-lock-defaults.  Use regexp-opt for outline-regexp.
	(texinfo-environments): New var.
	(texinfo-environment-regexp): Use regexp-opt and
	texinfo-environments.

	* textmodes/ispell.el (ispell-menu-map-needed): Check that
	ispell-process is bound since this might be eval'd before ispell
	is loaded.
	(ispell-message): Use a tiny bit less magic and a bit more hard
	data to figure out what kind of sc-cite-regexp to use.

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Fix the regexp.

	* calendar/diary-lib.el (fancy-diary-display, mark-diary-entries)
	(insert-cyclic-diary-entry): Unquote the lambda.

	* gud.el (gud-jdb-build-source-files-list): Fix typo.

	* files.el (backup-enable-predicate): Unquote the lambda.

	* cus-edit.el (custom-face, face): Unquote the lambda.

2000-04-15  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Check for line-beginning-position definition.

	* ps-print.el: Fix counting lines in a region.
	(ps-print-version): New version number (5.1.5).
	(ps-spool-without-faces, ps-spool-with-faces): Adjust code.
	(ps-printing-region): Fun code fix.

2000-04-15  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-build-source-files-list): Change file-exists-p
	to file-directory-p.

2000-04-14  Gerd Moellmann  <gerd@gnu.org>

	* gud.el (gud-jdb-build-source-files-list): Check that directory
	exists before calling directory-files.

2000-04-13  Dave Love  <fx@gnu.org>

	* emacs-lisp/trace.el: Change maintainer.  Use new backquote
	syntax.

	* emacs-lisp/cl-specs.el: Remove when, unless.

	* emacs-lisp/cl-extra.el: Don't quote keywords.
	(cl-old-mapc): New variable.
	(mapc): Use it.
	(cl-map-intervals): Use with-current-buffer.  Don't check for
	next-property-change.
	(cl-map-overlays): Use with-current-buffer.
	(cl-expt): Remove.
	(copy-tree, remprop): Define unconditionally.

	* emacs-lisp/cl-compat.el (keywordp): Remove.

	* emacs-lisp/edebug.el (edebug-keywordp): Remove.  Change callers
	to use keywordp.
	(edebug-spec): Enable keywordp.

	* cus-edit.el (custom-sort-items): Avoid symbol-name with new
	string-lessp.

	* cus-start.el: Use keywordp.

2000-04-13  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (include-other-diary-files): Fix the fix of
	2000-02-18 by doing a save-excursion.

2000-04-13  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Customization fix, doc fix.
	(ps-print-version): New version number (5.1.4).
	(ps-article-author, ps-article-subject, ps-info-file, ps-info-node)
	(ps-print-preprint): Adjust code.
	(ps-printer-name, ps-lpr-switches, ps-user-defined-prologue)
	(ps-print-prologue-header, ps-print-control-characters)
	(ps-spool-config): Customization fix.

2000-04-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/ispell.el (ispell-menu-map): Menu items rearranged and
	converted to the new menu-item format, names slightly changed,
	help strings added.

	Support for spelling without async subprocesses:

	* textmodes/ispell.el (ispell-cmd-args, ispell-output-buffer)
	(ispell-session-buffer): New variables.
	(ispell-start-process, ispell-process-status,
	ispell-accept-output, ispell-send-string): New functions, for
	Ispell invocation when async subprocesses aren't supported.
	(ispell-word, ispell-pdict-save, ispell-command-loop,
	ispell-process-line, ispell-buffer-local-parsing): Replace calls
	to process-send-string with calls to ispell-send-string, and
	accept-process-output with ispell-accept-output.
	(ispell-init-process): Call ispell-process-status instead of
	process-status with.
	(ispell-init-process): Call ispell-start-process.  Call
	ispell-accept-output and ispell-send-string.  Don't call
	process-kill-without-query and kill-process if they are unbound.
	(ispell-async-processp): New function.

2000-04-12  Dave Love  <fx@gnu.org>

	* info.el: Add debug-ignored-errors.
	(Info-mode-menu): Add some items.
	(Info-directory): Add autoload cookie.

	* menu-bar.el (menu-bar-options-menu): Make `mule' always visible.
	Modify `truncate-lines'.  Make `describe-language-environment'
	always visible and add help.  Modify `describe-key' help.  Invoke
	Info-directory from `info'.  New entry `emacs-manual'.

2000-04-10  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse.el (ebrowse-tree-mode):
	Use propertized-buffer-identification.
	(ebrowse-update-member-buffer-mode-line): Likewise.
	(ebrowse--mode-strings): Removed.
	(ebrowse--mode-line-props): Removed.

	* files.el (auto-mode-alist): Add `EBROWSE'.

	* progmodes/ebrowse.el (ebrowse-read): Skip forward over white
	space before testing for end of buffer.
	(ebrowse-load): Removed.
	(ebrowse-revert-tree-buffer-from-file): Rewritten.
	(ebrowse-create-tree-buffer): Rewritten.
	(ebrowse-tree-mode): Read tree from buffer.

	* progmodes/ebrowse-ffh.el: Removed.

2000-04-10  Kenichi Handa  <handa@etl.go.jp>

	* language/vietnamese.el (viet-vscii-decode-table): Fix a bug.

2000-04-10  Gerd Moellmann  <gerd@gnu.org>

	* jit-lock.el (with-buffer-unmodified): Fix bug introduced by `)'
	at the wrong place.

2000-04-09  Dave Love  <fx@gnu.org>

	* files.el (backup-enable-predicate):
	Use temporary-file-directory, small-temporary-file-directory.
	(make-backup-file-name-function, backup-directory-alist): New vars.
	(make-backup-file-name-1): New function.
	(make-backup-file-name): Use it.
	(find-backup-file-name): Likewise.  Use format for clarity, not concat.
	(file-newest-backup): Use make-backup-file-name.

2000-04-09  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse-ffh.el: New file.

	* progmodes/ebrowse.el (ebrowse-find-file-hook-fn):
	Moved to ebrowse-ffh.el.
	(ebrowse-load): Add autoload.

	* finder.el (finder-commentary): Add autoload cookie.

	* mail/rfc2368.el: Correct author's email address.

	* progmodes/ebrowse.el: New file.

	* emacs-lisp/easymenu.el (easy-menu-create-menu): Process menu
	item help string.
	(easy-menu-do-add-item): Ditto.
	(easy-menu-define): Extend doc string.

	* jit-lock.el (with-buffer-unmodified): Use restore-buffer-modified-p.
	(with-buffer-prepared-for-font-lock): Use with-buffer-unmodified.
	(jit-lock-function, jit-lock-stealth-fontify): Don't use
	with-buffer-unmodified.

2000-04-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/edebug.el: Fix specs for dolist, dotimes, push, pop,
	unless, when.

2000-04-07  Mikio Nakajima  <minakaji@osaka.email.ne.jp>

	* viper-util.el (viper-put-on-search-overlay): New subroutine.
	(viper-flash-search-pattern): No operation when using Emacs
	doesn't support face.
	Use `viper-put-on-search-overlay'.

2000-04-04  Gerd Moellmann  <gerd@gnu.org>

	* isearch.el (isearch-mode-map): Define M-C-s like C-s and M-C-r
	like C-r.

	* progmodes/make-mode.el: Some doc fixes.
	(makefile-mode-abbrev-table): New variable.
	(makefile-mode): Set local abbrev table to makefile-mode-abbrev-table.
	(makefile-font-lock-keywords): Fontify includes and conditionals.
	(toplevel): Require `dabbrev' and `add-log' when compiling.

	* replace.el (perform-replace): Don't move forward one char
	when MATCH-AGAIN is nil, and REGEXP-FLAG is t.  We don't want
	to do that because it leaves point 1 position after the last
	replacement, after everything has been replaced.

	* jit-lock.el (with-buffer-unmodified): New macro.
	(with-buffer-prepared-for-font-lock): Don't preserve buffer's
	modified state.
	(jit-lock-function-1): Extracted from jit-lock-function; not
	preserving buffer's modified state.
	(jit-lock-function, jit-lock-stealth-fontify):
	Call jit-lock-function-1.

	* mail/rfc2368.el: Remove supernumerary copyright line.

2000-04-04  Milan Zamazal  <pdm@freesoft.cz>

	* glasses.el: Provide facilities for inserting space before left
	parentheses and uncapitalization of identifiers.
	(glasses-mode): Try to remove old overlays in all cases.

2000-04-03  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compile-internal): Display the compilation
	buffer in a different frame, if it's already displayed there.

	* mail/rfc2368.el: New file.

	* simple.el (sendmail-user-agent-compose): Recognize a `body'
	header and insert its value as mail body.

	* subr.el (member-ignore-case): New function.

	* dabbrev.el (dabbrev-ignored-regexps): New user-option.
	(dabbrev--find-expansion): Ignore buffers matching a regexp
	from dabbrev-ignored-regexps.

	* jka-compr.el (jka-compr-compression-info-list): Add `.z'
	to extensions handled by gzip.

2000-04-03  Richard M. Stallman  <rms@gnu.org>

	* files.el (insert-directory): List the total free space
	along with the used space.

	* textmodes/fill.el (fill-individual-paragraphs): If a no-prefix
	line is followed by one that matches CITATION-REGEXP, end the
	paragraph.

2000-04-03  Markus Rost  <rost@delysid.gnu.org>

	* mail/rmailsum.el (rmail-user-mail-address-regexp): New option.
	(rmail-make-basic-summary-line): Use that option.

2000-04-03  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (encoded-string-description):
	Rewritten.   Try pretty description for ISO 2022 escape sequences
	only if CODING-SYSTEM is based on ISO 2022.  Use uppercase letters
	for hexadecimal format.

2000-04-01  Dave Love  <fx@gnu.org>

	* cpp.el: Change customization group to `c' from `C'.

	* vcursor.el (vcursor-move): Use display-color-p.

	* international/mule-util.el: Provide mule-utils.
	(string-to-sequence): Simplify and speed up.

	* international/mule.el (make-coding-system): Purecopy doc-string.

	* international/mule-cmds.el: Various menu changes.
	(describe-specified-language-support): Handle `Default'.
	(set-language-info): Purecopy `info'.

2000-03-31  Andrew Innes  <andrewi@gnu.org>

	* vc.el (vc-backend-diff): Return the correct status if we had to
	retry the rcsdiff command without the --brief option.

2000-03-31  Dave Love  <fx@gnu.org>

	* help.el (help-manyarg-func-alist): Correct several omissions.

	* add-log.el: Don't require cl, fortran.
	(add-log-current-defun-function): Doc fix.
	(change-log-version-number-regexp-list): Remove SCCS part.  Doc fix.
	(change-log-version-rcs): Function deleted.
	(change-log-version-number-search): Doc fix.
	Use vc-workfile-version. Avoid CL dolist.
	(add-change-log-entry): Just call add-log-current-defun to get
	defun.  Simplify somewhat.
	(change-log-get-method-definition-1): Likewise.
	(add-log-current-defun): Return nil if calling
	add-log-current-defun-function does so.  Move Fortran stuff to
	fortran.el.  Return string without properties.

	* textmodes/ooutline.el (outline-font-lock-keywords): Use :upper:
	and :alpha: char classes.

	* mail/supercite.el: Defvar curline when compiling.
	(sc-citation-root-regexp, sc-citation-nonnested-root-regexp)
	(sc-get-address, sc-attribs-extract-namestring): Use [:alnum:]
	rather than a-zA-Z0-9 to allow non-ASCII characters.

2000-03-31  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/byte-opt.el: Fix byte-compiler warnings format.

	* emacs-lisp/bytecomp.el (byte-compile-file-form-autoload):
	Re-enable new code.

	* lpr.el (print-region-1): Use -d to specify printer name for
	systems `usg-unix-v*, `dgux', `hpux', `irix'.

2000-03-31  Dave Love  <fx@gnu.org>

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand):
	Look for function definition in symbol's function value slot first
	instead of first consulting byte-compile-function-environment.

2000-03-31  Kenichi Handa  <handa@etl.go.jp>

	* language/european.el ("Polish"): New language environment.
	(setup-polish-environment): New function.

2000-03-30  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file-form-autoload):
	Disable new code.

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand): Fix bug
	trying to `load' the symbol of an autoload instead of the file
	recorded in the autoload.  Fix error messages.

2000-03-30  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript programming fix for ghostview, doc fix.
	(ps-print-version): New version number (5.1.3).
	(ps-begin-file, ps-begin-job, ps-set-color, ps-do-despool, ps-setup)
	(ps-insert-file, ps-output-boolean, ps-plot-with-face)
	(ps-generate-postscript-with-faces): Code fix.
	(ps-color-values): XEmacs compatibility.
	(ps-print-background-image, ps-print-background-text, ps-printer-name)
	(ps-default-fg, ps-default-bg): Adjust customization.
	(ps-zebra-color): Adjust customization, renaming old ps-zebra-gray var.
	(ps-color-scale): Renaming old ps-color-value fun.
	(ps-print-headers): Replace ps-print-header group to avoid conflict
	with ps-print-header variable.
	(ps-print-miscellany): New group.
	(ps-format-color, ps-rgb-color): New funs.
	(ps-default-foreground): New var.
	(ps-printer-name-option): New const.

2000-03-30  Peter Breton  <pbreton@ne.mediaone.net>

	* net/net-utils.el:
	(network-connection-host, network-connection-service): New variables.
	(network-connection-mode): New mode, derived from comint-mode.
	(network-connection-mode-setup): New function, saves host and
	service information in local variables.

	* locate.el (locate-word-at-point): Added this function.
	(locate): Default to using locate-word-at-point as input
	Run dired-mode-hook

2000-03-29  Dave Love  <fx@gnu.org>

	* calendar/appt.el: Doc fixes.
	(appt-check): Convert min-to-app to a string before passing to
	appt-disp-window-function or concat.
	(appt-delete-window): Remove test for frame-root-window.
	(appt-select-lowest-window, appt-convert-time): Simplify.

	* emacs-lisp/bytecomp.el: Doc fixes.
	(byte-compile-file-form-autoload):
	Update byte-compile-function-environment.

2000-03-29  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/autoload.el: Also print defsubst doc string specially.

	* dired.el (dired-insert-directory): If dired-free-space-program
	failed just delete its output.

2000-03-29  Dave Love  <fx@gnu.org>

	* international/iso-cvt.el: Move provide to end.  Doc fixes.
	(iso-iso2sgml-trans-tab, iso-sgml2iso-trans-tab): New variables.
	(iso-iso2sgml, iso-sgml2iso): New functions.
	(iso-cvt-define-menu): Fix some entries and use backquote for
	clarity.

	* format.el (format-alist): Use iso-cvt functions for SGML/HTML.

2000-03-28  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-last-modified-date): Add parameter
	ISO-DATE.  If non-nil, return date in ISO 8601 format.

2000-03-26  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el (log-edit-mode-map): Inherit from vc-log-mode-map
	if it ever becomes used.
	(log-edit-mode-hook): Default to vc-log-mode-hook.
	(log-edit-mode): Fix the docstring.

	* emacs-lisp/bytecomp.el (byte-compile-eval): Fix and reenable
	the code.

2000-03-26  Dave Love  <fx@gnu.org>

	* net/browse-url.el (browse-url): Re-fix case of
	browse-url-browser-function being an alist.
	(browse-url): Add :link to defgroup.

	* files.el: Doc fixes.
	(file-truename): Include `[' in wildcard characters.
	(automount-dir-prefix): Customize.
	(find-file-wildcards): Add :version.
	(find-file-noselect): Simplify a mapcar call.

	* emacs-lisp/lisp-mode.el (lisp-eval-defun): Make arglist
	compatible with inf-lisp version.
	(eval-defun-1): Fix custom-declare-variable case.

2000-03-25  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (hook): Use `dolist' instead of CL's `mapc'.

2000-03-24  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (COMPILE_FIRST): New macro.
	(compile-files): Compile files from COMPILE_FIRST first.

	* emacs-lisp/bytecomp.el (byte-compile-eval): Disable new code.

	* emacs-lisp/lisp.el (beginning-of-defun-raw): Add regexp
	matching open parenthesis in column 0 to defun-prompt-regexp
	only if open-paren-in-column-0-is-defun-start is set.

	* sun-curs.el: Require CL at compile-time only.

	* msb.el (msb--choose-file-menu): Use `(apply #'list ...)'
	instead of copy-list which is a function from CL.
	(msb--choose-menu, msb--mode-menu-cond)
	(msb--create-buffer-menu-2): Use dolist instead of mapc.
	(msb--init-file-alist): Use mapcar instead of mapcan.
	(msb--aggregate-alist): Use mapcar instead of mapcan.
	Fix `(' in column 0 in doc string.
	(msb--add-separators): Use mapcar instead of mapcan.

	* cus-dep.el: Require CL at compile-time only.

2000-03-24  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el (byte-compile-warning-types)
	(byte-compile-warnings): New warning `noruntime'.
	(byte-compile-constants, byte-compile-variables): Fix docstring.
	(byte-compile-initial-macro-environment): Use `byte-compile-eval' to
	execute `eval-whenc-compile's body.
	(byte-compile-unresolved-functions): Fix docstring.
	(byte-compile-eval): New function.
	(byte-compile-callargs-warn): Check if the function will be available
	at runtime (via property `byte-compile-noruntime').
	(byte-compile-print-syms): New function.
	(byte-compile-warn-about-unresolved-functions): Also warn about
	`noruntime' functions (and use `byte-compile-print-syms').
	(byte-compile-file): Capitalize the message.

2000-03-24  Gerd Moellmann  <gerd@gnu.org>

	* mail/rmail.el (rmail-confirm-expunge): New user-option.
	(rmail-expunge): Ask for confirmation depending on the setting
	of rmail-confirm-expunge.

2000-03-23  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (bootstrap-clean): If $(emacs) exists, build
	loaddefs.el first.  A loaddefs.el that's not up-to-date might
	cause a bootstrap failure because things don't autoload as expected.

2000-03-23  Dave Love  <fx@gnu.org>

	* net/browse-url.el: Restore previous use of
	browse-url-maybe-new-window.

2000-03-23  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Skip banner page fix.
	(ps-print-version): New version number (5.1.2).
	(ps-begin-file, ps-end-file, ps-generate): Code fix.

2000-03-23  Dave Pearson  <davep@davep.org>

	* net/quickurl.el: Changed the type of parameter passed to the
	function defined by `quickurl-format-function'. Before only the
	text of the URL was passed. Now the whole URL structure is passed
	and the function is responsible for extracting the parts it requires.
	Changed the default of `quickurl-format-function' accordingly.
	(quickurl-insert): Changed the `funcall' of
	`quickurl-format-function' to match the above change.
	(quickurl-list-insert): Changed the `url' case so that it makes
	use of `quickurl-format-function', previous to this the format was
	hard wired.

2000-03-22  Gerd Moellmann  <gerd@gnu.org>

	* startup.el: Change some spellings for the X Window System.

2000-03-22  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/make-mode.el (makefile-warn-suspicious-lines):
	Clean up the code and the regexp and make sure the cursor is
	temporarily moved to the suspicious line while querying the user.

2000-03-22  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Initialize.

2000-03-22  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: N-up last page fix.
	(ps-print-version): New version number (5.1.1).
	(ps-end-file, ps-end-job, ps-generate): Code fix.

2000-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* files.el (find-file-run-dired): Update docstring.
	(find-directory-functions): New hook.
	(find-file-noselect): Run find-directory-functions rather than
	calling dired directly.

	* menu-bar.el (pcl-cvs): Add an entry for PCL-CVS' global menu.

	* pcvs.el: Add a minimal leading commentary.
	(cvs-make-cvs-buffer): Change the header part by removing the startup
	message and adding a `Module' entry.  Also replace the FOOTER and
	HEADER special fileinfos with the new support in ewoc for updating
	its own footer and header.
	(cvs-update-header): Update to use the header/footer of the ewoc.
	(cvs-mode): Use define-derived-mode and set truncate-lines to t.
	(cvs-is-within-p): New function.
	(cvs-mode-run): Take advantage of `save-some-buffers's new ability
	to only examine some subset of the buffers.

	* pcvs-info.el (cvs-fileinfo-pp): Use the new property-preserving
	`format' instead of our own ad-hoc functions.
	Remove HEADER and FOOTER cases, now handled in the EWOC.
	(cvs-fileinfo<): Remove HEADER and FOOTER cases.

	* pcvs-parse.el (cvs-parse-run-table): Change message for unknown
	output to avoid scaring the user.
	(cvs-parse-table): Catch message for non-up-to-date commits.

	* pcvs-defs.el (cvs-startup-message): Remove.
	(cvs-global-menu): New autoloaded menu.

	* pcvs-util.el (cvs-string-fill): Remove.

	* emacs-lisp/ewoc.el (ewoc--create-special-node): Remove.
	(ewoc--refresh-node): Don't take the whole EWOC but only the relevant
	PP part of it and also make it work for footers and headers.
	(ewoc-create): Drop POS and BUFFER arguments.
	Use the DLL's dummy node to store the end-of-footer position.
	(ewoc-map, ewoc-invalidate): Update call to ewoc--refresh-node.
	(ewoc-refresh): Remove unused `header' variable.
	(ewoc-(get|set)-hf): New functions.

	* log-view.el (log-view-(msg|file)-(prev|next)): Rename from
	log-view-*-(message|file) and use easy-mmode-define-navigation.
	(log-view-message-re): Match SCCS format as well.
	And match the revision line rather than the dashed separator line.
	(log-view-mode): Use the new define-derived-mode.
	(log-view-current-tag): Fill in with an actual implementation.

	* cvs-status.el (cvs-status-(prev|next)): Rename from
	cvs-status-(prev|next)-entry and use easy-mmode-define-navigation.
	(cvs-tree-dstr-*): Rename from cvstree-dstr-* and use two ascii chars
	to let the output "breathe" a little more (more readable).
	(cvs-status-mode): Use the new define-derived-mode.

	* smerge-mode.el (smerge-auto-leave): New function and variable.
	(smerge-basic-map): Rename from smerge-basic-keymap.
	Change the bindings for smerge-diff-*.
	(smerge-*-map): Use easy-mmode-defmap.
	(smerge-(next|prev)): Use easy-mmode-define-navigation.
	(smerge-keep-*): Use smerge-auto-leave.

2000-03-21  Jason Rumney  <jasonr@gnu.org>

	* cus-edit.el (custom-button-face): Use 3D look for w32.
	(custom-button-pressed-face): Likewise.

2000-03-21  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/etags.el (tags-case-fold-search): New user-option.
	(tags-loop-eval): New function.  Bind case-fold-search around eval
	depending on the value of tags-case-fold-search.
	(tags-loop-continue): Use tags-loop-eval.
	(find-tag-in-order): Bind case-fold-search depending on the value
	of tags-case-fold-search.

2000-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-mode-*-map): Use `easy-mmode-defmap'.
	(diff-end-of-hunk): Return the end position for use in
	`easy-mmode-define-navigation'.
	(diff-recenter): Remove.
	(diff-(next|prev)-*): Rename `diff-*-(prev|next)' and defined in terms
	of `easy-mmode-define-navigation'.
	(diff-kill-*): Rename `diff-*-kill' (for consistency with the
	previous renaming) and fix to use new names.
	(diff-merge-strings): Use \n as separator: simpler, faster.
	(diff-mode): Use `define-derived-mode'.

	* derived.el (define-derived-mode): Don't autoload anymore.
	Prefer the macro-only version provided by easy-mmode.el.

	* emacs-lisp/easy-mmode.el (define-derived-mode): New name for
	`easy-mmode-define-derived-mode'.  Use `combine-run-hooks'.
	(easy-mmode-define-navigation): New macro.

	* subr.el (combine-run-hooks): New function.

2000-03-21  Kenichi HANDA  <handa@etl.go.jp>

	* term/x-win.el: Fontsets related initialization is simplified.

	* international/mule-diag.el (describe-font): Don't refer to
	global-fontset-alist, instead call font-list.
	(describe-fontset, list-fontsets, mule-diag): Likewise.
	(print-fontset): Adjusted for the change of fontset implementation.

	* international/fontset.el (x-charset-registries): Variable removed,
	instead the corresponding data is stored in the default fontset.
	(register-alternate-fontnames): Function removed.
	(resolved-ascii-font): Variable removed.
	(x-compose-font-name): Ignore the second argument REDUCE.
	(x-complement-fontset-spec): Complement only an ASCII font and
	element for those charsets than can use that ASCII font.
	(generate-fontset-menu): Don't refer to global-fontset-alist,
	instead call fontset-list.
	(uninstantiated-fontset-alist): Variable removed.
	(x-style-funcs-alist): Likewise.
	(fontset-default-styles): Likewise.
	(x-modify-font-name): Function removed.
	(create-fontset-from-fontset-spec): Ignore the argument STYLE-VARIANT.
	(create-fontset-from-ascii-font): Docstring adjusted for the above
	change.
	(instantiate-fontset, resolve-fontset-name): Functions removed.
	(fontset-list): Now implemented by C code.

	* faces.el (read-face-font): Fix TABLE arg to completing-read.
	(describe-face): Include `font' attribute in the description.

2000-03-21  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-set-keyboard-layout): Typo fixed.

2000-03-20  Gerd Moellmann  <gerd@gnu.org>

	* rcompile.el, rlogin.el, telnet.el, net-utils.el, quickurl.el,
	ange-ftp.el, browse-url.el, goto-addr.el, webjump.el,
	zone-mode.el, snmp-mode.el: Moved to net subdirectory.

	* jit-lock.el (with-buffer-prepared-for-font-lock): Add comment
	about behavior of set-buffer-modified-p wrt redisplay.

2000-03-19  Richard M. Stallman  <rms@gnu.org>

	* view.el (view-mode-disable): Kill local binding of view-read-only.

2000-03-18  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (font-lock-apply-syntactic-highlight): If VALUE
	is a string, convert it to a syntax cell using string-to-syntax.

	* simple.el (syntax-code-table, syntax-flag-table): New variables.
	(string-to-syntax): New function.

	* ange-ftp.el (ange-ftp-try-passive-mode): New user-option.
	(ange-ftp-get-process): If ange-ftp-try-passive-mode is set,
	try to use passive ftp mode.

2000-03-17  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/awk-mode.el (awk-font-lock-keywords): Add `else'.

	* simple.el (append-to-buffer): Update point of windows after
	insertion.

	* abbrev.el (inverse-add-abbrev): Identify word by first moving
	forward then moving backward.  Reindent.

	* frame.el (other-frame): Call x-focus-frame only if
	focus-follows-mouse is off.

2000-03-17  Dave Love  <fx@gnu.org>

	* pcvs-util.el (cvs-strings->string): Rename replace-regexps-in-string.

2000-03-17  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/rmailsum.el (rmail-summary-font-lock-keywords): Make sure the
	regexp for labels cannot span several lines.

	* emacs-lisp/cl-macs.el (cl-do-arglist): Don't add useless
	`(setq :<key> ':<key>)' to the macro expansion.

2000-03-16  Dave Love  <fx@gnu.org>

	* progmodes/f90.el (f90): Put custom group under `languages', not
	`fortran'.
	(f90-mode-hook): Customize.
	(f90-mode): Set add-log-current-defun-function.
	(f90-current-defun): New function.

2000-03-16  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (custom-variable-tag-face): Handle case that
	default face's height is not a number.
	(custom-face-tag-face, custom-group-tag-face-1)
	(custom-group-tag-face): Ditto.
	(custom-group-tag-face-1): Add :group.

	* info.el (Info-fontify-maximum-menu-size): Increase to 100000.

2000-03-15  Gerd Moellmann  <gerd@gnu.org>

	* pcvs-defs.el (toplevel): Remove autoload cookie for form
	requiring easymenu.

2000-03-15  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript user-defined prologue, PostScript error
	handler, doc fix.
	(ps-print-version): New version number (5.1).
	(ps-user-defined-prologue, ps-error-handler-message)
	(ps-print-prologue-0, ps-error-handler-alist): New vars.
	(ps-setup, ps-begin-file, ps-begin-job): Code fix.
	(ps-insert-string): New function.

2000-03-15  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-compile-expression): Don't generate
	invalid self-assignment code.

2000-03-14  Dave Love  <fx@gnu.org>

	* subr.el (replace-regexp-in-string): Renamed from
	replace-regexps-in-string.  Doc fix.

2000-03-12  Dave Love  <fx@gnu.org>

	* cus-edit.el: Doc fixes.
	(customize-set-variable, customize-save-variable): Rename args for doc.
	(custom-variable-tag-face, custom-face-tag-face)
	(custom-group-tag-face-1, custom-group-tag-face): Modify from
	style which user identify as hyperlink.
	(hook): Don't add undefined functions to the hook.
	(debug-ignored-errors): Transfer message from bindings.el.

2000-03-12  Gerd Moellmann  <gerd@gnu.org>

	* recentf.el (recentf-keep-non-readable-files-p):
	Remove double/nested definition.

2000-03-12  Dave Love  <fx@gnu.org>

	* facemenu.el (facemenu-get-face): Use display-color-p.
	* enriched.el (enriched-decode-foreground): Likewise.
	(enriched-decode-background): Likewise.
	* isearch.el (isearch-highlight): Likewise.
	* info-look.el (info-lookup): Likewise.
	* simple.el (completion-setup-function): Likewise.

	* textmodes/text-mode.el (text-mode-hook): Add flyspell-mode to
	:options.

	* bindings.el (mode-line-format): Fix line-number and
	column-number items.  Add help-echo for the background.
	(mode-line-mule-info): Modify help-echo.

	* avoid.el (mouse-avoidance-mode): Add autoload cookie to defcustom.

	* files.el (load-file): Allow completion to .elc.

	* man.el: Doc fixes.
	(Man-init-defvars): Use display-color-p to set fontification.

	* play/hanoi.el (hanoi-internal): Don't use oddp.

2000-03-12  Gerd Moellmann  <gerd@gnu.org>

	* arc-mode.el (archive-zip-update): Add `-P' for pkzip.

	* emacs-lisp/re-builder.el: Remove RCS Id, remove history comment.

2000-03-12  Detlev Zundel  <detlev.zundel@stud.uni-karlsruhe.de>

	* emacs-lisp/re-builder.el (reb-re-syntax): Fix typo in `:type'.
	Fix comment.

2000-03-10  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-keywords): Fix the doc now that
	regexp-opt-depth is unnecessary.
	(save-buffer-state): Set an edebug spec.
	(font-lock-fontify-anchored-keywords): Properly handle the case when
	the matcher goes past the limit.

	* cvs-status.el, log-edit.el, log-view.el, pcvs-defs.el, pcvs-info.el,
	pcvs-parse.el, pcvs-util.el, pcvs.el: New files.

	* emacs-lisp/ewoc.el: New file.  This is a merge of elib-node.el,
	dll.el and cookie.el (from Elib) with heavy renaming and other
	massaging.

	* emacs-lisp/easy-mmode.el (easy-mmode-defmap, easy-mmode-defsyntax):
	Autoload the functions used.
	(easy-mmode-define-syntax): Fix CL typo.
	(easy-mmode-define-derived-mode): Improve the docstring generation.

2000-03-10  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfo.el (texinfo-version): Variable and function
	removed.

2000-03-09  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-keymap): Extend to
	allow more flexibility.
	(easy-mmode-set-keymap-parents, easy-mmode-define-syntax): New fns.
	(easy-mmode-defmap, easy-mmode-defsyntax)
	(easy-mmode-define-derived-mode): New macros.

2000-03-09  Didier Verna  <didier@xemacs.org>

	* rect.el (replace-rectangle): New function.

2000-03-09  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-comment-line-start): Define as "C".
	(fortran-comment-line-start-skip): Don't match cpp stuff.
	(font-lock-keywords): Add * to comment-chars.  Grok cpp stuff.
	(fortran-mode-map): Remove over-eager custom-menu-create for now.
	(fortran-mode): Don't set fortran-comment-line-start-skip,
	fortran-comment-line-start here.  Set comment-start,
	add-log-current-defun.
	(fortran-fill-paragraph): Adjust to try to DTRT with cpp stuff.
	(fortran-current-defun): New function.

2000-03-09  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/re-builder.el: New file.

	* mouse.el (mouse-drag-region): Don't run up-event handler
	if hscroll has changed.

	* octave-mod.el (octave-font-lock-keywords): To font-lock the
	builtin operators, use `font-lock-builtin-face' for Emacs and
	`font-lock-preprocessor-face' otherwise.

	* font-lock.el (lisp-font-lock-keywords-1): Highlight
	`(defun (setf foo)' differently.

2000-03-08  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el: Update copyright and leading comment.
	(regexp-opt): Update comment and adapt the code the new meaning of
	the `paren' argument of regex-opt-group for shy-groups.
	(regexp-opt-depth): Handle shy groups as well as backslashed
	backslashes.
	(regexp-opt-group): Turn the leading comment into a docstring.
	Allow `paren' to be a string (the string to use to open a group).
	Remove open-presuf and close-presuf.  Instead of checking for `all
	one-char' and then later on check for `several one-char', handle
	both cases close together.  Also apply a more generic algorithm
	for suffixes (the mirror image of the algorithm used for
	prefixes).  Use shy-groups.  Use nreverse rather than reverse.
	(regexp-opt-try-suffix): Removed.

	* cmuscheme.el (inferior-scheme-mode-map): Define it independently
	from comint-mode-map, so we can just inherit from it.  Also, move
	the initialization into the `defvar' since there's no docstring
	anyway and it's fairly short.
	(inferior-scheme-mode): Define it as derived-mode: the code is
	shorter and this way we inherit from comint-mode-map rather than
	copying it.

	* subr.el (replace-regexps-in-string): Properly handle the case
	where we match an empty string.

	* comint.el (comint-exec-1): Add the current-dir to the exec-path
	when the command has a directory component (such as "./testml").
	Also fix a typo in the comment.

2000-03-08  Gerd Moellmann  <gerd@gnu.org>

	* Makefile (compile-files): Compile files one by one because
	that's the only way to ensure a clean compilation environment for
	each individual file.

	* frame.el (other-frame): Call x-focus-frame.

2000-03-07  Dave Love  <fx@gnu.org>

	* recentf.el (recentf-keep-non-readable-files-p): Add :set,
	:require to defcustom.

	* emacs-lisp/cl.el: Remove expt, delete, rassoc from autoloads lists.

	* files.el (auto-mode-alist): Add configure.in.

	* progmodes/autoconf.el: New file.

2000-03-07  Gerd Moellmann  <gerd@gnu.org>

	* mail/mh-e.el: Change maintainer to `none'.

	* recentf.el (recentf-keep-non-readable-files-p): Quote args
	to remove-hook and add-hook.

2000-03-07  Francesco Potortì  <F.Potorti@cnuce.cnr.it>

	* sendmail.el (mail-send-nonascii): Add a new value `mime' and use
	it as the default.
	(mail-send): Test mail-send-nonascii also for the new `mime' value.
	(sendmail-send-it): Conditionally add MIME headers specifying the
	used character set.

2000-03-07  Dave Love  <fx@gnu.org>

	* winner.el: Fix keywords, autoload cookies.
	Split eval-when-compile form to avoid compilation failure.

2000-03-07  Miyashita Hisashi  <himi@bird.scphys.kyoto-u.ac.jp>

	* international/mule.el: Modify comment about coding system
	property `coding-category'.
	(make-coding-system): New argument EOL-TYPE.  Pay attention to
	coding-category property of PROPERTIES.

	* international/mule-conf.el (coding-category-utf-8)
	(coding-category-utf-16-be, coding-category-utf-16-le): New coding
	categories.  Include them in the argument for set-coding-priority.

	* international/mule-cmds.el (reset-language-environment):
	Include coding-category-utf-8, coding-category-utf-16-be, and
	coding-category-utf-16-le in the argument for set-coding-priority.
	(reset-language-environment): Initialize coding-category-utf-8,
	coding-category-utf-16-be, and coding-category-utf-16-le to nil.

2000-03-06  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-file-or-variation-thereof): New func, for
	code abstracted out of `bookmark-jump-noselect'.  Now tries info
	extensions as well as compression extensions.
	(bookmark-jump-noselect): Use above new func.

2000-03-03  Gerd Moellmann  <gerd@gnu.org>

	* strokes.el: Change maintainer's mail address.

2000-03-03  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-character-sets): Make help-echo
	string by substitute-command-keys.
	(list-character-sets): Likewise.
	(sort-listed-character-sets): Call help-setup-xref.

2000-03-02  Gerd Moellmann  <gerd@gnu.org>

	* time.el (display-time-mail-file): Add `none' to the list of choices.

2000-03-01  Dave Love  <fx@gnu.org>

	* help.el (help-xref-go-back): Don't try to set position.

	* international/mule-diag.el (list-character-sets):
	Call help-setup-xref.  Add help-echo to xrefs.
	(list-character-sets-1): Add help-echo to xrefs.

2000-03-02  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (blink-cursor-mode): Switch cursor on when turning
	the mode off.

	* add-log.el (add-log-current-defun): Add support for
	Autoconf mode.

	* mail/rmail.el (rmail-quit-hook): New variable.

2000-03-01  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-syntax-table): Fix syntax of |.

	* help.el (help-xref-button): Add help-echo arg.
	(describe-function-1, describe-variable, help-make-xrefs): Use it.

	* faces.el (list-faces-display): Supply help-echo with help-make-xrefs.

	* facemenu.el (list-text-properties-at): Set help-xref-stack to nil.

2000-03-01  Gerd Moellmann  <gerd@gnu.org>

	* image.el (defimage): Look for image files in load-path.

	* frame.el (busy-cursor-delay-seconds): Change type to `number'.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf): Added version tag to the defgroup of recentf.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-cleanup): Changed to remove excluded file too.
	(recentf-edit-list-action): `recentf-edit-list' checkbox widget
	action to select/unselect a file.
	(recentf-edit-list): Code cleanup and improvement.
	(recentf-open-more-files-action): `recentf-open-more-files' button
	widget action to open a file.
	(recentf-open-more-files): No more use standard completion but widgets.
	(recentf-more-collection): Deleted.
	(recentf-more-history): Deleted.
	(recentf-setup-more-completion): Deleted.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-mode): No more needs that Emacs is running
	under a window-system.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-edit-list): New command to edit the recent
	list which allow the user to remove files.
	(recentf-edit-selected-items): New global variable, used by
	`recentf-edit-list' to hold the list of files to be removed from
	the recent list.
	(recentf-make-menu-items): Updated to display a "Edit list..."
	menu item.  Minor code cleanup.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-open-more-files): New command to open files
	that are not displayed in the menu.
	(recentf-more-collection): New global variable holding the set of
	permissible completions used by `recentf-open-more-files'.
	(recentf-more-history): New global variable holding the history list
	used by `recentf-open-more-files' completion.
	(recentf-setup-more-completion): New function to setup completion for
	`recentf-open-more-files'.
	(recentf-make-menu-items): Updated to display a "More..." menu item.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-menu-action): Doc fixed.

2000-03-01  David Ponce  <david.ponce@wanadoo.fr>

	* recentf.el (recentf-menu-filter): Doc updated.
	(recentf-update-menu-hook): Allow menu filters to force menu update.
	(recentf-make-menu-items): New menu filter handling.
	(recentf-make-menu-item): New helper function.
	(recentf-menu-elements): New menu handling function.
	(recentf-sort-ascending): Updated to new menu filter handling.
	(recentf-sort-descending): Updated to new menu filter handling.
	(recentf-sort-basenames-ascending): New menu filter function.
	(recentf-sort-basenames-descending): New menu filter function.
	(recentf-show-basenames): New menu filter function.
	(recentf-show-basenames-ascending): New menu filter function.
	(recentf-show-basenames-descending): New menu filter function.

2000-02-29  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (list-diary-entries): Don't try to go forward at
	the end of the buffer.

2000-02-29  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-character-sets):
	Completely rewritten.
	(sort-listed-character-sets): New function.
	(list-character-sets-1): Completely rewritten.
	(list-character-sets-2): New function.
	(non-iso-charset-alist): New variable.
	(decode-codepage-char): New function.
	(charset-history): New variable.
	(read-charset) (list-block-of-chars)
	(list-iso-charset-chars)
	(list-non-iso-charset-chars)
	(list-charset-chars): New functions.
	(mule-diag): Call list-character-sets-2, not list-character-sets-2.
	(dump-charsets): Likewise.

2000-02-29  Gerd Moellmann  <gerd@gnu.org>

	* dired-x.el (dired-filename-at-point): Add `@' to valid
	file name characters.
	(dired-filename-at-point): Handle ange-ftp file names.

	* frame.el (frame-notice-user-settings): Use assq-delete-all
	instead of assoc-delete-all.
	(frame-notice-user-settings): Ditto.

	* subr.el (assq-delete-all): Renamed from assoc-delete-all.
	Don't copy alist.

2000-02-28  Eli Barzilay  <eli@cs.cornell.edu>

	* calculator.el (calculator-use-menu): New option.
	(calculator-initial-bindings): Changed some bindings to work as macros.
	(calculator-forced-input): Removed.
	(calculator-restart-other-mode): New variable.
	(calculator-mode-map): Set up menu.

2000-02-28  Jari Aalto  <jari.aalto@poboxes.com>

	* font-lock.el (java-keywords): Added missing java 1.2.2 Javadoc tags.

2000-02-28  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-envelop-ESC-key): Add the option to
	translate all ESC key sequences.
	(viper-goto-mark-subr): Restore markers for files for which
	they were saved.
	* viper-init.el (viper-translate-all-ESC-keysequences): New variable.
	* viper-util.el (viper-set-replace-overlay-glyphs)
	(viper-set-replace-overlay): Always check if the replacement
	overlay is live.
	* viper.el (viper-vi-state-mode-list): Add major modes.
	* ediff-wind.el: Minor comment changes.
	* ediff.el: Copyright notice date fix.

2000-02-27  Jason Rumney  <jasonr@gnu.org>

	* faces.el (face-font-family-alternatives): Add arial to helv.
	(mode-line, header-line, tool-bar): Same default as x for w32.
	(fixed-pitch, variable-pitch): Remove wildcard as it prevents
	face-font-family-alternatives from working.
	* term/w32-win.el (mouse-set-font): Do not build fontset from
	chosen font.

2000-02-25  Sam Steingold  <sds@goems.com>

	* emacs-lisp/cl-indent.el (toplevel): Indent `pprint-logical-block'
	properly.

2000-02-25  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-resend): Verify buffer is really Rmail.

2000-02-25  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/helper.el (Helper-describe-mode): Make buffer writable.

	* frame.el (busy-cursor-delay-seconds): New option.

2000-02-24  Gerd Moellmann  <gerd@gnu.org>

	* frame.el (show-cursor-in-non-selected-windows): New option.

2000-02-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* diary-lib.el (include-other-diary-files): Undo the selective
	display in any included file and don't kill it.

2000-02-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-mode-map): Don't remove "Edit" from the menu bar.
	Menu items converted to (menu-item format, help strings added.
	[downcase, upcase]: Don't enable on MS-DOS.
	[symlink, symlinks]: Don't show if make-symbolic-link is not bound.
	[chown, chgrp]: Don't show on MS-DOS and MS-Windows.

2000-02-23  Dave Love  <fx@gnu.org>

	* simple.el (zap-to-char, kill-line, kill-region, kill-word)
	(backward-kill-word): Revert addition of * to interactive spec --
	it's a feature.

	* paragraphs.el (kill-paragraph, backward-kill-paragraph)
	(backward-kill-sentence, kill-sentence): Likewise.

	* gud.el (gud-jdb-build-class-source-alist): Prepend space to
	scratch buffer name.
	(gud-format-command): Use int-to-string in ?l case.  Simplify slightly.

	* term/w32-win.el (internal-face-interactive): Update prompt for
	new read-face-name.

	* mail/footnote.el (footnote): Add :version to defgroup.
	(footnote-section-tag-regexp): Customize.
	(footnote-start-tag, footnote-end-tag): New option.
	(footnote-latin-regexp): New variable.
	(Footnote-latin): New function.
	(footnote-style-alist): Add element for latin style.
	(footnote-style): Moved.
	(Footnote-goto-footnote): Use eq to test arg.

	* mouse.el (mouse-drag-mode-line-1): Remove `growth =' message.

	* emacs-lisp/byte-opt.el: Change old backquote syntax.
	(byte-compile-trueconstp): Include keywords.
	(byte-optimize-quote, byte-optimize-lapcode):
	Use byte-compile-const-symbol-p.
	(byte-optimize-char-before): New optimization.

	* emacs-lisp/bytecomp.el: Change old backquote syntax.
	(byte-compile-const-symbol-p): New function.
	(byte-compile-constp, byte-compile-out-toplevel)
	(byte-compile-form, byte-compile-form, byte-compile-variable-ref):
	Use it.

	* subr.el (define-key-after): Default AFTER to t.  Doc fix.

2000-02-23  Kenichi Handa  <handa@etl.go.jp>

	* international/encoded-kb.el: Be sure to update minor-mode-alist
	and minor-mode-map-alist.
	(encoded-kbd-self-insert-iso2022-8bit): Handle ISO's single shift
	codes SS2 and SS3 correctly.
	(encoded-kbd-self-insert-ccl): New function.
	(encoded-kbd-setup-keymap): New function.
	(encoded-kbd-mode): Handle CCL based coding system.  Setup keymap
	by calling encoded-kbd-setup-keymap.

	* emacs-lisp/lisp-mode.el: Don't change syntax of multibyte characters.
	(lisp-mode-variables): Set multibyte-syntax-as-symbol to t locally.

2000-02-22  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table)
	(lisp-mode-map, lisp-interaction-mode-map): Define all inside defvar.
	(lisp-mode-syntax-table): Set up for #|...|# comments.
	(lisp-imenu-generic-expression): Purecopy strings.  Use syntax
	classes.  Match `defface'.
	(emacs-lisp-mode-hook): Add checkdoc-minor-mode to options.
	(eval-defun-1): Fix for defcustom.
	(lisp-indent-region): Doc fix.

	* subr.el (when, unless, split-string): Doc fix.
	(read-passwd): Move call of clear-this-command-keys to the right place.
	(replace-regexps-in-string): New function.

2000-02-22  Gerd Moellmann  <gerd@gnu.org>

	* help.el (describe-variable): Set syntax table to
	emacs-lisp-mode-syntax-table when moving forward over the
	symbol's name.

2000-02-22  Dave Love  <fx@gnu.org>

	* xt-mouse.el: Doc fixes.
	(xterm-mouse-position-function): New function, replacing advice of
	mouse-position.
	(xterm-mouse-mode): Use it.  Don't turn on under a window system.

	* emacs-lisp/cl-indent.el: Remove bogus spec for define-condition.

2000-02-21  Gerd Moellmann  <gerd@gnu.org>

	* format.el (format-annotate-single-property-change):
	Handle properties with dotted-list values.
	(format-proper-list-p): New function.

	* enriched.el (enriched-face-ans): Handle '(foreground-color
	. COLOR) and (background-color . COLOR).

2000-02-20  Dave Love  <fx@gnu.org>

	* textmodes/flyspell.el (flyspell-mouse-map): Change definition
	and assignments to it.
	(flyspell-mode-on): Define flyspell-local-mouse-map, inheriting
	current local map.
	(make-flyspell-overlay): Use it.
	(flyspell-correct-word/mouse-keymap): Change XEmacs test.

	* emacs-lisp/lisp-mnt.el: Don't require emacsbug at top level.
	(lm-get-header-re): Defun, not defsubst.
	(lm-get-package-name): Defun, not defsubst.  Simplify.
	(lm-version): Doc fix.  Simplify.
	(lm-header, lm-header-multiline, lm-header-multiline, lm-summary)
	(lm-crack-address, lm-last-modified-date, lm-commentary)
	(lm-verify, lm-synopsis): Simplify.
	(lm-report-bug): Require emacsbug.  Use compose-mail.

2000-02-20  Gerd Moellmann  <gerd@gnu.org>

	* dired.el (dired-mode): Call propertized-buffer-identification
	to set mode-line-buffer-identification to something having
	the right text properties.

	* bindings.el (propertized-buffer-identification): New function.

2000-02-20  Dave Love  <fx@gnu.org>

	* frame.el (display-mouse-p): Use variable xterm-mouse-mode and
	check for t-mouse too.

	* cus-start.el: Make echo-keystrokes `number'.

2000-02-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-goto-menu) [next-tag, next-tag-otherw]:
	Don't call ring-empty-p unless tags-location-ring is bound.
	From Noah Friedman <friedman@splode.com>.

2000-02-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el (hs-flag-region): No longer use
	`intangible' overlay property.

	(hs-toggle-hiding): New command.
	(hs-mouse-toggle-hiding): Use `hs-toggle-hiding'.

	(hs-minor-mode): Move call to `hs-grok-mode-type' early on.
	Fix omission bug: Run `hs-minor-mode-hook' for both activation
	and deactivation.

2000-02-18  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-macs.el (caar, cadr, cdar, cddr): Add defsetfs.

2000-02-17  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (lisp-indent-259): Indentation fix.

	* progmodes/pascal.el (pascal-mode-syntax-table): Change syntax
	of `*' to handle `(* ... *)' comments.

2000-02-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (list-faces-display): Use display-mouse-p instead of
	window-system.

	* menu-bar.el (global-map): Menu-bar items converted to the new
	format (menu-item..., rearranged for better CUA compliance, and
	their names changed for better clarity.  Help strings added.

	* international/mule-cmds.el (mule-menu-keymap)
	(describe-language-environment-map, set-coding-system-map)
	(setup-language-environment-map): Convert to new (menu-item...
	form, add help strings.  Change names of menu items for better clarity.
	"Mule" menu-bar item removed (it's now in the "Options" submenu).

2000-02-17  Gerd Moellmann  <gerd@gnu.org>

	* dired-aux.el (dired-do-copy): Remove spurious character.`n'
	within the code.

2000-02-16  Dave Love  <fx@gnu.org>

	* faces.el: Don't require custom.  Add more specific :groups to
	various deffaces.
	(set-face-attribute): Purecopy args.
	(read-face-name): Default to name at point and use it in prompt.
	Remove colon from arg in all callers.
	(list-faces-display): Hyperlink to face descriptions and customize
	buffers.

2000-02-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-match-inline): An atom never matches a list.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-mode): Replaced manual splitting of path
	at ':' characters by call to split-string.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Added RCS version identification.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Some temporary comments removed.
	(bibtex-field-name, bibtex-entry-type): Made the relationship explicit.
	(bibtex-field-const): Allow capital letters.
	(bibtex-start-of-string): Deleted because unused.

	* textmodes/bibtex.el: Unified some nomenclature.  We no longer
	use the term 'reference' to describe a bibtex entry as a whole.
	Further, reference keys are no longer called 'labels'.
	(bibtex-keys): Renamed to bibtex-reference-keys.
	(bibtex-reformat-previous-labels): Renamed to
	bibtex-reformat-previous-reference-keys.
	(bibtex-reference-type): Renamed to bibtex-entry-type.
	(bibtex-reference-head): Renamed to bibtex-entry-head.
	(bibtex-reference-maybe-empty-head): Renamed to
	bibtex-entry-maybe-empty-head.
	(bibtex-key-in-reference): Renamed to bibtex-key-in-entry.
	(bibtex-search-reference): Renamed to bibtex-search-entry.
	(bibtex-enclosing-reference-maybe-empty-head): Renamed to
	bibtex-enclosing-entry-maybe-empty-head.
	(bibtex-entry-field-alist, bibtex-entry-head)
	(bibtex-font-lock-keywords, bibtex-skip-to-valid-entry)
	(bibtex-map-entries, bibtex-search-entry)
	(bibtex-enclosing-entry-maybe-empty-head, bibtex-format-entry)
	(bibtex-generate-autokey, bibtex-parse-keys, bibtex-pop, bibtex-mode)
	(bibtex-submit-bug-report, bibtex-entry, bibtex-print-help-message)
	(bibtex-make-field, bibtex-end-of-entry, bibtex-sort-buffer)
	(bibtex-find-entry-location, bibtex-validate, bibtex-find-text)
	(bibtex-kill-entry, bibtex-clean-entry, bibtex-reformat)
	(bibtex-complete-key, bibtex-String) : Use the new nomenclature.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el (bibtex-strings, bibtex-keys): Removed redundant
	comment.
	(bibtex-format-field-delimiters): New function, functionality
	extracted from bibtex-format-entry.
	(bibtex-autokey-get-yearfield-digits): New function, functionality
	extracted from bibtex-autokey-get-yearfield.

	* textmodes/bibtex.el: Completely reimplemented parsing of bibtex
	entries in order to avoid stack overflow in the regexp matcher if
	field contents become large.
	(bibtex-cfield, bibtex-name-in-cfield, bibtex-text-in-cfield)
	(bibtex-field-string-part-not-braced)
	(bibtex-field-string-part-no-inner-braces)
	(bibtex-field-string-part-1-inner-brace)
	(bibtex-field-string-part-2-inner-braces)
	(bibtex-field-string-part-3-inner-braces, bibtex-field-string-braced)
	(bibtex-field-string-quoted, bibtex-field-string)
	(bibtex-field-string-or-const, bibtex-field-text, bibtex-field)
	(bibtex-name-in-field, bibtex-text-in-field, bibtex-reference-infix)
	(bibtex-string, bibtex-key-in-string, bibtex-text-in-string):
	Deleted as parsing is now performed by the following functions.
	(bibtex-parse-nested-braces, bibtex-parse-field-string-braced)
	(bibtex-parse-quoted-string, bibtex-parse-field-string-quoted)
	(bibtex-parse-field-string, bibtex-search-forward-field-string)
	(bibtex-parse-association, bibtex-field-name-for-parsing)
	(bibtex-parse-field-name, bibtex-parse-field-text, bibtex-parse-field)
	(bibtex-search-forward-field, bibtex-search-backward-field)
	(bibtex-start-of-field, bibtex-end-of-field)
	(bibtex-start-of-name-in-field, bibtex-end-of-name-in-field)
	(bibtex-start-of-text-in-field, bibtex-end-of-text-in-field)
	(bibtex-parse-string-prefix, bibtex-parse-string-postfix)
	(bibtex-parse-string, bibtex-search-forward-string)
	(bibtex-search-backward-string, bibtex-start-of-string)
	(bibtex-end-of-string, bibtex-start-of-reference-key-in-string)
	(bibtex-end-of-reference-key-in-string, bibtex-start-of-text-in-string)
	(bibtex-end-of-text-in-string): New functions for the parsing of bibtex
	entries.  Instead of reporting the results of the parsing by
	match-beginning or match-end, these functions return data structures
	that hold the corresponding positions.
	(bibtex-enclosing-field): Changed to also report field boundaries by
	return values rather than by match-beginning or match-end.
	The following functions have been adapted to use the new
	parsing functions.
	(bibtex-skip-to-valid-entry, bibtex-search-reference)
	(bibtex-enclosing-field, bibtex-format-entry)
	(bibtex-autokey-get-namefield, bibtex-autokey-get-titlestring)
	(bibtex-parse-keys, bibtex-complete, bibtex-pop, bibtex-mode)
	(bibtex-print-help-message, bibtex-end-of-entry)
	(bibtex-ispell-abstract, bibtex-validate, bibtex-next-field)
	(bibtex-find-text, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters)
	(bibtex-kill-field, bibtex-empty-field, bibtex-fill-entry):
	Use the new method for parsing.
	(bibtex-assoc-of-regexp, bibtex-skip-to-valid-entry)
	(bibtex-map-entries, bibtex-flash-head)
	(bibtex-enclosing-reference-maybe-empty-head, bibtex-format-entry)
	(bibtex-autokey-change, bibtex-autokey-get-namefield)
	(bibtex-autokey-get-names, bibtex-autokey-get-titlestring)
	(bibtex-autokey-get-titles, bibtex-parse-keys, bibtex-pop, bibtex-mode)
	(bibtex-end-of-entry, bibtex-ispell-abstract, bibtex-sort-buffer)
	(bibtex-validate, bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters)
	(bibtex-kill-field, bibtex-kill-entry): Use let* instead of let in
	order to make the new binding of case-fold-search immediately visible.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* textmodes/bibtex.el: Copyright notice is up to date.
	Added constant 'bibtex-maintainer-salutation.

	* textmodes/bibtex.el (bibtex-mode): Use with-temp-buffer rather
	than make-temp-name, use match-string-no-properties and eliminate
	a quadratic behavior when building bibtex-strings.

	* bibtex.el (bibtex-reference-key): Accept string entries whose
	reference key contains upper case letters.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-reference-head): Allow entries to start with
	a new line.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el: Hiding of entry bodies is not longer provided by
	bibtex.el directly.  Instead the hideshow package can be used.
	Added a special bibtex entry to hs-special-modes-alist.
	(bibtex-hs-forward-sexp): Added for hideshow.el.

2000-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-entry-field-alist): Added booktitle field to
	proceedings entry type (for cross referencing). Thanks to Wagner
	Toledo Correa for the suggestion.

	* bibtex.el: Added `reftex-view-crossref-from-bibtex' to menu.

2000-02-14  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Setup case table for Vietnamese.

2000-02-12  Gerd Moellmann  <gerd@gnu.org>

	* uniquify.el (toplevel): Require CL at compile time.
	(uniquify-push): Removed.

	* shadowfile.el (shadow-when): Removed.

	* tempo.el (tempo-dolist, tempo-mapc): Removed.
	(tempo-process-and-insert-string): Use dolist instead of tempo-dolist.

	* textmodes/sgml-mode.el (sgml-mode-common): Remove `$' from
	regexp for paragraph-start.

	* mail/mail-utils.el (rmail-dont-reply-to): Remove leading
	commas as well.

2000-02-10  Dave Love  <fx@gnu.org>

	* wid-edit.el (widgets) [defgroup]: Remove url link.
	(widget-color-choice-list, widget-color-history, widget-mouse-help):
	Deleted.
	(widget-specify-field, widget-specify-button): Don't use
	widget-mouse-help as help-echo property.
	(default): Use #'ignore for :validate and :mouse-down-action.
	(checkbox): Add help-echo.
	(widget-sexp-validate): Rewritten to clarify error messages.
	(character): Use char-valid-p in :match function.
	(widget-color-complete): Use facemenu-color-alist.
	(widget-color-action): Use facemenu-read-color.

	* emacs-lisp/cl-macs.el: Don't bother testing for defalias.  Don't
	set up `caar' &c that we now have.

2000-02-09  Ray Blaak  <blaak@gnu.org>

	* delphi.el: Make resourcestring a declaration region, like const
	and var.

2000-02-09  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-input-method-map): New variable.
	(mode-line-mule-info): Use it; fix last change.
	(mode-line-mode-menu): Move definition.
	(mode-line-mouse-sensitive-p): Deleted.
	(mode-line-mode-name): Don't use mode-line-mouse-sensitive-p.
	(make-mode-line-mouse-sensitive): Deleted.  Body moved to top level.

	* startup.el (command-line-1): Don't call
	make-mode-line-mouse-sensitive.

2000-02-07  Francesco Potortì  <F.Potorti@cnuce.cnr.it>

	* mail/rmail.el (rmail-retry-failure): Use rmail-beginning-of-message
	before rmail-toggle-header, because the former toggles headers.

2000-02-06  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-kill-junk): New interactive function.
	(diff-reverse-direction): Use delete-and-extract-region.
	(diff-post-command-hook): Restrict the area so that the hook also works
	outside of any diff hunk.  This is necessary for the minor-mode.
	(diff-mode): Use toggle-read-only and minor-mode-overriding-map-alist.
	(diff-minor-mode): Setup the hooks for header-hunk rewriting.

	* font-lock.el (font-lock-keywords): Fix doc for multiline matches.
	(font-lock-add-keywords): Make it work even if font-lock-mode is nil,
	so that it can be used more easily in <foo>-mode-hook.  Also make sure
	to avoid duplicate entries.
	(font-lock-update-removed-keyword-alist): Renamed `major-mode'->`mode'.
	(font-lock-remove-keywords): Just as was done for `add', allow it to
	work even if font-lock-mode is nil.  Also make sure we don't modify
	any pre-existing list by forcing a copy-sequence.  Finally rename
	`major-mode' to `mode'.
	(font-lock-fontify-syntactic-anchored-keywords)
	(font-lock-fontify-anchored-keywords)
	(font-lock-fontify-keywords-region): Use line-end-position.
	Don't make `font-lock-multiline' local (it's now done in
	font-lock-set-defaults).
	(font-lock-set-defaults): Make `font-lock-multiline' local.
	Move the `font-lock-fontified' creation to inside the `unless'.

2000-02-06  Andrew Innes  <andrewi@gnu.org>

	* term/w32-win.el (x-handle-args): Comment out call to message,
	which occurs before window system is initialized.

	* makefile.nt: Add support for recompiling lisp code.

2000-02-04  Dave Love  <fx@gnu.org>

	* bindings.el (mode-line-mule-info): Fix/extend last change.

	* completion.el: Replace completion-dolist with dolist.

	* tar-mode.el: Replace tar-dolist, tar-dotimes with dolist, dotimes.

2000-02-04  Carsten Dominik  <dominik@strw.leidenuniv.nl>

	* textmodes/reftex.el (reftex-compile-variables): Regexp-quote the
	environment names before they go into the section regexp.

	* textmodes/reftex-global.el (reftex-change-label): Add `A-Z' to
	char class in regexp.

	* textmodes/reftex-parse.el (reftex-with-special-syntax):
	Bind `case-fold-search' to nil.

	* progmodes/idlwave.el (idlwave-template):
	Respect `idlwave-abbrev-change-case'.
	(idlwave-rw-case, idlwave-elif, idlwave-case, idlwave-for)
	(idlwave-if, idlwave-procedure, idlwave-function, idlwave-repeat)
	(idlwave-while): Respect `idlwave-reserved-word-upcase'.
	(idlwave-rw-case): New function.
	(idlwave-statement-match): Fixed problem with assignment regexp.
	(idlwave-font-lock-keywords): Improved regexp for keyword parameters.
	(idlwave-surround): New argument LENGTH to support padding of
	operators longer than 1 char.

	* progmodes/idlw-shell.el (idlwave-shell-print): Fixed bug with
	idlwave-shell-expression-overlay.  Implemented printing of
	expressions on higher levels of the calling stack.
	(idlwave-shell-display-level-in-calling-stack): Restore stack level.
	(idlwave-retrieve-expression-from-level): New function.
	(idlwave-shell-last-calling-stack): Variable removed.
	(idlwave-shell-reset): Argument action reversed (`visible' to
	`hidden').  Also remove stop-line overlay.
	(idlwave-shell-calling-stack-routine): New variable.
	(idlwave-shell-parse-stack-and-display): Messages now display
	negative level numbers.
	(idlwave-shell-mode): Set `modeline-format'.
	(idlwave-shell-display-line): Set `idlwave-shell-mode-line-info'.
	(idlwave-shell-make-new-bp-overlay): Fixed glyph display for Emacs 21.
	(idlwave-shell-print-expression-function): New option.

	* progmodes/idlw-toolbar.el (idlwave-toolbar-add-everywhere)
	(idlwave-toolbar-remove-everywhere): Keybindings prefix is now
	`tool-bar' instead of `toolbar'.

2000-02-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl.el: Use bytecomp-load-hook, not
	emacs-lisp-mode-hook.  Don't check for defalias being defined.

	* emacs-lisp/cl-extra.el (cl-builtin-gethash, cl-builtin-remhash)
	(cl-builtin-maphash, cl-builtin-clrhash): Remove definitions.
	Use the new builtins directly.

	* whitespace.el (whitespace): Add :version to defgroup.

	* tooltip.el (tooltip-gud-tips-p, tooltip-gud-toggle-dereference):
	Doc fix.

	* thingatpt.el (sexp-at-point, symbol-at-point)
	(number-at-point, list-at-point): Add autoload cookie.

	* recentf.el (recentf): Add :version to defgroup.

	* quickurl.el (quickurl): Add :version to defgroup.

	* elide-head.el (elide-head): Use point-marker more.

	* bs.el (bs): Add :version to defgroup.

	* autorevert.el (global-auto-revert-mode): Add autoload cookie.

	* progmodes/delphi.el (delphi): Add :version to defgroup.

2000-02-02  Gerd Moellmann  <gerd@gnu.org>

	* ange-ftp.el (ange-ftp-write-region): Handle case that
	succeeding process operation sets a different coding system.

	* calculator.el: New file.

2000-02-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (frames-on-display-list, framep-on-display): New functions.
	(display-mouse-p, display-popup-menus-p, display-graphic-p)
	(display-selections-p, display-screens, display-pixel-width)
	(display-pixel-height, display-mm-width, display-mm-height)
	(display-backing-store, display-save-under, display-planes)
	(display-color-cells, display-visual-class): New functions.

	* term/tty-colors.el (tty-color-gray-shades): New function.

	* faces.el (display-color-p): Use framep-on-display.
	(display-grayscale-p): New function.

2000-01-31  Dave Love  <fx@gnu.org>

	* emacs-lisp/fontset.el (standard-fontset-spec): Purecopy it.
	(create-fontset-from-x-resource): Don't concat integers.

2000-01-31  Inge Frick  <inge@nada.kth.se>

	* view.el: Some changes in documentation.  Removed some trailing
	whitespace. Changed some parameter names to agree with documentation.
	(view-mode-exit): Keep entry in `view-return-to-alist' only when a
	window is not deleted.  Modifies change 1998-04-26.

2000-01-31  Gerd Moellmann  <gerd@gnu.org>

	* windmove.el: New file.

	* progmodes/ebnf2ps.el, progmodes/ebnf-bnf.el,
	progmodes/ebnf-iso.el, progmodes/ebnf-otz.el,
	progmodes/ebnf-yac.el: Update copyright and license info.

	* jit-lock.el (jit-lock-function): Widen before calculating
	end position.
	(jit-lock-stealth-chunk-start): Rewritten.

	* info.el (Info-title-face-alist): Removed.
	(Info-title-1-face, Info-title-2-face, Info-title-3-face): New faces.
	(Info-fontify-node): Use these faces.

2000-01-30  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-specs.el (cl-lambda-list, cl-macro-list)
	(cl-macro-list1): Recognize `&allow-other-keys' instead of
	`&allow-other-keywords'.

	* mail/mh-utils.el (mh-find-progs): Add directory `etc' to
	the list of directories scanned heuristically.

	* Makefile (DONTCOMPILE): Remove term-nasty.el; doesn't seem to exist.

2000-01-30  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el: Define w32-tty-standard-colors.

	* startup.el (command-line): Use w32-tty-standard-colors when in
	w32 console mode.

2000-01-30  Dave Love  <fx@gnu.org>

	* jka-compr.el (jka-compr-load): Fix up load-history.

	* emacs-lisp/cl.el: Replace autoloads for dolist, dotimes.

	* emacs-lisp/cl-macs.el: Revert previous change.

2000-01-29  Dave Love  <fx@gnu.org>

	* facemenu.el: Purecopy various strings.

	* timezone.el (timezone-fix-time): Window against 69 for two-digit
	years.  Deal with three-digit years.

	* help.el (help-xref-symbol-regexp, help-xref-info-regexp):
	Use defconst, purecopy.
	(help-back-label): Purecopy it.

2000-01-18  Gerd Moellmann  <gerd@gnu.org>

	* iswitchb.el (iswitchb-use-frame-buffer-list): New configuration
	variable. If non-nil, order the buffer list according to the
	currently selected frame.
	(iswitchb-make-buflist): If iswitchb-use-frame-buffer-list is
	non-nil, pass the selected frame to function buffer-list.

2000-01-29  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* progmodes/ebnf2ps.el (ebnf-syntax): Doc fix

2000-01-28  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-macs.el: Remove dotimes, dolist.

	* emacs-lisp/cl.el: Remove stuff for dotimes, dolist, push, pop.
	Don't use lisp-indent-hook property.
	(cl-abs): Remove.

	* subr.el: Move out indent and edebug specs for when and unless.

	* emacs-lisp/lisp-mode.el: Add indent specs for dolist, dotimes,
	when, unless.

	* emacs-lisp/edebug.el: Add specs for push, pop, dotimes, dolist,
	unless, when.

2000-01-28  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-macs.el (cl-parse-loop-clause): Recognize
	`collecting' as synonym for `collect'.

	* ange-ftp.el (ange-ftp-copy-file-internal): Quote new name
	for the case it contains spaces.

	* simple.el (what-cursor-position): Change formatting of messages.

	* frame.el (delete-other-frames): New function.
	(toplevel): Bind it to C-x 5 1.

	* sort.el (sort-numeric-base): New option.
	(sort-numeric-fields): If number starts with `0' or `0[xX[',
	interpret it as octal or hexadecimal.  Use sort-numeric-base
	as default base.

	* progmodes/glasses.el: New file.

2000-01-27  Gerd Moellmann  <gerd@gnu.org>

	* mail/mail-utils.el (rmail-dont-reply-to): Replace matched
	userids differently.

	* progmodes/ebnf2ps.el, progmodes/ebnf-bnf.el,
	progmodes/ebnf-iso.el, progmodes/ebnf-otz.el,
	progmodes/ebnf-yac.el: New files.

2000-01-26  Dave Love  <fx@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-interactive-loop): Don't lose
	on a function with an empty body.  [From Eric Ludlam.]

2000-01-25  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-version-diff): Make sure file name is expanded.

2000-01-25  Gerd Moellmann  <gerd@gnu.org>

	* scroll-bar.el (scroll-bar-timer): Variable removed.
	(scroll-bar-toolkit-scroll): Don't use a timer.

2000-01-25  Kenichi Handa  <handa@etl.go.jp>

	* language/thai-util.el (thai-composition-function):
	Delete superfluous `a'.

2000-01-24  Dave Love  <fx@gnu.org>

	* fortran.el (fortran-mode): Use beginning-of-defun-function,
	end-of-defun-function.

	* font-lock.el (turn-on-font-lock): Don't depend on window-system &c.

2000-01-22  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (w32_create_initial_fontsets): Disabled as it
	conflicts with new face support.

2000-01-22  Richard M. Stallman  <rms@gnu.org>

	* replace.el (query-replace): Rename last arg to DELIMITED.
	(map-query-replace-regexp, query-replace-regexp-eval): Likewise.
	(query-replace-regexp): Likewise.

2000-01-20  Richard M. Stallman  <rms@gnu.org>

	* subr.el (with-syntax-table): Use make-symbol, not gensym.

	* emacs-lisp/lisp.el (beginning-of-defun-function):
	Variable renamed from beginning-of-defun.
	Do not call make-variable-buffer-local.
	(beginning-of-defun-raw): Use new variable name; doc fix.
	(beginning-of-defun): Doc fix.
	(end-of-defun-function): Variable renamed from end-of-defun.
	Do not call make-variable-buffer-local.
	(end-of-defun): Use new variable name; doc fix.

	* subr.el (dolist, dotimes): Copied from cl-macs.el
	and made to work.

	* mail/undigest.el (rmail-digest-end-regexps):
	Variable replaces rmail-digest-end-regexp.
	Allows multiple regexps for detecting the end line.
	(undigestify-rmail-message): Corresponding changes.

2000-01-19  Dave Love  <fx@gnu.org>

	* files.el (user-init-file): Don't declare here -- is primitive.

	* startup.el (command-line): Check for compiled user-init-file and
	set to uncompiled version if necessary.

2000-01-18  Gerd Moellmann  <gerd@gnu.org>

	* mail/undigest.el (rmail-digest-end-regexp): New user option.
	(undigestify-rmail-message): Use it.

	* ange-ftp.el (ange-ftp-skip-msgs): Add regexp for EPRT.

2000-01-17  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-goto-completions): Adapt to prompt being part
	of mini-buffer.

2000-01-14  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/copyright.el (copyright-update): Removed the
	requirement for a trailing space from `copyright-regexp', to
	support copyrights with owner specified on a separate line..

	* align.el: New file.

	* menu-bar.el (menu-bar-tools-menu): Add EUDC submenu.

	* net/eudc.el (toplevel): Define EUDC menu for Emacs.

2000-01-13  Dave Love  <fx@gnu.org>

	* ph.el: Removed.  (Obsoleted by EUDC.)

2000-01-13  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc.el (toplevel): Remove autoloaded code installing
	menu with easymenu, because that causes build problems.

	* frame.el (frame-notice-user-settings): New variable.
	(frame-notice-user-settings): Don't modify frame parameters
	if called a second time.

2000-01-13  Richard M. Stallman  <rms@gnu.org>

	* frame.el (frame-notice-user-settings):
	Notice default-frame-parameters even for non-window frames.

2000-01-13  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc-bob.el (eudc-bob-play-sound-at-point): Play sounds
	for Emacs.
	(eudc-bob-can-display-inline-images): Extend for Emacs.
	(eudc-bob-toggle-inline-display): Ditto.
	(eudc-bob-display-jpeg): Ditto.

2000-01-12  Gerd Moellmann  <gerd@gnu.org>

	* net/eudc-bob.el, net/eudc-export.el, net/eudc-hotlist.el,
	net/eudc-vars.el, net/eudc.el, net/eudcb-bbdb.el,
	net/eudcb-ldap.el, net/eudcb-ph.el, net/ldap.el: New files.

	* add-log.el (add-change-log-entry): Fix error trying an
	`(insert nil)'.

	* subdirs.el: Add `net' directory.

	* net: New directory.

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Renamed from
	eval-last-sexp.  Don't bind debug-on-error here.
	(eval-last-sexp): New function.  Bind debug-on-error if
	eval-expression-debug-on-error is non-nil.
	(eval-defun-2, eval-defun): Likewise.

	* simple.el (eval-expression): Don't bind debug-on-error if
	eval-expression-debug-on-error is nil.  Detect changed
	debug-on-error, and propagate new value to global binding, if
	eval-expression-debug-on-error is non-nil.
	(eval-expression-debug-on-error): Change doc string.

2000-01-11  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/edebug.el (with-syntax-table): Add a def-edebug-spec.

	* emacs-lisp/lisp-mode.el (with-syntax-table):
	Set up lisp-indent-function property.

	* subr.el (with-syntax-table): Moved from simple.el.

	* simple.el (with-syntax-table): Moved to subr.el.

2000-01-11  Gerd Moellmann  <gerd@gnu.org>

	* tmm.el (tmm-shortcut): Delete region after prompt instead
	of erasing buffer.

	* textmodes/fill.el (fill-common-string-prefix): New function.
	(fill-context-prefix): Use the longest common prefix of first
	and second line fill prefix, if there is one.

2000-01-11  Richard M. Stallman  <rms@gnu.org>

	* array.el (array-mode): Don't use make-variable-buffer-local.
	Use make-local-variable for `truncate-lines'.

2000-01-11  Jari Aalto  <jari.aalto@poboxes.com>

	* add-log.el (add-log-current-defun): Handle user-defined
	add-log-current-function returning nil,

	* add-log.el (add-change-log-entry): Insert version number
	if having found a current function

	* add-log.el (add-log-current-defun):
	Call `add-log-current-defun-function'.  Try matches at level 0 and
	level 1.  Strip whitespace from defun found.

2000-01-10  John Wiegley  <johnw@gnu.org>

	* allout.el (isearch-done/outline-provisions): Added `edit'
	argument to correspond with the current definition of `isearch-done'.

2000-01-10  Dave Love  <fx@gnu.org>

	* elide-head.el (elide-head): Use point-marker, not point.

2000-01-10  Gerd Moellmann  <gerd@gnu.org>

	* vc-hooks.el (vc-parse-buffer): Handle mixtures of dates
	before and after the year 2000.

	* textmodes/ispell-merged.el (xemacsp, version18p, version-20p):
	Add ispell- prefix.

2000-01-10  Ken Stevens  <k.stevens@ieee.org>

	* ispell.el: Only define dictionaries in menus when they exist.
	(version18p): New variable.
	(version20p): New variable.
	(xemacsp): New variable.
	(ispell-choices-win-default-height): Fix for XEmacs visibility.
	(ispell-dictionary-alist1): Added Brasileiro dictionary.
	(ispell-dictionary-alist6): Russian command lines no longer accept
	run-together words.
	(ispell-local-dictionary-alist): Add koi8-r to customize definition.
	(ispell-dictionary-alist): Add koi8-r to customize definition.
	(check-ispell-version): Added documentation string.  Return library
	path when called non-interactively.
	(ispell-menu-map-needed): Uses new variables.
	(ispell-library-path): New variable.
	(ispell-decode-string): XEmacs fix for bogus variable bindings.
	(ispell-word): Improved documentation string.  Test for valid
	character mappings.  Correctly check typed in word changes that can
	result in single words split into multiple words.
	Return replacement word.
	(ispell-command-loop): Fixes XEmacs display bugs.  Show word to
	replace in recursive query replace mode.  Help message for
	recursive edit mode.
	(ispell-show-choices): Protect against bad framepop bindings.
	(ispell-help): Fix to work with XEmacs.
	(ispell-highlight-spelling-error): Use new variables.
	(ispell-overlay-window): Fix to work with XEmacs.
	(ispell-parse-output): Passed and returns location information
	tracking spelling corrections.  Doesn't recheck same word on
	current line.
	(ispell-init-process): Protect against bogus XEmacs variable binding.
	Fix call to single argument in sleep-for.  Use new variables.
	(ispell-region): Passed and returns location information tracking
	spelling corrections.  Doesn't check same word on current line.
	Improved documentation string.  Doesn't resend a line already
	checked to the ispell process - fixes bug in LaTeX parsing.
	(ispell-begin-skip-region-regexp): No longer skips <TT> in SGML.
	(ispell-skip-region): No longer skips <TT> in SGML.
	(ispell-process-line): Tracks location information with spelling
	corrections.  Added documentation string.  Accounts for words
	already accepted on this line.  Don't allow query-replace on line
	starting with math characters.  Doesn't resend a line already sent
	to ispell process.  Fixes alignment error bug.

2000-01-10  Richard M. Stallman  <rms@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default):
	Suggest xloadimage, which is free, not xv, which isn't.

	* ange-ftp.el (ange-ftp-file-name-nondirectory):
	Don't ever include the host name or user name in the value.

2000-01-09  Gerd Moellmann  <gerd@gnu.org>

	* textmodes/texinfmt.el (texinfo-format-scan): Use ?\n instead
	of a real newline.

2000-01-09  Stephen Eglen  <stephen@gnu.org>

	* dired-x.el (dired-guess-shell-alist-default): Suggest xv
	for .png files.

2000-01-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-hook-convert-widget): Fix comment.

2000-01-09  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/cperl-mode.el: Replace ^F with ^L.

	* sendmail.el (toplevel): Provide `sendmail' when compiling before
	`require'ing rmail and mailalias to prevent infinite recursion.

2000-01-08  Dave Love  <fx@gnu.org>

	* emacs-lisp/backquote.el: Remove inappropriate customization
	(allowing custom.el to use backquote).

2000-01-07  Dave Love  <fx@gnu.org>

	* add-log.el (add-log-debugging): Deleted.
	(add-change-log-entry): Treat a backup FILE-NAME as its parent
	file.  Remove debugging code.
	(change-log-get-method-definition, change-log-name): Add doc.
	(change-log-sortable-date-at): New function.
	(change-log-merge): New command.

	* time.el (display-time-string-forms): Make the Mail string active.
	(display-time-update): Provide help-echo for load average.

	* bindings.el (make-mode-line-mouse2-map): New function.
	(mode-line-modified): Use it and simplify.
	(mode-line-mule-info): Provide help-echo info.
	(minor-mode-alist): Activate the strings.
	(make-mode-line-mouse-sensitive): Simplify for
	mode-line-buffer-identification.

2000-01-07  Gerd Moellmann  <gerd@gnu.org>

	* play/pong.el: New file.

2000-01-06  Dave Love  <fx@gnu.org>

	* array.el: Assorted cleanups for compiler warnings, doc strings,
	`array-' prefix for symbols.

2000-01-05  Dave Love  <fx@gnu.org>

	* textmodes/outline.el (outline-mode-menu-bar-map):
	Add outline-headers-as-kill.
	(outline-mode): Define imenu-generic-expression.
	(outline-headers-as-kill): New command.

	* textmodes/otext-mode.el (text-mode): Remove page-delimiter's `^'
	from paragraph-start.
	(paragraph-indent-minor-mode): New command.

	* progmodes/fortran.el (fortran-mode-map): Don't bind M-C-a,
	M-C-e, M-C-h, C-j, C-xnd, TAB.
	(fortran-mode): Set beginning-of-defun, end-of-defun.
	(fortran-column-ruler): Simplify.
	(fortran-mark-subprogram, fortran-narrow-to-subprogram): Deleted.
	(fortran-with-subprogram-narrowing): Likewise.
	(fortran-indent-subprogram): Call mark-defun.
	(fortran-check-for-matching-do): Change narrowing.

	* emacs-lisp/cl-extra.el (cl-make-hash-table): Use make-hash-table.
	(cl-lucid-hash-tag): Delete.
	(cl-hash-table-p): Correct test for native table.
	(cl-hash-table-count): Use hash-table-count.

	* browse-url.el (browse-url): Fix case of
	browse-url-browser-function being an alist.

2000-01-05  Carsten Dominik  <cd@gnu.org>

	* textmodes/reftex-vars.el (reftex-parse-file-extension)
	(reftex-index-phrase-file-extension): New options.

	* textmodes/reftex-index.el (reftex-index-visit-phrases-buffer):
	Use new option `reftex-index-phrase-file-extension'.

	* textmodes/reftex.el (reftex-access-parse-file): Use new option
	`reftex-parse-file-extension'.

2000-01-05  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp.el (beginning-of-defun): New variable.
	(beginning-of-defun-raw): Use it.
	(end-of-defun): New variable.
	(end-of-defun): Use it.
	(check-parens): New command.

2000-01-05  Thien-Thi Nguyen  <ttn@delysid.gnu.org>

	* progmodes/hideshow.el (hs-discard-overlays, hs-flag-region)
	(hs-show-block): Don't use `mapcar' when not accumulating.

	Fix buglet in local variables initialization.

2000-01-05  Andreas Schwab  <schwab@suse.de>

	* hscroll.el (hscroll): Doc fix.

2000-01-05  Carsten Dominik  <cd@gnu.org>

	* progmodes/idlw-shell.el (idlwave-shell-toggle-toolbar):
	Require idlw-toolbar.

	* progmodes/idlwave.el (idlwave-load-system-rinfo): Load must read
	file idlw-rinfo.el.
	(idlwave-customize): Load must read file idlw-shell.el.
	(idlwave-create-customize-menu): Load must read file idlw-shell.el.

2000-01-05  Carsten Dominik  <dominik@astro.uva.nl>

	* progmodes/idlw-shell.el: Also provide idlwave-shell
	* progmodes/idlw-rinfo.el: Also provide idlwave-rinfo
	* progmodes/idlw-toolbar.el: Also provide idlwave-toolbar

	* textmodes/reftex-dcr.el: Rename from reftex-vcr.el, provide
	both reftex-dcr and reftex-vcr.

	* textmodes/reftex.el: Renamed reftex-vcr.el to reftex-dcr.el

2000-01-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: PostScript code now is in separate files, doc fix.
	(ps-print-version): New version number (5.0.3).
	(ps-header-lines, ps-left-header, ps-right-header): No more buffer
	local.
	(ps-spool-config): Initialization fix.
	(ps-print-prologue-1, ps-print-prologue-2)
	(ps-print-duplex-feature): PostScript code moved to separated file.
	(ps-background-image): Little code reformatting.
	(ps-begin-file, ps-begin-job): Fix code.
	(ps-postscript-code-directory, ps-mark-code-directory): New vars.
	(ps-prologue-file): New fun.

2000-01-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-vars.el: Eliminated.

	* ps-mule.el: ps-vars eliminated, ps-multibyte-buffer now is
	`;;;###autoload'.

	* ps-print.el: ps-vars eliminated, doc fix.
	(ps-print-version): New version number (5.0.2).
	(ps-spool-config): Initialization fix.
	(ps-print-customize): New fun.

2000-01-04  Gerd Moellmann  <gerd@gnu.org>

	* autorevert.el (auto-revert-mode): Return value of auto-revert-mode.

2000-01-04  Dave Love  <fx@gnu.org>

	* bindings.el (make-mode-line-mouse-sensitive): Fix the toggle
	menu items.

2000-01-03  Dave Love  <fx@gnu.org>

	* elide-head.el (elide-head) [defgroup]: Add :version.

	* emacs-lisp/cl-extra.el (cl-emacs-type): Remove defvar.
	(cl-not-hash-table, cl-clrhash, cl-maphash, cl-hash-table-count):
	Use `cl-hash-table-p', not `hash-table-p'.
	(cl-map-keymap, cl-map-keymap-recursively): Remove compatibility code.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (face-read-integer, read-face-attribute)
	(color-defined-p, color-values): Unspecified-{f,b}g are now strings.

2000-01-03  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-fill-paragraph): Count number of spaces
	at comment end, and re-insert them after filling.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/idlwave.el: Rename idlwave-*.el into idlw-*.el
	* progmodes/idlw-rinfo.el, progmodes/idlw-shell.el,
	progmodes/idlw-toolbar.el: Renamed from idlwave-*.el.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/x-win.el (xw-defined-colors): Call color-supported-p,
	the new name of face-color-supported-p.

	* term/w32-win.el (xw-defined-colors): Likewise.

2000-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (completion-setup-function): Count completion-size
	from minibuffer-prompt-end, not from point-min.

2000-01-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (read-face-attribute, defined-colors, color-defined-p):
	Pass the frame to tty-color-* functions.
	(display-color-p, frame-set-background-mode): Pass the frame to
	tty-display-color-p.

	* term/tty-colors.el (tty-defined-color-alist): Renamed from
	tty-color-alist.
	(tty-color-alist, tty-modify-color-alist): New functions.
	(tty-color-define,  tty-color-clear, tty-color-approximate)
	(tty-color-translate, tty-color-by-index, tty-color-desc): Accept an
	optional parameter FRAME.

2000-01-01  Gerd Moellmann  <gerd@gnu.org>

	* image.el (create-image, defimage): Don't assume image data is
	a string.

	* image.el (defimage): Handle specifications containing :data
	instead of :file.
	(image-type-from-data): New function.
	(image-type-from-file-header): Use it.
	(create-image): Add parameter DATA-P.

See ChangeLog.8 for earlier changes.

;; Local Variables:
;; coding: utf-8
;; End:

    Copyright (C) 2000-2011  Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.
