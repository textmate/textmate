1998-08-19  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* Version 20.3 released.

	* language/romanian.el ("Romanian"): Specify the tutorial file.

1998-08-18  Per Starb√§ck  <starback@update.uu.se>

	* language/european.el (setup-latin2-environment): Fix typo.
	(iso-latin-1): Doc fix.

1998-08-18  Eric Ludlam  <zappo@mescaline.gnu.org>

	* speedbar.el (speedbar-timer-fn): Disable updating if the frame
	is an icon, or if the user is using the minibuffer.
	(speedbar-key-map): Added Q binding to destroy the frame.
	(speedbar-easymenu-definition-trailer): Added Quit item.
	(speedbar-frame-mode): Set the frame position at creation time.
	(speedbar-file-unshown-regexp): Added .# lock files.

1998-08-18  Kenichi Handa  <handa@etl.go.jp>

	* language/cyrillic.el (cyrillic-koi8): Fix the value of
	`valid-code' property.
	(cyrillic-alternativnyj): Likewise.
	(cyrillic-alternativnyj-encode-table): Fix the initial value.

	* language/vietnamese.el (vietnamese-viscii): Fix the value of
	`valid-code' property.
	(vietnamese-vscii): Likewise.

1998-08-18  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* subr.el (read-quoted-char): Don't bind input-method-function;
	instead, pass the new args to read-event.

	* isearch.el (search-whitespace-regexp): Doc fix.

	* ange-ftp.el (ange-ftp-file-name-sans-versions): Don't return
	the shortened version of the file name.

1998-08-18  Kenichi Handa  <handa@etl.go.jp>

	* language/european.el: Give proper value of `input-method' key to
	all lang. env.

	* international/mule-cmds.el (activate-input-method): Handle the
	case that the arg INPUT-METHOD is nil correctly.
	(read-multilingual-string): Activate the specified input method
	before calling read-string.  Afterward, activate the original
	input method.

1998-08-17  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* midnight.el (midnight-hook): Initialize to a list.

1998-08-17  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (set-language-environment): Reset
	syntax and case table to the defaults if the value of
	unibyte-syntax key is nil.

1998-08-16  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmailout.el (rmail-output): Always preserve MIME-Version field,
	even if it was pruned.

1998-08-15  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* info.el (Info-follow-reference): Nice error msg if there was no arg.

1998-08-14  Michael Ernst  <mernst@alum.mit.edu>

	* comint.el (comint-postoutput-scroll-to-bottom): Cope with unset
	comint-last-output-start marker.

1998-08-15  Kenichi HANDA  <handa@etl.go.jp>

	* international/kkc.el (kkc-help): New function.
	(kkc-keymap): Use sparse keymap.  Add key binding for kkc-help.

	* international/mule.el (set-selection-coding-system): Make it
	interactive.
	(last-next-selection-coding-system): New variable.
	(set-next-selection-coding-system): New function.

	* international/mule-cmds.el (language-info-alist): Doc-string
	modified.
	(set-language-info-alist): Fix typo in doc-string.  Update
	setup-language-environment-map unconditionally.
	(mule-keymap): Key bindings for set-selection-coding-system and
	set-next-selection-coding-system.
	(set-coding-system-map): Add items of set-selection-coding-system
	and set-next-selection-coding-system.

	* language/hebrew.el ("Hebrew"): Delete describe-function key.

1998-08-14  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/sendmail.el (sendmail-send-it): Report invalid values
	of mail-from-style.

	* info.el (Info-try-follow-nearest-node): Get the node name
	directly out of the menu item pointed at.

	* which-func.el (which-func-modes): Add fortran-mode.

	* ediff-util.el (ediff-next-difference, ediff-previous-difference):
	Handle nil as arg.

1998-08-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* international/mule-cmds.el (select-safe-coding-system): If
	default-coding-system is no-conversion return that, it is always
	safe.

1998-08-13  Eric Ludlam  <zappo@mescaline.gnu.org>

	* speedbar.el (speedbar-frame-parameters): Removed scroll-bar-width.

1998-08-13  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* loadup.el: Add informative message about the lists of GC stats.

	* dired-aux.el (dired-do-rename-regexp): Doc fix.

	* midnight.el (midnight-float-time): Renamed from float-time.
	(midnight-time-float): Renamed from time-float.
	(midnight-buffer-display-time): Renamed from buffer-display-time.
	(midnight-mode): Specify :initialize.  Use nil as default value.

	* complete.el (PC-do-completion): Exclude ./ and ../ from completion.

1998-08-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus/nntp.el (nntp-encode-text): Properly encode outgoing text by
	putting CR at the end of all lines.

1998-08-12  Michael Ernst  <mernst@alum.mit.edu>

	* emacs-lisp/cust-print.el (custom-prin1-to-string): Doc fix.

1998-08-12  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* ebuff-menu.el (electric-buffer-menu-mode-map):
	Don't wipe out all Meta keys.

	* calendar/appt.el (appt-mode-string): New variable.
	(global-mode-string): Add appt-mode-string to it.
	(appt-check): Avoid using display-time-string to fetch current time.
	To display in mode line, use appt-mode-string.

1998-08-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* double.el (double-setup): Only copy `key-translation-map' if it
	is a keymap.

1998-08-11  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* files.el (recover-session): Add leading space on added text lines.

	* calendar/appt.el: Use a separate timer, not display-time-hook.
	(appt-timer): New variable.
	(appt-interval): New user option.
	(appt-disp-window): Start by erasing the buffer.

	* faces.el (list-faces-display): Call print-help-return-message.
	(describe-face): Likewise.

	* emacs-lisp/disass.el (disassemble-1): Move the call to
	string-as-unibyte outside of the if statement.

1998-08-10  Bob Glickstein  <bobg@hiro.zanshin.com>

	* sendmail.el (mail-setup): After using `fill-region-as-paragraph'
	on a new address field, ensure that it ends with a newline.

1998-08-10  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* time-stamp.el (time-stamp-string-preprocess): Add %U code.

	* international/quail.el (quail-update-leim-list-file):
	Fix message syntax.

	* mail/sendmail.el (mail-citation-header): New variable.
	(mail-yank-original, mail-yank-region): Bind mail-citation-header.
	(mail-citation-hook): Doc fix.

1998-08-09  Kenichi HANDA  <handa@etl.go.jp>

	* international/mule-conf.el (iso-safe): Comment for this coding
	system fixed.
	(coding-category-iso-8-1): Change default coding priority.

	* international/mule-cmds.el (language-info-alist): Doc-string
	modified.
	(reset-language-environment): New function for the job that
	setup-english-environment used to do.
	(set-language-environment): Do more setups according to the info
	in language-info-alist.
	(read-language-name): Handle the case that the arg KEY is nil.
	(describe-language-environment): Handle input-method property.

	* international/quail.el (quail-start-translation): If
	enable-multibyte-characters is nil, convert multibyte character to
	unibyte.
	(quail-start-conversion): Likewise.

	* language/: All files under this directory modified as below.
	(setup-XXX-environment): Just call set-language-environment.  If
	they used to do some other jobs than what done by
	set-language-environment, those jobs are done in
	setup-XXX-environment-internal now.
	("LANGUAGE-ENVIRONMENT"): Delete property setup-function or change
	the value to setup-XXX-environment-internal.  Add properties
	nonascii-translation, input-method, features, unibyte-syntax, and
	unibyte-display.

	* language/english.el (setup-english-environment): Just call
	reset-language-environment.

	* language/european.el (setup-8-bit-environment): Function deleted.

1998-08-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/sregex.el (sregex-replace-match):
	Don't call sregex--value-groups.
	(sregex-match-end, sregex-match-beginning): Likewise.
	(sregex-match-string-no-properties, sregex-match-string): Likewise.

	* help.el (describe-function-1): Handle macros properly.
	Handle multiple levels of aliases.

	* emacs-lisp/cust-print.el (custom-prin1-to-string): Add NOESCAPE arg.

1998-08-09  Sam Steingold  <sds@goems.com>

	* midnight.el (clean-buffer-list-kill-buffer-names): Add `*diff*'.
	(clean-buffer-list): Check `buffer-modified-p' only when the
	buffer is associated with a file.
	(midnight-delay-set): Improve doc.

1998-08-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* progmodes/compile.el (next-error): Doc fix.
	(grep): Doc fix.

	* loadup.el: Load byte-run and format a little earlier.

1998-08-08  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el: Don't require font-lock.

	* textmodes/flyspell.el (flyspell-command-hook): Option deleted.
	(flyspell-mode-on): Delete code to handle flyspell-command-hook.
	(flyspell-mode-off): Likewise.
	(flyspell-mark-duplications-flag): Doc fix.
	(flyspell-duplicate-distance): Doc fix.
	(flyspell-duplicate-face): Doc fix.

	* subr.el (assoc-default): Rewrite not to use dolist.
	(add-hook): Use byte-code-function-p, not compiled-function-p.

	* hilit-chg.el: New file.
	Delete the undo-in-progress compatibility code.

	* mail/rmailmsc.el (set-rmail-inbox-list):
	Error if not in Rmail mode.

	* textmodes/paragraphs.el (forward-paragraph):
	Fix the logic for handling beginning of buffer
	in the "no fill-prefix" case.

	* info.el: Bind case-fold-search to t in many functions.

	* mail/mail-utils.el (mail-fetch-field): Doc fix.

1998-08-08  Eric M. Ludlam  <zappo@ultranet.com>

	* speedbar.el (speedbar-edit-line, speedbar-buffer-kill-buffer)
	(speedbar-buffer-revert-buffer): Updated buffer finding regex to
	handle the [?] tag.
	(speedbar-find-selected-file): New function.
	(speedbar-clear-current-file): Uses `speedbar-find-selected-file'.
	(speedbar-update-current-file): Uses `speedbar-find-selected-file',
	and now `speedbar-last-selected-file' is defined as the path name
	to the file, not just the file itself.

1998-08-08  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (input-method-exit-on-first-char)
	(input-method-use-echo-area): Doc fixes.

	* vc-hooks.el (vc-file-not-found-hook): Call vc-file-clearprops.

1998-08-07  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus/gnus-start.el (gnus-startup-file-coding-system): New variable.
	(gnus-read-init-file, gnus-read-newsrc-el-file): Use that.

1998-08-07  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* wid-edit.el (widget-beginning-of-line): Properly handle
	multiline fields.  Don't use call-interactively.
	(widget-end-of-line): Likewise.

	* midnight.el (midnight-delay-set): Use run-hooks directly.
	(midnight-timer-function): Function deleted.
	(midnight-find): Don't use `find'.

	* startup.el (command-line): Require whitespace delimiter when
	searching locale-translation-file-name.

	* midnight.el (midnight-timer-function):
	No need to test midnight-mode.

	* repeat.el (repeat): Make an undo boundary between repetitions.

1998-08-06  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters): Fix previous change.

	* international/quail.el (quail-update-translation): Delete the
	code for handling the case that enable-multibyte-characters is nil.

1998-08-06  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* window.el (split-window-horizontally): Doc fix.

1998-08-06  Kenichi Handa  <handa@etl.go.jp>

	* emacs-lisp/debug.el
	(debugger-outer-unread-post-input-method-events): New variable.
	(debug): Bind debugger-outer-unread-post-input-method-events.
	Bind unread-post-input-method-events to nil.
	(debugger-env-macro): Likewise.

	* international/isearch-x.el (isearch-minibuffer-local-map):
	Bind the key C-g to exit.
	(isearch-minibuffer-self-insert): Use key-binding.
	Always call exit-minibuffer.
	(isearch-process-search-multibyte-characters):
	Use unread-command-events instead of unread-input-method-events.
	Always call isearch-update.

	* international/kkc.el (kkc-region): Don't bind echo-keystrokes.

	* international/mule-cmds.el (input-method-exit-on-first-char):
	New variable.
	(input-method-use-echo-area): New variable.

	* international/quail.el (quail-translation-keymap): Declare it as
	variable instead of constant.  Bind all keys less than 32 to
	quail-other-command.  Don't bind the key meta-prefix-char and escape.
	(quail-simple-translation-keymap): Likewise.
	(quail-conversion-keymap): Bind C-h to quail-translation-keymap.
	(quail-define-package): Fix typo in doc-string.
	(quail-conversion-str): New variable.
	(quail-input-method): Bind buffer-undo-list to t.
	Show Quail guidance buffer if necessary.
	(quail-delete-region): Move the definition before the first
	calling place.
	(quail-start-translation): Handle the case the arg KEY is nil.
	Bind echo-keystrokes and help-char.  Initialize quail-current-str
	to "".  If input-method-use-echo-area is non-nil, call
	read-key-sequence with appropriate PROMPT arg.  Setup
	last-command-event by local variable `keyseq'.  Generate an event
	list form quail-current-str.  If input-method-exit-on-first-char
	is non-nil, return only the first event.
	(quail-start-conversion): Likewise.  Initialize
	quail-conversion-str to "".  Generate an event list form
	quail-conversion-str.
	(quail-update-translation): Expect that the function given by
	(quail-update-translation-function) returns a new control-flag.
	Handle the case the length of quail-current-key is 1.  Use
	string-as-unibyte if enable-multibyte-characters is nil.  Always
	assures that quail-current-str is Lisp string.
	(quail-self-insert-command): Use `or' instead of `unless'.
	(quail-update-current-translations): Always assures that
	quail-current-str is Lisp string.
	(quail-next-translation-block): Update unread-command-events correctly.
	(quail-abort-translation): Set quail-current-str to nil.
	(quail-conversion-delete-char): Update quail-conversion-str.
	(quail-conversion-delete-tail): Likewise.
	(quail-conversion-backward-delete-char): Likewise.
	(quail-show-guidance-buf): Show Quail guidance buffer not in echo
	area if input-method-use-echo-area is non-nil.
	(quail-show-translations): Bind current-translations locally to
	quail-current-translations to get this value across different
	buffers.  Handle the case that the length quail-current-key is 0.
	(quail-translation-help): If this command is invoked repeatedly,
	scroll the already shown help window.  Handle the case that this
	command is called while converting (not translating).
	(quail-conversion-help): This function deleted and the
	functionality is merged to quail-translation-help.

1998-08-05  Dave Love  <fx@gnu.org>

	* iso-cvt.el (iso-spanish, iso-german, iso-iso2tex, iso-tex2iso)
	(iso-gtex2iso, iso-iso2gtex, iso-iso2duden): Add optional, ignored
	arg `buffer' for format-{de,en}code.  Doc fix.  Add * to
	interactive spec.  Add autoload cookie.
	(iso-cvt-read-only, iso-cvt-write-only): Add doc, autoload cookie.
	(iso-cvt-define-menu): Add autoload cookie.

1998-08-05  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* gnus/message.el: Require sendmail.
	(message-fill-yanked-message): Use mail-citation-prefix-regexp
	as an arg to fill-individual-paragraphs.

	* emacs-lisp/bytecomp.el (byte-compile-from-buffer):
	Make the output buffer multibyte.

	* scroll-bar.el (scroll-bar-mode): Doc fix.

1998-08-05  Sam Steingold  <sds@goems.com>

	* cl-indent.el (top-level let): Add defsubst.

1998-08-04  Andrew Innes  <andrewi@harlequin.co.uk>

	* mail/rmail.el (rmail-encoded-pop-password): New variable.

1998-08-04  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el (flyspell-persistent-highlight): Doc fix.

1998-08-04  Eric Ludlam  <zappo@mescaline.gnu.org>

	* speedbar.el (speedbar-refresh): Removed special code to remove
	the speedbar update message.  Not necessary here.
	(speedbar-timer-fn): Add code to remove the updating message and
	thus restore the minibuffer.
	(speedbar-center-buffer-smartly): Fixed center error to handle
	the whole buffer.
	(speedbar-delete-subblock): Rewrote to be more robust, less clever.
	(speedbar-timer-fn): Removed short display time for messages.

1998-08-04  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-backend-merge-news): Account for `already contains the
	differences' state.

1998-08-04  Eli Zaretskii  <eliz@delysid.gnu.org>

	* international/mule.el (find-new-buffer-file-coding-system): When
	inhibit-eol-conversion is non-nil and the buffer didn't already
	set a fully-qualified coding system, force -unix eol-type.

1998-08-04  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* info.el (Info-find-node): Once again, use byte-to-position.

	* vcursor.el (vcursor group): Move this to `editing' group.

	* comint.el (comint-bol-or-process-mark): Refer to this command's
	name correctly.

	* international/mule-cmds.el (set-default-coding-systems):
	In --unibyte mode, don't set default-file-name-coding-system.

	* midnight.el (clean-buffer-list-kill-regexps): Init to nil, as before.
	(clean-buffer-list-kill-buffer-names): Add *vc* and *vc-diff*.
	(clean-buffer-list-delay): Rename arg.
	(clean-buffer-list): Doc fix.
	(midnight-period): Doc fix.

1998-08-03  Eric Ludlam  <zappo@mescaline.gnu.org>

	* info.el (Info-speedbar-hierarchy-buttons): Improved the speedbar
	frame management.

	* speedbar.el (speedbar-update-current-file): Added call to
	`speedbar-center-buffer-smartly' to improve the display.
	(speedbar-center-buffer-smartly) Fixed off-by-one error in window
	height calculation.
	(speedbar-hack-buffer-menu): New function.
	(speedbar-frame-parameters): Removed scroll bar width.
	(speedbar-frame-mode): Change pointer shape for X
	and W32 window-systems only.  When window-system is pc, bind the
	speedbar frame name to "Speedbar", and select that frame so it is
	displayed.
	(speedbar-mode): Don't bind default-minibuffer-frame when
	window-system is pc.
	(speedbar-this-file-in-vc): Look for RCS/name as well as RCS/name,v.
	(speedbar-directory-buttons-follow): Support both upper- and
	lower-case drive letters.  Use directory-sep-char instead of a
	literal backslash.
	(speedbar-reconfigure-keymaps): Call
	`easy-menu-remove' before reconfiguring for a new menu bar.
	(speedbar-previous-menu): New Variable.
	(speedbar-frame-plist): Remove pointers.
	(speedbar-refresh): Prevent the mark from being deactivated.
	(speedbar-buffer-kill-buffer): Refresh speedbar after killing a
	buffer in the buffer display.

1998-08-03  Simon Marshall  <simon@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Fix previous change.
	(font-lock-support-mode): Allow nil as a mode-specific value.  Fix tag.

1998-08-01  Kenichi HANDA  <handa@etl.go.jp>

	* international/kkc.el (kkc-lookup-cache): Initialize it to nil.
	(kkc-lookup-cache-tag): New constant.
	(kkc-lookup-key): If kkc-lookup-cache is nil, initialize it.  Use
	kkc-init-file-name.
	(kkc-region): Fix previous change.  Call kkc-error on error.
	(kkc-shorter-conversion, kkc-longer-phrase): New functions.
	(kkc-keymap): Bind them to "I" and "O" respectively.
	(kkc-error): New error symbol and new function.
	(kkc-longer, kkc-shorter): Call kkc-error on error.
	(kkc-show-conversion-list-or-next-group): Likewise.
	(kkc-show-conversion-list-or-prev-group): Likewise.

	* international/mule-cmds.el (language-info-alist): Doc-string
	modified.
	(set-language-environment): Setup nonascii-translation-table and
	charset-origin-alist according to the property of the specified
	language environment.
	(update-iso-coding-systems): Make it an alias for
	update-coding-systems-internal.
	(prefer-coding-system): Call update-coding-systems-internal
	instead of update-iso-coding-systems.
	(set-language-environment-coding-systems): Likewise.

	* international/mule-conf.el: Initialize coding-category-ccl to
	nil.  Include it in the arg for set-coding-priority.

	* international/mule-diag.el (describe-current-coding-system):
	Check if each coding category is bound to a valid coding system.

	* international/mule.el (make-coding-system): If the arg TYPE is
	4, set coding-category property of the coding system to
	coding-category-ccl.
	(find-new-buffer-file-coding-system): If the arg CODING carries
	some information (about text conversion or eol conversion), always
	return a new coding system.
	(charset-origin-alist): New variable.
	(make-translation-table-from-vector): New function.

	* international/quail.el (quail-start-translation): Bind help-char
	to nil locally.

	* language/cyril-util.el (cyrillic-encode-koi8-r-char): New function.
	(cyrillic-encode-alternativnyj-char): New function.

	* language/cyrillic.el (cyrillic-koi8-r-decode-table): New
	variable.
	(cyrillic-koi8-r-encode-table): Likewise.
	(ccl-decode-koi8): Use cyrillic-koi8-r-decode-table.
	(ccl-encode-koi8): Use cyrillic-koi8-r-encode-table.
	(ccl-encode-koi8-font): Likewise.
	(cyrillic-koi8-r-nonascii-translation-table): New variable.
	("Cyrillic-KOI8"): Add nonascii-translation-table and
	charset-origin-alist properties.
	(cyrillic-alternativnyj-decode-table): New variable.
	(cyrillic-alternativnyj-encode-table): Likewise.
	(ccl-decode-alternativnyj): Use
	cyrillic-alternativnyj-decode-table.
	(ccl-encode-alternativnyj): Use
	cyrillic-alternativnyj-encode-table.
	(ccl-encode-alternativnyj-font): Likewise.
	(cyrillic-alternativnyj-nonascii-translation-table): New variable.
	("Cyrillic-ALT"): Add nonascii-translation-table and
	charset-origin-alist properties.

	* language/viet-util.el (viet-encode-viscii-char): New function.

	* language/vietnamese.el (viet-viscii-decode-table): Docstring fixed.
	(viet-viscii-encode-table): Likewise.
	(viet-vscii-decode-table): Likewise.
	(viet-vscii-encode-table): Likewise.
	(viet-viscii-nonascii-translation-table): New variable.
	("Vietnamese"): Add nonascii-translation-table and
	charset-origin-alist properties.

	* loadup.el: Call update-coding-systems-internal instead of
	update-iso-coding-systems.

	* simple.el (what-cursor-position): Check charset-origin-alist.

1998-08-01  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/mailheader.el (mail-header-format): Convert string to symbol.

	* double.el (default-key-translation-map): Variable deleted.
	(double-setup): Make key-translation-map buffer-local here.
	New arg ENABLE-FLAG.
	(double-mode): Pass ENABLE-FLAG arg to double-setup.

1998-07-31  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* subr.el (assoc-default): New function.

	* midnight.el: Require timer.
	(clean-buffer-list-kill-regexps): Match `*vc' buffers.
	(midnight-find): Use dolist, not loop.
	(clean-buffer-list-delay): Use assoc-default.

	* info.el (Info-find-node): Position at the beginning of the node
	after calling Info-select-node.

	* info.el (Info-insert-dir): Catch errors in insert-file-contents.

1998-07-30  Sam Steingold  <sds@goems.com>

	* font-lock.el (lisp-font-lock-keywords-1): Fontify `defconstant'
	and `defparameter'.
	(lisp-font-lock-keywords-2): Fontify `lambda', `in-package'
	and `locally'.

	* emacs-lisp/cl-indent.el (lisp-indent-defun-method): New variable.
	(common-lisp-indent-function): Use it.
	(lisp-indent-259): Uncomment the `&lambda' code.
	(top-level let): Remove duplicate `catch' and `block'.  Use
	`&lambda' when appropriate.  Now the lambda lists are indented
	appropriately.

1998-07-30  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* dired.el (dired-garbage-files-regexp): Finish fixing regexp syntax.

	* mail/sendmail.el (mail-yank-region):
	Bind mark-even-if-inactive to t.
	(mail-yank-original was similarly changed, a few versions ago.)

	* textmodes/flyspell.el (flyspell-duplicate-distance):
	Doc fix; change default to 10000.
	(flyspell-mode-on): Fix the welcome message to deal with
	how the binding for flyspell-auto-correct-word is now made.
	(flyspell-delay, flyspell-delayed-commands): Doc fixes.
	(flyspell-mode-off): Kill Ispell only if it is per-buffer.

1998-07-30  Ken'ichi Handa  <handa@delysid.gnu.org>

	* international/mule-cmds.el (activate-input-method): Update mode line.
	(inactivate-input-method): Likewise.

1998-07-29  Kenichi Handa  <handa@etl.go.jp>

	* mouse.el (mouse-skip-word): If point is at word constituent
	characters, pay attention to word-separating-categories by using
	forward-word instead of skip-syntax-forward/backward.

1998-07-29  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* help.el (describe-function-1): Fix the code that uses
	find-function-noselect.

	* emacs-lisp/find-func.el (find-function-noselect): Autoload cookie.
	(find-function-search-for-symbol): Ignore directories
	when looking for a library file.

1998-07-29  Dave Love  <d.love@dl.ac.uk>

	* files.el (auto-mode-alist): Escape dots in some regexps.

1998-07-29  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* files.el (auto-mode-alist): Fix previous change.

	* textmodes/tex-mode.el (tex-main-file): Doc fix.

	* dired.el (dired-garbage-files-regexp): Fix typo.

	* emulation/crisp.el (crisp-mark-line): Greatly simplified.

	* mouse.el (mouse-delete-window): If the frame has just one window,
	bury the current buffer instead.

1998-07-28  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el (flyspell-mode-map): Explicitly bind M-TAB.
	(flyspell-auto-correct-binding): Variable deleted.
	(flyspell-incorrect-face, flyspell-duplicate-face): Fix typos.
	(flyspell-check-pre-word-p): Check for word syntax in previous char.
	(flyspell-word): Set process-kill-without-query for Ispell.
	(flyspell-region): Put region args in order; use right percentage.
	(flyspell-properties-at-p): Rename arg to POS; doc fix.
	(flyspell-highlight-incorrect-region):
	Check flyspell-highlight-properties first.
	(flyspell-highlight-duplicate-region): Likewise.
	(flyspell-auto-correct-word): Doc fix.

	* international/iso-transl.el (iso-transl-define-keys): Don't test
	enable-multibyte-characters; use the translated characters as
	specified in alist.

	* double.el (key-translation-map):
	Don't call make-variable-buffer-local on this variable.

	* mail/rmail.el (rmail-dont-reply-to-names): Doc fix.

1998-07-27  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el (flyspell-emacs-popup):
	Renamed from flyspell-gnuemacs-popup.  Callers changed.
	(push): Macro deleted.  Callers changed to do it explicitly.
	(flyspell-incorrect-face, flyspell-duplicate-face): Use defface.
	(flyspell-incorrect-color): Variable deleted.
	(flyspell-duplicate-color): Variable deleted.
	(flyspell-underline-p): Variable deleted.
	(flyspell-font-lock-make-face): Function deleted.
	(flyspell-mark-duplications-flag):
	Renamed from flyspell-doublon-as-error-flag.
	(flyspell-mode-on): Delete the debugging message.
	(flyspell-mode-off): Delete the debugging message.
	(flyspell-mode-on): Set flyspell-generic-check-word-p
	from the flyspell-mode-predicate property.
	(texinfo-mode, mail-mode, message-mode):
	Set flyspell-mode-predicate property.

	* international/mule.el (set-clipboard-coding-system): Define as alias.

1998-07-26  Ken'ichi Handa  <handa@melange.gnu.org>

	* arc-mode.el (archive-set-buffer-as-visiting-file): Give FILENAME
	arg to set-auto-coding-function.
	(archive-extract): Pay attention to enable-multibyte-characters.
	(archive-*-write-file-member): Likewise.
	(archive-rename-entry): Likewise.

1998-07-26  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule.el (auto-coding-alist): Recognize .tar.

1998-07-26  Ken'ichi Handa  <handa@melange.gnu.org>

	* files.el (auto-mode-alist): Fix regular expression error for
	sh-mode.

1998-07-26  Ken'ichi HANDA  <handa@etl.go.jp>

	* arc-mode.el (archive-summarize): Set buffer unibyte before
	calling archive-XXX-summarize.
	(archive-file-name-handler): New function to make the caller
	behave as if the extracted file existed.
	(archive-set-buffer-as-visiting-file): New function to simulate
	file visiting.  Uses archive-file-name-handler to make dos-w32
	systems preserve the coding-system of the extracted files.
	(archive-extract): Bind coding-system-for-write to
	file-name-coding-system, coding-system-for-read to 'no-conversion.
	Call archive-set-buffer-as-visiting-file after a member file is
	inserted in the current buffer.
	(archive-extract-by-stdout): Don't bind coding-system-for-read and
	inherit-process-coding-system.
	(archive-*-write-file-member): Give an encoded file name to
	external archive program.
	(archive-rename-entry): Likewise.
	(archive-mode-revert): Set buffer unibyte before calling
	revert-buffer.
	(archive-arc-rename-entry, archive-zip-chmod-entry): Set buffer
	unibyte before handling binary archive data.
	(archive-lzh-rename-entry, archive-lzh-ogm, archive-zip-chmod-entry):
	Likewise.
	(archive-lzh-summarize): Set local variable efnname to the decoded
	file name.  If default-enable-multibyte-characters is non-nil, set
	buffer multibyte before inserting summary lines.

1998-07-25  Dan Nicolaescu  <done@ece.arizona.edu>

	* files.el (auto-mode-alist): Move nroff-modes down the list.

1998-07-25  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule.el (auto-coding-alist): Another doc fix.

1998-07-25  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/mule.el (auto-coding-alist): Docstring fixed.

	* ange-ftp.el (ange-ftp-re-read-dir): Quote ange-ftp-reread-dir in
	autoload cookie.

1998-07-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* calendar/cal-tex.el (cal-tex-latexify-list):
	Ignore specifier in diary entry.

1998-07-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Add the citation regexp
	to adaptive-fill-regexp after the usual contents.
	But modify the usual contents not to match whitespace alone;
	match that again last.
	Add that citation regexp to paragraph-start and paragraph-separate too.

1998-07-24  Ken'ichi Handa  <handa@melange.gnu.org>

	* tar-mode.el (tar-extract): Give set-auto-coding-function
	FILENAME argument.

1998-07-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (auto-coding-alist): New variable.
	(set-auto-coding): Argument FILENAME is added.  Check
	auto-coding-alist at first.

	* international/kkc.el (kkc-region): Unwind-protect the conversion
	process.
	(kkc-show-conversion-list-update): Pay attention to the length of
	kkc-show-conversion-list-index-chars.

	* international/mule-cmds.el (find-multibyte-characters): New
	function.
	(select-safe-coding-system): Highlight characters which can't be
	encoded.  Show list of such characters also in *Warning* buffer.

	* international/mule-util.el
	(coding-system-change-eol-conversion): Make it accepts an integer
	value in EOL-TYPE argument.

1998-07-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* uniquify.el (uniquify-ignore-buffers-re): Fix custom type.

	* emulation/crisp.el: Don't require cl.
	(crisp-override-meta-x): Doc fix.
	(crisp-last-last-command): Doc fix.
	(mark-something): Function deleted.
	(crisp-mark-line): Avoid using mark-something.
	(crisp-region-active): Renamed from region-active.
	(crisp-set-clipboard): Renamed from copy-primary-selection.
	(crisp-kill-region): Renamed from kill-primary-selection.
	(crisp-yank-clipboard): Renamed from yank-clipboard-selection.

	* files.el (basic-save-buffer-2): New function.
	(basic-save-buffer-1): Use basic-save-buffer-2,
	after perhaps binding coding-system-for-write.
	(save-buffer-coding-system): Make it a permanent local.

1998-07-24  Dan Nicolaescu  <done@ece.arizona.edu>

	* files.el (auto-mode-alist): Add idl-mode.

1998-07-23  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* mail/rmail.el (rmail-insert-inbox-text): Use rmail-have-password,
	rmail-get-pop-password and rmail-set-pop-password.
	(rmail-have-password, rmail-get-pop-password)
	(rmail-set-pop-password): New functions.
	(rmail-encode-string): New function.

1998-07-23  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* files.el (auto-mode-alist): Recognize shell profiles without dirname.

1998-07-23  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/quail.el (quail-start-translation): Call
	this-single-command-raw-keys instead of this-single-command-keys.
	(quail-start-conversion): Likewise.

1998-07-23  Kenichi Handa  <handa@etl.go.jp>

	* international/isearch-x.el (isearch-minibuffer-self-insert):
	Handle space char event correctly.
	(isearch-process-search-multibyte-characters): If this-command is
	not isearch-printing-char, don't read multibyte chars from
	minibuffer, but just call isearch-process-search-char.

	* international/quail.el (quail-start-translation): Use
	this-single-command-keys to get raw events instead of
	listify-key-sequence.
	(quail-start-conversion): Likewise.

1998-07-22  Karl Heuer  <kwzh@gnu.org>

	* mail/feedmail.el: Avoid using all-caps for non-arguments.
	(feedmail-queue-send-edit-prompt-help-first): Doc fix.

1998-07-21  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* imenu.el (imenu-create-index-function): Add autoload cookie.
	(imenu-extract-index-name-function, imenu-default-goto-function)
	(imenu-sort-function, imenu-prev-index-position-function): Likewise.

	* ange-ftp.el (ange-ftp-reread-dir): Renamed from `re-read'.
	Old name defined as alias.  Doc fix.

1998-07-21  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-region): Handled the case that
	conversion is canceled.
	(kkc-terminate): Update kkc-overlay-head correctly.
	(kkc-cancel): Don't call kkc-terminate, but set kkc-converting to nil.

	* international/quail.el (quail-simple-translation-keymap): Typo
	in doc-string fixed.
	(quail-start-translation): Check start position of quail-overlay
	before calling quail-overlay-region-events.
	(quail-start-conversion): Likewise.

1998-07-20  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* files.el (auto-mode-alist): Match .emacs with no directory.

1998-07-19  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* progmodes/compile.el (grep): Doc fix.
	(next-error): Doc fix.

	* progmodes/sh-script.el (sh-mode): parse-sexp-ignore-comments = t.

1998-07-19  Eli Zaretskii  <eliz@delysid.gnu.org>

	* arc-mode.el (archive-mode): Undo previous change.
	(archive-extract): Make the buffer unibyte if the extracted file
	was read with coding-system of no-conversion or raw-text.

1998-07-19  Kenichi Handa  <handa@etl.go.jp>

	* isearch.el (isearch-input-method-function): New variable.
	(isearch-input-method-local-p): New variable.
	(isearch-mode): Setup the above two variable.  Set
	input-method-function to nil locally.
	(isearch-done): Restore the previous value of
	input-method-function.

	* international/quail.el (quail-conversion-keymap): New binding
	for quail-conversion-delete-tail.
	(quail-input-method): Suppress input method if
	overriding-terminal-local-map or overriding-local-map is non-nil.
	Erase contents of quail-guidance-buf.  Run the hook
	input-method-after-insert-chunk-hook.
	(quail-start-translation): Get the original event list by
	listify-key-sequence.  Setup last-command and this-command.
	(quail-start-conversion): Likewise.
	(quail-conversion-beginning-of-region): Set quail-translating to nil.
	(quail-conversion-end-of-region, quail-conversion-delete-char):
	Likewise.
	(quail-conversion-delete-tail): New function.
	(quail-no-conversion): Don' run the hook
	input-method-after-insert-chunk-hook.

	* international/kkc.el (kkc-region): Fix the return value.

	* international/isearch-x.el
	(isearch-toggle-specified-input-method): Adjusted for the change
	in isearch.el.
	(isearch-toggle-input-method): Likewise.
	(isearch-minibuffer-local-map): New variable.
	(isearch-minibuffer-non-self-insert): New function.
	(isearch-minibuffer-self-insert): New function.
	(isearch-process-search-multibyte-characters): Read multibyte
	characters from minibuffer with the keymap
	isearch-minibuffer-local-map.

	* international/mule-cmds.el (read-multilingual-string): Don't
	activate an input method in the current buffer, but just bind
	current-input-method.

	* language/japan-util.el (japanese-replace-region): New function.
	(japanese-katakana-region, japanese-hiragana-region)
	(japanese-hankaku-region, japanese-zenkaku-region): Don't change
	point.  Use japanese-replace-region to change text.

1998-07-18  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* ange-ftp.el (ange-ftp-re-read-dir): Add doc string.

1998-07-17  Simon Marshall  <simon@gnu.org>

	* lazy-lock.el (lazy-lock-fontify-after-visage): Renamed from
	lazy-lock-fontify-after-outline.
	(lazy-lock-install-hooks): Add it to hs-hide-hook too.
	(lazy-lock-unstall): Remove it from hs-hide-hook too.
	(lazy-lock-fontify-rest-after-change)
	(lazy-lock-defer-rest-after-change): Ensure properties are always
	removed from the rest of the buffer by widening during removal.

1998-07-17  Stephen Eglen  <stephen@gnu.org>

	* forms.el (forms-mode): Doc fix.

1998-07-17  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* arc-mode.el (archive-mode): Make the buffer unibyte.

1998-07-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* arc-mode.el (archive-extract): If the extractor signals an
	error, trap it, so that the buffer created for a member is killed.

1998-07-15  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-show-conversion-list-index-chars):
	Default value changed.
	(kkc-keymap): Renamed from kkc-mode-map.  Key binding for
	kkc-non-kkc-command are deleted.
	(kkc-mode): This function deleted.
	(kkc-canceled): This variable deleted.
	(kkc-converting): New variable.
	(kkc-region): 3rd optional arg is deleted.  Completely rewritten
	to adjust for the change in quail.el.
	(kkc-terminate, kkc-cancel): Adjusted for the change of
	kkc-region.
	(kkc-non-kkc-command): This function deleted.
	(kkc-select-from-list): Use last-input-event instead of
	last-input-char.  Put an unknown event back to
	unread-input-method-events.

	* international/quail.el (quail-mode): This variable deleted.
	(quail-current-key): Make it buffer local.
	(quail-current-str, quail-current-translations): Likewise.
	(quail-reset-conversion-region): This variable deleted.
	(quail-use-package): Call quail-activate at the tail.
	(quail-translation-keymap, quail-simple-translation-keymap): Key
	bindings for quail-execute-non-quail-command deleted.
	(quail-conversion-keymap): Likewise.  Add key bindings for
	quail-self-insert-command.
	(quail-delete-overlays): Check overlay-start for overlays before
	deleting them.
	(quail-mode): This function deleted.
	(quail-inactivate, quail-activate): New functions.
	(quail-saved-current-map, quail-saved-current-buffer): These
	variables deleted.
	(quail-toggle-mode-temporarily, quail-execute-non-quail-command):
	These functions deleted.
	(quail-exit-conversion-mode, quail-prefix-arg): These variables
	deleted.
	(quail-error): New error condition.
	(quail-error): New function.
	(quail-translating, quail-converting): New variables.
	(quail-input-method, quail-overlay-region-events): New function.
	(quail-start-translation): Completely re-written.
	(quail-start-translation-in-conversion-mode): This function
	deleted.
	(quail-start-conversion): New function.
	(quail-terminate-translation): Just set quail-translating to nil.
	(quail-update-translation): Put some events back to
	unread-input-method-events instead of unread-command-events.  Call
	quail-error instead of error.
	(quail-self-insert-command): Adjusted for the change of
	quail-start-translation.
	(quail-next-translation): Don't call
	quail-execute-non-quail-command, instead, put an event back of
	unread-command-events.
	(quail-prev-translation, quail-next-translation-block)
	(quail-prev-translation-block): Likewise.
	(quail-conversion-backward-char): Call quail-error instead of
	error.  Set quail-translating to nil.
	(quail-conversion-forward-char): Likewise.
	(quail-conversion-delete-char): Call quail-error instead of error.
	If conversion region gets vacant, set quail-converting to nil.
	(quail-conversion-backward-delete-char): Likewise.
	(quail-no-conversion): Just set quail-converting to nil.
	(quail-mouse-choose-completion): Call quai-error instead of error.
	(quail-choose-completion-string): Likewise.
	(quail-help): Don't handle quail-mode-map.

	* language/ethiopic.el ("Ethiopic"): Typo in sample-text fixed.

1998-07-15  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/sgml-mode.el (sgml-mode): Call kill-local-variables
	here directly, then set major-mode, then call sgml-mode-common.
	Run the hooks here at the end.
	(html-mode): Likewise.
	(sgml-mode-common): Don't call kill-local-variables; don't run hooks.

1998-07-15  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* files.el (file-name-invalid-regexp): Fix the part which handles
	colons in file names.

1998-07-14  Gary D. Foster  <gfoster@suzieq.ml.org>

	* emulation/crisp.el:
	Added next-buffer/previous-buffer keybindings (bound to M-n/M-p).
	(crisp-unbury-buffer): New function.

	Fixed bogus XEmacs/Lucid string-match checking.
	Made modeline entry mouse2-able.

	(crisp-mode-map): Make this a sparse keymap parented from
	current-global-map.
	(crisp-mode-original-keymap): Don't copy the keymap.
	(crisp-last-last-command): Renamed from last-last-command.  defvar it.
	(crisp-mode): Honor ARG.

	(crisp-kill-line, crisp-copy-line): When a region isn't highlighted,
	use the region from point to eol.  Honor prefix argument.

	(crisp-submit-bug-report): New command, taken from cc-mode.

	Shortened the version numbering, removed the release-version tracking.

	(crisp-version): New function.
	New keybindings `C-home', `C-end', `M-home', `M-end', `C-f', `M-l',
	`M-m'.

	(crisp-copy-line): No need to save point.

	Removed S-right and S-left bindings.

	Abstract the marking and selection interfaces so that we can be
	compatible with both Emacs and XEmacs.  And try and make the
	behavior as close as possible under both environments so that there
	are no surprises.

1998-07-14  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* info.el (Info-read-node-name-1, Info-read-node-name):
	Rename completion-table to Info-read-node-completion-table.
	(Info-read-node-completion-table): Add defvar.
	(Info-complete-menu-buffer): Add defvar.

	* subr.el (read-quoted-char): Bind input-method-function to nil.

	* simple.el (do-auto-fill): Always break before any whitespace
	so that point ends up at the right place.

1998-07-13  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* rmailedit.el (rmail-edit-current-message, rmail-cease-edit):
	Save and restore save-buffer-coding-system in another local variable.

1998-07-13  Andrew Innes  <andrewi@delysid.gnu.org>

	* ps-print.el (ps-do-despool): Bind ps-printer-name to
	printer-name if the former is nil.

1998-07-12  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/sendmail.el (mail-citation-prefix-regexp): New variable.
	(mail-fill-yanked-message): Pass mail-citation-prefix-regexp
	to fill-individual-paragraphs.

	* textmodes/fill.el (fill-individual-paragraphs-prefix): New
	subroutine taken from fill-individual-paragraphs.  Really check that
	JUST-ONE-LINE-PREFIX is longer than TWO-LINES-PREFIX in its whitespace.
	(fill-individual-paragraphs-citation): New subroutine.
	(fill-nonuniform-paragraphs): Arg MAILP renamed.
	(fill-individual-paragraphs): Arg MAILP renamed.

1998-07-12  Andrew Innes  <andrewi@delysid.gnu.org>

	* dos-w32.el (file-name-buffer-file-type-alist): Force tags files
	to be read as raw-text-dos (to handle files in DOS format).

1998-07-12  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule.el (set-selection-coding-system):
	Renamed from set-clipboard-coding-system.
	Set the variable's new name, selection-coding-system.

	* mail/rmailout.el (rmail-output-to-rmail-file):
	Clean up handling of relative file names in DEFAULT-FILE.

1998-07-10  Eric M. Ludlam  <zappo@ultranet.com>

	* speedbspec.el: Deleted; now integrated into speedbar.el.
	* speedbar.el: More commentary.
	(speedbar-xemacsp): Moved definition.
	(speedbar-initial-expansion-mode-list): Was
	`speedbar-initial-expansion-list' and now has multiple modes.
	(speedbar-stealthy-function-list): Now has mode labels.
	(speedbar-initial-expansion-list-name)
	(speedbar-previously-used-expansion-list-name)
	(speedbar-special-mode-key-map, speedbar-track-mouse-flag)
	(speedbar-tag-hierarchy-method, speedbar-tag-split-minimum-length)
	(speedbar-tag-regroup-maximum-length)
	(speedbar-hide-button-brackets-flag): New variables.
	(speedbar-special-mode-expansion-list): Updated documentation.
	(speedbar-navigating-speed, speedbar-update-speed): Phasing out.
	(speedbar-vc-indicator): Removed space from this var.
	(speedbar-indicator-separator, speedbar-obj-do-check)
	(speedbar-obj-to-do-point, speedbar-obj-indicator, speedbar-obj-alist)
	(speedbar-indicator-regex): New variables.
	(speedbar-directory-unshown-regexp): New variable.
	(speedbar-supported-extension-expressions): Added more extensions.
	(speedbar-add-supported-extension)
	(speedbar-add-ignored-path-regexp): Made interactive.
	(speedbar-update-flag): Nil w/ no window system.
	(speedbar-file-key-map): Moved some key bindings from
	`speedbar-key-map' to this map.
	(speedbar-make-specialized-keymap): New function.
	(speedbar-file-key-map): New key map.
	(speedbar-easymenu-definition-special): Updated to new functions.
	(speedbar-easymenu-definition-trailer): Changed conditional part.
	(speedbar-frame-mode): Removed commented code, fixed W32 cursor
	bug, Updated to better handle terminal frames.
	(speedbar-switch-buffer-attached-frame): New function.
	(speedbar-mode): Updated documentation, no local keymap,
	correct `temp-buffer-show-function' use, enable mouse-tracking.
	(speedbar-show-info-under-mouse): New function.
	(speedbar-reconfigure-keymaps): Was `speedbar-reconfigure-menubar'.
	Enable major display mode specific menus & key maps.
	(speedbar-temp-buffer-show-function): Fix use of `temp-buffer-show-hook'.
	(speedbar-track-mouse, speedbar-track-mouse-xemacs): New functions.
	(speedbar-restricted-move, speedbar-restricted-next)
	(speedbar-restricted-prev, speedbar-navigate-list)
	(speedbar-forward-list, speedbar-backward-list): New commands.
	(speedbar-refresh): Updated message printing & verbosity.
	(speedbar-item-load): Updated message.
	(speedbar-item-byte-compile): Updated doc & reset scanners.
	(speedbar-item-info): Overhauled with more details.
	(speedbar-item-copy): Update messages.
	(speedbar-generic-item-info): New function.
	(speedbar-item-delete): Update messages.
	(speedbar-item-object-delete): New function.
	(speedbar-select-window): Update doc.  Use `show-buffer'.
	(speedbar-make-button): Update doc.
	(speedbar-initial-expansion-list, speedbar-initial-menu)
	(speedbar-initial-keymap, speedbar-initial-stealthy-functions)
	(speedbar-add-expansion-list)
	(speedbar-change-initial-expansion-list): New functions.
	(speedbar-maybe-add-localized-support)
	(speedbar-add-localized-speedbar-support)
	(speedbar-remove-localized-speedbar-support): Imported from speedbspec.
	(speedbar-file-lists): Filter out some directories.
	(speedbar-make-tag-line): Can hide brackets.
	(speedbar-change-expand-button-char): Protect invisible text prop.
	(speedbar-insert-files-at-point): Ignore case during compares.
	(speedbar-apply-one-tag-hierarchy-method)
	(speedbar-create-tag-hierarchy): New functions.
	(speedbar-insert-generic-list): Now calls hierarchy functions on tags.
	(speedbar-update-contents): Handles localized support.
	(speedbar-update-directory-contents): Uses fn for expansion list.
	Fixed directory caching bug.
	(speedbar-timer-fn): Calls localized support function.
	(speedbar-stealthy-update-recurse): New variable.
	(speedbar-stealthy-updates): Handle new stealth function format.
	(speedbar-clear-current-file): Handle indicator regex.
	(speedbar-update-current-file): Ignores case, update handle
	indicator regex, Fix line positioning.
	(speedbar-add-indicator): Handles obj indicators now.
	(speedbar-check-objects, speedbar-check-obj-this-line): New functions.
	(speedbar-double-click): Fix triple click error.
	(speedbar-line-file, speedbar-goto-this-file): Handle indicator regex.
	(speedbar-line-path): Only try to get a file when in "files" display.
	(speedbar-line-depth): Handle indicator regex.
	(speedbar-dir-follow): Turn of smart-adjust to disable cache use.
	(speedbar-directory-buttons-follow): Hack for W32 emacs directories.
	(speedbar-buffers-key-map): New key map.
	(speedbar-buffer-easymenu-definition): New menu items.
	(speedbar-buffer-buttons, speedbar-buffer-buttons-temp)
	(speedbar-buffer-buttons-engine, speedbar-buffer-click)
	(speedbar-buffer-kill-buffer, speedbar-buffer-revert-buffer):
	New functions.

	* mail/rmail.el: No longer depends on speedbspec for byte compile.
	(rmail-speedbar-match-folder-regexp): New variable.
	(rmail-speedbar-menu-items): Updated speedbar menu items.
	(rmail-speedbar-key-map): New keymap.
	(rmail-install-speedbar-variables): New function.
	Install speedbar keymap only when speedbar is loaded.
	(rmail-speedbar-buttons): Use `rmail-speedbar-match-folder-regexp'.

	* info.el: No longer depends on speedbspec for byte compile.
	(Info-speedbar-key-map): New key map.
	(Info-install-speedbar-variables): New function.
	(Info-speedbar-menu-items): Update to new functions.
	Install speedbar keymap only when speedbar is loaded.
	(Info-speedbar-browser): New command.
	(Info-speedbar-hierarchy-buttons, Info-speedbar-goto-node)
	(Info-speedbar-expand-node, Info-speedbar-fetch-file-nodes): New fns.
	(Info-speedbar-buttons): Handle new node button commands.

	* gud.el (gud-speedbar-key-map): New variable.
	(gud-install-speedbar-variables): New function
	Install speedbar keymap only when speedbar is loaded.
	(gud-gdb-get-stackframe): Added ":" to regex for c++.

1998-07-09  Sam Steingold  <sds@usa.net>

	* emacs-lisp/cl-indent.el: Indent `handler-case' correctly.
	* font-lock.el (lisp-font-lock-keywords): Fontify
	`handler-case', `ccase', `ctypecase', `assert', `error'.

1998-07-09  Andrew Innes  <andrewi@harlequin.co.uk>

	* jka-compr.el (jka-compr-insert-file-contents): Replace incorrect
	inline code with call to find-operation-coding-system.

1998-07-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* simple.el (undo-in-progress): New variable.
	(undo-more): Bind it to t.

1998-07-08  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (x-complement-fontset-spec): Typo fixed.
	(create-fontset-from-fontset-spec): Likewise.
	(create-fontset-from-ascii-font): Likewise.

1998-07-08  Kenichi Handa  <handa@etl.go.jp>

	* language/hebrew.el ("Hebrew"): Add coding-priority.

	* language/misc-lang.el ("IPA"): Add coding-priority and coding-system.

1998-07-07  Kevin Rodgers  <kevinr@ihs.com>  (tiny change)

	* vc.el (vc-finish-logentry): Only delete windows in the
	selected frame displaying the *VC-log* buffer, in case another
	frame is dedicated to it (which will then be deleted via
	kill-buffer).

1998-07-07  Sam Steingold  <sds@goems.com>

	* scheme.el (scheme-font-lock-keywords-1): Fontify SCWM/Guile
	keywords starting with `define'.

1998-07-07  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail): If existing buffer, use local
	enable-multibyte-characters for rmail-enable-multibyte.
	(rmail-revert): Bind coding-system-for-read to raw-text,
	then convert and make buffer multibyte, as in `rmail'.

	* files.el (find-file-noselect-1): Use kill-local-variable on
	buffer-file-coding-system, instead of setting it.
	(save-buffer): Doc fix.
	(basic-save-buffer): Doc fix.

	* subr.el (add-hook): Use member if FUNCTION is a compiled function.

1998-07-06  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/fill.el (fill-individual-paragraphs):
	Fix previous change.

	* textmodes/tex-mode.el (tex-delete-last-temp-files):
	Use file-name-sans-extensions.

1998-07-06  Kenichi Handa  <handa@etl.go.jp>

	* bindings.el: Make all multibyte characters self-insert.

	* isearch.el (isearch-mode-map): Make all multibyte characters
	search for themselves.

1998-07-05  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/mule.el: Don't make the function charset-list
	obsolete.

1998-07-05  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/mail-utils.el (rmail-dont-reply-to): Understand
	about doublequotes; don't be fooled by commas inside them.

1998-07-04  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/fill.el (fill-individual-paragraphs):
	If JUST-ONE-LINE-PREFIX matches TWO-LINES-PREFIX except with
	longer whitespace, treat that as a match even is spaces
	are replaced with a tab.

1998-07-03  Michael Ernst  <mernst@alum.mit.edu>

	* dired-x.el (dired-omit-expunge): Message if skipping omitting
	because directory is too large; also unset dired-omit-files-p.
	(dired-omit-size-limit): Increase default from 20000 to 30000.

1998-07-03  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (set-language-environment):
	Test unibyte-syntax instead of using a fixed list of
	latin-N character sets.

	* language/european.el: Define unibyte-syntax in each of these
	language environments.
	(setup-8-bit-environment): Let unibyte-syntax specify whether to
	load a file of syntax settings, and which one.

	* emacs-lisp/byte-opt.el (byte-boolean-vars):
	Add print-escape-multibyte.

	* progmodes/make-mode.el (makefile-font-lock-keywords):
	Recognize automatic variable references.
	(makefile-dependency-regex): Don't be fooled by colons in deps.

1998-07-03  Espen Skoglund  <espensk@stud.cs.uit.no>

	* pascal.el (pascal-insert-block): Fixed space-deletion bug in
	front of the "begin" string.
	(pascal-beg-of-defun): Used to locate the beginning of a function
	incorrectly when a function contained several begin-end blocks.
	Fixed.

1998-07-03  Dave Love  <d.love@dl.ac.uk>

	* calendar/diary-lib.el (diary-mail-addr): Fix custom type.

1998-07-03  Andrew Innes  <andrewi@harlequin.co.uk>

	* dos-fns.el (dos-print-region-function): Definition moved to
	dos-w32.el.
	(print-region-function): Initialization moved to dos-w32.el.
	(lpr-headers-switches, ps-lpr-command, ps-lpr-switches): Likewise.

	* dos-vars.el (dos-printer): Obsolete variable deleted.
	(dos-ps-printer): Likewise.

	* dos-w32.el (direct-print-region-function): Renamed from
	dos-print-region-function.  Added &rest keyword.
	(print-region-function): Set to direct-print-region-function.
	(lpr-headers-switches): Initialize.
	(ps-lpr-command): Initialize.
	(ps-lpr-switches): Initialize.

	* lpr.el (printer-name): New variable.
	(lpr-switches): Mention it in docstring.
	(print-region-1): Use it.

	* ps-print.el (ps-printer-name): New variable.
	(ps-do-despool): Use it.

1998-07-03  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfo.el (texinfo-environment-regexp):
	Add smalldisplay and smallformat.

	* info.el (Info-find-node): Handle cross references to an @anchor.

	* informat.el (Info-tagify): Finish previous change.
	Fix up some messages.

	* textmodes/texinfmt.el (texinfmt-version): Update version.
	number which is used in header of texinfmt-produced Info files.
	(texinfo-format-buffer): Now always tagify, on account of @anchor.
	(texi-format-region): Always tagify.
	(texi2info):          Always tagify.
	(texinfo-anchor):     Add @anchor command as place to which
	a cross reference may go.
	(texinfo-no-refill-regexp): Add smalldisplay, smallformat.
	(texinfo-format-uref):            New command: @uref.
	(texinfo-format-var):             New command: @acronym.
	(texinfo-format-code):            New commands: @command, @env, @url.
	(texinfo-format-option):          New command: @option.
	(texinfo-format-example):         New command: @smalldisplay.
	(texinfo-format-flushleft):       New command: @smallformat.
	(texinfo-discard-line-with-args): New commands: @novalidate, @pagesize,
	@setcontentsaftertitlepage, @setshortcontentsaftertitlepage.

1998-07-03  Eric Ludlam  <zappo@mescaline.gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc): Updated commentary.
	(checkdoc-autofix-flag): Updated doc.
	(checkdoc-force-docstrings-flag): Updated doc.
	(checkdoc-force-history-flag): New flag.
	(checkdoc-triple-semi-comment-check-flag): Fixed name.
	(checkdoc-spellcheck-documentation-flag): Fixed doc.
	(checkdoc-ispell-lisp-words): Update default value.
	(checkdoc-generate-compile-warnings-flag, checkdoc-proper-noun-list)
	(checkdoc-proper-noun-regexp, checkdoc-symbol-words): New variables.
	(princ-list): Function created if it isn't bound.
	(checkdoc-interactive): Parts removed to `checkdoc-interactive-loop'.
	(checkdoc, checkdoc-message-interactive): New function.
	(checkdoc-interactive-loop): Was in `checkdoc-interactive', then
	added better keybindings, and better autofixing behavior,
	Cursor now sits next to the error, forcing scrolling if needed,
	and using a better centering algorithm, and much better error
	navigation after choosing "f"ix.
	(checkdoc-next-error): Added parameter ENABLE-FIX.
	(checkdoc-next-message-error, checkdoc-recursive-edit): New functions.
	(checkdoc-start): Was `checkdoc', uses new note taking system.
	(checkdoc-current-buffer, checkdoc-continue, checkdoc-comments):
	Updated to use new note taking system.
	(checkdoc-rogue-spaces, checkdoc-rogue-space-check-engine):
	Added INTERACT parameter, uses new warnings functions.
	(checkdoc-message-text, checkdoc-defun):
	Updated to use new note taking system.
	(checkdoc-ispell-current-buffer, checkdoc-ispell-interactive): Fix doc.
	(checkdoc-ispell-message-text, checkdoc-ispell-start): New function.
	(checkdoc-create-error, checkdoc-error-text, checkdoc-error-start)
	(checkdoc-error-end, checkdoc-error-unfixable): New functions.
	(checkdoc-minor-keymap): Updated keybinds to new interactive functions,
	completely re-arranged the minor-mode menu.
	(checkdoc-this-string-valid): Moved no doc-string warning here,
	and added autofix if a comment already exists there.
	(checkdoc-this-string-valid-engine): Fix doc, robusted doc finder.
	All previously returned errors now call `checkdoc-create-error'.
	Moved no doc string warning out.  Update allowed punctuation at
	end of first line.  Fixed up sentence joining.  Verb checking flag
	now only checks the first line of a function.  Added more safe
	conditions to ambiguous symbols.  Moved symbol quoting to end.
	Added autofix for variables that should end in `-flag'.
	Replaced use of `y-or-n-p' with `checkdoc-y-or-n-p'.
	Reading checkdoc-param comment no longer depends on list syntax.
	Fixed various error string spelling & format.
	(checkdoc-in-sample-code-p): List starting with all caps word is
	now considered sample code.
	(checkdoc-in-example-string-p, checkdoc-proper-noun-region-engine)
	(checkdoc-sentencespace-region-engine): New functions.
	(checkdoc-ispell-docstring-engine): Disable spell checking during
	if user never wants interaction.  We don't have a non-interactive
	spell checking method yet.
	(checkdoc-file-comments-engine): Now set up to check all possible
	conditions even after encountering an error.  Added auto-fixes
	for history and commentary.  All previously returned errors now call
	`checkdoc-create-error'.  Message spelling and format.
	(checkdoc-message-text-search):
	Moved parts to `checkdoc-message-text-next-string'.
	(checkdoc-message-text-next-string): New function.
	(checkdoc-message-text-engine): All previously returned errors
	now call `checkdoc-create-error'.  Can find/skip 'format' call
	after the call we are checking.  Added sentence/propernoun scans.
	`y-or-n-p' checks and fixes are now more robust.
	(checkdoc-y-or-n-p): New function.
	(checkdoc-autofix-ask-replace): Update doc.  Protect match-data.
	Correctly handle `checkdoc-autofix-flag' of 'never.  New behavior
	with `checkdoc-autofix-flag' of 'automatic-then-never.  Better
	overlay handling.
	(checkdoc-output-font-lock-keywords): Updated to new output format.
	(checkdoc-pending-errors): New variable.
	(checkdoc-find-error): Updated to new output format.
	(checkdoc-start-section, checkdoc-error): Improved the output.
	(checkdoc-show-diagnostics): Smarter show algorithm.

1998-07-03  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (x-create-frame-with-faces): If an ASCII font is
	specified in PARAMETERS, create a fontset from the font and use it
	for the new frame.

	* international/fontset.el (create-fontset-from-fontset-spec):
	Returns a created fontset.
	(create-fontset-from-ascii-font): New function.

	* term/x-win.el: Fill weight and slant fields of a fontset
	generated from the specified ASCII font by values got from the
	resolved ASCII font name.

1998-07-02  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/bytecomp.el (byte-compile-file):
	Bind set-auto-coding-for-load to t.

	* international/mule.el (set-auto-coding-for-load): New variable.
	(set-auto-coding): If set-auto-coding-for-load is non-nil,
	look for `unibyte file variable first, then for `coding'.
	(load-with-code-conversion): Bind set-auto-coding-for-load to t.

	* cus-edit.el (customize-changed-options):
	Clean up previous change.

	* progmodes/cc-menus.el: Don't require imenu.

	* menu-bar.el (menu-bar-mode): Doc fix.

1998-07-02  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-mode-map) <menu>: Tweak the imenu
	menu entry.
	(end-of-fortran-subprogram): Check if we're on the END statement.

1998-07-02  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/texinfmt.el (texinfo-anchor): New function.

	* informat.el (Info-tagify): Handle tags for @anchor.

	* menu-bar.el (menu-bar-kill-ring-save): Fix message typo.

1998-07-01  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* derived.el (derived-mode-hooks-name): Use -hook, not -hooks,
	in mode hook name.
	(derived-mode-hook-name): Renamed from ...-hooks; caller changed.

1998-07-01  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/mule.el (mule-version): Changed to 4.0.
	(mule-version-date): Updated.

1998-06-30  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* menu-bar.el (menu-bar-edit-menu): Rename Paste most Recent
	to simply Paste, and put it above Select and Paste.

	* comint.el (comint-exec-1): Setup coding systems appropriately.

1998-06-29  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-hide-entry-bodies): When entry
	bodies are hidden, the last entry is no longer omitted.

1998-06-29  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/supercite.el (sc-help-address): Use an alias at gnu.org.

1998-06-29  Stephen Eglen  <stephen@gnu.org>

	* calendar/diary-lib.el (diary-mail-entries): Call exit-calendar
	when finished.

1998-06-28  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* vcursor.el: Use defcustom to define faces.
	(vcursor-bind-keys): New function.
	(vcursor-key-bindings): Use vcursor-bind-keys for :set.
	(vcursor-cs-binding): Function to handle bindings,
	handles differences between Emacs and XEmacs.
	(vcursor-post-command): Handle vcursor-auto-disable non-nil
	and not t to toggle off copying.

1998-06-28  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* gnus/message.el (message-cite-original): If mail-citation-hook
	is non-nil, just run that and do nothing else.
	(message-cite-function): Don't initialize from mail-citation-hook.

	* mail/mh-utils.el (mh-find-progs): Avoid WTA error
	when mh-progs is nil.  Give a clear specific error message instead.

	* shell.el (shell-copy-environment-variable): Fix doc typo.

	* ffap.el (ffap-read-file-or-url):
	Bind minibuffer-completing-file-name to t.

	* informat.el (Info-split): Convert positions to bytes to put in file.
	(Info-tagify): Likewise.

	* info.el (Info-find-node): Use byte-to-position.

1998-06-28  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-cite-function): Initialized from
	`mail-citation-hook', if that variable is bound and non-nil.

1998-06-28  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* ange-ftp.el (ange-ftp-send-cmd): When listing a directory that
	contains space(s), cd to the directory first to avoid problems
	with (some) ftp servers.

1998-06-27  Dan Nicolaescu  <done@ece.arizona.edu>

	* cus-dep.el: Fix typo.

1998-06-27  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* startup.el (command-line) <handling LANG>: Change 9 to 5, not 5 to 9.
	(command-line-1): Fix mouse startup message.

	* textmodes/text-mode.el (text-mode): Locally set indent-line-function.

	* find-dired.el (find-dired): Bind dired-buffers so it can't change.
	Use abbreviate-file-name.

	* imenu.el (imenu-space-replacement): Use `.'.

	* textmodes/sgml-mode.el (html-imenu-regexp): New defvar.
	(html-imenu-index): New function.
	(html-mode): Set up local vars to use html-imenu-index.
	Don't sort the menu.

	* international/mule.el (set-keyboard-coding-system): Doc typo.

1998-06-26  Michael Ernst  <mernst@alum.mit.edu>

	* sendmail.el (mail): Avoid changing auto-save file name.

1998-06-26  Dan Nicolaescu  <done@ece.arizona.edu>

	* textmodes/flyspell.el (flyspell): Add :version.

1998-06-26  Ken'ichi Handa  <handa@melange.gnu.org>

	* language/greek.el: Add coding-priority.

1998-06-26  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/mailalias.el (mail-complete): Fix the test of (mail-header-end).

1998-06-26  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (create-fontset-from-fontset-spec):
	Generate ASCII font names of style variants fontsets from a
	resolved ASCII font name of a base fontset.

	* language/korea-util.el (isearch-toggle-korean-input-method)
	(isearch-hangul-switch-symbol-ksc, isearch-hangul-switch-hanja):
	New functions.
	(korean-key-bindings): Renamed from exit-korean-environment-data.
	Initialized appropriately.
	(setup-korean-environment): Setup key bindings according to
	korean-key-bindings.
	(exit-korean-environment): Revert key bindings only if the current
	key bindings is the same as what set by setup-korean-environment.

1998-06-25  Andrew Innes  <andrewi@harlequin.co.uk>

	* faces.el (set-face-font): For now, don't call
	resolve-fontset-name on Windows.
	(set-face-font-auto): Likewise.

1998-06-25  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el: Delete defcustom definition.
	(flyspell-auto-correct-binding): Fix custom type.
	(mail-mode-flyspell-verify): Check for `Subject:'.
	(flyspell-mouse-map): Use cond, not if.
	(flyspell-region): Update message only every 100 actions.

1998-06-25  Jens-Ulrik Petersen  <petersen@kurims.kyoto-u.ac.jp>

	* find-func.el: Require `loadhist'.
	(find-function-function): Variable removed.
	(find-function-regexp): New variable, taken from former constant
	in `find-function-noselect'.  Can now find function definitions
	with parameters on a new line.
	(find-variable-regexp): New variable.
	(find-function-recenter-line): New variable.
	(find-function-after-hook): New variable.
	(find-function-search-for-symbol): Subroutine, from
	of `find-function-noselect'.
	(find-function-search-for-symbol): `regexp-quote' the symbol name:
	needed to find-function `mapcar*' for example.
	(find-function-noselect): Improved docstring.  Don't include
	`library' in let.
	Use `symbol-file' instead of `describe-symbol-find-file'.
	(find-function-read): Renamed from `find-function-read-function'.
	With optional arg now read a variable.
	(find-function-read): Separate `completing-read' calls for
	variables and functions.
	(find-function-do-it): If buffer found was already current push
	mark.  Added parameter to indicate if a variable is being searched for.
	(find-function-do-it): Mention new `find-function-recenter-line'
	and `find-function-after-hook' in docstring.  Use them.
	(find-function): Remove optional arg.  Use `find-function-do-it'
	and `find-function-read'.
	(find-function-other-window): Ditto.
	(find-function-other-frame): Ditto.
	(find-function): Mention `find-function-recenter-line' and
	`find-function-after-hook' in docstring.
	(find-function-other-window): Remove most of docstring and add
	reference to `find-function' instead.
	(find-function-other-frame): Ditto.
	(find-variable-noselect): New function for finding the point of
	definition of variables, modeled on `find-function-noselect'.
	(find-variable-noselect): Use `symbol-file' instead of
	`describe-symbol-find-file'.
	(find-variable): New function.
	(find-variable-other-window): Ditto.
	(find-variable-other-frame): Ditto.
	(find-variable): Mention `find-function-recenter-line' and
	`find-function-after-hook' in docstring.
	(find-variable-other-window): Remove most of docstring and add
	reference to `find-variable' instead.
	(find-variable-other-frame): Ditto.
	(find-function-on-key): Simplified.  Removed stuff now taken care
	of by interactive "k".
	(find-function-at-point): New function.
	(find-variable-at-point): Ditto.

1998-06-25  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (mail-unsent-separator): Add new alternative.

1998-06-25  Karl Heuer  <kwzh@gnu.org>

	* mail/feedmail.el: Style and doc fixes.

1998-06-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/flyspell.el: New file.

	* dabbrev.el (dabbrev-ignored-buffer-names):
	Fix typo.  Add *Buffer List*.

1998-06-24  Andrew Innes  <andrewi@mescaline.gnu.org>

	* dos-w32.el (null-device): Renamed from grep-null-device.

1998-06-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* custom.el (custom-set-default): New function.
	(custom-set-variables): Use custom-set-default.
	(custom-local-buffer): New variable.
	(defcustom): Doc fix.

1998-06-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* international/fontset.el (fontset-default-styles): Fix custom type.

1998-06-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (set-language-environment):
	Allow all language environments, even in unibyte mode.
	But set the terminal coding system only in the known few.

	* language/japanese.el (iso-2022-jp): Delete spurious quote.

1998-06-23  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* ange-ftp.el (ange-ftp-default-user)
	(ange-ftp-generate-anonymous-password): Use `other' widget type.
	* autoinsert.el (auto-insert, auto-insert-query): Use `other'
	widget type.
	* bookmark.el (bookmark-save-flag, bookmark-version-control): Use
	`other' widget type.
	* comint.el (comint-input-autoexpand): Use `other' widget type.
	* complete.el (PC-first-char): Use `other' widget type.
	* cus-edit.el (custom-magic-show): Use `other' widget type.
	* cus-start.el (selective-display, suggest-key-bindings)
	(message-log-max): Use `other' widget type.
	* dabbrev.el (dabbrev-case-fold-search, dabbrev-case-replace)
	(dabbrev-check-other-buffers): Use `other' widget type.
	* dired-aux.el (dired-backup-overwrite): Use `other' widget type.
	* dired-x.el (dired-vm-read-only-folders): Use `other' widget
	type.
	* dos-vars.el (dos-ps-printer): Use `other' widget type.
	* ediff-init.el (ediff-autostore-merges): Use `other' widget
	type.
	* emacs-lisp/advice.el (ad-redefinition-action)
	(ad-default-compilation-action): Use `other' widget type.
	* emacs-lisp/bytecomp.el (byte-compile-generate-call-tree):
	Use `other' widget type.
	* emacs-lisp/checkdoc.el (checkdoc-autofix-flag): Use `other'
	widget type.
	* emacs-lisp/copyright.el (copyright-query): Use `other' widget
	type.
	* fast-lock.el (fast-lock-verbose): Use `other' widget type.
	* files.el (version-control, delete-old-versions)
	(require-final-newline, enable-local-variables, enable-local-eval):
	Use `other' widget type.
	* font-lock.el (font-lock-verbose): Use `other' widget type.
	* gnus/gnus-art.el (gnus-prompt-before-saving): Use `other' widget
	type.
	* gnus/gnus-async.el (gnus-use-article-prefetch): Use `other'
	widget type.
	* imenu.el (imenu-always-use-completion-buffer-p): Use `other'
	widget type.
	* isearch.el (search-upper-case): Use `other' widget type.
	* ispell.el (ispell-highlight-p, ispell-check-comments)
	(ispell-help-in-bufferp, ispell-skip-sgml): Use `other' widget
	type.
	* lazy-lock.el (lazy-lock-defer-on-scrolling)
	(lazy-lock-defer-contextually): Use `other' widget type.
	* mail/mh-comp.el (mh-yank-from-start-of-msg): Use `other' widget
	type.
	* mail/rmail.el (rmail-enable-mime): Use `other' widget type.
	* mail/supercite.el (sc-cite-region-limit): Use `other' widget
	type.
	* mouse-sel.el (mouse-sel-default-bindings): Use `other' widget
	type.
	* progmodes/etags.el (tags-add-tables): Use `other' widget type.
	* progmodes/executable.el (executable-query): Use `other' widget
	type.
	* ps-print.el (ps-print-control-characters): Use `other' widget
	type.
	* rlogin.el (rlogin-process-connection-type)
	(rlogin-directory-tracking-mode): Use `other' widget type.
	* shadowfile.el (shadow-noquery): Use `other' widget type.
	* textmodes/bibtex.el (bibtex-include-OPTkey): Use `other' widget
	type.

1998-06-23  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/fontset.el (x-style-funcs-alist): Remove
	duplicated code.

1998-06-23  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* cus-edit.el (custom-buffer-create-internal): New optional arg LOCAL;
	set custom-local-buffer locally to that.
	(custom-buffer-create): New optional arg LOCAL.
	(customize-local-variables): New function.
	(custom-default-value): New function.
	(custom-variable-value-create): Use custom-default-value.
	(customize-set-variable): Use custom-set-default.
	(customize-save-variable): Likewise.
	(custom-variable-set, custom-variable-reset-standard): Likewise.
	(custom-variable-save, custom-variable-reset-saved): Likewise.

1998-06-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/executable.el (executable-binary-suffixes): New variable.
	(executable-find): Use it to look for executable program files.

1998-06-23  Michael Ernst  <mernst@alum.mit.edu>

	* bibtex.el: Numerous documentation fixups.
	Delete periods from error messages.

	* bibtex.el (bibtex-move-outside-of-entry): If outside an entry,
	try not to move point, or only move it minimally.

	* bibtex.el (bibtex-autokey-get-titlestring): Omit delimiters.

1998-06-23  Dave Love  <fx@gnu.org>

	* files.el (auto-mode-alist): Map .xml to sgml-mode.

1998-06-23  Kenichi Handa  <handa@etl.go.jp>

	* language/japan-util.el: Introduce new character code property
	`composition'.  Add property `jisx0208' to Japanese hankaku characters.
	(japanese-kana-table): Add more data.
	(japanese-symbol-table): Change the order of elements.
	(japanese-katakana-region): Adjusted for the above changes.  Check
	character code properties directly here.
	(japanese-hiragana-region): Likewise.
	(japanese-hankaku-region): Likewise.
	(japanese-zenkaku-region): Likewise.

1998-06-22  WJ Carpenter  <bill@carpenter.ORG>

	* mail/feedmail.el: New file.

1998-06-22  Andrew Innes  <andrewi@harlequin.co.uk>

	* term/w32-win.el (internal-face-interactive): Handle case where
	BOOL is `color'.

1998-06-22  Richard Stallman  <rms@sucrose.ai.mit.edu>

	* progmodes/compile.el (grep-command): Initialize to nil.
	(grep-find-command): Initialize to nil.
	(grep-find-use-xargs): Initialize to nil.
	(grep-compute-defaults): New function, sets those three vars properly.
	(grep, grep-find): Call grep-compute-defaults if ...command variable
	is still nil.
	(grep-program): Doc fix.

1998-06-21  Richard Stallman  <rms@sucrose.ai.mit.edu>

	* files.el (find-file-noselect-1): Init buffer-file-coding-system
	from default-buffer-file-coding-system.

	* files.el (find-file-noselect-1): Return the buffer that is current
	after after-find-file.
	(find-file-noselect): Return whatever find-file-noselect-1 returns.

	* emacs-lisp/cl-macs.el (buffer-modified-p): Make defsetf handle
	buffer argument.

	* mail/rmailout.el (rmail-output): Handle directories properly
	in suggestions for the alist.

1998-06-21  Dan Nicolaescu  <done@ece.arizona.edu>

	* midnight.el (midnight): Put :version to the defgroup and delete
	it from all the variables.

	* net-utils.el (net-utils): Add :version.

1998-06-21  Dan Nicolaescu  <done@ece.arizona.edu>

	Add support for loading the files that contain :version when doing
	`customize-changed-options' so it can know which variables have
	changed even in files that were not loaded at the time it was called.
	* cus-edit.el (customize-changed-options): Remember all the
	versions and load the corresponding files before we show the
	customization buffer.  Change the sorting to show the groups first
	in the customization buffer.

	(custom-buffer-create-internal): Move the ... before %.

	* cus-dep.el (custom-make-dependencies): Also remember if the
	variable is autoloaded or not.
	Create the information needed by customize-changed-options.

1998-06-21  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* vc.el (vc-binary-suffixes): New variable.
	(vc-find-binary): Append every suffix from vc-binary-suffixes when
	looking for executable files.

1998-06-20  Richard Stallman  <rms@gnu.org>

	* apropos.el (apropos-print): Delete arg DOC-FN.
	Callers changed to do that work before calling apropos-print.
	Make *Apropos* buffer read only.

	* replace.el (occur): Set buffer-read-only.

1998-06-20  Per Starb√§ck  <starback@strindberg.ling.uu.se>

	* international/characters.el, ispell.el, startup.el: Doc fixes.

	* ispell.el (ispell-skip-region): Don't complain when
	ispell-check-comments is 'exclusive and there are no more
	comments.  Just skip to the end instead.

1998-06-20  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (x-style-funcs-alist): If
	x-make-font-demibold or x-make-font-bold return nil, don't try
	further style modification.

	* international/encoded-kb.el (encoded-kbd-self-insert-sjis):
	Handle katakana-jisx0201 correctly.

	* isearch.el (isearch-range-invisible): Handle the case that
	buffer-invisibility-spec is t (i.e. not a list).

	* language/devan-util.el (devanagari-digit-viram-visarga): Set the
	correct value.
	(devanagari-composite-glyph-unit): Likewise.
	(devanagari-char-to-glyph-rules): Likewise.

	* language/ethio-util.el: Delete codes for ethio-mode, which
	includes deletion of variable ethio-mode, variable
	ethio-mode-map, and function ethio-mode.
	(exit-ethiopic-environment-data): New variable.
	(setup-ethiopic-environment): Recode information of changed key
	bindings in exit-ethiopic-environment-data.  Add
	ethio-select-a-translation to quail-mode-hook.
	(exit-ethiopic-environment): New function.
	(ethio-find-file): Don't check ethio-mode.
	(ethio-write-file): Likewise.

	* language/ethiopic.el: Set `exit-function' of Ethiopic
	lang. env. to exit-ethiopic-environment.

	* term/x-win.el: When creating a fontset from a specified ASCII
	font, don't use the resolved font name for the new fontset name.

1998-06-19  Karl Heuer  <kwzh@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-eval-defun): Doc fix.
	(checkdoc-continue, checkdoc-triple-semi-comment-check-flag): Ditto.
	(checkdoc-common-verbs-wrong-voice): Use dotted pairs.

1998-06-19  Richard Stallman  <rms@gnu.org>

	* startup.el (normal-top-level):
	For root, set backup-by-copying-when-mismatch to t.

	* international/fontset.el (x-style-funcs-alist):
	Fix the elements that call two x-... functions
	so they don't call the second if the first gives nil.
	(fontset-default-styles): New variable.
	(create-fontset-from-fontset-spec): Use fontset-default-styles.

1998-06-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* progmodes/dcl-mode.el (dcl): Define as customize group, not
	as option.

1998-06-19  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp): Handle newlines in time-stamp-pattern.
	(time-stamp-string-preprocess): Handle more than one numeric arg.

1998-06-19  Dave Love  <fx@gnu.org>

	* browse-url.el (browse-url-netscape): Encode `)' too.

1998-06-16  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* vc.el (vc-find-binary): Accept only non-directories.

1998-06-15  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail): Make the buffer multibyte
	even if it was already nonempty, if it should be multibyte.

	* custom.el (custom-declare-variable): Update current-load-list.

1998-06-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* wid-edit.el (widget-default-get): Doc fix.
	(widget-editable-list-entry-create): Apply :value-to-external to
	the value returned from widget-default-get.

1998-06-14  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/mule.el (set-auto-coding): Redo the previous change.

	* tar-mode.el (tar-extract): Adjusted for the change of the spec
	of set-auto-coding-function.

1998-06-14  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* play/gamegrid.el, play/snake.el, play/tetris.el: New file.

	* uncompress.el (uncompress-while-visiting):
	Bind coding-system-for-write and coding-system-for-read.

	* tmm.el (tmm-get-keymap): Handle :filter.

1998-06-14  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* files.el (file-name-invalid-regexp): Add control characters for
	the case of DOS/Windows: they are disallowed by these filesystems.

1998-06-14  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* net-utils.el: New file.

1998-06-13  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/sregex.el: New file.

	* startup.el (command-line-1): Check that user-init-file non-nil.

	* files.el (user-init-file): Default value now nil.

	* help.el (help-map): C-h 4 i runs info-other-window.

	* info.el (info-other-window): New function.

	* mail/rmail.el (rmail-variables): Locally bind
	local-enable-local-variables, not enable-local-variables.
	(rmail): Don't switch buffers inside the binding of
	enable-local-variables.

	* arc-mode.el (archive-mode): Locally bind
	local-enable-local-variables, not enable-local-variables.

	* tar-mode.el (tar-mode): Locally bind local-enable-local-variables,
	not enable-local-variables.

	* files.el (local-enable-local-variables): New variable.
	(set-auto-mode): Test it.

	* wid-edit.el (other): Doc fix.

	* repeat.el (repeat):
	Don't set obsolete var repeat-num-input-keys-at-prefix.

	* files.el (find-file-noselect): Delete unused local var `error'.
	(find-file-noselect-1): Add local var `error'.

	* ispell.el (ispell-region): Return non-nil if not aborted.
	(ispell-highlight-spelling-error-generic): Fix doc typo.

1998-06-12  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* midnight.el (midnight-mode): New variable.
	(midnight-timer-function): New function.
	(midnight-delay-set): Make the timer run midnight-timer-function.

1998-06-12  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-dired-hook): Don't use dired-kill-line to remove
	directory lines in terse mode.
	(vc-dired-purge): If the top level dir is empty, make it look
	a little nicer.

1998-06-12  Dave Love  <fx@gnu.org>

	* loadhist.el (read-feature): Doc fix.
	(loadhist-hook-functions): New variable.
	(unload-feature): Act on FEATURE-unload-hook or look for unloaded
	functions on hooks and remove them.

1998-06-12  Ken'ichi Handa  <handa@melange.gnu.org>

	* international/mule.el (set-auto-coding): Cancel the previous change.

1998-06-12  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (set-face-font): Pay attention to fontset.
	(set-face-font-auto): Call resolve-fontset-name.

	* international/fontset.el (instantiate-fontset): Delete
	duplicated call of x-complement-fontset-spec.  Call new-fontset
	with a correct argument.
	(x-compose-font-name): Argument name adjusted for the doc-string.
	(x-complement-fontset-spec): Don't alter the contents of the
	arguments XLFD-FIELDS and FONTLIST.
	(x-style-funcs-alist): The format changed.
	(x-modify-font-name): New function.
	(create-fontset-from-fontset-spec): The arg STYLE-VARIANT-P is
	changed to STYLE-VARIANT, the format also changed.  Use
	x-modify-font-name instead of calling functions in
	x-style-funcs-alist directly.
	(instantiate-fontset): Use x-modify-font-name instead of calling
	functions in x-style-funcs-alist directly.
	(resolve-fontset-name): New function.

	* term/x-win.el: While creating fontsets of style variants, pay
	attention to X resources XXX.attributeFont.

1998-06-12  Thien-Thi Nguyen  <ttn@delysid.gnu.org>

	* progmodes/hideshow.el: Require `easymenu'.  Rework to
	use easymenu.  Remove eol ws.
	(hs-hide-level-recursive, hs-hide-level): Add.
	(hs-unbalance-handler-method): Delete.
	(hs-show-block-at-point): Always use `top-level'
	unbalanced-handler case.
	(hs-minor-mode): Use `make-local-variable' not
	`make-variable-buffer-local'.

1998-06-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (set-auto-coding): Argument is changed to SIZE.
	Now finds the text to be scanned in the current buffer.

1998-06-11  Rob Riepel  <riepel@Zathras.Stanford.EDU>

	* tpu-edt.el (tpu-include) Use insert-file-contents, remove
	save-excursion.

1998-06-11  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* help.el (describe-key, describe-key-briefly):
	Don't discard up event after down event.

	* emacs-lisp/find-func.el (find-function-on-key):
	Don't discard up event after down event.

1998-06-11  Felix Lee  <flee@cygnus.com>

	* gud.el (gud-filter): Extend scope of binding of
	gud-filter-defer-flag.

1998-06-11  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* jka-compr.el (jka-compr-insert-file-contents): Don't run
	after-insert-file-functions, since caller does that.

	* midnight.el: New file.

1998-06-11  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* dired.el (dired-readin): Insert headerline only if necessary.
	(Not in recursive listings.)

	* vc.el (vc-dired-recurse, vc-dired-terse-display): New user options.
	(vc-next-action-dired): Cleanup.  Let vc-dired-terse-mode be nil here,
	so that checked-in files don't vanish.
	(vc-dired-toggle-terse-mode): New function.
	(vc-dired-hook): Don't show "." and "..".  Handle terse mode.
	(vc-dired-purge): New function.
	(vc-directory): Handle vc-dired-recurse.

1998-06-11  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail-toggle-header): Fix previous change.

1998-06-10  Dave Love  <fx@gnu.org>

	* mail/metamail.el (metamail-region): Don't use concat with
	numeric arg.

	* browse-url.el: Don't require dired when compiling.
	(browse-url-lynx-input-delay, browse-url-lynx-input-attempts):
	Remove customization.
	(browse-url-grail): Respect new-window arg (Barry Warsaw).

1998-06-10  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* progmodes/cc-langs.el (c-mode-menu): Use (mark t), not (mark),
	in enable-expressions.

	* wid-edit.el (other): New widget type.

	* emacs-lisp/eval-reg.el (elisp-eval-region):
	Accept new arg read-function; also handle load-read-function.

1998-06-10  Andrew Innes  <andrewi@harlequin.co.uk>

	* startup.el (command-line): Set `temporary-file-directory' based
	on environment settings, before processing init files.

1998-06-10  Alan Shutko  <ats@acm.org>

	* bindings.el (ctl-x-map): Change vi-dot binding to repeat.

1998-06-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-specify-secret): New function.
	(widget-after-change): Use it.
	(widget-specify-field): Use it.

1998-06-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/lisp-mode.el (eval-defun): Pass read function to
	eval-region as arg, instead of binding load-read-function.

	* files.el (find-file-noselect): Use find-file-noselect-1
	after "Save file and revisit literally? ".

	* help.el (help-make-xrefs): When scanning keymap binding listings,
	scan from the very beginning.
	(help-follow-mouse): Avoid save-excursion, so can set point properly.

	* mail/uce.el: Several fixes in doc string style.
	(uce-mail-reader): Use defcustom.

1998-06-09  Ed Reingold  <reingold@cs.uiuc.edu>

	* calendar/cal-tex.el (cal-tex-list-diary-entries): Set
	diary-display-hook correctly.

	* calendar/cal-menu.el (calendar-mouse-holidays)
	(calendar-mouse-view-diary-entries)
	(calendar-mouse-view-other-diary-entries): Rewritten to put results
	in popup menu to be consistent with other functions.

	* calendar/diary-lib.el (view-other-diary-entries): Don't override
	default value of diary-file.

1998-06-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/sendmail.el (mail-header-end): Widen.
	(mail-text-start): Widen.

	* progmodes/cperl-mode.el (pod2man-program): Var reinstalled.
	(cperl-pod-to-manpage, cperl-pod2man-build-command): Fns reinstalled.

1998-06-09  stanislav shalunov  <shalunov@mccme.ru>

	* mail/uce.el (uce-message-text):
	Change the text of message that is sent.

	* mail/uce.el (uce-reply-to-uce): Do not assume all Received lines
	are on top of message without headers like `From' or `To'.

	* mail/uce.el (uce-reply-to-uce): Parse Received lines better.

	* mail/uce.el (uce-mail-reader): New user option.
	(uce-reply-to uce): Add support for Gnus.  User is supposed to set
	uce-mail-reader to `gnus' if using Gnus to read mail.  The default
	is to assume Rmail.  There's no magic to determine what mail
	reader is currently active, so it is not possible to mix using
	uce.el with Rmail and Gnus.

1998-06-08  Dan Nicolaescu  <done@ece.arizona.edu>

	* generic.el (generic-mode-with-type): Set major-mode to be the
	actual mode, not generic-mode.

1998-06-08  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* apropos.el (apropos-print): The cross ref for a variable
	should always do just describe-variable.

	* ange-ftp.el (ange-ftp-expand-dir): Use null-device.

	* progmodes/compile.el (grep-null-device): Variable deleted.
	(grep-command, grep-find-use-xargs): Use null-device.
	(grep, grep-find): Use null-device.

	* files.el (null-device): New variable.

	* progmodes/cperl-mode.el (Man-filter-list): Unused variable deleted.
	(cperl-perldoc, cperl-perldoc-at-point): Functions reinstalled.

1998-06-08  Andrew Innes  <andrewi@harlequin.co.uk>

	* ange-ftp.el (ange-ftp-file-name-completion): Use
	ange-ftp-this-dir instead of literal "/" when calling real
	completion function.

1998-06-08  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/texnfo-upd.el (texinfo-insert-master-menu-list):
	Insert \n after @detailmenu.

1998-06-07  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* progmodes/cperl-mode.el (cperl-problems): Doc fix.

	* progmodes/cperl-mode.el (cperl-pod-to-manpage): Function deleted.
	(cperl-pod2man-build-command, cperl-perldoc-at-point): Likewise.
	(cperl-perldoc): Likewise.
	(pod2man-program): Variable deleted.

	* repeat.el: Renamed from vi-dot.el.
	All functions and variables renamed.
	(repeat-last-kill-command): Variable deleted;
	use real-last-command instead.
	(kill-region): Advice definition deleted.
	(universal-argument-more, universal-argument-other-key)
	(typematic-universal-argument-more-or-less): Advice deleted.
	(repeat-prefix-arg): Variable deleted.
	(repeat-num-input-keys-at-prefix): Variable deleted.
	(repeat): Use last-prefix-arg.

1998-06-07  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-require-match, iswitchb-temp-buflist)
	(iswitchb-bufs-in-frame): Variables declared with defvar to quieten
	the byte compiler.

1998-06-06  Andrew Innes  <andrewi@harlequin.co.uk>

	* ange-ftp.el (ange-ftp-file-name-completion): Do hostname
	completion in root directory of all drives on Windows.
	(ange-ftp-file-name-all-completions): Fix regexp for detecting
	root directory on drives.

	(file-name-handler-alist): Remove the autoload tag from the
	top-level form which changes file-name-handler-alist to support
	Windows hostname completion.

1998-06-06  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* gnus/message.el (message-mode): Set paragraph-start and
	paragraph-separate as in mail-mode.

	* mail/sendmail.el (mail-mode): Include `-- ' and `---+' in
	paragraph-start and paragraph-separate.

	* progmodes/fortran.el (fortran-electric-line-number):
	Add delete-selection property.

	* simple.el (comment-region): Check for enough chars to delete
	in the numarg != t case as in the numarg = t case.

1998-06-06  Dan Nicolaescu  <done@ece.arizona.edu>

	* emacs-lisp/autoload.el (make-autoload): Add support for
	`define-generic-mode' and `easy-mmode-define-minor-mode' and
	update the doc string accordingly.

1998-06-06  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail): Prevent find-file from calling
	rmail-mode for a new buffer.  Do it later, instead.

	* rect.el (string-rectangle-line): Delete the rectangle first.
	(string-rectangle): Doc fix.

	* files.el (find-file-noselect-1): New function.
	(find-file-noselect): If want to visit literally and buffer is
	visited the ordinary way, or vice versa, ask user whether
	to re-visit, or save and revisit.  Use find-file-noselect-1.

1998-06-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Fix spooled file bugs.
	(ps-print-version): New version number (3.06.3) and doc fix.
	(ps-page-postscript): New var.
	(ps-begin-file): Initialize PostScript page number,
	eliminate total page and line number.
	(ps-begin-job): Eliminate PostScript Trailer section on spooled buffer,
	initialize total page and line number.
	(ps-end-file): Use PostScript page number.
	(ps-header-page): Adjust header page.
	(ps-generate): Adjust page and line count setting.
	(ps-do-despool): Eliminate PostScript Trailer section setting.

1998-06-05  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* man.el (Man-kill, Man-quit): Use quit-window.

	* ps-print.el (ps-generate): Call set-buffer-multibyte.

	* textmodes/fill.el (fill-paragraph):
	Bind fill-paragraph-function to nil, if it doesn't do the job.

1998-06-05  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/cal-menu.el (cal-menu-update): Fix menu separators.

1998-06-05  Andrew Innes  <andrewi@harlequin.co.uk>

	* jka-compr.el (jka-compr-write-region): Ensure
	`last-coding-system-used' is updated, so that basic-save-buffer
	sees the right value.

1998-06-05  Richard Stallman  <rms@gnu.org>

	* loadup.el: Clean up mechanism for removing -l loadup from end.

1998-06-05  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* dired.el (dired-internal-noselect): Call either dired-mode
	or MODE, but not both.

	* vc.el (vc-directory): Bind vc-dired-switches in order to
	pass switches to vc-dired-mode.
	(vc-dired-mode): Check for vc-dired-switches.

1998-06-04  Dan Nicolaescu  <done@ece.arizona.edu>

	* rsz-mini.el (resize-minibuffer-mode):
	* iswitchb.el (iswitchb-read-buffer): Add autoload cookie.

1998-06-03  Kevin Rodgers  <kevinr@ihs.com>  (tiny change)

	* replace.el (esc-map): Bind C-M-% to query-replace-regexp.

1998-06-03  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (customize-group-other-window): Fix previous change.

	* international/mule-diag.el (list-character-sets-1): New subroutine.
	(list-character-sets): Use it.
	(list-coding-systems-1): New subroutine.
	(list-coding-systems): Use it.
	(list-input-methods-1): New subroutine.
	(list-input-methods): Use it.
	(mule-diag): Avoid method of displaying text in *Help* then copying it.
	Instead, insert it directly into *Mule-Diagnosis*.
	Use list-character-sets-1, list-coding-systems-1, list-input-methods-1.
	Copy the code from list-fontsets and list-coding-categories.
	Improve the display buffer's header.

	* files.el (toggle-read-only): When exiting View mode, locally
	set view-read-only to t so another toggle will re-enable View mode.

	* view.el (View-exit-and-edit): Bind view-no-disable-on-exit to nil.

1998-06-03  Michael Ernst  <mernst@alum.mit.edu>

	* mail/rmailsum.el (rmail-summary-rmail-update): Set message
	unseen only if `rmail-summary-put-back-unseen' is non-nil.

	* mail/rmail.el (rmail-toggle-header): Redo previous change;
	don't move point if possible.
	(rmail-count-screen-lines): Add.

1998-06-03  Per Starb√§ck  <starback@update.uu.se>

	* emacs-lisp/bytecomp.el (byte-compile-lambda): Fix previous
	change.

1998-06-03  Dan Nicolaescu  <done@ece.arizona.edu>

	* locate.el (locate, locate-with-filter):
	* generic.el (define-generic-mode): Correct typo in autoload
	cookie that prevented appropriate autoloads to be generated.

1998-06-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-dired-hook): Kill excluded directories recursively.

1998-06-03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/find-func.el (find-function-noselect): Don't call
	format twice with the error message.  Quote the function name
	before splicing into regexp.

1998-06-02  Dave Love  <fx@gnu.org>

	* docref.el: Deleted in view of current approach to doc strings.

	* startup.el (normal-top-level-add-subdirs-to-load-path): Ignore
	CVS directories too.

1998-06-02  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (customize-group, customize-group-other-window)
	(custom-buffer-create, custom-buffer-create-other-window)
	(customize-browse): Use pop-to-buffer.
	(same-window-regexps): Add autoload to add regexp to match custom bfrs.

	* info.el (Info-exit): Use quit-window.

	* mail/rmail.el (rmail-toggle-header): Preserve point
	and window-start (more or less) when reverting to original header.

1998-06-01  Richard Stallman  <rms@gnu.org>

	* window.el (shrink-window-if-larger-than-buffer):
	Switch to the specified window and its buffer at the outset.
	(count-windows): Doc fix.

	* help.el (help-setup-xref): Change all callers to
	use (function args...) instead of (function . arg).  Doc fix.
	(help-follow): Put (point) at front of elts of help-xref-stack.
	(help-xref-stack): Elt format now (POSITION FUNCTION ARGS).
	(help-xref-stack-item): Doc fix.
	(help-xref-go-back): Assume new format for help-xref-stack.
	(help-follow): Look for prop on previous char if next char has none.
	Avoid error at beginning or end of buffer.
	(describe-bindings): New optional arg BUFFER.
	Use help-setup-xref.

	* simple.el (event-apply-alt-modifier, etc): Doc fixes.

1998-06-01  Andrew Innes  <andrewi@harlequin.co.uk>

	* arc-mode.el (archive-extract): Fix handling of 'view option.

1998-06-01  Per Starb√§ck  <starback@update.uu.se>

	* apropos.el (apropos-variable): Fixed argument to apropos-command.
	(apropos-command): Let `var-predicate' have higher priority than
	`do-all'.

1998-06-01  Dave Love  <fx@gnu.org>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1): Add -. as
	NMCHARs.  Elide upper case (see font-lock-defaults).  Generalize
	comment declaration not to exclude markup.

1998-05-31  Richard Stallman  <rms@gnu.org>

	* which-func.el (which-func-ff-hook): If imenu gets error,
	clear which-func-mode.

	* progmodes/compile.el (grep): Fix previous change.

	* international/mule-diag.el: Many doc fixes.

	* tar-mode.el (tar-extract): Pass HIGHEST=t to detect-coding-region.

	* simple.el (keyboard-quit): Doc fix.

	* textmodes/two-column.el: Bind f2 and C-x 6 prefixes
	only via an autoload, not when this file is loaded.

	* international/mule.el (coding-system-mnemonic):
	Don't crash if arg is nil.

1998-05-31  Alan Shutko  <shutkoa@ugsolutions.com>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-minor-mode): Add
	missing format arg.

1998-05-30  Dave Love  <fx@gnu.org>

	* finder.el (finder-known-keywords): Fix `convenience' entry.

1998-05-30  Richard Stallman  <rms@gnu.org>

	* textmodes/tex-mode.el: Undo May 15 change.

	* international/mule-diag.el (mule-diag): Don't call help-mode.
	Instead, call print-help-return-message.

	* ffap.el (ffap-bindings): Fix the dired-at-point binding.

1998-05-30  Sam Steingold  <sds@usa.net>

	* compile.el (compilation-scroll-output): Correct the :version
	keyword to be a string.

1998-05-30  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-mult.el (ediff-mark-for-hiding-at-pos)
	(ediff-mark-for-operation-at-pos): Renamed from
	ediff-mark-for-hiding, ediff-mark-for-operation.
	(ediff-mark-session-for-hiding, ediff-mark-session-for-operation)
	(ediff-unmark-all-for-operation, ediff-unmark-all-for-hiding): New
	functions.
	(ediff-setup-meta-map): Changed bindings.

	* viper-cmd.el (viper-backward-Word, viper-skip-separators): Bugfix.
	(viper-switch-to-buffer, viper-switch-to-buffer-other-window): Bugfix.
	* viper-util.el (viper-skip-syntax): Bug fix for eob/bob cases.
	* viper-mous.el (viper-surrounding-word): Added '_' to alpha modifiers.

1998-05-30  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* info-look.el: Added support for Scheme.
	Removed Info-lookup minor mode.
	(info-lookup-file-name-alist): New variable.
	(info-lookup-select-mode): New function.  Select help mode
	according to info-lookup-file-name-alist or fall back to the
	buffer's major mode.
	(info-lookup): Use info-lookup-select-mode.
	(info-lookup-interactive-arguments): Likewise.
	(info-complete-symbol): Likewise.
	(info-complete-file): Likewise.
	(info-complete): Likewise.

1998-05-28  Andrew Innes  <andrewi@harlequin.co.uk>

	* ange-ftp.el (ange-ftp-expand-file-name): Set default to
	default-directory if nil.  Check whether default starts with a
	drive specifier on windows-nt, as well as name, and call real
	function if so.  Remove code to strip prefix before // or /~ since
	`expand-file-name' itself no longer does that.
	(ange-ftp-expand-dir): Use `grep-null-device' instead of
	"/dev/null", which is incorrect on windows-nt.
	(ange-ftp-file-name-all-completions): Fix root directory regexp
	for windows-nt.
	(ange-ftp-start-process): On windows-nt, always send a "help foo"
	command to ensure the ftp process produces some output, and force
	the process to use raw-text-dos decoding.
	(ange-ftp-canonize-filename): On windows-nt, strip drive specifier
	from expanded remote name.
	(ange-ftp-write-region): Allow binary transfer on windows-nt if
	remote host type is unix.  Ensure `last-coding-system-used' is
	given an appropriate value, so that basic-save-buffer isn't
	confused by the coding used with the ftp process.
	(ange-ftp-insert-file-contents): Ditto.
	(ange-ftp-copy-file-internal): Ditto.
	(ange-ftp-real-expand-file-name): Use standard definition on
	windows-nt.
	(ange-ftp-real-expand-file-name-actual): Remove obsolete function.
	(ange-ftp-disable-netrc-security-check): Make default value be t
	on windows-nt.

	Remove windows-nt entry on file-name-handler-alist for
	ange-ftp-hook-function, since ange-ftp remote names do not start
	with a drive specifier.  Keep ange-ftp-completion-hook-function
	entry to allow hostname completion when completing in the root
	directory of a drive.

1998-05-28  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* ange-ftp.el (ange-ftp-start-process): Undo previous change.

	* mail/sendmail.el (mail-from-style):
	New alternative, `system-default'.

1998-05-27  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/sendmail.el (sendmail-send-it):
	If mail-from-style isn't angles, parens or nil, don't use -f option.

1998-05-27  Ed Reingold  <reingold@cs.uiuc.edu>

	* calendar/calendar.el (calendar-buffer-list): Add
	other-calendars-buffer.
	(calendar-mode): Use activate-menubar-hook only in a window system.

1998-05-27  Dave Love  <fx@gnu.org>

	* info-look.el: Add an entry for Scheme mode.

1998-05-27  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* comint.el (comint-mode-map): Move bindings of
	comint-next-matching-input-from-input to C-c M-r, and
	comint-previous-matching-input-from-input to C-c M-s.
	Move comint-get-next-from-history to C-c C-x.

	* mail/rmailout.el (rmail-output-to-rmail-file):
	Specify the coding system for writing.

1998-05-27  Ed Reingold  <reingold@cs.uiuc.edu>

	* calendar/calendar.el (calendar-print-other-dates): New function.
	* calendar/calendar.el (calendar-mode-map): Put it on a key.
	* calendar/calendar.el (other-calendars-buffer): New constant.
	* calendar/cal-x.el (special-display-buffer-names): Add to special
	list.

1998-05-27  Dave Love  <fx@gnu.org>

	* imenu.el (imenu-syntax-alist): Doc fix.

1998-05-26  Dan Nicolaescu  <done@ece.arizona.edu>

	* ffap.el: Add convenience keyword and add the toplevel defgroup
	to the convenience group.
	* emulation/pc-select.el:
	* follow.el:
	* imenu.el:
	* hippie-exp.el:
	* speedbar.el:
	* filecache.el:
	* iswitchb.el:
	* dabbrev.el:
	* completion.el:
	* complete.el:
	* autorevert.el:
	* autoinsert.el:
	* abbrev.el: Likewise.

1998-05-26  Emilio Lopes  <Emilio.Lopes@Physik.TU-Muenchen.DE>
            Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Changes so bookmark list mode works with Info:
	(bookmark-jump-noselect): Use an inner save-window-excursion.
	(bookmark-bmenu-switch-other-window): Temporarily set
	pop-up-windows, same-window-buffer-names, and same-window-regexps,
	to override Info's special display behaviors.

1998-05-26  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/autoload.el (make-autoload): Doc fix.

1998-05-25  Dave Love  <fx@gnu.org>

	* f90.el (f90-comment-indent): Don't attempt to indent trailing
	comment as code.
	(f90-looking-at-if-then): Don't lose with scan-lists on bad
	syntax.

1998-05-25  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/lisp-mode.el (eval-defun): Pass proper beg to eval-region.

	* faces.el (frame-update-face-colors): Call frame-set-background-mode.

	* frame.el (make-frame-on-display): Check for nonsense display name.

	* mail/rmailedit.el (rmail-old-pruned): New permanent local.
	(rmail-edit-current-message): Set rmail-old-pruned,
	then display full headers.
	(rmail-cease-edit): rmail-old-pruned controls whether to prune headers.

1998-05-25  Dan Nicolaescu  <done@ece.arizona.edu>

	* emacs-lisp/autoload.el (make-autoload): Add support for
	define-derived-mode.  Update the doc-string accordingly.

	* zone-mode.el (zone-mode): Don't require zone-mode.
	Use make-local-hook on a hook, not make-variable-buffer-local.

1998-05-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/byte-opt.el (byte-boolean-vars):
	Add print-escape-nonascii.

	* emacs-lisp/autoload.el (generate-file-autoloads): Set
	print-escape-nonascii when printing autoload form.

1998-05-25  Kenichi HANDA  <handa@etl.go.jp>

	* international/mule.el (set-coding-priority): Call
	set-coding-priority-internal at the tail.

1998-05-24  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* help.el (describe-variable): Add a button to call
	customize-variable if the variable can be customized.

1998-05-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail-msg-is-pruned): Delete junk in definition.

	* apropos.el (apropos-command): Change 3rd arg to VAR-PREDICATE
	and use it as a predicate for which variables to match.
	(apropos-variable): Use that feature to match all documented vars,
	if have prefix arg.
	(apropos-command): If DO-ALL is set, search functions, not variables.

	* loadup.el (loaddefs.el): Load it earlier, and GC before and after
	and a few more times later on.

	* comint.el (comint-get-next-from-history): New command.
	(comint-accumulate, comint-goto-process-mark): Likewise.
	(comint-set-process-mark, comint-bol-or-process-mark): Likewise.
	(comint-save-input-ring-index): New permanent local var.
	(comint-accum-marker): Likewise.
	(comint-send-input): Clear comint-input-ring-index
	and comint-accum-marker.
	(comint-previous-matching-input-from-input):
	Use comint-accum-marker if set.
	(comint-previous-matching-input): Likewise.
	(comint-mode): Make those vars buffer-local and initialize.
	(comint-mode-map): Make C-c C-a run comint-bol-or-process-mark.
	Bind C-c SPC to comint-accumulate.  Bind C-c C-q to
	comint-get-next-from-history.

	* window.el (split-window-vertically): Doc fix.

	* ffap.el (dired-at-point): Eliminate var dired-function; use `dired'.
	(ffap-bindings): Include a binding for C-x d.

	* gud.el (gud-jdb-class-source-alist): defvar moved up.
	(gud-jdb-analysis-buffer): Likewise.

	* rect.el (string-rectangle-string): New variable.
	(string-rectangle): Bind it.
	(string-rectangle-line): Use it.
	(operate-on-rectangle-lines): New variable.
	(extract-rectangle-line): Update it.
	(delete-extract-rectangle, extract-rectangle): Bind and use it.

	* emacs-lisp/cl-indent.el (common-lisp-indent-function):
	Bind lisp-indent-error-function.
	(lisp-indent-report-bad-format): Use lisp-indent-error-function.
	(lisp-indent-error-function): New variable.

	* play/solitaire.el (solitaire-possible-move):
	Use funcall to invoke movesymbol.

	* uncompress.el (find-compressed-version): Don't set `error' here.

1998-05-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* man.el (Man-getpage-in-background): Bind coding-system-for-write
	to raw-text-unix instead of binding inhibit-eol-conversion to t.

1998-05-23  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* dos-w32.el (minibuffer-history-case-insensitive-variables):
	Add file-name-history to it.

	* simple.el (minibuffer-history-case-insensitive-variables): New var.
	(previous-matching-history-element): Implement it.

	* progmodes/compile.el (grep-tag-default): New function.
	(grep): New default arg when prefix arg is specified.

	* menu-bar.el (toggle-case-fold-search): New command.
	(menu-bar-options-menu): Put that in the menu.

	* dired.el (dired-mark-files-containing-regexp): New command.
	(dired-mode-map): Bind it to %g and in menu bar.

	* rect.el (close-rectangle): New command.

1998-05-23  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (register-input-method):
	Rename arg ENV to LANG-ENV.

1998-05-22  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el (ps-print-version): Doc fix.
	(ps-print-prologue-1): Adjust doLineNumber PostScript function.

1998-05-22  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* jka-compr.el (jka-compr-compression-info-list): Add elts for bzip.

	* uncompress.el (uncompress-while-visiting): Leave point at beginning.

	* find-file.el (ff-emacs-19, ff-xemacs): Functions deleted.
	(ff-goto-click, ff-mouse-find-other-file)
	(ff-mouse-find-other-file-other-window): Just one definition.
	(locate-file): Definition deleted.

	* international/mule.el (make-translation-table): Doc fix.
	(define-translation-table): Doc fix.

1998-05-22  Inge Frick  <inge@nada.kth.se>

	* easymenu.el (easy-menu-do-add-item): Small simplifications.
	(easy-menu-precalculate-equivalent-keybindings): New customization
	variable.
	(easy-menu-add): Precalculate key bindings if
	`easy-menu-precalculate-equivalent-keybindings' is on.

1998-05-22  Kenichi Handa  <handa@etl.go.jp>

	* ccl.el: Change term "character translation table" to
	"translation table".
	* mule.el: Likewise.
	Use translation-table, not character-translation-table,
	as char-table subtype.
	(define-translation-table):
	Renamed from define-character-translation-table.
	* mule-util.el: Likewise.
	* mule-conf.el: Likewise.
	(standard-translation-table-for-decode)
	(standard-translation-table-for-encode):
	Renamed from standard-character-translation-table-...

1998-05-21  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1):
	Accept upper case like lower case.

	* files.el (insert-directory): When WILDCARD is nil,
	expand ~ if necessary.

	* mail/rnewspost.el (news-inews): Fix typo in prev change.

1998-05-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* tar-mode.el (tar-mode): Position point on the name of the first file.
	(tar-extract): Detect coding-system of the archive member and
	decode it like insert-file-contents does.
	(tar-alter-one-field): Reposition point on the file name of the
	current tar entry.
	(tar-subfile-save-buffer): Encode the file when updating it in the
	archive, and use the size of encoded text to update the header
	block.  Set last-coding-system-used to coding-system of the file.
	Restore point of tar-superior-buffer after updating the descriptor
	line.

1998-05-21  Sam Steingold  <sds@usa.net>

	* cl-indent.el: Indent `with-standard-io-syntax' correctly.

1998-05-21  Michael Ernst  <ernst@cs.washington.edu>

	* dired-x.el (dired-guess-shell-alist-default): Handle .tgz files.
	Handle .pdf files.

1998-05-21  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* arc-mode.el (archive-file-name-invalid-regexp): Remove.  All
	users changed to use file-name-invalid-regexp instead.
	* files.el (file-name-invalid-regexp): New variable, moved here
	from arc-mode.el.

1998-05-21  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* progmodes/vhdl-mode.el (vhdl-customize-colors):
	Renamed from vhdl-use-default-colors, and sense reversed.
	(vhdl-customize-faces):
	Renamed from vhdl-use-default-faces, and sense reversed.
	(vhdl-font-lock-init, vhdl-ps-init): Implement those changes.
	(vhdl-submit-bug-report): Use new variable names.

1998-05-20  Kenichi Handa  <handa@etl.go.jp>

	* term/x-win.el: Generate style variants fontset for
	standard-fontset-spec.  Generate a fontset based on resolved font
	name of a font specified by X resource or -fn command line arg.

	* international/fontset.el (x-font-name-charset-alist): New var.
	(register-alternate-fontnames): Doc-string modified.
	(x-complement-fontset-spec): Likewise.
	(x-complement-fontset-spec): Delete unused local variable.  Delete
	ad hoc code for Latin-1, instead refer to x-font-name-charset-alist.
	(uninstantiated-fontset-alist): Format changed (BASE-FONTSET ->
	FONTLIST).
	(x-style-funcs-alist): New variable.
	(create-fontset-from-fontset-spec): 2nd optional arg is changed
	from STYLE to STYLE-VARIANT-P.  The meaning also changed.  Delete
	unused code.  Adjusted for the change of
	uninstantiated-fontset-alist.
	(instantiate-fontset): Adjusted for the change of
	uninstantiated-fontset-alist.

	* international/mule.el (make-coding-system): If ISO2022 based
	8-bit coding system allows alternative designation, set the coding
	category to `coding-category-iso-8-else'.

1998-05-20  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail-default-body-file): New variable.

	* mail/rmailsum.el (rmail-summary-output-body): New function.
	(rmail-summary-mode-map): Bind w to that.  Put it in menu bar.
	Bind q to rmail-summary-wipe.

	* mail/rmailout.el (rmail-output-body-to-file):
	Avoid error if message has no subject.
	Use and set rmail-default-body-file.

	* gud.el (gud): Doc fix.

	* textmodes/fill.el (fill-region-as-paragraph):
	Don't add a newline at the end, when there is none.

1998-05-20  Michael Ernst  <ernst@cs.washington.edu>

	* play/solitaire.el (solitaire): Doc fix.

	* gud.el: Support pdb.
	(pdb): New function.
	(gud-pdb-command-name): New variable.
	(pdb-minibuffer-local-map): Likewise.
	(gud-pdb-find-file): New function.
	(gud-pdb-marker-filter): New function.
	(gud-pdb-marker-regexp*): New variables.
	(gud-pdb-massage-args): New function.
	(gud-pdb-history): New variable.

	* simple.el (set-variable): Offer variable at point as default.

1998-05-20  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (x-font-name-charset-alist): New
	variable.
	(register-alternate-fontnames): Doc-string modified.
	(x-complement-fontset-spec): Likewise.
	(x-complement-fontset-spec): Delete unused local variable.  Delete
	ad hoc code for Latin-1, instead refer to
	x-font-name-charset-alist.
	(uninstantiated-fontset-alist): Format changed (BASE-FONTSET ->
	FONTLIST).
	(x-style-funcs-alist): New variable.
	(create-fontset-from-fontset-spec): 2nd optional arg is changed
	from STYLE to STYLE-VARIANT-P.  The meaning also changed.  Delete
	unused code.  Adjusted for the change of
	uninstantiated-fontset-alist.
	(instantiate-fontset): Adjusted for the change of
	uninstantiated-fontset-alist.

	* international/mule.el (make-coding-system): If ISO2022 based
	8-bit coding system allows alternative designation, set the coding
	category to `coding-category-iso-8-else'.

	* term/x-win.el: Generate style variants fontset for
	standard-fontset-spec.  Generate a fontset based on resolved font
	name of a font specified by X resource or -fn command line arg.

1998-05-20  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (set-language-info):
	Delete args describe-map and setup-map.  Don't set up menus at all.
	(set-language-info-alist): Set up menus here.
	(register-input-method): Fix previous change.
	(setup-specified-language-environment): Doc fix.

	* gud.el (gud-perldb-marker-acc): Variable deleted.
	(gud defgroup): Doc fix.

	* mail/rmail.el (mail-unsent-separator):
	Handle "returned message follows".

1998-05-19  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el: Several doc fixes.
	(get-language-info, set-language-info): Rename argument.
	(set-language-info-alist): Likewise.
	(find-coding-systems-region-subset-p): Renamed from subset-p.
	(find-coding-systems-region): Use new name.
	(register-input-method): Rename argument.
	(activate-input-method): If INPUT-METHOD is nil, deactivate.

1998-05-19  Ed Reingold  <reingold@uiuc.edu>

	* calendar/cal-tex.el (cal-tex-list-holidays): Rewritten.

1998-05-19  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* gnus/message.el (message-mode): Locally bind adaptive-fill-regexp
	and adaptive-fill-first-line-regexp.

	* simple.el (kill-region): Set this-command unconditionally
	in a read-only buffer.

	* custom.el (defcustom): Doc fix.

	* uniquify.el (uniquify-ignore-buffers-re): New variable.
	(uniquify-rationalize-file-buffer-names): Implement it.

1998-05-18  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/checkdoc.el: Many doc fixes.
	Put two spaces between sentences.
	(checkdoc-this-string-valid-engine): Fix message.
	(checkdoc-ispell-lisp-words): Add "emacs".

	* emacs-lisp/bytecomp.el (byte-compile-insert-header):
	Do not look for multibyte characters here.
	Generate the right file header for use if there are none.
	Insert a line of semicolons for subsequent deletion if needed.
	(byte-compile-fix-header): New function.
	This updates the file header if the file uses multibyte characters.
	(byte-compile-from-buffer): Call byte-compile-insert-header
	before compiling, and byte-compile-fix-header at the end.

	* which-func.el (which-func-modes): Fix custom type.
	(which-func-non-auto-modes): Likewise.

	* mail/rmail.el (rmail-mime-feature): Doc fix.

	* vi-dot.el: Customized.
	(vi-self-insert): New function.
	(vi-dot): Use that.
	(vi-dot-insertion-function): Variable deleted.

	* finder.el (finder-known-keywords): Add `convenience'.

1998-05-18  Michael Ernst  <mernst@alum.mit.edu>

	* mail/rmail.el (rmail-toggle-header): Ensure blank line between
	headers and body.

1998-05-17  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/fontset.el (create-fontset-from-fontset-spec):
	Add autoload cookie.

1998-05-18  Kenichi HANDA  <handa@etl.go.jp>

	* international/ccl.el: Change term translate-XXX-map to map-XXX
	throughout the file.  Change terms unify/unification to
	translate/translation respectively throughtout the file.

	* international/quail.el (quail-completion): Consecutive call of
	this command scrolls the Quail completion buffer.

	* international/mule.el: Change term unification to translation
	throughtout the file.
	(set-clipboard-coding-system): New function.

	* international/mule-conf.el: Change term unification to
	translation throughtout the file.

	* international/mule-util.el: Change term unification to
	translation throughtout the file.

1998-05-17  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/debug.el (debugger-frame-clear): Doc fix.

1998-05-17  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-parse-cvs-status): Grok new form of conflict
	message.

1998-05-17  Eric Ludlam  <zappo@mescaline.gnu.org>

	* emacs-lisp/checkdoc.el: Added message text checks, and
	ambiguous symbol checking.
	(checkdoc-message-text): New command.
	(checkdoc-message-text-search, checkdoc-message-text-engine):
	New functions.
	(checkdoc-this-string-valid-engine):
	Added ambiguous function/symbol checking.  Added new auto-fix
	for missing parameters.

1998-05-16  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* international/mule-cmds.el (find-coding-systems-region-subset-p):
	Renamed from subset-p.
	(find-coding-systems-for-charsets): Call changed.

1998-05-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* generic-x.el (generic-x): Add :version.

	* progmodes/hideshow.el (hs-life-goes-on): Use the new backquote
	syntax.

1998-05-16  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/rmail.el (rmail-retry-failure):
	Use mail-sendmail-delimit-header, not mail-send-delimit-header.

	* faces.el (frame-background-mode): Define a :set function
	to update the background mode of existing frames.

	* ange-ftp.el (ange-ftp-tmp-name-template):
	Use temporary-file-directory.
	* arc-mode.el (archive-tmpdir): Use temporary-file-directory.
	* browse-url.el (browse-url-temp-dir): Use temporary-file-directory.
	* ediff-init.el (ediff-temp-file-prefix): Use temporary-file-directory.
	* emerge.el (emerge-temp-file-prefix): Use temporary-file-directory.
	* jka-compr.el (jka-compr-temp-name-template):
	Use temporary-file-directory.
	* progmodes/cmacexp.el (c-macro-expansion):
	Use temporary-file-directory.  Choose temp file name properly.
	* vc.el (vc-update-change-log): Use temporary-file-directory.
	Use expand-file-name on it.

	* files.el (temporary-file-directory):
	Renamed from system-tmp-directory.
	Value is now a directory name, not a file name.

	* dired-aux.el (dired-mark-subdir-files): Doc fix.

1998-05-15  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* ps-print.el (ps-file-end): Put Trailer and Pages before EndDoc.
	(ps-print-control-characters): Doc fix.

	* textmodes/tex-mode.el (tex-command-end): New variable.
	(tex-start-tex): Use it.
	(plain-tex-mode): Locally set tex-command-end.
	(tex-common-initialization): Make local binding for it.

	* ange-ftp.el (ange-ftp-start-process): Handle Windows ftp client.

	* language/european.el (setup-8-bit-environment):
	After loading latin-N, reset the standard case table
	and each buffer's case table.

	* emacs-lisp/byte-opt.el (byte-decompile-bytecode-1):
	Cope with an out-of-range constvec index.

	* dos-fns.el (dos-ps-printer, dos-printer, msdos-shells):
	Defcustoms replaced with defvars.
	(dos-fns): defgroup deleted.
	* dos-vars.el: New file, holds custom stuff from dos-fns.el.
	* loadup.el: Load dos-vars along with dos-fns.

	* type-break.el (type-break-mode): Don't alter global-mode-string.
	Instead, add an element to minor-mode-alist.

	* cus-edit.el (convenience): New group.

	* info.el (Info-find-node): Use info-file-exists-p.
	(info-insert-file-contents): Use info-file-exists-p.
	(info-file-exists-p): New function.

1998-05-15  Geoff Voelker  <voelker@cs.washington.edu>

	* files.el (system-tmp-directory): New variable.

	* ange-ftp.el (ange-ftp-tmp-name-template): Use system-tmp-directory.
	* arc-mode.el (archive-tmpdir): Use system-tmp-directory.
	* browse-url.el (browse-url-temp-dir): Use system-tmp-directory.
	* ediff-init.el (ediff-temp-file-prefix): Use system-tmp-directory.
	* emerge.el (emerge-temp-file-prefix): Use system-tmp-directory.
	* jka-compr.el (jka-compr-temp-name-template): Use system-tmp-directory
	* progmodes/cmacexp.el (c-macro-expansion): Use system-tmp-directory.
	* vc.el (vc-update-change-log): Use system-tmp-directory.

1998-05-15  Francesco Potort√¨  <F.Potorti@cnuce.cnr.it>

	* mail/mailalias.el (define-mail-alias): Compensate for not
	resetting the match data when string-match fails.

1998-05-14  Erik Naggum  <erik@naggum.no>

	* bindings.el: Add binding for C-x z to vi-dot here.
	* vi-dot.el: Remove faulty autoloaded binding for C-x z.

1998-05-14  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/cal-hebrew.el (holiday-passover-etc): Fix misspelling.

1998-05-14  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* arc-mode.el (archive-tmpdir): Make the prefix of the temporary
	directory absolute.
	(archive-file-name-invalid-regexp): New variable.
	(archive-zip-case-fiddle): Doc fix.
	(archive-remote): Make it permanent-local.
	(archive-member-coding-system): New variable.
	(archive-mode): Don't use write-contents-hooks for remote
	archives.  Archives whose names are invalid for the current
	filesystem are marked read-only.
	(archive-summarize): Optional argument SHUT-UP makes it silent.
	All callers changed.
	(archive-unique-fname): New function.
	(archive-maybe-copy): Use it.
	(archive-maybe-copy, archive-write-file): Bind
	coding-system-for-write to no-conversion.
	(archive-maybe-update, archive-mode-revert): Bind
	coding-system-for-read to no-conversion.
	(archive-maybe-update): Remain at the same line in the archive
	listing, after updating the archive.  Print the buffer name of the
	archive to be saved.
	(archive-extract): Mark archive members whose names are invalid as
	read-only.  Don't set buffer-file-type.  Remove the write-contents
	hook for remote archives.  Warn about read-only archives inside
	other archives.
	(archive-write-file-member): Handle remote archives.  Restore
	value of last-coding-system-used.
	(archive-*-write-file-member): Handle archives inside other
	archives.  Save the value of last-coding-system-used.
	(archive-write-file): New optional variable FILE: where to write
	the archive; defaults to buffer-file-name, for remote archives.
	(archive-zip-summarize, archive-zip-chmod-entry): Support VFAT
	type of host filesystem.
	(archive-zip-summarize): Don't fiddle letter case of mixed-case
	file names.

1998-05-14  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/advice.el (ad-handle-definition, defadvice):
	Fix error messages.

	* help.el (describe-key-briefly): When INSERT, put cmd name in `...'.

	* files.el (recover-session-finish): Unmark the current line
	so that the file being used for recovery will not get deleted.

1998-05-13  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* startup.el (locale-translation-file-name): New variable.
	(command-line): Use it to decode locale aliases.

	* emacs-lisp/disass.el (disassemble-1): Reference bytecode string
	as unibyte.

	* format.el (format-alist): Use -f when running recode.

	* emacs-lisp/bytecomp.el (byte-compile-insert-header): Fix prev chg.

	* international/mule.el (set-auto-coding): Exclude \n when
	matching the coding system name.

1998-05-12  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* type-break.el (type-break-mode-line-message-mode): Doc fix.
	Fix some messages.
	(type-break-mode): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-from-buffer):
	Insert the output file header after compiling all the input.
	(byte-compile-output-file-form): Major cleanup.
	If output file contains multibyte chars,
	insist on Emacs 20 when loading.

	* mail/smtpmail.el (smtpmail-via-smtp): Specify process coding system.

1998-05-12  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/cal-menu.el (cal-menu-update): Add separators.

1998-05-11  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* calendar/cal-menu.el (calendar-mode-map): Rename `holidays'
	menu to `Holidays'.
	(cal-menu-update): Similar renamings; change the arg to
	easy-menu-change also.  Change some item names.

	* emacs-lisp/easymenu.el (easy-menu-change): Add autoload cookie.

1998-05-11  Dave Love  <fx@gnu.org>

	* tar-mode.el (tar-subfile-mode): Call auto-save-mode with -1.

1998-05-11  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/calendar.el (calendar-mode): Add hook to update holiday
	button on menu bar.
	(exit-calendar): Don't signal error when user changes mind.

	* calendar/cal-menu.el (calendar-mode-map): Remove static menu
	definition for holidays from menu bar.
	(easymenu): Require it.
	(cal-menu-update): New function.
	(cal-menu-today-holidays): New function.

1998-05-10  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* startup.el (normal-top-level-add-subdirs-to-load-path):
	Ignore subdirectories whose names start with nonalphanumeric
	or that have a file called .nosearch.

	* international/mule-cmds.el (last-coding-system-specified): New var.
	(select-safe-coding-system): Set var if user specifies a coding system.

	* international/mule.el (after-insert-file-set-buffer-file-coding-system):
	Don't make buffer unibyte unless we seem to be visiting a file.

	* mail/rmail.el (rmail-decode-babyl-format):
	Set save-buffer-coding-system instead of buffer-file-coding-system.
	Decode the whole Babyl text at once, not message by message.
	Don't alter global value of rmail-file-coding-system.
	(rmail-show-message): Set buffer-file-coding-system from
	X-Coding-System header field.
	(rmail-ignored-headers): Ignore X-Coding-System header.
	Ignore Return-Path, Errors-To, X-Attribution, X-Disclaimer.
	(rmail-convert-to-babyl-format): Record X-Coding-System header
	for each message that was converted.
	(rmail-variables): Make local binding for save-buffer-coding-system,
	and set it from buffer-file-coding-system if not already non-nil.

	* files.el (save-buffer-coding-system): New variable.
	(basic-save-buffer-1): Obey it.
	(basic-save-buffer): Set save-buffer-coding-system instead of
	buffer-file-coding-system, if save-buffer-coding-system is already
	non-nil.

	* add-log.el (add-log-current-defun): Fix previous change--skip
	tab and newline also.

1998-05-09  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* emacs-lisp/bytecomp.el (byte-compile-output-docform):
	Use position-bytes.

1998-05-09  Richard Stallman  <rms@psilocin.gnu.org>

	* disp-table.el (standard-display-european): Doc fix.

	* mail/sendmail.el (mail-signature): Allow expression as value.
	Improve prompts in custom type.  Add risky-local-variable property.
	(mail-setup): Implement that feature.

	* wid-edit.el (widgets: sexp, variable, list, vector): Doc fixes.

	* mail/mail-utils.el (mail-strip-quoted-names):
	Delete comments, then delete leading/trailing whitespace.

1998-05-08  Richard Stallman  <rms@psilocin.gnu.org>

	* ps-print.el (ps-alist-position): Renamed from ps-position.
	Look for ITEM as the car of an element.
	(ps-font-number): Use ps-alist-position.
	(ps-font-alist): Renamed from ps-font-list.

	* mail/reporter.el (reporter-bug-hook): Use rfc822-goto-eoh.

1998-05-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/autoload.el (generate-file-autoloads): Handle progn
	forms generated by make-autoload: print just the first subform
	with print-escape-newlines.

	* ispell.el (ispell-dictionary-alist-1): Doc fix.
	(ispell-dictionary-alist-2): Doc fix.

	* cus-edit.el (customize-group-other-window): Handle groups not
	yet loaded.  If buffer exists, use it unchanged.  Rename parameter
	and update doc string.

1998-05-07  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/edebug.el (edebug-all-forms): Add autoload cookie.
	(edebug-all-defs): Likewise.

	* ispell.el (ispell-word): Make M-$ binding using esc-map.

	* vc-hooks.el (vc-consult-rcs-headers): Fix previous change.

1998-05-07  Andrew Innes  <andrewi@harlequin.co.uk>

	* disp-table.el (standard-display-european): Don't call
	set-terminal-coding-system when window-system is w32.

1998-05-07  Erik Naggum  <erik@naggum.no>

	* emacs-lisp/find-func.el (find-function-noselect): Autoload it.

1998-05-07  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/sh-script.el (sh-shell-file): Add cmdproxy to MS shells.

	* international/mule-diag.el (list-input-methods): Doc fix.

1998-05-07  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el: Cancel the previous change for
	customization, customized variables are changed to constant.

1998-05-07  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (report-emacs-bug): After reinserting
	the signature, leave point before it.
	Don't display *Bug Help* if report-emacs-bug-no-explanations.

	* help.el (describe-function-1): Use find-function-noselect
	instead of find-function.
	(view-lossage): Set help-xref-stack* in the help buffer.
	(describe-bindings): Likewise.
	(help-xref-go-back): New arg BUFFER.
	(help-make-xrefs): Specify the help buffer as arg for
	help-xref-go-back.

	* textmodes/sgml-mode.el (sgml-mode-common):
	Make local binding from adaptive-fill-regexp.

1998-05-06  Richard Stallman  <rms@psilocin.gnu.org>

	* international/mule-diag.el (print-coding-system):
	Handle (SYMBOL . SYMBOL) as the flags of a type 4 coding system.

	* which-func.el (which-func-non-auto-modes): New variable.
	(which-func-amodes): Variable deleted.
	(which-func-ff-hook): Use which-func-non-auto-modes instead of
	which-func-amodes.

1998-05-06  Sam Steingold  <sds@usa.net>

	* window.el (quit-window): Fixed FRAME to be the frame and
	never window.

1998-05-06  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-init.el (ediff-highlight-all-diffs, ediff-use-faces):
	Changed the defaults.

1998-05-06  Richard Stallman  <rms@psilocin.gnu.org>

	* which-func.el (which-function-mode): New alias.

1998-05-06  Dave Love  <fx@gnu.org>

	* imenu.el (imenu-create-index-function): Remove autoload cookie
	to avoid nil default value.

1998-05-06  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-consult-rcs-headers): Avoid bug with ci -k in
	RCS 5.7.

1998-05-06  Richard Stallman  <rms@psilocin.gnu.org>

	* calendar/diary-lib.el (diary-mail-entries): Add autoload cookie.

	* dired.el (dired-mode-map): Bind *t to dired-do-toggle.

	* ps-print.el (ps-header-title-font-size): Doc fix.
	(ps-print-control-characters, ps-setup, ps-header-pad): Doc fixes.
	(ps-printing-region, ps-nb-pages): Doc fixes.

1998-05-05  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Some doc fixes, eliminate (require cl).
	(ps-print-version): New version number (3.06.1) and doc fix.
	(ps-print-control-characters, ps-extend-face): Doc fix.
	(ps-font-lock-face-attributes): Eliminate `pop'.
	(ps-font): Eliminate `loop' and `return'.
	(ps-fonts): Eliminate `loop'.
	(ps-font-number): Replace `position' by `ps-position'.
	(ps-select-font): Eliminate `flet'.
	(ps-lookup, ps-size-scale): New macros.
	(ps-output-string-prim): Handle multibyte characters.
	(ps-position): New function.
	(ps-begin-file): Eliminate `loop'.
	(ps-header-page): Eliminate `incf'.

1998-05-05  Richard Stallman  <rms@psilocin.gnu.org>

	* mouse.el (mouse-major-mode-menu): Run activate-menubar-hook here.

	* tmm.el (tmm-get-keymap): Fix previous change;
	access the equiv string from the cache properly.

1998-05-05  Simon Marshall  <simon@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Fixed 1998-04-24 change;
	moved defpackage to here from lisp-font-lock-keywords-2.

1998-05-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* comint.el (comint-replace-by-expanded-history-before-point):
	When none of the ! or ^ constructs match, move forward one char.

1998-05-05  Richard Stallman  <rms@psilocin.gnu.org>

	* add-log.el (add-log-current-defun) <lisp>:
	If element 1 of the defun is a list, use first symbol
	within it (the car of the car.... of it).

1998-05-04  Richard Stallman  <rms@psilocin.gnu.org>

	* cus-face.el (custom-face-attributes): Doc fix.

1998-05-04  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (toggle-input-method): Use a more
	appropriate default value while reading an input method.

1998-05-04  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el (ediff-get-lines-to-region-start):
	Protect from window-end returning the nil.
	(ediff-file-checked-in/out): Use vc-backend.
	Add dependence on vc-hooks.
	(ediff-make-bottom-toolbar): Now checks for toolbar support before
	referring toolbars.

	* ediff-wind.el (ediff-setup-control-frame):
	Now checks for toolbar support before referring toolbars.

	* ediff-init.el (ediff-has-toolbar-support-p, ediff-use-toolbar-p):
	Moved here from ???.

	* ediff-vers.el (cvs-run-ediff-on-file-descriptor):
	Set default-directory.

1998-05-04  Michael Kifer  <kifer@cs.sunysb.edu>

	* emulation/viper.el (viper-vi-state-mode-list): New variable.
	(viper-emacs-state-mode-list, viper-insert-state-mode-list): New vars.
	(viper-set-hooks): No longer uses major mode hooks to impose
	viper-mode on major modes.  Use change-major-mode-hook instead.
	(viper-major-mode-modifier-list): New variable.
	(viper-mode-string): Add defvar to avoid warning.

	* emulation/viper-util.el, emulation/viper-cmd.el (viper-add-hook)
	(viper-remove-hook): Functions deleted.  Use add/delete-hook instead.
	(viper-file-checked-in, viper-file-checked-out): New functions.

	* emulation/viper-init.el: Use make-local-hook for viper's local hooks.
	(viper-minibuffer-exit-hook): Make initially nil.

	* emulation/viper-cmd.el (viper-find-char): Now works in multiline mode.

	* emulation/viper-ex.el (viper-get-ex-pat): Fix delimiter handling.
	(ex-edit): Handle file names that have spaces in them.
	(viper-ex): Check for writing into a checked in file.
	(ex-substitute): Allow newlines in substitutions.
	(viper-ex): Bug fix.

1998-05-04  Richard Stallman  <rms@psilocin.gnu.org>

	* server.el (server-buffer-done): Bind server-kill-buffer-running
	around places that might kill the buffer.
	Do something reasonable if server-done-hook kills the buffer.
	(server-kill-buffer-running): Doc fix.
	(server-kill-buffer): Do nothing unless server-buffer-clients.
	(server-done): Doc fix.

	* server.el (server-buffer-done): Test of for-killing was backwards.

1998-05-04  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* follow.el (follow-intercept-processes): When asynchronous
	subprocesses aren't supported, default to nil.

1998-05-04  Andreas Schwab  <schwab@delysid.gnu.org>

	* progmodes/compile.el (compilation-directory-stack): Doc fix.
	(compilation-mode): Accept optional parameter and initialize
	mode-name from it.
	(compile-internal): Pass name-of-mode to compilation-mode.  Don't
	set mode-name here.
	(compilation-minor-mode): Don't let mode-line-process change.
	(compilation-next-error-locus): Use forward-char instead of
	move-to-column.
	(compilation-parse-errors): Set default-directory from head of
	compilation-directory-stack.

1998-05-03  Dave Love  <d.love@dl.ac.uk>

	* add-log.el (add-log-current-defun): Fix previous fortran change.

1998-05-03  Richard Stallman  <rms@psilocin.gnu.org>

	* generic.el (generic-make-keywords-list): Delete spurious paren.

	* add-log.el (add-log-debugging): New variable.
	(add-change-log-entry): Set it.

1998-05-03  Erik Naggum  <erik@naggum.no>

	* emacs-lisp/shadow.el (list-load-path-shadows): Don't say
	anything, if we are not interactive and nothing is wrong.

1998-05-03  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* progmodes/sh-script.el (sh-shell-file): If $SHELL evaluates to
	one of MS-DOS or MS-Windows shells, use "bin/sh" instead.

1998-05-03  Richard Stallman  <rms@psilocin.gnu.org>

	* Makefile (TAGS-LISP): New target.
	(lisptagsfiles1, lisptagsfiles2): New variables.
	(TAGS, TAGS-LISP): Use lisptagsfiles1, lisptagsfiles2.

	* mail/mh-e.el (mh-quit): Undo 3/3 change (and the subsequent fix).

1998-05-02  Richard Stallman  <rms@psilocin.gnu.org>

	* startup.el (command-line): When choosing a language from LANG,
	call set-language-environment in unibyte and multibyte mode.
	Don't call standard-display-european; instead, call
	standard-display-european-internal and set-terminal-coding-system.
	But do them only for latin-1 ... latin-5.

1998-05-02  Dan Nicolaescu  <done@ece.arizona.edu>

	* menu-bar.el (menu-bar-custom-menu): Add an entry for Changed
	Options.

1998-05-02  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (Info-up): New arg SAME-FILE: don't move to different file.
	(Info-next-preorder): Pass new arg to Info-up.
	(Info-last-preorder): Likewise.
	(Info-last-preorder): Don't follow the Prev if it's same as the Up.
	Instead, follow it as the Up.

1998-05-02  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-parse-cvs-status): Optimized.  Ignore
	"Locally Removed" files.

	* vc.el (vc-fetch-cvs-status): Don't specify DIR on the command line.
	(vc-dired-hook): Optimized for CVS.

1998-05-02  Richard Stallman  <rms@psilocin.gnu.org>

	* apropos.el (apropos-mode-map): Bind q to quit-window.

1998-05-01  Sam Steingold  <sds@usa.net>

	* mail-utils.el (rmail-default-dont-reply-to-names):
	Don't set the variable in this file.

1998-05-01  Erik Naggum  <erik@naggum.no>

	* simple.el (rfc822-goto-eoh): Stop at a blank line, too.

1998-05-01  Stephen Eglen  <stephen@gnu.org>

	* calendar/diary-lib.el (diary-mail-entries): Write year in subject
	line using four digits, not two.

1998-05-01  Carsten Dominik  <cd@delysid.gnu.org>

	* textmodes/reftex.el: Added :version tags to defcustom.

1998-05-01  Andrew Hall  <ahall@fmrco.com>

	* paren.el (show-paren-ring-bell-on-mismatch): New option.
	(show-paren-function): Beep on mismatch, if requested.

1998-04-30  Milan Zamazal  <pdm@fi.muni.cz>

	* language/czech.el (setup-czech-environment):
	Call latin-2's setup function.
	* language/slovak.el (setup-slovak-environment):
	Call latin-2's setup function.

1998-04-30  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-win.el (w32-drag-n-drop-debug, w32-drag-n-drop)
	(w32-drag-n-drop-other-frame): New functions.
	Bind them to the drag-n-drop events.

1998-04-30  Peter Breton  <pbreton@ne.mediaone.net>

	* filecache.el (file-cache-add-file): Checks to see if file exists
	before adding it.  Non-existing files are simply skipped.
	(file-cache-add-directory): Checks to see if directory exists
	before adding it.  Non-existing directories are simply skipped.

	* generic.el (generic): Added defgroup declaration.
	(generic-make-keywords-list): Uses regexp-opt.
	(generic-mode-set-font-lock): Uses regexp-opt.

	* generic-x.el (generic-x): Added defgroup declaration.

	* generic-x.el (generic-bat-mode-setup-function): Fixed comment-start
	variable.

	* generic-x.el (generic-define-mswindows-modes): Enable
	hosts-generic-mode and apache-generic-mode.
	(generic-define-unix-modes): Enable alias-generic-mode.
	(java-properties-generic-mode): Changed regexp to allow property
	and value to be separated by whitespace or an equal sign.
	(alias-generic-mode): Check generic-extras-enable-list before
	defining this mode.

	* generic-x.el (installshield-statement-keyword-list): New variable.
	(installshield-system-functions-list): Likewise.
	(installshield-system-variables-list): Likewise.
	(installshield-types-list): Likewise.
	(installshield-funarg-constants-list): Likewise.
	(rul-generic-mode): Uses the variables listed above instead of
	hard-coding the lists of keywords.

1998-04-30  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/lmenu.el (popup-menu-popup): Fix typo: set menu-keymap.

1998-05-01  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (find-coding-systems-for-charsets):
	Consider priority of each coding system too.
	(select-safe-coding-system): Show mime-charset name (if it is also
	a coding system) instead of base coding system name.
	(select-safe-coding-system): Always delete *Warning* buffer.
	(universal-coding-system-argument): Use buffer-file-coding-system
	as default.

	* international/quail.el (quail-show-translations): Show
	followable keys in alphabetic order.

1998-04-29  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/cperl-mode.el (perl-mode):
	Do not alias this to cperl-mode.

	* progmodes/perl-mode.el (perl-mode): Add autoload cookie.

1998-04-29  Eric S. Raymond  <esr@snark.thyrsus.com>

	Many small changes that mostly eliminate the explicit mail separator
	variable and use the new rfc822-goto-eoh primitive instead:

	* ispell4.el (ispell-message): Use rfc822-goto-eoh.

	* language/ethio-util.el (ethio-sera-to-fidel-mail):
	Use rfc822-goto-eoh.
	(ethio-fidel-to-sera-mail): Likewise.

	* mail/rnewspost.el (news-reply-mode): Don't load sendmail here.
	Don't set paragraph-start or paragraph-separate.
	(news-setup): Set them here.
	(news-inews): Use mail-header-end, etc.
	Use mail-sendmail-delimit-header at the end.

	* mail/emacsbug.el (report-emacs-bug): Use rfc822-goto-eoh.

	* mail/mail-hist.el: Require sendmail.
	(mail-hist-current-header-name): Use mail-text-start.
	(mail-hist-forward-header): Use mail-header-end.
	(mail-hist-current-header-contents): Use mail-header-start.
	(mail-hist-put-headers-into-history): Use mail-text-start.

	* mail/mailalias.el (expand-mail-aliases): Doc fix.
	(expand-mail-aliases, mail-complete): Use mail-header-end.

	* mail/mailabbrev.el (mail-abbrev-in-expansion-header-p):
	Use mail-header-end.

	* mail/mailpost.el (post-mail-send-it):
	Use mail-sendmail-undelimit-header.

	* mail/reporter.el (reporter-calculate-separator): Function deleted.
	(reporter-submit-bug-report): Major rewrite.

	* mail/rmail.el (rmail-forward): Use mail-text-start.
	(rmail-resend): Don't bind mail-header-separator.
	(rmail-retry-failure): Use mail-send-delimit-header, etc.

	* mail/rnews.el: Require sendmail.
	(news-caesar-buffer-body): Use mail-text-start.

	* mail/smtpmail.el (smtpmail-send-it):
	Use mail-sendmail-undelimit-header.

	* mail/supercite.el: Require sendmail.el.
	(sc-no-blank-line-or-header): Use mail-header-end.

	* mail/uce.el (uce-reply-to-uce): Use mail-sendmail-delimit-header.

	* simple.el (rfc822-goto-eoh): New function.
	(sendmail-user-agent-compose): Use rfc822-goto-eoh.

	* mail/sendmail.el (send-mail-function): Doc fix.
	(mail-header-end, mail-text-start): New functions.
	(mail-sendmail-delimit-header): New function.
	(mail-sendmail-undelimit-header): New function.
	(mail-mode-auto-fill): Use mail-header-end.
	(mail-mode-fill-paragraph, mail-send, sendmail-send-it): Likewise.
	(mail-sent-via, mail-position-on-field): Likewise.
	(mail-fill-yanked-message, mail-text): Use mail-text-start.

1998-04-29  Dave Love  <d.love@dl.ac.uk>

	* imenu.el (imenu--generic-function): Doc fix.  Rewritten to be faster.
	(defgroup imenu): Add :link.
	(imenu-use-markers, imenu-auto-rescan-maxout)
	(imenu-generic-expression, imenu--make-index-alist)
	(imenu-default-goto-function): Doc fix.
	(imenu-max-item-length, imenu-sort-function)
	(imenu-scanning-message): Custom tweak.
	(imenu-progress-message): Use real backquote syntax.
	(imenu--in-alist): Unused function deleted.
	(imenu--flatten-index-alist): Likewise.
	(imenu-case-fold-search): Add autoload cookie.
	(imenu--completion-buffer): Offer function at point as default.
	(imenu--subalist-p): Don't use caadr.
	(imenu): Don't use caddr.
	(imenu-add-menubar-index): New function.

1998-04-29  Dave Love  <fx@gnu.org>

	* tar-mode.el (tar-mode-write-file): Protect from null
	tar-header-offset.

1998-04-29  Andrew Innes  <andrewi@harlequin.co.uk>

	* tar-mode.el (tar-extract): Use `!' instead of `:' to construct
	buffer-file-name (`:' is invalid in file names on Windows).

1998-04-29  Richard Stallman  <rms@psilocin.gnu.org>

	* ange-ftp.el (ange-ftp-real-expand-file-name-actual):
	Locally bind old-name, new-name, final, drive-letter.

	* ielm.el (*, **, ***): Add defvars.

	* dired.el (dired-sort-toggle): Handle spaces in dired-actual-switches.

1998-04-29  Ken Stevens  <stevens@kdstevens.com>

	* ispell.el: Generalized region skipping added.
	Checks comments only in code.
	Added backward compatible support for customize.
	(ispell-query-replace-choices, ispell-message-dictionary-alist)
	(ispell-grep-command, ispell-grep-options, ispell-look-command)
	(ispell-look-options, ispell-use-ptys-p, ispell-local-dictionary)
	(ispell-dictionary-alist): Now customizable.
	Fixed type of custom variables: ispell-help-in-bufferp.
	(ispell-use-framepop-p): New variable.
	(ispell-dictionary-alist): Added dictionaries: castellano, castellano8
	czech, esperanto, esperanto-tex, norsk, russian.
	Capitalize XEmacs correctly, and change lucid to xemacs in code.
	(ispell-menu-lucid): Renamed to ispell-menu-xemacs.
	Changed string compares for version number to be correct for XEmacs.
	Fixed to work with string properties.
	(ispell-recursive-edit-marker): New marker saving return point.
	(ispell-skip-region-alist): New variable defining regions.
	(ispell-tex-skip-alists): New variable for LaTeX regions.
	(ispell-skip-sgml): Now buffer-mode aware.
	(ispell-highlight-p): Support block cursors.
	(ispell-message-text-end): Don't check signatures.
	(ispell-comments-and-strings): New command, added to menu.
	(ispell-int-char): New function for character incrementing.
	(ispell-word): Produces message on error when called from
	ispell-minor-mode.  Potential infinite loop removed.
	(ispell-command-loop): prevent XEmacs modeline hiding.
	Allow temporary split of dedicated windows.  Improve recursive
	edit support.  Support block cursors.
	(ispell-show-choices): New function cleaning up command loop.
	(ispell-highlight-spelling-error-generic): Block cursor support added.
	(ispell-highlight-spelling-error-xemacs): Block cursor, name change.
	(ispell-overlay-window): dedicated window splitting, XEmacs changes.
	(ispell-parse-output): Displays ispell process error messages.
	(check-ispell-version): Interactive mode that shows ispell versions.
	(ispell-begin-skip-region-regexp): New region skipping function.
	(ispell-begin-tex-skip-regexp): New tex mode region skipping function.
	(ispell-begin-skip-region): New region skipping function.
	(ispell-tex-arg-end): New tex mode region skipping function.
	(ispell-skip-region): New region skipping function.
	(ispell-get-line): New function to clean up command loop.
	(ispell-process-line): New function cleaning up command loop.
	(ispell-continue): Improve recursive editor support.
	(ispell-complete-word): Interior fragment support improved.
	(ispell-message): Region skipping vastly improved.

1998-04-28  Eli Zaretskii  <eliz@mescaline.gnu.org>

	* ps-print.el (ps-output-string-prim): Don't quote multibyte
	characters.

1998-04-28  Richard Stallman  <rms@psilocin.gnu.org>

	* ps-print.el (ps-remove-duplicates): New function.
	(ps-begin-file): Use it.

	* progmodes/compile.el (compilation-initial-position): New option.
	(compile-internal): Obey it.

1998-04-28  Dave Love  <fx@gnu.org>

	* info.el (Info-mode): Doc fix.

	* finder.el (finder-insert-at-column): Simplify.
	(finder-mouse-face-on-line): New function.
	(finder-list-keywords, finder-list-matches): Use it.
	(finder-commentary, finder-select): Doc.
	(finder-mouse-select): Doc.  Remove spurious let.

1998-04-28  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/rmailedit.el (rmail-cease-edit):
	Call rmail-show-message even if message text is unchanged.

1998-04-28  Inge Frick  <inge@nada.kth.se>

	* emacs-lisp/easymenu.el (easy-menu-define-key): Fixed bug with BEFORE
	argument.  Now it works also if you repeat an identical call to
	easy-menu-define-key.

1998-04-27  Richard Stallman  <rms@psilocin.gnu.org>

	* window.el (quit-window): Don't try to switch buffers
	in a dedicated window or a minibuffer window.
	Treat minibuffer window as dedicated in other ways too.

	* ielm.el (ielm-eval-input): More of previous change.

	* ps-print.el (ps-remove-duplicates): New function.
	(ps-begin-file): Use that instead of remove-duplicates.

	* isearch.el (isearch-yank-x-selection): Doc fix.

	* widget.el (define-widget-keywords): Don't use backquote.

	* view.el (view-really-at-end): Undo previous change.

1998-04-26  Richard Stallman  <rms@psilocin.gnu.org>

	* simple.el (assoc-ignore-representation): New function.
	(assoc-ignore-case): Use compare-strings.

	* textmodes/outline.el (outline-discard-overlays):
	Interpret PROP as a value for `invisible', not as property name.

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1):
	Copy initialization from sgml-font-lock-keywords.
	(sgml-font-lock-keywords): Initialize from sgml-font-lock-keywords-1.
	(sgml-font-lock-keywords-2): New variable.
	(sgml-mode-common): Make buffer-local binding for
	sgml-font-lock-keywords-2 and initialize it.
	Use it in font-lock-defaults.

	* ielm.el (ielm-eval-input): Use variables *, **, *** not :, ::, :::.
	(inferior-emacs-lisp-mode): Corresponding changes.

	* language/european.el (setup-8-bit-environment):
	Don't do anything special here for unibyte mode.
	That is done in set-language-environment.

	* international/mule-cmds.el (set-language-environment):
	Fix previous change.  Call standard-display-european-internal.
	Call set-terminal-coding-system.
	(standard-display-european-internal): New subroutine.

	* disp-table.el (standard-display-european):
	Use set-language-environment
	instead of loading a syntax definitions file.
	Use standard-display-european-internal.
	Let current-language-environment specify terminal coding system.

	* files.el (set-auto-mode): When just-from-file-name is set, don't
	actually switch modes if the new mode is the same as the current one.

	* view.el (view-mode-exit): Don't alter view-return-to-alist.

1998-04-25  Richard Stallman  <rms@psilocin.gnu.org>

	* international/mule-cmds.el (set-language-environment):
	Check for language environments that can't work in unibyte.

	* language/european.el (setup-8-bit-environment):
	Test of default-enable-multibyte-characters was backwards.

	* view.el (view-mode-enter, view-mode-exit): Doc fixes.

1998-04-24  Richard Stallman  <rms@psilocin.gnu.org>

	* Makefile (custom-deps, updates): Allow cus-dep to be used compiled.
	(custom-deps, autoloads, finder-data, updates): Print list of dirs.

	* finder.el (finder-compile-keywords):
	Avoid error for nonexistent directory.
	Ignore files that are actually Emacs lock files.

	* emacs-lisp/copyright.el (copyright-regexp):
	Move \251 before the multibyte copyright symbol.

	* cus-dep.el (custom-make-dependencies): Don't give up
	on a whole file, the first time eval gets an error.

	* Makefile (custom-deps): Ignore =... subdirs.

	* mail/mailalias.el (mail-complete-alist):
	Don't refer to mail-address-field-regexp.

	* add-log.el (change-log-mode): Undo previous change.

1998-04-24  Sam Steingold  <sds@usa.net>

	* cl-indent.el: Indent defpackage correctly.

	* font-lock.el (lisp-font-lock-keywords-2): Added `defpackage'.

1998-04-23  Geoff Voelker  <voelker@cs.washington.edu>

	* dired.el (dired-chmod-program) [windows-nt]: Use chmod.

1998-04-23  Andrew Innes  <andrewi@harlequin.co.uk>

	* scroll-bar.el (scroll-bar-mode, toggle-scroll-bar): By default,
	put scroll bars on the right on MS-Windows (since that is the
	convention on Windows).

1998-04-23  Richard Stallman  <rms@psilocin.gnu.org>

	* ffap.el (dired-at-point): Add autoload cookie.

1998-04-23  Jens-Ulrik Petersen  <petersen@kurims.kyoto-u.ac.jp>

	* ffap.el (dired-at-point-require-prefix): New option.
	(dired-at-point): New command.
	(dired-at-point-prompter): New function.

1998-04-23  Inge Frick  <inge@nada.kth.se>

	* easymenu.el: Use new menu item format.  Don't simulate button prefix.
	(easy-menu-create-menu): Understand also keywords :active,
	:label and :visible.  Don't worry about button prefix.
	(easy-menu-button-prefix): Modified value.
	(easy-menu-do-add-item): Extensive changes to use new menu item format.
	(easy-menu-define-key, easy-menu-always-true): New functions.
	(easy-menu-make-symbol): Don't use indirection for symbols.  Property
	`menu-alias' not set.
	(easy-menu-filter, easy-menu-update-button): Deleted.
	(easy-menu-add-item): Don't worry about button prefix.
	(easy-menu-remove-item): Don't worry about button prefix.  Use
	`easy-menu-define-key'.
	(easy-menu-is-button, easy-menu-have-button): Deleted.
	(easy-menu-real-binding, easy-menu-change-prefix): Deleted.

1998-04-23  Richard Stallman  <rms@psilocin.gnu.org>

	* international/mule.el (load-with-code-conversion):
	Don't pass extra arg to eval-buffer.
	(set-auto-coding): Doc fix.

1998-04-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (frame-name-alist): Remove this variable.
	(select-frame-by-name): Recompute the list of frames instead of
	saving it in a global variable.

1998-04-23  Dave Love  <fx@gnu.org>

	* delsel.el: Don't require cl.  Minor doc fixes.
	(insert-parentheses): Add `delete-selection' property.
	(delete-selection-pre-hook): Simplify slightly.

	* add-log.el (change-log-mode): Add `* ' to paragraph-start.

1998-04-22  Richard Stallman  <rms@sucrose.gnu.org>

	* comint.el (comint-replace-by-expanded-history): New arg START.
	Don't display a message about doing history expansion.
	(comint-replace-by-expanded-history-before-point): New arg START.
	(comint-send-input): Pass START to comint-replace-by-expanded-history.

1998-04-22  Richard Stallman  <rms@psilocin.gnu.org>

	* language/european.el (setup-8-bit-environment):
	If default-enable-multibyte-characters is nil,
	call standard-display-european, and don't set nonascii-insert-offset
	or default-input-method.

	* language/english.el (setup-english-environment):
	Don't set default-enable-multibyte-characters.

1998-04-22  Eli Zaretskii  <eliz@delysid.gnu.org>

	* term/pc-win.el (x-select-text, x-get-selection-value): Replace
	win16 with w16.

1998-04-22  Dave Love  <fx@gnu.org>

	* help.el (help-mode-map): Add S-tab, like backtab.

1998-04-22  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el: Only require cl if cadr and last are not defined.

1998-04-22  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/rmail.el (rmail): Don't bind enable-local-variables.

1998-04-21  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (Info-fontify-node): For menu items, use info-xref font.
	Use info-node font for the node's own name,
	and do not make it mouse-sensitive.

	* international/encoded-kb.el (encoded-kbd-mode): Doc fix.

	* help.el (help-highlight-face): Use `face' as custom type.

1998-04-21  Dave Love  <fx@gnu.org>

	* which-func.el: Fix header comments.
	(which-func-mode): Add autoload cookie.
	(which-func-mode-global): Customize.

	* subr.el (remove-hook): Fix spurious quote.

	* help.el (describe-function-1): Make hyperlink to library file
	name, if available.

1998-04-21  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (Info-find-node): Update Info-history after switching buffer.
	(info): If no arg, and *info* buffer exists, just go to it
	and don't alter it.

	* emacs-lisp/easymenu.el (easy-menu-do-add-item):
	Do the right thing when nil is specified as criterion for activeness.
	Fix string used to report an invalid item.

	* tmm.el (tmm-get-keymap): Handle new format menu item w/o cache.
	(tmm-prompt): If reach an empty menu, get an error.

1998-04-20  Per Starb√§ck  <starback@update.uu.se>

	* dired.el (dired-move-to-filename-regexp): There might be a space
	after the year instead of before it.

1998-04-20  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file):
	Always read the file in multibyte mode
	unless the file itself specifies unibyte mode.

	* international/mule-conf.el (file-coding-system-alist):
	Use emacs-mule for .elc files.

	* emacs-lisp/cl-macs.el (cl-do-arglist): Undo previous change.

1998-04-20  Piet van Oostrum  <piet@cs.ruu.nl>

	* smtpmail.el (smtpmail-send-it): Deleted all code related
	to Resent-To: processing.
	(smtpmail-deduce-address-list): Changed the search for
	Resent-\(To\|Cc\|Bcc\) headers.
	(smtpmail-do-bcc): Delete Resent-Bcc: headers.

1998-04-20  Sam Steingold  <sds@usa.net>

	* mouse.el (mouse-buffer-menu-mode-mult): New variable.
	(mouse-buffer-menu): Obey mouse-buffer-menu-mode-mult.
	Also avoid some consing.

1998-04-20  Andreas Schwab  <schwab@delysid.gnu.org>

	* view.el (view-really-at-end): Return true when at end and not
	reverting.

1998-04-20  Richard Stallman  <rms@psilocin.gnu.org>

	* international/mule.el (load-with-code-conversion):
	Undo previous change.  Instead, pass the UNIBYTE arg to eval-buffer.

1998-04-20  Werner Lemberg  <wl@gnu.org>

	* textmodes/fill.el (justify-current-line):
	Use new algorithm to apportion the spaces to be added.

1998-04-19  Dan Nicolaescu  <done@ece.arizona.edu>

	* language/romanian.el: Add coding: tag.

	* bindings.el (debug-ignored-errors): Add an error from cus-edit.el.

	* time.el (display-time-mode): Add :version.
	* hscroll.el (hscroll-global-mode):
	* type-break.el (type-break-mode):
	* avoid.el (mouse-avoidance-mode):
	* rsz-mini.el (resize-minibuffer-mode):
	* mail/mailabbrev.el (mail-abbrevs-mode):
	* gnus/gnus-art.el (gnus-show-traditional-method)
	(gnus-article-hide-pgp-hook):
	* international/ccl.el (ccl-extended-code-table):
	* progmodes/octave-mod.el (octave-auto-indent):
	* calendar/diary-lib.el (diary-mail-addr, diary-mail-days)
	(diary-unknown-time):
	* emacs-lisp/debug.el (debugger-mode-hook)
	(debugger-record-buffer):
	* progmodes/sh-script.el (sh-imenu-generic-expression):
	* cus-edit.el (custom-variable-default-form)
	(custom-face-default-form):
	* desktop.el (desktop-enable):
	* dabbrev.el (dabbrev-ignored-buffer-names):
	* hexl.el (hexl-follow-ascii):
	* progmodes/etags.el (find-tag-marker-ring-length):
	* replace.el (query-replace-to-history-variable)
	(query-replace-from-history-variable):
	* vc-hooks.el (vc-ignore-vc-files):
	* vc.el (vc-default-init-version):
	* vcursor.el (vcursor-interpret-input, vcursor-string):
	* frame.el (focus-follows-mouse):
	* mail/rmail.el (rmail-movemail-flags): Likewise.

1998-04-20  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el (ccl-compile-unify-character): Inhibit
	unification tables specified by integer value.
	(ccl-compile-translate-single-map): Likewise.
	(ccl-compile-multiple-map-function): Likewise.
	(ccl-compile-translate-multiple-map): Modified for nested tables.
	(ccl-dump-iterate-multiple-map): Handle the case that ID is not
	integer.
	(ccl-dump-translate-multiple-map): Likewise.
	(ccl-dump-translate-single-map): Likewise.
	(declare-ccl-program): New optional arg VECTOR.
	(check-ccl-program): New macro.

	* international/mule.el (make-coding-system): If TYPE is 4, FLAGS
	can be a cons of CCL-PROGRAM symbols.

	* international/quail.el (quail-start-translation): Bind
	prefix-arg to current-prefix-arg.
	(quail-mode): Doc-string modified.

	* language/cyrillic.el: FLAGS arguments for make-coding-system
	changed.

	* language/romanian.el: Set t to `documentation' info for Romanian.

	* language/vietnamese.el: FLAGS arguments for make-coding-system
	changed.

1998-04-19  Dan Nicolaescu  <done@ece.arizona.edu>

	* speedbar.el (speedbar): Add :version.

1998-04-18  Geoff Voelker  <voelker@cs.washington.edu>

	* makefile.nt (interdontcompile): New macro.
	(install): Copy uncompiled files from international subdir.

1998-04-18  Dave Love  <fx@gnu.org>

	* array.el (array-mode): Add autoload cookie.

	* ph.el (ph-install-menu): Use easy-menu-create-menu, not
	easy-menu-create-keymaps.

	* add-log.el (change-log-mode): Revert 1997-12-03 doc change.
	(add-change-log-entry): Replace 1997-12-03 changes with simple
	implementation of add-log-keep-changes-together.  Doc fix.
	(change-log-add-make-room): Function deleted.
	(add-change-log-entry-other-window, change-log-mode)
	(add-log-keep-changes-together): Doc fix.
	(add-log-lisp-like-modes): Add dsssl-mode.
	(add-log-current-defun): Generalize Fortran case.

	* progmodes/scheme.el (scheme-imenu-generic-expression)
	(dsssl-imenu-generic-expression): Remove leading space in submenus.

1998-04-18  Dan Nicolaescu  <done@delysid.gnu.org>

	* which-func.el (which-func): Add defgroup.

	* emacs-lisp/checkdoc.el (checkdoc): Added :version.

	* play/gametree.el (gametree): Likewise.

	* progmodes/vhdl-mode.el (vhdl): Likewise.
	Don't require hideshow, not needed.

1998-04-18  Dan Nicolaescu  <done@ece.arizona.edu>

	* cus-edit.el (customize-changed-options): Add support for showing
	groups with a :version option.
	It's recommended that all new packages added to the distribution
	contain a :version option in the toplevel defgroup.

1998-04-18  Stephen Eglen  <stephen@gnu.org>

	* international/ccl.el, international/iso-ascii.el: Customized.
	* international/iso-acc.el, international/ogonek.el: Customized.

1998-04-18  Richard Stallman  <rms@psilocin.gnu.org>

	* ange-ftp.el (file-name-handler-alist): Fix previous change.

	* emacs-lisp/edebug.el (edebug-compute-previous-result):
	Don't pass floating value to single-key-description.

1998-04-17  Richard Stallman  <rms@psilocin.gnu.org>

	* ps-print.el (ps-output-string-prim): Use skip-chars-forward.

	* info.el (Info-menu): Allow extra spaces at start of menu item.
	(Info-extract-menu-item): Likewise.
	(Info-insert-dir, Info-complete-menu-item, Info-index): Likewise.
	(Info-try-follow-nearest-node, Info-find-emacs-command-nodes): Likewise.
	(Info-fontify-node, Info-speedbar-buttons): Likewise.

	* mail/rmail.el (rmail-message-regexp-p):
	Handle unreformatted messages for real.
	(rmail-message-recipients-p): Undo previous change.

	* international/mule.el (load-with-code-conversion):
	Don't bind default-enable-multibyte-characters to t.

	* bindings.el (debug-ignored-errors): Add and remove strings.

1998-04-17  Geoff Voelker  <voelker@cs.washington.edu>

	* jka-compr.el (jka-compr-use-shell) [ms-dos, windows-nt]: Do not
	use a shell.
	(jka-compr-temp-name-template) [ms-dos, windows-nt]: Check common
	locations for tmp directory.

1998-04-17  Stephen Eglen  <stephen@gnu.org>

	* emulation/tpu-edt.el, emulation/tpu-extras.el: Customize.
	emulation/vip.el: Customize.

1998-04-17  Dan Nicolaescu  <done@delysid.gnu.org>

	* language/romanian.el (setup-romanian-environment): Change the
	input method to latin-2-postfix.
	Save the file using iso-2022-7bit encoding.

1998-04-17  Geoff Voelker  <voelker@cs.washington.edu>

	* ange-ftp.el (ange-ftp-tmp-name-template) [windows-nt]: Look for
	common temp directories.
	(ange-ftp-parse-netrc-group): Skip carriage returns.
	(ange-ftp-expand-file-name): Handle files with drive letters.
	(ange-ftp-write-region): Don't treat as unix.
	(ange-ftp-insert-file-contents): Determine file type by transfer mode.
	(ange-ftp-copy-file-internal): Don't treat as unix.
	(ange-ftp-file-name-all-completions): Handle Windows filenames.
	(file-name-handler-alist) [windows-nt]: Add patterns for name with
	drive letters.
	(ange-ftp-dired-call-process, ange-ftp-call-chmod): Use
	dired-chmod-program.
	(ange-ftp-disable-netrc-security-check) [windows-nt]: Disable by
	default.
	(ange-ftp-real-expand-file-name-actual): New function.

	* comint.el (comint-filename-chars): Combine DOS and Windows strings.

	* fast-lock.el (fast-lock-cache-name): Replace '\' with '#'.

	* files.el (path-separator): Delete variable.

	* ls-lisp.el (ls-lisp-dired-ignore-case): New variable.
	(ls-lisp-handle-switches): Obey ls-lisp-dired-ignore-case.

	* shell.el (shell-file-name-chars): Add ',' and ':'.

	* makefile.nt (install): Copy elisp files that are not compiled.
	(clean): Delete patch scratch files in all subdirectories.

	* w32-fns.el (w32-system-shells): Add 4dos and 4nt.
	(w32-allow-system-shell, w32-valid-locales): New variable.
	(w32-check-shell-configuration): Make interactive.
	Obey w32-allow-system-shell.
	(w32-get-valid-locale-ids, w32-list-locales): New functions.
	(w32-init-info): Fix relative path to info directory.

1998-04-16  Ilya Zakharevich  <ilya@math.ohio-state.edu>

	* cperl-mode.el (cperl-style-alist): New variable, since `c-mode'
	is no longer loaded.
	- (Somebody who uses the styles should check that they work OK!)
	- (a lot of work is needed, especially with new
	  `cperl-fix-line-spacing').
	Old value of style is memorized when choosing a new style, may be
	restored from the same menu.
	(cperl-perldoc, cperl-pod-to-manpage): New commands; thanks to
	Anthony Foiani <afoiani@uswest.com> and Nick Roberts
	<Nick.Roberts@src.bae.co.uk>.
	(`Perl doc', `Regexp'): New submenus (latter to allow short displays).
	(cperl-clobber-lisp-bindings): New cfg variable.
	(cperl-find-pods-heres): $a->y() is not y///.
	(cperl-after-block-p): Add save-excursion.
	(cperl-init-faces): Was failing.
	Init faces when loading `ps-print'.
	(cperl-toggle-autohelp): New command.
	(cperl-electric-paren): `while SPACE LESS' was buggy.
	(cperl-init-faces): `-text' in `[-text => 1]' was not highlighted.
	(cperl-after-block-p): Was FALSE after `sub f {}'.
	(cperl-electric-keyword): `foreachmy', `formy' expanded too,
	Expands `=pod-directive'.
	(cperl-linefeed): Behaves reasonable in POD-directive lines.
	(cperl-message-electric-keyword): New cfg variable.
	(cperl-electric-keyword): Print a message, governed by
	`cperl-message-electric-keyword'.
	(cperl-electric-paren): Typing `}' was not checking for being
	block or not.
	(cperl-beautify-regexp-piece): Did not know about lookbehind;
	finding *which* level to work with was not intuitive.
	(cperl-beautify-levels): New command.
	(cperl-electric-keyword): Allow here-docs contain `=head1'
	and friends for keyword expansion.
	Fix for broken `font-lock-unfontify-region-function'.  Should
	preserve `syntax-table' properties even with `lazy-lock'.
	(cperl-indent-region-fix-else): New command.
	(cperl-fix-line-spacing): New command.
	(cperl-invert-if-unless): New command (C-c C-t and in Menu).
	(cperl-hints): Mention 20.2's goods/bads.
	(cperl-extra-newline-before-brace-multiline): Started to use it.
	(cperl-break-one-line-blocks-when-indent): New cfg variable.
	(cperl-fix-hanging-brace-when-indent): New cfg variable.
	(cperl-merge-trailing-else): New cfg variable.
	Workaround for another `font-lock's `syntax-table' text-property bug.
	`zerop' could be applied to nil.
	At last, may work with `font-lock' without setting `cperl-font-lock'.
	(cperl-indent-region-fix-constructs): Renamed from
	`cperl-indent-region-fix-constructs'.
	(cperl-fix-line-spacing): Could be triggered inside strings, would not
	know what to do with BLOCKs of map/printf/etc.
	(cperl-merge-trailing-else): Handle `continue' too.
	(cperl-fix-line-spacing): Likewise.
	(cperl-calculate-indent): Knows about map/printf/etc before {BLOCK};
	treat after-comma lines as continuation lines.
	(cperl-mode): `continue' made electric.
	(cperl-electric-keyword): Electric `do' inserts `do/while'.
	(cperl-fontify-syntaxically): New function.
	(cperl-syntaxify-by-font-lock): New cfg variable.
	Make syntaxification to be autoredone via `font-lock',
	switched on by `cperl-syntaxify-by-font-lock', off by default so far.
	Remove some commented out chunks.
	(cperl-set-style-back): Old value of style is memorized when
	choosing a new style, may be restored from the same menu.
	Mode-documentation added to micro-docs.
	(cperl-praise): Updated.
	(cperl-toggle-construct-fix): New command.  Added on C-c C-w and menu.
	(auto-fill-mode): Added on C-c C-f and menu.
	(cperl-style-alist): `PerlStyle' style added.
	(cperl-find-pods-heres): Message for termination of scan corrected.
	(cperl-speed): New variable with hints.
	(cperl-electric-else): Make backspace electric after
	expansion of `else/continue' too.
	Fixed customization to honor cperl-hairy.
	Created customization groups.
	All the compile-time warnings fixed.
	(cperl-syntaxify-by-font-lock): Interaction with `font-lock-hot-pass'
	fixed.
	(cperl-after-block-and-statement-beg): It is BLOCK if we reach lim
	when backup sexp.
	(cperl-after-block-p, cperl-after-expr-p): Likewise.
	(cperl-indent-region): Make a marker for END - text added/removed.
	(cperl-style-alist): Include `cperl-merge-trailing-else'
	where the value is clear.
	(cperl-styles-entries): Likewise.
	(cperl-tips, cperl-problems): Improvements to docs.

1998-04-16  Richard Stallman  <rms@psilocin.gnu.org>

	* ispell.el (ispell-word): In ispell-check-only mode,
	display a message for misspelled word.
	(ispell-get-word): No error if can't find a word to check.
	(ispell-word): Don't fuss about a word if not adjacent to it.
	(ispell-minor-check): Use save-excursion.

	* emacs-lisp/byte-opt.el (byte-after-unbind-ops): Delete byte-equal.

	* help.el (help-with-tutorial): Locally bind file and filename.

	* emacs-lisp/find-func.el (find-function-on-key):
	If definition is a list, don't call find-function-other-window.
	Handle mouse events (code copied from describe-key-briefly).
	(find-function-do-it): Doc fix.
	(find-function-noselect): Doc fix.

	* locate.el (locate): Doc fix.

	* man.el (Man-notify-when-ready) <newframe>:
	Mark frame's window as dedicated.

	* subr.el (local-set-key, global-set-key):
	Return what define-key returns.

	* custom.el (defcustom, defgroup, defface): Don't use backquote.

1998-04-15  Eli Zaretskii  <eliz@delysid.gnu.org>

	* ps-print.el (ps-do-despool): Bind coding-system-for-write to
	raw-text-unix instead of using binary-process-input.

	* arc-mode.el (archive-extract-by-stdout): Don't use
	binary-process-output.  Bind coding-system-for-read `undecided',
	so coding system is determined on the fly.  Bind
	inherit-process-coding-system to t.
	(archive-dos-members): Remove.
	(archive-extract): Don't call archive-check-dos.  Handle pkunzip
	errors.
	(archive-*-extract): Handle pkzip errors.
	(archive-check-dos): Remove.
	(archive-subfile-dos): Remove.
	(archive-extract): Don't bind archive-subfile-dos.
	(archive-write-file-member): Don't DOSify DOS-style archive
	members.
	(archive-zip-extract): Make pkzip use -o- flag, to make it more
	silent.

	* lpr.el (print-region-1): Stop using binary-process-{in,out}put,
	bind coding-system-for-{read,write} instead.

	* dos-fns.el (dos-print-region-function): Except for binary files,
	force conversion to DOS EOLs, but leave text conversions alone.

	* hexl.el (hexlify-buffer, dehexlify-buffer): Don't bind
	binary-process-{in,out}put; setup coding-systems instead.

1998-04-15  Dave Love  <d.love@dl.ac.uk>

	* international/mule-cmds.el (global-map [menu-bar mule]):
	Conditionalize on default-enable-multibyte-characters.

1998-04-15  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-dired-mode): Redefine dired-move-to-filename-regexp
	locally.
	(vc-dired-reformat-line): Streamlined.  Should handle all sorts of
	date formats now.

1998-04-15  Andreas Schwab  <schwab@delysid.gnu.org>

	* vc.el (vc-backend-revert): Fix missing argument for
	vc-file-setprop.

1998-04-15  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-util.el (coding-system-change-eol-conversion):
	New function.
	(coding-system-change-text-conversion): New function.

1998-04-15  Richard Stallman  <rms@gnu.org>

	* mail/mh-e.el (mh-quit): mh-show-buffer can be nil.

	* mail/sendmail.el (mail-mode): Doc fix.

1998-04-15  Simon Marshall  <simon@gnu.org>

	* textmodes/outline.el (outline-font-lock-level): New function.

1998-04-15  Fran√ßois Pinard  <pinard@iro.umontreal.ca>

	* emacs-lisp/bytecomp.el
	(byte-compile-warn-about-unresolved-functions): Fix whitespace.

1998-04-14  Dan Nicolaescu  <done@ece.arizona.edu>

	* language/romanian.el: New file.

	* loadup.el: Load language/romanian.

1998-04-14  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el: Don't eval-*and*-compile font-lock stuff.

1998-04-14  Stephen Eglen  <stephen@gnu.org>

	* mail/mspools.el (mspools-folder-directory): Takes default value of
	~/MAIL/ if vm-folder-directory not bound.
	(mspools-vm-system-mail): Customize the variable so that if the
	environment variable $MAIL is not set, the user can easily set
	it.
	(mspools-vm-system-mail-crash): Variable deleted; we now use
	vm-crash-box.
	(mspools-set-vm-spool-files): Error if mspools-folder-directory
	hasn't been set.  Use mspools-folder-directory rather
	than vm-folder-directory.
	(mspools-get-spool-files): Error if mspools-folder-directory is nil.
	(mspools-get-spool-files): Add $ to regexp to ensure mspools-suffix
	matches the end of the filename.
	(mspools-mode-map): Bind n and p to next-line and previous-line.

1998-04-14  Richard Stallman  <rms@gnu.org>

	* files.el (find-file-noselect): Set buffer-file-coding-system
	if RAWFILE.

1998-04-14  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action-on-file): Don't check out after
	registering.  This is two steps instead of one, and the second
	does not make sense under CVS.
	(vc-next-action): Changed doc string to reflect the above.

1998-04-14  Andreas Schwab  <schwab@mescaline.gnu.org>

	* mail/rmail.el (rmail-movemail-flags): Fix customize type.

	* language/korean.el ("Korean"): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-warnings): Fix customize
	type.

	* ediff-init.el (ediff-autostore-merges): Doc fix.

1998-04-14  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* startup.el (command-line-1): Better wording in mouse startup
	message.

1998-04-14  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (titdic-convert): Message improved.
	(tit-process-header): Change `Do byte-compile' to `Byte-compile'.
	(batch-titdic-convert): Likewise.

1998-04-13  Richard Stallman  <rms@gnu.org>

	* mail/emacsbug.el (report-emacs-bug-hook): Don't absolutely
	reject non-ASCII characters.

	* tmm.el (tmm-get-keymap): Handle `menu-item' menu items.

1998-04-13  Eli Zaretskii  <eliz@delysid.gnu.org>

	* international/mule-util.el (coding-system-eol-type-mnemonic):
	Return correct eol-type mnemonics for the non-unix cases.

1998-04-12  Ken'ichi Handa  <handa@melange.gnu.org>

	* language/korean.el: Fix previous change.

1998-04-12  Richard Stallman  <rms@gnu.org>

	* help.el (describe-function-1): New function.
	(describe-function): Use describe-function-1.
	(describe-key): Likewise.

	* emacs-lisp/lisp-mode.el (eval-defun): Arrange to use eval-region
	even if we have to alter the form.

	* gnus/gnus-art.el (gnus-emphasis-alist): Use nth, not caddr.

	* emacs-lisp/autoload.el (generate-autoload-section-header): Doc fix.
	(update-file-autoloads): Use autoload-read-section-header.
	(update-autoloads-from-directories): Likewise.
	(generate-autoload-section-continuation): New variable.
	(autoload-read-section-header): New function.
	(update-file-autoloads): Don't call save-buffer if no changes.
	(generate-file-autoloads): Split the section header line
	into multiple comments.

	* mail/mail-extr.el (mail-extract-address-components):
	Rename local :-pos to colon-pos.

1998-04-12  Erik Naggum  <erik@naggum.no>

	* emacs-lisp/cl-macs.el (cl-do-arglist): Intern initializes the
	value of keyword symbols, so don't do it again.

1998-04-11  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (generic-char-p): A character of code 0 is
	not a generic char.

	* international/mule-cmds.el (describe-language-environment):
	Print the language environment at the head.

	* language/czech.el: Put Czech lang. env. under European.

	* language/slovak.el: Put Slovak lang. env. under European.

1998-04-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el (list-input-methods): Fix doc string.
	(describe-font, describe-fontset, list-fontsets, mule-diag): Don't
	use fontset-related features if global-fontset-alist is not bound.

1998-04-10  Ken'ichi Handa  <handa@melange.gnu.org>

	* language/slovak.el: Delete tutorial file entry.

1998-04-10  Ken'ichi Handa  <handa@melange.gnu.org>

	* language/czech.el: Fix previous change, TUTORIAL.ch > TUTORIAL.cs.

1998-04-10  Kenichi Handa  <handa@etl.go.jp>

	* language/czech.el: Tutorial file name changed to TUTORIAL.ch.
	* language/japanese.el: Tutorial file name changed to TUTORIAL.ja.
	* language/korean.el: Tutorial file name changed to TUTORIAL.ka.
	* language/slovak.el: Tutorial file name changed to TUTORIAL.sk.

1998-04-09  Karl Heuer  <kwzh@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-loop, vhdl-while-loop): Add backslash.

	* emacs-lisp/cl.el: Don't defconst the colon symbols, since they
	evaluate to themselves now anyway.

	* simple.el (newline): Mark as hard the newline that was just
	typed, not the previous one.  Suppress optimization if there's a
	marker either before or after the newline.

1998-04-09  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action): Fixed bug that prevented registering
	files using C-x v v.

1998-04-09  Stephen Eglen  <stephen@gnu.org>

	* progmodes/c-mode.el, progmodes/cplus-md.el: Customize.
	progmodes/m4-mode.el: Customize.

1998-04-09  Dan Nicolaescu  <done@ece.arizona.edu>

	* progmodes/vhdl-mode.el (vhdl-mode): Add autoload cookie.

1998-04-09  Kenichi Handa  <handa@etl.go.jp>

	* language/slovak.el: Add tutorial file name for Slovak.

	* help.el (help-with-tutorial-alist): This variable deleted.
	(help-with-tutorial): Get a tutorial file name by
	get-language-info instead of help-with-tutorial-alist.

	* language/devan-util.el: Typos in comment fixed.
	(devanagari-vertical-modifier-p): Target string to be matched with
	GLYPH is modified.
	(devanagari-non-vertical-modifier-p): Likewise.
	(devanagari-wide-to-narrow-char): New function.
	(devanagari-wide-to-narrow-iter): The second arg is changed to
	2-COL-GLYPH.

1998-04-08  Dan Nicolaescu  <done@ece.arizona.edu>

	* textmodes/outline.el: Add support for showing hidden outlines
	when doing isearch.  (Thanks to Peter S Galbraith for the idea)
	(outline-isearch-open-invisible): New function.
	(outline-flag-region): Use it.

1998-04-08  Derek L. Davies  <ddavies@world.std.com>

	* gud.el (jdb): Do proper analysis of classes defined in a Java
	source.  This removes the restriction of one class per file.
	(gud-jdb-package-of-file): Removed.  Replaced with parsing routines.
	(gud-jdb-skip-whitespace): New function.
	(gud-jdb-skip-single-line-comment): New function.
	(gud-jdb-skip-traditional-or-documentation-comment): New function.
	(gud-jdb-skip-whitespace-and-comments): New function.
	(gud-jdb-skip-id-ish-thing): New function.
	(gud-jdb-skip-string-literal): New function.
	(gud-jdb-skip-character-literal): New function.
	(gud-jdb-skip-block): New function.
	(gud-jdb-analyze-source): New function.
	(gud-jdb-build-class-source-alist-for-file): New function.
	(gud-jdb-analysis-buffer): New variable.
	(gud-jdb-build-class-source-alist): Cleaner at the expense of new
	variable.

1998-04-08  Richard Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-message-regexp-p): Handle messages
	whose headers have not been reformatted.
	(rmail-message-recipients-p): Likewise.

	* mail/rmailedit.el (rmail-cease-edit): Call kill-all-local-variables.
	Call rmail-variables.
	(rmail-edit-mode): Call text-mode.  Don't run text-mode-hook here.
	(rmail-edit-map): Use set-keymap-parent.
	(rmail-old-text): Add defvar.

	* mail/rmail.el (rmail-movemail-program): Customized.
	(rmail-message-filter): Customized.
	(rmail-display-summary): Customized.
	(rmail-inbox-list, rmail-keywords, rmail-current-message)
	(rmail-total-messages, rmail-message-vector, rmail-deleted-vector)
	(rmail-msgref-vector, rmail-overlay-list, rmail-view-buffer)
	(rmail-last-label, rmail-last-regexp): Now permanent locals.
	(rmail-perm-variables): Set up all permanent locals here.
	(rmail-variables): Not here.
	(rmail-variables): Set enable-local-variables here.
	(rmail-mode-2): Not here.

1998-04-08  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-fill-paragraph): Return t here.
	(fortran-fill-statement): Not here.

1998-04-08  Stephen Eglen  <stephen@gnu.org>

	* mail/mail-utils.el (mail-use-rfc822): Customize.

1998-04-07  Milan Zamazal  <pdm@fi.muni.cz>

	* language/czech.el: Add coding-priority.  Improve sample text.
	Correct starting commentary.
	* language/slovak.el: Add coding-priority.  Use iso-8859-2 instead
	of iso-latin-2.  Correct starting commentary.

1998-04-07  Dave Love  <d.love@dl.ac.uk>

	* progmodes/fortran.el: Use regexp-opt and eval-and-compile to
	build font-lock patterns.
	(fortran-mode): Define indent-region-function, indent-line-function.
	(fortran-tab-mode-string): Make buffer-local.
	(fortran-comment-indent-style): Custom tweak.
	(fortran-comment-region, fortran-electric-line-number)
	(fortran-analyze-depth, fortran-break-before-delimiters)
	(fortran-mode): Doc fix.
	(fortran-font-lock-keywords-1): Add "select", "case"; allow
	double-quoted strings.
	(fortran-mode-map): Add fill-paragraph menu item.  Don't define \t.
	(fortran-mode): Make `fill-column' buffer-local; set
	`fill-paragraph-function', `indent-region-function',
	`indent-line-function'.
	(calculate-fortran-indent): Renamed to `fortran-calculate-indent'.
	(fortran-split-line): Simplify.
	(fortran-remove-continuation): New function.
	(fortran-join-line): Use it.
	(fortran-end-prog-re1, fortran-end-prog-re): New variables.
	(beginning-of-fortran-subprogram, end-of-fortran-subprogram): Use them.
	(fortran-blink-matching-if, fortran-blink-matching-do)
	(fortran-indent-new-line): Bind case-fold-search.
	(fortran-end-do, fortran-beginning-do, fortran-end-if)
	(fortran-beginning-if): Bind case-fold-search.  Allow labeled blocks.
	Use fortran-end-prog-re.
	(fortran-if-start-re): New variable.
	(fortran-calculate-indent): Allow labeled blocks.  Simplify the conds.
	Make select case indentation work.
	(fortran-is-in-string-p): Ignore Emacs 18 bug kluge.
	(fortran-fill): Allow double quotes in check for string.
	(fortran-fill-paragraph): New function.
	(fortran-fill-statement): New function.

1998-04-07  Richard Stallman  <rms@gnu.org>

	* subr.el (add-to-list): Always return updated value of LIST-VAR.

	* shadowfile.el (find-file-visit-truename): Don't setq this.

1998-04-07  Stephen Eglen  <stephen@gnu.org>

	* cus-start.el: next-screen-context-lines is an integer, not boolean.

	* mail/rmail.el (rmail-mode): Doc fix.

1998-04-06  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* mail/rmail.el (rmail-movemail-flags): New customizable variable
	to specify additional flags to pass to movemail.
	(rmail-insert-inbox-text): Use rmail-movemail-flags.

1998-04-06  Richard Stallman  <rms@gnu.org>

	* startup.el (command-line-1): Fix punctuation in startup screen.

1998-04-06  Dave Love  <fx@gnu.org>

	* help.el (help-make-xrefs): Grok commands in keymap table
	expansions.
	(help-xref-button): Simplify.
	(help-make-xrefs): Set overriding keymap properly.

1998-04-06  Kenichi Handa  <handa@etl.go.jp>

	* language/japanese.el: Set exit-function to
	exit-japanese-environment for Japanese environment.

	* language/japan-util.el (setup-japanese-environment): Setup
	sentence-end suitable for Japanese text.
	(exit-japanese-environment): New function.

	* international/mule-cmds.el (subset-p): Renamed from
	find-safe-coding-system-list-subset-p.
	(find-coding-systems-region, find-coding-systems-string): New
	functions.
	(find-coding-systems-for-charsets): Renamed from
	find-safe-coding-system.  This is now a helper function of the
	above two.
	(select-safe-coding-system): Adjusted for the above changes.

1998-04-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* widget.el (:default-get): New keyword.

	* wid-edit.el (default, widget-default-default-get): Define it.
	(group, widget-group-default-get): Define it.
	(menu-choice, widget-choice-default-get): Define it.
	(widget-default-get): New function.
	(widget-choice-action): Call it.
	(widget-editable-list-entry-create): Call it.

1998-04-05  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-dired-mode): Make dired-after-readin-hook a local
	hook, not a local variable.

	* vc.el (vc-merge, vc-backend-merge): New functions.
	(vc-resolve-conflicts): Added optional parameters for buffer names.
	(vc-branch-p): New function.

	* vc-hooks.el (vc-prefix-map): Added "m" for vc-merge.

	* vc.el (vc-ensure-vc-buffer): New function.
	(vc-registration-error): Replaced by the above.  Updated all callers.
	(file-executable-p-18, file-regular-p-18): Removed.

1998-04-05  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/autoload.el (update-file-autoloads):
	Redo 1997-08-23 change.

1998-04-05  Stephen Eglen  <stephen@gnu.org>

	* play/bruce.el, play/decipher.el, play/gametree.el: Customize.
	* play/gomoku.el, play/handwrite.el, play/landmark.el: Customize.
	* play/mpuz.el, play/solitaire.el, play/spook.el: Customize.
	* play/yow.el, play/dunnet.el: Customize.
	* emacs-lisp/advice.el, emacs-lisp/backquote.el: Customize.
	* emacs-lisp/cust-print.el, emacs-lisp/debug.el: Customize.
	* emacs-lisp/gulp.el, emacs-lisp/lisp-mnt.el, pp.el: Customize.
	* emacs-lisp/profile.el, emacs-lisp/shadow.el: Customize.
	* emacs-lisp/trace.el: Customize.

1998-04-05  Dave Love  <fx@gnu.org>

	* startup.el (command-line): Fix paren error.

1998-04-05  Richard Stallman  <rms@psilocin.gnu.org>

	* mouse.el (mouse-save-then-kill): Get point-before-scroll
	from the right buffer.

	* scroll-bar.el (scroll-bar-drag): Set point-before-scroll
	in the right buffer, from point in the right window.
	(scroll-bar-scroll-down, scroll-bar-scroll-up): Likewise.

1998-04-04  SL Baur  <steve@altair.xemacs.org>

	* webjump.el (webjump): Use assoc-ignore-case for locating the
	proper URL.

1998-04-04  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (report-emacs-bug-hook): Use skip-chars-forward
	to check for non-ASCII characters, and to find them.
	Don't use find-charset-region.
	(report-emacs-bug-pretest-address): Update address.
	(report-emacs-bug-address): Likewise.

1998-04-04  Dave Love  <d.love@dl.ac.uk>

	* help.el (help-highlight-face): Use underline.
	(help-mode-maybe): Ensure read-only.
	(help-xref-button): Obey help-highlight-p.
	(help-follow): Remove check for args being a list.
	(help-mode): Doc fix.
	(help-highlight-face): Customize.
	(help-highlight-p): Put in help group.

	* help.el (help-make-xrefs): Insert button label in scope of
	inhibit-read-only binding.
	(help-mode-map, help-make-xrefs): Define TAB, RET correctly.

1998-04-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-parse-cvs-status): New function.
	(vc-fetch-master-properties): Moved cvs status retrieval to
	the above.
	(vc-backend): If a file is not registered, remember that by setting
	the property to `none'.
	(vc-name): Use the mechanism of vc-backend to compute the value.
	(vc-after-save): Don't access vc-backend property directly.

	* vc.el (vc-next-action-dired): Use dired-do-redisplay.  Handle
	window configuration correctly.
	(vc-next-action): Save window configuration for vc-next-action-dired.
	(vc-finish-logentry): Only kill log buffer if it does exist.
	(vc-dired-mode): Rewritten so that it works entirely through
	dired-after-readin-hook.  Subdirectories are handled just as in
	ordinary dired.
	(vc-dired-hook): New function.
	(vc-state-info, vc-dired-reformat-line): Adapted.
	(vc-dired-update, vc-dired-update-line): Removed.
	(vc-directory): Rewritten.
	(vc-directory-18): Removed.
	(vc-dired-mark-locked): New function, bound to "*l" in vc-dired-mode.
	(vc-do-command): Only compute vc-name if it is really needed.
	(vc-fetch-cvs-status): New function.
	(vc-dired-hook): Use it.

1998-04-03  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (report-emacs-bug-hook):
	Don't bind enable-multibyte-characters.

1998-04-03  Dave Love  <d.love@dl.ac.uk>

	* startup.el (command-line): If already unibyte, just load
	latin-N instead of calling set-language-environment.

1998-04-03  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (report-emacs-bug): Use set-buffer-multibyte.

	* mail/rmail.el (rmail-mode-2): Locally set enable-local-variables
	to nil, so a local var list in a message won't confuse things.

	* mail/emacsbug.el (report-emacs-bug-hook): Fix the regexp for
	matching non-ASCII characters.

1998-04-02  Richard Stallman  <rms@psilocin.gnu.org>

	* generic-x.el (rul-generic-mode): Use font-lock-builtin-face,
	not font-lock-emphasized-face.

	* help.el (help-highlight-face): Use `highlight'.

1998-04-02  Dave Love  <d.love@dl.ac.uk>

	* help.el: Make hyperlinks for cross-reference info intuited from
	*Help* buffer.
	(help-font-lock-keywords): Removed.
	(help-mode-map): Define keys for navigating hyperlinks.
	(help-xref-stack, help-xref-stack-item): New permanent-local
	variables.
	(help-mode): Set font-lock-defaults to nil.
	(help-mode-maybe): Invoke help-make-xrefs in Help mode.
	(help-setup-xref): New function.
	(describe-key, describe-mode, describe-function)
	(describe-variable): Call it.
	(view-lossage, describe-bindings): Nullify help-xref-stack,
	help-xref-stack-item.
	(help-highlight-p): New option.
	(help-highlight-face): New customized face.
	(help-back-label, help-xref-symbol-regexp, help-xref-info-regexp):
	New variables.
	(help-setup-xref, help-make-xrefs, help-xref-button)
	(help-xref-interned, help-xref-mode, help-follow-mouse)
	(help-xref-go-back, help-go-back, help-follow, help-next-ref): New
	functions.

1998-04-02  Richard Stallman  <rms@psilocin.gnu.org>

	* wid-edit.el (widget-beginning-of-line): Don't set zmacs-region-stays.
	(widget-end-of-line): Likewise.
	(widget-glyph-click): Use read-event.
	(widget-color-choice-list): Delete compatibility code.
	(widget-color-sample-face-get): Likewise.
	(widget-choose): Likewise.
	(widget-event-point): Fix paren error.

1998-04-01  Richard Stallman  <rms@psilocin.gnu.org>

	* wid-edit.el: Delete some compatibility code.
	(widget-event-point, widget-read-event): Define unconditionally.

	* info-look.el (info-lookup->topic-cache): Use defun, not defsubst.
	(info-lookup->mode-cache, info-lookup->initialized): Likewise.
	(info-lookup->completions, info-lookup->refer-modes): Likewise.
	(info-lookup->all-modes): Likewise.

	* info-look.el (info-lookup-quick-all-modes): New function.
	(info-complete): Find the symbol to complete first,
	then compute list of completions.

	* info-look.el (lisp-mode): Add info-lookup-maybe-add-help for it.

1998-04-01  Derek L. Davies  <ddavies@world.std.com>

	* gud.el: Add support for jdb (Java debugger).
	(jdb): New function.
	(gud-jdb-history): New variable.
	(gud-jdb-directories): New variable.
	(gud-jdb-source-files): New variable.
	(gud-jdb-build-source-files-list): New function.
	(gud-jdb-package-of-file): New function.
	(gud-jdb-class-source-alist): New variable.
	(gud-jdb-build-class-source-alist): New function.
	(gud-jdb-massage-args): New function.
	(gud-jdb-find-source-file): New function.
	(gud-jdb-marker-filter): New function.
	(gud-jdb-find-file): New function.
	(gud-jdb-command-name): New variable.
	(gud-perldb-command-name): Variable renamed from perldb-command-name.

1998-03-31  Anders Lindgren  <andersl@csd.uu.se>

	* follow.el (follow-scroll-up): Cope if `window-end' returns nil.
	(follow-select-if-end-visible): Likewise.
	(follow-mode-version): Variable removed.

1998-04-01  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-revert-buffer): Rewrote handling of vc-diff buffer,
	so that the file's buffer is always current when the actual
	revert is done.

1998-04-01  Andreas Schwab  <schwab@gnu.org>

	* emacs-lisp/copyright.el: Customized.

1998-03-31  Richard Stallman  <rms@psilocin.gnu.org>

	* files.el (hack-one-local-variable):
	Variables named ...-predicate are treated as risky.
	(write-file): Omit directory part when making default file name.

1998-03-31  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el: Many doc fixes.
	(iswitchb-method): No longer a user variable.
	(iswitchb-minibuffer-setup-hook): Customized.
	(iswitchb-default): New variable.
	(iswitchb-complete): Use iswitchb-common-match-string rather than
	recomputing the value.
	(iswitchb-toggle-ignore): Recompute list of buffers.
	(iswitchb-init-XEmacs-trick): Renamed from iswitchb-init-Xemacs-trick.

1998-03-31  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-resolve-conflicts): New function.
	(vc-next-action-on-file): Use it.
	(vc-backend-revert): For CVS, revert to the version the buffer was
	based on, not the latest on the current branch (same behavior as
	for RCS).  For SCCS, forget vc-workfile-version so that it gets
	recomputed.
	(vc-revert-buffer): Rewrote doc string to explain the above.
	(vc-finish-logentry): Don't add extra newline.

1998-03-29  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* battery.el (battery-linux-proc-apm): Re-use the temporary
	buffer.

	* battery.el (battery-insert-file-contents): Disable code
	conversion.

1998-03-29  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* textmodes/tex-mode.el (tex-send-command): Return the process.
	(tex-start-tex): New function.
	(tex-region, tex-file): Use tex-start-tex.
	(tex-start-tex-marker): New variable.
	(tex-compilation-parse-errors): Parse only the most recent
	TeX compilation's output.  If the error is in the zap file,
	use the buffer it was zapped from.
	(tex-start-shell): Call compilation-minor-mode.

1998-03-29  Ian T Zimmerman  <itz@kronstadt.rahul.net>

	* textmodes/tex-mode.el (tex-compilation-parse-errors):
	Completely rewritten.
	(tex-print): Reset or restart the subshell before using it.

	* desktop.el (desktop-buffer-info, desktop-buffer-rmail)
	(desktop-buffer-mh, desktop-buffer-dired, desktop-buffer-file):
	Return the buffer produced.
	(desktop-create-buffer): Use the buffer that was returned.

	* ange-ftp.el (ange-ftp-kill-ftp-process): Convert buffer name
	to the buffer.

1998-03-28  Richard Stallman  <rms@psilocin.gnu.org>

	* desktop.el (desktop-load-default): Add autoload cookie.
	(desktop-read): Likewise.

1998-03-27  Dave Love  <d.love@dl.ac.uk>

	* menu-bar.el (menu-bar-options-menu): Remove "Toggle" from item
	names, using buttons instead.
	(menu-bar-make-toggle): Define a menu-item toggle button.
	(menu-bar-options-menu [save-place]): (require 'saveplace).
	(menu-bar-options-menu [toggle-auto-compression], [auto-fill-mode])
	(menu-bar-options-menu [toggle-global-lazy-font-lock-mode]):
	Define a menu-item button.

1998-03-27  Richard Stallman  <rms@psilocin.gnu.org>

	* bindings.el (completion-ignored-extensions): Add a few.

1998-03-25  Richard Stallman  <rms@psilocin.gnu.org>

	* bindings.el (debug-ignored-errors): Add file-supersession.

	* startup.el (normal-top-level-add-subdirs-to-load-path):
	Reverse order of subdirs to add.  Don't duplicate the parent dir.

	* mail/rmail.el (rmail-clear-headers):
	Handle failure to find "\n[^ \t]".

1998-03-25  Dave Love  <fx@gnu.org>

	* autorevert.el: Various doc fixes, mainly grammar.

	* autoinsert.el (auto-insert, auto-insert-query): :tag choices.
	(define-auto-insert): Rename arg key to match doc.

1998-03-25  Simon Marshall  <simon@gnu.org>

	* font-lock.el (c-font-lock-keywords-2): Added "sizeof".
	(c++-font-lock-keywords-2): Added "export" and "typename".

	* lazy-lock.el (lazy-lock-fontify-after-scroll)
	(lazy-lock-fontify-after-trigger): Use new window-end UPDATE arg
	rather than calculating a value using vertical-motion.

	* mail/sendmail.el (mail-font-lock-keywords): Don't use the value
	of mail-header-separator if its length is zero.

1998-03-24  Dave Love  <fx@gnu.org>

	* ange-ftp.el (shell-command): Define handler.
	(ange-ftp-shell-command): Add optional arg.
	(comint-last-output-start, comint-last-input-start)
	(comint-last-input-end): Defvar to silence compiler.

	* dired-aux.el (dired-run-shell-command): Maybe run handler.

	* simple.el (shell-command-on-region): Amend message to report
	success or failure when no process output.

1998-03-23  Andreas Schwab  <schwab@gnu.org>

	* xt-mouse.el (xterm-mouse-translate, xterm-mouse-event): Replace
	obsolete `concat with integer' by format.

	* rsz-mini.el (resize-minibuffer-mode): Make it a proper minor
	mode: toggle resize-minibuffer mode when called without argument.

1998-03-22  Richard Stallman  <rms@gnu.org>

	* startup.el (normal-top-level-add-subdirs-to-load-path): New function.

	* files.el (find-file-noselect): Use set-buffer-multibyte
	instead of setting enable-multibyte-characters.

	* disp-table.el (standard-display-underline): Shift face id by 19 bits.

1998-03-22  Johan Vromans  <jvromans@squirrel.nl>

	* complete.el (PC-expand-many-files): Apply
	completion-ignored-extensions.

1998-03-21  Richard Stallman  <rms@psilocin.gnu.org>

	* comint.el (comint-preoutput-filter-functions): Doc fix.

	* replace.el (perform-replace): Before recursive edit,
	get the match data as markers, and set real-match-data.

1998-03-20  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-sccs-project-dir, vc-search-sccs-project-dir):
	New functions.
	(vc-master-templates): Add call to vc-search-sccs-project-dir.

	* vc.el (vc-next-action-on-file): Properly handle the case
	when user tries to check-in, but file on disk has changed.
	(vc-do-command): Rewrote doc string.  Consider LAST argument
	only if FILE is non-nil.
	(vc-add-triple, vc-record-rename, vc-lookup-file): Find
	vc-name-assoc-file based on vc-name of FILE.
	(vc-backend-admin, vc-rename-file): Handle the SCCS PROJECTDIR
	feature.

1998-03-20  Richard Stallman  <rms@psilocin.gnu.org>

	* international/mule-cmds.el (set-language-environment): Doc fix.
	(current-language-environment): Use defcustom.
	(default-input-method): Specify :type.

1998-03-19  Barry A. Warsaw  <bwarsaw@cnri.reston.va.us>

	* reporter.el (reporter-mail): New function.
	(reporter-compose-outgoing): Use fboundp, not functionp.
	(reporter-bug-hook): Fix error message.

	* reporter.el (reporter-beautify-list): Break infloop when
	reaching the end of the buffer without crossing an unbalanced
	paren.  Use scan-sexps instead of forward-sexp for the loop break
	test.

	* reporter.el (reporter-submit-bug-report): Only call
	display-buffer if pop-up-windows is non-nil.

1998-03-19  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/compile.el: Moved from parent directory.

	* compile.el (compilation-error-regexp-alist):
	Handle f90 in  DEC AXP OSF/1 cc  pattern.

1998-03-19  Dave Love  <fx@gnu.org>

	* simple.el (shell-command-on-region): Amend message to report
	success or failure when no process output.

1998-03-18  Richard Stallman  <rms@psilocin.gnu.org>

	* frame.el (focus-follows-mouse): New variable.
	(other-frame): Obey that variable.
	(focus-follows-mouse): Make it defcustom.

1998-03-18  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-fill-paragraph): Adjust
	paragraph-start in default filling case so that filling doc
	strings works.

1998-03-18  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-restore-buffer-context): Only try to restore mark
	if it is active.

1998-03-18  Richard Stallman  <rms@psilocin.gnu.org>

	* calendar/calendar.el (calendar-mode-map): Add bindings for
	appt-add and appt-delete.

1998-03-17  Richard Stallman  <rms@psilocin.gnu.org>

	* help.el (view-emacs-news): Handle prefix arg.

	* loadup.el: Load language/czech and language/slovak.

	* language/czech.el (setup-czech-environment): 3rd arg to
	setup-8-bit-environment is the default input method, not coding system.
	* language/slovak.el (setup-slovak-environment): 3rd arg to
	setup-8-bit-environment is the default input method, not coding system.

	* env.el (setenv): Simplify reading of args by passing old value
	as the default.

	* language/czech.el, language/slovak.el: New files.

	* info.el (Info-menu-update): Set Info-menu-last-node
	to (FILE NODENAME), and test it that way too.

1998-03-17  Emilio Lopes  <Emilio.Lopes@Physik.TU-Muenchen.DE>

	* help.el (view-emacs-news): Use prefix argument to display old news.

1998-03-16  Peter Breton  <pbreton@ne.mediaone.net>

	* generic-x.el: Customize.
	(fvwm-generic-mode): Added new keywords, and .fvwm2rc config file.
	(ini-generic-mode): Changed regexps so that value can contain equal signs.
	(java-manifest-generic-mode): Added new keywords.

1998-03-16  Alfred Correira  <ACorreir@pervasive-sw.com>

	* generic-x.el (mailrc-generic-mode, java-properties-generic-mode):
	New generic modes.
	(alias-generic-mode, rc-generic-mode, rul-generic-mode): Likewise.

1998-03-16  Erik Naggum  <erik@naggum.no>

	* mail/rmail.el (rmail-clear-headers): Make sure an empty line
	still separates the headers from the body.

1998-03-16  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail-quit): Call quit-window before calling
	replace-buffer-in-windows to assure that we can switch the rmail
	buffer of the selected window.

1998-03-16  Richard Stallman  <rms@psilocin.gnu.org>

	* mouse.el (mouse-drag-region): Bind deactivate-mark
	around call to copy-region-as-kill.
	(mouse-set-region): Likewise.
	(mouse-secondary-save-then-kill): Likewise.

	* simple.el (copy-region-as-kill): Set deactivate-mark
	instead of clearing mark-active directly.

1998-03-15  Richard Stallman  <rms@psilocin.gnu.org>

	* help.el (help-mode-maybe): Set view-return-to-alist.
	(help-return-method): New variable.
	(print-help-return-message): Set help-return-method.

	* view.el (view-return-to-alist): Doc fix.
	(view-mode-enter): Doc fix.
	(view-mode-exit): Handle new alternative `quit-window'
	for OLD-BUF-INFO in RETURN-TO-ALIST.

	* dired-aux.el (dired-shell-stuff-it): Use shell-quote-argument.
	(dired-shell-quote): Function deleted.

1998-03-14  Richard Stallman  <rms@psilocin.gnu.org>

	* locate.el (locate-current-line-number): No longer interactive.

	* dirtrack.el: Customized.
	(dirtrack-forward-slash): Renamed from `forward-slash'.
	(dirtrack-backward-slash): Renamed from `backward-slash'.
	(dirtrack-replace-slash): Renamed from `replace-slash'.

	* emacs-lisp/elp.el (elp-version): Now 3.2.

1998-03-14  Karl Heuer  <kwzh@gnu.org>

	* textmodes/texnfo-upd.el (texinfo-incorporate-menu-entry-names)
	(texinfo-start-menu-description): Call regexp-quote.

1998-03-13  Richard Stallman  <rms@psilocin.gnu.org>

	* subr.el (store-match-data): This is now the alias,
	set-match-data is now the primitive.

	* textmodes/reftex.el (reftex-nearest-match):
	store-match-data => set-match-data.

	* textmodes/bibtex.el (bibtex-search-reference):
	store-match-data => set-match-data.

	* progmodes/simula.el (simula-match-string-or-comment):
	store-match-data => set-match-data.

	* progmodes/fortran.el (fortran-match-!-comment):
	store-match-data => set-match-data.

	* play/life.el (life-grim-reaper): store-match-data => set-match-data.

	* mail/rfc822.el (rfc822-looking-at):
	store-match-data => set-match-data.

	* mail/mh-utils.el (mh-make-folder-list-filter):
	store-match-data => set-match-data.

	* emulation/viper-ex.el (ex-expand-filsyms):
	store-match-data => set-match-data.

	* emacs-lisp/edebug.el (edebug-recursive-edit)
	(edebug-outside-excursion): store-match-data => set-match-data.

	* emacs-lisp/debug.el (debug, debugger-env-macro):
	store-match-data => set-match-data.

	* emacs-lisp/cl-macs.el (defsetf match-data):
	store-match-data => set-match-data.

	* type-break.el (type-break-emacs-variant):
	store-match-data => set-match-data.

	* subr.el (save-match-data): store-match-data => set-match-data.

	* rlogin.el (rlogin-parse-words): store-match-data => set-match-data.

	* replace.el (perform-replace): store-match-data => set-match-data.

	* iswitchb.el (iswitchb-ignore-buffername-p):
	store-match-data => set-match-data.

	* ffap.el (ffap-file-at-point): store-match-data => set-match-data.

	* ediff-diff.el (ediff-exec-process):
	store-match-data => set-match-data.

	* comint.el (comint-word): store-match-data => set-match-data.

	* allout.el (outline-end-of-prefix):
	store-match-data => set-match-data.

	* textmodes/fill.el (fill-region-as-paragraph, fill-region):
	Allow t as legit value of JUSTIFY.

	* wid-edit.el (widget-echo-help-mouse): Don't use window-end.

	* subr.el (momentary-string-display): Pass t as UPDATE to window-end.

	* mouse.el (mouse-scroll-subr): Handle if window-end returns nil.

1998-03-12  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/rnewspost.el (news-inews): Signal error if inews fails.

	* simple.el: Implement selective undo (by Paul Flinders).
	(undo-copy-list, undo-copy-list-1): New functions.
	(undo-make-selective-list, undo-delta): New functions.
	(undo-elt-in-region, undo-elt-crosses-region): New functions.
	(undo-adjusted-markers): New defvar.
	(undo-start): New args BEG and END.
	(undo): If arg or active region, pass args to undo-start.

	* mouse.el (mouse-buffer-menu-maxlen): Renamed from
	mouse-menu-buffer-maxlen.

1998-03-10  Eric M. Ludlam  <zappo@ultranet.com>

	* checkdoc.el (checkdoc-continue): Removed check for doc string.
	(checkdoc-this-string-valid-engine): Smarter keycode check regexp.

1998-03-10  Carsten Dominik  <cd@delysid.gnu.org>

	* textmodes/reftex.el (reftex-mode-map): Added keybinding for
	`reftex-mouse-view-crossref' to `S-mouse-2'.

1998-03-09  Carsten Dominik  <cd@delysid.gnu.org>

	* textmodes/reftex.el (reftex-nicify-text): Make a new " " string
	each time.
	(reftex-what-macro): Make sure `reftex-section-regexp' is defined.

1998-03-09  Richard Stallman  <rms@psilocin.gnu.org>

	* textmodes/tex-mode.el (latex-mode): Set fill-nobreak-predicate.
	(slitex-mode): Set fill-nobreak-predicate, tex-face-alist,
	and imenu-create-index-function.
	(latex-fill-nobreak-predicate): New function.

	* simple.el (do-auto-fill): Obey fill-nobreak-predicate.

	* textmodes/fill.el (fill-nobreak-predicate): New variable.
	(fill-region-as-paragraph): Obey fill-nobreak-predicate.

	* help-macro.el (make-help-screen): Mention DEL in the prompt.

1998-03-08  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/autoload.el (update-file-autoloads):
	Undo 1997-08-23 change.

	* window.el (shrink-window-if-larger-than-buffer):
	Bind text-height in the let*.
	(view-return-to-alist): Add defvar.

	* files.el: Delete junk accidentally left in buffer on 4 March.

1998-03-08  Carsten Dominik  <cd@gnu.org>

	* textmodes/reftex.el (reftex-offer-label-menu)
	(reftex-select-item): Removed match-everywhere interpretation.

1998-03-08  Carsten Dominik  <cd@gnu.org>

	* textmodes/reftex.el (reftex-cursor-selected-face)
	(reftex-mouse-selected-face, reftex-file-boundary-face)
	(reftex-label-face, reftex-section-heading-face)
	(reftex-toc-header-face, reftex-bib-author-face)
	(reftex-bib-year-face, reftex-bib-title-face)
	(reftex-bib-extra-face): New options.
	(reftex-toc, reftex-make-and-insert-label-list)
	(reftex-format-bib-entry, reftex-section-info): Use fonts defined
	in the new options.
	(reftex-do-citation): Kill buffer *RefTeX Select* to avoid
	problems with lazy-lock.

1998-03-08  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-context-matches-p): New function.
	(vc-restore-buffer-context): Restore point and mark only if they
	don't match the context.
	(vc-revert-buffer1, vc-clear-headers): Use save-excursion to relocate
	point and mark, and vc-restore-buffer-context as a backup.
	(vc-resynch-buffer): When operating on the current buffer, don't use
	save-excursion, because that would undo the effects of the above
	functions.
	(vc-clear-headers): Fixed regexp.
	(vc-resynch-window): Deleted code that removed vc-find-file-hook
	temporarily.  This was unnecessary, because find-file-hooks are not
	called when the buffer is reverted.

1998-03-08  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/cc-vars.el (c-emacs-features): Doc fix.

1998-03-07  Richard Stallman  <rms@psilocin.gnu.org>

	* subr.el (read-passwd): Renamed from read-password.
	New second arg CONFIRM.

	* wid-edit.el (widget-choice-value-create): If there is an
	:explicit-choice, respect it.
	(widget-choice-action): Record an explicit choice in :explicit-choice.

1998-03-07  Stephen Eglen  <stephen@gnu.org>

	* allout.el, battery.el, cmuscheme.el, compare-w.el, docref.el:
	* dos-fns.el, find-file.el, follow.el, ispell4.el, shadowfile.el:
	* tempo.el, tmm.el, vcursor.el, xscheme.el: Customize.

1998-03-06  Barry A. Warsaw  <cc-mode-help@python.org>

	* Release 5.21

	* progmodes/cc-defs.el (c-emacs-features): Var moved to cc-vars.el.

	* progmodes/cc-vars.el (c-emacs-features): Var moved from cc-defs.el.

	* progmodes/cc-align.el: Don't require cc-defs.

	* progmodes/cc-engine.el (c-inside-bracelist-p): Fix for enum test.

	* progmodes/cc-mode.el (c-initialize-cc-mode):
	Moved require's to top level.

	* progmodes/cc-cmds.el (c-fill-paragraph):
	Bind fill-paragraph-function to nil when calling fill-paragraph,
	to avoid bogus recursion which will signal an error.

1998-03-06  Martin Stjernholm  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-initialize-on-load): Variable removed.

	* progmodes/cc-cmds.el (c-fill-paragraph): Always keep point in
	the same relative position.  Fill comment before point if there's
	nothing else on the same line.  Fill block comments after code a
	little better.  Try harder to find a good fill-prefix when point
	is on a block comment ender line.  Use
	c-Java-javadoc-paragraph-start in block comments in Java mode.
	Leave block comment ender alone when c-hanging-comment-ender-p is
	nil and point is on that line.  Detect paragraph-separate in
	multiparagraph comments.  Fix for bug that may strip the `*' off
	`*/' if fill-prefix ends with `*' and c-hanging-comment-ender-p is
	t.  Added filling of multiline string literals.  Always return t
	to disable filling in any unhandled area, i.e. actual code where
	fill-paragraph only mess things up.

	* progmodes/cc-engine.el (c-collect-line-comments): Require same
	comment start column.

	* progmodes/cc-langs.el (c-Java-javadoc-paragraph-start): New variable.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixes for nesting
	of and repeated defun-open's inside extern and namespace clauses.
	This is done by passing a relpos to `inextern-lang' and
	`innamespace'.  Also, the relpos in `defun-open' is no longer
	always bol.  It's always bol when on the top level, however.
	Changed cases: 5A.5, 5I, 14A.

	* progmodes/cc-engine.el (c-forward-token-1, c-backward-token-1): New
	functions to move by tokens.
	(c-guess-basic-syntax): Fixes for Java 1.1 array initialization
	brace lists.

1998-03-06  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Some comment, doc and bug fixes.
	(ps-print-version): New version number (3.06) and doc fix.
	(ps-print-only-one-header, ps-font-type): New var.
	(ps-font-info-database): Better font database management.
	(ps-error-scale-font, ps-select-header-font): Funs eliminated.
	(ps-font, ps-font-bold, ps-font-italic, ps-font-bold-italic)
	(ps-avg-char-width, ps-space-width, ps-line-height)
	(ps-header-font, ps-header-title-font, ps-header-line-height)
	(ps-header-title-line-height): Vars eliminated.
	(ps-font-list, ps-font, ps-fonts, ps-font-number, ps-line-height)
	(ps-title-line-height, ps-space-width, ps-avg-char-width): New funs.
	(ps-print-prologue-1): Adjust PostScript programming.
	(ps-color-format): Doc indentation.
	(ps-print-hook, ps-print-begin-page-hook, ps-print-begin-column-hook):
	New hook vars.
	(ps-spool-without-faces, ps-spool-with-faces): Run hook var.
	(ps-line-lengths-internal, ps-nb-pages, ps-select-font)
	(ps-get-page-dimensions, ps-begin-file, ps-end-file, ps-header-page)
	(ps-begin-page, ps-dummy-page, ps-next-line, ps-continue-line)
	(ps-basic-plot-string, ps-basic-plot-whitespace, ps-plot-region)
	(ps-control-character, ps-color-values, ps-generate): Adjust programming.
	(ps-page-number): New macro.
	(ps-plot-with-face, ps-generate-postscript-with-faces): Fix invisible
	text printing.

1998-03-06  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el (fortran-column-ruler-fixed)
	(fortran-column-ruler-tab): Doc fix.
	(fortran-mode-map): Bind fortran-narrow-to-subprogram.
	(bug-fortran-mode): Variable deleted.

1998-03-06  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Various doc fixes, mainly to remove innappropriate
	leading "*"s.
	(browse-url-new-window-p, browse-url-netscape-display)
	(browse-url-save-file, browse-url-generic-program):
	Add autoload cookies.
	(browse-url-mosaic-program, browse-url-lynx-input-field)
	(browse-url-lynx-input-attempts, browse-url-lynx-input-delay):
	Add :version.
	(browse-url-of-file-hook): Add :options.
	(browse-url-lynx-emacs-args): New option.
	(browse-url-lynx-emacs): Use it.
	(browse-url-lynx-xterm): Use backquote.
	(browse-url-emacs-display): Use Emacs version, not XEmacs.
	((require 'term)): When compiling.

1998-03-06  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (titdic-convert): Use
	set-buffer-multibyte.

	* international/quail.el (quail-defrule-internal): New arg REPLACE.
	(quail-defrule): Call quail-defrule-internal with REPLACE t.

1998-03-05  Peter Breton  <pbreton@ne.mediaone.net>

	* generic.el (generic-mode-ini-file-find-file-hook): Use
	and-s instead of if-s.
	(generic-use-find-file-hook): Changed from defvar to defcustom.
	(generic-lines-to-scan): Changed from defvar to defcustom.
	(generic-find-file-regexp): Changed from defvar to defcustom.

1998-03-05  Ivar Rummelhoff  <ivarr@ifi.uio.no>

	* winner.el (winner-mode, winner-save-unconditionally)
	(winner-hook-installed-p): Save window configuration after
	every command if window-configuration-change-hook is not present.

	* winner.el (winner-save-new-configurations, winner-insert-if-new):
	Compare a new window configuration
	with the previous configuration before saving it.

	* winner.el (winner-insert-if-new, winner-ring)
	(winner-configuration, winner-set): Save buffer list together
	with the window configurations, so that windows that can no
	longer be correctly restored can instead be deleted.

	* winner.el (winner-undo): Compare restored configuration
	with other configurations that have been reviewed and skip
	this one if it looks similar.

	* winner.el (winner-insert-if-new, winner-save-new-configurations)
	(winner-save-unconditionally): Just save the final
	configuration if the same command (changing the window
	configuration) is applied several times in a row.

	* winner.el (winner-switch): Removed the command
	`winner-switch' (and the variables connected to it), since
	because of the change above, any "switching package" may now
	be used without disturbing winner-mode too much.

	* winner.el: Use list syntax for key definitions.

	* winner.el (winner-change-fun): Removed the pushnew
	command, so that `cl' will not have to be loaded.

	* winner.el (winner-set-conf): Introduced "wrapper" around
	`set-window-configuration', so that `winner-undo' may be
	called from the minibuffer.

1998-03-06  Carsten Dominik  <cd@delysid.gnu.org>

	* textmodes/reftex.el (reftex-select-item): A set-buffer in the
	unwind-protect form makes sure we deinstall in the correct hooks.

1998-03-05  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/rmail.el (rmail-next-same-subject): Ignore leading and
	trailing whitespace in this message's subject.

1998-03-05  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* battery.el: Fixed spelling of `autoload' magic cookies.

1998-03-05  Sam Steingold  <sds@usa.net>

	* simple.el (backward-delete-char-untabify-method): New user option.
	(backward-delete-char-untabify): Obey it.
	This implements "hungry" delete.

1998-03-04  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-pattern): New variable.
	(time-stamp): Use that new variable.
	(time-stamp-string): Take optional format arg.

1998-03-04  Richard Stallman  <rms@psilocin.gnu.org>

	* files.el (auto-mode-alist): Recognize zone-mode.
	(basic-save-buffer): Use save-current-buffer not save-excursion.

1998-02-27  Dave Love  <d.love@dl.ac.uk>

	* wid-edit.el (widget-url-link-action): Call browse-url to sort
	out browser function.  Don't require browse-url.

1998-03-04  Kenichi Handa  <handa@etl.go.jp>

	* subr.el (sref): Increase CHAR in the while loop.

1998-03-03  Sam Steingold  <sds@usa.net>

	* dired.el (dired-quit): Function deleted.
	(dired-mode-map): Use quit-window for q.

	* buff-menu.el (Buffer-menu-quit): Function deleted.
	(Buffer-menu-mode-map): Use quit-window for q.

	* bookmark.el (bookmark-bmenu-mode-map): Use quit-window for q.
	(bookmark-bmenu-quit): Function deleted.

	* progmodes/make-mode.el (makefile-browser-quit): Use quit-window.

	* progmodes/etags.el (select-tags-table-quit): Use quit-window.

	* play/solitaire.el (solitaire-quit): Function deleted.
	(solitaire-mode-map): Use quit-window for q.

	* mail/rnews.el (news-exit): Use quit-window.

	* mail/rmail.el (rmail-bury, rmail-quit): Use quit-window.

	* mail/mh-e.el (mh-quit): Use quit-window.

1998-03-03  Richard Stallman  <rms@psilocin.gnu.org>

	* textmodes/fill.el (fill-region): If JUSTIFY is non-nil
	and not a known value, treat it as `full'.
	(fill-region-as-paragraph): Likewise.

1998-03-03  Peter Stephenson  <pws@ifh.de>

	* vcursor.el: Some support for character terminals provided.
	Various functions are smarter about using the correct windows
	and the appropriate keymaps.
	(vcursor-string): New variable, shows vcursor on dumb terminals.
	(vcursor-map): New variable, holds keymap for vcursor commands.
	(vcursor-use-vcursor-map): New variable, non-nil if vcursor
	keys are overlaid onto main keymap.
	(vcursor-toggle-vcursor-map): New function to implement this.
	(vcursor-interpret-input): New variable, copy input as if typed.
	(vcursor-window-funcall): With list instead of symbol, now calls
	interactively.
	(vcursor-isearch-backward): New function to match forward isearch.

1998-03-03  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-default-method): Redundant :tag entries
	removed.
	Doc fixes.

1998-03-03  Kenichi Handa  <handa@etl.go.jp>

	* dired.el (dired-get-filename): Don't call encode-coding-string
	if default-file-name-coding-system is non-nil.

	* files.el (insert-directory): Bind coding-system-for-write.
	Don't encode filename here because call-process encodes the
	arguments by coding-system-for-write.

1998-03-03  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-interaction-mode-map)
	(emacs-lisp-mode-map, lisp-mode-map): Use set-keymap-parent.

1998-03-02  Sam Steingold  <sds@usa.net>

	* window.el (quit-window): New command.

1998-03-02  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/gulp.el (gulp-send-requests): Call sort properly.
	When showing the message, put point at beginning of buffer.

1998-03-02  Kenichi Handa  <handa@etl.go.jp>

	* files.el (insert-directory): Bind coding-system-for-read to
	file-name-coding-system or default-file-name-coding-system if
	enable-multibyte-characters is non-nil.

	* simple.el (quoted-insert): Allow direct insertion of codes in
	the range 0200..0237.  Use unibyte-char-to-multibyte for codes in
	the range 0240..0377.

	* subr.el (sref): Typo in doc-string fixed.

	* international/mule-cmds.el (set-default-coding-systems): Set
	default-file-name-coding-system.  Doc-string modified.
	(prefer-coding-system): Doc-string modified.

	* language/japan-util.el (setup-japanese-environment): Set
	default-file-name-coding-system to japanese-iso-8bit.

1998-03-02  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-change):
	Handle case of no keywords.

	* ange-ftp.el (ange-ftp-call-chmod): Don't try to chmod file `--'.

1998-03-02  Dave Love  <fx@gnu.org>

	* winner.el ((require 'cl)): Revert to compile-time require.
	Eliminating pushnew previously had actually fixed the lossage.

1998-03-02  Richard Stallman  <rms@psilocin.gnu.org>

	* isearch.el (isearch-*-char): Do nothing special if quoted with \.

1998-03-01  Richard Stallman  <rms@psilocin.gnu.org>

	* generic.el: Provide generic, not generic-mode.
	Several doc fixes.

	* generic-x.el: New file.

	* add-log.el (change-log-font-lock-keywords): Recognize + in date.

1998-03-01  Peter Breton  <pbreton@ne.mediaone.net>

	* locate.el (locate-update): New function.
	(locate-current-line-number): Renamed from `current-line'.
	(locate-default-make-command-line): Use list, not cons.
	(locate): Added a `save-window-excursion' form.
	(locate): Used an `apply' form for the start-process call.
	(locate-mode): Now has a `revert-buffer-function'.
	(locate-do-setup): Now longer deletes window.
	(locate-header-face): Use underline, not region.
	(locate-update-command): New option.
	(locate-command): Changed from defvar to defcustom.
	(locate-make-command-line): Changed from defvar to defcustom.
	(locate-fcodes-file): Changed from defvar to defcustom.
	(locate-mouse-face): Changed from defvar to defcustom.

1998-02-28  Richard Stallman  <rms@psilocin.gnu.org>

	* subr.el (read-quoted-char): Doc fix.

1998-02-27  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (info): Always switch to buffer *info* even if
	current buffer is in Info mode.

	* comint.el (comint-arguments): Treat \" and such as part of one arg.

	* files.el (set-visited-file-name): Don't call backup-enable-predicate
	when buffer-file-name is nil.

	* progmodes/make-mode.el (make-mode): Provide make-mode, not makefile.

	* international/mule.el (load-with-code-conversion):
	Don't bind enable-multibyte-characters; instead,
	bind default-enable-multibyte-characters before creating buffer.
	(after-insert-file-set-buffer-file-coding-system):
	Use set-buffer-multibyte.
	Use add-hook to add this to after-insert-file-functions.

	* avoid.el (mouse-avoidance-kbd-command): Function deleted.
	(mouse-avoidance-fancy-hook, mouse-avoidance-exile-hook)
	(mouse-avoidance-banish-hook): Test whether last command
	was a mouse command of any kind.

1998-02-27  Karl Heuer  <kwzh@gnu.org>

	* dired-x.el (dired-do-toggle): Function moved to dired.el.
	* dired.el (dired-do-toggle): Moved here from dired-x.el.
	(dired-mode-map): Changed dired-do-toggle from "T" to "t".

1998-02-27  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* textmodes/reftex.el: Remove debugging statements.

1998-02-27  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el, vc.el: Added version ids.

	* vc.el (vc-default-init-version): New variable.
	(vc-register): Use it.  Also use COMMENT argument.

1998-02-27  Dave Love  <fx@gnu.org>

	* international/iso-cvt.el (iso-spanish, iso-german, iso-iso2tex)
	(iso-tex2iso, iso-gtex2iso, iso-iso2gtex, iso-iso2duden): Fix doc,
	interactive spec.

1998-02-27  Simon Marshall  <simon@gnu.org>

	* comint.el (comint-dynamic-complete-filename): Don't wrap up the value
	of directory-sep-char when calling comint-dynamic-complete-as-filename.
	(comint-dynamic-complete-as-filename, comint-exec-1):
	Use directory-sep-char rather than "/".

1998-02-25  Dave Love  <fx@gnu.org>

	* thingatpt.el (thing-at-point-url-at-point):
	Intuit ftp:// on `short' URLs.

1998-02-25  Richard Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-retry-failure): Don't insist on finding
	MIME delimiter again at end of bounce text.
	(mail-unsent-separator): Accept "Your message follows".

	* cus-edit.el (custom-file): New function.
	(custom-save-delete): Use it.
	(custom-save-all): Use it.

	* shell.el (shell-dirtrack-mode): Renamed from shell-dirtrack-toggle.
	(dirtrack-mode, shell-dirtrack-toggle): Defined as aliases.

1998-02-25  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* textmodes/reftex.el (reftex-toc-mode, reftex-select-label-mode)
	(reftex-select-bib-mode): New major modes for RefTeX's special buffers.
	(reftex-offer-label-menu): Put selection buffer into
	`reftex-select-label-mode'.  Make selection buffer read-only.  Use
	`reftex-erase-buffer'.
	(reftex-do-citation): Put selection buffer into
	`reftex-select-bib-mode'.  Make selection buffer read-only.  Use
	`reftex-erase-buffer'.  Set `reftex-select-return-marker'.
	(reftex-toc): Put *toc* buffer into reftex-toc-mode.  Add
	mouse-face property.
	(reftex-select-item): Use recursive edit instead of selfmade
	command loop.  Removed unnecessary local bindings.  Changed the
	tag for catch, to avoid problems with `exit' tag in
	recursive-edit.  Moved the code around old command loop to pre-
	and post-command-hook.
	(reftex-select-pre-command-hook, reftex-select-post-command-hook)
	(reftex-select-show-insertion-point): New functions.
	(reftex-reference): Set `reftex-select-return-marker'.
	(reftex-check-recursive-edit): Error message changed.
	(reftex-select-search-minibuffer-map): Obsolete constant removed.
	(reftex-select-next, reftex-select-previous, reftex-select-scroll-up)
	(reftex-select-scroll-down, reftex-select-next-heading)
	(reftex-select-previous-heading): Handle prefix arguments.
	(reftex-toc, reftex-make-and-insert-label-list)
	(reftex-insert-bib-matches): Add mouse-face property.
	(reftex-highlight-selection): New option.
	(reftex-select-mouse-accept): New command.
	(reftex-select-recursive-edit, reftex-select-search-forward)
	(reftex-select-search-backward, reftex-select-search)
	(reftex-select-scroll-up, reftex-select-scroll-down)
	(reftex-scroll-other-window, reftex-scroll-other-window-down)
	(reftex-empty-toc-buffer): Removed obsolete functions.
	(reftex-highlight-overlays): Removed obsolete 3rd overlay.
	(reftex-select-label-map, reftex-select-bib-map): Removed obsolete
	bindings, added mouse bindings, `digit-argument',
	`negative-argument', `reftex-select-show-insertion-point'.
	(reftex-erase-buffer): BUFFER now defaults to current buffer.
	(reftex-label-alist-builtin): Added sidecap packages support.
	(reftex-last-follow-point, reftex-select-return-marker): New variables.
	(reftex-toc, reftex-select-item): Set `reftex-last-follow-point'.
	(reftex-toc-post-command-hook): Use `reftex-last-follow-point'.
	(reftex-get-file-buffer-force): Turn off `enable-local-variables'
	when reading a file literally.

1998-02-25  Per Starb√§ck  <starback@strindberg.ling.uu.se>

	* play/doctor.el (mathlst): Fix typo.
	(shortlst): Avoid saying "Can you be", which confuses the doctor.

	* vc.el (vc-register): Update vc-buffer-backend.

1998-02-25  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* info-look.el: Added support for the Emacs Lisp manual.
	(info-complete-file): Use default value if MODE is nil.
	(info-lookup-file-alist): Variable removed.

	* battery.el (battery-linux-proc-apm-regexp): Load percentage
	and remaining time have to match negative values.
	(battery-linux-proc-apm): Initialize void %-sequences.

1998-02-25  Aki Vehtari  <Aki.Vehtari@hut.fi>

	* tar-mode.el: Add "q" for quit, and use "C" for copy and "R" for
	rename as in dired.

1998-02-25  Dan Nicolaescu  <done@ece.arizona.edu>

	* winner.el (winner-mode-hook): Fix typo.
	(winner-mode-leave-hook): Use defcustom.  Fix typo.

1998-02-24  Dave Love  <fx@gnu.org>

	* winner.el: (require 'cl) unconditionally.
	(winner): defgroup.
	(winner-dont-bind-my-keys, winner-skip-buffers)
	(winner-skip-regexps, winner-mode, winner-mode-hook)
	(winner-mode-leave-hook): Customized.
	(winner-mode): Add autoload cookie.
	(winner-undo): Doc fix.

	* vc.el (vc-checkin-hook): Add :options.
	(vc-checkin, vc-comment-to-change-log): Doc fix.

	* compile.el (compilation-error-regexp-alist): Allow initial
	program name in first pattern.

1998-02-23  Stephen Eglen  <stephen@gnu.org>

	* textmodes/spell.el: Doc fix.

1998-02-22  Stephen Eglen  <stephen@gnu.org>

	* emacs-lisp/find-func.el: Customize.
	* emulation/crisp.el: Customize.
	* mail/mail-extr.el, mail/uce.el, mail/sendmail.el: Customize.
	* mail/uce.el: Customize.
	* progmodes/cperl-mode.el, progmodes/modula2.el: Customize.
	* progmodes/perl-mode.el, progmodes/simula.el: Customize.
	* progmodes/tcl-mode.el: Customize.
	* textmodes/bib-mode.el, textmodes/picture.el: Customize.
	* textmodes/refbib.el, textmodes/refer.el: Customize.
	* textmodes/scribe.el, textmodes/spell.el: Customize.

1998-02-21  Sam Steingold  <sds@usa.net>

	* emacs-lisp/cl-indent.el: Fix indentation rules for
	multiple-value-setf and multiple-value-list.

1998-02-21  Simon Marshall  <simon@gnu.org>

	* font-lock.el (font-lock-constant-face): Variable and face renamed
	from font-lock-reference-face.
	(font-lock-reference-face): Changed value to font-lock-constant-face.

	* add-log.el:
	* dired.el:
	* emacs-lisp/checkdoc.el:
	* help.el:
	* ielm.el:
	* mail/rmail.el:
	* mail/sendmail.el:
	* outline.el:
	* pascal.el:
	* play/decipher.el:
	* progmodes/ada-mode.el:
	* progmodes/awk-mode.el:
	* progmodes/cperl-mode.el:
	* progmodes/f90.el:
	* progmodes/fortran.el:
	* progmodes/icon.el:
	* progmodes/make-mode.el:
	* progmodes/meta-mode.el:
	* progmodes/modula2.el:
	* progmodes/octave-mod.el:
	* progmodes/perl-mode.el:
	* progmodes/scheme.el:
	* progmodes/simula.el:
	* ps-print.el:
	* textmodes/bibtex.el:
	* textmodes/reftex.el:
	* textmodes/texinfo.el: Updated accordingly.

1998-02-20  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail-decode-babyl-format): Message modified.
	(rmail): Comment for the binding of rmail-enable-multibyte added.

1998-02-19  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el
	(after-insert-file-set-buffer-file-coding-system): Call
	set-buffer-multibyte instead of directly setting
	enable-multibyte-characters to nil.

	* language/china-util.el (setup-chinese-cns-environment): Correct
	the setting of default-input-method.

	* international/mule-cmds.el (select-safe-coding-system): Kill the
	warning buffer before returning.

	* mail/rmail.el (rmail-enable-multibyte): New variable.
	(rmail): Bind coding-system-for-read to raw-text.  Set the buffer
	multibyte if necessary.
	(rmail-convert-file): Call rmail-decode-babyl-format only when we
	don't have to call rmail-convert-to-babyl-format.
	(rmail-decode-babyl-format): If rmail-file-coding-system is nil,
	detect it.
	(rmail-get-new-mail): Bind rmail-enable-multibyte locally.
	(rmail-convert-to-babyl-format): Check the value of
	rmail-enable-multibyte instead of enable-multibyte-characters.

	* subr.el (sref): Doc-string added.

1998-02-18  Simon Marshall  <simon@gnu.org>

	* font-lock.el (font-lock-keywords)
	(font-lock-syntactic-keywords): Doc fixes.

1998-02-17  Dave Love  <fx@gnu.org>

	* textmodes/sgml-mode.el (sgml-mode-common): Downcase key for
	assoc so upper-case markup works.
	(sgml-attributes, sgml-tag-help): Likewise.

1998-02-17  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/cc-styles.el (c-copy-tree): New function.
	(c-initialize-builtin-style): Use c-copy-tree.

1998-02-16  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (Info-summary): Clear buffer-read-only.

1998-02-16  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* info-look.el (info-complete): Rewrite minibuffer completion code.

	* info-look.el (info-lookup-minor-mode, turn-on-info-lookup):
	Added minor mode interface.
	(info-lookup-minor-mode-string): New variable.
	(info-lookup-minor-mode-map): New variable.

	* info-look.el: Provide a work-around if the custom library is
	not available.

	* info-look.el (info-lookup-other-window-flag)
	(info-lookup-highlight-face): Variables customized.

	* info-look.el (info-lookup-alist): No longer customizable.
	(info-lookup-add-help, info-lookup-maybe-add-help): Interface
	functions for adding new modes.
	(info-lookup-add-help*): New function.
	(info-lookup-symbol-alist, info-lookup-file-alist): Variables deleted.
	This info is specified now by calling info-lookup-maybe-add-help
	and info-lookup-add-help.

1998-02-16  Martin Stjernholm  <cc-mode-help@python.org>

	* progmodes/cc-align.el (c-lineup-close-paren)
	(c-indent-one-line-block): New indentation functions.

	* progmodes/cc-cmds.el (c-beginning-of-statement)
	(c-end-of-statement): Do not move by sentence in strings.

	* progmodes/cc-cmds.el (c-beginning-of-statement):
	Major rewrite.

	* progmodes/cc-engine.el (c-forward-syntactic-ws, c-backward-syntactic-ws):
	Don't narrow, just make a simple check against the given limit.

	(c-collect-line-comments): New function.

	(c-literal-limits): New function that finds the start and end pos
	of a comment or string surrounding point.

	(c-literal-limits-fast): A faster variant of `c-literal-limits'
	for newer Emacsen where the state returned from
	`parse-partial-sexp' contains the starting pos of the last
	literal.

1998-02-16  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-mode, c++-mode, objc-mode, java-mode): Set
	imenu-case-fold-search to nil.

	* progmodes/cc-langs.el (c-postprocess-file-styles): If a file
	style or file offsets are set, make the variables local to the
	buffer (via make-local-variable).

	* progmodes/cc-styles.el (c-make-styles-buffer-local): Take an optional
	argument which switches between make-variable-buffer-local and
	make-local-variable.  Generalize.

	* progmodes/cc-defs.el (c-point): In XEmacs, use scan-lists +
	buffer-syntactic-context-depth.

	* progmodes/cc-vars.el (c-enable-xemacs-performance-kludge-p): New
	variable.

	* progmodes/cc-cmds.el, progmodes/cc-engine.el (c-beginning-of-defun)
	(c-indent-defun, c-parse-state): Use (c-point 'bod) instead of
	beginning-of-defun directly.

	* progmodes/cc-align.el (c-semi&comma-no-newlines-before-nonblanks)
	(c-semi&comma-no-newlines-for-oneline-inliners): New functions.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixed a few byte
	compiler warnings.

	* progmodes/cc-cmds.el (c-beginning-of-defun, c-end-of-defun):
	New commands.

	* progmodes/cc-engine.el (c-backward-to-start-of-do): Break infloop for
	invalid code, e.g. when someone types while (TRUE) { at the top of
	a buffer, we shouldn't hang when the { is typed!

	* progmodes/cc-cmds.el (c-beginning-of-statement): When moving
	forward by sentences, because we're either inside or at the start
	of a comment, be sure to limit movement to only within the extent
	of the comment.

	* progmodes/cc-langs.el (c-java-method-key): Variable deleted.

	* progmodes/cc-mode.el (java-mode): Set c-method-key to nil.  I
	don't think this is necessary for Java, and besides, the old value
	was inherited from Objective-C which was clearly not right.

	* progmodes/cc-cmds.el (c-electric-colon): Don't insert newlines
	before or after scope operators, regardless of the value of
	c-hanging-colons.

	* progmodes/cc-engine.el (c-backward-to-start-of-if): Ensure never
	move forward, not even if point < lim.

	* progmodes/cc-align.el (c-lineup-dont-change): New lineup
	function that leaves the current line's indentation unchanged.
	Used for the new cpp-macro-cont syntactic symbol.

	* progmodes/cc-cmds.el (c-electric-brace): namespace-open and
	namespace-close braces can hang.

	* progmodes/cc-defs.el (c-emacs-features): Added autoload cookie.

	* progmodes/cc-engine.el (c-search-uplist-for-classkey): When
	searching up for a class key, instead of hardcoding the extended
	search for "extern", use the new variable c-extra-toplevel-key,
	which is language dependent.  For C++, this variable includes the
	keyword "namespace" which will match C++ namespace introducing
	blocks.

	(c-guess-basic-syntax): Support for recognizing C++ namespace
	blocks, by elaborating on the mechanism used to find external
	language blocks.  Searches which hardcoded "extern" now use
	c-extra-toplevel-key, a language dependent variable.  Case clauses
	that were modified: CASE 5A.1, CASE 5A.4, CASE 5F, CASE 5I, CASE
	14A.

	CASE 3: we can now determine whether we're at the beginning of a
	cpp macro definition, or inside the middle of one.  Set syntax to
	'cpp-macro in the former case, 'cpp-macro-cont in the latter.  In
	both cases, the relpos is the beginning of the macro.

	(c-forward-syntactic-ws): Added code that skips forward over
	multi-line cpp macros.

	(c-beginning-of-macro): Moved, and made into a defsubst.  This
	function can now actually find the beginning of a multi-line C
	preprocessor macro.

	(c-backward-syntactic-ws): Use c-beginning-of-macro to skip
	backwards over multi-line macro definitions.

	(c-in-literal, c-fast-in-literal): Use c-beginning-of-macro to
	find out whether we're in a multi-line macro definition.

	* progmodes/cc-langs.el (c-C-extra-toplevel-key)
	(c-C++-extra-toplevel-key, c-extra-toplevel-key): New variables
	which parameterize the search for additional top-level enclosing
	constructs.

	* progmodes/cc-menus.el: Imenu support changed.

	* progmodes/cc-mode.el (c++-mode): Set c-extra-toplevel-key to
	c-C++-extra-toplevel-key.
	(c-initialize-on-load): New variable, *not* customized.

	* progmodes/cc-styles.el (c-offsets-alist): Three new syntactic
	symbols: innamespace, namespace-open, namespace-close.  These
	support C++ namespace blocks.
	Also, new syntactic symbol cpp-macro-cont, by default bound to
	c-lineup-dont-change.  This symbol is assigned to subsequent lines
	of a multi-line C preprocess macro definition.

	* progmodes/cc-vars.el (c-default-style): Start doc string with *.

	* progmodes/cc-engine.el (c-fast-in-literal): Function which
	should be faster than c-in-literal.  In XEmacs, this uses
	buffer-syntactic-context.

	* progmodes/cc-cmds.el (c-comment-line-break-function): When breaking a
	line-oriented comment, copy the comment leader from the previous
	line instead of hardcoding it to "// ".  This ensures that
	whitespace between the slashes and the text is preserved.

	* progmodes/cc-cmds.el (c-electric-pound, c-electric-brace)
	(c-electric-slash, c-electric-star, c-electric-semi&comma)
	(c-electric-colon, c-electric-lt-gt, c-scope-operator)
	(c-electric-backspace, c-electric-delete)
	(c-indent-command, c-indent-exp, c-indent-defun)
	(c-backslash-region, c-fill-paragraph): Add "*" to interactive spec.

	* progmodes/cc-cmds.el (c-fill-paragraph): regexp-quote the
	fill-prefix when search forward for the end of line oriented comments.
	(c-backslash-region): Do not preserve the zmacs region (XEmacs).

	* progmodes/cc-langs.el (c-mode-base-map):
	c-mark-function moved back to M-C-h.

	* progmodes/cc-styles.el (c-style-alist): "jdk" style given by Martin
	Buchholz <mrb@Eng.Sun.COM> for conformance with Sun's JDK style.

	* progmodes/cc-styles.el (c-set-style-2, c-initialize-builtin-style):
	Don't special case "cc-mode", it's a derived style.
	Fix setup of derived style "cc-mode".
	Introduce the new default style "user" which contains all user
	customizations.

	* progmodes/cc-vars.el (c-default-style): Renamed from
	c-site-default-style.

1998-02-15  Aki Vehtari  <Aki.Vehtari@hut.fi>

	* bibtex.el (bibtex-autokey-names): Change number tag to integer.

	* bibtex.el (bibtex-include-OPTkey): Add non-nil default :value
	for function, so that it can be selected.
	(bibtex-entry-format): Replace repeat with set.
	(bibtex-mode-hook): Change :type to 'hook.
	(bibtex-clean-entry-hook): Ditto.
	(bibtex-add-entry-hook): Ditto.
	(bibtex-autokey-before-presentation-hook): Change name to ->
	`bibtex-autokey-before-presentation-function' as it is not hook.
	(bibtex-autokey-get-namefield): Remove newlines unconditionally.

	* bibtex.el (bibtex-autokey): Fixed prefix.
	(bibtex-user-optional-fields): Better `:type'.
	(bibtex-autokey-names): Better `:type' and doc-fix.
	(bibtex-mark-active): New function, taking care of Emacs variants.
	(bibtex-run-with-idle-timer): Ditto.
	(bibtex-mode-map): Change `[(control tab)]' to `[(meta tab)]'.
	(bibtex-autokey-get-yearfield): Changed to accept year when year
	field has field-delimiters.  This is quick fix, there might
	be better solution.
	(bibtex-mode): Don't call idle timer with 0 seconds.
	(bibtex-mode): Call easy-menu-add.

1998-02-15  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* bibtex.el (bibtex-autokey-get-yearfield): Fixed problem with
	parsing the year field.

	* bibtex.el (bibtex-comment-start): Font locking for comments added.

	* bibtex.el (autokey-name-case-convert)
	(autokey-titleword-case-convert): Replace autokey-preserve-case, adding
	flexibility to case conversion of author names and titlewords.

	* bibtex.el (bibtex-autokey-get-titles): Non capitalized title words
	are used for key generation as well.
	(bibtex-member-of-regexp): Case is honored for matches now.
	(bibtex-autokey-titleword-ignore): Added entries provide compatibility
	to former behavior.

	* bibtex.el (bibtex-autokey-titleword-ignore): Title words found in
	this list are always ignored (previously only at the beginning of the
	title).  Replaces bibtex-autokey-titleword-first-ignore.

1998-02-15  Stephen Eglen  <stephen@gnu.org>

	* msb.el (msb--choose-file-menu): Prevent looping when examining
	ange-ftp directory paths.
	(msb-modes-key): New variable.
	(msb--mode-menu-cond, msb--aggregate-alist): New functions.
	(msb--split-menus): Check if msb-max-file-menu-items is nil.
	(msb--format-title): Remove extra / after ~.
	File customized.
	Redundant (function ...) forms around lambda functions removed.
	Update copyright year.

	* hexl.el (hexl-mode-exit): Remove hexl-follow-ascii-find
	from post-command-hook when leaving hexl-mode.

1998-02-14  Simon Marshall  <simon@gnu.org>

	* progmodes/sh-script.el (sh-font-lock-keywords):
	Fontify sh-style function names in declarations.

1998-02-13  Peter S Galbraith  <galbraith@mixing.qc.dfo.ca>

	* info-look.el (info-complete):
	Display completions on second invocation at same point
	or if initial guess is already ambiguous.
	(info-look-completion): New variable.

	* info-look.el (info-lookup-symbol-alist):
	Added support for latex-mode, perl-mode, awk-mode, emacs-lisp-mode.

1998-02-13  Richard Stallman  <rms@psilocin.gnu.org>

	* jka-compr.el (jka-compr-compression-info-list): Fix previous change:
	clear "append" flag for bzip.

1998-02-13  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* disp-table.el (standard-display-european): If AUTO is nil,
	clear multibyte in *scratch*, and load latin-1.

1998-02-12  Dave Love  <fx@gnu.org>

	* progmodes/scheme.el (scheme-imenu-generic-expression): Simplify
	regexps.
	(dsssl-imenu-generic-expression): Likewise.
	(scheme-mode-variables): Set imenu-syntax-alist.
	(dsssl-mode): Remove `!' from font-lock-defaults.  Set
	imenu-syntax-alist.

1998-02-11  Richard Stallman  <rms@psilocin.gnu.org>

	* play/cookie1.el (cookie-snarf): Use match-beginning on the delimiter.
	(cookie-delimiter): Handle single-% delimiter.

	* progmodes/sh-script.el (sh-set-shell): Use standard-syntax-table
	if none other is specified.

	* emacs-lisp/debug.el (debugger-mode):
	Don't set enable-multibyte-characters here.
	(debug): Use set-buffer-multibyte to clear enable-multibyte-characters.

1998-02-10  Richard Stallman  <rms@psilocin.gnu.org>

	* msb.el (msb--choose-file-menu): Save some debugging info.

	* comint.el (comint-interrupt-subjob): Call comint-kill-input.
	(comint-kill-subjob, comint-quit-subjob, comint-stop-subjob): Likewise.

	* help.el (describe-bindings): Fix interactive spec.

1998-02-09  Dave Love  <d.love@dl.ac.uk>

	* compile.el (compilation-scroll-output): New variable.
	(compile-internal): Use it.  Set lazy-lock-defer-on-scrolling.

1998-02-09  Emilio Lopes  <Emilio.Lopes@Physik.TU-Muenchen.DE>

	* apropos.el (apropos-variable): New function.
	(apropos-command): Show functions instead of variables if given an
	argument.  The old functionality is now provided by
	`apropos-variable'.

1998-02-08  Richard Stallman  <rms@psilocin.gnu.org>

	* msb.el (msb--toggle-menu-type): Pass arg to menu-bar-update-buffers.
	(msb--init-file-alist): Delete spurious =.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Only call compiler-macroexpand if the function has
	a cl-compiler-macro property.

	* jka-compr.el (jka-compr-compression-info-list): Handle bzip.

1998-02-06  Per Starb√§ck  <starback@update.uu.se>

	* international/iso-transl.el (iso-transl-define-keys): Don't add
	nonascii-insert-offset to ASCII characters.

1998-02-06  Richard Stallman  <rms@psilocin.gnu.org>

	* textmodes/bibtex.el (bibtex-autokey-year-length): Doc fix.

	* mail/rmail.el (rmail-clear-headers): Handle the last header
	in a message correctly.

	* font-lock.el (font-lock-keywords): Doc fix.

1998-02-05  Richard Stallman  <rms@psilocin.gnu.org>

	* replace.el (occur): Apply default by hand after read-from-minibuffer.
	No need to clear text props from the result.
	(query-replace-read-args, map-query-replace-regexp):
	Offer the FROM arg as the default for the TO arg.

1998-02-04  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-output-as-comment):
	Use the size in bytes for the #@ size integer.

1998-02-04  Stephen Eglen  <stephen@mescaline.gnu.org>

	* locate.el: Customized.

1998-02-04  Dave Love  <fx@gnu.org>

	* vc-hooks.el (vc-ignore-vc-files): New variable.
	(vc-file-hook, vc-file-not-found-hook): Use it.

1998-02-04  Kenichi HANDA  <handa@etl.go.jp>

	* international/characters.el: Use aref instead of sref.

	* international/kinsoku.el: Use aref instead of sref.

	* international/mule-cmds.el (find-safe-coding-system): Return
	undecided if FROM == TO.
	(select-safe-coding-system): Doc-string modified.

	* international/mule-util.el (compose-chars-component): Return
	result as unibyte string.
	(decompose-composite-char): Doc-string modified.

	* international/titdic-cnv.el: Many codes re-written to adjust for
	character-base positioning and for speed up by using
	with-temp-file, with-temp-buffer, and princ.

	* language/china-util.el (encode-hz-region): Do not bind
	enable-multibyte-characters to nil locally.

	* language/devan-util.el: Do not require `cl'.
	(rule-intersection): New function.
	(string-conversion-by-rule): Use rule-intersection instead of
	intersection.
	(indian-to-devanagari-string): Use aref instead of sref.
	(devanagari-decompose-string): Likewise.

	* language/indian.el: Move codes which set syntax and category of
	Indian characters to international/characters.el.

	* progmodes/etags.el (etags): Fix defgroup syntax.

1998-02-03  Richard Stallman  <rms@psilocin.gnu.org>

	* imenu.el (imenu-generic-expression): Doc fix.
	(imenu--index-alist): Doc fix.
	(imenu-create-index-function): Doc fix.
	(imenu-prev-index-position-function): Doc fix.
	(imenu-extract-index-name-function): Doc fix.

	* emacs-lisp/edebug.el (edebug-stop-before-symbols): Variable deleted.
	(edebug-form): Don't handle edebug-stop-before-symbols.
	(edebug-submit-bug-report): Don't include edebug-stop-before-symbols.

	* avoid.el (mouse-avoidance-fancy-hook): Do nothing if button is down.
	(mouse-avoidance-exile-hook, mouse-avoidance-banish-hook): Likewise.

	* mail/mail-extr.el (mail-extr-all-letters-but-separators)
	(mail-extr-first-letters, mail-extr-last-letters):
	Make range start from \240, not from \200.

1998-02-02  Richard Stallman  <rms@psilocin.gnu.org>

	* textmodes/fill.el (fill-region-as-paragraph): Fix the test for any
	non-ASCII characters, for deciding whether to do kinsoku.

1998-02-02  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/calendar.el (general-holidays): Fix misspelling.

1998-02-02  Dan Nicolaescu  <done@ece.arizona.edu>

	* progmodes/hideshow.el (hs-special-modes-alist): Enhanced java
	regexp.

1998-02-02  Richard Stallman  <rms@psilocin.gnu.org>

	* help.el (describe-bindings): New command (formerly in keymap.c).

	* mldrag.el (mldrag-drag-vertical-line): Fix criterion
	for the error for trying to move a scroll bar at the frame edge.

1998-02-01  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-minor-mode): Fix
	the doc strings used for the mode flag variable and the keymap.
	Delete duplicate &optional's.

	* emacs-lisp/edebug.el: Doc fixes.

	* emacs-lisp/bytecomp.el (byte-compile-from-buffer):
	Bind edebug-all-defs and edebug-all-forms to nil.

	* subr.el (suspend-hook, suspend-resume-hook): New defvars.

	* emacs-lisp/autoload.el (update-file-autoloads): Give clean errors
	if autoloads file is empty or can't be written.

1998-02-01  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el (hs-special-modes-alist): Improved the regexp for java.

	* isearch.el (isearch-range-invisible): Avoid infinite loop when
	search-invisible is nil.

1998-02-01  Stephen Eglen  <stephen@melange.gnu.org>

	* autoinsert.el (auto-insert-mode): New function.
	(auto-insert-mode): New customize variable to automatically load
	the package.  Other variables customized.

	* tar-mode.el: Customized.

	* mail/mspools.el: Customized.  Doc fixes.

1998-01-31  Richard Stallman  <rms@sucrose.ai.mit.edu>

	* mail/mailalias.el (define-mail-alias):
	If FROM-MAILRC-FILE, don't call sendmail-sync-aliases.
	(build-mail-aliases): Clear mail-aliases to nil at the beginning.

1998-01-30  Richard Stallman  <rms@psilocin.gnu.org>

	* replace.el (query-replace-from-history-variable): New variable.
	(query-replace-to-history-variable): New variable.
	(query-replace-read-args): Use them.

1998-01-30  Dave Love  <d.love@dl.ac.uk>

	* fortran.el: Various docstring and commentary fixes, including
	note of current maintainer.
	(fortran-mode): Use imenu-syntax-alist.
	(fortran-imenu-generic-expression): Use
	fortran-continuation-string, not always `+'.
	(fortran-font-lock-keywords-1): Include symbol syntax as well as
	word, following syntax table changes.
	(fortran-imenu-generic-expression): Likewise.
	(fortran-mode-map): Add a menu.
	(fortran-mode-version, fortran-startup-message): Delete misleading
	variables.
	(fortran-mode): Don't use them.
	(fortran-column-ruler-fixed, fortran-column-ruler-tab): Fix
	leading \ which made `0' into null.
	(fortran-join-line): New function and key binding.
	(fortran-narrow-to-subprogram): New function and key binding.
	(fortran-mode-syntax-table): Make ?., ?_, ?$ symbol, not word.

1998-01-29  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* textmodes/reftex.el (reftex-toc): Fixed bug with split-window.  Using
	split-window instead of split-window-vertically.
	(reftex-reset-mode): Removed obsolete buffer from kill list.
	(reftex-make-and-insert-label-list, reftex-do-citation): Delete
	other windows before displaying selection.
	(reftex-cite-format-builtin): Fixed bug in Chicago format.
	(reftex-enlarge-to-fit): New function.
	(reftex-nicify-text): Cut context-string at \item,\\.  Changed
	match sequence for efficiency reasons.
	(reftex-parse-from-file): Include files can be ignored with
	`reftex-no-include-regexps'.
	(reftex-no-include-regexps): New option.
	(reftex-do-parse): Initialize appendix flag.
	(reftex-parse-from-file): Interpret appendix.
	(reftex-section-info): Use changed version of reftex-section-number.
	(reftex-where-am-I): Interpret appendix match.
	(reftex-init-section-numbers): New arg: appendix.
	(reftex-section-number): Treat appendix enumeration.
	(reftex-toc-external): Improved message.
	(reftex-compute-ref-cite-tables): Regular expression extended for
	appendix.
	(reftex-toc-rescan): Renamed from reftex-toc-redo.
	(reftex-toc-Rescan): Renamed from reftex-toc-Redo.
	(reftex-toc-revert): New function.
	(reftex-select-external-document): Completion on label prefixes.
	(reftex-find-file-on-path): Added an extra call to
	expand-file-name for the directory.
	(reftex-locate-bibliography-files): Added expand-file-name call.
	(reftex-guess-label-type): New function.
	(reftex-word-before-point): Function removed.
	(reftex-reference): Uses reftex-guess-label-type.  Changed meaning
	of `~' in reference format.  Magic words are regular expressions.
	(reftex-compute-ref-cite-tables): Convert magic words to regexps.
	(reftex-select-label-maps): Default bindings for TAB, up, down, RET.
	(reftex-select-read-string): Now uses completion.
	(reftex-make-and-insert-label-list): Prepare for completion.
	(reftex-where-am-I): Fixed bug with input files.
	(reftex-save-all-document-buffers): New command.
	(reftex-select-next-heading): New function.
	(reftex-select-previous-heading): New function.
	(reftex-select-read-string): New function.
	(reftex-offer-label-menu): Handle string value from reftex-select-item.
	(reftex-reference): Fixed bug (missing save-excursion).
	(reftex-toc-map): Added binding for ?n and ?p.
	(reftex-do-citation): Changed to use reftex-default-bibliography.
	(reftex-default-bibliography): New option.
	(reftex-find-tex-file): Check for file-name-absolute-p first.
	(reftex-format-label-function, reftex-format-ref-function)
	(reftex-format-cite-function): New hooks.
	(reftex-info): New function.
	(reftex-compute-ref-cite-tables): Removed interactive form.
	(reftex-where-am-I): Removed interactive form.
	(reftex-format-names): Removed interactive form.
	(reftex-vref-is-default): New customization variable.
	(reftex-mode-menu): Capitalize citation options.
	(reftex-last-cnt): Variable removed.
	(reftex-last-data, reftex-last-line): New variables.
	(reftex-select-toggle-varioref): New function.
	(reftex-offer-label-menu): Changed mode-line-format for varioref.
	(reftex-select-label-help): Help string updated.
	(reftex-do-parse): Fixed bug with empty xr list.
	(reftex-view-crossref): Prefix argument interpretation changed.
	(reftex-get-offset): New function.
	(reftex-label): Remove selection buffer to force update.
	(reftex-access-scan-info): Remove selection buffers.
	(reftex-select-external-document): Fixed bug with highest index.
	(reftex-label-index-list, reftex-found-list): Variables removed.
	(reftex-offer-label-menu, reftex-make-and-insert-label-list)
	(reftex-select-item, reftex-citation, reftex-select-label-callback)
	(reftex-bibtex-selection-callback, reftex-select-callback): Changed
	to put the scan data directly into the text property :data,
	instead of doing this indirectly with an index-list.
	(reftex-make-selection-buffer-name): New function.
	(reftex-tie-multifile-symbols): Store master-index-as-property.
	(reftex-kill-buffer): New function.
	(reftex-erase-buffer): New function.
	(reftex-erase-all-selection-buffers): New function.
	(reftex-mode-menu): Button "Restore from file" no longer sensitive
	to existence of the file.  This had caused problems for LateX
	style files.  Quoted `:style' and `:selected' for compatibility.
	(reftex-access-parse-file): `Restore' action now throws an
	exception when the file is not found.
	(reftex-create-customize-menu): New function.
	(reftex-label): Fixed bug which made naked labels in \footnotes.
	(reftex-select-label-map, reftex-select-bib-map): New keymaps for
	the RefTeX Select buffer.
	(reftex-select-next, reftex-select-previous, reftex-select-scroll-down)
	(reftex-select-scroll-up, reftex-select-quit)
	(reftex-select-toggle-follow, reftex-select-callback)
	(reftex-select-accept, reftex-select-help)
	(reftex-select-recursive-edit, reftex-select-search-forward)
	(reftex-select-search-backward, reftex-select-search)
	(reftex-select-scroll-other-window)
	(reftex-select-scroll-other-window-down):
	New commands for use in the two new keymaps.
	(reftex-select-item): Now uses the appropriate keymaps.
	(reftex-toc-map): New keymap (a keymap for the toc buffer.
	(reftex-toc): Now uses reftex-toc-map.
	(reftex-fontify-select-label-buffer): New function.
	(reftex-select-font-lock-fontify-region): New function.
	(reftex-make-and-insert-label-list): Refontification now uses
	`reftex-select-font-lock-fontify-region'.
	(reftex-show-entry): Refontification generalized.
	(reftex-select-search-minibuffer-map): New constant.
	(reftex-parse-from-file): Look for \begin{thebibliography}.
	(reftex-do-citation): Check also for thebibliography.
	(reftex-bibtex-selection-callback): Handle bibitem.
	(reftex-view-crossref): Handle bibitem.
	(reftex-extract-bib-entries-from-thebibliography): New function.
	(reftex-format-bibitem): New function.
	(reftex-parse-bibitem): New function.
	(reftex-make-desparate-section-regexp): Changed name to
	reftex-make-desperate-section-regexp.
	(reftex-do-parse, reftex-locate-bibliography-files)
	(reftex-string-to-label, reftex-select-external-document)
	(reftex-find-duplicate-labels, reftex-format-bib-entry)
	(reftex-do-citation, reftex-insert-bib-matches)
	(reftex-select-search-minibuffer-map, reftex-access-search-path)
	(reftex-compute-ref-cite-tables, reftex-recursive-directory-list):
	All lambda expressions now quoted with `function'.
	(reftex-view-crossref, reftex-mouse-view-crossref): Fixed bug with
	multiple calls.
	(reftex-get-buffer-visiting): Error message changed.
	(reftex-select-external-document, reftex-query-label-type)
	(reftex-do-citation, reftex-select-help):
	Use `reftex-enlarge-to-fit' now.
	(reftex-pop-to-bibtex-entry): No longer beep on failure, to make
	it work better with follow mode.

1998-01-29  Inge Frick  <inge@nada.kth.se>

	* emacs-lisp/easymenu.el (easy-menu-add-item): Fix the BEFORE argument.
	Done by letting `easy-menu-do-add-item' handle it.
	(easy-menu-do-add-item): Take argument BEFORE instead of PREV.
	Inserts directly in keymap, instead of calling `define-key-after'.
	(easy-menu-create-menu): Don't reverse items as
	`easy-menu-do-add-item' now puts things at the end of keymaps.

1998-01-29  Stephen Eglen  <stephen@mescaline.gnu.org>

	* type-break.el (type-break-mode): New customize variable to
	automatically load the package.  Other variables customized.

1998-01-28  Dave Love  <d.love@dl.ac.uk>

	* progmodes/etags.el (find-tag-marker-ring-length): New variable.
	(find-tag-marker-ring): New variable.
	(tags-location-ring): New variable replacing tags-location-ring.
	(tags-location-stack): Deleted.
	(tags-table-format-hooks): Doc fix.
	(initialize-new-tags-table): Init find-tag-marker-ring,
	tags-location-ring.
	(tags-reset-tags-tables): Doc fix.  Set tags-location-ring,
	find-tag-marker-ring.
	(find-tag-noselect): Doc fix.  Use tags-location-ring,
	find-tag-marker-ring.
	(find-tag, find-tag-other-window, find-tag-other-frame)
	(find-tag-regexp): Doc fix.
	(pop-tag-mark): New function.
	(esc-map): Bind pop-tag-mark.

1998-01-28  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (report-emacs-bug-address):
	Variable renamed from bug-gnu-emacs.  Use defcustom.
	(report-emacs-bug-pretest-address): Use defcustom.

	* international/mule-cmds.el (toggle-enable-multibyte-characters):
	Use set-buffer-multibyte.
	(find-safe-coding-system-list-subset-p): Renamed from list-subset-p.
	The call changed also.

1998-01-28  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (titdic-convert): Set
	enable-multibyte-characters to t after inserting TIT file by
	no-conversion.
	(tit-process-body): Do not bind enable-multibyte-characters to
	nil.

1998-01-27  Inge Frick  <inge@nada.kth.se>

	* emacs-lisp/easymenu.el (easy-menu-define): Use ` and , read-macros
	instead of (` and (,.  Implement :filter.  Doc fix.
	(easy-menu-do-define): Call `easy-menu-create-menu' instead of
	`easy-menu-create-keymaps'.
	(easy-menu-create-keymaps): Replaced by `easy-menu-create-menu'.
	(easy-menu-create-menu): New public function.  Replaces
	`easy-menu-create-keymaps', but with large changes.
	(easy-menu-button-prefix): New constant.
	(easy-menu-do-add-item, easy-menu-make-symbol): New functions.
	(easy-menu-update-button): Doc fix.
	(easy-menu-change): New optional argument BEFORE.
	Now just a call to `easy-menu-add-item'.
	(easy-menu-add-item, easy-menu-item-present-p)
	(easy-menu-remove-item): New public functions.
	(easy-menu-get-map, easy-menu-is-button-p, easy-menu-have-button-p)
	(easy-menu-real-binding, easy-menu-change-prefix, easy-menu-filter):
	New functions.

1998-01-26  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/rmail.el (rmail): Reinsert the let-binding
	of enable-local-variables.

	* play/gametree.el: New file.

1998-01-26  Andreas Schwab  <schwab@gnu.org>

	* progmodes/ada-stmt.el: Customized.  Change `(load "skeleton")'
	to `(require 'skeleton)'.

	* progmodes/octave-mod.el, progmodes/octave-inf.el: Customized.
	* progmodes/meta-mode.el, progmodes/hideif.el: Likewise.
	* progmodes/dcl-mode.el, progmodes/asm-mode.el: Likewise.

1998-01-26  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/bytecomp.el: Customized.

	* emacs-lisp/bytecomp.el (displaying-byte-compile-warnings):
	To avoid error, use (forward-line -1), not previous-line.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Fix previous change.

	* emacs-lisp/byte-opt.el (byte-compile-inline-expand):
	Use string-as-unibyte, if it is defined.

1998-01-25  Richard Stallman  <rms@psilocin.gnu.org>

	* desktop.el (desktop-clear): Don't kill dead buffers.

	* progmodes/sh-script.el (sh-case): Fix paren error.

1998-01-25  Dave Love  <fx@gnu.org>

	* imenu.el (imenu-syntax-alist): New buffer-local variable.
	(imenu--generic-function): Use it.
	(imenu--split-menu): Don't (setcdr nil) with, say, empty functions
	list.

1998-01-24  Stephen Eglen  <stephen@delysid.gnu.org>

	* hscroll.el (hscroll-global-mode): New customize variable to
	automatically load the package.

	* icomplete.el: Customized.

1998-01-23  Richard Stallman  <rms@psilocin.gnu.org>

	* calendar/cal-french.el (calendar-french-single-byteify):
	Function deleted.
	(calendar-goto-french-date): Don't call calendar-french-single-byteify.
	Delete local var oldval.
	(calendar-print-french-date): Don't bind enable-multibyte-characters.

	* msb.el (msb--strip-dir): Use Emacs filename primitives, not regexps.

1998-01-22  Richard Stallman  <rms@psilocin.gnu.org>

	* mail/emacsbug.el (emacsbug): Customized.
	(report-emacs-bug-no-confirmation):
	Renamed from report-emacs-bug-run-tersely.
	(report-emacs-bug-no-explanations): New option.
	(report-emacs-bug): Handle that option.

1998-01-22  Eric Ludlam  <zappo@mescaline.gnu.org>

	* mail/rmail.el (rmail-speedbar-buttons): Added speedbar support
	for Rmail, including rmail-speedbar-button,
	rmail-speedbar-find-file, rmail-move-message-to-folder-on-line,
	rmail-speedbar-move-message, and support variables.

	* info.el (Info-speedbar-buttons): Added speedbar support for Info
	mode, including Info-speedbar-button, Info-speedbar-menu, and
	support variables.

	* gud.el (gud-speedbar-buttons): Added speedbar support for GUD in
	general, and for GDB specifically, including
	gud-gdb-goto-stackframe, gud-gdb-get-stackframe,
	gud-gdb-run-command-fetch-lines, gud-gdb-speedbar-stack-filter,
	and support variables.

	* emacs-lisp/checkdoc.el: New File.

	* speedbar.el, speedbspec.el: New files.

1998-01-22  Richard Stallman  <rms@psilocin.gnu.org>

	* vc.el (vc-annotate-compcar): Iterate instead of recursing.
	(vc-annotate-car-last-cons, vc-annotate-time-span):
	Rename arg assoc-list to a-list.

	* vc.el (vc-annotate-display): All support for XEmacs extents removed.
	Functions `set-face-*' are called only when a face is created.

	* arc-mode.el (archive-find-type): Accept d or s after digit, for lzh.
	(archive-rename-entry): Likewise.  Parse mode, uid and gid right.
	Allow newline in header.
	(archive-lzh-summarize): Fix paren error.  Use prname to set `files'.

1998-01-22  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-resynch-window): Behave properly when view-read-only
	is non-nil.

1998-01-21  Richard Stallman  <rms@psilocin.gnu.org>

	* emacs-lisp/cl-macs.el (define-compiler-macro): Handle empty arglist.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	If compiler-macroexpand is defined, use it.

1998-01-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (prefer-coding-system): Call
	update-iso-coding-systems.

	* international/mule-util.el (string-to-sequence): Adjusted for
	the change of multibyte-form handling (byte-base to char-base).
	(store-substring): Likewise.
	(truncate-string-to-width): Likewise.
	(decompose-region): Likewise.
	(decompose-string): Likewise.
	(decompose-composite-char): Call string instead of concat-chars.

	* international/quail.el (quail-show-kbd-layout): Bug fix for the
	case that TRANSLATION is a cons.

	* international/skkdic-cnv.el (skkdic-jbytes): Variable deleted.
	All codes using this variable adjusted.
	* international/skkdic-utl.el: Likewise.

	* loadup.el: Call update-iso-coding-systems after loading files
	under language subdir.

1998-01-21  Kenichi Handa  <handa@etl.go.jp>

	* international/characters.el: Put `prefered-coding-system'
	property to each character set.

	* international/mule.el (coding-system-base): Doc-string modified.
	(make-coding-system): The 6th optional arg is changed to
	PROPERTIES.
	(set-buffer-file-coding-system): Show "(default, nil)" in prompt.
	(set-coding-priority): Code tuned.

	* international/mule-cmds.el (set-language-info): Doc-string
	describes `coding-priority' KEY.
	(set-language-environment-coding-systems): New function.
	(list-subset-p): New function.
	(select-safe-coding-system): New function.
	(set-language-info): New optional args DESCRIBE-MAP and SETUP-MAP.
	(set-language-info-alist): New optional arg PARENTS.  Call
	set-language-info with appropriate DESCRIBE-MAP and SETUP-MAP args.
	(set-language-environment-coding-systems): New function.

	* international/mule-conf.el: Adjusted for the change of the
	format of make-coding-system's 6th argument.  Initialize
	coding-category-iso-7-tight to iso-2022-jp.

	* international/mule-diag.el (describe-coding-system): Change the
	format of showing safe charsets.

	* international/mule-util.el (find-safe-coding-system): Moved to
	mule-cmds.el.
	(detect-coding-with-priority): New macro.
	(detect-coding-with-language-environment): New function.

	* language/chinese.el: Remove setting up of
	describe-chinese-environment-map and
	setup-chinese-environment-map.  Exclude them in args of calls to
	set-language-info-alist.  Adjusted for the change of
	make-coding-system.  Register coding-priority key in
	language-info-alist.
	(iso-2022-cn-ext): New coding system.

	* language/cyrillic.el: Remove setting up of
	describe-cyrillic-environment-map and
	setup-cyrillic-environment-map.  Exclude them in args of calls to
	set-language-info-alist.  Adjusted for the change of
	make-coding-system.  Register coding-priority key in
	language-info-alist.

	* language/devanagari.el: Exclude describe-indian-environment-map
	and setup-indian-environment-map for args of call to
	set-language-info-alist.  Adjusted for the change of
	make-coding-system.  Register coding-priority key in
	language-info-alist.

	* language/english.el: Register coding-priority key in
	language-info-alist.

	* language/ethiopic.el: Register coding-priority key in
	language-info-alist.

	* language/european.el: Remove setting up of
	describe-european-environment-map and
	setup-european-environment-map.  Exclude them in args of calls to
	set-language-info-alist.  Adjusted for the change of
	make-coding-system.  Register coding-priority key in
	language-info-alist.  Add "German" language env.
	(setup-8-bit-environment): Delete CODING-SYSTEM arg.
	(iso-latin-1): Make it compatible with MIME-charset "iso-8859-1".
	(compound-text): New coding system.  `ctext' is now alias of it.
	(setup-german-environment): New function.

	* language/greek.el: Adjusted for the change of
	make-coding-system and setup-8-bit-environment.
	(setup-greek-environment): For Greek lang. env., change default
	input method to "greek-postfix".

	* language/hebrew.el: Adjusted for the change of
	make-coding-system and setup-8-bit-environment.

	* language/indian.el: Remove setting up of
	describe-indian-environment-map and setup-indian-environment-map.

	* language/japanese.el, language/korean.el, language/lao.el,
	* language/thai.el, language/tibetan.el, language/vietnamese.el:
	Adjusted for the change of make-coding-system.  Register
	coding-priority key in

	* language/china-util.el, language/japan-util.el,
	* language/korea-util.el, language/tibet-util.el,
	* language/viet-util.el: In setup-LANGUAGE-environment functions,
	call set-language-environment-coding-systems.

	* language/cyril-util.el, language/devan-util.el,
	* language/lao-util.el, language/thai-util.el: In
	setup-LANGUAGE-environment functions, adjust for the change of
	setup-8-bit-environment.

	* mail/sendmail.el (sendmail-coding-system): Doc-string modified.
	(sendmail-send-it): Select a safe coding system to encode an
	outgoing mail.

1998-01-21  Kenichi Handa  <handa@etl.go.jp>

	* international/ccl.el: Comment about CCL syntax modified.
	(ccl-command-table): Add read-multibyte-character,
	write-multibyte-character, and unify-character.
	(ccl-code-table): Add ex-cmd.
	(ccl-extended-code-table): New variable.
	(ccl-embed-extended-command): New function.
	(ccl-compile-read-multibyte-character)
	(ccl-compile-write-multibyte-character)
	(ccl-compile-unify-character, ccl-compile-iterate-multiple-map)
	(ccl-compile-translate-multiple-map)
	(ccl-compile-translate-single-map)
	(ccl-compile-multiple-map-function): New functions.
	(ccl-dump-ex-cmd, ccl-dump-read-multibyte-character)
	(ccl-dump-write-multibyte-character, ccl-dump-unify-character)
	(ccl-dump-unify-character-const-tbl, ccl-dump-iterate-multiple-map)
	(ccl-dump-translate-multiple-map, ccl-dump-translate-single-map):
	New functions.

	* international/mule.el (define-character-unification-table): New
	function.

	* international/mule-conf.el (oldjis-newjis-jisroman-ascii): New
	character unification table.
	(standard-character-unification-table-for-decode): Initialize to
	`unification-table' property of `oldjis-newjis-jisroman-ascii'.

1998-01-21  Erik Naggum  <erik@naggum.no>

	* complete.el (PC-try-load-many-files): Load files in reverse
	order so they come in the right order in the buffer list.

1998-01-20  Richard Stallman  <rms@psilocin.gnu.org>

	* mldrag.el (mldrag-drag-vertical-line): Delete debugging `message'.

	* emacs-lisp/tq.el (tq-filter): Use with-current-buffer.

	* ange-ftp.el (ange-ftp-date-regexp):
	Make l pattern match any non-ASCII char.

1998-01-19  Richard Stallman  <rms@psilocin.gnu.org>

	* menu-bar.el (menu-bar-file-menu): Add Recover Session menu item.
	(menu-bar-help-menu): Add Getting New Versions, Copying Conditions
	and (Non)Warranty menu items.

	* subr.el (momentary-string-display): Fix backward test
	for whether end of message is off the screen.

	* mouse.el (mouse-drag-vertical-line): Properly determine which
	side the scroll bar or vertical line is on.

	* mldrag.el (mldrag-drag-vertical-line): Delete debugging code.

1998-01-17  Richard Stallman  <rms@gnu.org>

	* progmodes/vhdl-mode.el: New file.

	* progmodes/etags.el (etags): Fix defgroup syntax.

	* simple.el (switch-to-completions): If no completions window,
	don't try to switch to it.

	* files.el (auto-mode-alist): Add vhdl-mode.

	* replace.el (occur): If the matching line has no final newline,
	insert one anyway.  Compensate for that when inserting line nums.

	* buff-menu.el (Buffer-menu-mode-map): Bind e like f.

	* startup.el (command-line-1): Add alternate startup message
	for use when there is a mouse.

1998-01-17  Karl Heuer  <kwzh@gnu.org>

	* register.el (number-to-register, increment-register): Args
	renamed to match doc.

1998-01-17  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-finish-logentry): Move killing the log buffer after
	the operation in case that fails.

1998-01-17  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* hexl.el (hexl-follow-ascii): New function and variable to
	highlight the ASCII character corresponding to point.

1998-01-16  Richard Stallman  <rms@sucrose.gnu.org>

	* mail/rmail.el (rmail): Don't bind enable-multibyte-characters;
	read the file normally.
	(rmail-revert): Likewise.

1998-01-16  Richard Stallman  <rms@psilocin.gnu.org>

	* mldrag.el (mldrag-drag-vertical-line): Handle left-side scroll bars.

	* info-look.el (info-lookup): Report if Info-goto-node fails.
	(info-lookup-make-completions): Likewise.

	* autorevert.el (global-auto-revert-ignore-buffer): Fix typo.
	(global-auto-revert-mode): Fix typo.

	* ange-ftp.el (ange-ftp-inodes-hashtable): New variable.
	(ange-ftp-next-inode-number): New variable.
	(ange-ftp-file-attributes): Assign each file a unique "inode number".

1998-01-15  Richard Stallman  <rms@sucrose.gnu.org>

	* progmodes/etags.el (etags): Fix defgroup syntax.

1998-01-15  Simon Marshall  <simon@gnu.org>

	* menu-bar.el: Add a Print submenu to the Tools menu.

	* font-lock.el (c++-font-lock-extra-types): Add some container classes.
	(c-font-lock-keywords-1): Use builtin face for preprocessor directives.

1998-01-12  Richard Stallman  <rms@sucrose.gnu.org>

	* mail/rmail.el (rmail): Don't kill local enable-multibyte-characters.
	Don't bind coding-system-for-read.  Fix error message.

	* mail/rmail.el (rmail-make-in-reply-to-field):
	Make foo and bar patterns match all non-ASCII chars.

	* mail/rmail.el (rmail): Unwind-protect call to rmail-get-new-mail.

	* mail/rfc822.el (rfc822-snarf-word): Don't reject non-ASCII chars.
	(rfc822-snarf-subdomain): Likewise.
	(rfc822-addresses-1, rfc822-addresses): Likewise.

	* dired.el (dired-move-to-filename-regexp):
	Make l pattern match any non-ASCII char.

1998-01-12  Dave Love  <fx@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Add defmethod.

1998-01-12  Kenichi Handa  <handa@etl.go.jp>

	* bindings.el: Change "?\C-\ " to "?\C- " because "\ " is changed
	to standing for nothing in lread.c (read_escape).
	* calendar/calendar.el (calendar-mode-map): Likewise.
	* international/kkc.el (kkc-mode-map): Likewise.
	* international/quail.el (quail-translation-keymap): Likewise.

1998-01-11  Dave Love  <fx@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-get-package-name, lm-header)
	(lm-header-multiline, lm-summary, lm-version, lm-commentary):
	Return string without properties.
	(lm-get-header, lm-get-package-name, lm-crack-address)
	(lm-insert-at-column, lm-report-bug): Minor doc fixes.

1998-01-08  Eric Ludlam  <zappo@gnu.org>

	* emacs-lisp/checkdoc.el: New file.

1998-01-07  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-resynch-window): Behave properly when view-read-only
	is non-nil.

1998-01-07  Andreas Schwab  <schwab@gnu.org>

	* custom.el (defgroup): Doc fix.

	* cus-edit.el (custom-browse-visibility): Doc fix.

	* emacs-lisp/pp.el (pp-to-string): Greatly simplify by letting the
	Emacs printer do the (quote x) to 'x conversion.  Better handle
	the # print syntax in all its forms.

	* find-dired.el, filecache.el, expand.el, emerge.el: Customized.

1998-01-07  Eli Zaretskii  <eliz@delysid.gnu.org>

	* files.el (delete-auto-save-files): Say in the doc string that
	auto-save file will not be deleted if the buffer has unsaved
	changes.

1998-01-06  Eric Ludlam  <zappo@gnu.org>

	* speedbar.el, speedbspec.el: New files.

1998-01-04  Richard Stallman  <rms@psilocin.gnu.org>

	* subr.el (sref): Defined.

1998-01-03  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* time.el (display-time-mode): New customize variable to
	automatically load the package.

1998-01-02  Richard Stallman  <rms@psilocin.gnu.org>

	* filecache.el (file-cache-minibuffer-complete): Accept a prefix arg.

	* bindings.el (minor-mode-overriding-map-alist):
	Call make-variable-buffer-local.

	* which-func.el (which-func-update): Fix paren error.

	* cus-edit.el (customize-changed-options): Doc fix.

1998-01-02  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* replace.el (occur): Pass default to read-from-minibuffer so that
	M-n can insert default value into minibuffer.

	* rsz-mini.el (resize-minibuffer-mode): Variable customized to
	automatically load the package.

1998-01-01  Richard Stallman  <rms@psilocin.gnu.org>

	* dabbrev.el (dabbrev-ignored-buffer-names): New variable.
	(dabbrev--find-expansion): Ignore those buffers
	unless they get specifically preferred.

1997-12-28  Richard Stallman  <rms@sucrose.gnu.org>

	* desktop.el (desktop-enable): New variable.
	(after-init-hook): Add a hook to test desktop-enable.
	(desktop-save-hook): Doc fix.

1997-12-24  Richard Stallman  <rms@psilocin.gnu.org>

	* progmodes/etags.el: Customized.
	(tags-revert-without-query): New option.
	(tags-verify-table): Test tags-revert-without-query.

1997-12-22  Richard Stallman  <rms@psilocin.gnu.org>

	* info.el (Info-mode): Doc fix.

1997-12-22  Lawrence R. Dodd  <dodd@roebling.poly.edu>

	* dired-x.el (dired-mark-sexp): Skip leading space in defining `uid'.

1997-12-22  Christoph Wedler  <wedler@fmi.uni-passau.de>

	* register.el (view-register): Show register type file-query.

1997-12-22  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* avoid.el (mouse-avoidance-mode): Variable customized to
	automatically load the package.

1997-12-22  Kevin Rodgers  <kevinr@ihs.com>  (tiny change)

	* simple.el (previous-matching-history-element): Bind
	case-fold-search to nil if REGEXP contains an uppercase letter.
	(previous-matching-history-element, next-matching-history-element):
	Doc fixes.

1997-12-22  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el (browse-url-path-regexp, browse-url-short-regexp)
	(browse-url-regexp): Variables deleted (moved to thingatpt.el).
	(browse-url-filename-alist): Default now has leading ange-ftp-type
	patterns so that the "^/+" pattern doesn't mung such names in
	advance.
	(browse-url-file-url): Don't do explicit ange-ftp path munging here.
	(browse-url-netscape-program): Doc addition.

1997-12-22  Richard Stallman  <rms@psilocin.gnu.org>

	* apropos.el (apropos-print): Pass t instead of DO-KEYS
	when calling apropos-print-doc.

	* progmodes/cc-menus.el (cc-imenu-objc-function):
	Use bufsubst-fun as a variable, not as a function.

	* msb.el: Fix mailer-introduced garbling.
	(msb--toggle-menu-type): Don't pass arg to menu-bar-update-buffers.

1997-12-21  Richard Stallman  <rms@psilocin.gnu.org>

	* msb.el (msb--home-dir): Renamed from msb--home-path.
	(msb--strip-dir): Renamed from msb--strip-path.

1997-12-21  Lars Lindberg  <Lars.G.Lindberg@capgemini.se>

	* msb.el: Doc fixes.  Changed `append' to `nconc'
	in a number of places.  Changed the separator in menus
	from "---" to "--" to work in Windows 95.
	(msb--home-path): New internal variable to cache the value of $HOME.
	(msb--strip-path): Now handles MSDOG style of file names.
	(msb--init-file-alist): Now expands `buffer-file-name'.
	(msb--format-title): New subroutine for `msb--choose-file-menu'.
	(msb--choose-file-menu): Use msb--format-title.  Minor simplifications.

1997-12-20  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Some comment, doc and bug fixes.
	(ps-print-version): New version number (3.05.3) and doc fix.
	(ps-output-string-prim, ps-begin-job, ps-control-character)
	(ps-plot-region): Bug fix.
	(ps-print-control-characters): New custom var.
	(ps-string-escape-codes, ps-string-control-codes): New var.
	(ps-color-device, ps-font-lock-face-attributes, ps-eval-switch)
	(ps-flatten-list, ps-flatten-list-1): New fn.
	(ps-setup): Update current setup.
	(ps-begin-file): Adjust PostScript header file.
	(ps-plot, ps-face-attribute-list): Little programming improvement.
	(ps-print-prologue-1): Replace NumberOfZebra by ZebraHeight.
	(ps-print-without-faces, ps-print-with-faces): Little reprogramming.
	(ps-plot-with-face): Get color only on color screen device.
	(ps-build-reference-face-lists): Handle obsolete
	font-lock-face-attributes.
	(ps-print-ensure-fontified): Little programming setting.
	(ps-generate-postscript-with-faces): Adjust initializations, get color
	only on color screen device.
	(ps-generate): Replace (if A B) by (and A B).
	(ps-do-despool): Dynamic evaluation for ps-lpr-switches.
	Replace (if A B) by (and A B).
	(color-instance-rgb-components, ps-color-values): Replace
	pixel-components by color-instance-rgb-components.
	(ps-xemacs-face-kind-p): Replace face-font by face-font-instance,
	replace x-font-properties by font-instance-properties.

1997-12-20  Richard Stallman  <rms@psilocin.gnu.org>

	* subr.el (match-string-no-properties): New function.

	* subr.el (read-password): New function.

	* subr.el (split-string): Handle empty matches reasonably.

	* simple.el (copy-region-as-kill, kill-ring-save): Doc fixes.

	* simple.el (completion-setup-hook): Add definition.

1997-12-19  Richard Stallman  <rms@sucrose.gnu.org>

	* files.el (find-file-noselect): Fix previous change.

1997-12-19  Richard Stallman  <rms@sucrose.gnu.org>

	* isearch.el (isearch-mode-map): Don't count above 256
	when setting up printing characters.

	* term/linux.el: Don't call set-terminal-coding-system
	if it was already set.

1997-12-19  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* iswitchb.el (iswitchb-completion-help): Multiple TAB presses
	scroll the completion window.
	(iswitchb-read-buffer): New function to act as drop-in replacement
	for read-buffer.

	* international/mule-cmds.el (set-language-info): Doc fix.
	(input-method-inactivate-hook): Doc fix.

1997-12-19  Thierry Emery  <Thierry.Emery@aar.alcatel-alsthom.fr>

	* wid-edit.el (widget-choose): Allow scrolling of large lists.

1997-12-18  Richard Stallman  <rms@sucrose.gnu.org>

	* files.el (find-file-noselect): Signal error if file is unreadable.

1997-12-18  Richard Stallman  <rms@sucrose.gnu.org>

	* mail/mailalias.el (define-mail-alias): Handle backslash-quoting
	within "-strings in DEFINITION if it comes from .mailrc.

1997-12-17  Richard Stallman  <rms@sucrose.gnu.org>

	* international/mule-cmds.el (mule-keymap):
	Delete the binding for toggle-enable-multibyte-characters.
	(mule-menu-keymap): Delete the menu item for it.

1997-12-17  Peter Galbraith  <galbraith@mixing.qc.dfo.ca>

	* simple.el (copy-region-as-kill):
	Deactivate mark in transient-mark-mode.

1997-12-17  Andreas Schwab  <schwab@gnu.org>

	* simple.el (transpose-subr): Rewrite to make faster with big move
	counts.
	(transpose-lines): In the mover function handle arbitrary move
	counts.

1997-12-16  Richard Stallman  <rms@sucrose.gnu.org>

	* international/mule-cmds.el (toggle-enable-multibyte-characters):
	Doc fix.

1997-12-16  Richard Stallman  <rms@sucrose.gnu.org>

	* apropos.el (apropos, apropos-command): Ignore symbols that
	have apropos-inhibit property.

	* menu-bar.el (menu-bar-select-yank): Add apropos-inhibit property.

1997-12-16  Richard Stallman  <rms@sucrose.gnu.org>

	* disp-table.el (standard-display-european): Doc fix.

1997-12-15  Richard Stallman  <rms@sucrose.gnu.org>

	* calendar/cal-french.el (calendar-french-single-byteify): New function.
	(calendar-goto-french-date): Use calendar-french-single-byteify
	instead of changing enable-multibyte-characters.
	test french-calendar-accents.

1997-12-14  Richard Stallman  <rms@sucrose.gnu.org>

	* jka-compr.el (jka-compr-insert-file-contents):
	If enable-multibyte-characters is nil, decode as raw-text.

1997-12-13  Dave Love  <d.love@dl.ac.uk>

	* progmodes/scheme.el: Define indentation in normal dialect for
	let-syntax, letrec-syntax, syntax-rules, call-with-values,
	dynamic-wind.
	(scheme-mode-map): Remove lisp-complete-symbol.  Add
	uncomment-region menu item.
	(scheme-mode-hook, dsssl-mode-hook): Declare customized.
	(dsssl-sgml-declaration): Fix customization.

1997-12-12  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el (browse-url-lynx-emacs): Add sentinel to kill the
	buffer when lynx exits.  Doc fix.
	(browse-url-browser-function): Better customization.
	(browse-url-filename-alist, browse-url-netscape-display)
	(browse-url-filename-alist, browse-url-generic-program): Likewise.
	(browse-url-new-window-p, browse-url-w3, browse-url-mail): Doc fix.
	(browse-url-save-file): Customize.

	* imenu.el (imenu-case-fold-search): New buffer-local variable.

	* progmodes/scheme.el, progmodes/tcl-mode.el, progmodes/f90.el,
	* progmodes/fortran.el, progmodes/c-mode.el, progmodes/ada-mode.el,
	* cc-mode.el, progmodes/cplus-md.el, progmodes/dcl-mode.el,
	* progmodes/pascal.el, progmodes/perl-mode.el, textmodes/bibtex.el,
	* textmodes/texinfo.el, emacs-lisp/lisp-mode.el, generic.el,
	* progmodes/octave-mod.el: Use imenu-case-fold-search.

1997-12-11  Richard Stallman  <rms@gnu.org>

	* files.el (auto-mode-alist): Add .am as makefile-mode.

	* comint.el (comint-strip-ctrl-m): Don't die if
	comint-last-output-start does not point anywhere.

	* telnet.el (telnet-filter): Position comint-last-output-start.

1997-12-11  Paul Eggert  <eggert@twinsun.com>

	* dired.el (dired-move-to-filename-regexp)
	* ange-ftp.el (ange-ftp-date-regexp): Fix the problem with misparsing
	`-r--r--r-- 1 may 1997' by requiring a digit before the date.
	* dired.el (dired-move-to-filename-regexp):
	Allow any month name of 2 letters or more.

1997-12-10  Richard Stallman  <rms@sucrose.gnu.org>

	* info-look.el (info-lookup-symbol-alist): Handle Emacs Lisp mode.
	(info-lookup-make-completions): Catch errors one file at a time.
	Use a special temp buffer, not the usual info buffer,
	and never display it in a window.

	* mail/undigest.el (undigestify-rmail-message):
	If in summary, switch to the Rmail buffer.
	(unforward-rmail-message): Simplify using with-current-buffer.

1997-12-10  Andreas Schwab  <schwab@gnu.org>

	* auto-show.el: Customized.

1997-12-09  Richard Stallman  <rms@gnu.org>

	* custom.el (custom-add-version): New function.
	(custom-handle-keyword): Handle :version.

	* cus-edit.el (customize-changed-options): New function.
	(customize-version-lessp): New function.

	* facemenu.el (facemenu-remove-face-props): Renamed from
	facemenu-remove-props.  Remove only face and mouse-face.
	(facemenu-menu): Update menu item for facemenu-remove-face-props.

1997-12-09  Karl Heuer  <kwzh@gnu.org>

	* textmodes/bibtex.el (bibtex-generate-autokey): Doc fix.

1997-12-09  Kenichi HANDA  <handa@nora.etl.go.jp>

	* language/korea-util.el (setup-korean-environment):
	Bind C-f9 (instead of C-f10) to quail-hangul-switch-symbol-ksc.

	* language/korean.el: Documentation for "Korean" language
	environment adjusted for the above change.

1997-12-07  Karl Heuer  <kwzh@gnu.org>

	* register.el (number-to-register): Move point as a side effect.

	* calendar/calendar.el (calendar-day-name): Truncate properly when
	multibyte.

	* mail/mail-extr.el (mail-extr-all-top-level-domains): More domains.

	* gud.el (gud-mips-p): Fix regexp so it will match alphaev56-* too.

1997-12-07  Richard Stallman  <rms@gnu.org>

	* textmodes/outline.el (outline-next-preface):
	Don't try to move back if already at beginning of buffer.

1997-12-05  Ed Reingold  <reingold@melange.gnu.org>

	* calendar/cal-menu.el (calendar-mouse-print-dates): Add fixed
	date (RD) to menu of other dates.

	* calendar/calendar.el (exit-calendar): Fix bad call to error
	function.

1997-12-05  Karl Heuer  <kwzh@gnu.org>

	* info.el (Info-insert-dir): Use leading space in buffer name.

1997-12-04  Simon Marshall  <simon@gnu.org>

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords): Mark `#'s
	in variable references as being non-comments.

1997-12-03  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* emacs-lisp/byte-opt.el (byte-optimize-lapcode): Correctly distinguish
	byte-constant from operations on variables.

1997-12-03  Jens-Ulrik Holger Petersen  <petersen@kurims.kyoto-u.ac.jp>

	* cus-edit.el (custom-unlispify-remove-prefixes): Reference to
	related variables added.
	(custom-variable-default-form): New variable controlling default
	display form for customization of variables.
	(custom-variable): widget `:form' is nil before initialization.
	(custom-variable-value-create): Initialize `:form' to
	`custom-variable-default-form'.
	(custom-face-default-form): New variable controlling default
	display form for customization of faces.
	(custom-face): widget `:form' is nil before initialization.
	(custom-face-value-create): Initialize `:form' to
	`custom-face-default-form'.

1997-12-03  Kyle Jones  <kyle_jones@wonderworks.com>

	* mail/sendmail.el (sendmail-send-it):
	Parse folded Resent-To header properly; don't ignore folded lines.

	* mail/mail-utils.el (mail-parse-comma-list):
	Treat newlines and tabs as whitespace.

1997-12-03  Richard Stallman  <rms@gnu.org>

	* bindings.el (ctl-x-map): Add bindings rn and r+
	for number-to-register and increment-register.

	* register.el (frame-configuration-to-register)
	(window-configuration-to-register): Use a marker to save point.
	(point-to-register): Include point when saving a frame config.
	(number-to-register): New command (was commented out).
	(increment-register): New command.
	(view-register): Handle frame configs and window configs
	included in a list with a pointer.
	(view-register, insert-register): Use numberp, not integerp.

	* subr.el (global-set-key, local-set-key): Doc fix.

	* international/mule.el (load-with-code-conversion): Doc fix.

	* emacs-lisp/debug.el (debug-on-entry): If definition is a symbol,
	replace it with an equivalent lambda.

	* mail/rmail.el (rmail-decode-quoted-printable): New function
	mostly copied from gnus-art.el.
	(rmail-hex-string-to-integer): New fn, copied from hexl.el.
	(rmail-hex-char-to-integer): Likewise.
	(rmail-convert-to-babyl-format): Use rmail-decode-quoted-printable.

	* cus-edit.el (custom-save-delete, custom-save-all):
	Bind default-major-mode around visiting custom-file.

	* progmodes/prolog.el (prolog-mode-variables):
	Set imenu-generic-expression.

	* progmodes/sh-script.el (sh-imenu-generic-expression): New variable.
	(sh-mode): Make imenu-generic-expression local.
	(sh-set-shell): Set imenu-generic-expression based on which shell.

	* textmodes/sgml-mode.el (sgml-mode): Set imenu-generic-expression.

1997-12-03  Jari Aalto  <jari.aalto@ntc.nokia.com>

	* emacs-lisp/debug.el (debugger-mode-hook): New user variable.
	(debugger-env-macro): New general purpose macro for all debugger
	functions; separated from `debugger-eval-expression'.
	(debugger-eval-expression): Use `debugger-env-macro'.
	(debugger-record-buffer): New variable.
	(debugger-record-expression): New user function , key "R".
	(debugger-mode): Now runs hook `debugger-mode-hook'.

	* add-log.el (change-log-add-make-room): New function.
	(change-log-get-method-definition-1): Renamed get-method-definition-1.
	(change-log-get-method-definition): Renamed from get-method-definition.
	(add-log-keep-changes-together): New user variable.
	(add-change-log-entry): Added missing WHOAMI explanation.
	Added new functionality according to variable
	`add-log-keep-changes-together'.

1997-12-03  Kurt Hornik  <Kurt.Hornik@ci.tuwien.ac.at>

	* progmodes/octave-inf.el (inferior-octave-directory-tracker):
	Anchor regexp match to beginning of command string.

1997-12-03  Stephen Eglen  <stephen@cns.ed.ac.uk>

	* vc-hooks.el: Customized.

	* cus-edit.el (custom-variable-prompt): Ensure valid variable name
	is selected.

1997-12-03  Karl Heuer  <kwzh@gnu.org>

	* progmodes/cc-menus.el: Require imenu.

	* calendar/cal-french.el (french-calendar-special-days-array): New
	function.
	(calendar-french-date-string, calendar-goto-french-date): Use that
	function instead of the variable.

1997-12-01  Gerd Moellmann  <gerd@acm.org>

	* ispell.el (ispell-comments-and-strings): New function to
	interactively check comments and strings in the current buffer for
	spelling errors.  Comments and strings are identified based on
	syntax tables in effect.

1997-12-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (make-frame-names-alist, select-frame-by-name): New
	functions, support frame selection with completion and history.
	(frame-name-history, frame-names-alist): New variables.

1997-11-30  Dave Love  <d.love@dl.ac.uk>

	* progmodes/sh-script.el (sh-mode): Set `comment-start-skip' always.

	* simple.el (indent-for-comment): Check for null `comment-start-skip'.

1997-11-27  Richard Stallman  <rms@sucrose.ai.mit.edu>

	* dired.el (dired-move-to-filename-regexp): Make regexp fussier
	about amount of whitespace after month name.

1997-11-26  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* bibtex.el (bibtex-maintainer-address, bibtex-submit-bug-report):
	New maintainer (Dirk Herrmann <D.Herrmann@tu-bs.de>).

	* calendar: New subdirectory.

1997-11-26  Simon Marshall  <simon@gnu.org>

	* fast-lock.el (fast-lock-cache-data): Only use syntactic keywords if
	non-nil.

1997-11-25  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* diary-lib.el (diary-mail-days): Fix previous change.

1997-11-24  Stephen Eglen  <stephen@cogsci.ed.ac.uk>

	* diary-lib.el (diary-mail-addr, diary-mail-days): New variables.
	(diary-mail-entries): New function.

1997-11-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el (viper-ex): Accept prefix arguments.
	* viper-cmd.el (viper-quote-region): Make quote string mode-sensitive.
	(viper-read-string-with-history): Accept initial temp message.
	* viper.el (viper-go-away): Delocalize viper-mode-string and
	viper-current-state.

1997-11-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-vers.el (cvs-run-ediff-on-file-descriptor): Set
	default-directory.
	(cvs-run-ediff-on-file-descriptor): Use ediff-buffers when
	type=MODIFIED.
	* ediff-init.el: Commented out ediff-set-face-pixmap.
	* ediff-mult.el (ediff-get-session-number-at-pos):
	Optional buffer argument.
	* ediff-diff.el (ediff-match-diff-line, ediff-diff-ok-lines-regexp):
	Add C-m? before $.

1997-11-24  Simon Marshall  <simon@gnu.org>

	* menu-bar.el (menu-bar-describe-menu): Fixed duplicate KEYs.

1997-11-24  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* mail/mail-extr.el (mail-extr-voodoo): Allow & between names.
	Reenable &-substitution when & comes last.

1997-11-23  Richard Stallman  <rms@psilocin.ai.mit.edu>

	* apropos.el (apropos-variable): New command.
	(apropos-command): New arg JUST-VARS.

	* progmodes/scheme.el (scheme-mode-variables):
	Bind normal-auto-fill-function.

	* emacs-lisp/lisp-mode.el (lisp-mode-auto-fill): New function.
	(lisp-mode-variables): Bind normal-auto-fill-function.

	* register.el (window-configuration-to-register)
	(frame-configuration-to-register): Include (point) in the saved value.
	(jump-to-register): Restore (point) as well as window or frame config.

	* menu-bar.el (menu-bar-help-menu): Reorganize into more submenus.
	Rename some menu item strings.
	(menu-bar-manuals-menu, menu-bar-describe-menu): New submenus.
	Add an Apropos Variables item.

1997-11-22  Richard Stallman  <rms@gnu.org>

	* ange-ftp.el (ange-ftp-generate-passwd-key): Downcase the host name.
	(ange-ftp-passwd-hashtable): Doc fix.

	* progmodes/perl-mode.el (perl-mode): Delete autoload cookie.

	* files.el (auto-mode-alist): Add more extensions for perl-mode.
	(interpreter-mode-alist): Add miniperl.

	* play/bruce.el (bruce-phrases-file): Use user's home directory.
	(bruce, snarf-bruces): Give clean error when file does not exist.

	* which-func.el: New file.  (**Expecting papers from Alex Rezinsky.)

	* bindings.el (mode-line-format): Include which-func-mode item.

1997-11-22  Vinicius Jose Latorre  <vinicius@cpqd.br>

	* ps-print.el: Some comment and doc fixes.
	(ps-print-version): New version number (3.05.2) and doc fix.
	(ps-print, ps-header-lines, ps-show-n-of-n, ps-font-info-database)
	(ps-font-family, ps-font-size, ps-header-font-family)
	(ps-header-font-size, ps-header-title-font-size, ps-bold-faces)
	(ps-italic-faces, ps-underlined-faces, ps-left-header, ps-right-header)
	(ps-font, ps-font-bold, ps-font-italic, ps-font-bold-italic)
	(ps-avg-char-width, ps-space-width, ps-line-height): Doc fix.
	(ps-error-scale-font): New fn.
	(ps-soft-lf, ps-hard-lf): Fn deleted.
	(ps-get-page-dimensions, ps-set-bg, ps-face-bold-p, ps-face-italic-p)
	(ps-set-color): Reindentation.
	(ps-output-string-prim, ps-xemacs-face-kind-p): Internal blank lines
	deleted.
	(ps-set-font): Little programming improvement.
	(ps-line-lengths-internal, ps-nb-pages, ps-select-font)
	(ps-select-header-font): Simplify some expressions.
	(ps-plot-region): Replace (- X 1) by (1- X).
	(ps-generate-header): Replace (+ X 1) by (1+ X).
	(ps-print-preprint, ps-plot-with-face, ps-print-ensure-fontified)
	(ps-kill-emacs-check): Replace (if (and A B) C) by (and A B C).
	(ps-init-output-queue, ps-gnus-article-prepare-hook, ps-jts-ps-setup):
	Replace (setq a b)(setq c d) by (setq a b c d).
	(ps-begin-file, ps-end-file): Replace (ps-output A)(ps-output B)
	by (ps-output A B).
	(ps-begin-page): Replace (ps-output A)(ps-output B) by (ps-output A B),
	replace (setq a b)(setq c d) by (setq a b c d).
	(ps-next-line, ps-continue-line): Replace (setq a b)(setq c d)
	by (setq a b c d), and incorporates ps-soft-lf and ps-hard-lf,
	respectively.
	(ps-plot): Replace (setq a b)(setq c d) by (setq a b c d),
	and programming improvement.
	(ps-generate-postscript-with-faces): Initialization fix,
	replace (setq a b)(setq c d) by (setq a b c d),
	replace (if (and A B) C) by (and A B C).
	(ps-generate): Doc fix, reprogramming to set the page count,
	replace (setq a b)(setq c d) by (setq a b c d),
	replace (if A nil B) by (or A B),
	replace (if (and A B) C) by (and A B C).
	(ps-info-mode-hook): Replace (list 'A 'B) by '(A B).
	(ps-jack-setup): Replace (list) by nil.

1997-11-21  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Doc fixes and extra customization.
	(browse-url): Quote browse-url-choose-browser in application.

1997-11-21  Andreas Schwab  <schwab@delysid.gnu.org>

	* gud.el (gud-sentinel): Set mode-line-process in the process
	buffer, not the current buffer.

1997-11-20  Richard Stallman  <rms@gnu.org>

	* files.el (write-file): Make buffer writable if the new file is.

	* help.el (describe-variable): Don't use symbol-name if v isn't symbol.

	* help.el (help-with-tutorial-alist): New variable.
	(help-with-tutorial): Use help-with-tutorial-alist to read a language
	name, and also to find the tutorial file for a language.

	* mail/mail-extr.el (mail-extract-address-components):
	New arg ALL says return info about all the addresses.
	Clarify buffer switching logic using save-excursion.

1997-11-20  Karl Heuer  <kwzh@gnu.org>

	* international/mule-cmds.el (set-input-method): Renamed from
	select-input-method.

1997-11-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (set-frame-name): New function.

1997-11-19  Richard Stallman  <rms@gnu.org>

	* simple.el (kill-region): Detect read-only text
	by getting an error trying to delete it.
	Handle the cases where we can, and can't, get the killed text
	from the undo list with much the same code.

1997-11-18  Richard Stallman  <rms@gnu.org>

	* lpr.el (print-region-1): When running pr, use -h always.

1997-11-18  Dave Love  <d.love@dl.ac.uk>

	* progmodes/fortran.el (fortran-imenu-generic-expression): Match
	<type>*<mumble> and un-named block data, allow some continuations.

1997-11-18  Karl Heuer  <kwzh@gnu.org>

	* isearch.el (isearch-yank-string): New helper function.
	(isearch-yank-kill, isearch-yank-word, isearch-yank-line): Use it.
	(isearch-yank-x-selection): New function.
	(isearch-yank): Function deleted.

1997-11-18  Paul Eggert  <eggert@twinsun.com>

	* mail/rmail.el (rmail-convert-to-babyl-format): If the
	message uses the quoted-printable content-transfer-encoding,
	decode it into 8bit.

1997-11-17  Paul Eggert  <eggert@twinsun.com>

	* dired.el (dired-move-to-filename-regexp):
	* ange-ftp.el (ange-ftp-date-regexp):
	Allow month names of length 2 and up, with varying white space
	afterwards; e.g. Solaris 2.6 "es" locale uses "ab  " for April and
	"fbro" for February.

1997-11-16  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* cal-hebrew.el (list-hebrew-diary-entries): Add the diary entry
	"specifier" to the entry on the list.
	* cal-islam.el (list-islamic-diary-entries): Likewise.
	* diary-lib.el (list-diary-entries): Likewise.
	(list-sexp-diary-entries, add-to-diary-list): Likewise.
	(diary-unknown-time): New variable.
	(diary-entry-time): Use it.

1997-11-16  Richard Stallman  <rms@gnu.org>

	* man.el (Man-init-defvars, Man-build-man-command):
	Bind default-directory to "/" to avoid possible error in call-process.

1997-11-15  Matthew Swift  <swift@alum.mit.edu>

	* simple.el (comment-padding): New var.
	(comment-region): Use it.

1997-11-15  Richard Stallman  <rms@gnu.org>

	* textmodes/fill.el (fill-individual-paragraphs): Don't get
	confused in paragraph loop if we start on the last line
	and it has no final newline.

	* mail/rmail.el (rmail-summary-window-size): Allow integer values.

	* term/linux.el: Use set-input-mode to make Latin-1 chars work.

1997-11-15  Dave Love  <d.love@dl.ac.uk>

	* finder.el (finder-find-library): Re-instate (with a different
	implementation) so that `locate-library' can find compressed files.
	(finder-commentary): Use it.

1997-11-15  Hrvoje Niksic  <hniksic@srce.hr>

	* cus-edit.el (custom-face-save): Save the face.

1997-11-13  Andreas Schwab  <schwab@mescaline.gnu.org>

	* tar-mode.el (tar-mode-map): Fix function name in menu entry.

1997-11-10  Richard Stallman  <rms@gnu.org>

	* help.el (help-for-help): Update text for `m'.

	* imenu.el (imenu-default-create-index-function):
	Test imenu-prev-index-position-function and
	imenu-extract-index-name-function for non-nil, not fboundp.
	(imenu-add-to-menubar): Likewise.

	* replace.el (perform-replace): In Transient Mark mode, if
	region is active, only search the region.
	(query-replace, etc.): Doc fixes.

	* international/characters.el: New category ` '.
	Enable for non-breaking space in Latin-N.

	* emulation/ws-mode.el (wordstar-mode): Run wordstar-mode-hook.

	* cal-french.el (french-calendar-day-name-array):
	Give the day array, not the month array.

	* help.el (describe-function): Handle the arglist of a macro.

	* mail/mail-extr.el (mail-extr-voodoo): Comment out &-substitution.

1997-11-10  Kurt Hornik  <Kurt.Hornik@ci.tuwien.ac.at>

	* progmodes/octave-inf.el (inferior-octave-startup-args):
	Set to '("-i") to force interactive behavior.
	(inferior-octave-prompt): Include the `debug' prompt issued by the
	Octave `keyboard' command.

1997-11-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* replace.el (query-replace-highlight): Change default to t.

1997-11-10  Karl Heuer  <kwzh@gnu.org>

	* finder.el (finder-exit): Simplify.

1997-10-07  Andreas Schwab  <schwab@melange.gnu.org>

	* arc-mode.el (archive-zoo-summarize): Properly handle the case of
	a short file name with a non-empty directory part.

1997-11-07  Kenichi Handa  <handa@etl.go.jp>

	* gnus/gnus-mule.el (gnus-mule-initialize): Do not set
	nntp-coding-system-for-read and nntp-coding-system-for-write.

	* gnus/gnus-start.el (gnus-read-descriptions-file): Decode
	description if necessary.

	* gnus/nntp.el (nntp-coding-system-for-read): Set default value to
	binary.
	(nntp-coding-system-for-write): Likewise.

	* international/mule-cmds.el (set-language-environment): Run
	exit-language-environment-hook before calling `exit-function'
	which is specified for the language environment.

	* language/european.el: Add "Upper Sorbian" and "Lower Sorbian" in
	the documentation of the language env "Laint-2".

	* language/cyrillic.el (ccl-encode-koi8-font): Fix bug of CCL
	program.
	(ccl-encode-alternativnyj-font): Likewise.

	* textmodes/fill.el (fill-region-as-paragraph): Fix bug of
	handling the case that English letters are followed by such
	characters as Japanese and Chinese.

1997-11-07  Paul Eggert  <eggert@twinsun.com>

	* dired.el (dired-move-to-filename-regexp):
	Handle Japanese-format dates.
	* ange-ftp.el (ange-ftp-date-regexp): Likewise.  In western dates,
	accept month name and day-of-month in either order.

1997-11-07  Karl Heuer  <kwzh@gnu.org>

	* mail/mailabbrev.el (build-mail-abbrevs): Use initial space in
	internal buffer name.

	* files.el (rename-uniquely): Simplify.

1997-11-07  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* cal-china.el (calendar-chinese-date-string): Fix month name.

	* cal-tex.el (cal-tex-cursor-week-iso): Delete spurious %.

1997-11-02  Kevin Rodgers  <kevinr@ihs.com>

	* emacs-lisp/byte-opt.el (byte-optimize-concat): New function.

1997-11-02  Richard Stallman  <rms@gnu.org>

	* apropos.el (apropos-command): Doc fix.

1997-11-02  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* cal-coptic.el (ethiopic-calendar-epoch): Correct to 8 CE.

1997-11-02  Karl Heuer  <kwzh@gnu.org>

	* progmodes/fortran.el (fortran-imenu-generic-expression): Doc fix.
	Delete redundant setq.

1997-10-31  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-mult.el (ediff-redraw-directory-group-buffer)
	(ediff-redraw-registry-buffer): Delete phony session overlays.
	Added session number to various calls to update the meta buffer.
	(ediff-update-markers-in-dir-meta-buffer): New, for fast redisplay
	of meta buffer.
	(ediff-update-meta-buffer, ediff-redraw-directory-group-buffer)
	(ediff-previous-meta-overlay-start, ediff-next-meta-item): Changed to
	support the above.
	(ediff-insert-session-info-in-meta-buffer)
	(diff-replace-session-status-in-meta-buffer)
	(ediff-insert-session-status-in-meta-buffer)
	(ediff-replace-session-activity-marker-in-meta-buffer)
	(ediff-insert-session-activity-marker-in-meta-buffer): New supporting
	functions for fast redisplay.

	* ediff-util.el (ediff-setup): Has a new argument, the file name
	where to save the merge buffer.
	(ediff-arrange-autosave-in-merge-jobs): New function, uses the new
	arg of ediff-setup to set the visited file name of the merge buffer.
	(ediff-setup): Set buffer-offer-save to t in merge buffers.

	* ediff-vers.el (ediff-*-merge-*): All these function now have one
	addl. optional argument, the file name where to save the merge buffer.
	This is useful in scripts.

	* ediff.el (ediff-merge-*): All These top-level function now have one
	more optional argument, the file name where to save the merge buffer.
	This is useful in scripts.

	* ediff-merg.el: ediff-merge custom group definition moved to
	ediff-init.el.

	* ediff-init.el: Additional variables customized; hooks moved into
	a separate customization subgroup.

	* ediff-diff.el (ediff-same-file-contents): New function.
	(ediff-setup-diff-regions): Bark if the user supplied -c option.

1997-10-31  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el: Fixed r! cmd args.  Previously it would discard the args.

	* viper-init.el: Make all viper-defined emacs minor modes nil by
	default.

	* viper-keym.el: Don't bind C-c\ in global-map.

	* viper.el: Don't change state to emacs unless viper-mode is t.

	* viper-mous.el (viper-mouse-click-window): Check if click was over
	a live window.

1997-10-31  Dave Love  <d.love@dl.ac.uk>

	* progmodes/fortran.el (fortran-imenu-generic-expression): New
	variable.
	(fortran-mode): Use it.

1997-10-31  Richard Stallman  <rms@gnu.org>

	* textmodes/tex-mode.el (tex-validate-region): Really check
	for mismatched parens.

1997-10-28  Simon Marshall  <simon@gnu.org>

	* font-lock.el (font-lock-keywords): Doc fix.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Allow
	any number of ::foo suffixes in declarative items.

	* lazy-lock.el (lazy-lock-fontify-after-defer): Check each buffer to
	make sure it still (a) exists and (b) has Lazy Lock mode turned on.

1997-10-26  Richard Stallman  <rms@gnu.org>

	* compile.el (compilation-error-regexp-alist):
	New element for Sun F90.

1997-10-25  Dave Love  <d.love@dl.ac.uk>

	* emacs-lisp/find-func.el (find-function): Add autoload cookie.
	(find-function-other-window, find-function-other-frame)
	(find-function-on-key): Likewise.

1997-10-24  John W. Eaton  <jwe@bevo.che.wisc.edu>

	* progmodes/octave-mod.el (octave-auto-indent): New variable.
	(octave-electric-semi, octave-electric-space): Use it.

	* progmodes/octave-mod.el (octave-before-magic-comment-p): New func.
	(calculate-octave-indent, octave-comment-indent): Use it.

1997-10-24  Kurt Hornik  <Kurt.Hornik@ci.tuwien.ac.at>

	* progmodes/octave-mod.el (octave-auto-indent): New variable.
	(octave-electric-semi, octave-electric-space): Use it.

	* progmodes/octave-mod.el (octave-maybe-insert-continuation-string):
	New function.
	(octave-auto-fill): No longer calls do-auto-fill.  Should now
	avoid breaking lines after comment starts or before code line
	continuation expressions.
	(octave-fill-paragraph): Move forward a line if octave-auto-fill
	gave up.

	* progmodes/octave-mod.el (octave-before-magic-comment-p): New func.
	(octave-comment-indent): Handle magic comments correctly.
	(calculate-octave-indent): Handle magic comments correctly.

	* progmodes/octave-mod.el (octave-abbrev-table): Added abbrevs for
	switch, case, otherwise, and endswitch.
	(octave-begin-keywords): Added switch.
	(octave-else-keywords): Added case and otherwise.
	(octave-end-keywords): Added endswitch.
	(octave-block-match-alist): Added an entry for switch syntax.
	(calculate-octave-indent): Added support for switch syntax.
	(octave-block-end-offset): New function.
	(octave-comment-indent): Fix a typo.

	* progmodes/octave-mod.el (octave-block-match-alist): Move
	`otherwise' to right after `case' to have octave-close-block()
	correctly close a `switch' block by `endswitch'.

1997-10-24  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: The menu now used toggle and radio for some items.
	(reftex-default-context-regexps): `caption' now prefers the
	optional short caption.
	(reftex-offer-label-menu): Fixed bug which could kill master
	buffer of external document.
	(reftex-select-item, reftex-get-buffer-visiting): Compatibility
	code works now the other way round.
	(reftex-select-external-document): Now gives a message when no
	external documents are available.
	(reftex-find-duplicate-labels): Single key strokes to exit or to
	do a query replace.  Made more user friendly in general.
	(reftex-section-levels, reftex-default-context-regexps): Move
	definition of these variables to configuration section.

1997-10-24  Richard Stallman  <rms@gnu.org>

	* help.el (locate-library): Comment out the code that searches
	for compressed files.

1997-10-24  Simon Marshall  <simon@gnu.org>

	* textmodes/outline.el (outline-font-lock-keywords): Fontify the
	whole line, not just the part that matches outline-regexp.

1997-10-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (hook): Use `widget-group-match' instead of
	`widget-editable-list-match'.

1997-10-24  Bill Richter  <richter@gauss.math.nwu.edu>

	* international/quail.el (quail-translation-keymap): KP_Enter key
	emulates `C-SPC'.  `mouse-2' bound to
	`quail-mouse-choose-completion'.
	(quail-completion-list-translations): Set text property
	`mouse-face' of character `translations' to `highlight'.  Changed
	`newline' to `insert "\n"' to prevent text property inheritance.
	(quail-mouse-choose-completion): New function bound to `mouse-2'
	selects highlighted characters from *Quail Completions* buffer.
	(quail-choose-completion-string): New function called by
	`quail-mouse-choose-completion'.

1997-10-24  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (list-input-methods): Improve the
	message shown when LEIM is not installed.

1997-10-23  Simon Marshall  <simon@gnu.org>

	* international/mule.el (load-with-code-conversion): Indicate in
	messages if source code is being loaded.

1997-10-23  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Doc fixes.
	(browse-url): Apply, don't just call, browse-url-choose-browser,
	so args works properly.
	(browse-url-maybe-new-window): New function.
	(browse-url-netscape, browse-url-mosaic, browse-url-cci)
	(browse-url-w3, browse-url-lynx-emacs, browse-url-mail): Use it.
	(browse-url-lynx-emacs): Don't call term-term-name.
	(browse-url-lynx-input-field, browse-url-lynx-input-delay)
	(browse-url-lynx-input-attempts): New variables.
	(browse-url-lynx-emacs): Use any existing Lynx buffer; take care
	to move off input fields.  (After Vladimir Alexiev
	<vladimir@cs.ualberta.ca>.)
	(browse-url-mosaic-program): New variable.
	(browse-url-mosaic): Use browse-url-mosaic-program and
	browse-url-new-window-p.
	(browse-url-at-mouse): Use browse-url-new-window-p.

1997-10-23  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (set-default-coding-systems):
	Doc-string modified.
	(prefer-coding-system): Likewise.  Call coding-system-base instead
	of coding-system-parent.
	(describe-language-environment): Print aliases of each coding
	system.
	(set-language-environment-hook): New variable.
	(exit-language-environment-hook): New variable.
	(set-language-environment): Call these hooks.  Before setting a
	new language environment, exit from the
	current-language-environment if necessary.
	(input-method-verbose-flag): The value can be nil, t,
	complex-only, or default.
	(input-method-highlight-flag): Doc-string augmented.
	(activate-input-method): Check if we can run the registered
	function to activate an input method.

	* international/mule-conf.el: Give proper SAFE_CHARSET argument in
	each call of make-coding-system.

	* international/mule-diag.el (list-input-methods): Handle the case
	that title of input method is not a simple string.  Show users
	an informative message when leim is not yet installed.
	(describe-coding-system): Print safe charsets of the coding system.

	* international/mule-util.el (find-safe-coding-system): New function.

	* international/mule.el (load-with-code-conversion): Update
	preloaded-file-list, bind load-file-name and
	inhibit-frame-unsplittable properly.
	(make-char): Make it a function.  Set it byte-compile property to
	optimize byte-compiled codes.
	(make-coding-system): New optional arg charsets.  Set property
	`safe-charsets' of the coding system to it.

	* international/quail.el (quail-require-guidance-buf): Adjusted
	for the change of input-method-verbose-flag.

	* language/chinese.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.
	(euc-cn): Define it as an alias of coding-system chinese-iso-8bit.

	* language/cyrillic.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/devanagari.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/european.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/greek.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/hebrew.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/japanese.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/korea-util.el: New file.

	* language/korean.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.  Set exit-function for language
	environment "Korean" to exit-korean-environment.
	(setup-korean-environment): Moved to korean.el.

	* language/lao.el: Give proper SAFE-CHARSET argument in each call
	of make-coding-system.

	* language/thai.el: Give proper SAFE-CHARSET argument in each call
	of make-coding-system.

	* language/tibetan.el: Give proper SAFE-CHARSET argument in each
	call of make-coding-system.

	* language/vietnamese.el: Give proper SAFE-CHARSET argument in
	each call of make-coding-system.

	* man.el (Man-getpage-in-background): Bind inhibit-eol-conversion
	to t before calling start-process or call-process.
	(Man-softhyphen-to-minus): New function.  If
	enable-multibyte-characters is non-nil, convert the code 0255 only
	when it is not a part of a multibyte characters.
	(Man-fontify-manpage): Call Man-softhyphen-to-minus.
	(Man-cleanup-manpage): Likewise.

	* term.el (term-exec-1): Bind inhibit-eol-conversion to t before
	calling start-process.

1997-10-23  Richard Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-inhibit): New variable.
	(jka-compr-handler): Obey jka-compr-inhibit.

	* scroll-bar.el (set-scroll-bar-mode): Take just one arg.
	(set-scroll-bar-mode-1): Take 2 args, as set-scroll-bar-mode used to.
	(scroll-bar-mode variable): Use set-scroll-bar-mode-1.
	(scroll-bar-mode command): Pass 1 arg to set-scroll-bar-mode.

	* faces.el (basic-faces): New group.  Put the standard faces in it.

	* mouse.el (mouse-drag-vertical-line): Handle left-side scroll bars.

1997-10-23  Karl Heuer  <kwzh@gnu.org>

	* emacs-lisp/lisp-mnt.el: picture.el no longer required.
	(lm-insert-at-column): Use FORCE arg of move-to-column.
	* emulation/tpu-edt.el (tpu-arrange-rectangle): Likewise.

1997-10-23  Barry A. Warsaw  <cc-mode-help@python.org>

	Merge in Release 5.19 of cc-mode.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	CASE 5F: extern-lang-close relpos should be
	element 0 of inclass-p, not element 1.

	* progmodes/cc-cmds.el (c-progress-init, c-progress-fini):
	Be silent if c-progress-interval is nil.

	* progmodes/cc-vars.el (c-progress-interval): Document new semantics.

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	Watch out for keywords which have a
	preceding underscore.

	* progmodes/cc-menus.el: Patches to Imenu support given by
	"Masatake (jet) YAMATO" <masata-y@is.aist-nara.ac.jp>.

	* progmodes/cc-cmds.el (c-comment-line-break-function):
	Fix for when comment starts at
	comment-column and there is non-whitespace preceding this on the
	current line.

	* progmodes/cc-mode.el (c-submit-bug-report): Remove
	c-recognize-knr-p.  Add c-comment-continuation-stars.

	* progmodes/cc-styles.el (c-initialize-builtin-style):
	Only use copy-tree if it is funcall-able.  This is the right patch, and
	was given by Erik Naggum <erik@naggum.no>

1997-10-23  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-menus.el (cc-imenu-c-prototype-macro-regexp): New var.

	(cc-imenu-c++-generic-expression): Patches to better match C++ code.
	Given by jan.dubois@ibm.net (Jan Dubois).

	* progmodes/cc-menus.el (cc-imenu-java-generic-expression):
	Removed test for declaration
	statements.  Patch given by Ake Stenhoff <etxaksf@aom.ericsson.se>, as
	forwarded to me by RMS.

	* progmodes/cc-menus.el:
	Imenu support for Objective-C given by Masatake (jet) YAMATO.

	* progmodes/cc-mode.el (objc-mode): Bind imenu-create-index-function
	to cc-imenu-objc-function to enable Imenu support for Objective-C.
	Contributed by Masatake (jet) YAMATO.

1997-10-23  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-styles.el (c-initialize-builtin-style):
	Use existing copy-tree if it's defined.

	copy-sequence doesn't work; the
	c-offsets-alist must be copied recursively.  Use copy-tree solution
	given by Simon Marshall <simon@gnu.org>.

1997-10-23  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-cmds.el (c-beginning-of-statement):
	Fixes in sentence movement to properly
	handle M-e moving forward into a comment when looking at preceding
	whitespace, and M-a moving backward into comment when looking at
	following whitespace.

	Uncommented the looking-at call in the
	sentence-flag clause so that moving by forward-sentence when looking
	at the beginning of a comment works again.  A previous log message in
	cc-mode.el indicates this was commented out "because
	c-beginning-of-statement-1 should do the right thing", but clearly it
	doesn't.

	I don't know if this breaks something else, because I can't figure out
	why it was commented out in the first place.

	* progmodes/cc-langs.el:
	Define `/' in c-mode-base-map since all modes now support
	c-electric-slash.

	Define C-c C-e in mode-specific maps instead of c-mode-base-map since
	c-expand-macro is meaningless in Java and IDL.

	* progmodes/cc-engine.el (c-end-of-statement-1):
	Wrap backward-up-list in a c-safe call so no
	error results when buffer contains only a comment and point is at
	eob.

1997-10-22  Kenichi Handa  <handa@etl.go.jp>

	* gnus/gnus-art.el (gnus-show-traditional-method): Call
	gnus-mule-decode-article only when enable-multibyte-characters is
	non-nil.

	* gnus/gnus-ems.el (gnus-ems-redefine): Require `gnus-mule' only
	when enable-multibyte-characters is non-nil.

	* gnus/gnus-mule.el: Set chinese-big5 for newsgroup "tw".

	* gnus/gnus-sum.el (gnus-structured-field-decoder): Pay attention
	to enable-multibyte-characters.
	(gnus-unstructured-field-decoder): Likewise.

1997-10-21  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (describe-coding-system): Print
	information about coding system properties, post-read-conversion
	and pre-write-conversion.
	(print-coding-system-briefly): Adjusted for the change in mule.el.
	(describe-current-coding-system): Likewise.
	(print-coding-system): Likewise.

	* international/mule.el: The summary of the following changes:
	(1) Make all coding systems (including aliases and subsidiaries)
	directly have coding-spec vector in `coding-system' property.
	(2) Properties of a coding system (except for `coding-system' and
	`eol-type') is embedded in PLIST slot of coding-spec vector.
	(coding-spec-plist-idx): Initialize to 3.
	(coding-system-spec-ref): Deleted.
	(coding-system-spec): Moved from src/coding.c.
	(coding-system-type): Adjusted for the above change.
	(coding-system-mnemonic): Likewise.
	(coding-system-doc-string): Likewise.
	(coding-system-flags): Likewise.
	(coding-system-eol-type): Likewise.
	(coding-system-category): Likewise.
	(coding-system-get, coding-system-put, coding-system-category):
	New functions.
	(coding-system-base): Moved from mule-util.el and adjusted for the
	above change.
	(coding-system-parent): Make it obsolete alias of
	coding-system-base.
	(make-subsidiary-coding-system): Adjusted for the above change.
	Update coding-system-list and coding-system-alist.
	(make-coding-system): Likewise.
	(define-coding-system-alias): Likewise.
	(set-buffer-file-coding-system): Typo in doc-string fixed.
	(after-insert-file-set-buffer-file-coding-system): Change
	enable-multibyte-characters only when
	find-new-buffer-file-coding-system returns non-nil value.
	(find-new-buffer-file-coding-system): Adjusted for the above change.

	* international/mule-cmds.el (read-multilingual-string): Use
	current-input-method prior to default-input-method.  Don't bind
	current-input-method by `let', instead, activate the specified
	input method in the current buffer temporarily.

	* international/mule-conf.el: Change the way of making coding
	systems no-conversion and undecided.

	* international/mule-util.el (coding-system-base): Moved to
	mule.el.
	(coding-system-post-read-conversion):
	Use the new function coding-system-get.
	(coding-system-pre-write-conversion): Likewise.
	(coding-system-unification-table-for-decode): Likewise.
	(coding-system-unification-table-for-encode): Likewise.
	(coding-system-list): Adjusted for the change in mule.el.
	(coding-system-plist): Deleted.
	(coding-system-equal): Do not use coding-system-plist.

	* language/chinese.el: Use coding-system-put to set coding system
	properties, post-read-conversion and pre-write-conversion.
	(post-read-decode-hz): Return the result of decode-hz-region.
	(pre-write-encode-hz): Do not change the value of
	last-coding-system.

	* language/devan-util.el (devanagari-compose-from-is13194-region):
	Return the length of converted region.
	(in-is13194-devanagari-post-read-conversion): Return the result of
	devanagari-compose-from-is13194-region.

	* language/devanagari.el: Use coding-system-put to set coding
	system properties, post-read-conversion and pre-write-conversion.

	* language/thai.el: Use coding-system-put to set coding system
	properties, post-read-conversion and pre-write-conversion.

	* language/tibet-util.el (tibetan-post-read-conversion): Return
	the length of converted region.

	* language/tibetan.el: Use coding-system-put to set coding system
	properties, post-read-conversion and pre-write-conversion.

	* language/vietnamese.el: Use coding-system-put to set coding system
	properties, post-read-conversion and pre-write-conversion.

1997-10-21  Kenichi Handa  <handa@etl.go.jp>

	* gnus/nntp.el (nntp-coding-system-for-write): New variable.
	(nntp-open-connection): Bind coding-system-for-write to
	nntp-coding-system-for-write.

	* gnus/gnus-mule.el: Set default coding system for encoding to
	iso-latin-1.
	(gnus-mule-initialize): Set nntp-coding-system-for-write to
	binary.

1997-10-21  Tomohiko Morioka  <morioka@jaist.ac.jp>

	* gnus/nnfolder.el (nnfolder-request-list): Bind
	file-name-coding-system to binary.
	(nnfolder-possibly-change-group): Likewise.

	* gnus/nnml.el (nnml-retrieve-headers): Likewise.
	(nnml-request-article): Likewise.
	(nnml-request-group): Likewise.
	(nnml-request-list): Likewise.
	(nnml-possibly-change-directory): Likewise.

	* gnus/nnmh.el (nnmh-retrieve-headers): Likewise.
	(nnmh-request-article): Likewise.
	(nnmh-request-group): Likewise.
	(nnmh-request-list): Likewise.
	(nnmh-possibly-change-directory): Likewise.
	(nnmh-active-number): Likewise.

	* gnus/nnmail.el (nnmail-find-file): Likewise.
	(nnmail-write-region): Likewise.

	* gnus/gnus-sum.el (gnus-structured-field-decoder): If the
	feature `mule' is provided, set the default value to the function
	which decode the argument string by gnus-mule-coding-system.
	(gnus-unstructured-field-decoder): Likewise.

	* gnus/gnus-ems.el (gnus-ems-redefine): If the feature `mule' is
	provided, require gnus-mule and call gnus-mule-initialize.

	* gnus/gnus-art.el (gnus-show-traditional-method): New variable.
	(gnus-article-prepare): If gnus-show-mime is nil, call
	gnus-show-traditional-method.

	* gnus/gnus-mule.el: Require nntp instead of gnus and message.
	Set euc-kr for newsgroup "han".  Delete code for add-hooking
	gnus-mule-initialize and setting coding system for nntp.
	(gnus-mule-select-coding-system): Get a coding system of the
	current newsgroup from gnus-summary-buffer.
	(gnus-mule-decode-summary): Deleted.
	(gnus-mule-initialize): Add-hook gnus-mule-select-coding-system to
	gnus-parse-headers-hook.  Don't add-hook gnus-mule-decode-summary
	and gnus-mule-decode-article.  Don't set process coding system for
	nntp stream to 'no-conversion, instead set
	nntp-coding-system-for-read to 'binary.  Set
	nnheader-file-coding-system and nnmail-file-coding-system to
	'binary.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.66 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-topic.el (gnus-topic-check-topology): Protect against nil
	entries.

	* nnfolder.el (nnfolder-request-regenerate): Typo.

	* gnus-art.el (gnus-button-alist): mailto urls didn't work.

1997-10-21  Jay Sachs  <sachs@bull.cs.williams.edu>

	* gnus-score.el (gnus-score-edit-current-scores): Switch on score
	mode in the right buffer.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.65 is released.

1997-10-21  Sigbjorn Finne  <sof@dcs.gla.ac.uk>

	* gnus-srvr.el (gnus-browse-foreign-server): Message fix.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-1): Don't read the dribble file
	unconditionally in slaves.

	* gnus-sum.el (gnus-summary-edit-article): Restore original date
	header.

	* gnus-start.el (gnus-1): Set gnus-slave earlier.

	* gnus-sum.el (gnus-parent-headers): Would infloop.

	* message.el (message-make-message-id): Make better Message-ID
	when superseding.

1997-10-21  Jason Rumney  <jasonr@pec.co.nz>

	* nnkiboze.el (nnkiboze-request-delete-group): Translate file
	chars.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnml.el (nnml-directory): Doc fix.

	* gnus-topic.el (gnus-topic-make-menu-bar): Added
	gnus-topic-edit-parameters.

1997-10-21  Jay Sachs  <sachs@interactive.net>

	* gnus-win.el (gnus-buffer-configuration): New entry:
	score-trace.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-topic.el (gnus-topic-delete): Mark as changed.
	(gnus-topic-change-level): Make last param optional.

	* gnus-group.el (gnus-group-iterate): Make sure window is
	selected.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-topic.el (gnus-topic-check-topology): Add new groups to the
	end of the first topic.

	* gnus-cache.el (gnus-jog-cache): Use gnus-group-iterate.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-gnus-to-quick-newsrc-format): Escape
	newlines.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* smiley.el (smiley-deformed-regexp-alist): Fix.

1997-10-21  Danny Siu  <dsiu@adobe.com>

	* smiley.el (smiley-buffer): Make smiley case sensitive.
	(smiley-deformed-regexp-alist): Added more regexp for happy smiley.
	(smiley-nosey-regexp-alist): Same as above.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-nocem.el (gnus-nocem-close): Nix out
	gnus-real-group-hashtb.

1997-10-21  Carl D. Roth  <roth@klondike.cse.ucsc.edu>

	* gnus-nocem.el (gnus-fill-real-hashtb): New function.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-group.el (gnus-group-read-init-file): Message.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nntp.el (nntp-nov-gap): Changed default.

	* gnus-nocem.el (gnus-nocem-issuers): Fixed names.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-summary-catchup): Also removed cached
	articles.

	* nnvirtual.el (nnvirtual-update-xref-header): Don't double
	Xrefs.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.64 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-article-set-globals): New function.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* gnus-ems.el (gnus-mode-line-modified): Refine detection on
	whether narrow indicators should be used.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cache.el (gnus-jog-cache): Bind gnus-auto-select-next.

1997-10-21  Guy Geens  <Guy.Geens@elis.rug.ac.be>

	* gnus-score.el (gnus-score-load-file): Fix decay.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-group.el (gnus-group-iterate): Save excursion.

	* gnus-score.el (message): Required.

	* gnus-sum.el (gnus-summary-limit-children): Unreads, not reads.

	* gnus-topic.el (gnus-topic-change-level): Move groups.

	* gnus-cache.el (gnus-jog-cache): Protect against nil groups.

	* message.el (message-generate-headers): Don't delete Message-ID
	if buffer not modified.

	* gnus.el (gnus-simplify-mode-line): Use varying formats.

	* gnus-xmas.el (gnus-xmas-group-remove-excess-properties): Removed.
	(gnus-xmas-topic-remove-excess-properties): Removed.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-activate-group): Always return the right
	active range.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.63 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-undo.el (gnus-undo-mode): Use it.

	* gnus-salt.el (gnus-pick-mode): Use it.

	* gnus-gl.el (gnus-grouplens-mode): Use it.

	* gnus-ems.el (gnus-add-minor-mode): New function.

1997-10-21  Michael R. Cook  <mcook@cognex.com>

	* gnus-topic.el (gnus-topic-toggle-display-empty-topics): List
	groups.

1997-10-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-art.el (gnus-article-treat-html): Use `w3-region'.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-check-news-header-syntax): Check repeated
	groups.

	* gnus-move.el (gnus-move-group-to-server): Protect against nil
	articles.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-check-first-time-used): Force reading the
	active file the first time Gnus is used.

	* gnus-group.el (gnus-group-set-mode-line): Conditionalize
	modified.

	* gnus-ems.el (gnus-mode-line-modified): New variable.

	* gnus-xmas.el (gnus-summary-toolbar): Typo fix.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-check-new-newsgroups): New default.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.62 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nngateway.el (nngateway-request-post): Call sendmail function.

	* message.el (message-send-news): Supply the method to the post
	function.

	* gnus.el (gnus-group-auto-expirable-p): Doc fix.

	* message.el (message-clone-locals): Only clone Gnus variables.

	* gnus-nocem.el (gnus-nocem-enter-article): Use real group name.

1997-10-21  enami tsugutomo  <enami@but-b.or.jp>

	* gnus-group.el (gnus-group-set-mode-line): Use new, shorter
	format.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-score.el (gnus-score-headers): Let the score buffer inherit
	variables from the summary buffer.

	* message.el (message-clone-locals): Made into own function.

	* gnus.el (gnus-select-method): Changed default.

	* gnus-start.el (gnus-read-active-file): Changed default to
	`some'.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.61 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-adjust-marked-articles): Typo.

1997-10-21  Gary D. Foster  <Gary.Foster@corp.sun.com>

	* gnus-topic.el (gnus-topic-mode-map): [delete].

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-demon.el (gnus-demon): Make sure Emacs really is idle.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.60 is released.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-salt.el: Customized.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-salt.el (gnus-tree-show-summary): New function.
	(gnus-tree-mode-map): Use it.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-salt.el (gnus-generate-horizontal-tree): Protect against
	nil threads.

	* gnus-sum.el (gnus-adjust-marked-articles): Change.

1997-10-21  Scott Byer  <byer@adobe.com>

	* gnus-sum.el (gnus-adjust-marked-articles): Improper lists.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-sum.el (gnus-summary-search-article): Inhibit updating tree
	buffer.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-activate-group): Ignore zero returns.

	* gnus-salt.el (gnus-generate-vertical-tree): Use a safer
	line-drawing algorithm.

	* nnml.el (nnml-generate-nov-file): Articles with null bodies are
	legal.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (article-hide-pgp): Only run hook when hiding pgp.

	* nnfolder.el (nnfolder-save-buffer): Make sure the directory
	exists.

	* gnus-uu.el (gnus-uu-post-news-inews): Didn't work when posting
	threaded.
	(gnus-uu-post-encoded): Include sequence numbers in threaded
	posts.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-set-auto-save-file-name): Translate / in
	buffer names.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.59 is released.

1997-10-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* gnus-xmas.el (gnus-xmas-article-display-xface): Correct setting of
	braces.

1997-10-21  MORIOKA Tomohiko  <morioka@jaist.ac.jp>

	* smiley.el (smiley-deformed-regexp-alist): Add Japanese smiley
	faces.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (article-hide-pgp): Only run hook when there is a
	PGP signature.

	* gnus-sum.el (gnus-summary-fetch-faq): Have `C-u' work.

	* gnus-xmas.el (gnus-xmas-summary-set-display-table): Don't nix
	out chars that aren't supposed to be nixed out.

	* gnus-art.el (gnus-article-delete-invisible-text): Would bug out
	on point-max.
	(gnus-article-delete-text-of-type): Ditto.

	* gnus-xmas.el (gnus-xmas-redefine): Switch off horiz scrollbar in
	tree buffers.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.58 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el: Backed out all char-afters which caused bugs all over
	the place.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.57 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-demon.el (gnus-demon-add-nocem): Use a numerical idle.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* nntp.el (nntp-wait-for): Replace following-char with char-after.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* gnus-msg.el (gnus-extended-version): Put XEmacs codename in
	default X-Mailer/X-Newsreader if the symbol exists.

1997-10-21  Christoph Wedler  <wedler@fmi.uni-passau.de>

	* message.el (message-checksum): Do not only inspect the last
	32/64 characters; technical: `ash' is no bit-rotate.

1997-10-21  Guy Geens  <Guy.Geens@elis.rug.ac.be>

	* gnus-score.el (gnus-decay-scores): Use the right index.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-score.el (gnus-score-load-file): Set the decay when not
	set.

	* gnus-art.el (gnus-article-treat-html): Do w3 setup.

	* gnus.el (gnus-indent-rigidly): Be useful on odd tab widths.

	* gnus-xmas.el (gnus-article-x-face-command): Allow just using
	xpm.

1997-10-21  Robert Bihlmeyer  <robbe@orcus.priv.at>

	* gnus-score.el (gnus-score-find-trace): Would bug out for
	file-less rules.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-xmas.el (gnus-xmas-group-startup-message): Cleanup.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nntp.el (nntp-request-head): Guess at article number.

1997-10-21  David Moore  <dmoore@ucsd.edu>

	* gnus-xmas.el (gnus-xmas-set-text-properties): New version.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-group.el (gnus-group-search-forward): Ignore topic lines.

1997-10-21  Karl M. Hegbloom  <karlheg@inetarena.com>

	* gnus.el: ebola fixes.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (t): Moved pop article keystroke.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnmail.el (nnmail-search-unix-mail-delim-backward): Allow
	several "From "'s.
	(nnmail-search-unix-mail-delim): Ditto.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-group.el (gnus-group-make-web-group): Use default prompt
	instead of string.

	* gnus.el (gnus-string-or): New macro.
	(gnus-string-or-1): New function.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.56 is released.

1997-10-21  Shuhei KOBAYASHI  <shuhei-k@jaist.ac.jp>

	* message.el (message-make-in-reply-to): Make valid In-Reply-To.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-header-button-alist): Check for URLs in the
	Subject.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-xmas.el: Cleanup.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-output-to-file): Return t.

1997-10-21  Guy Geens  <Guy.Geens@elis.rug.ac.be>

	* gnus-score.el (gnus-decay-score): Make decay work on negative
	scores.

1997-10-21  Kurt Swanson  <kurt@dna.lth.se>

	* nnmail.el (nnmail-article-group): Handle junk properly.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-summary-limit-children): Typo.  Wouldn't
	marked NoCeM'ed out messages as read.

1997-10-21  Darren Stalder  <torin@daft.com>

	* gnus-util.el (gnus-encode-date): Fix time zone.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-move.el (gnus-move-group-to-server): Don't sort nil lists.

1997-10-21  Paul Franklin  <paul@cs.washington.edu>

	* nnmail.el (nnmail-keep-last-article): Clarify docstring.

1997-10-21  Danny Siu  <dsiu@adobe.com>

	* gnus-picon.el (gnus-group-display-picons): Use
	gnus-group-real-name so that picons for foreign groups display
	correctly.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-topic.el (gnus-topic-mode): Nix out topic missing group
	function when switching off.

	* gnus-salt.el (gnus-pick-start-reading): Don't prompt.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-hack-decode-rfc1522): New function.

	* gnus-sum.el (gnus-parse-headers-hook): New default.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.55 is released.

1997-10-21  Michael R. Cook  <mcook@cognex.com>

	* gnus-art.el (gnus-button-alist): Typo fix.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-salt.el (gnus-pick-start-reading): Mark unpicked as read.

	* gnus-sum.el (gnus-summary-move-article): Don't scan.

	* gnus-group.el (gnus-group-get-new-news-this-group): Accept an
	optional non-scan parameter.

1997-10-21  Jan Vroonhof  <vroonhof@math.ethz.ch>

	* gnus-cite.el (gnus-cite-attribution-prefix): Typo.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-nocem.el (gnus-nocem-verify-issuer): Ignore errors when
	verifying.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.54 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-set-auto-save-file-name): Don't use "*" in
	autosave name.

	* gnus-art.el (gnus-article-delete-text-of-type): New version.

1997-10-21  Dan Christensen  <jdchrist@math.mit.edu>

	* gnus-art.el (gnus-article-delete-invisible-text): New version.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnmail.el (nnmail-article-group): Remove all 'junk splits.

1997-10-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-cite.el (gnus-cite-attribution-prefix): Recognize
	Microsoft/Agent style attribution lines.
	(gnus-cite-attribution-suffix): Ditto.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cache.el (gnus-cache-read-active): Would generate cache
	active file too often.
	(gnus-cache-possibly-alter-active): Test statement removed.
	(gnus-cache-articles-in-group): Would destroy hashtb.

	* gnus-sum.el (gnus-summary-limit-mark-excluded-as-read): Don't
	mark everything as read.

	* gnus-cite.el (gnus-article-fill-cited-article): Nix out
	gnus-cite-article.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-summary-move-article): Don't suppress moved
	articles.

	* gnus-start.el (gnus-dribble-read-file): Check that the dribble
	file exists.

	* gnus-cache.el (gnus-cache-articles-in-group): Update cache
	active file.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-summary-search-article): Typo.

	* nnml.el (nnml-update-file-alist): Allow forcing.

	* nnheaderxm.el (nnheader-xmas-find-file-noselect): Removed.
	(nnheader-xmas-cancel-timer): Removed.
	(nnheader-xmas-cancel-function-timers): Removed.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.53 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-set-auto-save-file-name): Create unique auto
	save file names.

	* gnus-topic.el (gnus-topic-tallied-groups): Removed.
	(gnus-topic-prepare-topic): Output right number of articles in
	each sub-topic.

	* gnus-sum.el (gnus-summary-next-group): Don't pass on killed
	buffers.

	* nnmail.el (nnmail-article-group): When crossposted to `junk', do
	`junk'.

	* gnus-util.el (gnus-kill-all-overlays): Remove nil overlays from
	list.

	* gnus-art.el (gnus-article-treat-html): Don't kill buf.

	* gnus-group.el (gnus-group-find-new-newsgroups): Newish function.

1997-10-21  Kim-Minh Kaplan  <kimminh.kaplan@utopia.eunet.fr>

	* gnus-picon.el (gnus-picons-has-modeline-p): New user variable.
	(gnus-picons-set-buffer): New function.
	(gnus-picons-prepare-for-annotations): Use it.
	(gnus-picons-network-display-internal): Ditto.
	(gnus-picons-make-annotation): New function.
	(gnus-picons-display-x-face): Use it.
	(gnus-article-display-picons): Ditto.
	(gnus-picons-display-picon-or-name): Ditto.
	(gnus-picons-display-pairs): Ditto.  Remember the correct
	order of insertion of annotations.
	(gnus-picons-display-glyph): Use gnus-picons-make-annotation.
	(gnus-article-display-picons): Move group annotations in article
	buffer to the correct place if displaying in article buffer.
	(gnus-picons-network-search-internal): Don't display "@" if there
	is no domain picon works again.  Check that the picons still
	need be displayed.  Add the bar bar.xpm separator if
	gnus-picons-display-as-address.
	(gnus-picons-network-display-callback): Check that the picon still
	need be displayed.
	(gnus-picons-lock): Function deleted.
	(gnus-picons-remove): Don't use it.  New way of locking.
	(gnus-picons-next-job-internal): New way of locking.  Handle
	new tag 'bar.
	(gnus-picons-next-job): New way of locking.
	(gnus-picons-buffer): Variable deleted.
	(gnus-picons-remove-all): Modified accordingly.
	(gnus-group-annotations-lock): Variable deleted.
	(gnus-article-annotations-lock): Variable deleted.
	(gnus-x-face-annotations-lock): Variable deleted.
	(gnus-picons-news-directories): Renamed, was
	gnus-picons-news-directory.
	(gnus-picons-url-retrieve): Do not change url-show-status.
	(gnus-picons-clear-cache): Also clear gnus-picons-url-alist.

1997-10-21  Michael R. Cook  <mcook@cognex.com>

	* gnus-topic.el (gnus-topic-toggle-display-empty-topics): New
	function.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnfolder.el (nnfolder-request-create-group): Read folder.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-summary-search-article): Require gnus-asynch.

	* nnweb.el (nnweb-dejanews-wash-article): Remove "More Headers".

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (article-hide-pgp): Run hook.
	(gnus-article-hide-pgp-hook): New variable.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.52 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnfolder.el (nnfolder-possibly-change-group): Set wrong
	variable.

	* gnus-art.el (gnus-article-edit-article): Remove invisible text
	under XEmacs.
	(gnus-article-treat-html): Insert string.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* gnus-msg.el (gnus-summary-mail-crosspost-complaint):
	`deactivate-mark' doesn't exist in XEmacs.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-topic.el (gnus-topic-create-topic): Added doc.

	* gnus-sum.el (gnus-summary-refer-article): Insert sparse
	non-displayed articles properly.
	(gnus-cut-thread): Exclude non-displayed sparse articles.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.51 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-execute-command): Place point at start of
	prompt.

	* gnus-int.el (gnus-request-replace-article): Don't bug out on
	unknown groups.

	* gnus-sum.el (gnus-summary-update-info): Force undo boundary here.
	(gnus-update-read-articles): ... and not here.

	* gnus-art.el (article-display-x-face): Would only show one X-Face.

1997-10-21  Kim-Minh Kaplan  <kimminh.kaplan@utopia.eunet.fr>

	* gnus-picon.el (gnus-picons-url-alist): New variable.
	(gnus-picons-jobs-alist): New variable.
	(gnus-picons-remove): Clean this new variable.  FIXME: race condition.
	(gnus-picons-job-already-running): New variable.
	(gnus-article-display-picons): Use the job queue if using the network.
	(gnus-group-display-picons): Ditto.
	(gnus-picons-make-path): Function deleted.
	(gnus-picons-lookup-internal): Modified accordingly.
	(gnus-picons-lookup-user-internal): Take the LETs out of the loops.
	(gnus-picons-lookup-pairs): Take constant calculation outside of loop.
	(gnus-picons-display-picon-or-name): Use COND instead of nested IFs.
	(gnus-picons-display-pairs): Take the LET outside of loop.
	(gnus-picons-try-face): Ditto.
	(gnus-picons-users-image-alist): Variable deleted.
	(gnus-picons-clear-cache): Don't clear it.
	(gnus-picons-retrieve-limit): Variable deleted.
	(gnus-picons-url-retrieve): Clear url-request-method.
	(gnus-picons-retrieve-user-callback): Function deleted.
	(gnus-picons-retrieve-user): Function deleted.
	(gnus-picons-retrieve-domain-callback): Function deleted.
	(gnus-picons-retrieve-domain-internal): Function deleted.
	(gnus-picons-parse-value): New function.
	(gnus-picons-parse-filenames): New function.
	(gnus-picons-network-display-internal): New function.
	(gnus-picons-network-display-callback): New function.
	(gnus-picons-network-display): New function.
	(gnus-picons-network-search-internal): New function.
	(gnus-picons-network-search-callback): New function.
	(gnus-picons-network-search): New function.
	(gnus-picons-next-job-internal): New function.
	(gnus-picons-next-job): New function.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-start.el (gnus-setup-news): Don't fold case.

1997-10-21  Kim-Minh Kaplan  <kimminh.kaplan@utopia.eunet.fr>

	* gnus-picon.el (gnus-picons-clear-cache-on-shutdown): New variable.
	(gnus-picons-piconsearch-cache-user): Variable deleted.
	(gnus-picons-clear-cache): New function.
	(gnus-picons-close): Only clear cache if
	gnus-picons-clear-cache-on-shutdown.
	(gnus-picons-url-retrieve): Set url-package-name and
	url-package-version.
	(gnus-picons-users-image-alist): New variable.
	(gnus-picons-retrieve-user-callback): Use it.
	Added support for network retrieval of picons.
	(gnus-picons-map): Removed.
	(gnus-picons-remove): Removed case to handle processes.
	(gnus-picons-processes-alist): New variable.
	(gnus-picons-x-face-sentinel): Simplified.  Use processes alist.
	(gnus-picons-display-x-face): Explicitly request an xface image.
	Always call gnus-picons-prepare-for-annotations.  Use processes alist.
	(gnus-picons-lookup-internal): New function.
	(gnus-picons-lookup): Use it.
	(gnus-picons-lookup-user-internal): Ditto.
	(gnus-picons-display-picon-or-name): No more xface-p argument.
	(gnus-picons-try-suffixes): Removed.
	(gnus-picons-try-face): New function.  Does the caching in
	gnus-picons-glyph-alist.
	(gnus-picons-try-to-find-face): Take a glyph argument instead of a
	path.  No more xface-p argument.  Only use one annotation even if
	gnus-picons-display-as-address.
	(gnus-picons-toggle-extent): Changed into an annotation action.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.50 is released.

1997-10-21  Kim-Minh Kaplan  <kimminh.kaplan@utopia.eunet.fr>

	* gnus-picon.el (gnus-picons-prepare-for-annotations): New
	function, and many changes.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnfolder.el (nnfolder-possibly-change-group): Wouldn't always
	switch buffers.

	* gnus-sum.el (gnus-update-read-articles): Force boundary.

	* gnus-undo.el (gnus-force-undo-boundary): New function.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-article-treat-html): w3-parse-buffer
	incompatibility.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.49 is released.

1997-10-21  Erik Toubro Nielsen  <erik@ifad.dk>

	* gnus-sum.el (gnus-summary-exit): Returned to the wrong topic in
	certain obscure cases if selected group occurred in multiple
	topics.

	* gnus-topic.el (gnus-topic-update-topic): Did not preserve point
	on the same instance of a group if group occurred in multiple
	topics.  Caused gnus-summary-exit to return to wrong topic if the
	selected group was in more than one topic.

	Above two bugs happened only if the window configuration for
	summary mode caused the group buffer not to be shown in a window.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-send): Would pretend to have sent.

	* nnmh.el (nnmh-request-list-1): Don't use truename.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* gnus-xmas.el: Undo previous change, and restore the version from
	5.4.46 (without the require 'gnus-art).

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-score.el (gnus-summary-increase-score): Better error
	messages.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.48 is released.

1997-10-21  Steven L Baur  <steve@altair.xemacs.org>

	* gnus-xmas.el (gnus-art): (require 'gnus-art) introduces a
	circular dependency on gnus-xmas-define and gnus-xmas-redefine.
	Brute force it away.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.47 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cache.el (gnus-cache-move-cache): Allow entering directory
	name.

	* nntp.el (nntp-telnet-command, nntp-telnet-switches): New
	variables.

	* gnus-score.el (gnus-summary-increase-score): Refuse illegal
	match types.

1997-10-21  Arne Georg Gleditsch  <argggh@ifi.uio.no>

	* gnus-sum.el (gnus-summary-refer-article): Go to article when
	expunged.

1997-10-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-ems.el (gnus-article-x-face-command): Removed bogus
	declaration.

1997-10-21  Paul Franklin  <paul@cs.washington.edu>

	* nnmail.el (nnmail-move-inbox): Fewer (0?) file calls on inbox if
	popmail.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-font-lock-keywords): Be more conservative in
	determining headers.

	* nnmh.el (nnmh-request-list-1): Use truenames.

	* gnus-undo.el (gnus-undo-mode): Don't infest gnus-summary-exit-hook.

	* gnus-sum.el (gnus-update-read-articles): Force an undo boundary.

	* nnweb.el (nnweb-fetch-url): Don't rely on return values from
	url-insert-file-contents.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@menja.ifi.uio.no>

	* gnus.el: Gnus v5.4.46 is released.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (gnus-read-save-file-name): Expand file name i save
	dir.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-art.el (gnus-signature-face): New face; use it.

1997-10-21  Kim-Minh Kaplan  <kimminh.kaplan@utopia.eunet.fr>

	* gnus-picon.el (gnus-picons-insert-face-if-exists): Add picons to
	list.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* message.el (message-font-lock-keywords): Be a little bit more
	case-insensitive.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* message.el (message-insert-to): New argument FORCE.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-setup): Nix out undo list.

1997-10-21  Katsumi Yamaoka  <yamaoka@ga.sony.co.jp>

	* gnus-sum.el: Redefine.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-art.el (article-display-x-face): Display all XFace
	headers.

	* gnus-ems.el: appt, not appt.el.

1997-10-21  Hrvoje Niksic  <hniksic@srce.hr>

	* gnus-xmas.el (gnus-xmas-summary-set-display-table): Don't nix
	out in Latin1.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-cancel-news): Only say we cancel if we
	cancel.

	* gnus-msg.el (gnus-summary-mail-crosspost-complaint): Deactivate
	mark.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-mail-alias-type): New variable.
	(message-mode): Use it.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-demon.el (gnus-demon): Ignore errors.

1997-10-21  Brad Howes  <bhowes@cssun3.corp.mot.com>

	* gnus-demon.el (gnus-demon-time-to-step): New version.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-send-method-alist): New variable.
	(message-send): Use it.
	(message-send-via-news): New function.
	(message-send-via-mail): New function.

1997-10-21  Jens Lautenbacher  <jens@metrix.de>

	* gnus.el (gnus-article-display-hook): Fix.

1997-10-21  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-sum.el (gnus-get-newsgroup-headers): Protect against bogus
	Lines headers.

	* gnus-cache.el (gnus-cache-possibly-enter-article): Check number
	not nil.

1997-10-20  Richard Stallman  <rms@gnu.org>

	* mail/mailabbrev.el: Customize.
	(mail-abbrevs-enable, mail-abbrevs-disable): New functions.
	(mail-abbrevs-mode): New variable enables use of the package.
	Call mail-abbrevs-enable or mail-abbrevs-disable.
	(mail-abbrevs-only): New variable.
	(sendmail-pre-abbrev-expand-hook): Implement mail-abbrevs-only.

1997-10-20  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: Using cl macros push, pop, when, unless throughout
	the file.  This is not further mentioned in this ChangeLog entry.
	Documentation largely updated.  Parser rewritten for better
	Multifile Document processing.  Macros with naked label arguments
	supported.  Some Mule related changes.
	(reftex-default-label-alist-entries): Customization type is now
	computed from reftex-label-alist-builtin.  Enumerate has new
	typekey `i'.  `n' is now reserved for footnotes etc.
	(reftex-label-alist): Introduced default regular expressions.
	Customization type is now computed from
	reftex-label-alist-builtin.
	(reftex-label-menu-flags): New flag for showing file borders.
	(reftex-refontify-context): New option.
	(reftex-bibfile-ignore-list): Now a user option (was: variable).
	(reftex-cite-format): Now a user option (was: variable).
	Customization type is now computed from
	reftex-cite-format-builtin.
	(reftex-comment-citations): Now a user option (was: variable).
	(reftex-toc-follow-mode): Now a user option (was: variable).
	(reftex-optimizations-for-large-documents): New custom group.
	(reftex-keep-temporary-buffers): 1 as additional value.
	(reftex-initialize-temporary-buffers): New option.
	(reftex-enable-partial-scans): New option.
	(reftex-save-parse-info): New option.
	(reftex-plug-into-AUCTeX): Now a user option (was: variable).
	(reftex-auto-show-entry): New value 'copy allowed.
	(reftex-load-hook): Now a declared variable.
	(reftex-mode-hook): Now a declared variable.
	(reftex-label-numbers-symbol): Variable removed.
	(reftex-list-of-labels-symbol): Variable removed.
	(reftex-label-numbers-symbol): Variable removed.
	(reftex-bibfile-list-symbol): Variable removed.
	(reftex-docstruct-symbol): New variable (buffer-local).
	(reftex-master-include-list): Variable removed.
	(reftex-make-master-buffer): Function removed.
	(reftex-make-master-buffer-hook): Hook removed.
	(reftex-insert-buffer-or-file): Function removed.
	(reftex-parse-document): Function adapted to new parser.
	(reftex-access-scan-info): Changed to fit new parser.  Now detects
	changes in label-alist related variables automatically.
	(reftex-parse-one, reftex-parse-all): New functions.
	(reftex-all-document-files): New function.
	(reftex-grep-document, reftex-search-document)
	(reftex-query-replace-document): Now use
	`reftex-all-document-files'.
	(reftex-section-or-include-regexp): New variable.
	(reftex-everything-regexp): New variable.
	(reftex-find-label-regexp-format): New variable.
	(reftex-find-label-regexp-format2): New variable.
	(reftex-do-parse): New function.
	(reftex-is-multi): New function.
	(reftex-parse-from-file): New function.
	(reftex-locate-bibliography-files): New function.
	(reftex-last-assoc-before-elt): New function.
	(reftex-replace-label-list-segment): New function.
	(reftex-silence-toc-markers): New function.
	(reftex-access-parse-file): New function.
	(reftex-label): Now uses `reftex-where-am-I'.
	(reftex-offer-label-menu): New keys `%' and `i' and `r'.
	(reftex-select-item): Recursive edit moved to key `e'.  New key
	`x' for external documents.  Works now also with nin-nil
	pop-frame.
	(reftex-offer-label-menu): Now uses `reftex-where-am-I'.
	(reftex-make-and-insert-label-menu): More efficient, allow
	optional extra fontification.
	(reftex-find-nearby-label): Function removed.
	(reftex-scan-buffer-for-labels): Function removed.
	(reftex-section-info): New function.
	(reftex-nth-parens-substring): Renamed to reftex-nth-arg.  Return
	nil when not enough args are present.
	(reftex-move-over-touching-args): New function.
	(reftex-where-am-I): New function.
	(reftex-nth-arg-wrapper): New function.
	(reftex-select-label-callback): Deal with special macros as well.
	(reftex-find-duplicate-labels): Ignore special entries in
	docstruct.
	(reftex-kill-temporary-buffers): New arg buffer.
	(reftex-show-entry): Copy context when necessary.
	(reftex-toc): New key `R', use reftex-where-am-I.
	(reftex-nearest-section): Use reftex-where-am-I.
	(reftex-toc-visit-line): Completely rewritten.  Uses markers and
	several backup methods.
	(reftex-citation): Recursive edit moved to `e' key.
	(reftex-scan-buffer): Function removed.
	(reftex-get-bibfile-list): Changed to work with chapterbib
	package.
	(reftex-find-tex-file): New function.
	(reftex-find-files-on-path): Now first looks for file with
	additional .tex extension, then for the naked file name.
	(reftex-citation): Split into reftex-citation and
	reftex-do-citation.
	(reftex-do-citation): Recursive edit now on `e' key.
	(reftex-what-macro): Allow white space between macro arguments.
	(reftex-allow-for-ctrl-m): Renamed to
	`reftex-make-regexp-allow-for-ctrl-m'.
	(reftex-nearest-match): New function.
	(reftex-auto-mode-alist): New function.
	(reftex-make-desparate-section-regexp): New function.
	(reftex-get-file-buffer-force): Rewritten to use new variable
	`reftex-initialize-temporary-buffers'.
	(reftex-label-alist-builtin): Use abbreviated regexps.
	(reftex-label-mac-list): New variable.
	(reftex-parse-args): New function.
	(easy-menu-define): Menu extended.  Some parts are now computed.
	from the user options.
	(reftex-move-to-next-arg, reftex-move-to-previous-arg): New
	functions.  Now we can parse macros with distributed arguments.
	(reftex-goto-label): Function removed.
	(reftex-position-cursor): Function removed.
	(reftex-item): Function removed.
	(reftex-add-to-label-alist): No longer autoloaded.
	(reftex-toc-indent): Constant removed.
	(reftex-label-indent): Constant removed.
	(reftex-context-indent): Constant removed.
	(reftex-match-string): New function.
	(reftex-memory): New variable.
	(reftex-reset-mode): No longer hacks local variables.  Now resets
	path variables as well.
	(reftex-truncate): New functions, to make RefTeX work with Mule.
	(reftex-fp): New macro, to make RefTeX work with Mule.
	(reftex-format-bib-entry): Now uses `reftex-truncate' to truncate
	author names.  `extra' and `title' are no longer truncated at all.
	(reftex-all-assq): New function.
	(reftex-view-crossref): Works now also if mouse click is on macro.
	(reftex-context-substring): Now returns substring without text
	properties.
	(reftex-tex-path, reftex-bib-path): New variables.
	(reftex-split): Function replaced with builtin `split-string'.
	(reftex-find-bib-file): New function.
	(reftex-find-files-on-path): Function removed.
	(reftex-find-file-on-path): New function.
	(reftex-access-search-path, reftex-parse-colon-path)
	(reftex-recursive-directory-list, reftex-expand-path):
	New functions, dealing with recursive TEXINPUTS and BIBINPUTS
	definitions.

1997-10-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* iso-insert.el: Add autoloads for `8859-1-map'.

	* cus-edit.el (custom-group-value-create): Use
	`custom-group-visibility' instead of `group-visibility'.

1997-10-19  Richard Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-do-fcc): Handle dont-write-the-file
	correctly--don't write msg to the file after saving it from a buffer.

	* files.el (file-name-non-special): For insert-directory operation,
	ensure that default-directory is an ordinary file name
	before turning off file-name-handler-alist.

	* ispell.el (ispell-change-dictionary): Fix error message.
	(ispell-buffer-local-parsing): Fix message.
	(ispell-get-word): Use buffer-substring-no-properties.
	(ispell-buffer-local-dict): Likewise.

1997-10-19  Karl Heuer  <kwzh@gnu.org>

	* files.el (file-name-non-special): If "/:" is the entire file
	name, make it "/" after stripping.

1997-10-19  Kenichi Handa  <handa@etl.go.jp>

	* files.el (basic-save-buffer): Set buffer-file-coding-system to
	the coding system actually used for saving.

1997-10-19  John F. Whitehead  <jfw@cisco.com>

	* international/mule-diag.el (describe-font): Fix prompt.
	* international/mule-cmds.el (describe-language-environment): Ditto.

1997-10-16  Richard Stallman  <rms@gnu.org>

	* dired.el (dired-move-to-filename-regexp):
	Accept month name and day-of-month in either order.

	* emacs-lisp/edebug.el (edebug-eval-mode): Nicer mode-name value.

	* help.el (function-called-at-point): Always use Emacs Lisp syntax tab.
	Reject any "function call" with whitespace after the open-paren.

	* help.el (describe-variable): Pass default value to completing-read.
	(describe-function): Likewise.

	* textmodes/page.el (narrow-to-page): Check whether forward-page
	actually set the match data.

	* progmodes/scheme.el (scheme-let-indent): New arg NORMAL-INDENT.
	(scheme-indent-function): Pass normal-indent as 3rd arg
	when calling an indentation function.

1997-10-16  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* format.el (format-deannotate-region): In case of unmatched tags,
	avoid using nil where end position is expected.

1997-10-16  Karl Heuer  <kwzh@gnu.org>

	* winner.el (winner-pending-undo-ring): Defvar before first use.
	(winner-undo-counter): Likewise.

1997-10-16  Marc Girod  <girod@trshp.trs.ntc.nokia.com>

	* mail/rmailsum.el (rmail-summary-rmail-update): When looking for
	rmail-view-buffer, check other frames as well.

1997-10-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* double.el: Removed changelog comment section.
	(double): New group.
	(double-map): Add customize support.
	(double-prefix-only): Ditto.

	* textmodes/nroff-mode.el (nroff): Moved from `editing' to `wp'.

	* wid-edit.el (variable-link): New widget.
	(widget-variable-link-action): New function.
	(function-link): New widget.
	(widget-function-link-action): New function.

1997-10-16  Inge Frick  <inge@nada.kth.se>

	* view.el: Some changes in comments and documentation.
	View mode hooked into the customize tree.
	(view): New custom group.
	(view-highlight-face, view-scroll-auto-exit)
	(view-try-extend-at-buffer-end)
	(view-remove-frame-by-deleting, view-mode-hook):
	Defined by defcustom instead of by defvar.
	(view-mode-enter): Install exit-action also when view-mode is
	already on.  Small rewrite using unless.
	(view-mode, view-mode-exit, view-scroll-lines, view-really-at-end)
	(view-search): Small rewrite using when or unless.

1997-10-15  Richard Stallman  <rms@gnu.org>

	* uniquify.el (uniquify-buffer-name-style): Add :require.

	* wid-edit.el (widget-button-click): Move point to where clicked.

	* startup.el (auto-save-list-file-prefix): Fix custom type.

	* textmodes/outline.el (outline-back-to-heading): New arg INVISIBLE-OK.
	(outline-on-heading-p)
	(show-entry): If the heading is invisible, show it too.
	(hide-other):

	* scroll-bar.el (toggle-scroll-bar): Call prefix-numeric-value.

	* help.el (help-mode-maybe): New function, on temp-buffer-show-hook.
	(describe-key, describe-mode): Don't call help-mode here.
	(view-lossage, describe-function, describe-variable): Likewise.

	* compile.el (compilation-forget-errors):
	Reinit compilation-directory-stack the way compile-internal does.
	(compilation-parse-errors): Don't let default-directory change.

	* mail/smtpmail.el (smtpmail-send-it): Don't use time-stamp-strftime.

	* isearch.el (isearch-printing-char): Change S-SPC to SPC.
	(isearch-mode-map): Bind S-SPC like SPC.

	* simple.el (end-of-visible-line): After skipping some invisible chars.
	don't go forward a character, just to end of line.

	* mail/emacsbug.el (report-emacs-bug): Delete the condition-case.

	* winner.el (winner-change-fun): Don't use pushnew.

1997-10-15  Paul D. Smith  <psmith@BayNetworks.COM>

	* imenu.el (imenu-add-to-menubar): If not using
	imenu-default-create-index-function, don't require its variables.

1997-10-15  Dan Nicolaescu  <done@sydney.ece.arizona.edu>

	* progmodes/hideshow.el (hs-special-modes-alist): Correct alist
	for java-mode.

1997-10-15  Marc Girod  <girod@trshp.trs.ntc.nokia.com>

	* mail/rmail.el (rmail): Avoid showing message twice.

	* mail/sendmail.el (mail-bury): Check for value, not just
	existence, of alist element.

1997-10-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (x-long-option-alist): New variable.
	(msdos-handle-args): Handle and complete long options with
	attached arguments.  Support "-name", "-T" and "-rv" options.

1997-10-10  Richard Stallman  <rms@gnu.org>

	* startup.el (command-line): Don't suppress suffix search.

1997-10-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* simple.el (previous-matching-history-element): No need to bind
	minibuffer-history-sexp-flag any more.
	(next-matching-history-element): Likewise.
	* comint.el (comint-regexp-arg): Likewise.
	* term.el (term-regexp-arg): Likewise.

	* simple.el (repeat-complex-command): Bind
	minibuffer-history-sexp-flag to the minibuffer depth.
	(next-history-element): Compare minibuffer-history-sexp-flag
	against the current minibuffer depth to verify its validity.
	(previous-matching-history-element): Likewise.
	(minibuffer-history-sexp-flag): Update doc string.

	* ange-ftp.el (ange-ftp-name-format): Fix customize type.
	(ange-ftp-smart-gateway-port): Likewise.
	* browse-url.el (browse-url-netscape-display): Likewise.
	(browse-url-generic-program): Likewise.
	* cus-start.el (echo-keystrokes): Likewise.
	* files.el (revert-without-query): Likewise.
	* ps-print.el (ps-print-background-image): Likewise.
	(ps-print-background-text): Likewise.
	(ps-show-n-of-n): Doc fix.

1997-10-01  Dave Love  <d.love@dl.ac.uk>

	* emacs-lisp/elint.el (elint-check-defcustom-form): New function.
	(elint-special-forms): Use it.

1997-09-30  Dave Love  <d.love@dl.ac.uk>

	* lisp-mode.el (lisp-imenu-generic-expression): Allow `/' in names.

	* finder.el (finder-mode-map): Bind [mouse-2].
	(finder-compile-keywords): Match compressed file names, but don't
	put compression extension in the output.
	(finder-find-library): Deleted.
	(finder-commentary): Use locate-library, not finder-find-library.
	(finder-mouse-select): New function.
	(finder-summary): Mention mouse binding.
	(finder-exit): Kill "*Finder Category*" buffer too.  Avoid error
	from deleting sole window.

1997-09-30  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-find-cvs-master): Added missing `throw' for
	the case when TIMESTAMP is arbitrary text.

1997-09-30  Hrvoje Niksic  <hniksic@srce.hr>

	* wid-edit.el (widget-plist-member): Move from here to src/fns.c;
	translated into C for efficiency.
	(widget-put, widget-get, widget-apply): Likewise.

1997-09-30  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* widget.el: Delete vestigial autoloads.

1997-09-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el, viper-init.el, viper.el:
	Moved some defcustom's from viper group to viper-hooks and viper-misc
	defgroups.

	* viper-cmd.el (viper-ket-function, viper-brac-function):
	Use with-output-to-temp-buffer.
	(viper-forward/backward-sentence, viper-forward/backward-paragraph):
	Don't push mark if command is repeated.

	* viper-mous.el, viper-macs.el, viper-ex.el, viper-cmd.el:
	Improved customization init vals.

	* viper-init.el: Added documentation to face variables.

1997-09-29  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-init.el: Added documentation to face-variables.

	* ediff-util.el (ediff-next-difference, ediff-previous-difference): Use
	ediff-merge-region-is-non-clash and don't compute fine diffs when
	skipping non-clash regions.

	* ediff-merg.el (ediff-merge-region-is-non-clash): New function.

1997-09-27  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compile.el (compilation-mode-map): Use more meaningful menu name.
	(compilation-mode-font-lock-keywords): Font-lock column numbers.

1997-09-26  Vladimir Alexiev  <vladimir@cs.ualberta.ca>

	* arc-mode.el (archive-mode): Use write-contents-hooks.

1997-09-26  Dave Love  <d.love@dl.ac.uk>

	* cmuscheme.el (scheme-mode-map): Remove duplicate menu item.

1997-09-25  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule.el (make-coding-system): Cancel the previous change.

	* international/quail.el (quail-translation-keymap): Bind right,
	left, down, and up keys.

1997-09-24  Kenichi HANDA  <handa@nora.etl.go.jp>

	* international/mule.el (charset-list): Change it to function.
	Make it obsolete.
	(make-coding-system): Put `coding-system-parent' property to a
	coding system just made.
	(coding-spec-plist-idx): New variable.

1997-09-24  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* term.el (term-if-emacs19): Recognize version 20.

1997-09-24  Michael Ernst  <mernst@cs.washington.edu>

	* shadow.el (shadows-compare-text-p): Add.
	(shadow-same-file-or-nonexistent): Add.
	(find-emacs-lisp-shadows): Use directory-file-name.

	* emacs-lisp/bytecomp.el (displaying-byte-compile-warnings):
	Show entire "Compiling ..." line when recentering.

1997-09-24  Francis Litterio  <franl@world.std.com>

	* saveplace.el (save-place-to-alist): Optimize out the degenerate
	case when point is 1.

1997-09-24  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* cal-tex.el (cal-tex-cursor-filofax-daily): New function.
	Delete from "to do" list.
	* calendar.el (calendar-mode-map): Bind it to key.
	(cal-tex-cursor-filofax-daily): Autoload it.
	* cal-menu.el (cal-tex-mouse-filofax-daily): New function.
	(cal-tex-mouse-filofax): Add menu item for it.

	* cal-mayan.el (calendar-mayan-days-before-absolute-zero):
	Change to more widely acknowledged value.

1997-09-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-w32.el (file-name-buffer-file-type-alist): Remove the files
	with ".dos" extension from the list of binary files.

1997-09-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help-macro.el (make-help-screen): Make scroll bar work normally.

1997-09-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/rmailout.el (rmail-output-to-rmail-file): Doc fix.

1997-09-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 20.2 released.

	* textmodes/outline.el (outline-up-heading):
	Avoid infinite loop at beginning of buffer.

	* progmodes/cc-styles.el (c-initialize-builtin-style):
	Don't ever try to use copy-tree.

1997-09-19  Kenichi Handa  <handa@etl.go.jp>

	* loadup.el: Load case-table before loading
	international/characters.el.

	* international/characters.el: Set case-table for Cyrillic characters.

1997-09-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-topic.el (gnus-topic-check-topology):
	Don't crash if (cadr topic) is nil.

	* language/english.el (ASCII): Define as alias for English.

	* saveplace.el (save-place-version-control): Make nil the default.

	* international/quail.el (quail-simple-translation-keymap):
	Bind delete and backspace explicitly, like DEL.

1997-09-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-menu.el: Require calendar only when compiling.

	* international/quail.el (quail-set-keyboard-layout):
	Add autoload cookie.

1997-09-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 20.1 released.

	* startup.el (normal-top-level-add-to-load-path):
	Ignore case when comparing, if ms-dos or windows-nt.

	* mail/mh-comp.el: Many doc fixes.
	(mh-send-letter): Choose a coding system
	the same way sendmail-send-it (sendmail.el) does.

	* international/quail.el (quail-simple-translation-keymap):
	Set the default (t) binding properly.

	* international/quail.el (quail-terminate-translation):
	If quail-overlay is not an overlay, don't mess with it.

	* international/mule-util.el
	(coding-system-unification-table-for-encode): Recurse properly.
	(coding-system-unification-table-for-decode): Recurse properly.

1997-09-15  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule.el (find-new-buffer-file-coding-system): Reflect
	text coding part of default-buffer-file-coding-system to
	buffer-file-coding-system when buffer-file-coding-system is
	not locally set and ASCII only text is read.

1997-09-15  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-styles.el (c-initialize-builtin-style):
	Copy the whole tree instead of just copy-sequence.

1997-09-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-suffix-list): Add suffixes for MS-DOS version
	running on Windows 95 with long file name support.
	(info-insert-file-contents): When the Info file is to be
	uncompressed, insert it literally.

1997-09-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* international/quail.el (quail-completion-list-translations): Fix
	and simplify generation of translation list.

	* international/titdic-cnv.el (tit-process-header): Convert
	argument of KEYPROMPT if it contains an escape.
	(tit-process-body): Handle trailing whitespace and multiple spaces
	between phrases.

	* startup.el (initial-major-mode): Fix customize type.

	* gnus/gnus-sum.el (gnus-summary-respool-default-method):
	Likewise.

	* gnus/gnus-score.el (gnus-orphan-score): Likewise.
	(gnus-score-default-header): Likewise.
	(gnus-score-default-type): Likewise.

	* emulation/viper-mous.el (viper-mouse-search-key): Likewise.
	(viper-mouse-insert-key): Likewise.

	* gnus/gnus.el (gnus-valid-select-methods): Likewise.

	* gnus/gnus-art.el (gnus-article-x-face-too-ugly): Likewise.
	(gnus-saved-headers): Likewise.
	(gnus-article-time-format): Doc fix.

1997-09-15  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (tex-font-lock-keywords-2): Don't treat \item like \it.

1997-09-15  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/kkc.el (kkc-mode-map): Bind all control keys to
	kkc-non-kkc-command.

1997-09-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/edebug.el (edebug-enter): Save, and bind to nil,
	overriding-local-map and overriding-terminal-local-map.

	* textmodes/fill.el (canonically-space-region): Doc fix.
	(fill-context-prefix): If the second line has the first line prefix,
	plus whitespace, use the part that the first line shares.
	(fill-individual-paragraphs): When prefix changes,
	usually get the new prefix from just one line,
	with an exception for indented first lines of paragraphs.
	Start a new paragraph when a line has extra indentation
	after the fill prefix.

	* international/mule-util.el (truncate-string-to-width): Doc typo fix.

1997-09-14  Hrvoje Niksic  <hniksic@srce.hr>

	* arc-mode.el: Customized.

1997-09-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european):
	Do something useful where AUTO is t or a symbol.

1997-09-13  Erik Naggum  <erik@naggum.no>

	* ph.el: Require cl at compile-time.

	* cl-macs.el (cl-loop-let): Use `last', not `last*'.

1997-09-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/english.el (setup-english-environment): Don't set
	the terminal and keyboard coding systems.

	* international/mule-util.el (truncate-string-to-width):
	Rename arg WIDTH to END-COLUMN.  Fix the case when START-COLUMN
	is after END-COLUMN.  Doc fixes.

	* mail/sendmail.el (mail-do-fcc): When writing to an Rmail file,
	use rmail-file-coding-system or else emacs-mule.

	* gnus/gnus-start.el (gnus-default-subscribed-newsgroups):
	Fix custom type.  Doc fix.
	(gnus-init-file): Doc fix.

1997-09-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (normal-top-level-add-to-load-path):
	Try looking for the unmodified default-directory in load-path.

	* gud.el (perldb): Fix paren error in call to read-from-minibuffer.

	* emacs-lisp/debug.el (debug): Allow recursive minibuffers
	if we're in a minibuffer already.

	* simple.el (next-history-element):
	Cope if minibuffer-text-before-history is nil.

	* cus-edit.el (customize-group): Handle groups not yet loaded.

1997-09-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* ph.el (ph-server): Fix customize type.

	* emulation/viper-cmd.el (viper-smart-suffix-list): Likewise.

	* emulation/viper.el (viper-non-vi-major-modes): Likewise.

	* emulation/viper-macs.el (viper-repeat-from-history-key):
	Likewise.

	* emulation/viper-mous.el (viper-mouse-search-key): Likewise.
	(viper-mouse-insert-key): Likewise.

	* emulation/viper-ex.el (ex-unix-type-shell): Likewise.

	* add-log.el (add-log-current-defun-function): Likewise.

	* cal-china.el (chinese-calendar-time-zone): Likewise.
	(chinese-calendar-standard-time-zone-name): Likewise.

	* gnus/gnus-start.el (gnus-site-init-file): Likewise.

	* gnus/gnus-group.el (gnus-permanently-visible-groups): Likewise.

	* gnus/gnus-sum.el (gnus-summary-thread-gathering-function):
	Likewise.

1997-09-12  Erik Naggum  <erik@naggum.no>

	* cal-menu.el, cal-move.el: Require calendar.el.

1997-09-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* cus-edit.el (hook) [:value-to-internal]: Use a nil value
	unchanged.

	* completion.el (save-completions-flag): Doc fix.

	* indent.el (tab-stop-list): Doc fix.

	* strokes.el (strokes-click-command): Doc fix.

	* progmodes/make-mode.el
	(makefile-pickup-everything-picks-up-filenames-p): Doc fix.
	(makefile-mode): Doc fix.

	* solar.el (calendar-location-name): Doc fix.

1997-09-12  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el (viper-want-ctl-h-help): Updated doc string.
	(viper-vi-basic-map, viper-insert-basic-map, viper-replace-map):
	Added binding for backspace.
	* viper-cmd.el (viper-adjust-keys-for): Separated backspace and C-h.

1997-09-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-french.el (french-calendar-accents): Change variable to function.
	Uses changed.  Test that we can display multibyte chars.
	(french-calendar-day-name-array, french-calendar-month-name-array):
	New functions.  Use them instead of directly using these variables.
	(french-calendar-multibyte-month-name-array): New variable.
	(french-calendar-multibyte-special-days-array): New variable.
	(calendar-print-french-date): Bind enable-multibyte-characters to t.

	* cus-edit.el (custom-face-menu): Use custom-face-save-command.
	not custom-face-save.
	(custom-face-save-command): New function.
	(custom-variable-save): Fix error message.

1997-09-12  Inge Frick  <inge@nada.kth.se>

	* compile.el (compilation-parse-errors): Fixed two bugs that
	could make compilation-parse-errors loop infinitely.  Each round
	of the parsing loop now either moves point ahead at least a line
	or sets `found-desired' to true to stop the loop.

1997-09-11  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Fix previous
	change.

	* mail/sendmail.el (sendmail-send-it): If both
	buffer-file-coding-system and sendmail-coding-system are nil, use
	iso-latin-1 for encoding.

1997-09-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-emacs-face-kind-p): Function deleted.
	(ps-face-bold-p, ps-face-italic-p):
	Check ps-bold-faces or ps-italic-faces.
	(ps-zebra-stripes, ps-zebra-stripe-height): Doc fixes.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region, ps-setup):
	Doc fixes.

	* international/quail.el (quail-update-translation):
	Fix previous change.

	* term/internal.el: Use raw-text as coding system.

1997-09-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el (describe-coding-system): Describe
	coding systems of type 5, raw-text.

	* hexl.el (hexlify-buffer): Bind coding-system-for-write to
	raw-text with eol-type derived from the buffer-file-coding-system.

1997-09-11  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el (ediff-good-frame-under-mouse): New function.
	(ediff-really-quit): Now uses ediff-good-frame-under-mouse instead
	of testing a whole bunch of conds in-line.

1997-09-11  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-mode-map): Bind meta-prefix-char to a
	map which only has default key binding to
	quail-execute-non-quail-command.
	(kkc-non-kkc-command): Handle the key sequence as the same way as
	universal-argument-other-key.

	* international/quail.el (quail-translation-keymap):
	Make the default binding with define-key.
	(quail-simple-translation-keymap):
	Handle meta-prefix-char the way isearch does.
	Make the default binding with define-key.
	(quail-conversion-keymap): Likewise.
	(quail-execute-non-quail-command): Handle the key sequence as the
	same way as universal-argument-other-key.
	(quail-make-guidance-frame): Don't dedicate the guidance buffer window.
	(quail-show-guidance-buf): Likewise.
	(quail-hide-guidance-buf): Delete code to turn off window dedication.

1997-09-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (initial-scratch-message): New variable.
	(command-line-1): Use initial-scratch-message.

	* international/quail.el (quail-translation-keymap):
	Handle meta-prefix-char the way isearch does.

	* international/mule-cmds.el (select-input-method):
	No error if enable-multibyte-characters is nil.

1997-09-11  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-mule.el: Set no-conversion for network communication
	with nntpd.
	(gnus-mule-initialize): For safety, set no-conversion for network
	communication with nntpd.

1997-09-10  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el (uniquify-ignore-buffers-re): Added.

1997-09-10  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el (viper-help-modifier-map): Deleted; help mode map is
	no longer modified.
	* viper.el (viper-set-hooks): Make help buffers come up in emacs state.

1997-09-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/eval-reg.el (elisp-eval-buffer):
	New arg FILENAME is ignored.

1997-09-10  Kenichi Handa  <handa@etl.go.jp>

	* language/ethio-util.el (setup-ethiopic-environment): Don't bind
	keys in global-map, don't add a hook to rmail-mode-hook and
	mail-mode-hook.
	(ethio-mode): New buffer local variable.
	(ethio-mode-map): New variable.
	(ethio-mode): New function.
	(ethio-sera-to-fidel-mail-or-marker): New function.
	(ethio-fidel-to-sera-mail-or-marker): New function.
	(ethio-find-file): Do nothing if not in ethio-mode.
	(ethio-write-file): Likewise.
	(ethio-prefer-ascii-space): Moved from leim/quail/ethiopic.el.
	(ethio-toggle-space): Likewise.
	(ethio-insert-space): Likewise.
	(ethio-insert-ethio-space): Likewise.
	(ethio-prefer-ascii-punctuation): Likewise.
	(ethio-toggle-punctuation): Likewise.
	(ethio-gemination): Likewise.

	* mail/sendmail.el (sendmail-send-it): The priority of coding
	system for encoding outgoing mails is (1) local value of
	buffer-file-coding-system, (2) sendmail-coding-system,
	(3) default-buffer-file-coding-system.

1997-09-10  Kenichi Handa  <handa@etl.go.jp>

	* language/japan-util.el (setup-japanese-environment): Give
	iso-2022-jp to set-default-coding-system if not running on DOS.
	(read-hiragana-string): Use input method "japanese-hiragana".

	* gnus/gnus-mule.el: Add coding system specification for several
	news groups.

1997-09-09  Dave Love  <d.love@dl.ac.uk>

	* lisp-mode.el (lisp-imenu-generic-expression):
	Recognize `defcustom' and `defgroup".

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european): Doc fix.

1997-09-09  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (input-method-verbose-flag):
	Doc-string fixed.

	* international/quail.el (quail-simple): New function.
	(quail-require-guidance-buf): New function.
	(quail-show-guidance-buf): Do not show guidance buffer if simple
	input method is used in the minibuffer.
	(quail-update-guidance): Likewise.

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european):
	If AUTO is non-nil, intern it.
	Don't call set-terminal-coding-system if noninteractive.

	* international/quail.el (quail-translation-keymap)
	(quail-simple-translation-keymap, quail-conversion-keymap):
	Don't define escape.

	* ps-print.el (ps-face-bold-p): Use face-bold-p.
	(ps-face-italic-p): Use face-italic-p.

	* comint.el (comint-file-name-chars): Doc fix.
	(comint-word): Treat all non-ASCII chars as "part of word".

1997-09-09  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el: Use uniquify-file-name-nondirectory throughout;
	documentation tweaks.

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* view.el (view-end-message): Don't mention q if it really do anything.

	* dired.el (dired-get-filename): Don't call encode-coding-string
	if file-name-coding-system is non-nil.

	* emacs-lisp/find-func.el: New file.

1997-09-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-variable-save): Fixed doc string.

	* cus-edit.el (custom-variable-menu): Make it clear that `Lisp
	mode' edit the initial lisp expression.

1997-09-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-insert-file-contents): Bind
	coding-system-for-write to no-conversion.

1997-09-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* dabbrev.el (dabbrev-case-fold-search): Remove extra quote in
	customize constant.
	(dabbrev-case-replace): Likewise.

	* ispell.el (ispell-personal-dictionary): Fix customize type.

	* shell.el (shell-chdrive-regexp): Likewise.

	* progmodes/executable.el (executable-chmod): Likewise.

	* emacs-lisp/lisp.el (defun-prompt-regexp): Likewise.

	* progmodes/f90.el (f90-break-before-delimiters): Likewise.

	* progmodes/hideshow.el (hs-minor-mode-hook): Likewise.

	* progmodes/icon.el (icon-tab-always-indent): Likewise.

	* browse-url.el (browse-url group): Remove autoload cookie.

	* diff.el (diff group): Remove autoload cookie.

1997-09-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (insert-directory): Encode the file name.

	* startup.el (command-line): Pass charset to
	standard-display-european.

	* disp-table.el (standard-display-european): Arg AUTO
	specifies coding system for terminal output (if needed).

1997-09-08  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Bind C-space
	to quail-select-current.

1997-09-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-individual-paragraphs): Don't include
	paragraph-separate lines in any paragraph; just skip them.

	* telnet.el (telnet-initial-filter): Temporarily go to proper buffer.

1997-09-07  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-version): Updated.

	* progmodes/cc-cmds.el (c-beginning-of-statement):
	Fixes in sentence movement to properly
	handle M-e moving forward into a comment when looking at preceding
	whitespace, and M-a moving backward into comment when looking at
	following whitespace.

	* progmodes/cc-cmds.el (c-comment-line-break-function):
	Don't break line in the middle of a string.

	* progmodes/cc-langs.el (c-mode-base-map): Don't define C-c C-e here.
	(c-mode-map, c++-mode-map): Define C-c C-e here.
	(objc-mode-map): Define C-c C-e, not /.
	(java-mode-map, idl-mode-map): Don't define /.

	* progmodes/cc-engine.el (c-end-of-statement-1):
	Wrap backward-up-list in a c-safe call so no error results when
	buffer contains only a comment and point is at eob.

	* progmodes/cc-engine.el (c-inside-bracelist-p):
	Add a test to the enum list test so that enum in a k&r
	arg decl doesn't confuse handling of the function body.

	* progmodes/cc-styles.el (c-style-alist) <python>:
	knr-argdecl-intro == +, fill-column = 78,
	arglist-intro <= +, inextern-lang <= 0.
	Set c-comment-continuation-stars to "".

1997-09-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Allow dash in citation prefixes
	in adaptive-fill-regexp and adaptive-fill-first-line-regexp.

	* cus-edit.el (custom-file): Now nil stands for "use the init file".
	(custom-save-delete): If custom-file is nil, use user-init-file.
	(custom-save-all): Likewise.

	* international/mule.el (load-with-code-conversion):
	Use third arg to eval-buffer and don't set buffer-file-name.

	* disp-table.el (standard-display-european): Set or clear
	the terminal coding system.

	* version.el (emacs-version): If HERE, add a newline.

	* startup.el (command-line-1): Update copyright year in string.

	* international/mule-cmds.el (universal-coding-system-argument):
	Improve prompt strings.

	* time-stamp.el (time-stamp-time-zone): Allow nil as alternative.

1997-09-06  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el: Rename uniquify-fix-list-* to uniquify-fix-item-*.
	All callers changed.
	(uniquify-rationalize-file-buffer-names):
	Use directory-file-name for directories (eliminate trailing slash).
	Call uniquify-fix-item-unrationalized-buffer.
	(uniquify-buffer-file-name): Use directory-file-name.
	(uniquify-fix-item-unrationalized-buffer): New function.
	(uniquify-unrationalized-buffer): Function deleted.

1997-09-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* font-lock.el (font-lock-comment-face, etc.):
	defvars moved up to avoid warnings.
	(font-lock-face-attributes, global-font-lock-mode): Add defvars.

	* ps-print.el (ps-setup): ps-zebra-stripe => ps-zebra-stripes.
	ps-number-of-zebra =>  ps-zebra-stripe-height.

	* international/quail.el (quail-execute-non-quail-command):
	Call quail-terminate-translation.

	* emacs-lisp/lisp.el (move-past-close-and-reindent):
	Don't move closeparen back onto the end of a comment.

	* dired.el (dired-flag-garbage-files): Move interactive flag
	across doc string.

	* progmodes/m4-mode.el (m4-mode): Add autoload cookie.

	* files.el (auto-mode-alist): Handle .m4 and .mc files.

1997-09-06  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (global-font-lock-mode): When turning off
	Global Font Lock mode, turn off Font Lock mode everywhere.

	* menu-bar.el (menu-bar-options-menu): Simplify global-font-lock-mode
	entry using enhanced global-font-lock-mode function.

	* emacs-lisp/regexp-opt.el (regexp-opt): Doc fix.

1997-09-06  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-ptch.el (ediff-patch-buffer-internal):
	now behaves uniformely, whether the buffer
	visits a file or not.
	* ediff-util.el (ediff-other-buffer): Smarter selection of
	suitable other buffer.
	Moved binding of backspace after the binding for C-h.
	Makes a difference in XEmacs.
	* ediff.el (ediff-patch-buffer): Smarter selection of the defaults.
	* ediff-mult.el (ediff-meta-session-p): New function.
	(ediff-operate-on-marked-sessions): Now recursively descends into
	subdirectories.

1997-09-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (set-face-font-auto):
	instanciate-fontset renamed to instantiate-fontset.

	* international/fontset.el (uninstantiated-fontset-alist):
	Variable name spelling fixed, and doc fix.  All uses fixed.
	(instantiate-fontset): Function name spelling fixed.

	* isearch.el (search-whitespace-regexp): Doc fix.

	* international/mule.el (load-with-code-conversion):
	Don't bind enable-multibyte-characters; set it in the temp buffer.

	* compile.el (compilation-ask-about-save): Add autoload cookie.

	* progmodes/simula.el (simula-emacs-features):
	Treat Emacs 20 like Emacs 19.

1997-09-05  Vinicius Jose Latorre  <vinicius@cpqd.br>

	* ps-print.el: Some comment and doc fixes.
	(ps-print-version): New version number (3.05.1).
	(ps-adobe-tag): Replace defvar by defcustom, and doc fix.
	(ps-print-with-faces, ps-print-without-faces)
	(ps-spool-with-faces, ps-spool-without-faces): Add arg REGION-P.
	(ps-print-region-with-faces, ps-print-region)
	(ps-spool-region, ps-spool-region-with-faces): Fix calls to
	the functions above.
	(ps-setup): Print value of ps-zebra-stripe, ps-number-of-zebra,
	ps-line-number, ps-print-background-image,
	and ps-print-background-text.
	(ps-print-prologue-1): Bug fix in PostScript programming:
	/BeginDSCPage, /BeginPage.
	(ps-showpage-count, ps-ref-bold-faces, ps-ref-italic-faces)
	(ps-ref-underlined-faces, font-lock-face-attributes)
	(ps-initialize-faces): Vars deleted.
	(ps-override-list, ps-extension-to-bit-face)
	(ps-extension-to-screen-face, ps-initialize-faces, ps-header-height)
	(ps-hard-lf, ps-soft-lf, ps-get-face, ps-map-font-lock): Fn deleted.
	(ps-extend-face-list, ps-extend-face): Doc fix.
	(ps-print-face-alist): New var to handle face alist.
	(ps-printing-region): New var and fn.
	(ps-header-page, ps-set-face-bold, ps-set-face-italic)
	(ps-set-face-underline, ps-set-face-attribute, ps-map-face): New fn.
	(ps-rmail-mode-hook, ps-rmail-print-message-from-summary)
	(ps-print-message-from-summary, ps-vm-print-message-from-summary):
	Fns moved.
	(ps-background): New argument PAGE-NUMBER.
	(ps-begin-file): Bug fix and print proper line number in a region.
	(ps-begin-page): Call ps-header-page.
	(ps-get-buffer-name): Indicates in the header when printing a region.
	(ps-end-page): Delete ps-showpage-count.
	(ps-dummy-page): Calls ps-header-page.
	(ps-set-color): Programming improvement.
	(ps-plot-region): Doc fix.
	(ps-face-attributes): Same functionality as deleted ps-get-face.
	(ps-build-reference-face-lists): Do the job by calling
	ps-set-face-bold and ps-bold-faces, and friends.

1997-09-05  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* language/japan-util.el (setup-japanese-environment): Set
	coding-category-iso-8-else to japanese-iso-8bit.

1997-09-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/easymenu.el (easy-menu-create-keymaps):
	If two distinct items have the same string, make different
	key events for them.

	* international/mule.el (charset-quoted-standard-p): New function.
	Use it instead of quoted-symbol-p.
	(charset-id): Use charset-quoted-standard-p.
	(quoted-symbol-p): Function deleted.

	* ispell.el (ispell-command-loop):
	Restore dedicated flg of selected window.
	(ispell-overlay-window): Move dedicated flag of old window
	into the bottom of the two windows made from it.

	* international/mule-cmds.el (read-language-name): Doc fix.
	(set-language-environment): Improve prompt.

	* international/mule.el (set-terminal-coding-system):
	Specify default to read-coding-system.
	(set-keyboard-coding-system): Likewise.

1997-09-05  Paul Eggert  <eggert@twinsun.com>

	* gnus/message.el (message-unix-mail-delimiter): Initialize
	to the same value that rmail-unix-mail-delimiter is initialized to.

1997-09-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el (viper-replace-region-start-delimiter):
	Improved the default.
	* viper-mous.el (viper-mouse-click-search-word)
	(viper-mouse-click-insert-word):
	Fixed to not react when click is not over a text area.
	* viper.el (read-file-name): Unadvised.
	* viper-cmd.el (viper-insert-state-post-command-sentinel)
	(viper-save-last-insertion):
	Check if args and viper-insert-point are markers.
	(viper-minibuffer-trim-tail): New function.

1997-09-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule.el (set-buffer-file-coding-system):
	Improve prompt.

	* international/mule-cmds.el (toggle-input-method):
	No error if enable-multibyte-characters is nil.
	(read-input-method-name): Specify the input history properly.
	(select-input-method): Improve prompt.

	* international/mule-util.el (string-to-sequence):
	Work usefully when enable-multibyte-characters is nil.

	* international/quail.el (quail-update-translation):
	Do insert translated char when enable-multibyte-characters is nil.

1997-09-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (read-language-name): Use a default,
	not an initial input.

	* international/mule-conf.el (file-coding-system-alist):
	Match `loaddefs.el' more accurately.

	* rect.el (operate-on-rectangle): If we overshoot when looking
	for endcol, back up.

	* menu-bar.el (menu-bar-help-menu):
	Rename info item to "Info (Browse Manuals)".

	* menu-bar.el (menu-bar-options-menu): String now "Global Options".
	Rewrite the font lock toggle to turn off font lock on all buffers.
	Choose lazy-lock by setting font-lock-support-mode.

	* ispell.el (ispell-overlay-window): Undo previous change;
	in other words, don't bind inhibit-frame-unsplittable.

	* international/mule-cmds.el (mule-menu-keymap):
	Define only as a variable; specify a name for the keymap.
	(mule-keymap): Define only as variable.

	* mail/sendmail.el (mail-mode): Set adaptive-fill-first-line-regexp
	specially, not same as adaptive-fill-regexp.

1997-09-03  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-update-guidance): If PROMPTKEY is
	specified in the original CXTERM dictionary, show also candidates
	in Quail guidance buffer.
	(quail-show-translations): Likewise.

1997-09-02  Andrew Innes  <andrewi@harlequin.co.uk>

	* term/w32-win.el (w32-handle-scroll-bar-event): On up and
	down events, place point at window start position.
	Bind f10 to menubar.
	Move keypad key definitions to w32-fns.el.

	* dos-w32.el (file-name-buffer-file-type-alist): Add more
	extensions for binary files.

	* w32-fns.el: Don't unset C-mouse-down bindings.
	Ignore "Windows" keys by default.
	Move keypad key definitions from term/w32-win.el.
	(convert-standard-file-name): New function.
	(make-auto-save-file-name): Use convert-standard-file-name.

1997-09-02  Michael Welsh Duggan  <md5i@schenley.com>

	* term/w32-win.el (mouse-wheel-scroll-amount): New variable.
	(mouse-wheel-scroll-line, mouse-wheel-scroll-screen): New functions.
	Bind mouse-wheel events to mouse-wheel functions.

1997-09-02  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el: Update doc strings.
	(w32-startup): Deleted function.
	(w32-check-shell-configuration, w32-init-info): New functions.
	(w32-system-shell-p): Renamed from w32-using-system-shell-p.
	Added shell name argument.

1997-09-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (find-tag-tag): Pass default to completing-read.

	* dired.el (dired-get-filename): Don't call encode-coding-string
	if FILE is nil.

1997-09-02  Andrew Innes  <andrewi@harlequin.co.uk>

	* comint.el (comint-file-name-chars): Use separate sets for ms-dos
	and windows-nt.

	* disp-table.el (standard-display-european): Map \222 to apostrophe.

	* files.el (file-truename) [windows-nt]: Use the canonicalized
	long file name as the truename.
	(auto-mode-alist): Use archive-mode for Java JAR files.
	(recover-file) [windows-nt]: Don't try to list directory.

	* frame.el (other-frame) [windows-nt]: Use w32-focus-frame.

	* gud.el (gud-gdb-marker-regexp): Allow for drive letter and colon.

	* scroll-bar.el (scroll-bar-maybe-set-window-start): Change window
	if current start is equal to start of next portion.

1997-09-02  Geoff Voelker  <voelker@cs.washington.edu>

	* cus-edit.el (custom-display): Use w32 instead of win32.
	* browse-url.el (browse-url-netscape): Check for w32 window-system
	symbol.

1997-09-02  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* enriched.el (enriched-decode-foreground)
	(enriched-decode-background): Test of facemenu-get-face return
	value no longer needed.

	* facemenu.el (facemenu-get-face): Just warn when given an
	undefined color, no error, still return face.

1997-09-02  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail): Reset enable-multibyte-characters to the
	default value to enable message decoding if the default value is
	non-nil.

	* international/quail.el (quail-keyboard-layout-alist): Add an
	entry for "atari-german".
	(quail-keyboard-translate): If CH is not in the keyboard location
	covered by quail-keyboard-layout-standard, return CH.
	(quail-show-kbd-layout): Show keyboard layout based on
	quail-keyboard-layout-standard if the current input method
	requires keyboard translation.

1997-09-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (set-coding-system-map):
	Add an item for universal-coding-system-argument.

1997-09-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* userlock.el (ask-user-about-lock): Abbreviate file name
	and locking user's name.

	* international/mule.el (set-auto-coding): Recognize coding: in first
	line even if not the first variable.

	* language/european.el (setup-8-bit-environment):
	Inhibit message about loading latin-N.el.

1997-09-01  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Fix prev change.
	(quail-conversion-keymap): Likewise.

	* international/mule-cmds.el (describe-input-method): Fix prev change.
	(read-multilingual-string): Likewise.
	(describe-language-environment): Prompt modified.

	* ispell.el (ispell-region): Take account of the fact that `ispell'
	will return OFFSET by counting non-ASCII characters as one.
	(ispell-dictionary-alist-1): Add coding systems to each entry.
	(ispell-dictionary-alist-2): Likewise.
	(ispell-get-coding-system): New function.
	(ispell-decode-string): New function.
	(ispell-get-casechars): Decode the string if necessary.
	(ispell-get-not-casechars, ispell-get-otherchars): Likewise.

1997-09-01  Naoto TAKAHASHI  <ntakahas@etl.go.jp>

	* language/ethio-util.el (ethio-sera-to-fidel-region)
	(ethio-sera-to-fidel-buffer, ethio-fidel-to-sera-region)
	(ethio-fidel-to-sera-buffer): Doc-string fixed.

1997-09-01  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-translation-keymap): Do not bind
	"\C-c" to quail-abort-translation.
	(quail-mode-map): Bind key codes 128 through 256 to
	quail-start-translation.
	(quail-translation-keymap): Bind key codes 128 through 256 to
	quail-self-insert-command.
	(quail-conversion-keymap): Bind key codes 128 through 256 to
	quail-start-translation-in-conversion-mode.

	* international/mule-cmds.el (get-language-info): Accept a symbol
	as the arg LANGUAGE-NAME.
	(set-language-info): Likewise.
	(set-language-info-alist): Likewise.
	(register-input-method): Accept a symbol as the args INPUT-METHOD
	and LANGUAGE-NAME.
	(activate-input-method): Accept a symbol as the args INPUT-METHOD.
	(describe-input-method): Likewise.
	(read-multilingual-string): Likewise.
	(set-language-environment): Accept a symbol as the arg LANGUAGE-NAME.
	(describe-language-environment): Likewise.

	* files.el (hack-local-variables-prop-line): Ignore coding: tag.
	(hack-one-local-variable): Likewise.

	* international/mule.el (set-auto-coding): Name changed from
	auto-file-coding-system.  The argument STRING is now a
	concatenation of the heading 1K-byte and the tailing 3K-byte of a
	file.
	(set-auto-coding-function): Set it to `set-auto-coding'.

1997-08-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/bytecomp.el (byte-compile-output-file-form): Handle
	custom-declare-variable.

	* international/mule-diag.el (describe-current-coding-system): Add
	missing newline in output.

1997-08-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/pop3.el (pop3-md5): New function.
	(pop3-apop): Use pop3-md5, not md5.
	(pop3-md5-program): New variable.

	* gnus/md5.el: File deleted.

	* gnus/gnus-soup.el: Require cl at compile time.
	* gnus/gnus-move.el, gnus/gnus-uu.el: Likewise.

	* add-log.el (change-log-font-lock-keywords): Add more to prev change.

1997-08-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-get-filename): Encode file name
	using the buffer's coding system.

	* mail/sendmail.el (mail-send): Complain about invalid header line.

1997-08-30  Jerry James  <jerry@cs.ucsb.edu>

	* format.el (format-subtract-regions): New function.
	(format-property-increment-region): New function.

	* format.el (format-deannotate-region): When multiple annotations
	go into a single text property, split the outer annotations (with
	format-subtract-regions) instead of resetting them; use lists of
	regions instead of a single number for the text property start.

	* format.el (format-deannotate-region): Don't change extents of
	enclosing annotations of the same kind.

	* format.el (format-deannotate-region):
	Use property-increment-region to add to numeric properties.

1997-08-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-w32.el (find-buffer-file-type): Don't check for untranslated
	file systems here.
	(find-buffer-file-type-coding-system): For reading a file,
	check for binary file, then text file, then existing file,
	then whether file name is translated.

	* textmodes/text-mode.el (text-mode-hook-identify): New function,
	put on text-mode-hook.  Set text-mode-variant here.
	(text-mode): Don't set it here.

	* disp-table.el (standard-display-european): Doc fix.

1997-08-29  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el (reftex-customize): Added call to customize browse.
	(reftex-show-commentary): New function.
	(reftex-label-alist): Prefix may contain % escapes.  Nth macro
	argument may be context.  May give two different context methods.
	(reftex-default-label-alist-entries): Customization type changed.
	(reftex-label-menu-flags): Extra flag for searches.
	(reftex-cite-format): Changed completely, % escapes are now used.
	(reftex-comment-citations): New variable.
	(reftex-cite-comment-format): New variable.
	(reftex-cite-punctuation): New variable.
	(reftex-make-master-buffer): Changed name of master buffer,
	removed interactive.  Runs a hook on the buffer.  Interpret
	TEXINPUTS environment variable.  Allow naked argument for \input.
	Master buffer is now in fundamental mode.
	(reftex-access-scan-info): Name of master buffer changed.
	(reftex-section-regexp): Is now computed from section levels,
	not set independently.
	(reftex-section-levels): Made customizable.
	(reftex-label): Interpret % escapes in prefix.  Use label format
	if given.
	(reftex-replace-prefix-escapes): New function.
	(reftex-uniquify-label): New function.
	(reftex-next-label-number): Function definition removed.
	(reftex-reference): Use reftex-uniquify-label.  Allow more general
	label commands.
	(reftex-offer-label-menu):
	Interpret new flag in reftex-label-menu-flags.
	(reftex-make-and-insert-label-list): Use text properties to record
	label index.
	(reftex-find-nearby-label): Allow more general label commands.
	(reftex-scan-buffer-for-labels): Allow more general label commands.
	(reftex-init-section-numbers): New function.
	(reftex-allow-for-ctrl-m): New function.
	(reftex-label-info-update): Allow more general label commands.
	(reftex-label-info): New parameter derive.
	(reftex-short-context): Interpret integer parse as nth arg of macro.
	(reftex-nth-parens-substring): New function.
	(reftex-select-item): Interpret the new 'cnt text property.
	(reftex-pop-to-label): Allow more general label commands.
	(reftex-nicify-text): Allow more general label commands.
	(reftex-toc): Remember previous window configuration.  Use text
	properties to store info.  Bind mouse-2.
	(reftex-make-master-buffer): New Hook.
	(reftex-last-window-height): New variable.
	(reftex-toc-show-help): New function.
	(reftex-toc-help): New constant.
	(reftex-nearest-section): Use text properties to store info.
	(reftex-empty-toc-buffer): New function.
	(reftex-re-enlarge): New function.
	(reftex-toc-goto-line): New function.
	(reftex-toc-mouse-goto-line-and-hide): New function.
	(reftex-cite-format-builtin): New constant.
	(reftex-cite-format-default): Constant removed.
	(reftex-cite-format-1-author-simple): Constant removed.
	(reftex-cite-format-2-authors): Constant removed.
	(reftex-get-bib-names): New function.
	(reftex-get-bib-authors) Function removed.
	(reftex-format-bib-entry): Use now reftex-get-bib-names.
	(reftex-citation): Completely rewritten.  Offers selection of
	different cite macros first, then the reference menu.  Works with
	the various new variables mentioned above.  Accept the `a' key to
	use all selected citations.
	(reftex-insert-bib-matches): New function.
	(reftex-format-citation): Now interpretes % escapes.
	(reftex-select-item): Emulate a search in the menu buffer.
	Interpret the 'cnt text property.
	(reftex-view-crossref): Allow more general label, cite and ref macros.
	(reftex-highlight-overlays): Add third overlay for search
	in menu buffer.
	(reftex-label-alist-builtin): xalignat and xxalignat environments
	added.  Slightly reorganized.
	(reftex-reset-scanning-information): Just empty *toc* buffer, do
	not kill it.
	(reftex-compute-ref-cite-tables): Read the new options in
	`reftex-label-alist' and store them.  Calculate the section regexp.

1997-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist):
	Allow spaces in file names for Microsoft C;
	check more carefully for the rest of the error message.

	* international/mule-cmds.el (set-terminal-coding-system):
	Enable for menus whenever not using X.
	(set-keyboard-coding-system): Likewise.

	* international/quail.el (quail-define-package): New arg SIMPLE.
	(quail-simple-translation-keymap): New keymap.

	* textmodes/texnfo-upd.el, textmodes/texinfmt.el
	(defgroup, defcustom): Add Emacs 19 compatibility definitions.
	* textmodes/texinfo.el
	(defgroup, defcustom): Add Emacs 19 compatibility definitions.

1997-08-28  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): Make TYPE 5 means
	raw-text.
	(after-insert-file-set-buffer-file-coding-system): Set
	enable-multibyte-characters to nil if we read a file with
	no-conversion or raw-text-XXXX.

	* international/mule-conf.el (raw-text): New coding system.  Set
	coding-category-raw-text to raw-text.

	* language/english.el (setup-english-environment): Set
	coding-category-raw-text to raw-text.

	* language/viet-util.el (setup-vietnamese-environment): Set
	coding-category-raw-text to vietnamese-viscii.

	* language/cyril-util.el (setup-cyrillic-alternativnyj-environment):
	Set coding-category-raw-text to cyrillic-alternativnyj.

	* international/mule-cmds.el (update-leim-list-file): Make it
	handle multiple directories.
	(update-all-leim-list-files): Deleted.

	* international/quail.el (quail-update-leim-list-file): Make it
	handle multiple directories.

1997-08-28  Kenichi Handa  <handa@etl.go.jp>

	* earcon.el: Require cl at compile time before loading gnus, etc.

1997-08-28  Tomohiko Morioka  <tmorioka@mule.etl.go.jp>

	* nnfolder.el (nnfolder-request-list): Override
	'nnmail-file-coding-system' by 'nnmail-active-file-coding-system'.
	(nnfolder-request-list, nnfolder-possibly-change-group): Protect
	from conversion by `pathname-coding-system' for XEmacs/mule.
	(nnfolder-group-pathname): Encode pathname for Emacs 20.

	* nnmh.el (nnmh-request-list, nnmh-active-number): Protect from
	conversion by `pathname-coding-system' for XEmacs/mule.

	* nnml.el (nnml-possibly-change-directory): Likewise.
	(nnml-retrieve-headers, nnml-request-article)
	(nnml-request-group, nnml-request-list): Likewise.

	* nnmail.el (nnmail-active-file-coding-system): New variable.
	(nnmail-insert-xref): Encode pathname for Emacs 20.
	(nnmail-write-region, nnmh-retrieve-headers, nnmh-request-article)
	(nnmh-request-group, nnmh-possibly-change-directory): Protect from
	conversion by `pathname-coding-system' for XEmacs/mule.
	(nnmail-pathname-coding-system): New variable.
	(nnmail-group-pathname): Encode pathname for Emacs 20.
	nnmail-file-coding-system): New variable.
	(nnmail-find-file): Bind `coding-system-for-read' with
	`nnmail-file-coding-system' for Emacs/mule and XEmacs/mule.
	(nnmail-write-region): Bind `coding-system-for-write' with
	`nnmail-file-coding-system' for Emacs/mule and XEmacs/mule.

	* nnheader.el (nnheader-pathname-coding-system): New variable.
	(nnheader-file-coding-system): New variable.
	(nnheader-group-pathname): Encode pathname for Emacs 20.
	(nnheader-find-file-noselect): Bind `coding-system-for-read' with
	`nnheader-file-coding-system' for Emacs/mule and XEmacs/mule.
	(nnheader-insert-file-contents): Bind `coding-system-for-read'
	with `nnheader-file-coding-system' for Emacs/mule and XEmacs/mule.

	* nntp.el (nntp-coding-system-for-read): New variable.
	(nntp-open-connection): Bind `coding-system-for-read' with
	`nntp-coding-system-for-read' for Emacs/mule and XEmacs/mule.

	* nnspool.el (nnspool-file-coding-system): New variable.
	(nnspool-retrieve-headers, nnspool-retrieve-headers-with-nov)
	(nnspool-find-file): Override `nnheader-file-coding-system' by
	`nnspool-file-coding-system' for gnspool on Windows 95/NT.

	* gnus-sum.el (gnus-structured-field-decoder): New variable.
	(gnus-unstructured-field-decoder): New variable.
	(gnus-get-newsgroup-headers, gnus-nov-parse-line): Use
	`gnus-structured-field-decoder' and
	`gnus-unstructured-field-decoder' for Subject field.

1997-08-28  Miyashita Hisashi  <himi@etl.go.jp>

	* pop3.el (pop3-movemail-file-coding-system): Append it for
	assigning a coding system to receive mail with pop3.
	(pop3-movemail): Modify for writing messages with
	pop3-movemail-file-coding-system.

1997-08-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/text-mode.el (text-mode-hook): New defvar.
	(text-mode-variant): New variable.
	(text-mode): Set that variable locally.
	(toggle-text-mode-auto-fill): New command.

	* timer.el (timer-event-handler): Reactivate timer first,
	then run the handler function.

	* isearch.el (isearch-printing-char): Handle nonascii-insert-offset.

	* emacs-lisp/cl.el (last*): Definition deleted.

	* subr.el (last): Accept optional second argument.

	* progmodes/sh-script.el (sh-indent-line): Delete debugging code.

1997-08-27  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el (browse-url-mail): Use compose-mail[-other-window],
	not always `mail'.

1997-08-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-print.el (ps-print-region-with-faces): Don't call
	ps-generate.

	* term/pc-win.el (msdos-color-aliases): Add missing colors.
	(msdos-color-translate): Handle "deep" and "pale" color
	varieties.

1997-08-27  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Change the custom group to `hypermedia'.
	(browse-url-netscape-version): New variable.
	(browse-url-netscape-reload): Use it to account for reported
	backwards incompatibility.

1997-08-27  Eli Zaretskii  <eliz@psilocin.gnu.ai.mit.edu>

	* term/internal.el: Add coding: emacs-mule tag, to prevent
	interpreting this as sjis-encoded file.

1997-08-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* forms.el (forms-read-only): Un-customize, and doc fix.

	* mail/rmailsum.el (rmail-summary-get-new-mail):
	Handle args like rmail-get-new-mail, and pass them to that function.

	* winner.el: Many changes by Ivar Rummelhoff.

1997-08-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* language/european.el (setup-8-bit-environment): Load the latin-N
	file again each time.

	* files.el (find-file-literally): Doc fix.

	* help.el (help-with-tutorial): Doc fix.

1997-08-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/mail-utils.el (mail-strip-quoted-names):

	* ps-print.el (ps-rmail-mode-hook): New function.
	(ps-print-message-from-summary): New function.
	(ps-vm-print-message-from-summary): Use that.
	(ps-gnus-print-article-from-summary): Likewise.
	(ps-rmail-print-message-from-summary): New function.

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Give formfeed whitespace syntax.

	* international/mule-diag.el (mule-diag): Add save-excursion calls.

1997-08-26  Michael Ernst  <mernst@cs.washington.edu>

	* mail-utils.el (mail-strip-quoted-names): Retain one whitespace
	character between addresses.

1997-08-26  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* facemenu.el (facemenu-unlisted-faces): Expand variable
	definition to allow regexps; add regexps for some packages that
	define a lot of faces.
	(facemenu-add-new-face): Test new face against regexps.
	(list-colors-display): Rather than creating a zillion faces, use
	new (foreground-color . COLOR) and (background-color . COLOR)
	face properties.

1997-08-26  Kenichi Handa  <handa@etl.go.jp>

	* files.el (revert-buffer): Read a file without any code
	conversion if we are reverting from an auto-saved file.

	* language/japanese.el (set-language-info-alist): Change
	iso-2022-7bit to iso-2022-jp.

	* replace.el (query-replace-read-args): Locally bind
	minibuffer-inherit-input-method to t to make a minibuffer inherit
	the current input method.
	(map-query-replace-regexp, keep-lines, flush-lines): Likewise.
	(how-many, occur): Likewise.

	* international/mule-cmds.el
	(inactivate-current-input-method-function): Doc-string modified.
	(input-method-activate-hook): Likewise.
	(input-method-inactivate-hook): Likewise.
	(activate-input-method): Document it.
	(inactivate-input-method): Document it.

	* language/tibet-util.el (tibetan-composition): Add autoload
	cookies.

1997-08-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-nocem.el: Require cl at compile time.

	* gnus/gnus.el (gnus-select-method): Change the other ignore-errors.

	* gnus/gnus-group.el (gnus-group-make-useful-group):
	Don't use caddr in interactive.

	* gnus/gnus-art.el (gnus-emphasis-alist): Don't use caddr.

	* mail/rmail.el (rmail-mode-1):
	Update the value for mode-line-modified.

1997-08-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Use custom-initialize-reset
	by default, rather than custom-initialize-set.
	(custom-initialize-reset, custom-initialize-set): Doc fixes.

	* gnus/gnus-int.el, gnus/gnus-msg.el, gnus/gnus-undo.el:
	Require cl at compile time.

	* progmodes/cmacexp.el (c-macro-expand): Add autoload cookie.

	* cus-dep.el (custom-make-dependencies): Don't print each file name.

1997-08-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Rename 2nd arg to DEFAULT.

	* emacs-lisp/easymenu.el (easy-menu-create-keymaps): If nil is
	given as the enable condition, always disable the command.

	* comint.el (comint-preoutput-filter-functions): New variable.
	(comint-output-filter): Call those functions.
	(comint-output-filter-functions, comint-mode): Doc fix.

	* faces.el (modify-face): Fix previous change.

	* add-log.el (change-log-font-lock-keywords):
	Match "Patches by".  Match all kinds of acks after `  '.

	* mail/rmail.el (rmail-view-buffer): Doc fix.
	(rmail-summary-buffer, rmail-summary-vector): Mark as permanent local.
	(rmail-buffer): Add defvar and mark as permanent local.

1997-08-24  Erik Naggum  <erik@naggum.no>

	* simple.el (eval-expression): Prefix arg means insert value in
	current buffer.

1997-08-23  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-terminate-translation): Doc-string
	fixed.  Set quail-prefix-arg to nil after handling it.
	(quail-self-insert-command): Set overriding-terminal-local-map to
	nil when thrown for `quail-tag' by value nil.

1997-08-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* tmm.el (tmm-get-keymap): Ignore any command now disabled for menus.

	* textmodes/texinfo.el (texinfo-mode): Turn off adaptive-fill-mode.

	* winner.el: Doc fixes.

	* gnus/messcompat.el (message-signature-file): Delete autoload cookie.

	* gnus/nnvirtual.el (nnvirtual-merge-sorted-lists):
	Use sort, not merge.
	(nnvirtual-partition-sequence): Use mapcar, not mapc.
	(nnvirtual-create-mapping): Don't use delete-if-not.

	* gnus/nnfolder.el (nnfolder-generate-active-file): Don't use remove.

	* gnus/gnus-start.el: Require cl at compile time.
	(gnus-site-init-file): Use condition-case.

	* gnus/gnus-art.el: Require cl at compile time.
	* gnus/gnus-async.el: Likewise
	* gnus/gnus-cite.el, gnus/gnus-kill.el, gnus/gnus-logic.el: Likewise.
	* gnus/gnus-group.el, gnus/gnus-salt.el, gnus/gnus-score.el: Likewise.
	* gnus/gnus-spec.el, gnus/gnus-srvr.el, gnus/gnus-start.el: Likewise.
	* gnus/gnus-sum.el, gnus/gnus-topic.el, gnus/gnus-win.el: Likewise.
	* gnus/nnweb.el, gnus/gnus-bcklg.el: Likewise.
	* gnus/gnus-cache.el, gnus/gnus-demon.el, gnus/gnus-dup.el: Likewise.
	* gnus/gnus-range.el, gnus/nnheader.el: Likewise.

	* gnus/parse-time.el: Require cl only at compile time.
	* gnus/gnus-setup.el, gnus/nneething.el, gnus/nnmail.el: Likewise.
	* gnus/nnmh.el, gnus/nnml.el, gnus/nnoo.el: Likewise.

	* gnus/gnus-util.el: Require cl only at compile time.
	(gnus-parent-id): Don't use last with 2 args.

	* gnus/gnus.el: Require cl at compile time.
	(gnus-select-method): Use condition-case, not ignore-errors.
	(gnus-check-backend-function): Definition moved up.

	* gnus/message.el: Require cl only at compile time.
	(message-user-agent): Use condition-case, not ignore-errors.
	(message-talkative-question): Doc fix.

	* subr.el (caar, cadr, cdar, cddr): Definitions moved here
	and changed into defsubsts.
	(last): New function.

	* emacs-lisp/cl.el (caar, cadr, cdar, cddr): Moved to subr.el.
	(last): Function renamed to last*.
	* emacs-lisp/cl-macs.el (cl-loop-let): Use last*.

	* time.el (display-time-hook): Minor doc fix.

	* ps-print.el (ps-zebra-stripes): Renamed from ps-zebra-stripe.
	(ps-zebra-stripe-height): Renamed from ps-number-of-zebra.

	* vc.el (vc-version-diff): Mention that default file is visited file.

	* textmodes/sgml-mode.el (sgml-mode-common):
	Set paragraph-start like paragraph-separate.
	Do match a line which is just a <...> construct after whitespace.
	Set adaptive-fill-regexp to match whitespace only.

	* emacs-lisp/autoload.el (update-file-autoloads):
	Be careful about which directory to find loaddefs.el in.

	* gnus/message.el (message-user-agent): Add autoload cookie.

	* progmodes/sh-script.el (sh-indent-line): Avoid infinite loop
	on indented line at start of buffer, when calculating PREVIOUS.

1997-08-22  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-time-zone): New variable.
	(time-stamp-string): Use that time zone.
	(time-stamp-active, time-stamp-warn-inactive)
	(time-stamp-old-format-warn): Definitions moved.

1997-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (modify-face): New arg INVERSE-P.
	Clear the inverse-video flag before installing new colors.
	(face-spec-set): Pass INVERSE-P arg, and use (nil) for colors
	when calling modify-face.

	* add-log.el (change-log-font-lock-keywords): Recognize "Patch by".

	* textmodes/paragraphs.el (use-hard-newlines): Un-customized.

	* menu-bar.el (menu-bar-make-toggle): New macro.
	(menu-bar-options-menu): New submenu of Help menu.
	Define several menu items for it.

	* shell.el (shell-snarf-envar, shell-copy-environment-variable):
	New functions.

	* progmodes/hideif.el (hif-greater, hif-less, hif-greater-equal)
	(hif-less-equal): New functions.
	(hif-tokenize): Handle new tokens >, <, >=, <=.
	(hif-eq-expr): Handle parsing these new tokens.
	(hif-token-regexp): Match >, <. >=, <=.

	* delsel.el (delete-selection-mode): Put back :initialize keyword.
	At the end of the file, test this variable, and turn on the mode
	if it is non-nil.

1997-08-22  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* textmodes/paragraphs.el: Customized.
	* textmodes/nroff-mode.el: Customized.

1997-08-22  Karl Fogel  <kfogel@floss.red-bean.com>

	* bookmark.el (bookmark-load): Use `bookmark-import-new-list' to
	load the new list carefully, renaming bookmarks as necessary.
	In docstring, mention new renaming behavior.
	Optional arg OVERWRITE replaces inaccurately-named REVERT.
	If file loaded was bookmark-default-file, then set
	bookmarks-already-loaded to t.
	(bookmark-import-new-list): New func.
	(bookmark-maybe-rename): New func, helper to above.
	(bookmark-set-name): Accept bookmark as either string (behaves
	same as before) or list (treat it as a bookmark record).

	(bookmark-set, bookmark-maybe-load-default-file)
	(bookmark-jump-noselect, bookmark-rename)
	(bookmark-show-annotation): Discard pointless `progn's.

	(bookmark-bmenu-mark, bookmark-bmenu-unmark)
	(bookmark-bmenu-backup-unmark, bookmark-bmenu-delete-backwards):
	Renormalize position after all else is done.

	(bookmark-edit-annotation-mode, bookmark-bmenu-list)
	(bookmark-show-annotation, bookmark-show-all-annotations):
	Use `x' instead of `(not (eq x nil))'.

	(bookmark-yank-word): Inner save-excursion changed to progn.
	(bookmark-send-annotation, bookmark-send-edited-annotation)
	(bookmark-insert): Use buffer-string instead of buffer-substring.
	(bookmark-make-cell): Make sure annotation and info-node strings
	contain no text properties.
	(bookmark-relocate): Remember to rebuild bmenu buffer after a
	bookmark has been relocated.
	(bookmark-bmenu-check-position): Return a meaningful value --
	callers have apparently been assuming this anyway.
	(bookmark-build-xemacs-menu): Unused function deleted.
	(bookmark-version): Removed this variable; the Emacs version suffices.

1997-08-22  Simon Marshall  <simon@gnu.ai.mit.edu>

	* shell.el (shell-mode): Make shell-last-dir buffer-local.

1997-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* indent.el (indent-relative, insert-tab):
	Don't call expand-abbrev unless preceding character is a word char.

1997-08-21  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (viper-set-hooks): New advices and hooks for mule.
	(toggle-viper-mode): New function.
	* viper-util.el (viper-set-syntax-preference)
	(viper-update-syntax-classes): New functions.
	(viper-looking-*, viper-skip-*): Revamped to work better with syntax
	tables.
	* viper-cmd.el (viper-replace-char-subr, viper-word-*)
	(viper-separator-skipback-special): Made to work with mule and syntax
	tables.
	(viper-change-state): Moved iso-accents-mode handling here from
	viper-change-state-to-vi/insert/etc.  Also now toggles MULE.

1997-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/bibtex.el: Many doc strings.

1997-08-21  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* textmodes/bibtex.el: Customized.

1997-08-21  Kenichi HANDA  <handa@etl.go.jp>

	* language/cyril-util.el (setup-cyrillic-environment): Deleted.
	(setup-cyrillic-iso-environment): New function.
	(setup-cyrillic-koi8-environment): New function.
	(setup-cyrillic-alternativnyj-environment): New function.

	* language/cyrillic.el: Make describe-cyrillic-environment-map and
	setup-cyrillic-environment-map prefix commands and bind [Cyrillic]
	to them in describe-environment-map and setup-environment-map
	respectively.  Divide language environment "Cyrillic" into three:
	"Cyrillic-ISO", "Cyrillic-KOI8", and "Cyrillic-ALTERNATIVNYJ".

	* international/mule.el (auto-file-coding-system): New function.
	(auto-file-coding-system-function): Set this variable to
	`auto-file-coding-system'.

	* international/quail.el (quail-terminate-translation): Run
	input-method-after-insert-chunk-hook only when the current input
	method doesn't require conversion.
	(quail-no-conversion): Run input-method-after-insert-chunk-hook.

	* international/mule-util.el (coding-system-unification-table):
	Deleted.
	(coding-system-unification-table-for-decode): New function.
	(coding-system-unification-table-for-encode): New function.

	* international/mule.el (make-coding-system): Doc-string fixed.

	* international/fontset.el (register-alternate-fontnames): New
	function.
	(x-complement-fontset-spec): Register alternate fontnames by
	calling register-alternate-fontnames.
	(instanciate-fontset): Likewise.

1997-08-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-print-face-extension-alist): Doc fix.
	(ps-new-faces): Function deleted.

1997-08-20  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Minor doc fixes.
	(browse-url-temp-dir): New variable.
	(browse-url-of-buffer): Use browse-url-temp-dir.  Don't construct
	a temporary file name which includes an arbitrary buffer name to
	avoid losing on non-unixy systems.

1997-08-20  Vinicius Jose Latorre  <vinicius@cpqd.br>

	* ps-print.el: A lot of comment and doc fixes.
	Replace: 'nil by nil, '() by nil, 't by t.
	(ps-print-version): New version number (3.05).
	(ps-zebra-stripe, ps-number-of-zebra, ps-line-number)
	(ps-print-background-image, ps-print-background-text): New variables
	to customize zebra stripes, line number, image background and text
	background features, respectively.
	(ps-adobe-tag): Tagged to PostScript level 3.
	(ps-print-buffer, ps-print-buffer-with-faces)
	(ps-print-region, ps-print-region-with-faces)
	(ps-spool-buffer, ps-spool-buffer-with-faces)
	(ps-spool-region, ps-spool-region-with-faces): Call more primitive
	functions for PostScript printing (functions below).
	(ps-print-with-faces, ps-print-without-faces)
	(ps-spool-with-faces, ps-spool-without-faces): More primitive
	functions for PostScript printing.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region)
	(ps-line-lengths-internal, ps-nb-pages): Doc fixes.
	(ps-print-prologue-1): A lot of PostScript programming:
	/dobackgroundstring, /dounderline, /UL: Postscript functions deleted.
	/reencodeFontISO, /F, /BG, /HL, /W, /S, /BeginDSCPage, /BeginPage,
	/EndPage: adjusted for new effects (outline, shadow, etc).
	/PLN, /EF, /Hline, /doBox, /doRect, /doShadow, /doOutline,
	/FillBgColor, /doLineNumber, /printZebra, /doColumnZebra,
	/doZebra, /BeginBackImage, /EndBackImage, /ShowBackText: New procedures.
	(ps-current-underline-p, ps-set-underline): Var and fn deleted.
	(ps-showline-count, ps-background-pages, ps-background-all-pages)
	(ps-background-text-count, ps-background-image-count): New variables.
	(ps-header-font, ps-header-title-font)
	(ps-header-line-height, ps-header-title-line-height)
	(ps-landscape-page-height): Set initial value to nil.
	(ps-print-face-extension-alist, ps-print-face-map-alist):
	New variables for face remapping.
	(ps-new-faces, ps-extend-face-list, ps-extend-face):
	New functions for face remapping.
	(ps-override-list, ps-extension-to-bit-face)
	(ps-extension-to-screen-face, ps-extension-bit)
	(ps-initialize-faces, ps-map-font-lock, ps-screen-to-bit-face):
	New internal functions for face remapping.
	(ps-get-page-dimensions): Fix error message.
	(ps-insert-file): Doc fix and programming enhancement.
	(ps-begin-file, ps-end-file, ps-get-buffer-name, ps-begin-page)
	(ps-next-line, ps-plot-region, ps-face-attributes)
	(ps-face-attribute-list, ps-plot-with-face)
	(ps-generate-postscript-with-faces): Handle new output features.
	(ps-generate): save-excursion inserted to return back point at
	position before calling ps-print.
	(ps-do-spool): Access dos-ps-printer variable through symbol-value.
	(ps-prsc, ps-c-prsc, ps-s-prsc): Use backquote.
	(ps-basic-plot-whitespace, ps-emacs-face-kind-p): Internal blank
	line eliminated.
	(ps-float-format, ps-current-effect): New internal variables.
	(ps-output-list, ps-count-lines, ps-background-pages)
	(ps-get-boundingbox, ps-float-format, ps-background-text)
	(ps-background-image, ps-background, ps-header-height)
	(ps-get-face): New internal functions.
	(ps-control-character): Handle control characters.
	(ps-gnus-print-article-from-summary): Updated for Gnus 5.
	(ps-jack-setup): Replace 'nil by nil, 't by t.

1997-08-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-yank-original): Bind mark-even-if-inactive
	around the indentation and citation hooks code.

	* mail/sendmail.el (mail-send-nonascii): Make the default t.

	* calendar.el (calendar-julian-date-string): Mark not interactive.

1997-08-19  Kenichi Handa  <handa@etl.go.jp>

	* files.el (append-to-file): Doc-string fixed.

	* international/quail.el (quail-exit-from-minibuffer): Call
	inactivate-input-method instead of (quail-mode -1).
	(quail-kill-guidance-buf): New function.
	(quail-mode): Doc-string and comments modified.  Make this
	function non-interactive.  Add quail-kill-guidance-buf to
	kill-buffer-hook locally.
	(quail-start-translation): Check if the current Quail package
	requires keyboard translation feature.
	(quail-start-translation-in-conversion-mode): Likewise.
	(quail-terminate-translation): Run hooks in
	input-method-after-insert-chunk-hook.
	(quail-update-translation): Don't run hooks in
	input-method-after-insert-chunk-hook here.
	(quail-setup-completion-buf): New function.
	(quail-show-guidance-buf): Create completion buffer by calling
	quail-setup-completion-buf.
	(quail-completion): Create completion buffer if it is not alive.

	* international/encoded-kb.el (encoded-kbd-mode): Doc-string
	modified.  Make this a non-interactive function.
	(encoded-kbd-iso2022-designation): Do not enter recursive edit twice.
	(encoded-kbd-iso2022-non-ascii-map): Bind 8-bit keys to
	encoded-kbd-handle-8bit.

	* international/titdic-cnv.el (tit-process-body): Handle `\' used
	for quoting the following digits correctly.

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters): If
	read-multilingual-string returns null string, just call isearch-update.

1997-08-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/china-util.el: Don't set primary-language.

	* language/ethio-util.el (setup-ethiopic-environment):
	Don't set primary-language.

	* language/cyril-util.el (setup-cyrillic-environment):
	Don't set primary-language.

	* international/mule-cmds.el (primary-language): Variable deleted.
	* international/mule-diag.el (mule-diag): Don't print primary-language.

	* help.el (help-with-tutorial): Use current-language-environment.

1997-08-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el: Add an autoload form for calendar-print-julian-date.

	* international/encoded-kb.el (encoded-kbd-iso2022-designations)
	(encoded-kbd-iso2022-invocations): Don't make these vars buffer-local.
	(encoded-kbd-mode): Don't make encoded-kbd-iso2022-designations
	or encoded-kbd-iso2022-invocations buffer-local.

	* textmodes/fill.el (fill-individual-paragraphs): Fix handling
	of adaptive-fill.  Call fill-context-prefix, but bind
	adaptive-fill-first-line-regexp to a null string.

1997-08-18  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* forms.el, hscroll.el, indent.el, server.el, sort.el: Customized.

1997-08-18  Mark Mitchell  <mmitchell@usa.net>

	* font-lock.el (c++-font-lock-keywords-2):
	Ensure that public and private are not fontified as labels.

1997-08-18  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-region): New arg
	kkc-mode-exit-function.

	* international/quail.el (quail-inactivate): Turn Quail mode off
	by itself.
	(quail-translation-keymap): Don't bind thee key "C-\".
	(quail-conversion-keymap): Likewise.
	(quail-define-package): Indentation fixed.
	(quail-setup-overlays): New arg conversion-mode.  Pay attention to
	input-method-highlight-flag.
	(quail-mode-line-format): Deleted.
	(quail-generate-mode-line-format): Deleted.
	(quail-mode): Don't handle input-method-inactivate-hook and
	input-method-activate-hook here.  Delete code setting
	quail-mode-line-format.
	(quail-saved-current-map): Name changed from
	quail-saved-overriding-local-map.
	(quail-toggle-mode-temporarily): Completely re-written.
	(quail-execute-non-quail-command): Use
	quail-toggle-mode-temporarily.
	(quail-conv-overlay-modification-hook): Deleted.
	(quail-suppress-conversion): Deleted.
	(quail-start-translation): Completely re-written.
	(quail-start-translation-in-conversion-mode): Likewise.
	(quail-delete-region): Check if quail-overlay is active.
	(quail-get-current-str): Don't call throw.  Set
	overriding-terminal-local-map correctly.
	(quail-update-translation): Run hooks in
	input-method-after-insert-chunk-hook.
	(quail-self-insert-command): Catch 'quail-tag here.
	(quail-conversion-delete-char): Don't call throw.  Set
	overriding-terminal-local-map to nil.
	(quail-conversion-backward-delete-char): Likewise.
	(quail-no-conversion): Likewise.
	(quail-help-insert-keymap-description): Bind
	overriding-terminal-local-map instead of overriding-local-map.

	* international/mule-cmds.el (previous-input-method): This
	variable deleted.
	(input-method-history): New variable.
	(read-input-method-name): Bind minibuffer-history to
	input-method-history.
	(activate-input-method): Delete codes handling
	previous-input-method.  Run hooks in input-method-activate-hook.
	(inactivate-input-method): Update input-method-history.  Run hooks
	in input-method-inactivate-hook.
	(select-input-method): Doc-string modified.  Use
	input-method-history instead of previous-input-method.  Set
	default-input-method to input-method.
	(toggle-input-method): Doc-string modified.  Use
	input-method-history instead of previous-input-method.
	(read-multilingual-string): Bind minibuffer-setup-hook correctly.
	(input-method-exit-on-invalid-key): New variable.

	* isearch.el (isearch-multibyte-characters-flag): Deleted.
	(isearch-mode): Do not bind isearch-multibyte-characters-flag and
	isearch-input-method.
	(isearch-printing-char): Use current-input-method instead of
	isearch-input-method.
	(isearch-message-prefix): Likewise.

	* international/isearch-x.el (isearch-input-method): Deleted.
	(isearch-input-method-title): Deleted.
	(isearch-toggle-specified-input-method): Call toggle-input-method.
	(isearch-toggle-input-method): Likewise.
	(isearch-process-search-multibyte-characters): Use
	current-input-method instead of isearch-input-method.

1997-08-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el: Faces now have 2 more elements, bold-p and italic-p.
	(internal-facep, make-face, x-create-frame-with-faces):
	Create frames with those elements.
	(face-bold-p, face-italic-p): Just fetch those elements.
	(set-face-italic-p, set-face-bold-p): Doc fixes.
	(make-face-bold, make-face-italic, make-face-bold-italic)
	(make-face-unbold, make-face-unitalic): Set those new elements.

1997-08-16  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el: Set default coding system to undecided-dos.
	(find-buffer-file-type-coding-system):
	For writing, use buffer-file-coding-system if set, otherwise
	buffer-file-type.
	(find-file-not-found-set-buffer-file-coding-system):
	Renamed from find-file-not-found-set-buffer-file-type.
	Set buffer-file-coding-system as well as buffer-file-type.

1997-08-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule.el (load-with-code-conversion):
	Bind enable-multibyte-characters to t.

	* international/mule-cmds.el (toggle-input-method)
	(select-input-method): Always set default-input-method.
	Show default in the prompt only if there is one.

	* language/european.el (setup-latin1-environment): Don't set
	special-microsoft-code-table here.

	* international/mule-cmds.el (activate-input-method):
	Handle the new rule that default-input-method is now global only.

	* international/isearch-x.el (isearch-process-search-multibyte-characters):
	Bind input-method-verbose-flag, not input-method-tersely-flag.

	* international/mule-cmds.el (input-method-verbose-flag): Renamed
	from input-method-tersely-flag and sense inverted.
	(input-method-highlight-flag): New variable.
	(toggle-input-method): Pass missing arg to read-input-method-name.

	* international/quail.el (quail-guidance-buf): Now a permanent local.
	(quail-update-guidance, quail-show-guidance-buf):
	Test input-method-verbose-flag.
	(quail-setup-overlays): Underline quail-conv-overlay
	only if input-method-highlight-flag is non-nil.

1997-08-16  Kenichi Handa  <handa@etl.go.jp>

	* language/china-util.el (setup-chinese-gb-environment): Delete
	a code setting default value of default-input-method.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/ethio-util.el (setup-ethiopic-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

	* international/mule.el (make-coding-system): Add a new FLAGS
	element ACCEPT-LATIN-EXTRA-CODE.

	* international/mule-conf.el: Set 146th element of
	latin-extra-code-table to `t'.

1997-08-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (tags-verify-table): Obey revert-without-query.

	* loadup.el (loaddefs.el): Load that file much later, almost last.
	Delete most calls to garbage-collect.

1997-08-15  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-styles.el (c-style-alist):
	"python" style requires c-comment-continuation-stars be "".

	* cc-engine.el (c-end-of-statement-1):
	Eliminate false hits on important characters
	inside literals (strings, comments).

	* cc-cmds.el (c-comment-line-break-function):
	In this function, and the defadvice,
	call indent-new-comment-line if not in a comment.

	* cc-cmds.el (c-fill-paragraph):
	Remove conditional on obsolete variable
	c-double-slash-is-comments-p.

	* cc-vars.el (c-buffer-is-cc-mode): Definition moved to cc-mode.el.

	* cc-mode.el (c-buffer-is-cc-mode):
	Definition moved here from cc-vars.el.  Also,
	put permanent-local property on variable so its value won't get
	killed by kill-all-local-variables.

	* cc-mode.el (c++-mode, java-mode, objc-mode, idl-mode):
	Remove obsolete variable c-double-slash-is-comments-p.

	* cc-langs.el (c-double-slash-is-comments-p): Remove obsolete variable.

1997-08-15  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): New argument ERROR-BUFFER.

	* format.el (format-alist): Typo fix.
	(format-encode-run-method, format-decode-run-method): Put error
	output from shell command in temp buffer, not data buffer.

1997-08-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* format.el (format-annotate-atomic-property-change): Fix prev change.

1997-08-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Better handling of a very long word
	after a fill-prefix.  Don't break right after the prefix and
	don't break at the end of the line.

	* emacs-lisp/lucid.el (extent-properties, extent-at): New functions.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (default-input-method):
	Variable no longer automatically local.

	* language/european.el (setup-8-bit-environment):
	Use `require' to load the latin-N file.

	* international/quail.el (quail-start-translation):
	Use an explicit loop, not recursive edit.
	(quail-suppress-conversion): Doc fix.

	* international/mule-cmds.el (read-input-method-name):
	Replace INITIAL-INPUT arg with DEFAULT arg.
	Substitute it into to the prompt, if it is non-nil.
	(select-input-method): Call read-input-method-name the new way.
	(toggle-input-method): Likewise.

	* simple.el (forward-visible-line): Handle nil value from
	next-single-property-change or previous-single-property-change.

	* diary-lib.el (diary-entry-time): Bind case-fold-search to nil.

1997-08-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-before-change): Obey `inhibit-read-only'.

1997-08-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* add-log.el (change-log-font-lock-keywords): Don't consider
	a closeparen as part of a function or variable name.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (verify-tags-table-function): Doc fix.

	* emacs-lisp/lucid.el (set-extent-property): Don't allow
	multiple extents with a mouse-face property to run together.

	* textmodes/fill.el (fill-region-as-paragraph):
	When justifying, cope if line ends in spaces and no newline.

1997-08-12  Eli Zaretskii  <eliz@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-file): Run ".emacs" through
	convert-standard-filename before using it.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/shadow.el (list-load-path-shadows): Exclude, from the
	path we search, all but the first set of directories that include
	the standard Emacs Lisp files.

	* mail/sendmail.el (mail-send): Ask for confirmation if
	message contains non-ASCII characters.
	(mail-send-nonascii): New variable.

	* compile.el (compilation-error-regexp-alist): New regexp for Caml.

1997-08-11  Paul Eggert  <eggert@twinsun.com>

	* rmail.el (rmail-make-in-reply-to-field): Don't cause an
	error if the `From:' line has no valid email addresses.

1997-08-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-tex.el (cal-tex-latexify-list):
	Put the elements of RESULT in the proper order.
	(cal-tex-list-diary-entries): Bind diary-list-include-blanks to nil.

	* progmodes/cc-cmds.el (c-electric-brace): Make preserve-p nil at BOB.

	* files.el (insert-file-literally): New command.

	* progmodes/cc-styles.el (c-style-alist) <gnu>:
	Set c-comment-continuation-stars and c-hanging-comment-ender-p.

	* language/european.el (setup-latin1-environment):
	Set code 222 in special-microsoft-code-table.

1997-08-11  Dan Nicolaescu  <done@ece.arizona.edu>

	* abbrev.el: Customized.
	(only-global-abbrevs): Doc fix.

	* dabbrev.el (dabbrev-abbrev-skip-leading-regexp): Doc fix.

1997-08-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Don't initialize fg/bg fields.

1997-08-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/nnheaderxm.el: File deleted--not really needed.

	* avoid.el (mouse-avoidance-timer): New variable.
	(mouse-avoidance-mode): Create or cancel a time,
	instead of using post-command-idle-hook.

1997-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-color-aliases): Remove color names which
	end with a number.
	(msdos-color-translate): Handle color names which end with a
	number, like gray85 and purple3.
	(msdos-face-setup): Call `face-set-after-frame-default', so
	default faces are correctly set.
	Do not set background of the region face (it is set by
	`face-set-after-frame-default').

	* dos-fns.el (dos-print-region-function): Force EOL conversion to
	DOS CR-LF pairs.

1997-08-10  Barry A. Warsaw  <cc-mode-help@python.org>

	* Release 5.15

	* cc-align.el (c-lineup-java-throws):
	Change the `when' clause to an `if-progn'.

	* cc-cmds.el (indent-new-comment-line): On older Emacs versions,
	add advice, to work around lack of comment-line-break-function.

	* cc-cmds.el (c-electric-slash):
	Make this work as the final slash in a */ block
	oriented comment closing token.

	* cc-cmds.el (c-comment-line-break-function): New function.

	* cc-vars.el (c-buffer-is-cc-mode): New variable.

	* cc-vars.el (c-comment-continuation-stars): New variable.

	* cc-mode.el (c-initialize-cc-mode): Set c-buffer-is-cc-mode to t.

	* cc-mode.el (c-initialize-cc-mode): Require 'cc-mode-19
	if functionp is not bound.  Check cc-mode-19 interface requirements.

	* cc-mode.el (c-mode, c++-mode, objc-mode, java-mode, idl-mode):
	Don't set comment-multi-line here.

	* cc-mode.el (c-mode): c-comment-start-regexp uses
	c-C++-comment-start-regexp to support line oriented comments.

	* cc-langs.el (c-mode-base-map, c++-mode-map):
	Move `/' as an electric character
	from c++-mode-map to c-mode-base-map for all languages.

	* cc-langs.el (c-common-init): Set comment-multi-line and
	comment-line-break-function here for all modes.
	Make comment-line-break-function buffer local iff it's boundp.

	* cc-langs.el (c-C-comment-start-regexp): Obsolete.

	(c-comment-start-regexp): Initialize from c-C++-comment-start-regexp.

	(c-populate-syntax-table, c-setup-dual-comments): Merge both functions
	into c-populate-syntax-table.  With the new 9X draft C standard, both
	line and block oriented comments are supported in all modes, so always
	set up the syntax tables to support both comment styles.

	(c-enable-//-in-c-mode): Obsolete.

	* cc-langs.el (c++-mode-syntax-table, java-mode-syntax-table)
	(objc-mode-syntax-table, idl-mode-syntax-table): Added autoload
	cookies.  c-mode-syntax-table already has one.  Use the new syntax
	table initialization idioms.

	* cc-engine.el (c-guess-basic-syntax):
	CASE 5D.4: template argument continuation
	lines are now analyzed as template-args-cont.

	* cc-styles.el (c-offsets-alist):
	Added template-args-cont syntactic symbol.

	* cc-styles.el (c-styles-alist):
	In "java" style, set c-hanging-comment-starter-p to
	nil to preserve Javadoc starter lines.

1997-08-10  Dan Nicolaescu  <done@ece.arizona.edu>

	* emulation/pc-select.el: Customized.

1997-08-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* language/japanese.el: Make coding system iso-2022-jp instead of
	declaring it as an alias of iso-2022-7bit.

1997-08-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): Add a new FLAGS
	elements SAFE.  Use it for terminal coding system if some other
	coding system is specified explicitly.
	(ignore-relative-composition): Initialize
	ignore-relative-composition.

	* international/mule-util.el(prefer-coding-system): Moved to
	mule-util.el.

	* international/mule-cmds.el (set-default-coding-systems):
	Doc-string modified.
	(prefer-coding-system): Moved from mule-util.el.  Call
	set-default-coding-systems.

	* international/mule-conf.el (iso-safe): New coding system.

	* international/mule-diag.el (print-fontset): Don't hang even if a
	fontset name doesn't confirm to XLFD.
	(describe-current-coding-system): Do not show the same coding
	system twice in the list of priority order.

	* international/encoded-kb.el (saved-input-mod): New variable.
	(encoded-kbd-mode): Doc-string fixed.  Save current-input-mode
	when turning on Encoded-kbd mode, and recover it when turning off
	Encoded-kbd mode.  Set encoded-kbd-iso2022-designations correctly.
	(encoded-kbd-self-insert-iso2022-7bit): Call charset-dimension
	instead fo charset-bytes.
	(encoded-kbd-self-insert-iso2022-8bit): Likewise.

	* language/china-util.el (setup-chinese-gb-environment): Do not
	change sendmail-coding-system and rmail-file-coding-system.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/english.el (setup-english-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

	* language/lao.el: Set t for Rao-SEMIVOWEL-SIGN-LO in
	ignore-relative-composition.

	* language/lao-util.el: Correct setting of char-code-property `name'.

1997-08-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-font-lock-keywords): Don't specially highlight
	files that are writable by others.

	* cus-face.el (custom-declare-face):
	Call make-face-x-resource-internal.

	* progmodes/awk-mode.el (awk-mode): Require cc-mode, not cc-langs.

	* wid-edit.el (widget-single-line-display-table):
	Variable commented out; don't use it either.

	* case-table.el: Delete autoload cookies (file is preloaded).

	* format.el (format-alist): Doc fix.

	* help.el (describe-key): Don't put a colon after the command name.

1997-08-09  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	When checking for bare semi, don't match
	on a semi following a close brace.

	* progmodes/cc-vars.el (idl-mode-hook): New variable.

	* progmodes/cc-vars.el (c-initialization-hook): New variable.

	* progmodes/cc-mode.el (idl-mode): Support for CORBA's IDL language.

	* progmodes/cc-mode.el (c-initialize-cc-mode): Move the calling of
	c-make-styles-buffer-local into c-initialize-builtin-style.

	* progmodes/cc-mode.el (c-initialize-cc-mode): Run the
	c-initialization-hook, but only once per Emacs session.

	* progmodes/cc-styles.el (c-styles-alist): In "java" style, set
	c-hanging-comment-starter-p to nil to preserve Javadoc starter lines.

	* progmodes/cc-styles.el (c-set-style-2):
	Fixed broken implementation of inherited styles.

	* progmodes/cc-styles.el (c-set-style):
	Call c-initialize-builtin-style.
	(c-initialize-builtin-style): Handle c-style-variables-are-local-p.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	CASE 5I: When adding 'inclass syntax, use the
	relpos pointing to the class opening brace, unless that hangs on the
	right side, in which case, use the start of the class/struct keyword.

	* progmodes/cc-langs.el (c-symbol-key):
	First character must be a letter or underscore.
	(c-styles-are-initialized): Variable deleted.
	(c-common-init): Don't initialize styles here.

	* progmodes/cc-langs.el (idl-mode-abbrev-table): New variable.
	(idl-mode-map, idl-mode-syntax-table): New variables.
	(c-idl-menu): New menu.

1997-08-09  Erik Naggum  <erik@naggum.no>

	* telnet.el (telnet-host-properties): Initialize it properly.

1997-08-09  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el: More defface work.
	* ediff-init.el: Converted to use defface instead of make-face.

1997-08-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (enable-kinsoku): Doc fix.

	* emulation/viper-init.el (viper-replace-overlay-pixmap)
	(viper-search-face-pixmap): Variables deleted.
	(viper-replace-overlay-face, viper-search-face):
	Use "gray3" explicitly.

	* help.el (help-mode): Set view-no-disable-on-exit.

	* view.el (view-just-bury): New variable.
	(view-mode-exit): Obey it.

	* emacs-lisp/shadow.el: Renamed from shadow.el.

	* simple.el (completion-setup-function): Don't set completion-base-size
	when completing in a non-minibuffer.

	* shadow.el (find-emacs-lisp-shadows): Don't mention `subdirs.el'.
	(list-load-path-shadows): When noninteractive, if there are shadows,
	start with a message explaining what this is a problem.

	* files.el (find-file-noselect):
	Clear enable-multibyte-characters if RAWFILE.
	(find-file-literally): Don't do that here.
	(find-file-literally): New variable.  Mark it with permanent-local.
	(find-file-noselect): If RAWFILE, set find-file-literally locally.
	Warn if file was already visited and RAWFILE was different.

	* startup.el (command-line-1): Don't let type-ahead inhibit the
	initial contents of *scratch*.

1997-08-08  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* format.el (format-annotate-single-property-change)
	(format-annotate-atomic-property-change): Move code that interprets
	nil as 0 inside test that property is numeric.

1997-08-08  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (cyrillic-language-alist): Fix punctuation.

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-region-as-paragraph): Don't do kinsoku
	if the region is all ASCII.

1997-08-08  Dan Nicolaescu  <done@sydney.ece.arizona.edu>

	* progmodes/hideshow.el: Correct the autoload cookies.

1997-08-07  Dan Nicolaescu  <done@ece.arizona.edu>

	* term.el (term-default-fg-color)
	(term-default-bg-color): Default to nil.

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-set-offset): Add autoload cookie.

	* term/pc-win.el (x-list-fonts): Return "default" when appropriate.
	(query-fontset): Add (alternative) alias definition.

1997-08-07  Roland McGrath  <roland@beet-chex.ai.mit.edu>

	* emacs-lisp/autoload.el (update-file-autoloads): Use anchored regexp
	search instead of requiring leading newline before
	generate-autoload-cookie, which gave false negative if sole cookie in
	file was at bob.

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/elint.el: New file.

	* language/cyril-util.el (cyrillic-language-alist): Add one language.

1997-08-07  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-util.el: Moved faces to viper-init.el
	* viper-init.el: Converted faces to use defface.
	* viper.el (viper-set-hooks): Bug fixed.

1997-08-07  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (sendmail-send-it): Bind sendmail-coding-system
	to buffer-file-coding-system if it is non-nil.

1997-08-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term/iris-ansi.el: New file.

	* calendar.el: Fix previous change.

	* files.el (insert-file-contents-literally): Doc fix.

	* international/quail.el (quail-update-leim-list-file):
	Use insert-file-contents instead of find-file-noselect
	and in the process avoid the RAWFILE feature.

	* ispell.el (ispell-dictionary-alist): Doc fix.

1997-08-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-parse-errors): Fix previous change.

	* vc.el (vc-version-diff): Change the Newer version prompt.

	* subr.el (read-quoted-char): Fix handling of meta-chars.
	(functionp): Use byte-code-function-p, not compiled-function-p.

	* faces.el (set-face-doc-string): Define once again, as alias.

	* mail/sendmail.el (mail-mode): Allow TAB after prefix
	in previous change.

	* Makefile (updates): Add missing semicolons.

	* finder.el (finder-compile-keywords): Don't process file names
	that start with `.'.

	* emacs-lisp/autoload.el (update-autoloads-from-directories):
	Don't process file names that start with `.'.

	* gud.el (gud): Fix defgroup doc.

	* compile.el (compilation-error-regexp-alist): Make the
	MIPS/DEC pattern more specific at the start; accept warnings
	as well as errors.

	* term/x-win.el (x-cut-buffer-or-selection-value): Fix previous change.

	* mail/sendmail.el (mail-mode): Fix previous change.
	Treat a supercite prefix not followed by text
	as a paragraph separator.

	* term/lk201.el: Undo previous change.

	* simple.el (comment-line-break-function): New variable.
	(do-auto-fill): Use that variable.

	* files.el (cd-absolute): Add missing arg to `error'.

	* Makefile (dontcompilefiles): Delete cyril-util.el.

	* language/cyril-util.el (standard-display-cyrillic-translit):
	Set standard-display-table here, not when loading the file.
	Read argument properly with `interactive'.

	* format.el (format-annotate-atomic-property-change):
	Look thru all elements of PROP-ALIST for a number,
	if OLD and NEW are numbers.

	* international/mule.el: Doc fixes.

1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp): Use insert-and-inherit for new stamp.

1997-08-04  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (cyrillic-language-alist): New variable.
	(standard-display-cyrillic-translit): Add autoload cookie.

1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* select.el (x-get-selection): Change default for data-type
	back to `STRING'.

1997-08-04  Espen Skoglund  <espensk@odslab5.cs.uit.no>

	* pascal.el (pascal-mode-syntax-table): _ is now a symbol constituent.
	(pascal-indent-case): Removed unnecessary calls to marker-position.
	(pascal-indent-declaration): Editing a parameterlist at the end of
	a buffer does not hang.  Removed unnecessary call to marker-position.
	(pascal-get-lineup-indent): Removed unused variable.
	Indent parameterlist correctly.
	(pascal-completion-response): Removed unused variable.

1997-08-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* files.el (basic-save-buffer-1): Add missing argument for error.

	* isearch.el (isearch-quote-char): Fix handling of control
	characters, copied from quoted-insert.

	* emacs-lisp/pp.el (pp-to-string): Use
	emacs-lisp-mode-syntax-table.

	* international/quail.el (quail-update-leim-list-file): Go to the
	beginning of the package file, in case it was already visited.

1997-08-04  Kenichi Handa  <handa@etl.go.jp>

	* language/english.el (setup-english-environment): Call
	set-default-coding-systems.

	* language/china-util.el (setup-chinese-gb-environment): Do not
	call set-terminal-coding-system and set-keyboard-coding-system,
	instead call set-default-coding-systems.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* international/mule-cmds.el (set-default-coding-systems): New
	function.

	* international/mule.el (default-terminal-coding-system): New var.
	(set-terminal-coding-system):
	Use default-terminal-coding-system as default.
	(default-keyboard-coding-system): New variable.
	(set-keyboard-coding-system):
	Use default-keyboard-coding-system as default.

1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* delsel.el (delete-selection-mode): Delete the :initialize keyword.
	Don't explicitly check the value and call delete-selection-mode.
	Don't put on a custom-loads property.

	* emacs-lisp/autoload.el (make-autoload): For a defcustom,
	generate custom-add-to-group and custom-add-load if needed.

	* progmodes/cpp.el (cpp-create-bg-face): Don't really make a face.
	Just make (background-color . COLOR).
	(cpp-highlight-buffer): Don't die if buffer-invisibility-spec is t.
	(cpp-face-default-list): Doc fix, fix custom type.
	(cpp-edit-reset): Add a close-quote after the file name.

	* isearch.el (isearch-other-meta-char): Don't switch windows to exit
	if that would switch to an inactive minibuffer.

	* progmodes/meta-mode.el: Moved from textmodes/meta-mode.el.

	* vc.el (vc-version-diff): Use defaults, not initial input,
	for reading the arguments.

	* faces.el (internal-face-interactive): Handle default in usual way,
	Provide completion for color reading.
	(set-face-foreground, set-face-background): Specify `color'
	when reading the color name interactively.

1997-08-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (describe-function): Use " is " instead of colon.

	* uniquify.el (delay-uniquify-rationalize-file-buffer-names):
	Don't delete this function from kill-buffer-hook, if it is disabled.

	* textmodes/fill.el (fill-context-prefix): Accept a whitespace
	prefix from the second line, regardless of the first line.

	* shell.el (shell): Doc fix.

	* faces.el: Alternative colors for standard faces if dark background.

	* hexl.el (hexlify-buffer, dehexlify-buffer):
	Pay attention to buffer-file-type.
	(hexl-save-buffer): Don't bind buffer-file-type around save-buffer.

	* term/x-win.el (x-cut-buffer-or-selection-value): Try both
	COMPOUND_TEXT and STRING as types for the selection.

	* simple.el (shell-command-on-region, shell-command): Doc fixes.
	(do-auto-fill): Don't break the line right after a comment starter.

	* emacs-lisp/copyright.el (copyright-regexp): Recognize the Latin-1
	copyright symbol.  Also @copyright{}.

	* mail/rmailsum.el (rmail-summary-mouse-goto-message): New function.
	(rmail-summary-mode-map): Bind it to Mouse-2.

	* files.el (insert-file-contents-literally):
	Bind coding-system-for-read and coding-system-for-write,
	and bind jka-compr-compression-info-list instead of
	file-name-handler-alist.
	(find-file-literally): Simplify and use insert-file-contents-literally.

1997-08-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-menu-map): Replace entries for "Check In" and
	"Check Out" with new entry "Check In/Out" (calling
	vc-next-action).

1997-08-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-value-create): Take account
	of changes in the frame made outside of customize.

1997-08-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (face-attr-match-p): New function.
	(face-attr-match-1, face-spec-match-p, face-attr-construct): Likewise.
	(face-spec-choose): New function.
	(face-spec-set): Use face-spec-choose.

1997-08-03  Kenichi Handa  <handa@etl.go.jp>

	* term/x-win.el: Fix previous change.

	* international/quail.el (quail-next-translation): Call
	quail-execute-non-quail-command when no current translations.
	(quail-prev-translation): Likewise.
	(quail-next-translation-block): Likewise.
	(quail-prev-translation-block): Likewise.

	* language/china-util.el (setup-chinese-gb-environment): Set
	default value of default-input-method.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.  Correct input method
	name.

	* language/ethio-util.el (setup-ethiopic-environment): Bind
	correct commands in global-map, rmail-mode-map, and mail-mode-map.

	* language/ethiopic.el (ccl-encode-ethio-font): Fix typo in
	doc-string.  Set default value of default-input-method.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

1997-08-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el: Doc fixes; fix error message text.

	* timezone.el (timezone-parse-date): Handle additional style (9).

	* term.el (term-ignore-error): Fix foolish errors.

	* strokes.el (strokes): New file.

	* international/mule-diag.el (describe-current-coding-system):
	Clean up output format.

1997-08-02  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (toggle-viper-mode): New function.
	* viper-mouse.el (viper-mouse-search-key, viper-mouse-insert-key):
	New variables.
	(viper-bind-mouse-search-key, viper-bind-mouse-insert-key)
	(viper-unbind-mouse-search-key, viper-unbind-mouse-insert-key):
	New functions.
	* viper*.el: vip-style names changed to viper-style names.

1997-08-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Recognize foo> prefix
	even without leading space.

	* hexl.el (hexl-find-file): Use find-file-literally.
	(hexlify-buffer): Bind coding-system-for-write.
	(dehexlify-buffer): Bind coding-system-for-read.

	* isearch.el (isearch-hide-immediately): Doc fix.

1997-08-01  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (standard-display-cyrillic-translit):
	New function.

1997-07-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line): Pass t for AUTO arg to
	standard-display-european.

	* disp-table.el (standard-display-european): New arg AUTO.
	Normally, set enable-multibyte-characters to nil.

1997-07-31  Geoff Voelker  <voelker@cs.washington.edu>

	* term/w32-win.el: Set mode-line-frame-identification
	to remove frame name from mode-line instead of
	mode-line-buffer-identification.

1997-07-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el (diary-face, calendar-today-face, holiday-face):
	Use defface to define them.

	* term/lk201.el (function-key-map): Map to ASCII DEL, not to delete.

	* emacs-lisp/lisp-mode.el (eval-last-sexp): Ignore `...' around sexp.

1997-07-31  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-util.el (prefer-coding-system): Change also
	default value of buffer-file-coding-system.

1997-07-31  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (set-face-font-auto): Create a fontset if FONT is a
	fontset not instantiated fontset.

	* international/fontset.el (fontset-name-p): New function.
	(uninstanciated-fontset-alist): New variable.
	(create-fontset-from-fontset-spec): Delete arg STYLE.  Register
	style-variants of FONTSET in uninstanciated-fontset-alist.
	(create-fontset-from-x-resource): Call
	create-fontset-from-fontset-spec correctly.

	* international/mule-util.el (reference-point-alist): Doc-string
	modified.

	* term/x-win.el: Do not create style-variants of fontset.  They
	are just registered in uninstanciated-fontset-alist.

1997-07-31  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff*.el (ediff-eval-in-buffer): Changed macro and renamed
	ediff-with-current-buffer.
	Eliminated inefficient calls to `intern'.
	* ediff-diff.el (ediff-exec-process): Changed to work with buffers
	whose names have spaces.
	(ediff-wordify): Use buffer-substring-no-properties.

1997-07-30  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-checkout-model): For CVS, look at
	permissions to see if a file is "watched".

	* vc.el (vc-backend-checkin): For CVS, forget the checkout model
	after commit.
	(vc-backend-checkout): Use "cvs edit" for files with manual checkout.
	(vc-minor-part, vc-previous-version): New functions.
	(vc-diff): Don't ask or guess version numbers.
	(vc-version-diff): Suggest default versions based on the file state.

1997-07-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* uniquify.el (uniquify-buffer-name-style): Fix typo.

	* info.el (info-node, info-xref, info-menu-5):
	Define faces with defface.
	(Info-mode): Don't define faces here, and don't alter Info-fontify.
	Locally set line-move-ignore-invisible.
	(Info-fontify-node): Test type of frame here.

1997-07-30  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* mspools.el (mspools-using-vm): Better handling of VM initialization.
	(mspools-size-folder): Allow symbolic links to spool files.

1997-07-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (hook): Support hooks whose value is just a symbol.
	(custom-magic-value-create): Support `mismatch' form.
	(custom-variable-value-create): Ditto.
	(custom-variable-set): Ditto.
	(custom-variable-save): Ditto.
	(custom-variable-menu): Ditto.
	(custom-load-symbol): Check that `preloaded-file-list' is bound.
	(custom-group-value-create): Comment out `indent'.

1997-07-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el (mode-line-mule-info): Delete the conditional
	on enable-multibyte-characters.

	* international/mule-cmds.el (mule-menu-keymap): Fix menu item names.

1997-07-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (adaptive-fill-first-line-regexp): Fix regexp.

1997-07-29  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el: Don't add indicator " Font" to minor-mode-alist entry.

1997-07-29  Oscar Figueiredo  <Oscar.Figueiredo@di.epfl.ch>

	* ph.el: Many doc strings and messages changed.

1997-07-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/rmail.el (rmail-resend): Use user-mail-address.

	* bindings.el (debug-ignored-errors): Delete ^Quit$ element.

1997-07-28  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* progmodes/make-mode.el (makefile-space-face): Add defface.
	(makefile-define-space-face): Function deleted.
	(makefile-mode): Don't call makefile-define-space-font.

1997-07-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-save-variable): New command.

	* wid-edit.el (widget-move): Use `previous-overlay-change' and
	`next-overlay-change'.
	(widget-use-overlay-change): New option to control it.

	* cus-edit.el (custom-save-all): Inhibit read only.

	* wid-edit.el (regexp): Outcomment :value-face.
	(file): Ditto.

	* wid-edit.el (widget-add-change): Use local hooks.
	(widget-before-change): Ditto.

	* wid-edit.el (set-text-properties): Don't define.
	(widget-specify-none): Delete.
	(widget-specify-text): Delete.
	(widget-field-use-before-change): Don't enable for XEmacs.
	(widget-specify-field): Don't use text properties.
	(widget-specify-field): Ditto.
	(widget-specify-doc): Ditto.
	(widget-specify-insert): Ditto.
	(widget-insert): Ditto.
	(widget-convert-text): Ditto.
	(widget-leave-text): Ditto.
	(widget-setup): Ditto.
	(widget-before-change): Ditto.
	(widget-default-create): Ditto.
	(widget-default-delete): Ditto.
	(widget-editable-list-insert-before): Ditto.
	(widget-editable-list-entry-create): Ditto.
	(widget-add-change): New function.

	* cus-edit.el (custom-file): Use same logic as startup.el.

	* wid-edit.el (widget-field-use-before-change): Doc fix.

	* cus-edit.el (custom-group-members): New function.
	(custom-group-value-create): Use it rather than get.

	* wid-edit.el (emacs-library-link): New widget.
	(widget-emacs-library-link-action): New function.

	* wid-edit.el (widget-beginning-of-line): Preserve zmacs region.
	(widget-end-of-line): Ditto.

	* wid-edit.el (widget-color-sample-face-get): Kludge to make it
	work before widget is fully created.
	(widget-color-action): Try to use same relative position of point
	in minibuffer as it had in the field.

	* cus-edit.el (custom-mode): Document `M-TAB'.

1997-07-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-util.el (prefer-coding-system): Fix doc, prompt.

1997-07-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/autoload.el (update-autoloads-from-directories):
	Always update loaddefs.el in the source-directory.

	* progmodes/make-mode.el: Doc fixes.

	* compile.el (compile-command): More doc fix.

1997-07-24  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* progmodes/make-mode.el, progmodes/cpp.el: Customized.
	* facemenu.el: Customized.

1997-07-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/mail-extr.el (mail-extr-voodoo): Handle unmatched quotes
	in the comment-deletion loop.

	* jka-compr.el (jka-compr-added-to-file-coding-system-alist): New var.
	(jka-compr-insert-file-contents): Set coding-system-for-read
	according to file name after removing compression suffix.
	(jka-compr-install): Add elements to file-coding-system-alist.
	(jka-compr-uninstall): Remove elements from file-coding-system-alist.

	* international/mule-conf.el (file-coding-system-alist):
	Use no-conversion for tar files.

	* subr.el (read-quoted-char): Consistently downcase letter "digits".

	* mail/sendmail.el (mail-mode): Make adaptive-fill-regexp
	match more values.  Bind adaptive-fill-first-line-regexp too.

1997-07-26  Eric S. Raymond  <esr@snark.thyrsus.com>

	* telnet.el (telnet): Handle multiple telnet programs better.
	(telnet-host-properties): New variable.

1997-07-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/awk-mode.el (awk-mode): Call c-initialize-cc-mode.

1997-07-25  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* replace.el (occur): Local variable line-start redundant.
	`occur-marker' extends to the end of the line rather than one char
	before end.

1997-07-25  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-update-leim-list-file): Call
	find-file-noselect with t for arguments NOWARN and RAWFILE.

	* international/mule-cmds.el (leim-list-entry-regexp): Make this
	match only at beginning of line.

1997-07-25  Erik Naggum  <erik@naggum.no>

	* compile.el (compile-command): Doc fix.

1997-07-25  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* rmail.el (rmail-pop-password-error): New variable.
	(rmail-insert-inbox-text): If there's an error getting mail from
	the POP server, and the error matches rmail-pop-password-error or
	we prompted for the POP password, assume that the password is
	incorrect and erase it so that the user will be prompted again the
	next time he gets mail.

1997-07-25  Simon Marshall  <simon@frobnitz.gnu.ai.mit.edu>

	* complete.el: Customize; as subgroup of minibuffer.
	(partial-completion-mode): New option to toggle mode.
	(partial-completion-mode): New command to toggle mode.
	Add and remove hooks here, i.e., not at the top-level.
	(PC-bindings): New function to install/restore minibuffer bindings.
	This is called by partial-completion-mode, i.e., not at the top-level.
	(PC-temp-minibuffer-message): Use unread-command-events, as
	unread-command-char is obsolete.

	* font-lock.el: Add new C++ type specifiers.

	* lazy-lock.el (lazy-lock-fontify-after-idle): Wrap
	minibuffer-auto-raise to prevent stealth messages raising the frame.

1997-07-25  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (read-input-method-name): Show more
	appropriate error message.

1997-07-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el: Typo in comment fixed.

	* language/thai-util.el (setup-thai-environment): Add correct
	autoload cookie.

	* language/tibet-util.el (setup-tibetan-environment): Correct
	coding system names.  Set default-input-method to "tibetan-wylie".

	* language/viet-util.el (setup-vietnamese-environment): Add
	autoload cookie.

1997-07-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/metamail.el (metamail-region): Don't bind kanji-fileio-code
	or file-coding-system.  Don't call define-program-kanji-code
	or define-program-coding-system.  Instead, bind coding-system-for-read.

1997-07-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/metamail.el (
	* Makefile (ETAGS): New variable.
	(TAGS): Use ${ETAGS}.

	* emacs-lisp/bytecomp.el (byte-compile-output-docform):
	Bind print-gensym-alist; bind print-gensym to a cons cell.

	* winner.el (custom-print-functions): Add defvar.

1997-07-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (viper-non-vi-major-modes): New variable.
	(vip-set-hooks): Changed so it'll update viper-non-vi-major-modes.
	(viper-mode): Now checks viper-non-vi-major-modes.

1997-07-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el: Doc fixes.

	* mail/sendmail.el (mail): Improve confirmation questions
	for file-visiting mail buffers.

	* simple.el (line-move): If intangibility moves us to a different line,
	adjust the hpos nicely in that line.

	* ediff-util.el (ediff-update-diffs): Change error message.

	* play/landmark.el (landmark-repeat, landmark): New aliases.
	Add autoload cookies.

	* play/handwrite.el: Many doc fixes.
	(handwrite): Add autoload cookie.
	(menu-bar-handwrite-map): Comment out the code to put this
	in the menu bar.

	* cus-face.el (custom-declare-face): Use [set-]face-documentation.

	* faces.el (face-documentation): Renamed from face-doc-string.
	(set-face-documentation): Renamed from set-face-doc-string.
	(face-doc-string): Make this an alias.

	* term/bg-mouse.el (bg-yank-or-pop): Changed eql to eq.

	* international/mule-cmds.el (read-input-method-name): Fix error msg.

	* terminal.el (te-newline): Change eql to eq.
	(te-insert-lines, te-delete-lines, te-process-output): Likewise.
	(te-parse-program-and-args, te-get-char): Likewise.

	* textmodes/tex-mode.el (tex-categorize-whitespace): Use eq, not eql.

	* bindings.el: Don't create C-x r and C-x n submaps here.

1997-07-23  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* rmail.el (rmail-mime-feature): Doc and custom fix.

1997-07-24  Dan Nicolaescu  <done@ece.arizona.edu>

	* bindings.el (debug-ignored-errors): Update the dabbrev.el errors.
	Add errors generated by ediff*.el.

1997-07-24  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* apropos.el, ange-ftp.el: Customized.

1997-07-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el (calendar-day-name): New optional args WIDTH, ABSOLUTE.
	(calendar-month-name): New optional arg WIDTH.
	(generate-calendar-month, calendar-date-string): Pass new args
	instead of using substring here.

	* emacs-lisp/bytecomp.el (eql): byte-defop-compiler definition deleted.

	* mail/mh-e.el: Change eql calls to = or equal.

	* mail/mh-utils.el: Change eql calls to eq.

	* compile.el (compilation-error-regexp-alist): Add elt for EPC F90.

	* diary-lib.el (diary-entry-time): Downcase the am/pm letter.

	* faces.el (set-face-font-explicit): Call internal-set-face-1 properly.

1997-07-23  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el (iswitchb-get-bufname): Only add buffer of current
	window  if it is not already in list.

1997-07-23  Ulrik Vieth  <vieth@thphy.uni-duesseldorf.de>

	* textmodes/meta-mode.el (metafont-mode): Add autoload cookie.
	(metapost-mode): Add autoload cookie.

	* files.el (auto-mode-alist): Add ".mf" and ".mp" for meta-mode.el.
	Add ".clo" for latex-mode.

1997-07-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ph.el: Various error messages fixed.
	(ph-cadr, ph-cadr): New functions.
	All calls to cdar and cadr changed.

	* ph.el: New file.

	* international/mule.el (modify-coding-system-alist): Doc fix.

1997-07-22  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el (find-buffer-file-type-coding-system)
	(find-buffer-process-coding-system): Remove second argument.

1997-07-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (dircategory): Delete obsolete mistaken `put'.
	(texinfo-end-direntry): Output extra newline.
	(texinfo-format-dircategory): Parse the arg and reinsert it by hand.

1997-07-22  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el: Further twiddling with require viper-init.

1997-07-21  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-call-process): Fix previous change.
	(jka-compr-write-region): Likewise.
	(jka-compr-insert-file-contents): Likewise.
	(jka-compr-file-local-copy): Bind coding-system-for-read and
	coding-system-for-write.

1997-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (texinfo-end-direntry): Output two newlines.

	* simple.el (yank, yank-pop): Bind inhibit-read-only
	just for remove-text-properties, not for insertion.

	* subr.el (read-quoted-char): Convert function keys like Return
	into ASCII equivalents.

	* mail/mh-utils.el (mh-make-folder-list-background):
	Don't call mh-find-path if we were called from there.
	(mh-find-path): Move mh-make-folder-list-background call to the end.

	* language/cyril-util.el (setup-cyrillic-environment): Fix paren error.

	* viper.el: Require viper-init.

1997-07-21  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* enriched.el (fixed, excerpt): Define with defface.  No longer
	queries X server to find a "fixed" font; that was too slow and
	didn't work for everyone.

1997-07-21  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* compile.el (compilation-mode-font-lock-keywords): Ensure that each
	regexp generated from compilation-error-regexp-alist begins with "^".

1997-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-context-prefix): Be stricter about
	whether first-line prefix is compatible with second-line prefix.

	* files.el (find-file-literally): Temporarily remove tar-mode and
	archive-mode from auto-mode-alist.

	* frame.el (frame-initialize): Don't alter vertical-scroll-bars
	parameter here.

	* scroll-bar.el (scroll-bar-mode-explicit): New variable.
	(set-scroll-bar-mode): Don't alter default-frame-alist
	when just loading this file.

	* mail/mh-utils.el (mh-find-path): Handle mh-auto-folder-collect here,
	not when this file is loaded.

1997-07-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-indent-citation): Undo previous change.
	Instead, convert region-end to a marker before the loop.
	(mail-yank-original, mail-yank-region): Undo previous change.

	* custom.el (custom-declare-variable-list): Process already-declared
	custom variables from this list.

	* cus-start.el (debug-on-quit): Define like debug-on-error.

	* dired-x.el (dired-omit-new-add-entry): Take new arg RELATIVE
	and pass it to dired-omit-old-add-entry (which is dired-add-entry).

	* jka-compr.el (jka-compr-insert-file-contents):
	Bind coding-system-for-read.
	(jka-compr-write-region): Bind coding-system-for-write.
	Set buffer-file-type if dos or nt.
	(jka-compr-call-process): Bind coding-system-for-read
	and coding-system-for-write.

1997-07-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* shell.el (shell-mode): Do set list-files-directory locally.

	* uniquify.el (uniquify-buffer-file-name): Minor change.

1997-07-19  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el (find-buffer-file-type-coding-system):
	Use undecided-dos for dos-text file names.
	Use undecided for non-existing untranslated file names.

	* international/mule.el (modify-coding-system-alist): Added.
	international/mule-util.el (modify-coding-system-alist): Removed.

	* loadup.el [windows-nt, ms-dos]: Undo loading
	of international/mule-utils.

1997-07-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Set adaptive-fill-regexp specially
	to cater to supercite.
	(mail): Ask a different question, if buffer is visiting a file.

	* faces.el (internal-facep): Length is now 10.
	(make-face, x-create-frame-with-faces): Make a face 10 elements long.
	(internal-set-face-1): Don't call set-face-attribute-internal
	if NAME is nil.
	(set-face-font): Set the auto-flag to t or nil.
	(face-spec-set): Clear out the font at the start,
	if it was set automatically before.
	(face-font-explicit): New function.
	(set-face-font-auto): New function.
	(set-face-font-explicit): New function.
	(copy-face): Copy the face-font-external flag.
	(internal-try-face-font): Use set-face-font-auto.

	* files.el (auto-mode-alist): Recognize .emacs in MSDOG syntax.

1997-07-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-w32.el (find-buffer-file-type-coding-system):
	Use emacs-mule-dos for text file names; use undecided-dos
	for the last resort (instead of emacs-mule-dos).

	* vc.el (vc-diff): Turn off previous change.

	* cus-edit.el (custom-group-value-create) <tree>: Don't distinguish
	unloaded groups; use [+] for them.
	(customize-browse): Fix top-of-buffer doc text.

	* mail/sendmail.el (mail-indent-citation): Take region args.
	(mail-yank-original, mail-yank-region): Pass the args.

1997-07-18  Dan Nicolaescu  <done@sydney.ece.arizona.edu>

	* progmodes/hideshow.el (hs-special-modes-alist): Use a regexp
	generated by regexp-opt.
	(hs-life-goes-on): Nullify inhibit-point-motion-hooks as we have
	to move inside intangible overlays.  Enable edebug.

	* isearch.el (search-invisible): Fix typo.
	(isearch-search): Bind inhibit-point-motion-hooks because we might
	have to search inside invisible and intangible text.
	(isearch-open-overlay-temporary): Delete forgotten debug message.
	(isearch-range-invisible): Fix typo in doc-string.

1997-07-18  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* replace.el (occur): Use text property `occur' to store the
	marker for the occurrence in the source buffer.  This replaces the
	list `occur-pos-list', and fixes the bug for multi-line matches.
	Set up `occur-point' text property for occur-next and occur-prev.
	(occur): occur-num-matches stores the number of matches found.
	(occur-mode-find-occurrence): Use `occur' text property to find
	marker for locus of the occurrence.
	(occur-next, occur-prev): New commands.
	(occur): Fixed bug preventing line number being displayed if line
	number is less than the number of lines of context.

1997-07-18  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-find-cvs-master): Corrected parsing of
	CVS/Entries, according to CVS docs.
	(vc-toggle-read-only): Also work in vc-dired buffers.

	* vc.el (vc-diff): If file is unchanged, ask for the version
	number to compare with.
	(vc-retrieve-snapshot): If no NAME is specified, check out
	latest versions of all unlocked files.
	(vc-next-action-on-file): For CVS files with implicit checkout: if
	unmodified, don't do anything.
	(vc-clear-headers): Regexp more restricted, so as not to destroy file
	contents by mistake.
	(vc-backend-merge-news): Better analysis of status reported by CVS.
	Set file properties accordingly.

1997-07-17  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper*.el: Adapted to use custom.el
	* ediff*.el: Improved customization.
	* ediff-ptch.el (ediff-default-backup-extension): New variable.
	(ediff-backup-extension, ediff-backup-specs): Change in initialization.

1997-07-17  Geoff Voelker  <voelker@cs.washington.edu>

	* loadup.el [windows-nt, ms-dos]: Load international/mule-utils.

	* dos-w32.el (find-buffer-file-type-coding-system)
	(find-binary-process-coding-system, find-buffer-file-type-match):
	New functions.
	(find-buffer-file-type): Use find-buffer-file-type-match.
	Add find-buffer-file-type-coding-system to file-coding-system-alist
	as the default entry.
	Add find-binary-process-coding-system to process-coding-system-alist
	as the default entry.

1997-07-17  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* subr.el (functionp): Doc fix.

1997-07-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-copy-tree): Function deleted.

	* textmodes/texinfmt.el (texinfo-no-refill-regexp): Add "direntry".
	(texinfo-format-direntry, texinfo-end-direntry): New functions.
	(texinfo-format-dircategory): New function.

	* delsel.el (delete-selection-mode): Add custom-loads property.

	* subr.el (custom-declare-variable-early): New function.
	(custom-declare-variable-list): New variable.
	(read-quoted-char-radix): Use defvar and custom-declare-variable-early.

	* paren.el (show-paren-match-face): Use gray on all non-color screens.

1997-07-17  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-initialize-cc-mode): New function.
	(c-mode, c++-mode, objc-mode, java-mode): Call it.

	* progmodes/cc-langs.el (c-symbol-key):
	First character must be a letter or underscore.

	* progmodes/cc-langs.el (c-make-inherited-keymap): Change to a defun.

	* progmodes/cc-langs.el: Require 'cc-defs for the definition of
	c-emacs-features.

	* progmodes/cc-langs.el (c-mode-menu): Added uncomment region and
	slight rearrangement of items.

	* progmodes/cc-cmds.el: Require cc-defs for the c-add-syntax macro.

	* progmodes/cc-cmds.el (c-electric-backspace): Must get 'supercede
	property values to work with delsel and pending-del.

	* progmodes/cc-cmds.el (c-electric-brace): Fix ebola eradication
	consequence in the preserve-p test.

	* progmodes/cc-engine.el (c-maybe-labelp): Add defvar.

	* progmodes/cc-styles.el (c-initialize-builtin-style): Use
	copy-sequence instead of c-copy-tree.

	* progmodes/cc-defs.el (c-load-all): Function deleted.

1997-07-17  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* dired-x.el (dired-omit-files): Add ".#foo" lock files to omissions.

1997-07-17  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/titdic-cnv.el (batch-titdic-convert): Add optional
	arg FORCE.

1997-07-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (read-quoted-char): Handle non-character events.

	* mail/emacsbug.el: Improve text of messages.

	* simple.el (quoted-insert): Doc fix.

	* subr.el (read-quoted-char): Use RET, not SPC, as special terminator.
	Use read-quoted-char-radix as radix for numbers.
	(read-quoted-char-radix): New variable.

1997-07-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-find-file): Better error message
	for symlink to nonexistent target.

	* simple.el (quoted-insert): Doc fix.

	* subr.el (read-quoted-char): Read any number of octal digits,
	and ignore a space if that terminates the octal digits.

1997-07-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (texinfo-format-buffer-1): Insert, here,
	the info about what file this is and what it was made from,
	just before returning.
	(texinfo-format-setfilename): Generate no output.

	* apropos.el (apropos-print): Use customize-group-other-window,
	not customize-other-window.

	* mail/mail-extr.el (mail-extr-voodoo): Get rid of comments at an
	early stage.

	* files.el (set-auto-mode): If -*- line specifies a mode,
	then even if we don't use it because of just-from-file-name,
	still let it prevent taking the mode from a file name.

	* simple.el (yank, yank-pop): Clear out read-only prop.

	* mail/sendmail.el (mail-mode-auto-fill): Use insert-before-markers.

	* cus-edit.el (custom-unlispify-remove-prefixes): New variable.
	(custom-unlispify-menu-entry): Obey custom-unlispify-remove-prefixes.

	* progmodes/cc-styles.el (c-copy-tree): Fix bugs.

	* international/mule-cmds.el (global-map): Turn off the S-SPC binding.

1997-07-15  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (tit-process-body): Ignore vacant
	entries.

	* international/quail.el (quail-translate-key): Fix previous change.

	* international/mule.el (make-coding-system): Distinguish
	coding-category-iso-7-else and coding-category-iso-8-else.

	* international/mule-conf.el (coding-category-emacs-mule): Replace
	coding-category-iso-else with coding-category-iso-7-else and
	coding-category-iso-8-else.

	* international/mule-diag.el (describe-current-coding-system): Use
	coding-category-iso-7-else instead of coding-category-iso-else.

	* language/china-util.el (setup-chinese-gb-environment): Adjusted
	for the change of coding category names.  Set default-input-method
	to chinese-py-punct.
	(setup-chinese-big5-environment): Set default-input-method to
	chinese-py-punct-b5.
	(setup-chinese-cns-environment): Set default-input-method
	correctly.

	* language/english.el (setup-english-environment): Adjusted for
	the change of coding category names.

	* language/japan-util.el (setup-japanese-environment): Adjusted
	for the change of coding category names.  Set default-input-method
	correctly.

	* language/ethio-util.el (setup-ethiopic-environment): Set
	default-input-method correctly.

	* language/korean.el (setup-korean-environment): Set
	default-input-method correctly.

	* language/tibet-util.el (setup-tibetan-environment: Set
	default-input-method correctly.

	* international/mule-diag.el (list-coding-systems): Fix previous
	change.

	* mail/sendmail.el (mail-setup): Kill the local binding of
	enable-multibyte-characters.  Turn off an input method.

	* mail/emacsbug.el (report-emacs-bug-run-tersely): New variable.
	(report-emacs-bug): Insert warnings for novice users in *mail* buffer.
	Set enable-multibyte-characters to nil.
	(report-emacs-bug-hook): Check non-English letters.
	Confirm about sending a report to FSF.

	* international/mule-cmds.el (mule-keymap): Bind l to
	set-language-environment.
	(set-language-environment): Remove autoload cookie.  Accept null
	input for resetting to default.
	(select-input-method): Error if enable-multibyte-characters is nil.
	(toggle-input-method): Likewise.
	(global-map): Turn of the S-SPC binding.

1997-07-15  Simon Marshall  <simon@albert.gnu.ai.mit.edu>

	* mouse-sel.el: Customize; create mouse-sel as subgroup of mouse.
	(mouse-sel-mode): New option to toggle mode.
	(mouse-sel-mode): New command to toggle mode.
	(mouse-sel-set-selection-function): If mouse-sel-default-bindings is
	interprogram-cut-paste, default to x-set-selection as before.  Doc fix.
	(mouse-sel-bindings): New function to install/restore mouse bindings.
	This is called by mouse-sel-mode, i.e., not at the top-level.

	* delsel.el: Customize; as part of editing-basics group.
	(delete-selection-mode): Convert to autoloaded option.  Default to nil.
	(delete-selection-mode): Define before option.
	Modify pre-command-hook here, i.e., not at the top-level.
	If enabling Delete Selection mode, also enable Transient Mark mode.

1997-07-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texnfo-upd.el (texinfo-all-menus-update)
	(texinfo-master-menu, texinfo-multiple-files-update):
	Search for texinfo-master-menu-header as a string, not a regexp.
	(texinfo-master-menu-header): Move defvar earlier.

	* isearch.el (isearch-char-to-string): Use char-to-string.
	(isearch-quote-char): Add nonascii-insert-offset.

	* files.el (basic-save-buffer-1): Clarify error message.
	(cd-absolute): Likewise.

1997-07-13  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el: All user variables now converted to custom.
	(iswitchb): New variable for use by the custom package.
	(iswitchb-default-buffer): Variable deleted.
	(iswitchb-define-mode-map): Addition of keybindings
	for iswitchb-kill-buffer and iswitchb-find-file.
	(iswitchb): When no text typed in, show all buffers.
	(iswitchb-complete): Use equal rather than eq.
	(iswitchb-next-match, iswitchb-prev-match): Use
	iswitchb-chop to handle reordering the buffer list.
	(iswitchb-chop): New function.
	(iswitchb-make-buflist): Rewritten for efficiency.
	(iswitchb-to-end): Operate on a list of buffers, not just one.
	(iswitchb-set-matches): Always return list
	of matching buffers, even in absence of user input.
	(iswitchb-kill-buffer): New function.
	(iswitchb-default-keybindings): Use read-kbd-macro for keys to define.
	(iswitchb-exhibit): Always return list of matching buffers.
	(iswitchb-show-default-buffer): Function deleted.

1997-07-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-langs.el: Require cc-defs.

	* progmodes/awk-mode.el (awk-mode): Require cc-langs, not cc-mode.

	* progmodes/cc-langs.el (c-make-inherited-keymap): Add autoload cookie.

	* tmm.el (tmm-prompt): Use save-excursion around completing-read code.
	(tmm-add-prompt): Clean up using save-selected-window
	and with-current-buffer.

1997-07-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-bg-mode): New function.
	(msdos-face-setup, make-msdos-frame): Set background-mode and
	display-type properties for created frames.

1997-07-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (forward-visible-line): Correctly handle arg 0
	so that it doesn't mess up handling of nonzero args.

1997-07-10  Rob Riepel  <riepel@Stanford.EDU>

	* emulations/tpu-edt.el (tpu-set-mode-line) Added
	mode-line-mule-info and mode-line-frame-identification.

1997-07-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/edebug.el (condition-case): Fix edebug-form-spec to
	allow a handler with a list of condition names.

1997-07-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-start.el: Make it clear that the warning is a warning.

1997-07-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-copy-tree): New function.
	(c-initialize-builtin-style): Use c-copy-tree.

	* cc-align.el, cc-cmds.el, cc-compat.el, cc-defs.el, cc-engine.el:
	* cc-langs.el, cc-menus.el, cc-mode.el, cc-styles.el, cc-vars.el:
	New version of CC mode installed.
	Old files completely replaced.

1997-07-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/fontset.el (create-fontset-from-fontset-spec):
	Typo in doc-string fixed.

1997-07-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hilit19.el (hilit-submit-feedback): Change mail address.

1997-07-10  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (create-fontset-from-fontset-spec): Add
	optional arg NOERROR.
	(create-fontset-from-x-resource): Give t as arg NOERROR to
	create-fontset-from-fontset-spec.

	* term/x-win.el: Give t as arg NOERROR to
	create-fontset-from-fontset-spec.

	* bindings.el (mode-line-mule-info): Remove tailing ">" from input
	method indicator.

	* international/isearch-x.el (isearch-input-method): New variable.
	(isearch-input-method-title): New variable.
	(isearch-toggle-specified-input-method): Set the above variables.
	(isearch-toggle-input-method): Likewise.
	(isearch-process-search-multibyte-characters): Give
	isearch-input-method as arg to read-multilingual-string.

	* international/mule-cmds.el (read-multilingual-string): Adjusted
	for the previous change of variables related to input methods.

	* isearch.el (isearch-message-prefix): Likewise.

1997-07-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Make fill-paragraph-function local.

	* menu-bar.el (menu-bar-custom-menu): Add several more menu items.
	Rename some.  Delete "Update this menu".

	* cus-edit.el (customize-browse): Don't take an argument.

1997-07-09  Noah Friedman  <friedman@splode.com>

	* emacs-lisp/eldoc.el: Add `up-list' and `down-list' to
	eldoc-message-commands.

1997-07-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (print-fontset): Output format improved.
	(describe-fontset): Likewise.  Doc-string modified.
	(list-fontsets): Likewise.

	* international/encoded-kb.el (encoded-kbd-mode):
	Call coding-system-XXX instead of coding-vector-XXX.

1997-07-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Makefile (dontcompilefiles): Add cyril-util.el.

	* format.el (format-alist): Don't handle compression here.

1997-07-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (customize-browse): Improve start-of-buffer message.

	* mouse.el (mouse-undouble-last-event): Fix gross bugs:
	use modifiers, not old-modifiers.

	* cus-edit.el (custom-help-menu): Variable deleted.
	(custom-menu-reset): Function deleted.
	(Custom-menu-update): Likewise.

	* finder.el (finder-list-matches): Create *Finder Category* buffer.

	* mouse.el (mouse-show-mark): Handle switch-frame events in the loop.

1997-07-08  Dave Love  <d.love@dl.ac.uk>

	* thingatpt.el (url): Define end-op property again.  Wrap end-op
	and beginning-op lambdas with `function', not quote.

1997-07-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/bytecomp.el (char-after): Allow 0 args.

	* progmodes/cc-*.el: New files, totally reorganized.

	* dunnet.el: Undo an earlier change:
	(dun-piss): Renamed from dunnet-urinate.
	(dun-verblist): Indecent word added back.
	(dunnet): Delete "censored" message.

	* textmodes/fill.el: Doc fixes.

	* international/mule-conf.el (undecided): Use `-' in mode line.

	* bookmark.el: Make global bindings only via loaddefs.el.

	* help-macro.el (make-help-screen): Clear the prompt
	when we get a real command.

1997-07-07  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-conversion-help): Source code
	indentation changed.

	* international/skkdic-utl.el (skkdic-okuri-ari): Doc-string
	modified.
	(skkdic-postfix, skkdic-prefix, skkdic-okuri-nasi): Likewise.
	(skkdic-lookup-key): Add 4th argument PREFER-NOUN.  Arrange order
	of returning list according to this value.

	* international/kkc.el (kkc-region): Call skkdic-lookup-key with
	t for arg PREFER-NOUN while looking up key sequences shorter than
	what a user requested.
	(kkc-next-phrace): Likewise.

	* international/mule-diag.el (print-fontset): Output format tuned.
	(describe-fontset): Likewise.
	(list-fontsets): Likewise.

1997-07-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* delsel.el (delete-selection-mode): Doc fix.

	* wid-edit.el (widget-field-use-before-change): Reenable for Emacs 20.

	* files.el (find-file-literally): New function.

1997-07-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-files-menu): Use make-frame-command
	as in C-x 5 2, rather than make-frame.

	* international/mule-cmds.el (help-map):
	Bind I to describe-input-method.
	(help-map): Bind L to describe-language-environment.

	* international/mule-cmds.el
	(set-language-environment): Do the real work here.
	(current-language-environment): New variable.
	(setup-specified-language-environment): Call set-language-environment.
	Set current-language-environment.
	(describe-language-environment):
	By default, use current-language-environment.

	* help.el (help-for-help): Update help text.

	* faces.el (face-set-after-frame-default): New subroutine,
	taken from x-create-frame-with-faces.
	(x-create-frame-with-faces): Call it.
	(face-italic-p, face-bold-p): Use equal to compare fonts.
	(frame-update-faces): Function now a no-op.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (sendmail-user-agent-compose): New function;
	this has the code that was in sendmail-user-agent.
	(sendmail-user-agent): Use sendmail-user-agent-compose.

	* mail/reporter.el (reporter-compose-outgoing): Use functionp,
	not fboundp, to test validity of COMPOSE.

	* bindings.el (complete-symbol): Accept an argument.
	(debug-ignored-errors): Add ^ to "No tags table loaded".
	Make the etags.el strings correspond to latest etags.el.

	* progmodes/etags.el (next-file, tags-loop-scan): Fix error message.
	(visit-tags-table-buffer, complete-tag): Likewise.

	* language/european.el (latin-1, latin-2. latin-3, latin-4, latin-5):
	Define coding system aliases.

	* wid-edit.el (widget-choose): Using keyboard, if all choices are
	disabled, just report an error.

	* cus-edit.el (custom-load-symbol): Don't reload a preloaded file.

	* term/linux.el: New file.

1997-07-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* simple.el (forward-visible-line): Use forward-line, not
	vertical-motion, when moving backwards.

1997-07-04  Anders Lindgren  <andersl@csd.uu.se>

	* compile.el (compilation-error-regexp-alist):
	Support for IAR Systems C compiler added.

1997-07-04  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Require thingatpt when compiling.
	(browse-url-url-at-point): Use `thing-at-point' (with URL code
	moved from here).
	(browse-url-looking-at): Moved to thingatpt.el, renamed and changed.

	* thingatpt.el (thing-at-point): Use `thing-at-point' property, if any.
	(bounds-of-thing-at-point): Use `bounds-of-thing-at-point' property.
	(thing-at-point-bounds-of-url-at-point): New function.
	(thing-at-point-looking-at): New function, adapted from old
	browse-url-looking-at.
	(thing-at-point-url-at-point): New function, adapted from
	browse-url-url-at-point.
	(thing-at-point-url-chars): Variable deleted.
	(thing-at-point-url-path-regexp, thing-at-point-short-url-regexp)
	(thing-at-point-url-regexp, thing-at-point-markedup-url-regexp):
	New variables.
	(url): `beginning-op' property function changed to use
	`thing-at-point-bounds-of-url-at-point'.  `end-op' property no
	longer set -- functionality no longer supported for the more
	sophisticated treatment of URLs so `forward-thing' no longer works
	in this case.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-mode-map): Bind n and p.

	* mail/emacsbug.el (report-emacs-bug): Don't include messages
	in *Messages* generated by report-emacs-bug itself.

	* mail/mailalias.el (mail-complete-alist): Don't use backquote.

1997-07-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (menu-bar-custom-menu): Some command names were
	updated.

	* widget.el (:sample-overlay): New keyword.
	* wid-edit.el (widget-leave-text): Use it.
	(widget-specify-sample): Use it.
	(widget-default-delete): Ditto.

	* wid-edit.el (color): Make it an editable field.
	(widget-color-value-create): Deleted.
	(widget-color-value-get): Deleted.
	(widget-color-value-set): Deleted.
	(color-item): Deleted.
	(widget-color-item-button-face-get): Renamed to
	`widget-color-sample-face-get'.
	(color-sample): Delete.
	(editable-color): Delete.
	(widget-editable-color-value-create): Delete.
	* cus-face.el (custom-face-attributes): Use `color' instead of
	`editable-color'.

	* wid-edit.el (widget-specify-field): Add newline in overlay for
	nil-:sized fields.
	(widget-field-end): Ditto.

	* wid-edit.el (emacs-library-link): New widget.
	(widget-emacs-library-link-action): New function.
	(widgets): Use it.
	(file-link): New widget.
	(widget-file-link-action): New function.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Some files are in different directories.

	* emacs-lisp/lisp.el, emacs-lisp/lisp-mode.el:
	Moved from parent dir.

	* textmodes/fill.el, textmodes/page.el: Moved from parent dir.
	* textmodes/paragraphs.el, textmodes/text-mode.el: Likewise.

	* mail/sendmail.el (mail-do-fcc):
	Pass an arg to verify-visited-file-modtime.

	* textmodes/tex-mode.el (tex-common-initialization):
	Set search-whitespace-regexp locally.

	* simple.el (next-line, previous-line): Doc fixes.

1997-07-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hippie-exp.el (he-dabbrev-skip-space): Fix previous change.
	(he-dabbrev-as-symbol): Likewise.

	* find-dired.el (find-grep-dired): Use -type f.

	* language/japanese.el ("Japanese"): List iso-2022-7bit coding system
	instead of japanese-iso-7bit.

	* delsel.el (delete-selection-mode): Doc fix.

	* gnus/gnus-group.el (gnus-group-set-mode-line):
	Update how mode-line-modified is set.

	* paren.el (show-paren-idle-timer): New defvar.
	(show-paren-mode): Add :initialize attr in the defcustom.
	Test the value at end of file, and turn on the mode if true.

	* cus-face.el (custom-face-attributes): Use editable-color widget.

	* wid-edit.el (color-sample, editable-color): New widget types.

	* cus-edit.el (custom-buffer-create-internal): New arg DESCRIPTION
	is inserted in the buffer to describe it.
	(custom-buffer-create-other-window, custom-buffer-create):
	New arg DESCRIBE; pass it along.
	(customize-group): Pass DESCRIBE argument.
	(custom-face-menu): Improve Set and Save item strings.
	(custom-group-menu): Likewise.

1997-07-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom): Don't set :button-face.
	(custom-mode): Use custom-button-face here
	as buffer-local value of widget-button-face.

	* wid-edit.el (widget-button-face): Default value widget-button-face.
	(widget-default-button-face-get): Use variable widget-button-face.

	* mail/emacsbug.el (report-emacs-bug): Don't assume the exit command
	is mail-send-and-exit for all user agents.

	* autorevert.el: New file.

	* paren.el (show-paren-mode): Add a defvar before first use.

	* desktop.el (desktop-clear-preserve-buffers): New variable.
	(desktop-clear): Kill all buffers except internal ones
	and those listed in desktop-clear-preserve-buffers.

	* time.el (display-time-string-forms): Use %M, not %m.

	* compile.el (compilation-parse-errors): Skip 2 lines
	only for Compilation major mode.

	* international/mule.el (load-with-code-conversion):
	Don't run kill-buffer-hook or kill-buffer-query-functions.

1997-07-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-browse): Use glyphs in description, if
	possible.

	* wid-edit.el (widget-menu-minibuffer-flag): Default to t on
	XEmacs.

	* wid-edit.el (widget-field-value-create): Add comment explaining
	why `:field-overlay' contains two markers.

	* cus-edit.el (custom-browse-visibility)
	(custom-browse-visibility-action, custom-browse-group-tag)
	(custom-browse-group-tag-action, custom-browse-variable-tag-action)
	(custom-browse-face-tag, custom-browse-face-tag-action)
	(custom-browse-face-tag-action, custom-browse-alist): Changed
	prefix from `custom-tree' to `custom-browse'.
	(custom-variable-value-create, custom-face-value-create)
	(custom-group-value-create): Updated caller.

	* cus-edit.el (custom-browse-only-groups): New option.
	(custom-group-value-create): Use it.  Omit non-groups if non-nil.

	* cus-edit.el (custom-help-menu): Renamed "Variable" to "Option".
	Remove "..." from non-prompting entries.

	* wid-edit.el (widget-single-line-field-face): New face.
	(widget-single-line-display-table): New variable.
	(regexp, file): Use `widget-single-line-field-face'.

	* cus-edit.el (custom-unloaded-symbol-p): New function.
	(custom-unloaded-widget-p): New function.
	(custom-group-value-create): Use it.
	(customize-browse): Mention [?].

	* cus-edit.el (custom-toggle-hide): Load dependencies here.

	* wid-edit.el (functionp): New function.

1997-07-02  Kenichi Handa  <handa@etl.go.jp>

	* language/indian.el: Change category 5 to 1.

	* language/european.el (setup-8-bit-environment): New argument
	LANGUAGE.
	(setup-latin1-environment): Adjusted for the above change.
	(setup-latin2-environment): Likewise.
	(setup-latin3-environment): Likewise.
	(setup-latin4-environment): Likewise.
	(setup-latin5-environment): Likewise.

	* language/greek.el (setup-greek-environment): Likewise.

	* language/hebrew.el (setup-hebrew-environment): Likewise.

	* language/cyril-util.el (setup-cyrillic-environment): Adjusted
	for the change of an input method name.

	* language/devan-util.el (setup-devanagari-environment): Likewise.

	* language/ethio-util.el (setup-ethiopic-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/lao-util.el (setup-lao-environment): Likewise.

	* language/thai-util.el (setup-thai-environment): Likewise.

	* language/viet-util.el (setup-vietnamese-environment): Likewise.

	* language/china-util.el: Use true coding system names instead of
	aliases.  Adjusted for the change of an input method name.
	(decode-hz-region): Fix comments.
	(encode-hz-region): Fix a coding system name.

	* language/misc-lang.el: Call set-language-info-alist for IPA.
	(setup-ipa-environment): New function.

	* international/titdic-cnv.el: Add license note.
	(tit-encode-list): Fix typo (euc-kk -> euc-kr).
	(quail-cxterm-package-title-alist): New variable.
	(tit-make-quail-package-file-name): Name changed from
	tit-make-quail-package-name.
	(tit-process-header): Check quail-cxterm-package-title-alist to
	decide a package name.
	(titdic-convert): Call tit-make-quail-package-file-name.
	(batch-titdic-convert): Likewise.

	* international/skkdic-cnv.el: Coding system name changed to
	iso-2022-7bit-short.
	(skkdic-convert): Fix typo in a comment.
	(skkdic-convert): Save buffer in iso-2022-7bit-short.
	(skkdic-extract-conversion-data): Fix a bug in regular expression
	pattern.

	* international/quail.el (quail-guidance-buf): Make it buffer
	local.
	(quail-guidance-win): New variable.  Make it buffer local.
	(quail-current-translations): Doc-string modified.
	(quail-current-data): Make it buffer local.
	(quail-define-package): Update input-method-alist.
	(quail-defrule): Doc-string modified.
	(quail-defrule-internal): Document it.
	(quail-get-translation): Change the format of DEF part.
	(quail-lookup-key): Make the second argument LEN optional.  Reset
	quail-current-translations to nil.
	(quail-map-definition): New function.
	(quail-get-current-str): New function.
	(quail-guidance-translations-starting-column): New variable.
	(quail-update-current-translations): New function.
	(quail-translate-key): Adjusted for the change of DEF format.
	Call quail-update-current-translations.
	(quail-next-translation): Call quail-update-current-translations.
	(quail-prev-translation): Likewise.
	(quail-next-translation-block): Likewise.
	(quail-prev-translation-block): Likewise.
	(quail-select-translation): Deleted.
	(quail-make-guidance-frame): New function.
	(quail-show-guidance-buf): Handle the case that minibuffer is in a
	separate frame.
	(quail-hide-guidance-buf): Likewise.
	(quail-show-translations): Call
	quail-update-current-translations.  Check width of a frame to be
	used.
	(quail-completion): Do not supply LEN argument to
	quail-lookup-key.
	(quail-help): Use with-output-to-temp-buffer.
	(quail-translation-help): Likewise.
	(quail-conversion-help): Likewise.
	(quail-update-leim-list-file): Save buffer without making a backup file.

	* international/mule.el (charset-bytes, charset-dimension)
	(charset-chars, charset-width, charset-direction)
	(charset-iso-final-char, charset-iso-graphic-plane)
	(charset-reverse-charset, charset-short-name, charset-long-name)
	(charset-description, charset-plit, set-charset-plist): Document
	them.
	(make-char, charset-list): Doc-string modified.
	(find-new-buffer-file-coding-system): Fix bug of handling the
	coding system undecided.

	* international/mule-diag.el (print-list): Use macro when.
	(sort-charset-list): New function.
	(charset-other-info-func): Delete this variable.
	(list-character-sets): Handle a prefix argument.  If it is nil,
	make the output format less cryptic.
	(print-designation): Use macro when.
	(describe-current-coding-system): Likewise.
	(describe-current-coding-system): Delete unnecessary progn.
	(list-coding-systems): Handle prefix a prefix argument instead of
	checking (interactive-p).  Do not print coding categories.
	(list-coding-categories): New function.
	(print-fontset): Name changed from describe-fontset-internal.
	(describe-fontset): Make the output less cryptic.
	(list-fontsets): New function.
	(list-input-methods): Use macro when.
	(insert-section): Change a name of first argument.
	(mule-diag): Doc-string modified.  Use with-output-to-temp-buffer.
	Use insert-buffer-substring instead of insert-buffer.
	(dump-charsets): Make it callable interactively.
	(dump-codings): Likewise.

	* international/mule-conf.el: Fix typo in doc-string of charset
	indian-1-column.  Adjust for the name change of
	standard-character-unification-table-for-decode and
	standard-character-unification-table-for-encode.

	* international/characters.el: Modify docstring of char category
	1.  Change char category 5 to symbol.  Adjust category definition
	of Tibetan characters and Thai characters for this change.

1997-07-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-conf.el (binary): Define as coding system alias.

1997-07-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* desktop.el (desktop-clear): Don't kill buffers here.

	* bindings.el (mode-line-mule-info): Use `%Z' instead of `%z:'.

	* language/devanagari.el (in-is13194-devanagari):
	Define this name rather than devanagari.
	(devanagari): Make this an alias.

	* international/mule-conf.el: Swap args to define-coding-system-alias.
	* language/vietnamese.el, language/thai.el, language/korean.el:
	* language/japanese.el, language/hebrew.el, language/greek.el:
	* language/european.el, language/chinese.el, language/cyrillic.el:
	Likewise.

	* international/mule.el (define-coding-system-alias): Swap the args.

	* mouse.el (mouse-undouble-last-event): Use reverse, not nreverse.

1997-06-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bibtex.el (bibtex-kill-field, bibtex-find-text):
	Killing a field moves to the next line.

	* diary-lib.el (diary-float): Fix errors in previous change.

	* progmodes/cc-mode.el (c-Java-conditional-key): Put this in the
	right place--it was inside of a defun.
	(c-electric-brace): Eliminate junk mistakenly patched here.

	* simple.el (kill-line): Doc fix.

	* dired-aux.el (dired-do-shell-command): New arg FILE-LIST
	so that we don't recompute it after the user provides the input.

1997-06-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (forward-visible-line): Handle 0 arg correctly.

1997-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-start.el (enable-multibyte-characters): Customize.

1997-06-28  Michelangelo Grigni  <mic@mathcs.emory.edu>

	* ffap.el: XEmacs compatibility hacks cleaned up.
	(ffap-url-fetcher): If `browse-url' is bound, use that.
	(ffap-locate-file): New optional arg dir-ok.
	(ffap-at-mouse): Fix return value.

1997-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* window.el (shrink-window-if-larger-than-buffer):
	Use compute-motion, instead of inserting newlines.

1997-06-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (nonincremental-repeat-search-forward)
	(nonincremental-repeat-search-backward)
	(nonincremental-repeat-re-search-forward)
	(nonincremental-repeat-re-search-backward):
	Special error check for no previous search.

	* Makefile (lisptagsfiles): Look at subdirs only if name
	starts with a letter.
	(dontcompilefiles): Don't compile latin-5.el.
	(updates): Reject subdirs whose names start with =.
	(custom-deps, finder-data, autoloads, update-subdirs): Likewise.

	* scroll-bar.el (toggle-scroll-bar): Moved from frame.el.
	Use scroll-bar-mode to determine which side; if it's nil, use left.
	(set-scroll-bar-mode): New subroutine, taken from scroll-bar-mode.
	(scroll-bar-mode): Use the variable set-scroll-bar-mode.
	(scroll-bar-mode): New variable.  Extra defvar to avoid warning.
	(toggle-horizontal-scroll-bar): Moved from frame.el.

	* frame.el (scroll-bar-side): Variable deleted.
	(toggle-scroll-bar, toggle-horizontal-scroll-bar):
	Moved to scroll-bar.el.

	* files.el (file-chase-links): When handling .., make newname absolute.
	Simplify several places.
	(file-relative-name): Handle directory names as well as file names.
	Don't get fooled by empty directory names, etc.

	* word-help.el, term-nasty.el: Files deleted.

1997-06-27  Simon Marshall  <simon@gnu.ai.mit.edu>

	* font-lock.el (font-lock-extra-types-widget): Use regexp widget.
	(scheme-font-lock-keywords-1)
	(scheme-font-lock-keywords-2): New variables based on old variable.
	(scheme-font-lock-keywords): Default to the former.
	(tex-font-lock-keywords-1)
	(tex-font-lock-keywords-2): New variables based on old variable.
	(tex-font-lock-keywords): Default to the former.
	(font-lock-eval-keywords): Don't eval KEYWORDS if nil.
	(font-lock-after-change-function)
	(font-lock-fontify-block): Explicitly wrap inhibit-point-motion-hooks.

	* lazy-lock.el (lazy-lock-fontify-after-scroll)
	(lazy-lock-fontify-after-trigger)
	(lazy-lock-fontify-conservatively)
	(lazy-lock-fontify-chunk): Explicitly wrap inhibit-point-motion-hooks.

	* emacs-lisp/regexp-opt.el (regexp-opt-charset): Simplify range search.

1997-06-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-magic-alist):
	Update messages for `modified' and `set' states.

	* files.el (set-auto-mode): Undo previous change.

	* mouse.el (mouse-drag-region): For a click (not a drag),
	let the up-event run normally.

	* cus-edit.el (custom-mode-map):
	Bind Custom-move-and-invoke to mouse-1.
	(Custom-move-and-invoke): New command.
	(custom-buffer-create-internal): Update buffer help text.

1997-06-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-variable-menu): Clarify menu item names.
	(custom-buffer-create-internal): Clarify button names.

	* wid-edit.el (widget-choice-action): Use widget-edit-functions.
	(widget-toggle-action): Likewise.

	* wid-edit.el (widget-choose): Use only digits, except for C-g.
	Allocate digits to disabled commands too.
	Don't use a keyboard menu; instead, display a buffer
	listing all the alternatives.  Put cursor in echo area.

	* term-nasty.el: File deleted from the distribution.

	* doctor.el: Undo previous censorship changes.

	* paths.el (sendmail-program): Look first in /usr/sbin.

1997-06-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-browse): Take a group argument.
	(custom-help-menu): Browse `emacs' group.

	* cus-edit.el (custom-add-parent-links): Simplify mapatoms lambda.
	(custom-browse): New group.
	(custom-buffer-groups-last)
	(custom-menu-groups-first): Options deleted.
	(custom-browse-sort-alphabetically)
	(custom-browse-order-groups)
	(custom-buffer-order-groups)
	(custom-menu-order-groups): New options.
	(custom-browse-sort-predicate)
	(custom-buffer-sort-predicate)
	(custom-menu-sort-predicate): Functions deleted.
	(custom-sort-items): New replacement function; simplification and
	extension of previous predicate functions.
	(customize-face)
	(customize-customized)
	(customize-saved)
	(customize-apropos)
	(custom-menu-create)
	(custom-group-value-create): Use it.

	* cus-edit.el (custom-tree-alist): Use "-\ " instead of "-+ ".
	(custom-group-value-create): Ditto.

	* wid-edit.el (widget-button-click): Steal up event if key is not
	bound in `widget-global-map'.

	* cus-edit.el (custom-tree-insert-prefix): Renamed from
	`custom-tree-insert'.
	(custom-group-value-create): Use it.

	* wid-edit.el (widget-field-use-before-change): New option.
	(widget-setup): Obey it.

	* cus-edit.el (custom-help-menu): Add entry for
	`customize-browse'.

	* wid-edit.el (widget-push-button-value-create): Use :tag-glyph.
	(widget-glyph-insert-glyph): Accept nil widget.
	* cus-edit.el (custom-tree-group-tag): Specify :tag-glyph.
	(custom-tree-variable-tag): Ditto.
	(custom-tree-face-tag): Ditto.

1997-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help-macro.el (make-help-screen): Clear buffer-read-only.

1997-06-24  Dan Nicolaescu  <done@ece.arizona.edu>

	* bindings.el (debug-ignored-errors): Correct the error messages
	that are supposed to match imenu.el.

1997-06-24  Inge Frick  <inge@nada.kth.se>

	* view.el: Changed some documentation.
	(view-exits-all-viewing-windows): New variable
	replaces view-exit-all-windows-at-exit.
	(view-exit-all-windows-at-exit): Variable deleted.
	(view-mode-enter): Doesn't set view-exit-action if
	argument exit-action is nil.
	(view-mode-exit): Only restored windows are removed
	from view-return-to-alist.  Follow chains of old-windows.
	Do not call replace-buffer-in-windows.
	Call exit-action also when a window displays buffer.
	(View-exit-and-edit): Now sets read-only by binding
	view-old-buffer-read-only.

1997-06-25  Paul Eggert  <eggert@twinsun.com>

	* replace.el (perform-replace): When matching lookahead, use
	markers rather than integers, since a replacement may invalidate
	integers.  This fixes a bug introduced in the previous change to
	this file.

1997-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-add-new-face): Fix comma in backquote.

	* mail/rmail.el (rmail-get-new-mail): If conversion fails,
	delete the text that was inserted.

1997-06-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-search-and-update): When a reverse search
	need not actually search, update isearch-case-fold-search anyway.
	(isearch-mode-map): Define latin-iso8859-9 as self-searching.

	* thingatpt.el (buffer): Don't use beginning-of-buffer, end-of-buffer.

	* wid-edit.el (widget-menu-minibuffer-flag): New variable.
	(widget-choose): Alternative method to read one character
	from the keyboard.

	* cus-edit.el (custom-documentation-face): New face.
	(custom-mode): Use custom-documentation-face for doc strings.
	(custom-group-link): Fix the help string.
	(custom-magic-show): Doc fix.

	* wid-edit.el (widget-documentation-face): New variable.
	(widget-specify-doc): Use the variable.

	* cus-edit.el (custom-group-value-create): In links style,
	use Go to Group instead of Show.
	(Custom-goto-parent): New command.
	(custom-mode-map): Bind u to Custom-goto-parent.
	Bind SPC and DEL.
	(custom-buffer-create-internal): Improve help for buttons.
	(custom-button-face): New defface.
	(custom widget-type): Use custom-button-face for buttons.
	(custom-group-tag-faces): Initial value is nil.
	(custom-variable-tag-face): Renamed from custom-variable-sample-face.
	Initialize it like custom-group-tag-face.
	(custom-group-tag-faces): Initialize to nil.
	(custom-state-face): New defface.
	(custom-magic-value-create):
	Use custom-state-face for State descriptions.

	* wid-edit.el (widget-default-button-face-get):
	Try to get it from the parent.
	(widget-default-create): Use :tag-face for tags.

	* cus-edit.el (custom-state-buffer-message): Display the message
	only if the item is modified.  Take widget as arg.
	(custom-mode): Use widget-edit-functions.

	* wid-edit.el (widget-edit-functions): Renamed from widget-edit-hook.
	(widget-field-action): Pass the widget as an arg when running hook.

	* cus-edit.el (Custom-set): Renamed from custom-set.
	(Custom-save): Renamed from custom-save.
	(custom-browse-sort-predicate): Defalias deleted.
	(custom-group-value-create): Don't sort, in tree mode.
	(Custom-mode-menu): Renamed from custom-mode-menu.
	(Custom-reset-current): Renamed from custom-reset-current.
	(Custom-reset-saved): Renamed from custom-reset-saved.
	(Custom-reset-standard): Renamed from custom-reset-standard.
	(Custom-menu-update): Renamed from custom-menu-update.
	(customize-set-value): Renamed from custom-set-value.
	(customize-set-variable): Renamed from custom-set-variable.
	(customize-save-customized): Renamed from custom-save-customized.

	* cus-start.el (double-click-time): Use restricted-sexp.
	(load-path): Make [Current dir?] itself the active button.

	* wid-edit.el (character): Doc fix.
	(restricted-sexp): New widget type.
	(integer, number): Use restricted-sexp.

	* cus-start.el (track-mouse): Don't customize it.

1997-06-24  Paul Eggert  <eggert@twinsun.com>

	* replace.el (perform-replace): When matching regexps, if the next
	match is adjacent to this one, record the next match before
	replacing this one.  This fixes a bug where (replace-regexp
	"\\ba " "c") replaced "a a a " with "ca c" instead of "ccc".

1997-06-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* thingatpt.el (beginning-of-sexp): New function.
	(bounds-of-thing-at-point): Fix typo in computing real-beg.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-group-visibility): Widget type
	moved from wid-edit.el and renamed from group-visibility.
	(custom-group-visibility-create): Function renamed
	and moved from wid-edit.el.
	(custom-state-buffer-message): New function.
	(custom-mode): Add custom-state-buffer-message to widget-edit-hook.

	* wid-edit.el (widget-edit-hook): New variable.
	(widget-field-action, widget-choice-action): Run that hook
	instead of displaying an echo area message.
	(widget-toggle-action): Likewise.
	(group-visibility, widget-group-visibility-create):
	Moved to cus-edit.el and renamed.

1997-06-23  Dan Nicolaescu  <done@ece.arizona.edu>

	* textmodes/outline.el (outline-discard-overlays):
	Don't use let inside a cycle.

	* progmodes/hideshow.el (hs-discard-overlays): Use overlays-in to
	get all the overlays in a range.  Don't use let inside a cycle.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/nroff-mode.el (nroff-electric-mode): New defvar.

	* emulation/vip.el (vip-mode-map): Add defvar; move earlier.
	(vip-c-string): Variable renamed and defvar added.
	(vip-save-minibuffer-local-map): Likewise.
	(vip-end-with-a-newline-p): Use STRING (the arg) instead of `text'.

	* emacs-lisp/profile.el (profile-million): Variable moved.

	* informat.el (Info-validate-allnodes): Variable renamed, defvar added.
	(Info-validate-thisnode, Info-validate-lossages): Likewise.
	Change all references.

	* dired-aux.el (dired-add-entry): New optional arg RELATIVE.
	(dired-update-file-line): Pass t for RELATIVE.

1997-06-22  Noah Friedman  <friedman@splode.com>

	* type-break.el: Do not use defsubst anywhere; use defuns.
	Don't require timer; use autoloaded functions.
	(type-break-warning-message-mode): Variable deleted.
	(type-break-query-mode): New variable and function.
	(type-break-mode): Mention in docstring.
	(type-break-run-at-time): New function.
	All callers of run-at-time changed.
	(type-break-cancel-function-timers): New function.
	All callers of cancel-function-timers changed.
	(type-break-check-post-command-hook): New function.
	(type-break-mode, type-break-schedule, type-break-alarm)
	(type-break-time-warning-alarm): Call it.
	(type-break-mode-line-countdown-or-break): New function.
	(type-break): Call it.
	(type-break-time-warning-schedule): Put type-break-time-warning
	on type-break-post-command-hook.
	(type-break-check): Call type-break-mode-line-countdown-or-break.
	(type-break-noninteractive-query): New function.
	(type-break-force-mode-line-update): New function.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/japan-util.el (read-hiragana-string):
	Call read-multilingual-string correctly.

1997-06-22  Howard Melman  <melman@absolut.osf.org>

	* picture.el (picture-draw-rectangle): New command.
	(picture-mode-map): Add binding for picture-draw-rectangle.
	(picture-mode): Doc fix.
	(picture-rectangle-ctl): New variable.
	(picture-rectangle-ctr): New variable.
	(picture-rectangle-cbr): New variable.
	(picture-rectangle-cbl): New variable.
	(picture-rectangle-v): New variable.
	(picture-rectangle-h): New variable.
	(move-to-column-force): Function deleted;
	calls changed to use move-to-column.
	(picture-insert): New function.
	(picture-self-insert): Use picture-insert.
	(picture-current-line): New function.

1997-06-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* decipher.el (decipher-copy-cons):
	Renamed from decipher-get-undo-copy.  Calls changed.

	* emacs-lisp/lmenu.el (popup-menu): Redefine as macro.
	(popup-menu-popup, popup-menu-internal): New function.

	* mail/reporter.el (reporter-version): Change value.

	* vc-hooks.el (vc-menu-map): Add bindings for
	vc-retrieve-snapshot and vc-create-snapshot.

	* emacs-lisp/lisp-mnt.el (lm-version, lm-last-modified-date):
	Clean up strings that looked like RCS headers.

	* ielm.el (ielm-header): Delete version and RCS header.

	* forms.el (forms-version): Deactivate RCS headers.

	* emacs-lisp/edebug.el (edebug-version): Use the Emacs version.

	* compile.el (compilation-error-regexp-alist):
	New item, for Oracle pro*c compiler.

	* startup.el (command-line-1): Don't display startup message
	if the buffer-is nonempty.  Don't make undo entries for it.

	* tex-mode.el (latex-imenu-create-index): Make it much smarter.
	(latex-imenu-indent-string): New variable.

	* bytecomp.el (byte-compile-file): Doc fix.
	(batch-byte-compile-file): Return what byte-compile-file returns.

	* files.el (set-auto-mode): Handle interpreter-mode-alist as regexps.

	* doctor.el (doctor-death): Give serious advice if suicide mentioned.

	* Move many files into new subdirs named play, mail,
	progmodes, textmodes, emulation, emacs-lisp, and international.

	* apropos.el, asm-mode.el, autoinsert.el: Add provide call.
	* blackbox.el, cdl.el, copyright.el, cplus-md.el, debug.el, disass.el:
	* dissociate.el, doctor.el, dunnet.el, ebuff-menu.el, echistory.el:
	* find-gc.el, ielm.el, informat.el, kermit.el, ledit.el, levents.el:
	* lselect.el, macros.el, mailpost.el, makesum.el, misc.el, modula2.el:
	* mpuz.el, novice.el, nroff-mode.el, options.el, pascal.el:
	* pc-mode.el, profile.el, prolog.el, reposition.el, rlogin.el:
	* rnewspost.el, scribe.el, soundex.el, spell.el, spook.el, studly.el:
	* talk.el, time.el, underline.el, undigest.el, unrmail.el, vi.el:
	* vip.el, vms-pmail.el, vt-control.el, ws-mode.el, x-apollo.el:
	Add provide calls.

	* icon.el: Fix provide call.

	* simple.el (current-word): Ignore text properties.

	* edebug.el (edebug-sit-for-seconds): New variable.
	(edebug-display): Use that variable to control amt of time.

1997-06-22  Morten Welinder  <terra@diku.dk>

	* tex-mode.el (latex-imenu-create-index): Make it much smarter.
	(latex-imenu-indent-string): New variable.

1997-06-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* uniquify.el (delay-uniquify-rationalize-file-buffer-names):
	Remove this hook here,
	if we won't call delayed-uniquify-rationalize-file-buffer-names.
	(uniquify-buffer-name-style): Default value is nil.

	* cus-edit.el (custom-buffer-create-internal):
	Insert an explanation of the [Set] [Save]... line.
	Rename Done to Bury Buffer.

	* wid-edit.el (widget-default-value-set): Preserve point here.
	(widget-choice-action, widget-toggle-action): Not here.
	(widget-choice-action, widget-toggle-action):
	Display a message about [State].
	(widget-field-action): Improve message.

	* simple.el (paren-blinking group): Doc fix.

	* cus-edit.el (custom-tree-group-tag): Capitalize the tag.
	(custom-tree-variable-tag, custom-tree-face-tag): Likewise.
	(customize-browse): Corresponding changes.

	* wid-edit.el (widget-file-complete): New function.
	(file): Use widget-file-complete for :completion.  Delete :action.
	(symbol): Use lisp-complete-symbol for :completion.
	(widget-file-action): Function deleted.
	(widget-field-action): Just move to next field.
	(widget-choice-action, widget-toggle-action):
	Preserve point usefully if it is within the widget.

	* wid-edit.el (group-visibility): Inherit from visibility.

	* cus-edit.el (custom-add-parent-links): New arg INITIAL-STRING.
	(custom-group-value-create): Pass that arg.
	(custom-buffer-create-internal): Clarify initial documentation.

	* cus-edit.el (custom-group-value-create): Use group-visibility widget.
	(custom-add-parent-links): Don't insert anything if no parents.
	Return non-nil iff do have parents.

	* wid-edit.el (group-visibility): New widget type.
	(widget-group-visibility-create): New function.

	* cus-edit.el (custom-magic-value-create):
	In `links' style, don't indent the member groups.
	(custom-group-value-create): Likewise.

	* wid-edit.el (widget-documentation-link-action):
	Use describe-function or describe-variable in simple cases.

1997-06-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-buffer-indent): New option.
	(custom-magic-value-create): Use it.
	(custom-group-value-create): Ditto.
	(custom-buffer-create-internal): Don't create parent groups here.
	(custom-group-list): New variable.
	(custom-add-parent-links): New function.
	(custom-variable-value-create): Use it.
	(custom-face-value-create): Use it.
	(custom-group-value-create): Use it.
	(custom-buffer-groups-last): Changed default.

	* wid-edit.el (group-visibility): Deleted.
	(widget-group-visibility-create): Ditto.
	(group-link): Deleted.
	(widget-group-link-create): Ditto.
	(widget-group-link-action): Ditto.

	* cus-edit.el (custom-nest-groups): Delete option.
	(custom-buffer-style): Add `links' style instead.
	(custom-group-link): New widget.
	(custom-group-link-action): New function.
	(custom-group-value-create): Use `custom-group-link'.

	* wid-edit.el (widget-before-change): Fixed comment and debug string.

	* cus-edit.el (custom-mode-customize-menu): Deleted.
	(custom-mode-menu): Define here.
	(custom-mode): Don't add here.
	(custom-format-handler): Deleted.
	(custom): Don't add here.

	* cus-edit.el (custom-browse-sort-predicate): New alias.
	(custom-group-value-create): Use it.
	(:custom-last): Replace :custom-extra-prefix.
	(customize-browse): Use it.
	(custom-group): Ditto.
	(custom-group-value-create): Ditto.

	* cus-edit.el (face): Fixed format.
	(custom-face-value-create): Browse face, not option.

	* cus-edit.el (custom-group-value-create): Rewrote to replace
	entire format string.
	(custom-variable-value-create): Ditto.
	(custom-face-value-create): Ditto.
	(custom-group): Delete :format.
	(custom-variable): Ditto.
	(custom-face): Delete :format and :format-handler.
	(custom): Add :format.
	(custom-format-handler): Removed unnecessary code.
	(custom-face-format-handler): Deleted.
	(custom-add-see-also): New function.
	(custom-buffer-style): New option.
	(widget-face-value-create): Use it here instead of :format.
	(:custom-prefix, :custom-extra-prefix): New keywords.
	(custom): Initialize them.
	(custom-redraw-magic): Work with no magic button.
	(customize-browse): New command.
	(custom-tree-visibility): New widget.
	(custom-tree-visibility-action): New function.
	(custom-tree-group-tag): New widget.
	(custom-tree-group-tag-action): New function.
	(custom-tree-group-tag): New widget.
	(custom-tree-group-tag-action): New function.
	(custom-tree-variable-tag): New widget.
	(custom-tree-variable-tag-action): New function.
	(custom-tree-face-tag): New widget.
	(custom-tree-face-tag-action): New function.

	* cus-edit.el (custom-buffer-sort-alphabetically): New option.
	(custom-buffer-groups-last): New option.
	(custom-buffer-sort-predicate): Use them.
	(customize-apropos): Use it.
	(custom-group-value-create): Ditto.
	(custom-menu-sort-alphabetically): New option.
	(custom-menu-groups-first): New option.
	(custom-menu-sort-predicate): Use them.
	(custom-menu-create): Use it.
	(custom-buffer-sort-predicate, custom-buffer-order-predicate)
	(custom-menu-sort-predicate, custom-menu-order-predicate): Deleted.

	* wid-edit.el (widget-leave-text): Don't delete nil overlays.

	* wid-edit.el (widget-get-indirect): New function.
	(widget-default-create): Use it.
	(widget-button-insert-indirect): Deleted.

	* wid-edit.el (widget-inactive-face): Use dim gray instead of dark
	gray.

1997-06-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-magic-alist) <hidden>: Don't refer to "dots".

	* cus-edit.el (customize-menu-create): Return nil if Emacs.
	(custom-mode): Handle custom-mode-customize-menu being nil.
	(custom-mode-customize-menu): Don't initialize if customize-menu-create
	returns nil.

	* wid-edit.el (boolean): Capitalize "toggle".
	(choice): Capitalize "value menu".
	(visibility): Capitalize "hide" and "show".
	(group-visibility): Likewise.
	(widget-documentation-string-value-create): Capitalize "more".

	* cus-edit.el (custom-nest-groups): New variable.
	(custom-group): Don't insert a space before the group name here.
	(customize-group): If buffer exists, use it unchanged.
	(custom-format-handler) <L>: Maybe make a group-link widget
	instead of a group-visibility widget.
	custom-nest-groups controls this.
	<l, i, e>: Indent differently if custom-nest-groups.

1997-06-20  Ryszard Kubiak  <rysiek@ipipan.gda.pl>

	* ogonek.el: Doc fixes.
	(ogonek-jak, ogonek-how): Examples of customization fixed.

1997-06-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* wid-edit.el (widget-specify-insert): Bind before-change-functions.
	(widget-insert, widget-setup): Likewise.
	(widget-editable-list-delete-at, widget-default-delete): Likewise.
	(widget-editable-list-insert-before): Likewise.
	(widget-setup): Set up before-change-functions.
	(widget-after-change): Don't apply :notify here.
	(widget-before-change): New function.  Apply :notify here.
	(group-link): New widget type.
	(widget-group-link-action): New function.
	(widget-group-link-create): New function.

	* wid-edit.el (group-visibility): New widget type.

	* cus-edit.el (custom-format-handler) <L>: Use group-visibility.
	<L, i, - cases>: Triple the indentation, use just 2 dashes.

1997-06-21  Kenichi Handa  <handa@etl.go.jp>

	* quail.el (quail-help): Use with-output-to-temp-buffer.
	(quail-translation-help): Likewise.
	(quail-conversion-help): Likewise.

	* fontset.el (x-charset-registries): Name changed for consistency:
	lao.mule -> MuleLao, Mule.Tibetan-X -> MuleTibetan-X.
	(x-complement-fontset-spec): Optimization for latin-iso8859-1.

	* mule-cmds.el: Define mouse-set-font in mule-menu-keymap again.

1997-06-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* tabify.el (untabify): Handle consecutive tabs all at once.
	(tabify-regexp): New var.
	(tabify): Use it.

1997-06-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* wid-edit.el (boolean): Display "(nil)" or "(non-nil)".
	Add extra space before the value.
	(widget-documentation-string-value-create): Use [more] to show rest.
	(widget-visibility-value-create): Don't include `...'.

	* cus-edit.el (customize-group): Ignore case in completion.
	(custom-buffer-create-internal): Put parent groups near the top.

1997-06-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (require-final-newline): Fix custom :type.

1997-06-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-leave-text): Don't delete nil overlays.

	* wid-edit.el (widget-inactive-face): Change color.

	* cus-edit.el (custom-reset-saved): Call :custom-reset-saved.
	(custom-reset-standard): Call :custom-reset-standard.

	* cus-edit.el (custom-file): Autoload, and use ~/.xemacs-custom
	for XEmacs.

	* cus-edit.el (custom-buffer-create-internal): Change parent tag.

	* cus-edit.el (custom-buffer-create-internal): Add links to parent
	groups when there is only a single item in the buffer.

	* cus-edit.el (customize-apropos): Extend ALL arg to restrict
	apropos to options, groups and faces.  Doc fix.
	(customize-apropos-options)
	(customize-apropos-faces)
	(customize-apropos-groups): New commands.  Call it.
	(custom-help-menu): Add commands to menu.

	* wid-edit.el (widget-documentation-link-add): Only highlight text
	inside link.

	* wid-edit.el (widget-specify-field): Place unreadable
	text-property correctly when `widget-field-add-space' is non-nil.

1997-06-19  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* view.el (view-mode): Add autoload cookie to this variable.
	(View-exit-and-edit): Add autoload cookie.

1997-06-19  Simon Marshall  <simon@gnu.ai.mit.edu>

	* simple.el: Create paren-blinking custom group (as a subgroup of
	paren-matching) and put all blink-matching-paren variables in the
	former (as opposed to the latter) group.

	* paren.el: Customize; paren-showing as a subgroup of paren-matching.
	(show-paren-style): New variable.
	(show-paren-match-face)
	(show-paren-mismatch-face): New faces.
	(show-paren-function): Use them.

	* font-lock.el: Rearrange custom options.
	(global-font-lock-mode): Change defvar to a defcustom, and move after
	global-font-lock-mode defun, so the mode can be enabled via customize.
	(tex-font-lock-keywords): Rewrite.

	* fast-lock.el: Rearrange custom options.

	* modula2.el (modula-2-mode): Set font-lock-defaults so that <* and *>
	have comment syntax during fontification.
	(m3-font-lock-keywords-1): Don't fontify <* and *> here.
	(m3-font-lock-keywords-2): Rearrange items and use regexp-opt.

1997-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* etags.el (esc-map): Delete M-TAB binding of complete-tag.

	* bindings.el (complete-symbol): New function.
	(complete-tag): Definition deleted.
	(esc-map): Bind M-TAB to complete-symbol.

	* info-look.el: Replaces libc.el.
	(info-complete-symbol): If MODE is nil, use the default value.

	* fill.el (fill-context-prefix): Fix previous change.

	* paren.el: Don't enable the mode just because file is loaded.

	* files.el (backup, find-file): Make `files' their parent.
	(ctl-x-map): Delete the C-x C-q binding for toggle-read-only.

	* cus-edit.el (files): New group `files'.
	(auto-save): Make `files' its parent.

	* mpuz.el (mpuz-congratulate): Don't say "1 errors".

1997-06-18  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: Changed all doc strings to comply with conventions.
	(reftex-label-alist-builtin) New environment subfigure*.
	(reftex-toc) Introduced key g for revert-buffer.
	(reftex-extract-bib-entries) Allowed round parens as delimiter.
	(reftex-plug-into-AUCTeX) New variable and function.
	(reftex-make-master-buffer) Fixed bug with relative path names.

1997-06-18  Ryszard Kubiak  <rysiek@ipipan.gda.pl>

	* ogonek.el: Doc Fix.
	(prefix-code): Change the name to `ogonek-prefix-code'.

1997-06-18  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule-util.el (coding-system-parent): Moved to mule.el.

	* mule.el (coding-system-parent): Moved from mule-util.el.

1997-06-18  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (command-line): Load "leim-list.el".

	* subdirs.el: Add "language" in the argument of
	normal-top-level-add-to-load-path.

	* rmail.el (rmail-enable-decoding-message): Deleted.
	(rmail-revert): Bind enable-multibyte-characters to nil before
	calling rmail-convert-file.
	(rmail-convert-to-babyl-format): If enable-multibyte-characters is
	nil, don't convert code.

	* quail.el (quail-current-data): New variable.
	(quail-use-package): Do not reload a package already loaded.
	(quail-define-package): Update TITLE field of input-method-alist.
	(quail-map-p): TRANSLATION may be a cons.
	(quail-define-rules): Add autoload cookie.
	(quail-defrule): Add autoload cookie.  Handle the case that TRANS
	is a cons.
	(quail-get-translation, quail-lookup-key, quail-translate-key)
	(quail-show-translations, quail-completion-list-translations)
	(quail-show-kbd-layout): Likewise.
	(quail-hide-guidance-buf): Check if window WIN exists before
	deleting it.
	(quail-directory-name): New variable.
	(quail-update-leim-list-file): New function.

	* mule.el (coding-system-type): Doc-string modified.
	(coding-system-category): New function.
	(make-subsidiary-coding-system): Argument BASE deleted.
	(make-coding-system): Put properties no-initial-designation and
	coding-category to a newly created coding system.
	(define-coding-system-alias): Put property 'parent-coding-system
	to a new alias, property 'alias-coding-systems to a parent.

	* mule-util.el (coding-system-parent): New function.
	(coding-system-lessp): New function.
	(coding-system-list): Sort coding systems by coding-system-lessp.
	An element of returned list is always coding system, never be a
	cons.
	(modify-coding-system-alist): Renamed from
	set-coding-system-alist.
	(prefer-coding-system): New function.
	(compose-chars-component): But fix for handling a composite
	character of no composition rule.

	* mule-diag.el (list-character-sets): Set major mode of *Help*
	buffer to help-mode.
	(describe-coding-system): If user input null for coding system,
	call describe-current-coding-system.
	(describe-current-coding-system-briefly): Doc-string modified.
	(print-coding-system-briefly): Print parent and aliases of coding
	system.
	(describe-current-coding-system): Show more information neatly.
	(list-coding-systems): If called interactively, don't list up
	coding categories.
	(list-input-methods): New function.
	(mule-diag): Call list-input-methods for listing input methods.

	* mule-cmds.el: Define describe-coding-system instead of
	describe-current-coding-system in help-map and mule-menu-keymap.
	In mule-menu-keymap, enable set-buffer-process-coding-system only
	when the current buffer has been associated with some subprocess.
	(set-language-info): Doc-string modified because `input-method' is
	not a valid KEY argument now.
	(leim-list-file-name, leim-list-header, leim-list-entry-regexp):
	New variables.
	(update-leim-list-file, update-all-leim-list-files): New
	functions.
	(current-input-method): Doc-string modified because the value is
	now input method name.
	(default-input-method, previous-input-method): Likewise.
	(current-input-method-title): Doc-string modified because now each
	input method doesn't have to set this variable.
	(input-method-alist): New variable.
	(register-input-method): Register input method in
	input-method-alist.
	(read-language-and-input-method-name): Deleted.
	(read-input-method-name): New function.
	(activate-input-method, select-input-method, toggle-input-method):
	Modified for the above change.
	(read-multilingual-string): Likewise.
	(describe-current-input-method): Renamed from
	describe-input-method.
	(describe-input-method): New function.
	(describe-language-environment): Don't put a vacant line at the
	top of *Help* buffer.  Show a title string of each input method.

	* mule-conf.el: Change mnemonic letters for iso-2022-7bit-ss2 and
	iso-2022-7bit-lock.  Set coding-category-iso-8-2 to
	'japanese-iso-8bit.

	* bindings.el (mode-line-mule-info): Change style for showing
	an activated input method.

	* characters.el: Set syntaxes of Ethiopic characters.

	* gnus/gnus-mule.el: Adjusted for the coding system name change.
	Set cyrillic-koi8 for newsgroup "relcom".

	* language/china-util.el, language/cyril-util.el,
	* language/devan-util.el, language/ethio-util.el,
	* language/japan-util.el, language/lao-util.el,
	* language/thai-util.el, language/tibet-util.el,
	* language/viet-util.el: Provide XXX-util instead of
	* language/XXX-util.  Delete local variable declaration.

	* language/ethio-util.el (ethio-fidel-to-tex-map): Correct several
	elements.

	* language/cyril-util.el (setup-cyrillic-iso-environment)
	(setup-cyrillic-koi8-environment)
	(setup-cyrillic-alternativnyj-environment): Deleted.
	(setup-cyrillic-environment): New function.

	* language/cyrillic.el: Don't make the keymap
	describe-cyrillic-environment-map and
	setup-cyrillic-environment-map.  Names of coding systems changed.
	Give them more informative doc-string.  Make iso-8859-5 alias of
	cyrillic-iso-8bit, alternativnyj alias of
	cyrillic-alternativnyj.  For Cyrillic, provide single language
	environment "Cyrillic".

	* language: Delete the code of calling register-input-method form
	all files under this directory.

1997-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el: Customize.
	(command-line): Translate iso-8859-9 into latin-5.
	(command-line-1): Recognize setting inhibit-startup-echo-area-message
	with customization buffer.

1997-06-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* scheme.el (scheme): Add defgroup.
	Put defcustom's into this group.

	* finder.el (finder-list-keywords): Create *Finder* buffer if nec.

	* fill.el (fill-context-prefix): Fix criteria for first line,
	and for second line; always fetch prefixes from both lines.

	* buff-menu.el (Buffer-menu-mode): Doc fix.
	(Buffer-menu-bury): Move the line to the end.

1997-06-17  Dave Love  <d.love@dl.ac.uk>

	* scheme.el (scheme-mode-commands): Remove keybinding of \t to old
	`scheme-indent-line'.  Bind \e\C-q to `indent-sexp', not
	`scheme-indent-sexp'.
	(scheme-mit-dialect): Use defcustom.
	(dsssl-sgml-declaration): Likewise.  Fix doc string.

1997-06-17  Inge Frick  <inge@nada.kth.se>

	* arc-mode.el (archive-extract): Use second argument of
	view-buffer instead of setting view-exit-action.

	* tar-mode.el (tar-extract): Use second argument of
	view-buffer instead of setting view-exit-action.

	* files.el (view-read-only): New option variable.  If
	non-nil then buffers visiting files read-only, do it in view mode.
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Call toggle-read-only
	instead of setting buffer-read-only explicitly.
	(toggle-read-only, after-find-file): Changed to be aware
	of view-read-only.
	(save-some-buffers): Use second argument of view-buffer
	instead of setting view-exit-action.

	* window.el (split-window-save-restore-data): New function that
	for view mode buffers saves information in view-return-to-alist.
	(split-window-vertically, split-window-horizontally):
	Call split-window-save-restore-data.

1997-06-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-indent-line): A comment ends at the end of the
	line, delete call to nonexistent function.

	* icon.el (icon-font-lock-keywords-1): Improved regexp.
	(icon-font-lock-keywords-2): Likewise.

1997-06-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* buff-menu.el (Buffer-menu-bury): New command.
	(Buffer-menu-mode-map): Put Buffer-menu-bury on `b'.

	* sendmail.el (mail-mode): mail-header-separator affects paragraphs
	only when there is nothing after it on the line.
	(mail-mode-auto-fill, mail-mode-fill-paragraph):
	Look for mail-header-separator only on a line by itself.

	* compile.el (grep-program): Comment out the use of zgrep.

	* help.el (help-map): Make C-i run info-lookup-symbol.

1997-06-16  Simon Marshall  <simon@gnu.ai.mit.edu>

	* icon.el (icon-imenu-generic-expression): Improved regexp.
	(icon-font-lock-keywords-1): Improved regexps.
	(icon-font-lock-keywords-2): Likewise.
	(icon-mode): Don't set font-lock-comment-start-regexp via
	font-lock-defaults; it is not needed anymore.

1996-06-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-imenu-generic-expression): Improved regexp.
	(icon-mode): Don't use pushnew.

1997-06-16  Michelangelo Grigni  <mic@mathcs.emory.edu>

	* ffap.el (ffap-soft-value): Make this a function again; the macro
	version does intern-soft too early.  Deleted XEmacs-specific code.

	(ffap-string-at-point-mode-alist): Added "=" and
	"&" to the url syntax, as suggested by SJE.
	(ffap-read-file-or-url): Fixed the HIST argument to
	completing-read (only visible in XEmacs?), as reported by
	Christoph Wedler <wedler@fmi.uni-passau.de>.
	(ffap-kpathsea-expand-path): New func, replaces ffap-add-subdirs,
	a first attempt at kpathsea emulation.  Also convert "" to "." in
	path lists, for XEmacs.  Suggestions from SJE.
	Added mouse-track support (but no binding), as
	suggested by MDB.  Moved Emacs mouse bindings from
	"down-mouse" events to ordinary mouse events.
	(ffap-alist): Added ffap-fortran-mode, as requested by MDB.
	Rewrote and merged XEmacs support, eliminating file
	ffap-xe.el.  Modified ffap-other-frame to work in dedicated
	frames, fixing a bug reported by JENS.
	(ffap-menu-rescan): Avoid modifying the buffer.
	Two bugs reported by Christoph Wedler <wedler@fmi.uni-passau.de>:
	(ffap-fixup-url): Avoid autoloading through url-normalize-url.
	(ffap-read-file-or-url): For XEmacs, give extra HACK-HOMEDIR arg
	to `abbreviate-file-name'.
	(ffap-file-at-point): Suppress errors from `ffap-alist'.
	(ffap-url-at-point): Modified regexp to accept
	mail hostnames ending with a digit.  Fixes bug report of SJE.
	(ffap-url-at-point): Use higher level function
	(w3-view-this-url t) suggested by wmperry, instead of
	w3-zone-at/w3-zone-data or widget-at/widget-get.
	(ffap-url-at-point): Modified to work with
	w3-version "WWW 2.3.64 1996/06/02 06:20:23" alpha, which
	uses the 'widget package rather than the old w3-zone-at.
	Bug was reported by JENS.
	Adapted comments and doc strings to Emacs coding
	conventions.  Reorganized.  Retired v18 support.
	(ffap-bindings): Offers a default installation.
	(ffap-string-at-point): Modified arguments.
	(ffap-gnus-hook): Updated for Gnus 5.
	(ffap-tex-init): Delayed initialization of `ffap-tex-path'.
	(ffap-dired): New entry in `ffap-alist'.
	(ffap-menu-rescan): May fontify the choices in buffer.
	(ffap-read-file-or-url): `PC-completion-as-file-name-predicate'
	used if available, to work with complete.el.

1997-06-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* view.el: Don't globally add to change-major-mode-hook.
	(view-mode-enable): Add to change-major-mode-hook locally here.
	(view-mode-disable): Remove from it locally here.

1997-06-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc.el (vc-steal-lock): Use yes-or-no-p for confirmation.

	* ogonek.el: New file.

	* texnfo-upd.el: Many doc fixes.
	(texinfo-all-menus-update): Check for @detailmenu.
	(texinfo-master-menu): Likewise.
	(texinfo-multiple-files-update): Likewise.
	(texinfo-insert-master-menu-list): Put in @detailmenu if appropriate.

1997-06-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Use booleans.

	* cus-edit.el (custom-variable-menu): Rearranged lisp support.
	(custom-face-menu): Ditto.

	* wid-edit.el (boolean): Add explicit toggle button.
	(choice): Add explicit value menu button.
	* cus-face.el (custom-face-attributes): Use booleans.

	* cus-edit.el (custom-format-handler): Handle %i escape.
	(custom-face): Use it.
	(custom-magic-value-create): Add spaces for groups.
	(custom-format-handler): Add spaces for groups.

	* widget.el (:documentation-indent): New keyword.
	* wid-edit.el (widget-default-format-handler): Obey it.
	(widget-documentation-link-add): Add indentation.
	(widget-documentation-string-value-create): Ditto.

	* cus-edit.el (widget-glyph-insert-glyph): Make the invisible
	extent open ended.

	* cus-edit.el (custom-format-handler): Added :echo-help to
	visibility widget.
	(custom-variable-value-create): Ditto, also for tag.
	* wid-edit.el (widget-documentation-string-value-create): Ditto.
	(widget-documentation-link-help-echo): New function.
	(documentation-link): Use it.  Make untabable.

	* wid-edit.el (widget-apply-action): Don't bind
	`after-change-functions' here.

	* cus-edit.el (custom-toggle-hide): Call `widget-setup'.

	* wid-edit.el (widget-setup): Cleanup.

	* wid-edit.el (widget-tabable-at): New function.
	(widget-move): Use it.
	* wid-edit.el (widget-after-change): Reimplemented :secret.

	* wid-edit.el (widget-field-add-space): New option.
	(widget-specify-field): Use it.
	(widget-field-end): Ditto.

	* wid-edit.el (widget-leave-text): New function.
	(widget-convert-text): Use it.
	(documentation-link): New widget.
	(widget-documentation-link-action): New function.
	(widget-documentation-links): New option.
	(widget-documentation-link-regexp): New option.
	(widget-documentation-link-p): New option.
	(widget-documentation-link-type): New option.
	(widget-documentation-link-add): New function.
	(widget-documentation-string-value-create): Use it.

1997-06-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sendmail.el (mail-mode): Let all-white lines separate paragraphs.

	* text-mode.el (text-mode): Let all-white lines separate paragraphs.

	* generic.el: New file.

1997-06-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* icomplete.el: Don't call icomplete-mode; let the user do that.
	(icomplete-show-key-bindings): Doc fix.
	(icomplete-mode): Doc fix.
	(icomplete-get-keys): Make it actually work.
	(icomplete-mode): Doc fix.
	(icomplete-completions): Doc fix.

	* view.el: Many doc fixes.
	(view-mode-enable): New function, split from view-mode-enter.
	(view-mode-enter): Use view-mode-enable.
	(view-mode-disable): New function, split from view-mode-exit.
	(view-mode-exit): Use view-mode-disable.
	(view-mode): Use view-mode-enable and view-mode-disable;
	don't do all of what view-mode-enter and view-mode-exit do.
	(change-major-mode-hook): Use view-mode-disable, not view-mode-exit.

1997-06-14  Inge Frick  <inge@nada.kth.se>

	* view.el: Make view mode more similar to `less'.
	Changed documentation for most commands.
	(view-scroll-auto-exit): New variable, replaces view-mode-auto-exit.
	(view-mode-auto-exit): Variable deleted.
	(view-mode): Doesn't only toggle `view-mode', it also calls
	view-mode-enter or view-mode-exit.
	(view-buffer, view-buffer-other-window): New argument exit-action.
	(view-file, view-file-other-window, view-buffer-other-window)
	(view-buffer, view-mode-enter): Changed method used to restore
	windows when leaving view mode.
	(view-mode-exit): New function.
	(view-return-to-alist): New variable.
	(view-return-here, view-exit-position): Variables deleted.
	(view-remove-frame-by-deleting, view-exit-all-windows-at-exit):
	New option variables.
	(view-page-size, view-half-page-size): New variables.
	(view-scroll-size): Var deleted; replaced by the previous two.
	(view-mode-map): Make the bindings inside defvar.
	Added new commands and new key bindings.
	Added view-mode-exit to `change-major-mode-hook' to always leave
	view mode when changing major mode.
	(view-file-other-frame, view-buffer-other-frame): New commands.
	(View-leave, View-kill-and-leave, View-exit, View-exit-and-edit)
	(View-quit, View-quit-all): New commands for leaving view mode.
	(view-exit): Function deleted.
	(View-goto-percent, View-scroll-to-buffer-end): New commands.
	(view-try-extend-at-buffer-end): New option variable.

	(View-scroll-page-forward, View-scroll-page-backward)
	(View-scroll-page-forward-set-page-size)
	(View-scroll-page-backward-set-page-size, View-scroll-line-forward)
	(View-scroll-line-backward, View-scroll-half-page-forward)
	(View-scroll-half-page-backward)
	(View-revert-buffer-scroll-page-forward): New commands.

	(View-scroll-lines-forward, View-scroll-lines-backward)
	(View-scroll-lines-forward-set-scroll-size)
	(View-scroll-one-more-line): Commands deleted.

	(view-scroll-lines, view-end-message, view-page-size-default)
	(view-set-half-page-size-default, view-really-at-end)
	(view-recenter): New functions.
	(view-scroll-size): Function deleted.

	(View-search-regexp-forward, View-search-regexp-backward)
	(View-search-last-regexp-forward, View-search-last-regexp-backward)
	(view-search): ! and @ are special at beginning of regexp.
	(view-search-no-match-lines): New function.

1997-06-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el: Add widget `coding-system' for mule.

	* wid-edit.el (widget-convert-text): New function.
	(widget-convert-button): Ditto.

	* wid-edit.el (widget-field-buffer): Don't assume an overlay
	exists.
	(widget-field-start): Ditto.
	(widget-field-end): Ditto.

	* cus-face.el (custom-face-attributes-get): Protect against
	missing w3 font functions.

	* cus-edit.el (custom-magic-faces): New group.
	Added magic faces.

	* cus-edit.el (custom-buffer): New group.
	(custom-menu): New group
	Updated options.
	* wid-edit.el (widget-faces): New group.
	Updated all faces.

	* wid-edit.el (widget-map-buttons): New function.

	* cus-edit.el (custom-buffer-sort-predicate)
	(custom-menu-sort-predicate): Default to ignore.  Rewrite :type form.
	(custom-buffer-order-predicate)
	(custom-menu-order-predicate): New variables.
	(custom-buffer-sort-alphabetically)
	(custom-menu-sort-alphabetically): Functions deleted.
	(custom-sort-items-alphabetically): New function.  Like deleted
	functions, except that A and B must be the same custom type.
	(custom-sort-groups-first)
	(custom-sort-groups-last): New functions.  Like deleted functions,
	except that only A and B custom types are compared.
	(custom-group-value-create)
	(custom-menu-create): Also sort members using custom-*-order-predicate.
	But sort the copy of the stored sequence to prevent changing the stored
	value, and don't store the sorted copy.

	* wid-edit.el (widget-specify-inactive): Don't set `mouse-face'.
	(widget-setup): Don't use markers.

	* wid-edit.el (widget-default-format-handler): Cleanup.
	(widget-documentation-string-value-create): Also use documentation
	properties on single line documentation strings.

	* wid-browse.el (widget-minor-mode): Fixed mistake in
	widget-minor-mode - it had semantics of non-interactive calling
	reversed.

1997-06-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/european.el (Latin-2):
	List Croatian as alternative name for Serbo-Croatian.

1997-06-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* add-log.el (add-log-time-format): New variable.
	(add-log-iso8601-time-string): New function.
	(add-change-log-entry): Use add-log-time-format.
	(add-log-iso8601-time-zone): Renamed from iso8601-time-zone.

1997-06-13  Dan Nicolaescu  <done@ece.arizona.edu>

	* isearch.el (isearch-hide-immediately): New variable.
	(isearch-close-unecessary-overlays): New function.
	(isearch-range-invisible): Use them.

	* isearch.el (search-invisible): Changed the semantics,
	the default value and updated the doc string.
	(isearch-opened-overlays): New variable.
	(isearch-mode): Initialize it.
	(isearch-switch-frame-handler): Call isearch-clean-overlays.
	(isearch-exit, isearch-cancel, isearch-abort): Likewise.
	(isearch-other-meta-char, isearch-search):
	Support the new meaning for search-invisible.
	(isearch-open-necessary-overlays, isearch-open-overlay-temporary)
	(isearch-clean-overlays): New functions.
	(isearch-range-invisible): If we are inside overlays that can be
	opened, open them, add them to isearch-opened-overlays and say
	that the range is visible.

	* hideshow.el (hideshow): Added a :prefix.
	(hs-isearch-open): New variable.
	(hs-flag-region): Use that variable.
	Changed the semantics of the FLAG parameter and updated the docs.
	(hs-isearch-open-invisible): New function to be set as a
	`isearch-open-invisible' property for hidden overlays, so that
	isearch can use it.
	(hs-hide-block-at-point): Tell if we are hiding a comment or a block.

1997-06-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* latin-5.el: Latin-5 is ISO-8859-9, not ISO-8859-5.

	* fill.el (fill-context-prefix): Don't crash if RESULT is nil
	when AT-SECOND is t.

	* bytecomp.el (byte-save-current-buffer): Change to code 114 (0162).

	* sendmail.el (mail-mode): Change paragraph-start and
	paragraph-separate not to match leading spaces.

	* vc.el (vc-annotate-mode-variables): Init vc-annotate-mode-menu
	and put it into vc-annotate-mode-map.
	(vc-annotate-add-menu): Don't init vc-annotate-mode-menu,
	just add the bindings to it.  Display progress messages.
	(vc-annotate-mode-menu): New defvar.
	(vc-annotate-ratio): Move defvar, add initial value.
	(vc-annotate-display-default): Display progress messages.
	(vc-annotate-display): Use vc-annotate-color-map.

1997-06-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* finder.el (finder-mode): Don't switch buffers or change text here.
	(finder-by-keyword): Don't call finder-mode here.
	(finder-list-matches): Call finder-mode here.
	Switch to a buffer called *Finder Category*.
	(finder-list-keywords): Call finder-mode here.
	Switch to the buffer *Finder*.
	If the buffer already exists, don't reinitialize it or move point.

	* bindings.el (esc-map): Delete spurious wrong binding for M-TAB.

	* forms.el (forms-mode, forms--process-format-list)
	(forms--make-parser-elt, forms-search-forward, forms-search-backward):
	Fix error messages.

	* text-mode.el (paragraph-indent-text-mode):
	Renamed from spaced-text-mode.
	(text-mode-map): Bind TAB to indent-relative.
	(indented-text-mode-map): Variable deleted.
	(indented-text-mode): Now an alias for text-mode.

1997-06-11  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el (forms-save-buffer):
	Do not run the `write-file-filter' hooks
	explicitly since they are run via `local-write-file-hooks'.
	(forms-search-forward, forms-search-backward):
	Wrap the search.  Use `error' to signal failure.

1997-06-11  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-delete-whitespace, bibtex-current-line)
	(bibtex-assoc-of-regexp, bibtex-skip-to-valid-entry)
	(bibtex-map-entries):
	Renamed from delete-whitespace, current-line, assoc-of-regexp,
	skip-to-valid-bibtex-entry, and map-bibtex-entries, respectively.

1997-06-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* fill.el (fill-context-prefix): If we get a prefix from the
	second line of the paragraph, verify the first line has it too.

	* reftex.el (tex-main-file, outline-minor-mode): Add defvars.

1997-06-10  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: Updated documentation at several points in the file.
	(reftex-label-alist-builtin): New default environment subfigure.
	(reftex-find-duplicate-labels): Temporary buffer is now
	"*Duplicate Labels*" instead of "*Help*".
	(reftex-bibtex-selection-callback): Renamed variable found-list.
	(reftex-found-list): Added defvar for this variable.
	(TeX-master): Added defvar for this variable.
	(reftex-reset-mode): Kill temporary buffers associated with RefTeX.

1997-06-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule-cmds.el (view-hello-file): Adjusted for the changes of
	coding system names.

1997-06-10  Terrence Brannon  <brannon@sand.usc.edu>

	* landmark.el (lm-display-statistics): Display stats in mode line.
	(lm-number-of-trials, lm-sum-of-moves): New vars.
	Various doc fixes.

1997-06-10  Michael Staats  <michael@thp.Uni-Duisburg.DE>

	* pc-select.el (pc-select-selection-keys-only): New variable.
	(pc-select-meta-moves-sexps): New variable.
	(exchange-point-and-mark-nomark): New function.
	(forward-sexp-mark, forward-sexp-nomark): New functions.
	(backward-sexp-mark, backward-sexp-nomark): New functions.
	(pc-selection-mode): Doc fix.
	Bind exchange-point-and-mark-nomark, C-escape.
	Honor pc-select-meta-moves-sexps, pc-select-selection-keys-only.
	Unset highlight-nonselected-windows.

1997-06-10  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el: Use `error' where possible to signal errors.
	Remove (beep)s for warnings.
	Change comment about the iif hook to reflect the actual reason.
	Correct error in field numbering.

1997-06-10  Flemming Hoejstrup Hansen  <hovpfl@unidhp.uni-c.dk>

	* forms.el (forms-mode): Make `forms--elements' local before calling
	`forms--process-format-list'.

1997-06-10  Olivier Laurens  <laurens@tcc.bc.ca>

	* forms.el (forms-save-buffer): `forms-write-file-filter' and
	`forms-read-file-filter' were not called correctly.

1997-06-10  Torbjorn Einarsson  <T.Einarsson@clab.ericsson.se>

	* f90.el (f90-looking-at-where-or-forall): Recognize where/forall
	only if it's a block, not a one-line statement.

1997-06-10  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-mode-map): Changed the binding of the C-TAB
	key, such that XEmacs will understand it, too.

	* bibtex.el (bibtex-format-entry, bibtex-end-of-entry): Give specific
	error message if not on valid BibTeX entry.

	* bibtex.el (bibtex-field-string-quoted): Small bug fix.  Allow
	backslash followed by newline.

	* bibtex.el (bibtex-reposition-window, bibtex-mark-entry): Two new
	functions, bound to M-C-l and M-C-h, respectively.

	* bibtex.el
	(bibtex-reformat-previous-options, bibtex-reformat-previous-labels):
	New internal variables used by bibtex-reformat.

	* bibtex.el (bibtex-clean-entry-hook): New hook to be called after
	entry has been cleaned.
	(bibtex-clean-entry): Run the hook bibtex-clean-entry-hook.

	* bibtex.el (bibtex-entry-field-alist): Small bug fix.
	(bibtex-autokey-title-terminators): Made -- a terminator instead
	of ---.
	(bibtex-font-lock-keywords): Don't treat ALT prefixed entries as
	comments.
	(bibtex-entry): Fixed parameter list.  This function is not
	intended to be called with required and optional fields as
	optional arguments anymore.

	* bibtex.el (bibtex-generate-autokey): Now split into various
	small functions.
	(bibtex-autokey-names-stretch, bibtex-autokey-additional-names):
	New variables used by bibtex-generate-autokey.
	(bibtex-autokey-get-namefield, bibtex-autokey-get-names)
	(bibtex-autokey-demangle-name, bibtex-autokey-get-namelist)
	(bibtex-autokey-get-yearfield, bibtex-autokey-get-titlestring)
	(bibtex-autokey-get-titles, bibtex-autokey-get-titlelist):
	New helper functions for bibtex-generate-autokey.

	* bibtex.el (bibtex-submit-bug-report): Report all variables.

	* bibtex.el (bibtex-contline-indentation): New user option.
	(bibtex-entry-offset): Renamed from bibtex-entry-indentation.

	* bibtex.el (bibtex-entry-field-alist): Used different order for
	some fields (as documented in btxdoc.tex).  Changed one of the
	comment strings.

	* bibtex.el (bibtex-mode-hook, bibtex-add-entry-hook): Add var doc.
	(bibtex-autokey-before-presentation-hook): New variable to be
	called before autokey presentation.
	(bibtex-generate-autokey):
	Call bibtex-autokey-before-presentation-hook.  Doc fix.

	* bibtex.el (bibtex-reference-key): Reincluded parentheses.
	Parentheses should be disallowed only in field constants.

	* bibtex.el (bibtex-autokey-transcriptions): Fixed bug (two
	entries for `\o' while `\oe' entry was missing).

	* bibtex.el (bibtex-entry-indentation): New variable to determine
	the indentation of all entries.
	(bibtex-move-outside-of-entry): Use `skip-chars-forward' instead
	of `re-search-forward'.
	(bibtex-beginning-of-first-entry, bibtex-beginning-of-last-entry):
	Renamed from beginning-of-first-bibtex-entry and
	beginning-of-last-bibtex-entry.  Go to beginning of line, return point.
	(bibtex-do-auto-fill, bibtex-make-field, bibtex-entry)
	(bibtex-String, bibtex-Preamble): Respect `bibtex-entry-indentation'.
	(bibtex-beginning-of-entry, bibtex-end-of-entry): Make it work
	with indented entries.
	(bibtex-count-entries, bibtex-sort-buffer, bibtex-validate)
	(bibtex-kill-entry, bibtex-reformat): Use return value from
	bibtex-beginning-of-first-entry.
	(bibtex-clean-entry): Use `bibtex-reference-maybe-empty-head'
	instead of a fixed string.

	* bibtex.el (bibtex-beginning-of-entry, bibtex-end-of-entry): Now
	return point if called from a program.
	(bibtex-enclosing-field, bibtex-format-entry)
	(bibtex-generate-autokey, bibtex-parse-keys, bibtex-mode)
	(bibtex-ispell-entry, bibtex-narrow-to-entry, bibtex-sort-buffer)
	(bibtex-find-entry-location, bibtex-validate, bibtex-clean-entry)
	(bibtex-fill-entry): Use new return values of these functions.
	(bibtex-ispell-abstract): Bug fix (inherently by the change to
	bibtex-end-of-entry).

	* bibtex.el (bibtex-field-history): New variable for history
	buffer of field name reading.
	(bibtex-make-field): Use completion.  Object to completion are all
	standard fields defined for the current entry.  Bound to `C-c C-f'.
	(bibtex-mode): Set `comment-start' and `comment-start-skip' to
	"@Comment ", `comment-column' to 0.

	* bibtex.el (bibtex-autokey-transcriptions): New variable.
	(bibtex-autokey-name-change-strings)
	(bibtex-autokey-titleword-change-strings):
	Use bibtex-autokey-transcriptions as default value.

	* bibtex.el (bibtex-find-entry-location): Handle empty buffer.

	* bibtex.el (bibtex-entry-delimiters): New variable to determine
	if entries shall be delimited by braces or parentheses.
	(bibtex-entry-left-delimiter, bibtex-entry-right-delimiter): New
	helper functions.
	(bibtex-entry, bibtex-String, bibtex-Preamble): Respect
	`bibtex-entry-delimiters'.
	(bibtex-entry-format): Doc fix.
	(bibtex-reference-key, bibtex-field-const): Removed parentheses
	from allowed characters.
	(bibtex-end-of-entry): Better handling of incorrect preambles.

	* bibtex.el (bibtex-validate): Small change to avoid reparsing of
	errors, if you enter `compile-goto-error' in compilation buffer.

	* bibtex.el (bibtex-progress-message): New function to show
	progress of some long-lasting functions in BibTeX mode by
	indicating percentage of done work.
	(bibtex-progress-lastperc, bibtex-progress-lastmes)
	(bibtex-progress-interval):
	New internal variables for `bibtex-progress-message'.
	(bibtex-parse-keys, bibtex-reformat, bibtex-validate): Use new
	function `bibtex-progress-message'.
	(current-line): New helper function to calculate current
	linenumber.  Something like this should really be defined somewhere
	else in Emacs.
	(bibtex-validate): Changed to show all errors in buffer in a
	`compilation mode' buffer.  If there are syntax errors, it aborts
	after the syntax check, since higher-level check functions rely on
	the syntactical correctness of buffer.  If called from another lisp
	function (as `bibtex-convert-alien') the return value shows
	whether validating has been successful.  Fixed bug which made
	checking for absent required fields work incorrectly.
	(bibtex-parse-keys-timeout): Set to a value reasonable higher
	(twice as high) than `lazy-lock-stealth-time'.
	(bibtex-member-of-regexp, assoc-of-regexp): Small cosmetic changes.

	* bibtex.el (bibtex-buffer-last-parsed-tick): Renamed from
	bibtex-buffer-last-parsed-for-keys-tick and made it really
	buffer-local (bug fix).
	(bibtex-parse-keys): Make it use bibtex-buffer-last-parsed-tick.
	(bibtex-parse-buffers-stealthily): New function which parses all
	BibTeX buffers if Emacs has been idle an efficient amount of time.
	(bibtex-parse-idle-timer): New variable which stores whether idle
	timer for parsing already is installed.
	(bibtex-parse-keys): Make it callable verbosely.  Returns now nil
	if it has been aborted.
	(bibtex-mode): Run the new function bibtex-parse-buffers-stealthily.

	* bibtex.el (bibtex-generate-autokey): Changed the name part
	generation (bugfix).  This function handles now correctly all three
	forms of BibTeX names, "First von Last", "von Last, First", "von
	Last, Jr, First".  In every case the "Last" part is correctly
	extracted.  If the "Last" part consists of more than one token only
	the first is used.  Name fields spread over more than one line are
	no problem anymore.

	* bibtex.el (bibtex-entry-format): Changed default value to
	exclude 'page-dashes.  Modified documentation.
	(bibtex-autokey-name-change-strings)
	(bibtex-autokey-titleword-abbrevs)
	(bibtex-autokey-titleword-change-strings, bibtex-entry)
	(bibtex-validate): Doc fixes.
	(bibtex-mode-map): Bound `C-c $' to bibtex-ispell-abstract.
	(bibtex-generate-autokey): Changed documentation.  Small
	modification in calculating title field.
	(bibtex-mode): Included bibtex-ispell-entry into the list of
	`interesting' functions.
	(bibtex-kill-field): Bug fix (killing of first field in entry
	yielded error).

	* bibtex.el (bibtex-string-file-path): New variable which defines
	the path to search for bibtex-string-files.  It defaults to
	contents of environment variable BIBINPUTS.
	(bibtex-mode): Use this variable.

	* bibtex.el (bibtex-next-field, bibtex-find-text): Will now work
	with string entries as well.

	* bibtex.el (bibtex-mode-map): bibtex-complete-key wasn't bound
	correctly.
	(bibtex-complete): Fixed bug (used string entries defined in
	buffer as object to completion).

	* bibtex.el (Menu): Use easymenu.  More menu items for
	`BibTeX-Edit' menu.  Use nested menus.

	* bibtex.el (bibtex-field-kill-ring-max)
	(bibtex-entry-kill-ring-max): Two new variables substituting
	bibtex-kill-ring-max.
	(bibtex-field-kill-ring, bibtex-entry-kill-ring): Two new
	variables substituting bibtex-kill-ring.
	(bibtex-field-kill-ring-yank-pointer)
	(bibtex-entry-kill-ring-yank-pointer): Two new variables
	substituting bibtex-kill-ring-yank-pointer.
	(bibtex-last-kill-command): New variable keeping the type of the
	last kill command.
	(bibtex-insert-current-kill): Clean distinction between the two
	BibTeX kill rings.
	(bibtex-kill-field): Use new variable bibtex-field-kill-ring.
	(bibtex-kill-entry): Use new variable bibtex-entry-kill-ring.

	* bibtex.el (bibtex-kill-ring, bibtex-kill-ring-yank-pointer): New
	internal variables like kill-ring and kill-ring-yank-pointer, but
	bibtex-kill-ring holds fields or complete reference entries
	instead of raw strings.
	(bibtex-kill-ring-max): New user option similar to kill-ring-max.
	(bibtex-kill-field): Renamed from bibtex-delete-field again.  It
	now supports the new variable bibtex-kill-ring.
	(bibtex-copy-field-as-kill, bibtex-kill-entry)
	(bibtex-copy-entry-as-kill, bibtex-yank, bibtex-yank-pop): New
	interactive functions, which work on the bibtex-kill-ring
	variable.
	(bibtex-insert-current-kill): New helper function to insert
	contents of bibtex-kill-ring in an appropriate way.
	(bibtex-make-field): New optional argument to tell the function if
	it was called by bibtex-yank.  It operates slightly different then.
	(bibtex-find-text): New optional argument to tell the function if
	it was called by bibtex-make-field.  It moves in this case to the
	end of the key if it was called on the reference head line.  If it
	is called interactively on the head line, it works in an
	appropriate manner, too.
	(bibtex-enclosing-field): New optional argument to tell
	bibtex-enclosing-field not to print an error message if enclosing
	field isn't found, but to return nil in this case (t is returned
	otherwise).  This is used by bibtex-find-text such that no error
	message is given if bibtex-find-text is called interactively in
	the key line of an entry.

	* bibtex.el (bibtex-autokey-year-use-crossref-entry): New variable
	to determine if crossreferenced entry should be used for autokey
	generation, if year field of current entry is absent.
	(bibtex-generate-autokey): Use this new variable.

	* bibtex.el (bibtex-include-OPTannote): Deleted (is set in
	bibtex-user-optional-fields).
	(bibtex-entry, bibtex-print-help-message): Removed support for
	bibtex-include-OPTannote.

	* bibtex.el (bibtex-entry-format): New constant
	`inherit-booktitle' allowed.

	* bibtex.el (bibtex-mode): Set value for
	font-lock-mark-block-function.

	* bibtex.el (bibtex-font-lock-keywords): Changed to distinguish
	optional from ordinary fields.
	(bibtex-format-entry, bibtex-print-help-message)
	(bibtex-remove-OPT-or-ALT, bibtex-pop): Used simpler regexps.

	* bibtex.el (bibtex-delete-field): Changed from
	bibtex-delete-optional-or-alternative-field.  Deletes now mandatory
	fields as well.
	(bibtex-mode): Changed documentation.

	* bibtex.el (bibtex-entry-type-history, bibtex-key-history): New
	variables to use own histories in BibTeX buffers.
	(bibtex-entry, bibtex-clean-entry, bibtex-String): Use these new
	variables.

	* bibtex.el (bibtex-entry, bibtex-make-field): A function can now
	be used to generate a fields init string.
	(bibtex-include-OPTkey, bibtex-include-OPTannote)
	(bibtex-entry-field-alist): Changed documentation accordingly.

	* bibtex.el (bibtex-mode): bibtex-parse-keys on start of mode is
	now abortable, too.
	(bibtex-entry, bibtex-complete-key, bibtex-String): If bibtex-keys
	isn't set correctly due to abortion of bibtex-parse-keys, this
	function is called now non-abortable.

	* bibtex.el (bibtex-entry-field-alist): Small change in comments.

	* bibtex.el (bibtex-find-entry-location): Bug fix: Insertion into
	completely empty buffer didn't work.

	* bibtex.el (bibtex-user-optional-fields): Renamed from
	bibtex-mode-user-optional-fields.
	(bibtex-submit-bug-report, bibtex-entry, bibtex-print-help-message):
	Use bibtex-user-optional-fields.

	* bibtex.el (bibtex-remove-delimiters): Bug fix: Only remove
	delimiting braces and not those inside fields.

	* bibtex.el (skip-to-valid-bibtex-entry, bibtex-parse-keys)
	(bibtex-end-of-entry, bibtex-validate, bibtex-reformat): Calculate
	complex regexps outside of loops.
	(bibtex-mode): Changed documentation on how to convert third party
	buffers.

	* bibtex.el (bibtex-convert-alien): New function to convert a
	buffer not created by BibTeX mode to a format, which enables all
	features of BibTeX mode.
	(bibtex-mode): Small bug fix for call to bibtex-parse-keys.

	* bibtex.el (bibtex-mode): Bug fix for using bibtex-parse-keys.

	* bibtex.el (bibtex-mode): Used other policy to initiate the first
	call of bibtex-parse-keys.  This avoids unnecessary double call if
	Font Lock mode is chosen for buffer at startup.

	* bibtex.el (bibtex-String, bibtex-Preamble): Renamed from
	bibtex-string and bibtex-preamble.
	(bibtex-String): If bibtex-maintain-sorted-entries and
	bibtex-sort-ignore-string-entries are both non-nil, read string
	key from minibuffer (with completion) and insert entry at correct
	location (as for normal entries).

	* bibtex.el (bibtex-autokey-titleword-first-ignore)
	(bibtex-autokey-titleword-abbrevs): Changed documentation: case of
	regexps doesn't matter anymore.
	(bibtex-field-const, bibtex-reference-key): Simplified to not
	contain uppercase letters.
	(member-of-regexp, assoc-of-regexp): Ignore case of regexp.
	(map-bibtex-entries): Call function not for every syntactical correct
	entry, but only for entries with known type.
	(map-bibtex-entries, skip-to-valid-bibtex-entry)
	(bibtex-flash-head, bibtex-enclosing-field)
	(bibtex-enclosing-reference-maybe-empty-head, bibtex-format-entry)
	(bibtex-autokey-change, bibtex-generate-autokey, bibtex-parse-keys)
	(bibtex-ispell-abstract, bibtex-sort-buffer)
	(bibtex-find-entry-location, bibtex-validate, bibtex-remove-delimiters)
	(bibtex-delete-optional-or-alternative-field, bibtex-pop)
	(bibtex-clean-entry, bibtex-print-help-message): Make them work
	regardless of user's value of case-fold-search.
	(bibtex-generate-autokey): Use bibtex-cfield for generating the
	year field regexp.
	(bibtex-parse-keys): Only gather keys of known (and not of
	syntactical correct) entries.
	(bibtex-end-of-entry): Only report an "unknown entry" message if
	called interactively.

	* bibtex.el (bibtex-sort-ignore-string-entries): Renamed back from
	bibtex-sort-ignore-string-and-preamble.  Of course, preambles are
	always ignored, since they have no key at all.
	(bibtex-string): Slightly less complex regexp.
	(skip-to-valid-bibtex-entry): New helper function to skip forward
	(or backward) to beginning of next syntactical correct known
	BibTeX entry, if not already there.  Respects
	bibtex-sort-ignore-string-entries.
	(map-bibtex-entries): Bug fix: It wasn't called for string entries
	even if bibtex-sort-ignore-string-entries was nil.
	(beginning-of-last-bibtex-entry): New helper function to go to
	last entry in buffer.
	(bibtex-end-of-entry): Bug fix: Now works with string and preamble
	entries as well.
	(bibtex-sort-buffer): Renamed from bibtex-sort-entries.  Simplified
	by using new function skip-to-valid-bibtex-entry.  Now only known
	entries are checked.
	(bibtex-find-entry-location): Simplified by using new functions
	skip-to-valid-bibtex-entry and beginning-of-last-bibtex-entry.
	Only known entries are used to determine location.
	(bibtex-validate): Now checks string entries, too.
	(bibtex-move-outside-of-entry): Don't use forward-paragraph, but
	bibtex-end-of-entry.

	* bibtex.el (bibtex-end-of-entry): Don't use forward-sexp anymore,
	since this fails on entries with non-escaped double-quotes.  Use
	search-bibtex-reference instead (though it is slower, it is more
	reliable).
	(bibtex-ispell-abstract): Use normal regexps created by
	bibtex-cfield instead of special ones.

	* bibtex.el (beginning-of-first-bibtex-entry): No warning on
	empty buffer.

	* bibtex.el (bibtex-validate): Bug fix.  Syntactical check didn't
	work, since due to a bug all entries were simply skipped.

	* bibtex.el (bibtex-mode): Doc fix.
	(bibtex-delete-optional-or-alternative-field): Renamed from
	bibtex-kill-optional-or-alternative-field.
	(bibtex-delete-optional-or-alternative-field, bibtex-empty-field):
	Use delete-region, not kill-region.
	(bibtex-clean-entry): New second argument called-by-reformat
	indicates if bibtex-clean-entry was called by reformat.  Don't try
	to find correct buffer position for newly generated key and don't
	call bibtex-parse-keys in this case.

	* bibtex.el (map-bibtex-entries): Bugfix (missed first entry in
	buffer, died on entries with `@' in other than first column).
	(beginning-of-first-bibtex-entry, bibtex-format-entry)
	(bibtex-beginning-of-entry, bibtex-validate, bibtex-clean-entry):
	Changed to allow BibTeX entries to start in a column different
	from 1 (but still for speed reasons only whitespace is allowed
	prior to the `@' on the same line.

	* bibtex.el (map-bibtex-entries): Call it for known BibTeX entries
	only.  This allows entries as @Comment{...} which follow no
	specific structure without breaking the validation functions.
	(bibtex-validate): Check syntactical structure for known entries
	only.

	* bibtex.el (bibtex-autokey-abbrev): Sped up and changed to allow
	a length of zero.

	* bibtex.el (bibtex-entry-format): Remove option `month-strings'.
	(bibtex-validate): If given a prefix argument, check for
	questionable month fields.

	* bibtex.el (bibtex-generate-autokey): Use normal regexps created
	by bibtex-cfield instead of special ones.
	(bibtex-hide-entry-bodies): Sped up by using subst-char-in-region
	instead of using replace-regexp or replace-match.
	(bibtex-find-entry-location): A bug had been introduced by using
	search-bibtex-reference instead of re-search-forward (fixed).

	* bibtex.el (bibtex-field-delimiters): Renamed from
	bibtex-field-delimiter.
	(bibtex-entry-format): Constant empty-opts renamed to
	empty-opts-or-alts.
	(bibtex-remove-delimiters): Renamed from
	bibtex-remove-double-quotes-or-braces.
	(bibtex-reformat): New function.

	* bibtex.el (bibtex-fill-entry): New function to refill entry.
	(bibtex-mode-map): Defined key for bibtex-fill-entry.

	* bibtex.el (bibtex-field-delimiter): Substitutes variables
	bibtex-field-left-delimiter and bibtex-field-right-delimiter.
	(bibtex-field-left-delimiter, bibtex-field-right-delimiter): New
	helper functions.
	(bibtex-make-field, bibtex-pop): Use new variable
	bibtex-field-delimiter.
	(bibtex-empty-field, bibtex-string): Use new functions
	bibtex-field-left-delimiter and bibtex-field-right-delimiter.
	(bibtex-predefined-month-strings): New variable.
	(bibtex-predefined-strings): Use bibtex-predefined-month-strings.
	(bibtex-submit-bug-report): Use new variables
	bibtex-field-delimiter and bibtex-predefined-month-strings.

	* bibtex.el (bibtex-entry-format): Substitutes variable
	bibtex-clean-entry-zap-empty-opts-or-alts.  Various types of
	formatting options are available (see variable documentation).
	(bibtex-format-entry): New function doing the formatting of entries.
	Taken from bibtex-clean-entry and enhanced to support new variable
	bibtex-entry-format.
	(delete-whitespace): New helper function used by bibtex-format-entry.
	(bibtex-clean-entry): Call new function bibtex-format-entry.
	(bibtex-submit-bug-report): Use bibtex-entry-format instead of
	bibtex-clean-entry-zap-empty-opts-or-alts.
	(bibtex-do-auto-fill): New function to perform auto-filling in
	BibTeX mode.  In fact, this is the old function
	bibtex-auto-fill-function.
	(bibtex-mode): Don't set fill-prefix anymore, but use new function
	bibtex-do-auto-fill.

	* bibtex.el (bibtex-find-entry-location): Fixed bug (when
	bibtex-maintain-sorted-entries was non-nil, an entry with a key
	greater than all other keys wasn't inserted in the correct place).

	* bibtex.el (bibtex-mode): Don't use bibtex-auto-fill-function
	anymore, but use directly variable fill-prefix.

	* bibtex.el (bibtex-find-entry-location): Fixed bug (on duplicate
	keys, point must move to beginning of entry, so that bibtex-entry
	works correctly).

	* bibtex.el (bibtex-complete): Fixed bug (parameter string-list
	was mistakenly altered by the function itself).

	* bibtex.el (bibtex-mode-map): Bind bibtex-complete-key to C-TAB.

	* bibtex.el (bibtex-validate): Renamed from bibtex-validate-buffer
	since it can acts on region if active.  Use search-bibtex-reference.
	(search-bibtex-reference): New function to be used in places where
	prior a re-search-{forward|backward} for bibtex-reference or
	something alike was used.  This function is necessary due to the
	new limit of failure stack size in 19.32 and above.
	(bibtex-enclosing-reference-maybe-empty-head)
	(bibtex-sort-entries, bibtex-find-entry-location, bibtex-validate):
	Use new function search-bibtex-reference.
	(bibtex-pop, bibtex-clean-entry): Small change due to change in
	bibtex-enclosing-reference-maybe-empty-head.
	(bibtex-reference-infix, bibtex-reference-postfix): New constants
	necessary due to splitting bibtex-reference.
	(bibtex-reference): Deleted.
	(bibtex-type-in-reference, skip-whitespace-and-comments): Deleted.

	* bibtex.el (bibtex-mode): Don't turn auto-fill-mode on.  Use new
	variable normal-auto-fill-function.

	* bibtex.el (bibtex-field-string): Simplified.

	* bibtex.el (bibtex-mode-syntax-table): Changed syntax of
	double-quote back to quote syntax.

	* bibtex.el (bibtex-complete): New generic function for interface
	functions bibtex-complete-string and bibtex-complete-key.
	(bibtex-complete-key): New function.

	* bibtex.el (bibtex-sort-ignore-string-and-preamble): Renamed from
	bibtex-sort-ignore-string-entries.
	(map-bibtex-entries): Use bibtex-sort-ignore-string-and-preamble
	and ignore preamble entries as well.
	(bibtex-mode, bibtex-submit-bug-report, bibtex-sort-entries):
	Use bibtex-sort-ignore-string-and-preamble.
	(bibtex-count-entries): New function to count entries in buffer or
	region.

	* bibtex.el (bibtex-comma-after-last-field): New variable to
	decide if comma should be inserted at end of last field.
	(bibtex-entry): Support new variable bibtex-comma-after-last-field.

	* bibtex.el (bibtex-field-indentation, bibtex-text-indentation):
	Two new user options (replacing the former constants
	bibtex-field-alignment and bibtex-text-alignment).
	(bibtex-align-at-equal-sign): New user option.
	(bibtex-auto-fill-function, bibtex-make-field)
	(bibtex-remove-OPT-or-ALT, bibtex-clean-entry): Support new variables.

	* bibtex.el (bibtex-validate-buffer): Now only checks region if
	mark is active.  With optional argument checks if required fields
	are missing, too.

	* bibtex.el (bibtex-mode): Added support for imenu.

	* bibtex.el (bibtex-entry-field-alist)
	(bibtex-mode-user-optional-fields): Modified syntax to allow
	preinitialization of fields.
	(bibtex-make-field, bibtex-make-optional-field):
	Support preinitialization of fields.

	* bibtex.el (bibtex-autokey-prefix-string)
	(bibtex-autokey-preserve-case): New variables to support
	bibtex-generate-autokey.
	(bibtex-generate-autokey): Use new variables.

	* bibtex.el (bibtex-field-const, bibtex-reference-type)
	(bibtex-reference-key): Changed to match the (according to Oren
	Patashnik) allowed characters.

	* bibtex.el (bibtex-clean-entry-zap-empty-opts-or-alts): Renamed
	from bibtex-clean-entry-zap-empty-opts.
	(bibtex-entry-field-alist): Slightly modified syntax to support
	alternative fields needed for Book and InBook references.
	(bibtex-font-lock-keywords, bibtex-print-help-message)
	(bibtex-make-field, bibtex-pop, bibtex-clean-entry):
	Support ALT prefixed entries.
	(bibtex-mode): Documented new ALT prefixed fields.
	(bibtex-make-optional-field): Modified to give only field name as
	arg to bibtex-make-field.
	(bibtex-remove-OPT-or-ALT, bibtex-kill-optional-or-alternative-field):
	Renamed from bibtex-remove-OPT and bibtex-kill-optional-field,
	respectively.  Modified to support ALT prefixes.

	* bibtex.el (bibtex-enclosing-field, bibtex-print-help-message):
	Speed up things by not using bibtex-enclosing-regexp anymore.
	(bibtex-enclosing-regexp): Function deleted.

1997-06-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Load latin-5.el.

1997-06-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* characters.el: Delete syntax stuff for Latin-1 and Latin-2.

	* mail-utils.el (mail-parse-comma-list):
	Use buffer-substring-no-properties.

	* debug.el (debug): Set overriding-terminal-local-map to nil,
	don't bind it, so it won't be restored on `q'.

1997-06-09  Thomas Wurgler  <twurgler@goodyear.com>

	* emacs-lock.el: Added the string "emacs-lock" to all function
	and variable names, to make them unique to emacs-lock.

	* emacs-lock.el (check-was-buffer-locked): New function,
	on shell-mode-hook and telnet-mode-hook.
	(save-buffer-lock-setting): New permanent local variable.

	* emacs-lock.el (check-buffer-lock): New function, on kill-buffer-hook.
	(set-shell-sentinel): New function, on shell-mode-hook
	and telnet-mode-hook.

1997-06-09  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Typo in the previous change fixed.

1997-06-09  Kenichi Handa  <handa@etl.go.jp>

	* mule.el: Delete declaration for buffer-file-coding-system.  It
	is done in buffer.c now.  In the comment, change coding-system to
	coding system.  The name coding-vector is changed to coding-spec.
	(coding-vector-type, coding-vector-mnemonic)
	(coding-vector-docstring, coding-vector-flags): Deleted.
	(coding-system-spec-ref): New function.
	(coding-system-type, coding-system-mnemonic, coding-system-flags):
	Use coding-system-spec-ref.
	(coding-system-doc-string): Renamed from coding-system-docstring.
	(coding-system-eol-type): Renamed from coding-system-eoltype.
	(coding-system-eol-type-mnemonic): Moved to mule-util.el.
	(coding-system-post-read-conversion): Likewise.
	(coding-system-pre-write-conversion): Likewise.
	(default-process-coding-system): Deleted.  Now declared in
	buffer.c.
	(make-subsidiary-coding-system): New function.
	(make-coding-system): Check arguments more strictly.  Do not make
	-unix, -dos, -mac variants for TYPE 4.
	(define-coding-system-alias): Call make-subsidiary-coding-system.
	(set-buffer-file-coding-system): Adjusted for the function name
	changes.
	(find-new-buffer-file-coding-system): Likewise.
	(default-process-coding-system): Deleted.  Now defined in coding.c.

	* mule-conf.el: Coding system names changed.

	* language: Most of files under this directory are modified
	because of changes of coding system names.

	* characters.el: Comment changed (iso-2022-7 -> iso-2022-7bit).

	* kkc.el (kkc-save-init-file): Coding system name changed from
	iso-2022-7 to iso-2022-7bit.

	* skkdic-conv.el: Likewise.

	* titdic-conv.el: Likewise.

	* mule-cmds.el: Define mouse-set-font in mule-menu-keymap.
	Disable menu set-buffer-process-coding-system if there's no
	process for the current buffer.
	(command-execute-with-coding-system): New function.
	(universal-coding-system-argument): Make it handle
	universal-argument correctly.
	(describe-language-support): Call coding-system-doc-string instead
	of coding-system-docstring.

	* mule-diag.el (describe-coding-system): Change format of output.
	(describe-current-coding-system-briefly): Likewise.
	(describe-current-coding-system): Likewise.
	(print-coding-system-briefly): Likewise.
	(print-coding-system): Likewise.
	(list-coding-systems): Likewise.  Make it interactive.

	* mule-util.el (set-coding-system-alist): Deleted.
	(string-to-sequence): Doc string modified.
	(coding-system-list): Add optional arg BASE-ONLY.
	(coding-system-base): New function.
	(coding-system-plist): New function.
	(coding-system-equal): New function.
	(coding-system-unification-table): New function.

	* quail.el (quail-prefix-arg): New variable.
	(quail-start-translation): Make it handle a prefix argument.
	(quail-terminate-translation): Like wise.

	* simple.el (do-auto-fill): Bug fix for kinsoku processing.

1997-06-09  Erik Naggum  <erik@naggum.no>

	* latin-1.el: Normalized character names.
	* latin-2.el: Normalized character names.
	* latin-3.el: Normalized character names.
	* latin-4.el: Normalized character names.
	* latin-5.el: New file.

1997-06-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* webjump.el (webjump-sample-sites): Change the hot list.
	(webjump): Doc change.

	* mailalias.el (mail-directory-parser): Fix previous change.

1997-06-08  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-string-preprocess, time-stamp-do-number):
	Avoid compiler warnings: pass all arguments to time-stamp-do-number
	explicitly, not dynamically.

1997-06-08  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-font-lock-keywords-2): Use regexp-opt for the regexps.

1997-06-08  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Update keywords to show up in finder.
	(browse-url-gnudoit-args, browse-url-generic-program)
	(browse-url-gnudoit-program, browse-url-generic-args): New variables.
	(browse-url-w3-gnudoit): New procedure.
	(browse-url-mmm): New location of `remote' file for MMM 0.4.
	(browse-url-generic): New procedure.

	(browse-url-netscape): Test for w32.

	(browse-url-url-at-point): Assume mailto: if URL contains @.
	Don't use thingatpt; find the URL here to do it correctly.

	(browse-url-at-point, browse-url-of-file, browse-url-at-mouse):
	Call browse-url.
	(browse-url): Check for list browse-url-browser-function.
	(browse-url-choose-browser): New procedure.
	(browse-url-browser-function): Allow list value.

	(browse-url-process-environment): Call browse-url-emacs-display.
	(browse-url-emacs-display): New procedure.
	(browse-url-netscape-display): New variable.

	(browse-url-of-region): New procedure.
	(browse-url-of-buffer): Check for narrowed buffer.

	(browse-url-url-at-point): Rewrite to not use cl.el delete-if.
	Fix multi-line URL matching.

	(browse-url-markedup-regexp): New variable.
	(browse-url-xterm-program): New variable.
	(browse-url-xterm-args): New variable.
	(browse-url-lynx-xterm): Use the above two vars.
	(browse-url-url-at-point): Use buffer-substring-no-properties.
	(browse-url-grail): Add missing optional arg.
	(browse-url-mmm): New procedure.

	(browse-url-netscape-startup-arguments): New variable.

1997-06-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* debug.el (debug, debugger-eval-expression):
	Treat overriding-terminal-local-map like overriding-local-map.
	(debugger-outer-overriding-terminal-local-map): New variable.

1997-06-07  Thomas Wurgler  <twurgler@goodyear.com>

	* emacs-lock.el: Check for a lock when deleting a buffer.
	Turn off the lock on a shell or telnet buffer if its process
	is killed.  Reset the lock if the process is restarted.

1997-06-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-name-non-special): Handle
	file-name-completion and file-name-all-completions.

	* mailalias.el: Customize.  Doc fixes.
	Mark some risky local variables.

	* dired.el (dired-unmark-all-marks):
	Renamed from dired-unmark-all-files-no-query.

	* language/european.el (setup-8-bit-environment):
	Load the file with load, not require, so that we reload it if nec.

	* language/english.el ("English"): Improve doc string.

	* language/indian.el (describe-indian-environment-map):
	Renamed from describe-indian-support-map.
	* language/devanagari.el: Corresponding changes.

	* language/european.el (describe-european-environment-map):
	Renamed from describe-european-support-map.

	* language/cyrillic.el (describe-cyrillic-environment-map):
	Renamed from describe-cyrillic-support-map.

	* language/chinese.el (describe-chinese-environment-map):
	Renamed from describe-chinese-support-map.

	* mule-cmds.el (describe-language-environment):
	Renamed from describe-language-support.
	Do the real work here; don't call describe-specified-language-support.
	Print the mnemonics when mentioning coding systems.
	Improve style of output.
	(describe-specified-language-environment):
	Renamed from describe-specified-language-support.
	Don't do the work here; call describe-language-environment.
	(describe-language-environment-map):
	Renamed from describe-language-support-map.

	* language/european.el (setup-8-bit-environment):
	Do not set set-case-syntax-offset.
	Subtract 128 when setting nonascii-insert-offset.
	Require latin-N if appropriate.

1997-06-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line): Don't call face-initialize.

	* diff.el (diff-command): Fix previous change.

	* startup.el (command-line): If environment specifies ISO 8859,
	always set up for both single-byte and multibyte operation.
	But set-language-environment does most of the job now.

1997-06-06  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* regexp-opt.el (regexp-opt): Doc fix.
	(regexp-opt-group): When extracting character sets, emit them after
	the remaining strings so the regexp will find the longest match.

1997-06-05  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* follow.el (set-process-filter): Advice doc fix.

1997-06-04  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-format): Doc fix.  Use %:y.
	(time-stamp-string-preprocess): Don't just call format-time-string;
	handle compatibility for some old constructs.  Handle padding
	the historical way, while giving a warning if people actually
	depend on it.
	(time-stamp-conv-warn, time-stamp-conversion-warn)
	(time-stamp-do-number): New functions.

1997-06-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* diff.el: Customize.
	(diff-switches, diff-command): Add autoload cookies.

	* vc.el (diff-switches): defvar deleted.

	* format.el (format-insert-file): Fix arg order to format-decode.

1997-06-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-kill-line): Fixed for overlays.

	* cus-edit.el (custom-buffer-create-internal): Show full
	documentation string in buffers with only a single item.

	* cus-edit.el (custom-mode-map): Suppress keymap.

	* wid-edit.el (widget-beginning-of-line): Work with overlays.
	(widget-end-of-line): Ditto.
	(widget-specify-inactive): Use inactive for mouse-face as well.
	(widget-read-event): New alias.
	(widget-button-click): Use it.
	Don't execute up events twice.
	(widget-field-end): Workaround for local-map at
	end of overlay.
	(widget-specify-field): Ditto.
	(widget-move): Fixed but with single button buffers.

	* cus-edit.el (custom-buffer-create-internal): Improved help
	strings for reset buttons.

	* wid-edit.el (widget-move): Restored support for
	`widget-echo-help' and `widget-move-hook'.
	(widget-documentation-string-value-create): Restore support for
	`widget-documentation--face'.

	* cus-edit.el (customize-variable-other-window): Added defalias.

	* widget.el (:complete): New keyword.
	(:complete-function): New keyword.
	* wid-edit.el (widget-complete): New command.
	(widget-keymap): Bind it.
	(widget-complete-field): New option.
	(widget-default-complete): New function.
	(default): Bind :complete.
	(string): Bind :complete-function.
	(sexp): Ditto.

	* wid-edit.el (widget-glyph-find): Would infloop when file not found.

	* wid-edit.el (widget-glyph-find): Try to avoid pure text glyphs.
	(widget-glyph-insert): Update doc string.

	* wid-edit.el (widget-button-click): Didn't restore `mouse-face'.

	* widget.el: Removed :hide-front-space and :hide-rear-space.

1997-06-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* informat.el (Info-tagify): Don't set Info-tag-table-marker
	if not in Info mode.

1997-06-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sendmail.el (mail-setup): Don't set buffer-file-coding-system to nil.
	Instead, kill the local binding of it.

1997-06-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* mouse-drag.el (mouse-drag-safe-scroll): Doc fix.
	(mouse-drag-repeatedly-safe-scroll): Doc fix.
	(mouse-drag-events-are-point-events-p): Doc fix.
	(mouse-drag-should-do-col-scrolling): Doc fix.
	(mouse-throw-with-scroll-bar): Doc fix.

	* follow.el (follow-windows-aligned-p): Doc fix.
	(follow-post-command-hook, follow-recenter): Doc fix.
	(follow-end-of-buffer, follow-windows-aligned-p): Doc fix.
	(follow-post-command-hook, follow-maximize-region): Doc fix.
	(set-process-filter, process-filter, move-overlay): Advice doc fix.

1997-06-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* text-mode.el (spaced-text-mode): Renamed from text-mode.
	But change the mode name and hooks.
	(text-mode): Put the guts of indented-text-mode here.
	But don't define text-mode-abbrev-table, just use it.
	Don't set indent-line-function, and use text-mode-map.
	(indented-text-mode): Call text-mode.

	* cus-edit.el (custom-variable-prompt): Change prompt.

	* sendmail.el (mail-setup): Clear out buffer-file-coding-system.

1997-06-02  Martin Lorentzson  <emwson@emw.ericsson.se>

	* vc-hooks.el (vc-annotate): Entry "Annotate" added to menu and
	function `vc-annotate' to key-sequence `C-x v g'.

	* vc.el (vc-annotate-*): New functions and variables.

1997-06-02  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el (ediff-toggle-multiframe): Improved.
	(ediff-setup, ediff-inferior-compare-regions): Modified.
	(ediff-setup): Bug fixed.
	* ediff-init.el (ediff-file-attributes): Use ediff-file-remote-p.
	* ediff-wind.el (ediff-setup-windows-multiframe-merge)
	(ediff-setup-windows-multiframe-compare): Improved window placement.
	* ediff-diff.el (ediff-make-fine-diffs):
	Fixed messages about whitespace regions.
	* ediff-wind.el, ediff-ptch.el, ediff-mult.el, ediff-merg.el:
	custom.el'ed.

1997-06-02  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el (vip-parse-sexp-ignore-comments): New variable.
	* viper-cmd.el (vip-paren-match): Parsing comments is now controlled
	with vip-parse-sexp-ignore-comments.
	* viper-cmd.el (vip-goto-col): Fixed.
	* viper-cmd.el (vip-autoindent): Now expands abbrevs.
	(vip-adjust-keys-for): Unbinds vip-autoindent, if vip-auto-indent
	is nil.
	* viper-cmd.el (vip-prefix-arg-value): Fixed computation of integer
	prefix args.
	* viper-cmd.el, viper-init.el: New files.

1997-06-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* easy-mmode.el: New file.

	* reftex.el: Many doc fixes.
	(reftex-mode-menu): Change menu items.

	* language/cyrillic.el (koi8-r): Use R for mode line.

	* language/european.el (iso-8859-1): Use `1' for mode line.
	(Latin-1...Latin-4 coding systems): Add lists of languages
	which use these coding systems.

1997-06-01  Rolf Ebert  <ebert@waporo.muc.de>

	* ada-mode.el (ada-mode): Set up support for find-file.el.
	(ada-other-file-alist): New variable moved from find-file.el.
	(ada-search-directories): Likewise.

	* find-file.el
	(ada-other-file-alist): Variable definition moved to ada-mode.el.
	(ada-search-directories, ada-procedure-start-regexp): Likewise.
	(ada-package-start-regexp): Likewise.

	* ada-mode.el: Customize.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* smtpmail.el: Include time-stamp.
	(smtpmail-queue-dir, smtpmail-queue-index-file): New variables.
	(smtpmail-queue-mail): New variable.
	(smtpmail-send-it): Handle those variables.
	(smtpmail-send-queued-mail): New command.

	* filecache.el: New file.
	* meta-mode.el: New file.
	* battery.el: New file.
	* easy-mmode.el: New file.

	* rmail.el (rmail-mmdf-delim1, rmail-mmdf-delim2):
	Variables renamed from mmdf-delim1 and mmdf-delim2.

1997-06-01  Roderick Schertler  <roderick@ibcinc.com>

	* gud.el (gud-dgux-p, gud-dguxdbx-marker-filter): New functions.
	(dbx): Use them.

1997-06-01  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el (hs-show-hidden-short-form): Updated doc string.
	(hs-adjust-block-beginning): Likewise.
	(hs-special-modes-alist): C and C++ should also use
	hs-c-like-adjust-block-beginning.
	(hs-find-block-beginning): If hs-adjust-block-beginning is t and
	we apply hs-adjust-block-beginning and we reach the point means
	that we found the block beginning.
	(hs-c-like-adjust-block-beginning): Renamed from
	java-hs-adjust-block-beginning.

1997-06-01  Simon Leinen  <simon@switch.ch>

	* smtpmail.el (smtpmail-via-smtp): Recognize XVRB as a synonym for
	VERB and XONE as a synonym for ONEX.

	(smtpmail-read-response): Add "%s" to `message' calls to avoid
	problems with percent signs in strings.

	* smtpmail.el (smtpmail-read-response): Return all lines of the
	response text as a list of strings.  Formerly only the first line
	was returned.  This is insufficient when one wants to parse
	e.g. an EHLO response.

	Ignore responses starting with "0".  This is necessary to support
	the VERB SMTP extension.

	(smtpmail-via-smtp): Try EHLO and find out which SMTP service
	extensions the receiving mailer supports.

	Issue the ONEX and XUSR commands if the corresponding extensions
	are supported.

	Issue VERB if supported and `smtpmail-debug-info' is non-nil.

	Add SIZE attribute to MAIL FROM: command if SIZE extension is
	supported.

	Add code that could set the BODY= attribute to MAIL FROM: if the
	receiving mailer supports 8BITMIME.  This is currently disabled,
	since doing it right might involve adding MIME headers to, and in
	some cases reencoding, the message.

1997-06-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el: Changed to overlays.
	* cus-edit.el (custom-buffer-create-internal): Remove kludge for
	getting read-only bob and eob in XEmacs.
	* wid-browse.el (widget-browse-at): Use `get-char-property'
	instead of `get-text-property'.
	* widget.el (:value-from :value-to): Deleted.
	* widget.el (:button-overlay, :field-overlay): New keywords.
	* wid-edit.el (widget-default-delete): Delete overlays.
	(widget-field-value-delete): Delete overlay.

	* wid-edit.el (widget-specify-field-update): Specify both
	`balloon-help' and `help-echo'.

	* wid-edit.el (visibility): Change "more" to "show".

	* cus-edit.el (:custom-category): New keyword.
	(custom-variable): Add it.
	(custom-face): Ditto.
	(custom-group): Ditto.
	(custom-magic-value-create): Replace %c with category in state
	text.
	(custom-magic-alist): Use it.
	(custom-magic-show-hidden): Allow control on each custom
	category.
	(custom-magic-value-create): Ditto.
	(custom-reset-current): Ignore extra arguments.
	(custom-reset-saved): Ditto.
	(custom-reset-standard): Ditto.
	(custom-reset-button-menu): New option.
	(custom-buffer-create-internal): Use it.

	* cus-edit.el (customize-variable): Uncomment alias.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sun-curs.el (sc::cursors): Add an eval-and-compile.

1997-06-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-format-handler): Changed look of group
	indicators.

	* wid-edit.el (widget-kill-line): Use forward-line instead of
	search-forward.

	* cus-edit.el (custom-magic-value-create): Cleanup.

	* wid-edit.el (set-text-properties): Redefine for broken XEmacsen.
	(widget-field-value-get): Remove workaround.
	(widget-specify-button): Specify both `balloon-help' and `help-echo'.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-variable-prompt):
	Handle variable-at-point returning 0.
	(customize-option): Renamed from custom-variable.
	(customize-variable): Add it as an alias.
	(customize-option-other-window):
	Renamed from customize-variable-other-window.
	(custom-load-symbol): Search for both short and absolute
	names of the library, when avoiding duplicate loading.

1997-05-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-utils.el (mail-strip-quoted-names): Don't delete angle brackets
	when there's a colon inside them.

	* iso-cvt.el: Require `format'.
	(iso-translate-conventions): Take bounds as args.
	(iso-spanish, iso-german): Take bounds as args.
	(iso-iso2tex, iso-tex2iso, iso-gtex2iso, iso-iso2gtex): Likewise.
	(iso-iso2duden-trans-tab): New variable.
	(iso-iso2duden): New command.
	(iso-cvt-read-only, iso-cvt-write-only): New commands.
	(is-german-tex-p): Function deleted.
	(iso-fix-iso2tex, iso-fix-tex2iso): Functions deleted.
	(iso-cvt-ffh, iso-cvt-wfh, iso-cvt-ash): Functions deleted.
	(iso-cvt-define-menu): New function.

	* format.el (format-encode-run-method): New function.
	(format-decode-run-method): New function.
	(format-alist): Add many new formats.
	(format-annotate-function): Use format-encode-run-method.
	(format-encode-region): Likewise.
	(format-decode): Use format-decode-run-method.

	* startup.el (command-line): Detect Latin-N character sets
	from envvars, both for multibyte mode and single-byte mode.

1997-05-31  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-format-handler): Don't show links for hidden
	items.

	* wid-edit.el (widget-button-prefix): Move to `widget-button' group.
	(widget-button-suffix): Ditto.

	* cus-edit.el (custom-format-handler): New %e and %- escapes.
	(custom-group): Use them.

	* widget.el (:widget-doc): Removed keyword.
	* wid-edit.el (widget-help): Removed widget.
	(widget-help-action): Removed function.

	* widget.el (:documentation-shown): New keyword.
	* wid-edit.el (documentation-string): New widget.
	(widget-documentation-string-value-create): New function.
	(widget-documentation-string-action): New function.
	(widget-default-format-handler): Use them.
	* cus-edit.el (custom-toggle-hide): Hide documentation.

	* cus-edit.el (custom-buffer-sort-predicate): Fix :type.
	(custom-menu-sort-predicate): Ditto.

	* wid-edit.el (visibility): New widget.
	(widget-visibility-value-create): New function.
	(widget-glyph-find): New function.
	(widget-glyph-insert): Use it.
	* cus-edit.el (custom-variable-menu, custom-face-menu)
	(custom-group-menu): Remove `Hide' entry.
	(custom-magic-show-hidden): New option.
	(custom-magic-value-create): Use it.
	(custom-face): Show visibility.

	* wid-edit.el (widget-glyph-insert-glyph): Clean up.

1997-05-31  Dan Nicolaescu  <done@ece.arizona.edu>

	* cpp.el (cpp-highlight-buffer): Make sure
	buffer-invisibility-spec contains `cpp'.
	(cpp-make-overlay-hidden): Use `cpp' as an invisible property.

	* hideshow.el (hs-hide-comments-when-hiding-all)
	(hs-show-hidden-short-form, hs-minor-mode-hook): Move definitions up.
	Use defcustom.
	(hs-find-block-beginning): Bind buffer-size, don't call it in a cycle.
	(hs-hide-all): Likewise.

1997-05-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/european.el: Rename language environments from
	LatinN to Latin-N.

	* mule-cmds.el (set-language-environment): Add autoload cookie.
	Renamed from setup-language-environment.

	* startup.el (iso-8859-n-locale-regexp): Renamed from
	iso-8859-1-locale-regexp.

	* loadup.el: Always load faces.el.

	* faces.el (make-face): Call make-face-internal only if defined.
	(internal-set-face-1): Call set-face-attribute-internal
	only if it is defined.

1997-05-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-load-symbol): Don't reload a file
	that is already loaded.
	(custom-load-symbol): Simplify previous change.

	* wid-edit.el (widget-sexp-value-to-internal):
	Don't bother with pp for a symbol.

	* wid-edit.el: Don't require cl.
	(widget-default-format-handler): Don't use push.
	(widget-push-button-value-create)
	(widget-group-value-create)
	(widget-sublist): New function.
	(widget-item-match-inline): Use widget-subllist.
	(widget-remove-if): New function.
	(widget-choose): Use widget-remove-if.

	* cus-edit.el (cus-start): Require cus-start.
	(mule): Make i18n the parent group.

	* cus-start.el: Arrange to load it once during dumping,
	and again if needed by cus-edit.el.
	(custom-start-quote): Don't define as separate function.
	(load-path): Improve the :type.
	(delete-exited-processes): Fix group to processes-basics.

	* subr.el (substitute-key-definition): Check vectorp, not arrayp.

	* files.el (file-name-non-special): Special handling for
	substitute-in-file-name operation.

	* hippie-exp.el (he-dabbrev-skip-space, he-dabbrev-as-symbol):
	Move definitions up.  Use defcustom.

1997-05-30  Ken Manheimer  <klm@python.org>

	* icomplete.el: Integrated Emacs 19.34 and XEmacs 19.15 corrections
	(typos, style, command revisions, etc).

	* icomplete.el: Integrated immediate keybindings display.  See
	`icomplete-show-key-bindings', `icomplete-get-keys', and
	`icomplete-completions'.

	* icomplete.el (icomplete-get-keys): Return keys bound in prior
	buffer to func name.

	* icomplete.el: Added icomplete delay behavior, so completions
	don't intrude as quickly for short input, with customization
	variables:
	(icomplete-max-delay-chars): Maximum number of initial chars to
	apply icomplete compute delay.
	(icomplete-compute-delay): Completions-computation stall, used
	only with large-number completions.
	(icomplete-delay-completions-threshold): Pending-completions
	number over which to apply icomplete-compute-delay.

1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (line-move): If moving into intangible text,
	try to move to the end of the intangible segment if it's on that line.

	* simple.el (completion-setup-function): Do set completion-base-size.

1997-05-29  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el: Use `standard-value' instead of `factory-value'.

	* cus-edit.el (custom-variable-action): Clarified prompt.
	(custom-face-action): Ditto.
	(custom-group-action): Ditto.

	* cus-edit.el (custom-face-set): Call `face-spec-set' instead of
	`custom-face-display-set'.
	(custom-face-save): Ditto.
	(custom-face-reset-saved): Ditto.
	(custom-face-reset-standard): Ditto.

	* cus-edit.el (custom-buffer-sort-predicate): New option.
	(custom-buffer-sort-alphabetically): New function.
	(custom-group-value-create): Use them.
	(custom-menu-sort-predicate): New option.
	(custom-menu-sort-alphabetically): New function.
	(custom-menu-create): Use them.

	* cus-edit.el (custom-magic-alist): Shortened message.

	* cus-edit.el (custom-help-menu): Updated names.

	* cus-edit.el: Say `invoke' instead of `activate'.
	* wid-edit.el: Ditto.

	* wid-edit.el (widget-help): Fix format string.

	* cus-edit.el (custom-magic-value-create): Use push button
	brackets around state button.
	(custom-magic-value-create): Indent with three spaces.

	* cus-face.el (face-spec-set-match-display): Change error for
	unknown requirement to warning.

	* wid-edit.el (widget-link-prefix): Change to "[".
	(widget-link-suffix): Change to "]".

	* wid-edit.el (widget-color-item-button-face-get): Don't require
	facemenu for XEmacs.
	(widget-glyph-insert): Would bug out.

	* wid-edit.el (widget-glyph-directory): Fix doc. string.
	(widget-image-conversion): New option.
	(widget-glyph-insert): Use it.
	(widget-glyph-insert-glyph): No tag here.
	(widget-push-button-value-create): But here.

	* wid-edit.el (widget-field-face): Changed to dim gray.

	* wid-edit.el (widget-push-button-prefix): New option.
	(widget-push-button-suffix): New option.
	(widget-button): New group.

	* widget.el (:text-format): Removed.
	(:button-suffix): New keyword.
	(:button-prefix): New keyword.

	* wid-edit.el (widget-button-prefix): New variable.
	(widget-button-suffix): New variable.
	(widget-insert-indirect): New function.
	(widget-default-create): Use it.
	(default): Bind them.
	(widget-link-prefix): New option.
	(widget-link-suffix): New option.
	(link): Use them.
	(push-button): Don't use `:text-format'.
	(widget-push-button-value-create): Ditto.
	(widget-help): Update format.
	(checkbox): Ditto.
	(radio-button): Ditto.

	* cus-edit.el (custom-magic-alist): Use `invoke' instead of
	`push'.

	* cus-edit.el (custom-magic-alist): Changed rogue state message.

	* custom.el (defface): Doc fix.

	* cus-edit.el (mule): New group for MULE merged emacsen.
	(auto-save): Spelling fix.

	* cus-edit.el, custom.el: Renamed `factory' to `standard'
	everywhere.

	* cus-edit.el (custom-magic-show-button): Changed default to
	`nil'.
	(custom): Removed `:format'.
	(custom-variable): Removed level button.
	(custom-face): Ditto.
	(custom-level): Deleted.
	(custom-level-action): Deleted.
	(custom-format-handler): Update caller.
	(custom-group-magic-alist): Merged into `custom-magic-alist'.
	(custom-magic-value-create): Use merged `custom-magic-alist'.
	(custom-group-state-update): Ditto.

1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-display-set): Define if not defined.
	(custom-buffer-create-internal): Refer to the Emacs manual.

1997-05-29  Anders Holst  <aho@nada.kth.se>

	* hippie-exp.el (he-file-name-beg): Don't trigger on parts of
	words with non-file chars.
	(he-lisp-symbol-beg): Use symbol syntax classes.
	(he-dabbrev-as-symbol): New variable.
	(he-dabbrev-beg, he-dabbrev-search, he-dabbrev-kill-search): Use it.

1997-05-29  Ken Manheimer  <klm@python.org>

	* icomplete.el: Integrated Emacs 19.34 and XEmacs 19.15
	corrections (typos, style, command revisions, etc).
	Integrated hacked up XEmacs immediate keybindings display.  See
	`icomplete-show-key-bindings', `icomplete-get-keys', and
	`icomplete-completions'.  Doesn't work with mainline GNU
	Emacs 19.34 (because the cmdloop doesn't set owindow, and the
	current-local-map doesn't take optional buffer arg), so feature
	is, by default, inhibited unless we're running in XEmacs.
	(icomplete-get-keys): Return keys bound to func name in buffer
	"owindow" - since "owindow" is calling-buffer history present
	only in XEmacs, this function is only useful in XEmacs.
	(icomplete-max-delay-chars, icomplete-compute-delay): New vars.
	(icomplete-delay-completions-threshold): New var.
	These customize the delay behavior, so that completions don't
	intrude as quickly for short input.

1997-05-29  Anders Lindgren  <andersl@csd.uu.se>

	* follow.el (follow-submit-feedback, follow-mode): Doc fix.
	(follow-generic-filter): Don't restore the original buffer if it's
	dead, or if the filter explicitly selected a new buffer.

1997-05-29  John Heidemann  <johnh@isi.edu>

	* mouse-drag.el (mouse-drag-electric-col-scrolling): New variable;
	auto-enables horizontal scrolling when clicks on wrapped
	lines occur.

1997-05-29  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (font-lock-syntactic-keywords): New variable.
	(font-lock-fontify-syntactic-keywords-region): New function.  Use it.
	(font-lock-default-fontify-region): Call it first if variable non-nil.
	Wrap parse-sexp-lookup-properties to non-nil if called.
	(font-lock-default-unfontify-region): Remove syntax-table properties.
	(font-lock-apply-syntactic-highlight)
	(font-lock-fontify-syntactic-anchored-keywords): New functions.
	These syntactic keyword fontification functions place syntax-table text
	properties in the buffer, in much the same way that keyword
	fontification functions place face text properties.  The syntax-table
	text properties are respected by syntactic and keyword fontification.
	(font-lock-eval-keywords): New function.
	(font-lock-set-defaults): Use it.
	(font-lock-keyword-depth): Function deleted.  Use regexp-opt-depth.

	* fast-lock.el (fast-lock-get-syntactic-properties): New function.
	(fast-lock-save-cache-1): Call it and save value.
	Save font-lock-syntactic-keywords.  Save 3 as version number.
	(fast-lock-cache-data): Take new args SYNTACTIC-KEYWORDS and
	SYNTACTIC-PROPERTIES.  Eval font-lock-syntactic-keywords with
	font-lock-eval-keywords.  Compile and compare all keywords.
	(fast-lock-get-syntactic-properties): New function.
	(fast-lock-add-properties): Renamed from fast-lock-set-face-properties.
	Take new arg SYNTACTIC-PROPERTIES and add syntax-table text properties.
	Now fast-lock.el saves a buffer's value of font-lock-syntactic-keywords
	and syntax-table text properties as added by font-lock.el.

	* sh-script.el (sh-font-lock-keywords*): Doc fixes.
	(sh-mode-syntax-table): Leave $ syntax alone.
	(sh-font-lock-syntactic-keywords): New variable.
	(sh-mode): Use it to set font-lock-defaults.

1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* edt.el (edt-emulation-on): Handle absence of TERM envvar.

	* iso-acc.el (iso-languages): For French and Portuguese,
	add comma as prefix.  For Latin-3, add period.
	Remove unnecessary backslashes before chars that don't need them.

	* edebug.el (edebug-signal): Avoid infinite recursion.

1997-05-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* regexp-opt.el: New file.

	* server.el (server-kill-buffer): Prevent infinite recursion.
	(server-kill-buffer-running): New variable.

1997-05-28  Hrvoje Niksic  <hniksic@srce.hr>

	* dired-aux.el: Customize.

1997-05-27  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el (hs-special-modes-alist): Include also the
	comment regexp in the alist.  This is needed for modes like C++
	where the comment beginning regexp is not easy to determine
	from the syntax table.
	Include ADJUST-BLOCK-BEGINNING in the alist.
	(hs-hide-comments-when-hiding-all): Add autoload cookie.
	(hs-show-hidden-short-form)
	(hs-adjust-block-beginning): New variables.

	Comment out `hs-menu-bar' as XEmacs support was removed.
	(hs-c-end-regexp): Remove variable, obsoleted by the rewrite of
	`hs-inside-comment-p'.

	(hs-discard-overlays): No need to test if we are inside the
	overlay, we surely are since we got the overlay using `overlays-at'.
	(hs-hide-block-at-point): Rewritten to use the new variables.
	Use only one parameter to specify the comment.
	(hs-show-block-at-point): No need for the COMMENT-REG parameter.
	(hs-safety-is-job-n): Correct typo.
	(hs-hide-initial-comment-block): Add ^L to the chars to skip.
	Take into account `hs-show-hidden-short-form' when testing.
	(hs-inside-single-line-comment-p): Function deleted, obsoleted by
	the rewrite of `hs-inside-comment-p'.
	(hs-inside-comment-p): Rewritten from scratch.  Semantics changed
	when returning non-nil.  We can be inside a comment, but that
	comment might not be hidable (the car of the return value should
	be non-nil to be hidable).
	(hs-grok-mode-type): Rewrite to be more understandable.
	`hs-c-end-regexp' does not exist any more.
	Initialize `hs-c-start-regexp' from the alist if specified there.
	Initialize `hs-adjust-block-beginning'.
	(hs-find-block-beginning): Rewritten to be able to deal with the
	situation when a block beginning spans multiple lines and the
	point is on one of those lines.
	(hs-already-hidden-p): Look first if we are inside a comment or a
	block, go to their end and look there for the overlays.
	(java-hs-adjust-block-beginning): New function.
	(hs-hide-all): Hide a comment block only if `hs-inside-comment-p'
	says is hidable.
	(hs-hide-block): Simplify.  Handle properly the result of
	`hs-inside-comment-p'.
	(hs-show-block): Likewise.
	(hs-minor-mode): Doc string fixes.
	Make `hs-adjust-block-beginning' buffer local.
	Delete making `hs-c-end-regexp' buffer local as it was deleted.

1997-05-27  Kenichi HANDA  <handa@nora.(none)>

	* mule.el (set-terminal-coding-system): New function.
	(set-keyboard-coding-system): New function.
	(set-buffer-process-coding-system): Name changed from
	set-current-process-coding-system.

	* encoded-kb.el (encoded-kbd-mode): Fix typo in doc-string.
	(encoded-kbd-set-coding-system): Deleted.

	* case-table.el (describe-buffer-case-table): Use aref instead of
	set-char-table-range.

	* loadup.el: Add comment for the code loading
	"language/devanagari".

	* mule-cmds.el: Delete defining "i" in mule-keymap.
	(mule-menu-keymap): New variable.  All menu items related to mule
	are defined in this keymap.
	(set-language-info): Change format of INFO for KEY documentation
	and setup-function.
	(setup-specified-language-environment): New function.
	(setup-language-environment): Call the above function.
	(describe-specified-language-support): New function.
	(describe-language-support): Call the above function.
	(universal-coding-system-argument): New function.
	(read-language-and-input-method-name): Doc-string fixed.  If
	default-input-method is nil, use previous-input-method as the
	default value.
	(set-default-input-method): Deleted.

	* language/*.el: Most of setup-LANGUAGE-environment functions are
	moved form LANGUAGE.el to LANG-util.el.  These functions now at
	first call setup-english-environment to reset various values to
	the defaults.

	* language/english.el (setup-english-environment): Set several
	default values more appropriately.

	* mule-conf.el: Set default value of coding-category-iso-else to
	iso-2022-lock.  Set priority of coding-category-emacs-mule higher.

	* files.el (find-file): Delete the facility of handling a prefix
	argument.
	(find-file-other-window, find-file-read-only): Likewise.
	(find-file-read-only-other-window): Likewise.
	(find-file-read-only-other-frame): Likewise.
	(find-alternate-file-other-window, find-alternate-file): Likewise.
	(write-file, insert-file, append-to-file): Likewise.

	* dired.el (dired-find-file): Likewise.

	* fontset.el (x-complement-fontset-spec): Add font names which are
	ignoring sizes in alternative-fontname-alist.

1997-05-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-undouble-last-event): Return nil if the event
	is not double or triple to start with.
	(mouse-show-mark): Handle scroll-bar events here.

1997-05-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* batmode.el: File deleted from distribution.

	* vi.el (vi-join-lines): Locally bind count.
	(vi-search-forward, vi-search-backward): Use isearch-update-ring.
	(vi-repeat-last-search, vi-reverse-last-search):
	Get string from the ring.
	(vi-mode-old-major-mode, vi-mode-old-mode-name): New defvars.
	(vi-mode-old-local-map, vi-mode-old-case-fold): Likewise.
	(vi-tilde-map): Move the defvar and bindings to the front.

	* ielm.el (ielm-input): New defvar.

	* browse-url.el (browse-url-netscape, browse-url-netscape-sentinel)
	(browse-url-netscape-send): Use browse-url-netscape-program,
	renamed from browse-url-netscape-command.

	* icon.el (indent-icon-exp): Bind last-depth.
	Consistently use inner-loop-done, not innerloop-done.

	* webjump.el (webjump-adult-p): Function deleted.

	* gulp.el (gulp-send-requests): Sort maintainers alphabetically.
	(gulp-create-m-p-alist): Don't print message here.  Bind fl-tm.
	(gulp-request-header, gulp-request-end): Update the default text.

	* info.el (Info-exit): Use bury-buffer simply.

1997-05-27  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-mode): Adapt to new hideshow and improve regexps.
	(icon-forward-sexp-function): Use beginning-of-icon-defun and
	end-of-icon-defun.

1997-05-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (search-highlight): Make it t by default.
	(search-invisible): Doc fix.

	* simple.el (do-auto-fill): Don't give fill-context-prefix third arg.

	* fill.el (adaptive-fill-regexp): Allow - and |;
	allow spaces within the prefix.  Allow numeric headings.
	(adaptive-fill-first-line-regexp): New variable.
	(fill-context-prefix): Use adaptive-fill-first-line-regexp.
	If prefix from first line seems unreasonable, use whitespace instead.
	Reject it entirely only if it is a paragraph-starter.

1997-05-26  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* comint.el (comint-send-input): When calculating the history entry,
	use insert to restore the old input, and insert before deleting.

	* ispell.el (ispell-overlay-window): Use inhibit-frame-unsplittable,
	instead of its old name.

1997-05-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el: Unconditionally create the standard faces at load time.
	Move face setup here from cus-start.el, and add attribute info.
	(x-create-frame-with-faces): Don't call frame-set-background-mode
	until after handling the reverse-video parameter.

	* cus-start.el: Move face setup to faces.el.

	* faces.el (modify-face): Don't call make-face-unbold
	if face has no font; likewise for make-face-unitalic.
	(x-create-frame-with-faces): Use nil for SET-ANYWAY
	when calling make-face-x-resource-internal.
	(face-initialize): Don't initialize any face attributes here.
	(face-fill-in): Don't call set-face-underline-p if underlining off.

	* subr.el (substitute-key-definition): Fix previous change.

	* Makefile (dontcompilefiles): Add latin-1.el ... latin-4.el;
	remove iso-syntax.el and i3-syntax.el.

1997-05-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* info.el (Info-suffix-list): Accept -info as suffix;
	also accept a subdir with a file called `index'.

	* texinfmt.el (texinfo-extra-inter-column-width):
	Renamed from extra-inter-column-width.  Doc fix.
	(texinfo-multitable-buffer-name):
	Variable renamed from multitable-temp-buffer-name.
	(texinfo-multitable-rectangle-name):
	Variable renamed from multitable-temp-rectangle-name.
	(texinfo-format-key): Don't insert angle-brackets.

1997-05-24  Robert J. Chassell  <bob@gnu.ai.mit.edu>

	* texinfo.el (texinfo-version): New function and variable.
	(texinfo-update-node): New autoload call.
	(texinfo-every-node-update): Likewise.
	(texinfo-sequential-node-update): Likewise.
	(texinfo-mode-map): New binding for C-c ].
	(texinfo-environment-regexp): Use concat, for clarity.
	(texinfo-insert-@end): Fix paren error.

	* texinfmt.el (texinfmt-version): New function and variable.
	(texi2info): New function.
	(texinfo-accent-commands): New variable.
	(texinfo-no-refill-regexp): Use concat to make it clearer.
	Add some more elements.
	(texinfo-part-of-para-regexp): Likewise.
	(texinfo-append-refill): Extend criterion 3 for when not to refill.
	(texinfo-raisesections-alist): Add @centerchap.
	(texinfo-lowersections-alist): Add @centerchap.
	(texinfo-format-scan): Handle many more @-char commands.
	(detailmenu): Add texinfo-format and texinfo-end properties.
	(centerchap): Add texinfo-format property.
	(texinfo-format-buffer): Doc fix.
	(texinfo-parse-line-arg): Add doc string.
	(texinfo-parse-arg-discard): Likewise.
	(texinfo-multitable): New Texinfo cmd.
	(texinfo-end-multitable): New function.
	(texinfo-multitable-widths): New function.
	(texinfo-multitable-extract-row): New function.
	(texinfo-multitable-item): New function.
	(texinfo-format-timestamp): New Texinfo cmd.
	(texinfo-format-kbd-regexp): New variable.
	(texinfo-format-kbd-end-regexp): New variable.
	(texinfo-format-kbd): New function for @kbd.
	(texinfo-format-ifeq): New Texinfo cmd.
	(texinfo-format-pounds): Likewise.
	(texinfo-format-refill): Handle *'s specially at line start.
	* Add properties for new commands.
	* Move all the no-op commands to the end, and add some.
	* Add many commands for ligatures and for letters with diacritics
	and other non-English special characters.

	* latin-1.el, latin-2.el, latin-3.el, latin-4.el:
	If set-case-syntax-set-multibyte is non-nil, define syntax
	for multibyte characters, and don't do `provide'.
	* case-table.el (set-case-syntax-set-multibyte): New variable.

1997-05-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* case-table.el (set-case-syntax-1): New function.
	(set-case-syntax-delims): Use set-case-syntax-1.
	(set-case-syntax-pair, set-case-syntax): Likewise.

1997-05-22  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* libc.el (libc-highlight-overlay): New variable.
	(libc-search-index): Use an overlay for highlighting.

	* libc.el: New file.

1997-05-22  Hrvoje Niksic  <hniksic@srce.hr>

	* terminal.el: Use defgroup and defcustom.
	* dired.el, dired-x.el: Likewise.

1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (face-inverse-video-p): New function.
	(set-face-inverse-video-p): New function.
	(internal-set-face-1): Handle the inverse-video attribute.
	(face-spec-set): Handle :inverse-video.
	(make-face, x-create-frame-with-faces): Make vectors length 9.
	(internal-facep): Expect length 9.
	(face-try-color-list): Use set-face-inverse-video-p.

	* cus-face.el (custom-face-attributes): Add :inverse-video.

1997-05-22  Erik Naggum  <erik@naggum.no>

	* latin-4.el: New file.

1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* latin-1.el, latin-2.el, latin-3.el:
	Use punctuation syntax for section sign.

	* reftex.el: New file.

1997-05-21  Steven L Baur  <steve@altair.xemacs.org>

	* add-log.el (change-log-font-lock-keywords): Tweak font-lock-keywords.

1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (substitute-key-definition): Handle chartables.

	* custom.el (defface): Doc fix.

1997-05-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (defface): Doc fix.

1997-05-21  Noah Friedman  <friedman@splode.com>

	* eldoc.el (eldoc-message-commands): Move docstring into comments,
	since this isn't a user variable.
	(eldoc-message-commands-table-size, eldoc-use-idle-timer-p)
	(eldoc-function-argstring-from-docstring-method-table): Use defvar,
	not defconst.
	(eldoc-last-data): Use cons explicitly; don't rely on dotted pair
	read syntax.  I'm worried the latter might get compiled as
	read-only data someday.
	(eldoc-docstring-message): If truncating symbol name, show ending
	of name rather than beginning.  The former is generally more unique.
	(eldoc-function-argstring-from-docstring-method-table): Handle
	pathological `save-restriction' case.
	[top level]: Add `indent-for-tab-command' to eldoc-message-commands.

1997-05-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* swedish.el: iso-syntax.el renamed to latin-1.el.

	* startup.el (command-line): iso-syntax.el renamed to latin-1.el.

	* loadup.el: Always load case-table and latin-1...latin-4.

	* latin-1.el: Renamed from iso-syntax.el.
	* latin-2.el: Renamed from iso02-syn.el.
	* latin-3.el: Renamed from i3-syntax.el.

	* cc-mode.el (c-C++-friend-key): Missing definition added back.

	* pc-select.el (pc-selection-mode): Swap meanings of f16 and f18;
	they were backwards.

	* awk-mode.el (awk-mode): Set parse-sexp-ignore-comments.

1997-05-21  Rolf Ebert  <re@waporo.muc.de>

	* ada-mode.el (ada-krunch-args): Use gnatkr instead of gnatk8.
	(ada-make-filename-from-adaname): Ditto.
	(ada-adjust-case-region): Use format functionality of message.
	(ada-indent-region): Ditto.
	(ada-check-matching-start): Ditto.
	(ada-check-defun-name): Ditto.

	* ada-mode.el (ada-font-lock-keywords): Default to subdued.  Doc fix.
	(ada-font-lock-syntactic-keywords): New variable.
	(ada-mode): Use it to set font-lock-defaults.

	* ada-mode.el (ada-font-lock-keywords-2): Single "raise" will be
	highlighted.  "in out" parameters get type face (depends on order
	in regexp).

	* ada-mode.el (ada-mode): Remove explicit setting of user option
	`blink-matching-paren', font-lock treats `.' as word char.
	(ada-in-string-or-comment-p): Call `parse-partial-sexp' only once.
	(ada-untabify-buffer): Force returning `nil'.
	(ada-font-lock-keywords-1): Move "task" before "task (body|type)" to
	correct highlighting (regexp depends on order).

	* ada-mode.el (ada-in-char-const-p): Renamed from `ada-after-char-p'.
	Also test following character.
	(ada-adjust-case): Use better function `ada-in-char-const-p'.
	(ada-in-string-or-comment-p): Test for being in a char constant.
	(ada-clean-buffer-before-saving): Changed default to t.
	(ada-mode): Set `font-lock-defaults' for Emacs only, use properties
	for XEmacs.

	* ada-mode.el (ada-indent-newline-indent): Simplified by just calling
	`ada-indent-current'.

	* ada-mode.el (ada-end-stmt-re): Added word delimiters in regexp.
	Removed `interactive' statements which were needed only for debugging.

	* ada-mode.el:
	Put format commands back in for Emacs 19.30/19.29 compatibility.

	* ada-mode.el (ada-get-indent-label): A named block can begin
	without a declare part.
	(ada-check-defun-name): First of all, check for correct name in a
	named block without `declare' part.
	(ada-goto-matching-start): Change regexp as there may be no
	semicolon between `end' and keyword.
	(ada-get-current-indent): Remove warning as `begin' can introduce
	a block without a `declare'.
	(ada-goto-matching-decl-start): When searching backward, skip
	generic default proc/func ("is <>").

	* ada-mode.el (ada-named-block-re): New regexp for the name of a
	named block or loop.
	(ada-get-current-indent): Handle loop names at the stmt start.
	(ada-get-indent-end): Handle loop names at the stmt start.
	(ada-get-indent-noindent): Handle loop names at the stmt start.
	(ada-get-indent-loop): Handle loop names at the stmt start.
	(ada-search-prev-end-stmt): Generic instances are not `stmt-ends'.
	(ada-goto-previous-word): Use new function `ada-goto-next-word'.
	(ada-goto-next-word): Generalized old `ada-goto-previous-word' for
	both directions.

	* ada-mode.el (ada-indent-function): Removed unnecessary `package' case.
	(ada-get-indent-case): Before testing for `=>', be sure there is
	an `is'.
	(ada-search-prev-end-stmt): Test for `separate' keyword on the
	same line, which is not an `end-stmt'.

	* ada-mode.el (ada-font-lock-keywords-2):
	Correct regexp for hilit of unfollowed `end'.
	(ada-in-open-paren-p): Start parsing definitely outside of strings.
	(ada-gnat-style): New function.

	* ada-mode.el: Doc fixes.
	(ada-mode): Support new font-lock-mode.
	(ada-format-paramlist): Changed all `accept' to `access'.
	(ada-insert-paramlist): Changed all `accept' to `access'.
	(ada-in-comment-p): Use standard Emacs way `parse-partial-sexp'.
	(ada-font-lock-keywords-1): Regexps in not byte-compiled code behave
	different than byte-compiled regexps.
	Change order of some ored entries.

1997-05-21  Erik Naggum  <erik@naggum.no>

	* add-log.el (add-log-lisp-like-modes, add-log-c-like-modes)
	(add-log-tex-like-modes): New variables.
	(add-log-current-defun): Use them instead of constant lists.

1997-05-21  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-backend-admin): If SCCS should be used, and there
	is no "SCCS" subdirectory, create it.

1997-05-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* webjump.el (webjump-to-javaapi): Function deleted.
	(webjump-sample-sites): Delete various pointers to non-free things.

	* bindings.el (mode-line-mule-info): Add a colon.
	(mode-line-modified): Delete the initial dash.

1997-05-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* word-help.el (set-word-help-file): Renamed from set-help-file.

	* crisp.el (crisp-mode): Add autoload cookie.

	* Makefile (dontcompilefiles): Add list of files that should not
	be byte-compiled.

	* dos-w32.el (add-untranslated-filesystem)
	(remove-untranslated-filesystem): Add interactive spec.

	* crisp.el (crisp-last-last-command): Renamed from last-last-command
	and defvar added.

	* levents.el (event-closest-point): Fix paren error.

1997-05-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (load-path): Change tag again.

1997-05-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mh-utils.el (mh-file-command-p): New function.
	(mh-path-search): Use that.
	(mh-find-progs): Don't check current directory
	unless explicitly requested.  Don't set mh-progs or mh-lib
	if the programs are not found.  Give an error message
	unless they are found.

1997-05-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* replace.el (perform-replace): Restore match data after read-event.

1997-05-19  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* holidays.el (holiday-float): Rewritten to fix bug when base date
	of holiday and holiday date are in different months.

	* diary-lib.el (diary-float): Rewritten to fix bug when base date
	of entry and entry date are in different months.  Added optional
	parameter DAY.
	(list-sexp-diary-entries): Revise description of diary-float.

1997-05-19  Drew Csillag  <drew@staff.prodigy.com>

	* m4-mode.el (m4-program): Guess which m4 binary to use.
	(m4-start-m4): New function.
	(m4-end-m4): New function.
	(m4-m4-buffer, m4-m4-region): Now use m4-start-m4.
	(m4-font-lock-keywords): Collapse 4 regex's into 1.

1997-05-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (load-path): Change a tag.

1997-05-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (path-separator, parse-colon-path): Doc fixes.

1997-05-18  Erik Naggum  <erik@naggum.no>

	* compile.el (compilation-parse-errors): Fix paren error.

	* dabbrev.el (dabbrev-expand, dabbrev--abbrev-at-point)
	(dabbrev--search): Use buffer-substring-no-properties.

	* lpr.el (lpr-page-header-switches): Remove extra paren.

	* rmailsum.el (rmail-summary-delete-forward): Force the
	argument to be a number, since we may be called with nil.

	* simple.el (set-fill-column): Make the C-u case work.

	* help.el (describe-key-briefly, where-is): Prefix arg means
	insert help text into current buffer.

1997-05-17  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* fill.el (enable-kinsoku): Name changed from do-kinsoku.
	(fill-region-as-paragraph): Do `kinsoku' processing only if both
	enable-kinsoku and enable-multibyte-characters are non-nil.

1997-05-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-arguments): New local variable.
	(compile-internal): Set the variable compilation-arguments.
	(compilation-revert-buffer): New function.
	(compilation-mode): Set revert-buffer-function.

	* files.el (revert-without-query): Renamed from
	find-file-revert-without-query.
	(find-file-noselect): Use new option.
	(revert-buffer): Check the option here too.

	* cus-face.el (custom-facep): Defined (once again).

	* simple.el (do-auto-fill): Check enable-kinsoku and
	enable-multibyte-characters.

	* bindings.el (mode-line-modified): Delete one of the leading dashes.

1997-05-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* outline.el (outline-mode): Use `add-to-invisibility-spec' and
	set the invisible property to `outline'.
	(outline-minor-mode): Likewise.
	Also, use `remove-from-invisibility-spec'.
	(outline-flag-region): Set `outline' as the invisible property.

1997-05-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* autoload.el (update-autoloads-from-directories): Renamed from
	update-autoloads-from-directory.  Take multiple directories as args.
	Use locate-library to find loaddefs.el and the top level Lisp dir.
	(batch-update-autoloads): Call update-autoloads-from-directories.

	* iso-acc.el (iso-accents-insert-offset): Use nonascii-insert-offset.

	* iso-transl.el (iso-transl-define-keys): Use nonascii-insert-offset.

	* simple.el (quoted-insert): Use nonascii-insert-offset.
	(quoted-insert-character-offset): Variable deleted.

1997-05-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* levents.el (event-closest-point): New function.
	(event-closest-point-1): New subroutine.

1997-05-16  Kenichi Handa  <handa@etl.go.jp>

	* mule.el (make-unification-table): Fix handling of a generic
	character.

	* term/x-win.el: Create bold, italic, bold-italic variants of
	startup fontset.

1997-05-15  Kenichi Handa  <handa@etl.go.jp>

	* mule-conf.el: Coding system names changed as follows:
	internal -> emacs-mule, automatic-conversion -> undecided.
	Coding category name changes as follows:
	coding-category-internal -> coding-category-emacs-mule.
	* mule.el: Likewise.
	* rmail.el: Likewise.
	* gnus/gnus-mule.el: Likewise.
	* language/chinese.el: Likewise
	* language/english.el: Likewise.
	* language/japanese.el: Likewise.

	* mule.el (charset-list): Bug fixed.

	* mule-cmds.el (set-language-info): Change the special treatment
	of key 'describe-function to 'documentation.
	(describe-specified-language-support): Renamed from
	describe-language-support-internal.  Get language name from
	last-command-event.
	(describe-language-support): Call
	describe-specified-language-support.

	* language/chinese.el: Delete functions describe-LANGUAGE-support.
	Delete 'describe-function entries and change 'documentation
	entries in each language specific information.
	* language/cyrillic.el: Likewise.
	* language/devanagari.el: Likewise.
	* language/english.el: Likewise.
	* language/ethiopic.el: Likewise.
	* language/european.el: Likewise.
	* language/greek.el: Likewise.
	* language/hebrew.el: Likewise.
	* language/indian.el: Likewise.
	* language/japanese.el: Likewise.
	* language/korean.el: Likewise.
	* language/lao.el: Likewise.
	* language/thai.el: Likewise.
	* language/tibetan.el: Likewise.
	* language/vietnamese.el: Likewise.

1997-05-15  Kenichi Handa  <handa@etl.go.jp>

	* fontset.el (standard-fontset-spec): Name changed from
	default-fontset-spec.
	* term/x-win.el: Likewise.

1997-05-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* browse-url.el (browse-url): Make `applicatations' the parent.

	* rmail.el (rmail-retry-failure):
	Rename local to rmail-this-buffer.

	* term.el: Don't create faces if make-face isn't defined.
	Catch errors in setting face attributes.
	(ansi-term-inv-fg-faces-vector): Define with defvar.
	(ansi-term-inv-bg-faces-vector): Likewise.
	(ansi-term-bg-faces-vector, ansi-term-fg-faces-vector): Likewise.
	(term-ignore-error): New macro.

	* lpr.el (lpr-page-header-switches): Use -F, not -f.

1997-05-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el (mode-line-mule-info): Delete the colon.
	(mode-line-buffer-identification): Delete %F:.
	(mode-line-frame-identification): New variable.
	(mode-line-format): Use mode-line-frame-identification.
	Start with a dash.
	(mode-line-modified): Delete the final dash.

	* info.el (Info-set-mode-line): Add some spaces at the beginning.

	* term/x-win.el (mode-line-frame-identification):
	Set this, not mode-line-buffer-identification.

	* dired.el (dired-mode): Don't include `Dired:' in mode line.

	* term/x-win.el (mode-line-buffer-identification):
	Use a different value which omits `Emacs: '.

	* rmail.el (rmail-primary-inbox-list): Don't use backquote.

	* case-table.el (set-case-syntax-offset): New variable.
	(set-case-syntax-delims): Obey set-case-syntax-offset.
	(set-case-syntax-pair, set-case-syntax): Likewise.

	* iso-syntax.el: Handle multibyte characters
	using set-case-syntax-offset.

	* browse-url.el (browse-url-event-buffer):
	Function renamed from event-buffer.  Callers changed.
	(browse-url-event-point): Likewise.
	* browse-url.el: Don't include term.el.

1997-05-14  Erik Naggum  <erik@naggum.no>

	* server.el (server-kill-buffer): Only when there is a server process.

1997-05-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Synched customize with version 1.97.

	* cus-edit.el (windows): Move to environment.

	* wid-edit.el (widget-field-value-get): Add workaround for XEmacs
	bug with `buffer-substring-no-properties'.

	* wid-edit.el (widget-value-convert-widget): Don't convert :value
	here.

	* cus-edit.el (custom-buffer-create-internal): New kludge for
	making bib and eob read-only in XEmacs.

	* wid-edit.el: Also allow prompt when field value is invalid.

	* cus-edit.el (custom-redraw): Fix repositioning for when column
	is zero.

	* cus-edit.el (x): New group.

	* cus-edit.el (custom-variable-value-create): Remove unreferenced
	variable.
	* wid-edit.el (widget-field-action): Ditto.
	(widget-regexp-match): Ditto.

	* cus-edit.el (custom-variable-action): Don't update state if it
	is modified.

	* widget.el (:mouse-down-action): New keyword.
	* wid-edit.el (button-release-event-p): New function.
	(widget-keymap): Don't bind mouse up events.
	(widget-button-pressed-face): New face.
	(widget-button-click): Wait for up event, give feedback.
	(default): Use `:mouse-down-action'.
	(menu-choice): Ditto.
	(widget-choice-mouse-down-action): New function.
	(widget-info-link-action): Removed kludge to steal up event.
	* cus-edit.el (widget-magic-mouse-down-action): New function.
	(custom-magic-value-create): Use it.
	(custom-buffer-create-internal): Removed kludge to steal up event.

	* widget.el (:glyph-up, :glyph-down, :glyph-inactive): New
	keywords.
	* wid-edit.el (widget-glyph-insert-glyph): Support optional `down'
	and `inactive' glyphs.
	(widget-push-button-value-create): Ditto.
	(widget-glyph-click): New function.
	(widget-button1-click): Use it.
	(widget-button-click): Use it.

	* cus-edit.el (custom-buffer-create): Accept optional buffer NAME.
	(custom-buffer-create-other-window): Ditto.
	(customize, customize-other-window, customize-variable)
	(customize-variable-other-window, customize-face)
	(customize-face-other-window, customize-customized)
	(customize-saved, customize-apropos, custom-face-menu-create)
	(custom-variable-menu-create, boolean, custom-menu-create): Updated
	caller.

	* cus-edit.el (custom-variable-action): Reset magic state.
	(custom-variable-menu): Allow `Reset to Current' on `changed'
	items.

	* wid-edit.el (widget-choice-toggle): New option.
	(widget-choice-action): Use it.

	* cus-edit.el (custom-group-menu): Only test state to see if the
	item is enabled.

	* cus-face.el (custom-background-mode): Use `const', not
	`choice-item'.
	(custom-face-attributes): Use tags for toggling booleans, not the
	value.

	* wid-edit.el (character): Use `characterp' when available.

	* widget.el (:prompt-match): New keyword.
	(:prompt-history): New keyword.
	(:prompt-internal): New keyword.
	* wid-edit.el (widget-field-prompt-internal): New function.
	(widget-field-prompt-value): New function.
	(editable-field): Use them.
	(widget-field-action): Ditto.
	(widget-symbol-prompt-value-history): New variable.
	(widget-symbol-prompt-internal): New function.
	(symbol): Use them.
	(widget-variable-prompt-value-history): New variable.
	(variable): Use them.
	(widget-function-prompt-value-history): New variable.
	(function): Use them.

	* wid-edit.el (boolean): Use tag to toggle.
	(character, sexp, symbol, file, string): Inactive tag.

	* wid-edit.el (widget-choice-prompt-value): New function.
	(choice, radio): Use it.
	(widget-prompt-value): Prepend widget type to prompt.

	* wid-edit.el (widget-parent-action): Renamed from
	`widget-choice-item-action'.
	(choice-item): Updated widget.
	* cus-edit.el (custom-magic): Ditto.

	* wid-edit.el (widget-children-validate): Renamed from
	`widget-editable-list-validate'.
	(editable-list, group): Updated widgets.
	* cus-edit.el (custom, face): Ditto.

	* wid-edit.el (widget-value-value-get): Renamed from
	`widget-item-value-get'.
	(item): Updated widget.
	* cus-edit.el (face, custom): Ditto.

	* wid-edit.el (widget-value-convert-widget): Renamed from
	`widget-item-convert-widget'.
	(item, editable-field): Updated widgets.
	* cus-edit.el (face): Ditto.

1997-05-14  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* mailalias.el (expand-mail-aliases): Make interactive.  Doc fix.
	If interactive, beg to end is the region before mail-header-separator.
	Wrap body with save-excursion.  Add autoload cookie.

	* sendmail.el (mail-mode-map): Add separator to mail menu.
	Rearrange headers menu and add entry for expand-mail-aliases.

1997-05-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* levents.el (mouse-event-p, button-event-p): New functions.

1997-05-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-process-search-char): Use multibyte
	characters to represent themselves.

	* bindings.el: Make Latin-4 characters self-insert.
	Use aset to set up these char sets.

	* isearch.el (isearch-mode-map): Make Latin-4 characters
	something to search for.  Use aset to set up these char sets.

	* iso-transl.el (iso-transl-define-keys):
	Obey quoted-insert-character-offset.

1997-05-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el: Define Latin-1, Latin-2 and Latin-3
	chars as self-inserting.

	* loadup.el: Move bindings.el after mule-conf.el.

	* isearch.el (isearch-mode-map): Treat Latin-1, Latin-2 and Latin-3
	chars as printing characters.

	* iso-acc.el (iso-accents-compose): Return composed character
	directly for execution.

1997-05-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* autoload.el (defcustom): Add doc-string-elt property.
	(make-autoload): Convert defcustom into defvar.

	* Makefile (update-subdirs): New target.
	(updates): Do update-subdirs's job too.

	* finder.el (finder-compile-keywords-make-dist):
	Use the dirs specified on the command line.

	* cus-dep.el (custom-make-dependencies): Don't find the subdirs here;
	instead, use the dirs specified on the command line.

	* Makefile (autoloads, custom-deps, finder-data):
	Pass all "real" subdirs of lisp/ as args when rebuilding autoloads.
	(updates): New target, does all three of those.

1997-05-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* thingatpt.el (forward-whitespace, forward-symbol):
	Don't get error at end of buffer.
	(bounds-of-thing-at-point): Don't get confused when a motion
	function stops at end of buffer and there really isn't a thing.
	Avoid redundant repeated scans.

	* ange-ftp.el (ange-ftp-start-process): Create the buffer
	and set its mode, before starting the process.
	Set point in that buffer, and the process mark.
	(ange-ftp-gwp-start): Don't set the mode here.
	Move point to end of buffer.
	(internal-ange-ftp-mode): Don't move process-mark here.

	* loadup.el: Load mule and mule-conf before simple.

	* dired-aux.el (dired-collect-file-versions):
	Rename bv-length to backup-extract-version-start.

	* diff.el (diff-latest-backup-file):
	Rename bv-length to backup-extract-version-start.

	* files.el (backup-extract-version-start): New variable.
	(find-backup-file-name, backup-extract-version):
	Rename bv-length to backup-extract-version-start.

	* files.el (auto-mode-alist): Shuffle a few elements.

	* files.el (file-relative-name): Bind the variable fname.

1997-05-10  Ken'ichi Handa  <handa@etl.go.jp>

	* characters.el: Set syntax and category for Devanagari, Thai, and
	Tibetan characters.  Add a category ?| to the category sets of
	characters of katakana-jisx0201 and japanese-jisx0212.

	* encoded-kb.el (encoded-kbd-mode): Doc-string modified.
	(encoded-kbd-select-terminal): The function deleted.
	(encoded-kbd-set-coding-system): New function.

	* faces.el (x-make-font-bold-italic): New function.

	* fontset.el (x-decompose-font-name): While setting each field of
	XLFD, set "*" instead of nil to a field which is omitted in the
	original font name.
	(generate-fontset-menu): Delete code for handling alias (or
	nickname).  It is now handled in fontset-plain-name.
	(fontset-plain-name): Handle alias of fontset name, show more
	user-friendy names.
	(create-fontset-from-fontset-spec): Add an optional arg STYLE to
	create bold, italic, and bold-italic variants of a fontset.

	* gnus-mule.el: Moved to `gnus' subdirectory.

	* gnus/gnus-mule.el (gnus-mule-message-send-news-function): New
	function to encode text before sending by news.
	(gnus-mule-message-send-mail-function): New function to encode
	text before sending by mail.
	(gnus-mule-initialize): Add gnus-mule-message-send-news-function
	to the hook message-send-news-hook.  Add
	gnus-mule-message-send-mail-function to the hook
	message-send-mail-hook.

	* help.el (help-with-tutorial): Fix a bug of handling non-English
	tutorial file.

	* kinsoku.el: Set category of kinsoku-bol and kinsoku-eol for
	latin-jisx0201 and katakana-jisx0201 characters.

	* language/chinese.el: Make functions setup-LANGUAGE-environment
	interactive and add new functions describe-LANGUAGE-support for
	all LANGUAGEs supported.  Remove resisterations of input methods
	which use the function encoded-kbd-select-terminal.
	* language/cyrillic.el: Likewise.
	* language/devanagari.el: Likewise.
	* language/english.el: Likewise.
	* language/ethiopic.el: Likewise.
	* language/european.el: Likewise.
	* language/greek.el: Likewise.
	* language/hebrew.el: Likewise.
	* language/indian.el: Likewise.
	* language/japanese.el: Likewise.
	* language/korean.el: Likewise.
	* language/lao.el: Likewise.
	* language/thai.el: Likewise.
	* language/tibetan.el: Likewise.
	* language/vietnamese.el: Likewise.

	* language/chinese.el (pre-write-encode-hz): Make it work for the
	case the arg FROM is a string.
	(setup-chinese-cns-environment): Set default-input-method to
	quail-quich-cns.

	* language/devan-util.el (in-is13194-devanagari-post-read-conversion):
	New function.
	(in-is13194-devanagari-pre-write-conversion): New function.

	* language/devanagari.el: Change function of post-read-conversion
	and pre-write-conversion of coding system in-is13194-devanagari to
	in-is13194-devanagari-post-read-conversion and
	in-is13194-devanagari-pre-write-conversion respectively.
	Setting of syntax and category for Devanagari characters are moved
	to characters.el.

	* language/english.el (setup-english-environment): Set
	sendmail-coding-system and rmail-file-coding-system to nil.

	* language/ethio-util.el (fidel-to-tex-map): Name changed to
	ethio-fidel-to-tex-map.

	* language/european.el: Typo in comment fixed.

	* language/japanese.el (setup-japanese-environment): Set
	sendmail-coding-system and rmail-file-coding-system to
	'iso-2022-jp.

	* language/korean.el: Bug fixed in making coding system
	'iso-2022-kr.

	* language/thai-util.el (thai-pre-write-conversion): Make it work
	for the case the arg FROM is a string.

	* language/tibet-util.el (tibetan-pre-write-conversion): Likewise.

	* language/viet-util.el (viqr-pre-write-conversion): Likewise.

	* language/tibetan.el: Setting of syntax and category is moved to
	characters.el.

	* mule-cmds.el (build-describe-language-support-function)
	(build-set-language-environment-function): The functions deleted.
	(set-language-info): Doc-string modified.  Change handling of
	special keys describe-function and setup-function.
	(read-language-name): Return nil if a language specified doesn't
	have KEY.
	(current-input-method-title): Doc-string modified.
	(select-input-method): Set current-input-method to nil even if
	deactivation of the current input method failed.
	(set-language-environment): Doc-string modified.
	(describe-language-support): Doc-string modified.  Calls an
	appropriate function for each language.
	(describe-language-support-internal): New function.

	* mule-conf.el: Delete code for alternate-charset-table.
	Initialize standard-character-unification-table-for-read and
	standard-character-unification-table-for-write.
	Set coding-category-iso-8-2 and coding-category-iso-else to the
	coding system 'iso-8859-1 by default.

	* mule.el (make-char): Doc-string modified.
	(make-coding-system): Describe about INIT-BOL and DESIGNATION-BOL
	in doc-string.
	(find-new-buffer-file-coding-system): Doc-string modified.
	(make-unification-table): New function.

	* quail.el (use-quail-package): Error message added.
	(quail-mode): Make sure to have quail-mode-map at the head of
	minor-mode-map-alist.

	* rmail.el (rmail-enable-decoding-message): New variable.
	(rmail-convert-file): Comment fixed.
	(rmail-revert): Don't decode RMAIL file again because the backup
	file is saved in Emacs' internal format.
	(rmail-convert-to-babyl-format): Check
	rmail-enable-decoding-message.

	* term/x-win.el: Create bold, italic, and bold-italic variants of
	default fontset.  Name a fontset created from user-specified ASCII
	font as "fontset-startup".

1997-05-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iso-acc.el (iso-languages): For Latin-2, add ^I and ^i.  Fix ~a.

	* Makefile (custom-deps): Target renamed from cus-load.el.
	(finder-data): Target renamed from finder-inf.el.
	(unlock, relock): Targets deleted.

	* simple.el (quoted-insert-character-offset): Initialize more cleanly.
	(quoted-insert): Don't offset codes above 377.

	* hexl.el: Add a `provide' call.
	Delete periods from many error messages.

	* subr.el (read-quoted-char): Don't mask down to 8 bits.

	* iso-acc.el (iso-languages): Add charset spec to some elements.
	(iso-accents-compose): Add iso-accents-insert-offset to the code.
	(iso-accents-insert-offset): New variable.
	(iso-accents-customize): Set iso-accents-insert-offset
	according to data from iso-languages.

1997-05-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Makefile (lisptagsfiles): Look in all subdirs.

	* bytecomp.el (byte-compile-file-form-custom-declare-variable):
	New function.  Handle custom-declare-variables.
	* custom.el (defcustom): Get rid of eval-and-compile.
	The compiler should now handle custom-declare-variables on its own.

	* cus-edit.el (customize): Call customize-group.

	* simple.el (assoc-ignore-case): Downcase KEY as well as element cars.

	* bibtex.el (assoc-ignore-case): Function deleted.
	(bibtex-member-of-regexp): Renamed from member-of-regexp.
	Call changed.

	* timer.el (timer-event-handler): Take timer as arg directly.
	Don't bind a key in special-event-map.

1997-05-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-help-menu): Move "Customize" to the top.

	* lpr.el (printify-region): Doc fix.

	* dabbrev.el (dabbrev-case-replace, dabbrev-case-fold-search):
	Make these simple three-value choices.
	(dabbrev-completion): Handle dabbrev-case-fold-search
	and dabbrev-case-replace the new way.
	(dabbrev-expand, dabbrev--substitute-expansion): Likewise.

	* simple.el (forward-visible-line, end-of-visible-line):
	New functions.
	(kill-line): Use forward-visible-line and end-of-visible-line.

1997-05-07  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* cal-hebrew.el (holiday-passover-etc): Postpone date of Yom
	HaShoah to Monday if it falls on Sunday (as per amendment passed
	by the Israeli Kenesset, May, 1997).

1997-05-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* outline.el (outline-mode): Autoload cookie added.
	(outline-minor-mode): Likewise.

	* ooutline.el (outline-mode): Autoload cookie deleted.
	(outline-minor-mode): Likewise.

	* outline.el: Use defgroup and defcustom.

	* ooutline.el: Renamed from outline.el.
	* outline.el: Renamed from noutline.el.

	* server.el (server-buffer-done): New arg FOR-KILLING.
	(server-kill-buffer): New fn, to inform clients when buffer is killed.

	* cus-dep.el (custom-make-dependencies):
	Don't use NOSORT in directory-files.
	Don't actually visit the files.
	Use re-search to search contents fast.
	Search the subdirs of `lisp'.
	Bind kept-new-versions when saving.

1997-05-06  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* lazy-lock.el: Use sexp custom widget for non-nil non-t values.

	* ps-print.el (ps-left-header, ps-right-header): Quote :group name.

1997-05-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* byte-opt.el (byte-optimize-approx-equal): Use <=, not <.
	(byte-optimize-minus, byte-optimize-plus): Optimize adding
	or subtracting 1.

	* imenu.el (imenu-auto-rescan): Fix typo.

	* ffap.el (ffap-alist): Delete `math-mode'.
	Move all defvars and defuns out of this, to top level.
	Use a constant list as the initial value.
	(ffap-soft-value): Rewrite as a macro.
	And now it is used only at run time, not at load time.
	(ffap-ftp-default-user): Use just "anonymous" as default value.
	(ffap-what-domain): Don't set mail-extr-all-top-level-domains here.
	(ffap-newsgroup-regexp, ffap-newsgroup-heads): Move up past first use.
	(ffap-string-at-point-region): Likewise.

	* dunnet.el (dungeon-nil): Explicitly return nil.

	* mouse-sel.el (mouse-sel-get-selection-function):
	Look in x-last-selected-text if necessary.

	* vc.el: Doc fixes.

1997-05-05  Hrvoje Niksic  <hniksic@srce.hr>

	* time.el, gud.el, metamail.el, simple.el: Customize.
	* window.el, frame.el, menu-bar.el, lisp.el, fill.el: Customize.
	* files.el, replace.el, vc.el: Customize.

1997-05-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term.el (term-mode): Add a mode-class property.

	* gud.el (gud-mode): Add a mode-class property.

	* ws-mode.el (wordstar-mode): Add a mode-class property.

	* hexl.el (hexl-mode): Add a mode-class property.

1997-05-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (set-auto-mode): New arg JUST-FROM-FILE-NAME.
	(hack-local-variables): New arg MODE-ONLY.
	(set-visited-file-name): Alter the major mode based on new file name.
	(change-major-mode-with-file-name): New variable.

	* replace.el (occur-mode): Add a mode-class property.

	* inf-lisp.el (inferior-lisp-mode): Add a mode-class property.

	* compile.el (compilation-mode): Add a mode-class property.

	* comint.el (comint-mode): Add a mode-class property.

	* ange-ftp.el (internal-ange-ftp-mode): Add a mode-class property.

	* edebug.el (edebug-eval-mode): Add a mode-class property.

	* ielm.el (inferior-emacs-lisp-mode): Add a mode-class property.

	* telnet.el (telnet-mode): Add a mode-class property.

	* rlogin.el (rlogin-mode): Add a mode-class property.

	* shell.el (shell-mode): Add a mode-class property.

	* simple.el (minibuffer-text-before-history): New variable.
	(minibuffer-history-initialize): New fn, on minibuffer-setup-hook.
	(next-history-element, previous-matching-history-element):
	Initialize minibuffer-text-before-history.
	(next-history-element): Use minibuffer-text-before-history
	as "position 0" of the history list.
	Use minibuffer-default as position -1, if it is non-nil.
	Simplify error logic for beginning and end of history.

	* simple.el (set-variable): Delete old definition (duplicate).

	* rmail.el (rmail-ignored-headers): Add References, Mime-Version,
	Lines, Content-Transfer-Encoding.

	* time.el (display-time-string-forms): Test display-time-day-and-date
	and display-time-24hr-format here.
	(display-time-format): Default value is now nil.

1997-05-04  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* list-holidays.el (list-holidays): Fix buffer title when list is
	nil.  Do save-excursion to keep from messing up calendar variables.
	Handle CHOICE = "" like CHOICE = "Ask".

	* cal-menu.el (cal-menu-list-holidays-following-year)
	(cal-menu-list-holidays-previous-year)
	(cal-menu-list-holidays-year): New commands.
	(calendar-mode-map): Put them in the holidays menu.

1997-05-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc-hooks.el (vc-find-cvs-master): Accept ...+ in a normal entry.

	* replace.el (occur): Doc fix.

1997-05-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-count-new-messages): Fix previous change.

	* replace.el (occur): If regexp has uppercase in it,
	match it case-sensitively.

	* ffap.el: Many doc fixes.
	(ffap-next): Fix message.

	* timezone.el (timezone-parse-date): Match forms 1 and 2 first.

1997-05-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-mule.el: Renamed from ./gnus-mule.el.

	* ispell.el (ispell-dictionary-alist-2): Specify syntax of ' in Danish.

1997-05-02  Hrvoje Niksic  <hniksic@srce.hr>

	* calendar.el: Customize.
	* appt.el, cal-china.el, cal-tex.el, diary-lib.el, solar.el: Likewise.
	* rmail.el, rmailout.el, rmailsum.el: Likewise.
	* compile.el, ffap.el, mouse.el, isearch.el: Likewise.
	* goto-addr.el, hippie-exp.el, icon.el, ielm.el, imenu.el: Likewise.

1997-05-02  Inge Frick  <inge@nada.kth.se>

	* compile.el:
	Support compilers that give a message each time the file being
	compiled changes but don't include a file name each error message.
	Speed up by searching for regexps one by one instead of combining.
	(compile-internal): Takes more optional arguments.  All five regexp
	alists can be given as argument.
	Change name of variable regexp-alist to error-regexp-alist.  Change
	some local variables directly by setq instead of rebinding by let.
	(compilation-shell-minor-mode): New minor mode.
	Similar to compilation-minor-mode, but key bindings don't
	collide with shell mode.
	(compilation-shell-minor-mode-map, compilation-shell-minor-mode):
	New variables.
	(compile-auto-highlight): Doc fix.
	(compilation-error-regexp-alist): Removed unnecessary line break
	in first regexp.  Replaced \\(\\|.* on \\) by \\(.* on \\)? in
	regexp for Absoft FORTRAN 77 Compiler 3.1.3.  Added regexp for
	SPARCcompiler Pascal.  Divided long line in regexp for Cray C
	compiler error messages.  Made comment fit in line at regexp for
	Sun Ada (VADS, Solaris).  FILE-IDX may be nil, meaning an
	error message with no file name, so the file name must be taken
	from an earlier message.  LINE-IDX may be a function which is
	called with two arguments the file name and column strings and
	returns an error position descriptor.
	(compilation-enter-directory-regexp-alist)
	(compilation-leave-directory-regexp-alist): New variables.
	(compilation-file-regexp-alist)
	(compilation-nomessage-regexp-alist): New variables.
	(grep-regexp-alist): Removed unnecessary ^ at beginning of regexp.
	(compilation-enter-directory-regexp)
	(compilation-leave-directory-regexp): Variables deleted.
	Replaced by compilation-enter-directory-regexp-alist and
	compilation-leave-directory-regexp-alist.
	(compilation-buffer-p): Return true also for buffer in
	compilation-shell-minor-mode.
	(compilation-next-error-locus): Split a long line.
	(count-regexp-groupings): Comment about this function not being
	needed any more.
	(compilation-current-file, compilation-regexps): New variables.
	(compilation-parse-errors): Large parts rewritten.  Don't put the
	regexps together in one large regexp, instead match them one by one.
	Support the generalized subexpression indices.
	(compile-collect-regexps, compile-buffer-substring): New functions
	supporting compilation-parse-errors.

1997-05-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iswitchb.el (iswitchb-entryfn-p): Use memq, not member.

1997-05-01  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el (iswitchb-visit-buffer): Handle `display' alternative.
	(iswitchb-default-keybindings): Define C-x 4 C-o.
	(iswitchb-display-buffer): New function.
	(iswitchb-entryfn-p): Include iswitchb-display-buffer.
	(iswitchb-method, iswitchb-default-method): Doc fixes.

1997-05-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-custom-menu):
	New item `Browse All Customization'.
	Rename and shuffle other items.
	`Specify Group...' is now customize-group.

	* cus-edit.el: Say "standard settings" instead of "factory settings".

	* cus-edit.el (custom-group-magic-alist): New variable.
	(custom-group-state-update): Use custom-group-magic-alist.
	(customize-group): Renamed from `customize',
	and rename argument to GROUP.
	(customize): New function.

	* simple.el (set-variable): Simplify previous change.

	* subr.el (make-syntax-table): Doc fix.

1997-04-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-fill-paragraph): If fill-prefix is already non-nil,
	use it.

	* subr.el (shell-quote-argument): Quote null string usefully.

	* simple.el (set-variable): Check VALUE against type info if available.
	Don't evaluate VALUE.
	Use a separate history list for the values.

1997-04-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-old-format-warn): Fix a tag string.
	(time-stamp-format): Use %Y not %y in default value.

	* crisp.el (crisp-load-scroll-all): Renamed from ...-lock.
	(crisp-mode): Use scroll-all... not scroll-lock...

	* scroll-all.el: Renamed from scroll-lock.el.
	All functions renamed.
	(scroll-all-mode): Variable renamed from is-scroll-lock.

1997-04-29  Geoff Voelker  <voelker@cs.washington.edu>

	* edt.el (edt-emulation-on): Load edt-pc.el under Windows.

1997-04-29  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp): Verify time-stamp-line-limit is a number.
	(time-stamp-string-preprocess): Handle %F correctly.

1997-04-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-msgref-vector): New variable.
	Holds, for each message, a cons cell which contains the message number
	and which relocates if the message number changes.
	(rmail-forget-messages): Clear rmail-msgref-vector.
	(rmail-variables): Make rmail-msgref-vector buffer-local.
	(rmail-count-new-messages): Extend rmail-msgref-vector.
	(rmail-set-message-counters): Initialize rmail-msgref-vector.
	(rmail-only-expunge): Update rmail-msgref-vector.
	Don't look for mail-mode buffers specially.
	(rmail-reply): Use rmail-msgref-vector element as arg.
	(rmail-forward, rmail-retry-failure): Likewise.
	(rmail-mark-message): Accept an element of rmail-mark-message as arg.

	* mh-comp.el (mh-smail-batch): Accept &rest arg `ignored'.

	* bindings.el: Bind C-x m, C-x 4 m, C-x 5 m to compose-mail...

	* simple.el (compose-mail): Make prefix arg mean "continue".
	(compose-mail-other-window, compose-mail-other-frame): New commands.

	* sendmail.el: Don't bind C-x m, C-x 4 m, C-x 5 m.

	* autoload.el (generated-autoload-file): Change defconst to defvar.

1997-04-28  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el: Respect font-lock-face-attributes if set.
	Define fast-lock and lazy-lock groups here to ensure group order.

	* fast-lock.el: Moved defgroup to font-lock.el.

	* lazy-lock.el: Moved defgroup to font-lock.el.

	* ps-print.el: Use buffer-substring-no-properties not buffer-substring.

1997-04-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-file-entry-p): If ange-ftp-get-files returns
	nil, don't try ange-ftp-hash-entry-exists-p, just give up.

	* comint.el (comint-input-face): Deleted.

	* compile.el (compilation-error-regexp-alist): Add regexp for Perl -w.

	* vc-hooks.el (vc-master-templates): Doc fix.

1997-04-27  Dave Love  <d.love@dl.ac.uk>

	* scheme.el (dsssl-sgml-declaration): Doc fix.
	(dsssl-mode): Use stringp to check dsssl-sgml-declaration.
	(style, root): Put scheme-indent-function 1.
	(dsssl-font-lock-keywords): Use make-regexp version.

1997-04-27  Ron Schnell  <ronnie@twitch.mit.edu>

	* dunnet.el (dun-special-object):
	Floppy disk will melt in inventory or room, regardless
	of whether or not Stallman statuette is around.

	* dunnet.el (dun-examine):
	You can examine objects in the jar without taking them out.

	* dunnet.el (dun-take):
	You can take objects from the jar while you are on the bus.

	* dunnet.el (dun-dig):
	Message from digging on the bus is the same as when you dig and don't
	find anything.

	* dunnet.el (dun-climb):
	No longer errors out of the game when argument to "climb" is invalid.

	* dunnet.el (dun-put):
	You can now put things in the jar, even if you are on the bus.

	* dunnet.el (dun-special-move):
	"In" or "Out" command tells you if you are already on or off the bus.

	* dunnet.el (dun-sauna-heat):
	Changed "begin to sweat" to "are perspiring"
	so that it makes sense whether you are heating up or cooling down.

	* dunnet.el (dun-help):
	Changed author e-mail address, added web page.
	Added hint for batch mode.

	* dunnet.el (*global*):
	Fixed spelling of Presely in global object list.

	* dunnet.el (*global*):
	Added coconuts, tank, and lake as objects that are recognized.

	* dunnet.el (*global*):
	Added `slip' as another way of describing the paper,
	and `chip' as another way of describing the CPU.

	* dunnet.el (*global*):
	Upcase  abbreviations of directions in room descriptions.

	* dunnet.el (dun-login):
	Fixed erroneous login message to better-describe ftp limitations.

	* dunnet.el (dun-rlogin):
	Added error message if user tries to rlogin back to pokey.

	* dunnet.el (dun-load-d):
	Fixed so that if restore file isn't found which in non-batch mode,
	window will switch back to game.

1997-04-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Don't use `push'.

1997-04-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* paragraphs.el (forward-paragraph): Fix editing error
	in the updating of paragraph-separate.

1997-04-26  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Made the tag a button
	on booleans.
	Changed version number.

1997-04-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (quoted-insert-character-offset): New variable.
	(quoted-insert): Convert characters 0200 - 0377 to 04200 - 04377,
	so that users get the same results they are used to.

1997-04-26  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* cal-french.el (calendar-print-french-date): Label
	French date in echo area.

	* cal-coptic.el (calendar-print-coptic-date): Label
	Coptic/Ethiopic date in echo area.

1997-04-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-reply): Pass Rmail buffer and msgnum
	as arguments within the mail-send action.
	(rmail-forward, rmail-retry-failure): Likewise.
	(rmail-mark-message): New function.
	(rmail-only-expunge): Update the new kind of action.
	(rmail-send-actions-rmail-msg-number)
	(rmail-send-actions-rmail-buffer): Variables no longer used.

1997-04-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* apropos.el (apropos): Add support for customization groups.
	(apropos-print): Ditto.

	* faces.el (describe-face): Add documentation.

1997-04-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-add-new-face): Rewrite to give each
	lambda expression a doc string.

1997-04-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* buff-menu.el (buffer-menu): Use pop-to-buffer.
	(same-window-buffer-names): Add "*Buffer List*".

	* cal-menu.el: Delete all menu-enable properties.
	They ran slowly and sometimes got errors.

1997-04-24  Francesco Potort√¨  <F.Potorti@cnuce.cnr.it>

	* skeleton.el (skeleton-read): Doc fix.

1997-04-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* widget.el (define-widget): Return name.

	* cus-edit.el (custom-set-value): New command.
	(custom-set-variable): New command.
	(customize-saved): Renamed from `customize-customized'.
	(customize-customized): New command.
	(custom-save-customized): New command.

	* widget.el (:prompt-value): New keyword.

	* wid-edit.el (widget-prompt-value): New function.
	(default): Use it.
	(widget-default-prompt-value): New function.
	(const): Use it.
	(widget-const-prompt-value): New function.
	(string): Use it.
	(widget-string-prompt-value-history): New variable.
	(widget-string-prompt-value): New function.
	(file): Use it.
	(widget-file-prompt-value): New function.
	(sexp): Use it.
	(widget-sexp-prompt-value-history): New variable.
	(widget-sexp-prompt-value): New function.
	(boolean): Use it.
	(widget-boolean-prompt-value): New function.

	* cus-edit.el (custom-variable-prompt): Limit completion to user
	options.  Allow non-match input.

	* wid-edit.el (character): Give error if the length of the field
	isn't exactly 1.

	* wid-edit.el (widget-regexp-validate): New function.
	(regexp): Use it.
	(widget-regexp-match): New function.
	(regexp): Use it.

	* cus-edit.el (custom-variable-action): Use `custom-toggle-hide'.
	(custom-face-action): Ditto.
	(custom-group-action): Ditto.

	* cus-edit.el (custom-toggle-hide): New function.
	(custom-level-action): Use it.
	(custom-group-menu): Ditto.
	(custom-face-menu): Ditto.
	(custom-variable-menu): Ditto.

	* cus-edit.el (custom-redraw): Goto old line and column instead of
	old character position.  This is more tolerant for changes.

	* wid-edit.el (widget-choice-action): Only notify parent if
	something was chosen.

	* custom.el (custom-declare-group): Make sure initial members
	aren't duplicated even if the `defgroup' is evaluated twice.

	* wid-browse.el (widget-minor-mode): New variable and command.
	(widget-minor-mode-map): New variable.
	Add to `'minor-mode-alist' and `minor-mode-map-alist'.

	* wid-edit.el (widget-specify-inactive): Set priority.

	* wid-edit.el (widget-move): Skip inactive widgets.

	* cus-edit.el (custom-display-unselected-match): Matched too many
	displays.

	* wid-edit.el (widget-field-face): Changed default background
	color.

	* custom.el (custom-declare-variable): Set `custom-get' the right
	place.

	* cus-edit.el (custom-magic): Don't notify the parent.

	* custom.el (custom-initialize-set): New function.
	(custom-initialize-reset): New function.
	(custom-initialize-changed): New function.
	(custom-declare-variable): Use `custom-initialize-set' as
	default for `:initialize'.

	* cus-edit.el (custom-save-variables): Save :require symbols.

	* custom.el (:initialize, :set, :get, :request): New keywords.
	(custom-declare-variable): Support them.
	(custom-set-variables): Ditto.
	(defcustom): Document them.
	(custom-initialize-default): New function.
	* cus-edit.el (custom-variable-value-create): Support them.
	(custom-variable-set): Ditto.
	(custom-variable-save): Ditto.
	(custom-variable-reset-saved): Ditto.
	(custom-variable-reset-factory): Ditto.
	(custom-variable-state-set): Ditto.

	* cus-edit.el (custom-menu-filter): New function.
	(custom-variable-menu): New format.
	(custom-variable-action): Use it.
	(custom-face-menu): New format.
	(custom-face-action): Use it.
	(custom-group-menu): New format.
	(custom-group-action): Use it.

	* wid-edit.el (widget-choose): Accept unselectable items.

	* wid-edit.el (widget-default-create): Clear undo buffer.
	(widget-default-delete): Ditto.

	* cus-edit.el (customize-other-window): New function.

	* wid-edit.el (widget-info-link-action): Steal mouse up event.

	* wid-edit.el (widget-specify-insert): Use old style backquote.

1997-04-23  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el (w32-using-nt, w32-shell-name, w32-using-system-shell-p)
	(w32-startup): New functions.
	(w32-system-shells): New variable.

1997-04-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* find-file.el: Fix messages.

	* sgml-mode.el: Many doc fixes.

1997-04-23  Francesco Potort√¨  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-value): Use 'identity as default value.
	(sgml-mode): Doc fix.
	(sgml-name-8bit-mode): Tell the user if set or reset.
	(sgml-tag): Doc fix.
	(sgml-tag): Protect "&lt;" from skeleton-transformation.
	(sgml-attributes): Doc fix.
	(sgml-attributes): Square brackets removed from prompt.
	(sgml-attributes): Arg ALIST renamed to TAG.
	(sgml-attributes): Apply skeleton-transformation when necessary.
	(sgml-value): Doc added.
	(sgml-value): Square brackets removed from prompt.
	(html-tag-alist): New variable 1-7, variable `list' changed.
	(html-tag-alist) <dir>, <menu>: Use new value of `list'.
	(html-tag-alist) <font>: Fixed (doc of sgml-tag-alist needs fixing).
	(html-tag-alist) <ol>, <ul>: Fixed.
	(html-tag-alist) <fn>: Commented out.

	* skeleton.el (define-skeleton): Doc fix.

1997-04-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compare-w.el (compare-windows): Allow windows on different frames.

1997-04-23  Ken'ichi Handa  <handa@etl.go.jp>

	* mule-conf.el: Re-arrange priorities of coding categories.

1997-04-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ispell.el (ispell-overlay-window): Bind frame-override-unsplittable.

	* rcompile.el (remote-compile): Make comint-file-name-prefix local
	in the compilation buffer.

	* bindings.el (debug-ignored-errors): Update the regexps for
	the dabbrev error messages.

	* fast-lock.el: Delete setting of byte-compile-dynamic,
	byte-compile-dynamic-docstrings and byte-optimize.
	(fast-lock-save-facep, save-buffer-state): Move defmacros to top level.

	* lazy-lock.el: Delete setting of byte-compile-dynamic,
	byte-compile-dynamic-docstrings and byte-optimize.
	(with-current-buffer): Duplicate definition deleted.
	(save-buffer-state, do-while): Move defmacros to top level.

	* wid-edit.el: Use copy-sequence, not copy-list.
	Use cl only at compile time.

	* cus-edit.el (custom-variable-type): Use copy-sequence, not copy-list.

	* octave-mod.el (inferior-octave-output-list): Declare here
	to avoid compiler warnings.
	(inferior-octave-output-string): Likewise.
	(inferior-octave-receive-in-progress): Likewise.

	* modula2.el (m2-end-comment-column): New defvar.
	(modula-2-mode, m2-end-comment): Use m2-end-comment-column
	instead of end-comment-column.
	(m2-compile, m2-link): Don't set `modulename'.

	* sh-script.el (sh-case): Make this a simple define-skeleton
	as it was originally.  Don't add a menu-enable property.
	(sh-assignment-regexp): Renamed from sh-assignment-prefix
	undoing a renaming made by mistake.

	* sgml-mode.el (sgml-transformation): Fix previous change.

1997-04-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable):
	Use copy-sequence, not copy-list.

	* vc-hooks.el (vc-find-cvs-master): Handle a "New file!" entry.
	(vc-fetch-master-properties): Match "New file!".

	* elp.el (elp-report-limit): Change prompt string.
	(elp-version): Incremented.

	* mule-cmds.el (mule-keymap): Add C-x RET C-\ for select-input-method.

	* files.el (recover-file): Fix error message.

1997-04-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-set): Don't copy an empty face,
	just call custom-face-display-set.
	(custom-face-reset-saved, custom-face-save, custom-face-reset-factory):
	Likewise.
	(custom-face-display-set): Define this here.
	(custom-display-match-frame): Define here.

	* cus-face.el: Major simplification; most of file contents deleted.
	factory-face property renamed to face-defface-spec.

	* faces.el (frame-set-background-mode): New function.
	(frame-background-mode): New variable.
	(x-create-frame-with-faces): Rearrangement of order of font
	processing.  Handle custom-faces here.
	(face-doc-string, set-face-doc-string): New functions.
	(set-face-bold-p, set-face-italic-p): New functions.
	(face-bold-p, face-italic-p): New function.
	(face-spec-set, face-spec-set-1, face-spec-set-match-display):
	New functions.

	* frame.el (make-frame): Don't call custom-initialize-frame.

	* texnfo-upd.el (texinfo-master-menu-header): Delete newline at start.
	(texinfo-insert-master-menu-list): Add @detailmenu and
	@end detailmenu commands.

1997-04-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* skeleton.el (skeleton-read): Fix previous change.

	* simple.el (transient-mark-mode): Print message if used interactively.

	* sendmail.el (mail-attach-file): New function.
	(mail-mode-map): Add mail-attach-file on C-c C-i.

1997-04-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-update): Don't make global bindings here.
	Make them at top level.
	(facemenu-key): Variable deleted.
	(facemenu-keybindings, facemenu-new-faces-at-end)
	(facemenu-unlisted-faces, facemenu-remove-face-function): Doc fixes.

	* sh-script.el: Remove all menu-enable properties
	except for sh-case.

1997-04-17  Francesco Potort√¨  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-name-char): Ask user with a prompt.

1997-04-16  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el: Customize.
	(font-lock-defaults-alist): Leave ~ syntax alone in C++.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Match ~
	characters here.
	(font-lock-fontify-syntactically-region): Clean code.
	(font-lock-defaults-alist): Don't set font-lock-comment-start-regexp,
	as font-lock-fontify-syntactically-region doesn't use it anymore.
	(font-lock-comment-start-regexp): Delete variable.
	(font-lock-set-defaults): Define variable if not bound.
	(font-lock-compile-keywords): Don't set font-lock-keywords.
	(font-lock-fontify-keywords-region): Set it here.

	* fast-lock.el: Customize.
	(fast-lock-cache-data): Simplify calls of font-lock-compile-keywords.

	* lazy-lock.el: Customize.
	(lazy-lock-fontify-conservatively): Fontify around WINDOW's point.

	* shell.el (shell-font-lock-keywords): Use EVAL form for prompt.

	* modula2.el (modula-2-mode): Set font-lock-defaults.
	(m2-font-lock-keywords)
	(m2-font-lock-keywords-1, m2-font-lock-keywords-2)
	(m3-font-lock-keywords)
	(m3-font-lock-keywords-1, m3-font-lock-keywords-2): New variables.

1997-04-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* skeleton.el (skeleton-insert): Rename the function's argument
	to `regions', and bind `skeleton-regions' with let.
	(skeleton-read): Rename arg STR to PROMPT.

	* sendmail.el (sendmail-send-it): Use quoted-printable encoding
	for the From field.

	* sgml-mode.el (sgml-value): Don't perform the skeleton-transformation
	on the value.

1997-04-15  Andrew Innes  <andrewi@harlequin.co.uk>

	* hilit19.el (hilit-rehighlight-message): Respect mail-mode
	header/body separation line.

1997-04-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-delete-forward): Argument is now
	a repeat count.
	(rmail-summary-delete-backward): Corresponding changes.

	* sh-script.el (sh-while-getopts): Don't add menu-enable property.

1997-04-15  Hrvoje Niksic  <hniksic@srce.hr>

	* saveplace.el: Add defgroup; use defcustom for user vars.
	* pascal.el, supercite.el: Likewise.

1997-04-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-dep.el (custom-make-dependencies): Add `provide' to generated
	file.

1997-04-15  Eli Zaretskii  <eliz@wombat.gnu.ai.mit.edu>

	* term/pc-win.el (x-select-enable-clipboard): New variable.
	(x-select-text, x-get-selection-value): New functions, support for
	MS-Windows clipboard.

1997-04-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el: Add support for face documentation.

	* cus-dep.el (custom-make-dependencies): Fixed generation of
	parens.
	Fixed message.

1997-04-15  Noah Friedman  <friedman@splode.com>

	* rlogin.el (rlogin-process-connection-type): Default to t
	for solaris 2.x.

1997-04-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (overwrite-mode-binary, overwrite-mode-textual):
	Use defvar.

	* pascal.el (pascal-mode): Set comment-start.

	* winner.el: New file.

1997-04-14  Francesco Potort√¨  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-char-names): Change ensp to nbsp.

1997-04-14  Ilya Zakharevich  <ilya@math.ohio-state.edu>

	* font-lock.el (font-lock-fontify-syntactically-region): Use new
	features of parse-partial-sexp instead of doing regexp search.

1997-04-14  Steven L Baur  <steve@altair.xemacs.org>

	* edebug.el (edebug-read-and-maybe-wrap-form): Protect
	against pathological recursive calls.

1997-04-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* timer.el (timer-until): Fix syntax error.
	* browse-url.el (browse-url-browser-function): Fix syntax error.

1997-04-14  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* frame.el (frame-parameter): Doc fix.

1997-04-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* timer.el (timer-until): New function.
	(timer-max-repeats): New variable.
	(timer-event-handler): Avoid rerunning a timer many times
	if real time has "jumped" forward.

	* uce.el, vcursor.el: New files.

	* sgml-mode.el (sgml-tag): Use intangible here.
	(sgml-tags-invisible): Don't add intangible property
	separately here.  Just the category property is enough.
	Eliminate local variable `point'.
	Bind inhibit-point-motion-hooks.

1997-04-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Doc fixes.

	* jka-compr.el (jka-compr-temp-name-template): Fix editing error.

	* ps-print.el (ps-print-color-p): Fix minor error.

	* dired.el (dired-internal-noselect): When setting default-directory,
	don't check file-name-directory.

	* subr.el (kbd): New macro.

	* sgml-mode.el (sgml-mode-facemenu-add-face-function): New function.
	(sgml-mode-common): Use that function for the hook value.

	* dired.el (dired-noselect): Avoid calling file-directory-p
	when the initial argument was syntactically a directory name.

1997-04-13  Hrvoje Niksic  <hniksic@srce.hr>

	* time-stamp.el: Add defgroup; use defcustom for user vars.
	* eldoc.el: Likewise.

1997-04-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Load cus-start.
	Don't insist that bindings.el not be compiled.

	* mail-utils.el (mail-quote-printable, mail-unquote-printable)
	(mail-unquote-printable-hexdigit): New functions.

	* elp.el (elp-functionp): Definitions deleted; use functionp.

	* subr.el (functionp): New function.

1997-04-12  Dave Love  <d.love@dl.ac.uk>

	* files.el (auto-mode-alist): Add .dsl and .dsssl for dsssl-mode.

1997-04-12  Barry A. Warsaw  <bwarsaw@cnri.reston.va.us>

	* Public release 2.39

	* elp.el (elp-functionp): New function.

	* elp.el (elp-instrument-package): Don't attempt to instrument autoload
	functions.

	(elp-elapsed-time): New function to calculate the different between
	two `current-time' lists.  This no longer throws away the top 16 bits
	of information.

	(elp-wrapper): Use elp-elapsed-time instead of elp-get-time.  Also,
	call `current-time' as close to the function entrance and exit as
	possible so more of the overhead is eliminated from the times.

	(elp-get-time): Obsolete, deleted.

	* elp.el (elp-restore-function):
	When restoring, do not check assq elp-wrapper
	if the symbol-function is a compiled lisp function (i.e. byte coded).
	If it is byte-coded, it could not have been instrumented.
	Don't do the symbol-function restoration if
	the symbol has no function definition.

	* elp.el (elp-instrument-function): Always `restore' the funsym before
	instrumenting.
	Fail if function is an autoload symbol.

	* elp.el (elp-instrument-list): Remove unnecessary condition-case.

	* elp.el (elp-results):
	Noninteractive as a function is non-portable, use the
	variable instead.  buffer-substring with 3 arguments is non-portable.

	* elp.el (elp-instrument-function, elp-instrument-list):
	Handle function symbols that have already been instrumented.  Do
	not instrument them twice.

	* elp.el (elp-recycle-buffers-p): New variable.

	* elp.el (elp-report-limit, elp-sort-by-function): New default values.

	* elp.el (elp-use-standard-output): New variable.

	(elp-results): Optionally dump results to standard-output.

1997-04-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* apropos.el (apropos): Add support for faces, widgets, and user
	options.
	(apropos-print): Ditto.

	* cus-edit.el (abbrev-mode, alloc, undo, modeline, fill)
	(editing-basics, display, execute, installation, dired, limits)
	(debug, minibuffer, keyboard, mouse, menu, auto-save)
	(processes-basics, windows): New customization groups.

	* cus-start.el: New file.

	* cus-face.el (custom-face-font-size): Don't assume integral
	number.

	* cus-edit.el (custom-menu-create): Don't allow optional `NAME'.
	(customize-menu-create): Do allow optional name.

	* custom.el (custom-set-variables): Add warning for old format.

	* cus-edit.el (custom-variable-set): Use `set-default' instead of
	`set'.
	(custom-variable-save): Ditto.
	(custom-variable-reset-saved): Ditto.
	(custom-variable-reset-factory): Ditto.

	* cus-edit.el (customize-face-other-window): New function.

	* wid-browse.el (widget-browse-mode-customize-menu): New menu.
	(widget-browse-mode): Add it.
	(widget-browse-mode-map): Bind `q'.

	* wid-browse.el (widget-browse-other-window): New function.

	* cus-edit.el (customize-menu-create): New function.
	(custom-mode-customize-menu): Use it.

	* cus-edit.el (custom-make-dependencies): Deleted function.

	* cus-edit.el (customize-face): Sort faces.

	* cus-edit.el (custom-faces): New group.
	(custom-magic-alist): Added.
	(custom-variable-sample-face): Added.
	(custom-variable-button-face): Added.
	(custom-face-tag-face): Added.
	(custom-group-tag-faces): Added.
	(custom-group-tag-face): Added.
	(customize): Removed from faces group.

	* cus-edit.el (custom-load-recursion): New variable.
	(custom-load-symbol): Use it.
	(custom-mode-customize-menu): New menu.
	(custom-mode): Use it.
	Code moved to the end of the file.

	* cus-edit.el (custom-buffer-create-internal): Split out from
	`custom-buffer-create'.
	(custom-buffer-create-other-window): New function.

	* cus-edit.el (custom-guess-name-alist): Renamed from
	`custom-guess-type-alist'.
	(custom-guess-doc-alist): New option.
	(custom-guess-type): Use them.

	* cus-face.el (set-face-stipple): Removed Kyle Jones code.

	* cus-face.el (face-doc-string): Changed property name to
	`face-documentation'.
	(set-face-doc-string): Ditto.

	* cus-edit.el (custom-unlispify-menu-entry): Strip terminating
	`-p' off booleans.

	* cus-edit.el (custom-save-faces): Make sure `default' is saved first.

	* wid-edit.el (widget-vector-match): Pass arguments to
	`widget-apply' in the correct order.

	* custom.el (custom-define-hook): Change to defvar.
	* cus-edit.el (custom-define-hook): Add customization support.

	* cus-edit.el (custom-menu-update): Don't autoload.
	(custom-menu-reset): Move here from `custom.el'.
	Remove XEmacs support.
	(custom-help-menu): Move here from `custom.el'.
	Remove XEmacs support.
	(custom-menu-create): Work even if `custom-menu-nesting' is
	unbound.
	(custom-menu-nesting): Don't define for XEmacs.

	* cus-face.el (after-make-frame-hook): Removed
	`custom-initialize-frame', as this is now in `frame.el'.

	* cus-edit.el (custom-guess-type-alist): New option.
	(custom-guess-type): New function.
	(custom-variable-type): New function.
	(custom-variable-value-create): Use it.

	* cus-face.el (custom-face-attributes): Moved :family to the
	beginning of the list.
	(custom-face-attributes): Added :strikethru attribute.

	* custom.el (custom-set-variables): If variable is already set,
	overwrite it here.
	(custom-declare-variable): Do not set saved variables, if they
	already are bound.
	(custom-declare-variable): Clear the `force-value' flag if set.

	* widget.el (:text-format): New keyword.
	* wid-edit.el (push-button): Define it.
	(widget-push-button-value-create): Use it.
	* widget.texi (push-button): Documented it.

1997-04-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bookmark.el (bookmark, bookmark-use-annotations)
	(bookmark-save-flag, bookmark-save-flag): Doc fixes.

	* scheme.el (make): Add scheme-indent-function property.

	* Makefile (finder-inf.el, autoloads): New targets.
	(cus-load.el): Minor simplification.

1997-04-11  Hrvoje Niksic  <hniksic@srce.hr>

	* add-log.el, avoid.el, bookmark.el, cl-indent.el, cmacexp.el:
	* comint.el, completion.el, dabbrev.el, desktop.el, edebug.el:
	* enriched.el, executable.el, f90.el, fast-lock.el, fortran.el:
	* hexl.el, jka-compr.el, lpr.el, makeinfo.el, man.el:
	* mh-comp.el, mh-e.el, mh-utils.el, outline.el, page-ext.el:
	* prolog.el, ps-print.el, rcompile.el, rlogin.el, rsz-mini.el:
	* sgml-mode.el, sh-script.el, shell.el, smtpmail.el:
	* term.el, tex-mode.el, texinfo.el, two-column.el, uniquify.el:
	Add defgroup's; use defcustom for user vars.

1997-04-11  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-update-change-log): Run `rcs2log' in the correct
	directory when ChangeLog is found elsewhere.  Display any error
	output from rcs2log.

1997-04-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Makefile (cus-load.el): New target.

	* cus-dep.el: New file.

1997-04-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* server.el (server-done): If buffer visits no file, don't offer save.

	* holidays.el (list-holidays): Add autoload cookie.

	* cus-face.el: Don't add custom-initialize-frame to
	after-make-frame-hook.

	* frame.el (make-frame): Call custom-initialize-frame
	only if cus-face is loaded.

	* sendmail.el (mail-do-fcc): After appending to a buffer,
	offer to save it.  Or if the buffer matched the file,
	append to the file too.

1997-04-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-relative-name): Expand both args before
	checking for device mismatch.

	* scroll-lock.el: New file.

	* crisp.el: New file.

	* cus-face.el (custom-initialize-frame): Add autoload cookie.

	* faces.el (make-face): New arg no-resources.
	(make-empty-face): New function.

	* frame.el (frame-parameter): New function.

	* simple.el (keyboard-escape-quit): Exit recursive edits,
	and switch away from buffers whose names start with space.

1997-04-10  Ed Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* holidays.el (list-holidays): New function.

	* cal-julian.el (diary-astro-day-number): Change format string.

	* cal-french.el (diary-french-date): Use `date'.
	Add  some additional text at the end.

	* cal-persia.el (diary-persian-date): Use `date'.
	Add  some additional text at the end.

	* cal-coptic.el (diary-coptic-date): Use `date'.
	If calendar-coptic-date-string gives nonempty string,
	add additional text to it.

	* cal-islam.el (diary-islamic-date): Use `date'.

1997-04-10  Hrvoje Niksic  <hniksic@srce.hr>

	* ispell.el: Use defcustom for user variables.

1997-04-10  Dave Love  <d.love@dl.ac.uk>

	* scheme.el: Add DSSSL mode and share code with newly required
	lisp-mode as much as possible.
	(scheme-mode-variables): Copy filling stuff from lisp-mode.
	Add an outline-regexp.
	(scheme-mode-map): Inherit shared-lisp-mode-map and provide a menu.
	(dsssl-sgml-declaration): New variable.
	(dsssl-mode): New command.
	(dsssl-font-lock-keywords): New variable.
	(scheme-indent-function): Near copy of lisp-indent-function.
	(scheme-comment-indent, scheme-indent-offset)
	(scheme-indent-function, scheme-indent-line)
	(calculate-scheme-indent, scheme-indent-specform)
	(scheme-indent-defform, scheme-indent-sexp): Removed; use lisp-mode
	equivalents.
	(scheme-imenu-generic-expression): New variable.
	(dsssl-imenu-generic-expression): New variable.
	(scheme-let-indent): Use lisp-indent-specform.

1997-04-09  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Set font-lock-comment-start-regexp via
	font-lock-defaults.
	(sh-set-shell): Don't set font-lock-keywords or font-lock-syntax-table,
	and don't toggle Font Lock mode if it is already on.

1997-04-09  Dave Love  <d.love@dl.ac.uk>

	* cmuscheme.el (scheme-mode-map): Add some menu items.

1997-04-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lisp-mode.el (eval-defun): For defcustom, always set the value.

1997-04-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* complete.el (PC-try-load-many-files): Set truename.

1997-04-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Delete the explicit autoload calls.
	(custom-help-menu): Don't use easymenu; make the keymap explicitly.
	(custom-menu-reset): Function deleted.  Don't call it, either.
	(custom-help-menu): Variable deleted.

	* menu-bar.el (menu-bar-custom-menu): New variable;
	add it as a submenu of the Help menu.

	* loadup.el: Load widget and custom packages.

	* files.el (file-relative-name): Handle differing drive letters
	on Microsoft systems.

1997-04-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* frame.el (make-frame): Call `custom-initialize-frame'.

1997-04-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* fontset.el: When calling put-charset-property, ignore errors.
	(x-charset-registries): Turn Tibetan on again.

	* perl-mode.el (calculate-perl-indent): When indenting under a
	containing openparen, skip spaces after the openparen.

	* fontset.el (x-charset-registries): Turn off Tibetan.

1997-04-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el: Total rewrite.
	* cus-edit.el: New file.
	* cus-face.el: New file.
	* widget.el: New file.
	* wid-edit.el: New file.
	* wid-browse.el: New file.

1997-04-04  Kenichi HANDA  <handa@etl.jp.jp>

	* ccl.el: Comment fixed.

	* characters.el: Change a category of one Japanese character.

	* fontset.el (x-charset-registries): Add Tibetan entries.

	* language/devanagari.el, language/devan-util.el,
	* language/indian.el: Handle more Devanagari characters correctly.

	* language/english.el: New file.

	* language/ethiopic.el, language/ethio-util.el: Completely updated.

	* language/european.el: English related codes are moved to
	language/english.el.
	(setup-european-environment): Call setup-english-environment to
	reset to default setting at first.

	* language/tibetan.el, language/tibet-util.el: New files.

	* loadup.el: Load language/english and language/tibetan.

	* mule-cmds.el: Prefix for Mule related commands is changed.
	(view-hello-file): Always does correct decoding of HELLO file.

	* mule-conf.el: Change descriptions for Arabic, Indian, and
	Vietnamese character sets.  Define Tibetan character sets.

	* sun-fns.el: Require 'term/sun-mouse instead of 'sun-mouse.

	* term/sun-mouse.el: Provide 'term/sun-mouse instead of
	'sun-mouse.

1997-04-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* case-table.el (set-case-syntax): Doc fix.

1997-04-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (grep-null-device): Move before first use.

	* vc.el (vc-checkin-hook): Doc fix.

1997-04-01  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-before-checkin-hook): New hook.
	(vc-start-entry): Use it.

1997-04-01  Erik Naggum  <erik@naggum.no>

	* simple.el (set-variable): Suggest only valid user variable.

1997-03-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired-aux.el (dired-copy-file): Handle file-date-error.

	* rmailout.el (rmail-output-body-to-file): Query if file exists.
	Renamed from rmail-output-body.
	* rmail.el (rmail-mode-map): Add menu item for
	rmail-output-body-to-file and put it on w.

	* imenu.el (imenu-default-goto-function): Simplify.

1997-03-31  Yann Dirson  <dirson@univ-mlv.fr>

	* imenu.el: Truncate imenu items.
	Make use of markers or integers an option.
	(imenu-use-markers, imenu-max-item-length): New variables.
	(imenu-max-items): Doc fix.
	(imenu-example--name-and-position): Handle imenu-use-markers.
	(imenu-default-create-index-function): Likewise.
	(imenu--generic-function): Likewise.
	(imenu--truncate-items): New function.
	(imenu--make-index-alist): Call imenu--truncate-items.

1997-03-31  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* hideshow.el (hs-hide-block-at-point): Doc fix.

	* comint.el (comint-delchar-or-maybe-eof): Check for null proc.

1997-03-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailout.el (rmail-output-to-rmail-file):
	Use find-buffer-visiting instead of get-file-buffer.

	* dabbrev.el (dabbrev--substitute-expansion):
	Change criterion for copying expansion's case pattern.
	Do this now if expansion case varies after the first char.

	* rmailout.el (rmail-output-body): New command.

	* debug.el (debug): Use save-excursion inside the binding of
	buffer-read-only.

1997-03-30  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-mode-map): Added menus.
	(icon-imenu-generic-expression): New variable to be used for imenu.
	(icon-mode): Added font-lock, imenu and hideshow support.
	(icon-font-lock-keywords-1, icon-font-lock-keywords-2):
	New constants for different level of font-lock fontification.
	(icon-font-lock-keywords): New variable.  Default expression to be
	assigned to font-lock-keywords in `icon-mode'.
	(icon-forward-sexp-function): New function used as `forward-sexp'
	by hideshow.

1997-03-30  Masatake YAMATO  <jet@airlab.cs.ritsumei.ac.jp>

	* bookmark.el: Added mouse-selection feature for bookmark list buffer.
	(bookmark-bmenu-other-window-with-mouse): New function.
	(bookmark-bmenu-mode-map): Bind mouse-2.
	(bookmark-bmenu-list, bookmark-insert-location)
	(bookmark-bmenu-hide-filenames): Put text property on bookmarks.
	(bookmark-bmenu-show-filenames): Remove text property from
	white spaces generated by `move-to-column'.
	(bookmark-bmenu-bookmark): Use `buffer-substring-no-properties'
	instead of `buffer-substring'.

1997-03-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bruce.el: New file.

	* mspools.el: New file.

	* sh-script.el (sh-mode): If file has no #! line,
	set the syntax table based on the default shell.

1997-03-29  Barry A. Warsaw  <cc-mode-help@python.org>

	* Public Release 4.389.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 5C: watch out for Java abstract method
	definitions.  These are distinguished from normal throws clauses since
	they cross statement boundaries.
	(c-guess-basic-syntax): CASE 5A.3: use boi instead of bol.

	* cc-mode.el (c-Java-comment-start-regexp):
	Recognize the three Java styles of comments: 1) traditional
	C block; 2) javadoc style /** ...; 3) C++ style.
	(java-mode): Set buffer local variable c-comment-start-regexp to
	c-Java-comment-start-regexp.

	* cc-mode.el (c-fill-paragraph):
	Do not set fill-prefix to "*" when looking-at
	"*/", otherwise the following example does not fill properly (the last
	star gets deleted).

	/* this is a comment
	*/

	(c-fill-paragraph): Use c-comment-start-regexp derived regular
	expression when checking for c-hanging-comment-starter-p, so javadoc
	styles are handled correctly in Java mode.

	* cc-mode.el (c-lineup-C-comments):
	Handle more cases, especially when comment
	lines aren't prefixed with stars.
	Change the re-search-forward to a looking-at in
	the innermost test.  This catches GNU-style comments.

	* cc-mode.el (c-add-syntax):
	Move macro definition to before its first use.

	* cc-mode.el (c-submit-bug-report):
	Capture buffer local variable values which are
	printed in the post-hook, while the current buffer is the CC Mode
	buffer we're interested in.  reporter-submit-bug-report leaves the
	current buffer as the mail buffer, so buffer local variables will not
	get the proper value.

	* cc-mode.el (c-inher-key):
	Require the regexp group that contains the `:'.
	Previously it was optional, but that broke other code.

1997-03-29  Marco Melgazzi  <marco@techie.com>

	* term.el: Added a lot of new faces, they all start with
	term- and follow a simple lexicographical convention.  Note that
	each change is commented: just search for -mm in the source.
	(term-char-mode): Added all the "gray-keys" to term-raw-map.
	(term-send-up): Similar, decided to go for the more xterm-like
	\eOA bindings in place of the previous \e[A.
	(term-buffer-maximum-size): New variable.
	(term-mode): Added some make-local: now term-buffer-maximum-size,
	ange-ftp-default-user/password/an-pwd.
	(term-emulate-terminal): Quite some modifications to allow
	multiple outstanding ANSI style commands: notably all the
	-previous-parameter stuff.  Call term-handle-ansi-terminal-messages.
	(term-emulate-terminal): Added simple trimming function: at the
	end we simply check if the buffer is > term-buffer-maximum-size
	and cut it accordingly.
	(term-handle-colors-array): New function.
	(term-handle-ansi-terminal-messages): New function.
	(term-handle-ansi-escape): Modified to allow ANSI coloring.
	(ansi-term): New function that creates multiple terminals.  Put
	in the standard C-x map too: I'm quite used to C-x C-f and C-c C-f
	was too awkward.

1997-03-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hideshow.el (hs-show-all, hs-safety-is-job-n): Fix messages.

1997-03-28  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el: Use overlays for hiding instead of selective display.
	Commented out the support for XEmacs because it doesn't support
	overlays.
	(hs-special-modes-alist): Added support for java-mode.
	(hs-minor-mode-hook): New variable.
	(hs-c-start-regexp, hs-c-end-regexp, hs-forward-sexp-func)
	(hs-block-start-regexp, hs-block-end-regexp)
	(hs-find-block-beginning): Doc string fixes.
	(hs-hide-comments-when-hiding-all): New variable.
	(hs-safety-is-job-n, hs-minor-mode, hs-flag-region):
	Use overlays for hiding.
	(hs-inside-single-line-comment-p, hs-discard-overlays)
	(hs-already-hidden-p): New internal functions.
	(hs-hide-block-at-point, hs-hide-initial-comment-block)
	(java-hs-forward-sexp, hs-mouse-toggle-hiding): New functions.
	(hs-inside-comment-p, hs-hide-block)
	(hs-show-block): Added support for single line comments.
	(hs-hide-all): Added support for hiding comments.

1997-03-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-utils.el (rmail-dont-reply-to): Let the regexp
	match after a <.

	* files.el (make-auto-save-file-name): Replace both / and \
	with sequences starting with %.

1997-03-28  Jeff Dwork  <jeff.dwork@amd.com>

	* ehelp.el (with-electric-help): Remove hook on exit.
	(electric-help-exit): Add doc string.  Remove hook before exit.

1997-03-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sgml-mode.el (sgml-validate): Offer to save the buffer first.

1997-03-28  Erik Naggum  <erik@naggum.no>

	* simple.el (set-variable): Use user-variable-p.  Clean up.

1997-03-26  Michael Ernst  <mernst@cs.washington.edu>

	* simple.el (set-variable): Take default from `variable-at-point'.

1997-03-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iswitchb.el: New file.

	* uncompress.el (uncompress-while-visiting): Handle .tgz files.

	* noutline.el (outline-discard-overlays): Fix the case
	where an overlay extends on both sides of the region.
	(outline-mark-subtree): New function.
	(outline-mode-prefix-map): Put outline-mark-subtree on C-c @.

1997-03-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vms-patch.el (auto-mode-alist): Add .com element.

	* term/x-win.el (function-key-map): Define iso-lefttab.

1997-03-24  Vince Del Vecchio  <vdelvecc@spd.analog.com>

	* mh-utils.el (mh-find-progs): When looking for mh-lib, construct
	likely paths based on mh-progs rather than using a static list.

1997-03-24  Kevin Rodgers  <kevinr@ihs.com>

	* compile.el (grep-program): New variable.
	(grep-command): Use it, and test whether it supports the -e
	option; fix doc string (last command is stored in history variable).
	(grep-null-device): Declare before grep-program and grep-command.
	(grep-find-use-xargs, grep-find-command, grep-find-history):
	New variables.
	(grep-find): New command.
	(grep): Only concatenate grep-null-device to COMMAND when it's
	not nil (to support grep-find).

1997-03-24  Tom Tromey  <tromey@cygnus.com>

	* make-mode.el (makefile-backslash-align): New variable.
	(makefile-backslash-region): Re-imported from cc-mode; modified to
	handle makefile-backslash-align.
	(makefile-append-backslash, makefile-delete-backslash):
	Re-imported from cc-mode.
	(makefile-backslashify-current-line): Function deleted.
	(makefile-fill-paragraph): New function.
	(makefile-mode-map): Bind C-c C-c to comment-region.
	(makefile-mode): Set fill-paragraph to makefile-fill-paragraph.

1997-03-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* frame.el (set-screen-height): Doc fix.

1997-03-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dcl-mode.el: New file.

	* lisp-mode.el (indent-sexp): If calculate-lisp-indent returns nil,
	don't change the line's indentation.
	(lisp-indent-line): Likewise.
	(lisp-comment-indent): Likewise.
	(calculate-lisp-indent): Return nil if line starts inside a string.

1997-03-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line-1): Initialize *scratch* with
	text saying not to use it for creating a file.

	* mailalias.el (mail-complete-style): New variable.
	(mail-complete): Use that.
	(mail-get-names): Store full names in cdrs of mail-names elts.
	(mail-names): Doc fix.
	(mail-directory): Minor cleanup.

1997-03-21  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action-on-file): With implicit checkout, make
	sure not to lose unsaved changes.

1997-03-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (help-map): Use apropos-command, not command-apropos.

1997-03-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-forward): Don't do dash-quoting on the signature.

1997-03-20  Dan Nicolaescu  <done@ece.arizona.edu>

	* imenu.el (imenu-scanning-message): Support for bigger numbers.
	(imenu--generic-function): Fixed probably a typo: named appeared
	twice in an item.  Put function after name and beg in a special
	item because a normal item has name and beg (for orthogonality).
	(imenu-add-to-menubar): First test to see if the mode supports
	imenu.
	(imenu--menubar-select): Use the defined variable
	imenu-rescan-item.

	* imenu.el (imenu-default-goto-function): New subroutine,
	broken out of `imenu'.
	(imenu-default-goto-function): New variable.
	(imenu): Made it use the above function, via that variable.

1997-03-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-retry-failure): Special handling for mime.
	(mail-mime-unsent-header): New variable.

1997-03-20  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* dired.el (dired-no-confirm): Doc fix.
	(dired-mark-pop-up): If dired-no-confirm is t, don't confirm.

	* dired-aux.el (dired-mark-confirm): Likewise.

1997-03-19  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* cal-tex.el (cal-tex-preamble): Set \lineskip to 0pt.

1997-03-18  Kenichi Handa  <handa@etl.go.jp>

	* fontset.el (x-complement-fontset-spec): Setup
	alternative-fontname-alist while complementing fontnames.

1997-03-18  Naoto TAKAHASHI  <ntakahas@etl.go.jp>

	* mule-conf.el: Change short and long names for Ethiopic character set.

	* fontset.el (x-charset-registries): Change entry for Ethiopic.

	* quail.el (quail-translation-keymap): Add entry for escape key.
	(quail-conversion-keymap): Likewise.
	(quail-keyboard-layout-standard): Add two lines for
	keyboard layout.
	(quail-keyboard-layout): Docstring changed to reflect the above
	change.
	(quail-keyboard-layout-len): Increased for the above change.
	(quail-keyboard-layout-alist): Modified for the above change.

1997-03-18  Kenichi Handa  <handa@etl.go.jp>

	* mule.el (make-char): Documented.
	(charset-plist): Return quoted list even if CHARSET is
	supplied by symbol.

	* fontset.el: Typo in comments fixed.
	(fontset-plain-name): Set correct size information.
	(x-reduce-font-name): New function.
	(x-compose-font-name): New optional argument REDUCE.
	(x-complement-fontset-spec): Call x-compose-font-name with t for
	the above argument.

	* faces.el (set-face-font): Allow specifying fontset for the arg FONT.

	* mule-conf.el (alternate-charset-table): Change each entry from
	list to dot pair.

	* language/viet-util.el (viet-decode-viqr-region): Supply correct
	argumnents to rassoc.
	(viqr-post-read-conversion, viqr-pre-write-conversion): New
	functions.

	* language/vietnamese.el: Set the above functions to the coding
	system viqr.

	* language/thai-util.el (thai-post-read-conversion): Return the
	correct length.

1997-03-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term/x-win.el: Conditionalize the fontset code on
	whether new-fontset is bound.

1997-03-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mailalias.el (mail-passwd-command): New variable.
	(mail-get-names): Implement that variable.

1997-03-17  Erik Naggum  <erik@naggum.no>

	* apropos.el (apropos): Print all property symbols.

1997-03-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (newline): Be more conservative about when to use
	the optimization.

1997-03-15  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ring.el: Many doc fixes.
	(ring-ref): Fix error message.

1997-03-15  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* comint.el (comint-delchar-or-maybe-eof): Send EOF iff point is at eob
	and there is no process input.
	(send-invisible): Do nothing if comint-read-noecho returns nil.
	(comint-exec-1): Set TERMCAP to the empty string if TERM is dumb.

	* faces.el (face-differs-from-default-p): When testing FACE's non-nil
	face-font with the default face font, use the frame's font parameter
	if the default face's face-font is nil.

	* frame.el (make-frame): Run after-make-frame-functions with frame.
	(before-make-frame-hook, after-make-frame-functions): defvar them.

	* font-lock.el (font-lock-keyword-depth): New function.
	Use it wherever extra types are used to calculate parenthesis depth.
	(c-font-lock-extra-types, c++-font-lock-extra-types)
	(objc-font-lock-extra-types, java-font-lock-extra-types)
	(font-lock-keywords): Doc fix.
	(font-lock-defaults, font-lock-defaults-alist): Doc switch.
	(font-lock-maximum-decoration): Default to t.

	* sendmail.el (mail-font-lock-keywords): Tweak citation regexp.

	* rmail.el (rmail-font-lock-keywords): Tweak citation regexp.

1997-03-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* cl.el (when, unless): Symbol props moved to subr.el.

	* subr.el (when, unless): Symbol props moved from cl.el.
	(add-to-invisibility-spec): Add to beginning, not end.

1997-03-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* indent.el (indent-line-to): Fix off-by-one bug when deciding
	whether to delete the existing spaces.

1997-03-13  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mailalias.el (mail-passwd-files): New variable.
	(mail-get-names): Use mail-passwd-files instead of always /etc/passwd.

1997-03-12  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el (c-lineup-C-comments): Handle more cases, especially
	when comment lines aren't prefixed with stars.
	(c-Java-class-key): Optional space after protection key should be
	inside first paren group.
	(c-functionp, c-copy-tree): Better compatibility checks between
	XEmacs and Emacs.
	(c-guess-basic-syntax): CASE 5B.1: watch out for throw clauses
	which could follow a member init list in a constructor.
	(c-submit-bug-report): Display c-indentation-style, but not in the
	setq.
	(c-Java-special-key): New variable recognizes Java "implements",
	"extends", and "throws" keywords.
	(c-guess-basic-syntax): CASE 5C: recognize Java constructs
	"implements", "extends", and "throws"; CASE 5C.3: differentiate
	between "throws" == func-decl-cont, and "implements" or "extends" ==
	inher-intro or inher-cont; CASE 5D.3: removed; CASE 5D.4 => 5D.3;
	CASE 5D.5 => CASE 5D.4; CASE 5D.6 => CASE 5D.5; CASE 5K: don't need to
	look for Java keywords.
	(c-lineup-java-inher): Better indentation calculation for Java
	inheritance constructs.
	(c-Java-special-key, c-guess-basic-syntax, c-lineup-java-inher):
	Recognize Java "extends", "implements", and "throws" clauses and
	map them into inher-intro, inher-cont, and func-decl-cont
	syntactic symbols.  Do the indentation as of Java inheritance
	lines better.
	(c-offsets-alist): Changed the syntactic symbol ansi-funcdecl-cont
	to func-decl-cont.  This symbol is useful in Java throws
	declarations.
	(c-lineup-java-inher): New function for lining up "implements"
	continuations (i.e. inheritance in Java).
	(c-style-alist): In "java" style, set inher-cont to
	c-lineup-java-inher.
	(c-Java-class-key): Optional c-protection-key can appear before the
	"class" keyword.
	(c-beginning-of-statement-1): First, check for bare semi-colon,
	which is a legal statement but not caught by the more intense loop
	later on.
	(c-style-alist): Fixes to "ellemtel" style given by Colin Rafferty
	<craffert@spspme.ml.com>.
	(c-beginning-of-statement): Don't use forward-sentence when
	looking at a C block comment start.  c-beginning-of-statement-1
	will do the right thing.
	(c-guess-basic-syntax): CASE 5C: watch for scope operators.
	(c-lineup-C-comments): Watch out for no leading stars.
	(c-set-style): Add initial contents (the value of
	c-indentation-style), and history on the style name.
	(c-mode-map): Bind c-set-style on `C-c .'.
	(c-read-offset, c-read-offset-history): Use completing-read, with
	REQUIRE-MATCH nil, so that offsets can be completed when they are
	function names.  Also implement read history.
	(c-guess-basic-syntax): CASE 15D: fix infinite loop problem in
	while... clause looking for statement starting at boi, when using
	run-in statement styles.
	(cc-imenu-java-generic-expression): New variable for integration
	of java-mode with imenu.
	(java-mode): Use cc-imenu-java-generic-expression.
	(c-hanging-comment-starter-p): New variable, analogous to
	c-hanging-comment-ender-p.
	(c-fill-paragraph): Use c-hanging-comment-starter-p.
	(java-mode): Do not set defun-prompt-regexp to
	c-Java-defun-prompt-regexp.
	(c-guess-basic-syntax): CASE 2: relpos for c and c++ is now boi.

1997-03-11  Kurt Hornik  <Kurt.Hornik@ci.tuwien.ac.at>

	* octave-mod.el (octave-abbrev-table): Add abbrevs for switch,
	case, otherwise, and endswitch.
	(octave-begin-keywords): Add switch.
	(octave-else-keywords): Add case and otherwise.
	(octave-end-keywords): Add endswitch.
	(octave-block-match-alist): Add an entry for switch syntax.
	(calculate-octave-indent): Add support for switch syntax.
	(octave-block-end-offset): New function.
	(octave-comment-indent): Fix typo.

	* octave-hlp.el: Provide octave-hlp.

	* octave-inf.el: Provide octave-inf.

	* ielm.el (inferior-emacs-lisp-mode): Set comint-completion-addsuffix.

	* term.el (term-completion-addsuffix): Doc fix.
	(term-dynamic-complete-as-filename): Support the case where
	term-completion-addsuffix is a (DIRSUFFIX . FILESUFFIX) cons
	pair.

1997-03-11  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* subr.el (combine-after-change-calls): Doc fix.

	* uniquify.el (uniquify-buffer-file-name): Don't call
	expand-file-name on nil.  Check whether list-buffers-directory is
	bound.  Ignore non-file non-dired buffers.

	* lisp-mode.el (lisp-imenu-generic-expression): Accept `*', `|',
	and `:' in symbol names.

	* make-mode.el (makefile-dependency-regex): Disallow "=" in name,
	so that "flags=-o:1" is treated as an assignment, not a dependency.
	(makefile-dependency-regex, makefile-macroassign-regex): Disallow
	spaces in symbol name.

1997-03-11  Dan Nicolaescu  <done@ece.arizona.edu>

	* subr.el (add-to-invisibility-spec, remove-from-invisibility-spec):
	New functions.

1997-03-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* dired-aux.el (dired-fun-in-all-buffers): New arg FILE.  Don't
	operate on buffers whose wildcard pattern does not accept FILE.
	All callers changed.

	* dired.el (dired-glob-regexp): New function.
	(dired-buffers-for-dir): New arg FILE; if non-nil,
	check that it matches the wildcard pattern.

1997-03-11  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* ispell.el (ispell-command-loop): Disable message logging.
	(ispell-region): Ditto.

1997-03-10  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* files.el (recover-session): Add `t' to switches.

1997-03-09  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (universal-argument-more): If previous arg is `-',
	change that to -4.

1997-03-08  Joel Ray Holveck  <joelh@gnu.ai.mit.edu>

	* info.el (Info-read-node-name): Caused completing-read to force
	the input read to match a valid entry.

1997-03-08  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* isearch.el (isearch-yank): Handle case when CHUNK is `x-sel'.

1997-03-08  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* enriched.el (enriched-decode-foreground, enriched-decode-background):
	Make COLOR arg optional.  Fix error messages.

	* subr.el (substitute-key-definition):
	Compare with equal if definition is a key sequence.

	* desktop.el (desktop-missing-file-warning): Make the default nil.

1997-03-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-backend-diff): Handle RCS and SCCS separately.

1997-03-01  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* simple.el (eval-expression): No longer disabled, since M-: isn't
	as likely to be typed by mistake as the old ESC ESC binding was.
	Arg `expression' renamed to `eval-expression-arg' to avoid
	potential collision if its value mentions `expression'.

1997-03-01  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* man.el (man-mode-syntax-table): New variable.
	(Man-mode): Use it.
	(man-follow): New command and keystroke.
	(Man-default-man-entry): Ignore trailing dots and underscores.

1997-02-28  Kenichi HANDA  <handa@etl.go.jp>

	* characters.el, mule-conf.el, gnus-mule.el, kkc.el, rmail.el,
	* sendmail.el, skkdic-conv.el, titdic-conv.el, language/thai.el,
	* language/vietnamese.el, language/lao.el, language/korean.el,
	* language/japanese.el, language/hebrew.el, language/greek.el,
	* language/european.el, language/devanagari.el, language/chinese.el,
	* language/cyrillic.el, language/china-util.el:
	Remove prefix "coding-system-" from coding system symbol names.

1997-02-28  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* copyright.el (copyright-regexp): Allow "Copyright" and the
	copyright symbol together.

1997-02-27  Kenichi HANDA  <handa@etl.go.jp>

	* mule.el: Initialize a global variable use-default-ascent.
	(make-coding-system): Set charset (symbol) instead of charset-id.
	(integer) in FLAGS of ISO-2022 type coding systems.  For ISO-2022
	type coding systems, new flags INIT-BOL DESIGNATION-BOL are added.
	(define-coding-system-alias): Coding style changed.
	(charset-list): Incorrect macro definition changed to correct
	defsubst.

	* sendmail.el (sendmail-coding-system): Add autoload cookie.
	Default value is nil.

	* rmail.el (rmail-view-buffer, rmail-enable-mime)
	(rmail-show-mime-function, rmail-mime-feature): New variables to
	control MIME feature.
	(rmail-file-coding-system): Default value is nil.
	(rmail, rmail-convert-file, rmail-insert-inbox-text): Check
	rmail-enable-mime.  Read a file without any code conversion.
	(rmail-variables): Setup local variables rmail-buffer and
	rmail-view-buffer.
	(rmail-decode-babyl-format, rmail-convert-babyl-format): Perform
	code conversion of RMAIL file if rmail-enable-mime is nil.
	(rmail-show-message): Make sure to be in rmail-buffer.  If
	rmail-enable-mime is t, call appropriate function to decode MIME
	format.
	(rmail-mail, rmail-reply): Call rmail-start-mail with argument
	rmail-view-buffer.

	* rmailsum.el (rmail-new-summary): Setup rmail-view-buffer.
	(rmail-summary-line-decoder): New variable.
	(rmail-make-summary-line-1): Use a function set in
	rmail-summary-line-decoder.
	(rmail-summary-next-msg): Display rmail-view-buffer.
	(rmail-summary-mode): Make rmail-view-buffer buffer local.
	(rmail-summary-rmail-update, rmail-summary-scroll-msg-up): Use
	rmail-view-buffer instead of rmail-buffer.

	* mule-cmds.el (mule-keymap): Re-arranged.
	(set-language-info): Typo fixed in docstring.
	(read-language-name): Use assoc-ignore-case to allow lose
	matching.
	(read-language-and-input-method-name): Likewise.

	* mule-util.el (truncate-string-to-width): Argument PADDING can be
	a padding character.

	* mule-conf.el: Change coding system names iso-2022-int to
	iso-2022-int-1, iso-2022-int-2 to iso-2022-cjk.  Add INIT-BOL to
	coding system iso-2022-cjk.  Define a character set for Lao.

	* quail.el: Add quail-mode to default value of
	minor-mode-map-alist if it is set to local variable.
	(quail-show-kbd-layout): Bug fixed for keys not translated.

	* encoded-kbd.el: Many changes to cope with the above change.
	(encoded-kbd-select-terminal): New function.

	* characters.el: Add a section for Lao.

	* loadup.el: Load "language/lao".

	* language/lao.el, language/lao-util.el: New files for Lao.

	* language/chinese.el: Add INIT-BOL to coding system iso-2022-cn.

	* language/cyrillic.el: Change coding system name koi8 to koi8-r.

	* language/japanese.el: Change coding system name shift-jis to
	shift_jis.

	* language/devanagari.el: Fix handling of several characters.

	* language/devan-util.el: Likewise.

	* bookmark.el (bookmark-jump-noselect): Use goto-char instead of
	forward-char/backward-char to pay attention to multibyte
	characters.

1997-02-26  Chung Jae-youn  <crisp@hugsvr.kaist.ac.kr>

	* gnus-mule.el (gnus-mule-decode-summary): The function
	implemented correctly.
	(gnus-mule-initialize): Setup gnus-summary-generate-hook.

1997-02-26  enami tsugutomo  <enami@ba2.so-net.or.jp>

	* bytecomp.el (byte-compile-file): Bind coding-system-for-write
	instead of coding-system-for-read to 'no-conversion to disable
	code conversion by write-region.

1997-02-26  Yutaka NIIBE  <gniibe@mri.co.jp>

	* dired.el (dired-find-file): Allow specifying coding system
	interactively.

1997-02-26  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* vc.el (vc-log-mode): New optional arg FILE.  Set vc-log-file here.
	(vc-start-entry): Not here.
	(vc-finish-logentry): Run vc-finish-logentry-hook.

1997-02-26  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-tools-menu): Fix typo in Send Mail item.

1997-02-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-case): Define with defun and defvar
	instead of define-skeleton.

1997-02-24  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* facemenu.el (facemenu-set-invisible, facemenu-set-intangible)
	(facemenu-set-read-only): Change put-text-property with constant
	args to add-text-properties for efficiency.  Suggested by Stavros
	Macrakis <s.macrakis@opengroup.org>.

1997-02-23  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* sh-script.el (sh-mode-hook, sh-set-shell-hook): Add defvars.

	* avoid.el: Don't put "Avoid" in the mode line.

	* lisp-mode.el (eval-last-sexp): Allow let-bindings to terminate
	before doing the eval.
	Handle (interactive ...) form specially.

1997-02-23  Michael Ernst  <mernst@cs.washington.edu>

	* rmail.el (rmail-next-same-subject, rmail-reply): Ignore case, to
	match "RE:" as well as "Re:".

1997-02-22  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tq.el (tq-process-buffer): Catch errors running tq-queue-head-fn.

1997-02-21  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-default-unfontify-buffer): If we have called
	font-lock-set-defaults first, call font-lock-unset-defaults last.
	(font-lock-fontify-anchored-keywords): Use the value of PRE-MATCH-FORM
	as the value of LIMIT if appropriate, otherwise use EOL.  Doc fix.
	(font-lock-keywords): Doc fix.
	(turn-on-font-lock): Test font-lock-mode.
	Added commented out menu code.

	* compile.el (compilation-mode-font-lock-keywords): Variable
	definition deleted.  New function.
	(compilation-mode-map): Add `...' to Compile menu entry.

1997-02-20  Yutaka NIIBE  <gniibe@mri.co.jp>

	* fill.el (do-kinsoku): New variable.
	(fill-region-as-paragraph): Handle `kinsoku' processing.

	* simple.el (do-auto-fill): Handle `kinsoku' processing.

1997-02-20  Tsugutomo ENAMI  <enami@sys.ptg.sony.co.jp>

	* nnheader.el (nnheader-insert-head): Handle the case that the
	length of header is changed because of code conversion.

1997-02-20  Kenichi HANDA  <handa@etl.go.jp>

	* ccl.el, characters.el, encoded-kb.el, fontset.el: New files.
	* gnus-mule.el, isearch-x.el, kinsoku.el, kkc.el: New files.
	* mule-cmds.el, mule-diag.el, mule-util.el, mule.el: New files.
	* quail.el, skkdic-cnv.el, skkdic-utl.el, titdic-cnv.el: New files.

	* autoload.el (update-file-autoloads): Read loaddefs.el without
	any code conversion.

	* bindings.el (mode-line-mule-info): New variable.
	(mode-line-format): Include it.

	* bytecomp.el (byte-compile-file): Write a compiled file without
	any code conversion.

	* debug.el (debugger-mode): Disable multibyte character handling
	in Debugger mode.

	* files.el (find-file): With a prefix argument, enable users to
	specify a coding system interactively.
	(find-file-other-window, find-file-read-only): Likewise.
	(find-file-read-only-other-window): Likewise.
	(find-file-read-only-other-frame): Likewise.
	(find-alternate-file-other-window, find-alternate-file): Likewise.
	(find-file-noselect): Describe optional arguments NOWARN and
	RAWFILE in the doc-string.
	(write-file, insert-file, append-to-file): Accept a prefix
	argument to enable users to specify a coding system interactively.
	(revert-buffer): Read an auto-saved file without any code
	conversion.

	* help.el (help-with-tutorial): Prefix argument to specify a
	language interactively.

	* isearch.el (isearch-mode-map): Define
	isearch-toggle-input-method and
	isearch-toggle-specified-input-method in the map.
	(isearch-multibyte-characters-flag): New variable.
	(isearch-mode): Initialize it to nil.
	(isearch-printing-char): Handle multibyte characters.
	(isearch-message-prefix): Include title of input method if
	necessary in the prefix of message.

	* language/: New directory containing Emacs Lisp files to setup
	environment and provide utilities for each language.

	* loadup.el: Load mule specific files.

	* mouse.el (mouse-set-font): Handle fontset.

	* paren.el (show-paren-function): Handle multibyte characters.

	* replace.el (occur): Pay attention to multibyte characters.

	* rmail.el (rmail-file-coding-system): New variable.
	(rmail-insert-inbox-text): Perform character code conversion
	according to rmail-file-coding-system.
	(rmail-only-expunge): Pay attention to multibyte characters.

	* select.el (x-get-selection): Set default data-type of selection
	to COMPOUND_TEXT.
	(selection-converter-alist): Add an entry for COMPOUND_TEXT.

	* sendmail.el (sendmail-coding-system): New variable.
	(sendmail-send-it): Perform code conversion on sending mail
	according to sendmail-coding-system.

	* simple.el (kill-forward-chars, kill-backward-chars): Pay
	attention to multibyte characters.
	(what-cursor-position): With a prefix argument, print detailed
	info of a character on cursor position.
	(transpose-subr-1): Pay attention to multibyte characters.

	* term/x-win.el: Require fontset.  Create fontsets from
	default-fontset-spec, X resources, and "-fn" command line
	argument.

1997-02-19  Noah Friedman  <friedman@splode.com>

	* eldoc.el (eldoc-message-commands): Doc fixes.
	(eldoc-message): Make function, not macro.

	* eldoc.el (eldoc-last-message): New internal variable.
	(eldoc-mode): Initialize it to nil.
	(eldoc-message): Use it.
	(eldoc-print-current-symbol-info): Use it.

	* eldoc.el (eldoc-pre-command-refresh-echo-area): New function.
	(eldoc-mode): Put it on pre-command-hook if in XEmacs or using
	idle timers in Emacs.

	* eldoc.el (eldoc-message-commands-table-size): New constant.
	(eldoc-add-command): Use it to initialize eldoc-message-commands.

	* eldoc.el (eldoc-display-message-no-interference-p): New function.
	(eldoc-display-message-p): Use it.

	* eldoc.el (eldoc-print-fnsym-args, eldoc-print-var-docstring):
	Arg sym no longer optional.
	Do not initialize arg if nil.

	* eldoc.el (eldoc-forward-sexp-safe): Function deleted.
	(eldoc-beginning-of-sexp): New function.
	(eldoc-fnsym-in-current-sexp): Use eldoc-beginning-of-sexp.
	Use eldoc-current-symbol to get symbol at point.

	* eldoc.el (eldoc-function-argstring-from-docstring-method-table):
	Forge docstrings for `and', `or', `list', `+', and `-'.

	* eldoc.el (eldoc-add-command-completions): New function.
	(eldoc-add-command): Take list of args.
	No longer interactive.
	(eldoc-remove-command-completions): New function.
	(eldoc-remove-command): Take list of args.
	No longer interactive.

	* eldoc.el: Initialize eldoc-message-commands using
	eldoc-add-command-completions.

	* eldoc.el (eldoc-display-message-p): New function.
	Return nil if cursor-in-echo-area, or using idle timers and a
	command is still active.
	(eldoc-print-current-symbol-info): Use eldoc-display-message-p.

1997-02-17  Roland McGrath  <roland@galapas.ai.mit.edu>

	* autoload.el (update-autoloads-from-directory): Get absolute file
	names from directory-files, and expand generated-autoload-file.
	Subdirs happy now.

1997-02-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mail-utils.el (rmail-dont-reply-to): Delete debugging code.
	Don't insist on whitespace after commas.

1997-02-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* replace.el (replace-string): Doc fix.

1997-02-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc.el (vc-do-command): If OKSTATUS is nil, ignore errors.
	(vc-backend-release): For RCS, pass nil for OKSTATUS.

1997-02-09  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compare-w.el (compare-windows): Make more efficient use of
	result from compare-buffer-substrings.

1997-02-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-search): Refuse to match invisible text.
	(isearch-range-invisible): New function.
	(search-invisible): New user option.

1997-02-09  Eli Zaretskii  <eliz@wombat.gnu.ai.mit.edu>

	* compile.el (compilation-process-setup-function): New variable.
	(compile-internal): Call compilation-process-setup-function if
	it is non-nil.

	* diff.el (diff-process-setup): New function, sets up the
	compilation-exit-message-function so that it works with both
	asynchronous and synchronous sub-processes.
	(diff): Bind compilation-exit-message-function.  Run
	compilation-finish-function when compile-internal returns if async
	processes aren't supported.

1997-02-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-buffer-menu): Group buffers by major modes if that
	seems to be useful.
	(mouse-buffer-menu-mode-groups): New variable.
	(mouse-buffer-menu-alist, mouse-buffer-menu-split): New subroutines
	broken out of mouse-buffer-menu.

	* derived.el (define-derived-mode): Add derived-mode-parent
	property to the derived mode command name.

1997-02-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailsort.el (rmail-sort-messages): Preserve point
	with respect to the current message.

1997-02-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* auto-show.el (auto-show-mode): Doc fix.

1997-02-04  Erik Naggum  <erik@naggum.no>

	* files.el (file-relative-name): Protect the match-data.

	* edmacro.el (edmacro-parse-keys): Remove redundant test for ?.

1997-02-04  Noah Friedman  <friedman@splode.com>

	* eldoc.el (eldoc-display-message-p): New function.
	Return nil if cursor-in-echo-area, or using idle timers and a
	command is still active.
	(eldoc-print-current-symbol-info): Use eldoc-display-message-p.

1997-02-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* man.el (Man-init-defvars): Fix case in a char set range.

1997-02-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-Java-defun-prompt-regexp): Default is now nil.

	* dired-aux.el (dired-rename-file):
	Pass new arg to set-visited-file-name.
	* files.el (set-visited-file-name): New arg ALONG-WITH-FILE.

	* cc-mode.el (c-ObjC-method-key, c-Java-defun-prompt-regexp):
	Fix patch screwup in last change.

	* rmail.el (rmail-ignored-headers): Add Delivered-to: header.

1997-02-02  Noah Friedman  <friedman@splode.com>

	* eldoc.el: New file.

1997-02-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iso-acc.el (iso-accents-compose):
	Handle case where unread-command-events is already nonempty.

	* frame.el (set-frame-font): Renamed from set-default-font.

1997-02-01  Tom Tromey  <tromey@cygnus.com>

	* info.el: Handle multiple Info buffers.
	(Info-tag-table-marker): Initialize to nil.
	(Info-tag-table-buffer): New variable.
	(Info-find-node): Don't switch buffers if already in Info mode.
	Use Info-tag-table-buffer to support multiple Info buffers.
	(Info-read-subfile): Don't switch to *info* buffer.
	(Info-build-node-completions): Handle buffer local bindings for
	Info-tag-table-marker.
	(Info-search): Add a save-excursion.
	(Info-mode): Make Info-tag-table-buffer buffer-local.
	Make a different marker in Info-tag-table-marker for each buffer.
	(Info-kill-buffer): New function, on kill-buffer-hook.

1997-02-01  Peter Breton  <peter@CLONE.mindspring.com>

	* dirtrack.el (dirtrack-debug-message): Put output at end of buffer.
	(dirtrack): Check that directory exists before trying to cd to it.
	Go to point-max (not comint-last-output-start) before looking for
	the prompt.

1997-02-01  Michael Ernst  <mernst@cs.washington.edu>

	* dired-x.el (dired-guess-shell-alist-default): Make .eps
	extension act like .ps extension.

1997-02-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-reply): Concatenate all the References headers.

1997-01-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (set-fill-column): Print the old value too.

	* cc-mode.el (java-mode): Fix typo installing previous change.

	* rmail.el (rmail-reply): Copy all the References: headers
	from the original message.

	* simple.el (sendmail-user-agent): Insert all the OTHER-HEADERS.

	* mail-utils.el (mail-fetch-field): New arg LIST.

	* edmacro.el (edmacro-parse-keys): Don't treat C-. or C-?
	as ASCII control char.

	* compile.el (compilation-enter-directory-regexp)
	(compilation-leave-directory-regexp): Add .* at beginning.

1997-01-30  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el: Public Release 4.353.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 15D: do not assume that boi of previous
	statement is the beginning of a statement.

	* cc-mode.el: Removed the require of imenu.

	* cc-mode.el (c-cleanup-list, c-electric-brace):
	New clean-up option: brace-elseif-brace.

	* cc-mode.el (c-style-variables-are-local-p): New variable which
	controls whether indentation style variable are buffer local are
	not.  By default, for backwards compatibility, this variable is t.

	* cc-mode.el (c-Java-access-key): Set to nil since Java doesn't
	have C++-like access labels.

	* cc-mode.el (c-style-alist): Added "python" style.

	* cc-mode.el (c-mode-menu): New function.
	(c-popup-menu, c-common-init): Use c-mode-menu.

	* cc-mode.el (c-lineup-C-comments):
	A much better implementation that handles all
	common star-prefixed block comment styles (see below).

	(c-block-comments-indent-p): Obsolete function removed.

	* cc-mode.el (c-indentation-style):
	Take default value from c-site-default-style.

	* cc-mode.el (adaptive-fill-regexp):
	For all but XEmacs 19.13, the default should
	be nil.

	* cc-mode.el (c-emacs-features): Detect Infodock.
	(c-common-init, c-mode-map): Don't install menus for Infodock.

	* cc-mode.el (c-indent-exp): Fixed infinite loop when multi-line C
	comment is last thing in buffer.
	(c-guess-basic-offset): Fixed error when K&R C-like macro is first
	non-syntactic whitespace in file.

	* cc-mode.el (c-C++-comment-start-regexp):
	Use a more efficient representation.

	* cc-mode.el (c-buffer-style): New variable.

1997-01-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-print-header): Doc fix.

1997-01-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* texnfo-upd.el (texinfo-make-menu): Accept args BEGINNING and END.
	(texinfo-update-node): Accept args BEGINNING and END.
	(texinfo-all-menus-update): Pass region explicitly.
	(texinfo-master-menu, texinfo-every-node-update): Likewise.

1997-01-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* saveplace.el (load-save-place-alist-from-file):
	Delete spurious t's.

1997-01-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* comint.el (comint-exec-1): Use file-accessible-directory-p.

	* timezone.el (timezone-parse-date): Treat unknown month name
	like any other unrecognized format.

1997-01-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-error): Use with-current-buffer.
	(jka-compr-call-process, jka-compr-file-local-copy)
	(jka-compr-write-region): Use with-current-buffer.

	* byte-opt.el (byte-compile-inline-expand): Recalculate fn
	after loading a file to define the function.

	* ange-ftp.el (ange-ftp-get-process): Call delete-process.

1997-01-25  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmail.el (rmail-get-new-mail): Fix return value to match doc.

1997-01-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (completion-no-auto-exit): New variable.
	(choose-completion-string): Obey compilation-error-regexp-alist.

	* compile.el (compilation-error-regexp-alist): Undo 1/21 change.
	In the GNU message with program name alternative,
	allow digits in the program name after the first character.

	* rnewspost.el (news-post-news): New arg NOQUERY.

	* compile.el (compilation-parse-errors):
	Use looking-at on each line.
	(compilation-error-regexp-alist): Change these regexps
	so that they assume matching only at start of line.
	Delete \n at beginning; otherwise add `.*'.

	* tmm.el (tmm-get-keymap): Recognize explicit lambda expressions
	as valid.

1997-01-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist):
	In MIPS lint and Sun Ada regexps, reject newline in some
	[^...] constructs.  Require newline at start in MIPS lint.

1997-01-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (choose-completion-string):

	* ange-ftp.el (ange-ftp-load): If fail, return nil.

	* compile.el (compilation-error-regexp-alist):
	Recognize nsgmls error messages.

1997-01-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* smtpmail.el (smtpmail-read-response):
	Don't get confused by %'s in response-string.

	* octave-mod.el: Delete explicit autoload calls.
	Provide octave-mod.
	Move the variables formerly in octave.el
	to the top of the file.

	* octave-hlp.el: Require octave-mod, not octave.
	* octave-inf.el: Require octave-mod, not octave.

	* octave.el: File deleted (contents merged into octave-mod.el).

	* octave-mod.el: Merge in octave.el; don't require octave.el.
	Don't require octave-inf.el.
	(octave-mode): Delete the startup message.
	(octave-maintainer-address): Add bug-gnu-emacs.
	(octave-version): Variable deleted.
	(octave-submit-bug-report): Use emacs-version.

	* octave-mod.el, octave.el: New files.
	* octave-inf.el, octave-hlp.el: New files.

1997-01-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* timezone.el (timezone-parse-date): Handle 1-digit year.

1997-01-19  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* rmail.el (rmail-preserve-inbox): New variable.
	(rmail-get-new-mail): If rmail-preserve-inbox is non-nil, then
	don't truncate the inboxes after retrieving mail from them.

1997-01-19  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el, term/w32-win.el: Change uses of win32 to w32.

1997-01-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mantemp.el (mantemp-insert-cxx-syntax): Recognize non-class templates.
	(mantemp-make-mantemps-buffer): Simplify message.
	(mantemp-make-mantemps-region): Simplify message.

	* ange-ftp.el (ange-ftp-waiting-flag): New variable.
	(ange-ftp-load): Bind that to t, and catch ftp-error.
	(ange-ftp-cf2, ange-ftp-cf1): If ange-ftp-waiting-flag is t,
	throw instead of signaling an error.

	* shell.el (shell-mode): Don't set list-buffers-directory.

1997-01-15  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	With Jacques Duthen.
	* ps-print.el (ps-print-version): Fix value.
	(cl lisp-float-type): Require them.
	(ps-number-of-columns ps-*-font-size): Try to select defaults
	better suited when `ps-landscape-mode' is non-nil.
	(ps-*-faces): Change default for Font Lock mode faces when
	`ps-print-color-p' is nil.
	(ps-right-header): Replace `time-stamp-yy/mm/dd'
	by `time-stamp-mon-dd-yyyy'.
	(ps-end-file ps-begin-page): Fix bug in page count for Ghostview.
	(ps-generate-postscript-with-faces): Replace `ps-sorter' by
	`car-less-than-car'.
	(ps-plot ps-generate): Replace `%d' by `%3d'.

1997-01-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compile.el (first-error): Doc fix.

1997-01-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* replace.el (occur-mode-map): Bind g to revert-buffer.
	(occur-mode): Locally bind revert-buffer-function.
	(occur-command-arguments): New variable.
	(occur-revert-function): New function.
	(occur): Set occur-command-arguments.

1997-01-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mh-mime.el: Rename args PATHNAME to FILENAME in various functions.
	(mh-mhn-compose-insertion): New arg ATTRIBUTES
	and change the interactive spec to read it.

1997-01-12  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el (make-auto-save-file-name): Replace occurrences of
	all invalid filename characters.

1997-01-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* texnfo-upd.el (texinfo-incorporate-descriptions): Call regexp-quote.

1997-01-09  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-unique): Deleted.
	(font-lock-prepend-text-property, font-lock-append-text-property):
	Don't call it; behave as to-be-written builtins.  Declare as defuns.
	(font-lock-fillin-text-property): Declare as a defun.
	(font-lock-after-change-function): Undo 1996-10-23 change.

1997-01-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* telnet.el (telnet-initial-filter): Fix error message.
	Bind case-fold-search to t.

	* cl.el (when, unless): Definitions moved to subr.el.

	* subr.el (when, unless): Definitions moved from cl.el.

1997-01-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* faces.el (invert-face): Handle inverting the default face better.

	* expand.el: No longer a minor mode.
	(expand-submit-bug-report): Function deleted.
	(expand-mode-version, expand-mode-help-address): Variables deleted.
	(expand-mode): Variable and function deleted.
	(expand-mode-hook, expand-mode-name): Variables deleted.
	(expand-load-hook): Variable renamed from expand-mode-load-hook.
	(expand-map): Variable deleted.
	(expand-jump-to-next-slot): Renamed from expand-jump-to-next-mark.
	Add autoload.
	(expand-jump-to-previous-slot): Add autoload.
	Renamed from expand-jump-to-previous-mark.

1997-01-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (delete-completion-window): Handle special display frames.

	* term/x-win.el (x-handle-args): Stop arg processing
	if we encounter "--", and preserve all remaining args.

	* startup.el (command-line-1): Don't run buffer-menu
	if in batch mode.

1997-01-05  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* gud.el (gud-gdb-marker-regexp): Use colon always, not path-separator.

	* sgml-mode.el (html-mode): Locally set sentence-end.

	* translate.el: New file.

1997-01-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* msb.el (frame-or-buffer-changed-p): Definition deleted.
	(the end): Use mapc, to force loading of cl-extra.

	* files.el (switch-to-buffer-other-frame)
	(switch-to-buffer-other-window): New arg NORECORD.

1997-01-04  Geoff Voelker  <voelker@cs.washington.edu>

	* sh-script.el (sh-shell-file): Downcase and remove extension
	on shells in NT.

1997-01-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-string-replace-match):
	Delete redundant autoload.
	(dired-garbage-files-regexp): New variable.
	(dired-flag-garbage-files): New command.
	(dired-mode-map): Put dired-flag-garbage-files on & and in menu.

	* find-dired.el (find-dired): Doc fix.

1997-01-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el, vc-hooks.el: Changed my e-mail address in the header.

1997-01-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* replace.el (list-matching-lines-face): New variable.
	(occur): Highlight the actual matching characters.

	* dirtrack.el: New file.

1997-01-02  Inge Frick  <inge@nada.kth.se>

	* easymenu.el (easy-menu-create-keymaps): Menu item STYLE toggle
	(checkbox) and radio (radio button) are prefixed by "[X] " or
	"(*) " respectively, when selected and "[ ] " or "( ) ", when not
	selected.  In a menu that contain these prefixes, "    " is used
	as prefix for items that have no other prefix.
	(easy-menu-update-button): New function used as `menu-enable'
	property for checkboxes and radio buttons to update the prefixes.
	(easy-menu-define): Change documentation string to describe the
	new prefixes.

1997-01-02  Jens Toivo Berger Thielemann  <jensthi@ifi.uio.no>

	* word-help.el (word-help-mode-alist, reset-word-help)
	(word-help-switch-help-file): Added support for completion.
	(word-help-complete, word-help-complete-list)
	(word-help-complete-index, word-help-extract-matches)
	(word-help-make-complete): New functions/variables for completion.
	(word-help-mode-alist): Enhanced search regexps.
	(word-help-index-mapper): Defaults now to extracting the first word.
	(word-help-mode-alist, word-help-index-mapper)
	(word-help-main-index, word-help-main-obarray)
	(reset-word-help, set-help-file, word-help-process-indexes)
	(word-help-goto-index-node): Doc fixes.
	(word-help-goto-index-node): Requires passing the keyword.
	Uses this in the a new and enhanced magic indexing routine.
	(set-help-file, word-help): Handle `completion-ignore-case' better.
	(word-help-extract-index): `case-fold-search' better handled.
	(word-help): Magic guessing of relevant help file put in new
	function word-help-find-help-file.
	(word-help-guess-all): New subroutine.
	(word-help-guess): Use word-help-guess-all.
	May optionally copy only upto the cursor,
	instead of the entire keyword.

1997-01-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Always pass nil as 3rd arg to sh-set-shell.

	* dired-aux.el (dired-do-chxxx): Use -- only on GNU systems.

	* tex-mode.el (tex-region): Correctly handle possible
	overlap between first line, header, and region.
	New local var ALREADY-OUTPUT makes this general.
	Write tex-trailer directly as a string; get rid of temp-buffer.
	Make tex-out-file include the .tex suffix.

	* texinfo.el (texinfo-mode): Locally set tex-first-line-header-regexp.
	Locally set tex-trailer.

	* server.el (server-process-filter): Let-bind `pos'.

1997-01-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* sh-script.el (sh-shell-file): On MSDOS, collapse $SHELL to lower
	case and remove the executable extension, if any.
	(sh-other-keywords): Define an entry for `sh' and make `bourne'
	inherit from that.

1996-12-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (repeat-complex-command): Bind
	minibuffer-history-position and minibuffer-history-sexp-flag
	only for the read-from-minibuffer call.

1996-12-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (insert-directory): Use -- as arg
	so that a file name or pattern is never taken as an option.

	* dired-aux.el (dired-do-chxxx): Use -- as arg
	so that the file name is never taken as an option.

	* dired.el (dired-make-relative): Ignore the third argument;
	never signal an error just because FILE is not in DIR's tree.

	* info.el (Info-find-node): Don't clear Info-index-alternatives.
	(Info-index-next): Fix error message.

	* server.el (server-start): Don't delete ~/.emacs-server.
	Instead, delete the names emacsserver really uses
	if compiled with SERVER_HOME_DIR.

	* bytecomp.el (byte-compile-file): Set default-directory in
	compiler input buffer.

1996-12-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-permission-flags-regexp): New variable.
	(dired-move-to-end-of-filename): Use it instead of a constant.

	* locate.el (locate-mode): Locally set dired-move-to-filename-regexp,
	dired-permission-flags-regexp, and dired-actual-switches.
	(locate-set-indentation): Function deleted.
	(locate-insert-header): Don't indent the header line.
	(locate-indentation-string): Variable deleted.
	(locate-do-setup): Rewrite the loop that adds indentation.

	* locate.el: New file.

	* tex-mode.el (tex-first-line-header-regexp): New variable.
	(tex-region): Sometimes include the file's first line.

	* texinfo.el (texinfo-mode): Use regexps for
	tex-start-of-header and tex-end-of-header.
	(texinfo-tex-region, texinfo-tex-buffer):
	Use tex-region and tex-buffer.
	(texinfo-tex-print): Use tex-print.
	(texinfo-tex-view): New command, on C-x C-t C-v.

	* bindings.el (completion-ignored-extensions):
	Separate out the system-independent elements.
	Add Texinfo index files.

	* emacsbug.el (report-emacs-bug): Use compose-mail.

	* hideshow.el (hs-emacs-type): Doc fix.

	* dired.el (dired-insert-directory): Don't override the user's locale.
	(dired-standard-move-to-filename-regexp): Var deleted.

1996-12-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-acc.el (iso-languages): For Catalan, delete 'C and 'c;
	delete `i, `I, `u, `U.  Add "i, "I.  Delete ~t.
	For Spanish, delete ~t, 'c and 'C.

	* help.el (help-map): Define C-h C-i to run word-help.

	* word-help.el: New file.

	* expand.el (expand-map): Don't define SPC.
	(expand-template-abbreviation): Function deleted.
	(expand-try-to-expand): Function deleted.
	(expand-abbrev-hook): Add a no-self-insert property.
	(expand-skeleton-end-hook): Use skeleton-position.
	(expand-add-abbrevs): Doc fix.

	* expand.el: New file.

	* skeleton.el (skeleton-positions): Renamed from skeleton-marks.

	* skeleton.el (skeleton-marks): New variable.
	(skeleton-insert, skeleton-internal-1): Set skeleton-marks.

1996-12-28  Jonathan I. Kamens  <jik@cam.ov.com>

	* rmail.el (rmail-msg-is-pruned): New function.
	(rmail-toggle-header): Add an optional argument to specify explicitly
	whether the header should be pruned or displayed in full.

1996-12-27  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (vip-adjust-window-after-search): New variable.
	(vip-adjust-window): New function.
	(vip-insert-state-cursor-color, vip-saved-cursor-color): New variables.
	(vip-set-vi-search-style-macros, vip-set-emacs-search-style-macros):
	New functions.
	(vip-autoindent): No longer moves insert point.
	(vip-paren-match): Now pays no attention to comments, leaves
	region active.
	* viper-util.el (vip-restore-cursor-color-after-replace)
	(vip-restore-cursor-color-after-insert): New functions.
	(vip-window-display-p): Treat PC as a non-window display.
	(vip-convert-standard-file-name): New function.

	* ediff-util.el (ediff-file-under-version-control): New function.
	(ediff-inferior-compare-regions): Improved interface.
	(ediff-maybe-checkout): New function.
	(ediff-maybe-save-and-delete-merge): New function.
	(ediff-setup): Now uses convert-standard-filename.
	(ediff-make-temp-file): Now returns expanded file name.
	* ediff-init.el (ediff-in-control-buffer-p): New function.
	(ediff-quit-merge-hook, ediff-autostore-merges): New variables.
	(ediff-convert-standard-file-name): New function.
	* ediff-mult.el (ediff-meta-buffer-keymap-setup-hook): New variable.
	(ediff-quit-session-group-hook): New hook.
	(ediff-filegroup-action): Now passes ediff-merge-store-file to
	subordinate Ediff sessions.
	* ediff-ptch.el (ediff-patch-file-internal):
	Now calls ediff-maybe-checkout.
	(ediff-context-diff-label-regexp): Fixed regexp.
	(ediff-map-patch-buffer): Fixed beg/end patch boundaries.
	* ediff.el: Now supports autostore for merge jobs.

1996-12-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sort.el: Many doc fixes.
	(sort-regexp-fields): Don't test for buffer-substring-lessp;
	always return a pair of bounds.

1996-12-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ispell.el (ispell-message-text-end): Handle `- ' before
	the "cut here" or "start of..." line.  Handle `Forward message'
	without `Start of'.

	* sendmail.el (mail-indentation-spaces): Doc fix.
	(mail-yank-clear-headers): Handle case of end < start.
	(mail-indent-citation): Handle case of end < start.
	(mail-yank-region): New command (on C-c C-r).

	* menu-bar.el (menu-bar-tools-menu): Add a "send mail" entry.

	* replace.el (perform-replace): Request integers from match-data,
	instead of asking for markers and converting them.

	* paragraphs.el (forward-paragraph, backward-paragraph): Doc fixes.

1996-12-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-start-end): Put values in proper order,
	in the doublequote case.

1996-12-22  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* startup.el (command-line-1): Handle --visit and --find.
	Handle -- as an option; treat what follows as a file name.

1996-12-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* edebug.el (edebug-read-symbol, edebug-read-string):
	Don't back up after reading.
	(edebug-read-sexp): Likewise.

1996-12-26  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-user-login-name): New function.
	(vc-fetch-master-properties, vc-lock-from-permissions, vc-file-owner)
	(vc-fetch-properties, vc-after-save, vc-mode-line, vc-status): Use
	`vc-user-login-name' instead of `user-login-name'.

	* vc.el (vc-next-action-on-file, vc-update-change-log)
	(vc-backend-checkout, vc-backend-steal): Use `vc-user-login-name'
	instead of `user-login-name'.
	(vc-update-change-log): If `user-full-name' is nil, try
	`user-login-name'.  Failing that, use uid as a string.
	(vc-make-buffer-writable-hook): Removed (was unused).

1996-12-20  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-edit-string): When we try the search
	at the end, do that outside of the let which binds all the
	search state.

1996-12-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mail-extr.el (mail-extract-address-components): Clear text props
	after inserting ADDRESS.

1996-12-18  Paul Eggert  <eggert@twinsun.com>

	* cal-dst.el (calendar-time-zone-daylight-rules):
	Add support for daylight saving rules in Iran.
	(require 'cal-persia) now needed.

1996-12-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (sendmail-user-agent): Avoid error for CONTINUE non-nil.

	* replace.el (perform-replace): Undo previous change.
	Instead, use the new match-data features to avoid consing.

	* iso-acc.el (iso-languages): Add "german" entry.

1996-12-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time.el (display-time-event-handler): Use let*.

	* time-stamp.el (time-stamp-mail-host-name): Get rid of
	time-stamp-mail-host.

	* replace.el (perform-replace): Delete the code that checked
	whether the regexp could match again right after this match.
	It made the loop too slow.

	* isearch.el (isearch-ring-adjust): Don't pop the state at the start.
	Push the state at the end, not in the middle.

	* ange-ftp.el (ange-ftp-date-regexp): Recognize various languages.

	* dired.el (dired-move-to-filename-regexp):
	Recognize various languages.

1996-12-17  Jonathan I. Kamens  <jik@cam.ov.com>

	* rnewspost.el (news-mail-reply, news-reply): Include the message
	ID in the In-reply-to line.

1996-12-16  Erik Naggum  <erik@naggum.no>

	* sendmail.el (sendmail-send-it): Explicitly pass interactive
	delivery options to sendmail.

1996-12-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-month-dd-yyyy): Use format-time-string.
	(time-stamp-dd/mm/yyyy, time-stamp-mon-dd-yyyy, time-stamp-dd-mon-yy)
	(time-stamp-yy/mm/dd, time-stamp-yyyy/mm/dd, time-stamp-yyyy-mm-dd)
	(time-stamp-yymmdd, time-stamp-hh:mm:ss, time-stamp-hhmm): Likewise.
	(time-stamp-month-numbers, time-stamp-month-full-names): Vars deleted.

	* landmark.el: New file.

	* time.el (display-time-event-handler): Fix previous change.

	* simple.el (compose-mail): Doc fix.

	* sendmail.el (sendmail-send-it): If no recipients, don't run
	the mailer program.  If there was also no fcc file, signal error.

1996-12-15  Ake Stenhoff  <etxaksf@aom.ericsson.se>

	* imenu.el (imenu-generic-expression): Doc fix.
	(imenu--make-index-alist): Do `widen' and save-restriction here.
	(imenu): Not here.

1996-12-15  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* mail-extr.el (mail-extract-address-components): Don't downcase
	the domain part of the address.

1996-12-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-fns.el (register-name-alist): Use defvar.

	* abbrev.el (only-global-abbrevs): Use defvar.

	* replace.el: Change some defconsts to defvars.

	* fill.el: Change defconsts to defvars.

	* lisp-mode.el: Change defconsts to defvars.

	* paragraphs.el: Change defconsts to defvars.

	* startup.el: Change some defconsts to defvars.

	* faces.el: Change some defconsts to defvars.

	* isearch.el: Change defconsts to defvars.

	* format.el (format-alist): Change defconst to defvar.

	* files.el: Change defconsts to defvars.

	* simple.el: Change most defconsts to defvars.

	* bindings.el: Change defconsts to defvars.

	* files.el (find-file-revert-without-query): New variable.
	(find-file-noselect): Revert certain files without query
	if the file has changed and the buffer has not.

	* cpp.el (cpp-edit-load): Don't load anything if
	init-file-user is nil.
	(cpp-edit-save): Doc fix.

	* startup.el (init-file-user): Doc fix.

1996-12-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* noutline.el (outline-discard-overlays):
	Use overlays-in, to ensure we get rid of empty overlays.

1996-12-13  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-beginning-of-message):
	Obey rmail-summary-size, and make sure summary is on top
	if we split a single large window.

	* rmailsum.el (rmail-summary-scroll-msg-down): If message is
	not visible at all, use rmail-summary-beginning-of-message.
	(rmail-summary-scroll-msg-up): Likewise.

	* time-stamp.el (time-stamp-no-file): Reintroduced.
	(time-stamp-string-preprocess): New function.
	(time-stamp-string): Use time-stamp-string-preprocess.
	(time-stamp-format): Doc fix.

1996-12-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (describe-mode): Include minor modes that aren't
	buffer local.

1996-12-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-am-pm): Variable deleted.
	(time-stamp-weekday-full-names): Likewise.
	(time-stamp-weekday-numbers): Likewise.
	(time-stamp-old-format-warn): Doc fix.

1996-12-12  Karl Eichwalder  <ke@ke.Central.DE>

	* info.el (Info-mode): Default for `tab-width'.

1996-12-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-tools-menu): Add items
	Debugger, Compile and Search Files.

	* time-stamp.el (time-stamp-strftime): Function deleted.
	(time-stamp-string): Use format-time-string.
	(time-stamp-format): Change default value
	to work with format-time-string.

	* browse-url.el (browse-url-url-at-point): Use thing-at-point.
	(browse-url-looking-at): Function deleted.

	* thingatpt.el (bounds-of-thing-at-point): Allow the end
	to be at the same place as ORIG.
	Try harder to find a thing that ends at ORIG.

	* novice.el (disabled-command-hook): Correctly keep the first
	paragraph of the command's documentation.

1996-12-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-mode-fsf-menu): Add one dashed separator.

	* thingatpt.el (url): Move forward over colons.
	Move back over colons at the end.
	(thing-at-point-file-name-chars): Include @.

	* sort.el (sort-columns): Don't use `sort' utility
	if the text has text properties.

	* time.el (display-time-event-handler): Don't run the timer
	for successive times that are already in the past.

	* thingatpt.el (thing-at-point-url-chars): Allow comma, = and &.
	(url): Move back over commas at the end.

	* timer.el (timer-next-integral-multiple-of-time): Doc fix.

1996-12-10  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-insert-header): Fix previous change.

1996-12-09  Erik Naggum  <erik@naggum.no>

	* novice.el (disabled-command-hook): Use `defvar' and add
	documentation string.
	(disabled-command-hook): New option ! turns off disabled commands.

1996-12-08  Dave Love  <d.love@dl.ac.uk>

	* gnus-vis.el (gnus-button-alist): Allow whitespace in `<URL:...'
	markup (rfc1738), done last, after possible partial matches.
	(gnus-button-url): Zap any whitespace from a <URL:...> match.

1996-12-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Don't load .custom if -q was used.

	* gnus.el (gnus-read-init-file): Don't load anything
	if init-file-user is nil.

1996-12-06  Dave Love  <d.love@dl.ac.uk>

	* texinfo.el (texinfo-font-lock-keywords): Add `url', `email'.

1996-12-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (iconify-or-deiconify-frame): Define to be a
	no-op, so commands that call it (like viper.el) work.

1996-12-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hscroll.el (hscroll-global-mode): Save and set
	truncate-lines globally, not locally.

1996-12-06  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (backup-buffer): Doc fix.

1996-12-06  Ake Stenhoff  <etxaksf@aom.ericsson.se>

	* imenu.el (imenu): Support integers used as positions.

1996-12-05  Michael Ernst  <mernst@cs.washington.edu>

	* complete.el (PC-do-completion): Remove text properties from
	completions; also use string-equal instead of equal.

	* info.el (Info-follow-reference): Add each cross-reference to
	completions list just once, case-insensitively.

1996-12-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* thingatpt.el (thing-at-point-url-chars): Allow period.
	(url): Move back over periods at the end.

1996-12-02  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-temp-name-template): Initialize using TMPDIR.

1996-11-30  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* replace.el (perform-replace): Obey minibuffer-auto-raise.

1996-11-28  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* thingatpt.el: Downcase arguments as Lisp symbols.
	Fix many doc strings.
	(thing-at-point-file-name-chars): Renamed from file-name-chars.
	Allow a colon.
	(thing-at-point-url-chars): New variable.
	(url): Define new kind of "thing".

	* simple.el (compose-mail): Handle several more args:
	other-headers continue switch-function yank-action send-action.
	(sendmail-user-agent): Rewrite to handle new args.
	(assoc-ignore-case): New function.
	(define-mail-user-agent): Doc fix.

	* rmail.el (rmail-start-mail): Rewrite to use compose-mail.
	Two new arguments.
	(rmail-forward): Always call rmail-start-mail, never `mail'.

	* sendmail.el (mail-reply-action): Renamed from mail-reply-buffer.
	(mail-yank-original): Handle either an action or a buffer
	in mail-reply-action.
	(mail): Doc fix.

1996-11-27  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-mode-line): Don't get error
	about sole window, if we don't actually try to change the size.

1996-11-26  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* isearch.el (isearch-no-upper-case-p): Use downcase
	so that we handle arbitrary kinds of casification.

	* sendmail.el (mail-mode-fill-paragraph): New function.
	(mail-mode): Set fill-paragraph-function.

	* info.el (Info-get-token): Find tokens where START matches
	around POS.

1996-11-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-normal-login): If using a smart gateway,
	but ange-ftp-gateway-host is nil, generate the login name
	in the usual simple way.

1996-11-23  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* menu-bar.el: In enable predicates for Files menu,
	use menu-updating-frame.

	* mouse.el (mouse-major-mode-menu): Propagate prefix arg
	to the command that is run.

	* pascal.el (pascal-mode): Make comment-indent-function buffer local.

	* bytecomp.el (byte-compile-insert-header): If emacs-version
	ends with a letter, don't check the version number.

	* simple.el (sendmail-user-agent): Support 2 optional args.
	(define-mail-user-agent): Doc fix.

	* isearch.el (isearch-mode):
	Maybe make minibuffer frame visible and/or raise it.

	* etags.el (etags-file-of-tag): Expand the file name
	using the truename of default-directory.

1996-11-22  Drew Csillag  <drew@staff.prodigy.com>

	* m4-mode.el: Fixed syntax table for quotes since they messed up
	highlighting in comments and other constructions.

1996-11-22  Peter S Galbraith  <rhogee@mixing.qc.dfo.ca>

	* goto-addr.el (goto-address-fontify): Use overlay, not text props.

1996-11-22  Michael Ernst  <mernst@cs.washington.edu>

	* dired-x.el (dired-omit-size-limit): New variable.
	(dired-omit-toggle, dired-omit-expunge): Respect it.

1996-11-21  Geoff Voelker  <voelker@cs.washington.edu>

	* startup.el (normal-top-level, command-line, command-line-1):
	User w32 instead of ms-windows for window-system symbol.

1996-11-19  Geoff Voelker  <voelker@cs.washington.edu>

	* term/w32-win.el (x-defined-colors): Use color names from
	w32-color-map.

	* facemenu.el, faces.el, hippie-exp.el, info.el, mouse.el, vc.el:
	Use w32 instead of ms-windows for window-system symbol.

	* loadup.el: Use new names for w32 files.

	* dos-w32.el: Renamed from dos-nt.el.
	* w32-fns.el: Renamed from winnt.el.
	* term/w32-win.el: Renamed from term/win32-win.el.

1996-11-18  Geoff Voelker  <voelker@cs.washington.edu>

	* term/win32-win.el: Change identifiers of the form win32* to w32*.

1996-11-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (write-contents-hooks): Doc fix.

	* comint.el (comint-password-prompt-regexp): Recognize AIX format.

1996-11-16  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-keywords-alist): New variable.
	(font-lock-add-keywords): New function.  Set it.
	(font-lock-set-defaults): Use it.
	(font-lock-mode): Doc fix.
	(font-lock-compile-keyword): Cope with (MATCHER . 'FACE) forms.
	(font-lock-make-faces): Add attributes to font-lock-face-attributes if
	there are none for that face.
	(font-lock-face-attributes): Doc fix.
	(font-lock-match-c-style-declaration-item-and-skip-to-next): New
	function.  Match just identifiers.  Use it for C, Objective-C and Java.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Match
	templates too.
	(c-font-lock-extra-types, c++-font-lock-extra-types)
	(objc-font-lock-extra-types, java-font-lock-extra-types): Use these
	variables in EVAL forms, i.e., do not eval when font-lock.el is loaded.

	* fortran.el (fortran-font-lock-keywords-3): Use simpler
	font-lock-match-c-style-declaration-item-and-skip-to-next.

	* simula.el (simula-font-lock-keywords-3): Use simpler
	font-lock-match-c-style-declaration-item-and-skip-to-next.

	* fast-lock.el (fast-lock-submit-bug-report): Function deleted.
	(fast-lock-verbose): New variable.
	(fast-lock-save-cache-1, fast-lock-cache-data): Use it.
	(fast-lock-save-facep): New macro when compiling.
	(fast-lock-get-face-properties): Rewrite for face lists.  Use it.

	* lazy-lock.el (lazy-lock-submit-bug-report): Function deleted.
	(lazy-lock-defer-on-scrolling): Renamed from lazy-lock-defer-driven.
	(lazy-lock-defer-on-the-fly): New variable from lazy-lock-defer-time.
	(lazy-lock-install): Use it.
	(lazy-lock-defer-time): Doc fix.  Add top-level code to detect use of
	old forms of lazy-lock-defer-time and lazy-lock-defer-driven, and popup
	temp buffer describing new forms.
	(lazy-lock-stealth-load): New variable.
	(lazy-lock-fontify-after-idle): Use it.
	(lazy-lock-mode): Doc fix.
	(lazy-lock-defer-line-after-change): Renamed from
	lazy-lock-defer-after-change.
	(lazy-lock-defer-rest-after-change)
	(lazy-lock-fontify-line-after-change)
	(lazy-lock-fontify-rest-after-change): New functions.
	(lazy-lock-install-hooks): Add one depending on deferral variables.
	(lazy-lock-unstall): Remove them.  Fontify if Font Lock mode still on.
	(lazy-lock-fontify-window, lazy-lock-fontify-conservatively): Use
	with-current-buffer rather than save-excursion.
	(lazy-lock-percent-fontified): Cast size to float before multiplying.

1996-11-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rsz-mini.el (resize-minibuffer-frame-restore): Don't assume
	minibuffer frame is selected.
	(resize-minibuffer-frame): Likewise.

1996-11-13  Erik Naggum  <erik@naggum.no>

	* message.el (message-mode): Doc fix.

	* emacsbug.el (report-emacs-bug): New argument recent-keys read
	before bug subject to capture more relevant recent input.

1996-11-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-complete1): If no completion,
	don't clobber isearch-string, and return nil.

1996-11-11  Erik Naggum  <erik@naggum.no>

	* lisp-mode.el (combine-after-change-calls): The first form is not
	special.

1996-11-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired-x.el (dired-jump): Never turn omitting *on*.
	Refresh the line *before* turning omitting off.

	* help.el (describe-variable): Pretty-print the values.
	Put doc string first, if the value is long.

	* subr.el (define-key-after): If AFTER is t, always put new binding
	at the end.

1996-11-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* find-dired.el (find-grep-options): Treat solaris, irix like BSD.

	* edebug.el (combine-after-change-calls): New def-edebug-spec.
	* lisp-mode.el (combine-after-change-calls):
	Add lisp-indent-function property.

	* diary-lib.el (list-diary-entries): Reread the diary file
	if it has changed.

	* files.el (revert-buffer): Doc fix.

	* map-ynp.el (map-y-or-n-p): Handle minibuffer-auto-raise here.

	* sh-script.el (sh-mode): Parse the interpreter from the file text.

1996-11-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (wildcard-to-regexp): Don't treat [] as special.

1996-11-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (combine-after-change-calls): New macro.

	* sh-script.el (sh-set-shell): Pass args no-query-flag
	and insert-flag to executable-set-magic.
	Don't call executable-set-magic if insert-flag is nil.
	(sh-mode): Always call sh-set-shell, but use insert-flag arg
	to control whether to call executable-set-magic.
	No need to set comment-start-skip directly here.

	* sh-script.el (sh-mode-syntax-table): Turn on comment syntax for #,
	comment-end for newline, string for `, and escape for $.
	rc can use the same as sh.  Move csh after sh.
	(sh-comment-prefix, sh-font-lock-keywords-only): Variables deleted.
	(sh-mode): Adjust setting of font-lock-defaults.
	(sh-font-lock-keywords): No need for anything special for comments.
	(sh-set-shell, sh-mode): Set comment-start-skip to a simple constant.

1996-11-06  Dave Love  <d.love@dl.ac.uk>

	* sh-script.el (sh-mode): Set `comment-start-skip'; otherwise
	only set if `sh-set-shell' gets called.

1996-11-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* time.el (display-time-format): New variable.
	(display-time-string-forms): Use display-time-format.

1996-11-06  Jim Blandy  <jimb@totoro.cyclic.com>

	* vc.el (vc-backend-print-log): Use "cvs log" to get log entries,
	not "cvs rlog".

1996-11-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* page.el (narrow-to-page): With negative arg, move back one extra
	page unless we start right after a page delimiter.

	* bindings.el (minor-mode-alist): Don't use purecopy.

1996-11-05  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* comint.el (comint-output-filter): Run comint-output-filter-functions
	directly, not via comint-output-filter.

	* compile.el (compile-auto-highlight): Renamed from
	compile-highlight-display-limit.

	* time-stamp.el (time-stamp-dd/mm/yyyy): New function.

1996-11-04  Kevin Rodgers  <kevinr@ihs.com>

	* compile.el (compile-highlight-display-limit): New variable.
	(compilation-handle-exit): Parse error messages here
	as specified by compile-highlight-display-limit.
	(compile-reinitialize-errors): Add highlighting to error messages
	once they are parsed.
	(compilation-forget-errors): Remove highlighting properties here.

1996-11-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* frame.el (initial-frame-alist): Make default value nil--
	don't specify `minibuffer' parameter.

	* dired.el (dired-mode-map): Put dired-mark-subdir-files on *s.

1996-11-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* man.el (Man-bgproc-sentinel): Move the buffer creation
	outside of the binding of case-fold-search.

1996-11-03  Paul D. Smith  <psmith@BayNetworks.com>

	* make-mode.el (makefile-font-lock-keywords): Handle dependencies
	first and variable references after.
	(makefile-dependency-regex, makefile-macroassign-regex):
	Accept spaces at the beginning of the line.

1996-11-02  Henry Guillaume  <henry@qbd.com.au>

	* find-file.el (general): Enabled commentary for Finder.
	(ff-search-directories): Changed /usr/include/* to /usr/include.
	(ff-get-file-name): Improve behavior when file is found in a buffer.

1996-11-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* handwrite.el: New file.
	(handwrite-version): Variable deleted.
	(handwrite): Use emacs-version instead of handwrite-version.

	* dired-x.el (dired-mode-map): Put dired-mark-extension on *.
	Add *( as new binding for dired-mark-sexp, *t for dired-do-toggle.

	* dired.el (dired-mode-map): Make * a prefix for mark commands.
	Delete the old *, / and @ keybindings.

	* info.el (Info-scroll-up): Doc fix.

	* batmode.el: New file.

1996-11-02  Erik Naggum  <erik@naggum.no>

	* add-log.el (change-log-fill-paragraph): Return non-nil so
	fill-paragraph doesn't continue filling.  Don't skip backwards
	over a paragraph if we at a paragraph start.

1996-11-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-forward): Doc fix.

1996-11-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* lisp.el (lisp-complete-symbol): Sort the list.

1996-10-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (comment-region): With just C-u as arg,
	delete any number of comment-end delimiters from end of line.

	* tex-mode.el (tex-file): Fix paren error in last change.
	(tex-recenter-output-buffer): Switch windows in a more controlled
	fashion, using save-selected-window.

	* dired.el (dired-find-file): Error if line's file does not exist.

1996-10-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* m4-mode.el: New file.

1996-10-28  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* sh-script.el (sh-font-lock-keywords-1): Use font-lock-builtin-face.

	* files.el (auto-mode-alist): Objective-C is `.m' and SIMULA is `.sim'.

1996-10-27  Paul Eggert  <eggert@twinsun.com>

	* timezone.el (timezone-time-from-absolute): Fix off-by-one
	error in current-time-origin.

1996-10-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* window.el (kill-buffer-and-window): New command.
	Bind it to C-x 4 0.

1996-10-24  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Don't make font-lock-keywords buffer-local.

	* rmail.el (rmail-reply): Merge resent-to and resent-cc into to and cc.
	Ignore the resent- fields aside from that.

	* pascal.el (pascal-indent-declaration): Avoid infinite loop
	if edpos is at end of buffer.

1996-10-24  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* info.el (Info-insert-dir): Ensure directory ends with slash.

	* make-mode.el (makefile-font-lock-keywords): Accept - and . in
	variable names.

	* imenu.el (imenu-scanning-message): Use ellipsis.

	* iso-acc.el (iso-languages): Alphabetize list.
	Add Catalan, Spanish, and Esperanto.

	* dired.el (dired-insert-directory): Check for non-US LANG.

1996-10-24  Dave Gillespie  <daveg@synaptics.com>

	* cl-macs.el (lexical-let): Fixed a bug involving nested
	lexical contexts and macros.

1996-10-23  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (save-buffer-state): New macro when compiling.
	(font-lock-default-fontify-region, font-lock-default-unfontify-region):
	Use it rather than doing everything by hand.
	(font-lock-default-fontify-region): Always unfontify first.
	(font-lock-fontify-syntactically-region): Never unfontify here.
	Loop back to find comment start, if forward-comment fails to advance.
	Use scan-sexps to skip a string when found, not re-search-forward loop.
	Use marker-position of font-lock-cache-position, not buffer position.
	(font-lock-set-defaults): Make font-lock-cache-state and
	font-lock-cache-position buffer-local here, not at top-level.
	Make font-lock-cache-position be a marker pointing nowhere.
	Test and set font-lock-set-defaults, not font-lock-keywords.
	(font-lock-unset-defaults): Unset font-lock-set-defaults here.
	(font-lock-set-defaults): New variable.
	(font-lock-after-change-function): Rescan to end plus old-len.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Doc it.
	(font-lock-mode): Undo Jul 27 change.
	(font-lock-builtin-face, font-lock-warning-face): New variables.
	(font-lock-make-faces): Specify defaults for these faces.
	(java-font-lock-keywords, java-font-lock-keywords-1)
	(java-font-lock-keywords-2, java-font-lock-keywords-3)
	(objc-font-lock-keywords, objc-font-lock-keywords-1)
	(objc-font-lock-keywords-2, objc-font-lock-keywords-3): New variables.
	(font-lock-defaults-alist): New entry for Java and Objective-C modes.
	(c++-font-lock-extra-types, objc-font-lock-extra-types)
	(c-font-lock-extra-types, java-font-lock-extra-types): New variables.
	Use them when building the respective relevant regexps.

	* add-log.el (change-log-font-lock-keywords): Rewrite.

	* awk-mode.el (awk-font-lock-keywords): New variable.
	(awk-mode): Set font-lock-defaults to support Font Lock mode.
	Provide when loaded.

	* dired.el (dired-font-lock-keywords): Rewrite.  Use dired.el regexps.

	* sendmail.el (mail-font-lock-keywords): Tweak.

	* rmail.el (rmail-font-lock-keywords): Tweak.

	* simula-font-lock-keywords.el (simula-mode-syntax-table): Give `_'
	symbol syntax; see Table of Syntax Classes in the Emacs Lisp manual.
	(simula-font-lock-keywords, simula-font-lock-keywords-1)
	(simula-font-lock-keywords-2, simula-font-lock-keywords-3):
	New variables for Font Lock support.
	(simula-match-string-or-comment): New function for likewise.
	(simula-find-next-comment-region): Function deleted.
	(simula-mode): Set font-lock-defaults.  Add autoload cookie.

1996-10-20  Ake Stenhoff  <etxaksf@aom.ericsson.se>

	* cc-mode.el (cc-imenu-java-generic-expression): New variable.
	(java-mode): Set imenu-generic-expression.

1996-10-20  Kevin Rodgers  <kevinr@ihs.com>

	* compile.el (compilation-skip-to-next-location): Defined.
	(compilation-next-error-locus, compilation-parse-errors): Respect it.

1996-10-17  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-file-owner): Always return user name, using the
	optional argument of user-login-name.
	(vc-locking-user, vc-status): Discard checks for numerical value of
	vc-locking-user.

	* vc.el (vc-dired-reformat-line): Discard check for numerical value
	of vc-locking-user.

1996-10-14  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse-sel.el (mouse-sel-set-selection-function): Doc fix.
	Use x-select-text, for the primary selection.
	(mouse-sel-get-selection-function):
	Use x-cut-buffer-or-selection-value, for the primary selection.

	* simple.el (universal-argument): Doc fix.

	* files.el (set-visited-file-name): Doc fix.
	(write-file): Use CONFIRM when calling set-visited-file-name.

1996-10-14  Torbjorn Einarsson  <T.Einarsson@clab.ericsson.se>

	* f90.el (f90-no-block-limit): Fixed bug for indentation of
	elsewhere and elseif.
	(f90-looking-at-where-or-forall): Now allows for labeled forall
	and where statements.
	(f90-font-lock-keywords-2): New highlighting for labeled where
	and forall.  Fixed small bug with else highlighting.
	(f90-fill-region): Moved indentation to f90-break-line.
	(f90-break-line): Will now always indent the second line.
	(f90-indent-line): Simpler test for auto-fill.
	(f90-auto-fill-mode): Removed.
	(f90-electric-insert): Added for possibility of auto-filling of
	lines without spaces, as well as early updating of line.
	(f90-mode-map): Added bindings of operators to f90-electric-insert.
	(f90-do-auto-fill): Now also updates line (changes case).

1996-10-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (enable-local-variables): Doc fix.

1996-10-12  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* subr.el (define-function): Define as alias for defalias.

	* simple.el: Use defalias not define-function.

	* bytecomp.el (define-function): Mark it as obsolete.

1996-10-12  Gernot Heiser  <gernot@jungfrau.disy.cse.unsw.EDU.AU>

	* refer.el (refer-bib-directory): New variable, list of
	directories where to look for bib files.  Special values `texinputs'
	and `bibinputs' mean take directory list from corresponding
	environment variable.

	(refer-bib-files): New special value `auto', for looking up all
	files in directories pointed to by refer-bib-directory.
	I have the feeling that this isn't really my code but came from
	the net (copylefted).  However, I cannot trace this down any
	more.  If it isn't mine, it's probably Ashwin's.
	(refer-get-bib-files): Support `auto' value of refer-bib-files.
	Support `texinputs', `bibinputs' value of refer-bib-directory.

	(refer-saved-state, refer-previous-keywords, refer-saved-pos)
	(refer-same-file): Properly declared (defvar) these variables.

	(refer-yank-key): New function.

	(refer-find-entry-internal): Find bibliography entries in other
	window, with minimal reconfiguration of windows.

	(refer-expand-files): New function.

1996-10-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (file-name-extension): New function.

1996-10-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* msb.el (msb--toggle-menu-type): Call menu-bar-update-buffers with t.

	* edt.el (edt-load-xkeys): Doc fix.

	* follow.el (set-process-filter): Doc fix.

	* vip.el: Doc fixes on most variables.

	* tpu-edt.el (tpu-load-xkeys): Doc fix.

	* nnfolder.el (nnfolder-ignore-active-file): Doc fix.

	* two-column.el (2C-two-columns): Doc fix.

	* refbib.el (r2b-proceedings-list, r2b-help-message): Doc fixes.

	* solitaire.el (solitaire): Doc fix.

1996-10-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (newline): Use buffer-has-markers-at.

	* browse-url.el (browse-url-at-point): Add autoload cookie.
	(browse-url-at-mouse, browse-url-of-buffer, browse-url-of-file)
	(browse-url-of-dired-file): Likewise.

	* files.el (hack-local-variables-prop-line):
	Ignore case when checking for `mode'.

	* help.el (describe-function): If no fn specified, say so.
	(variable-at-point): Return 0 if no variable there.
	(describe-variable): If no variable specified, say so.
	Don't use nil as the variable.

	* files.el (auto-mode-alist): .hpp files get C++ mode.

1996-10-10  Denis Howe  <dbh@doc.ic.ac.uk>

	* browse-url.el (browse-url): New function.
	(browse-url-CCI-host): New variable.
	(browse-url-at-mouse): Added event-buffer and event-point
	functions for XEmacs compatibility.
	(browse-url-file-url): Check for EFS after alist, URL-encode
	special chars.
	(browse-url-grail): New function.
	(browse-url-interactive-arg): Add new-window logic.
	(browse-url-looking-at): Fixed.
	(browse-url-lynx-xterm): New function.
	(browse-url-lynx-emacs): Use term.el instead of terminal.el.
	(browse-url-netscape): Contact/start Netscape in the
	background.  Multi-display support.  Renamed
	browse-url-netscape-send.  URL-encode comma.
	(browse-url-netscape-command): New variable.
	(browse-url-netscape-startup-arguments): New variable.
	(browse-url-url-at-point): Improved matching to supply missing
	"http://".
	Other fixes for byte-compilation.

1996-10-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail): Run rmail-mail-hook last.

1996-10-08  Erik Naggum  <erik@naggum.no>

	* lisp.el (narrow-to-defun): Narrow to the same defun that
	`mark-defun' would make the region.
	(insert-parentheses): Let a negative argument enclose preceding
	sexps.

1996-10-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* comint.el (comint-read-noecho): Clear out the intermediate strings.

	* timer.el (cancel-function-timers): Add autoload.

	* rmail.el (rmail-mode-2): Don't run rmail-mode-hook here.
	(rmail-mode, rmail): Run it here.

1996-10-08  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el (c-mode-map):
	Install FSF mode menu into menubar using the name
	"CC-Mode" for all supported modes.
	(c++-mode-map, objc-mode-map, java-mode-map): Don't install an
	additional FSF menu.

	* cc-mode.el:
	Removed the following variables from the built-in "cc-mode" style:
	c-echo-syntactic-information-p
	c-string-syntax-p
	c-tab-always-indent
	c-inhibit-startup-warnings-p
	These control how the mode acts, not how code looks.

	* cc-mode.el (c-indent-command): Doc fix.

	* cc-mode.el (c-style-alist): Added "linux" style.

	* cc-mode.el (c-lineup-comment): Preserve comment-column.

	* cc-mode.el (c-gnu-impose-minimum):
	Don't impose minimum on comment-only lines.
	(c-show-syntactic-information): Optional universal argument inserts
	analysis as a comment on the line.

	* cc-mode.el (c-insert-tab-function):
	New variable allowing tab-to-tab-stop to be
	used instead of insert-tab.
	(c-indent-command): Use c-insert-tab-function variable.

	* cc-mode.el (java-mode): Use (c-set-style "java"); i.e. lowercase.

	* cc-mode.el (c-functionp): New function.
	(c-electric-brace, c-read-offset, c-set-offset, c-get-offset):
	Use it.

	* cc-mode.el (c-offsets-alist): New syntactic symbols:
	extern-lang-open, extern-lang-close, inextern-lang.

	(c-hanging-braces-alist): Hang extern-lang-open by default.

	(c-electric-brace): Add extern-lang-open and extern-lang-close to
	list of symbols that can hang.

	(c-guess-basic-syntax): CASE 5A.4 => 5A.5; New CASE 5A.4 added to
	recognize extern-lang-open; CASE 14C => 14D; New CASE 14C added to
	recognize extern-lang-close.

	(c-search-uplist-for-classkey): When searching for c-class-key,
	concat "\\|extern[^_]".  The logic for determining whether we are
	inclass-p and inextern-p is essentially the same so this seems to
	work very well in all test cases.

	(c-guess-basic-syntax): If inclass-p, do an additional check to
	see whether this is really inside an external language definition
	block or a class definition and set inextern-p accordingly (a
	boolean only).

	(c-guess-basic-syntax): CASE 5A.4 => 5A.1; 5A.1-5A.3 => 5A.2-5A.4;
	New CASE 5F to check for extern-lang-close; CASE 5F-5J => 5G-5K;
	CASE 5I: modifier could either be 'inclass or inextern-lang; CASE
	14A: closing brace isn't an inline-close if we're inside an extern
	language block; CASE 14B: watch out for same.

	(c-guess-basic-syntax): CASE 5A.3: an inline-open
	brace should also be given inclass syntax.  The problem is that
	this breaks indentation for brace that start inline-inclass
	functions inside a nested class since they will twice add the
	indentation of the inner class to the running total.

	The solution is to not give one of the two symbols a relpos.  The
	decision was made to omit the relpos of the 'inline-open symbol.

	(c-mode-help-address): Added cc-mode-help@python.org.

	(c-recognize-knr-p): No longer a user variable.
	(c++-mode, java-mode): Set c-recognize-knr-p to nil.

	(c-guess-basic-syntax): CASE 5G: Although we still test on
	c-recognize-knr-p, this is no longer user configurable, and no
	longer imposes potentially disastrous impact on performance.
	Adopt c-mode.el assumption that argdecls are indented at least one
	space and that function headers are not indented.  This prevents
	us from potentially searching back to the top of the file when
	looking at a large number of top-level declarations.

	(c-gnu-impose-minimum): New function.

	(c-label-minimum-indentation): New buffer-local variable.

	(c-style-alist): In "gnu" style, add c-gnu-impose-minimum to
	c-special-indent-hook so case-label and label syntaxes will have a
	minimum indentation.

	(c-submit-bug-report): Report on c-label-minimum-indentation.

	(c-set-style-1): Special case c-special-indent-hook.

	(c-special-indent-hook): Make it buffer local.

	* cc-mode.el (c-skip-conditional): `try' clauses in C++ skip only
	1 sexp.  Also take care of finally and synchronized statements.

	* cc-mode.el (c-lineup-arglist-close-under-parent): New function.

	* cc-mode.el (c-C-conditionals): New constant.
	(c-C-conditional-key, c-C++-conditional-key, c-Java-conditional-key):
	Use c-C-conditionals.

	* cc-mode.el (c-Java-conditional-key): New variable.
	(java-mode): Use c-Java-conditional-key.

	* cc-mode.el (c-C++-access-key): Allow for whitespace between the
	protection key and the colon.

	* cc-mode.el (c-set-style): As a last resort, match exact case for
	stylename.

1996-10-08  Erik Naggum  <erik@naggum.no>

	* simple.el (line-move): Ignore invisibility in `move-to-column'.

	* lisp-mode.el (with-current-buffer): Correct indentation
	property.

1996-10-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* gud.el: Move two function definitions.

1996-10-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* perl-mode.el (electric-perl-terminator, perl-indent-command)
	(perl-backward-to-noncomment, indent-perl-exp): Avoid error if
	comment-start-skip is nil.

	* timer.el (cancel-timer): Add autoload cookie.

1996-10-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (universal-argument): Doc fix.

1996-10-06  Erik Naggum  <erik@naggum.no>

	* help.el (print-help-return-message): Use new functions
	`special-display-p' and `same-window-p' to determine which help
	message to print.

1996-10-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sgml-mode.el (sgml-specials): Delete `-' from the list.
	(sgml-font-lock-keywords): Add an element for comments.

	* rmailsum.el (rmail-summary-line-count-flag):
	Renamed from rmail-summary-line-count-p.

	* rmailsum.el (rmail-summary-line-count-p): New variable.
	(rmail-make-basic-summary-line): Optionally exclude the line count.

	* buff-menu.el (Buffer-menu-revert): New function.
	(Buffer-menu-mode-map): Use Buffer-menu-revert for g.
	(Buffer-menu-mode): Doc fix.

1996-10-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu-default-create-index-function): Fix error message.

	* info.el (Info-read-subfile): Allow a file name as arg.
	(Info-search): Restore previous subfile correctly.

	* lisp-mode.el (eval-after-load): Add lisp-indent-function for it.

1996-10-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-name-non-special): New function.
	Add it to file-name-handler-alist.

1996-10-03  Erik Naggum  <erik@naggum.no>

	* lisp-mode.el (with-temp-buffer): Add indentation property.

	* subr.el (with-current-buffer): Minor cleanup.
	(with-temp-file): Support for arguments nil and t removed.
	(with-temp-buffer): Use this new macro instead.
	(with-output-to-string): Rewrite.

1996-10-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (recover-session): Error if session files turned off.

1996-09-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--make-index-alist): Add doc string.

1996-09-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* edebug.el (save-selected-window, save-current-buffer)
	(save-match-data, with-output-to-string, with-current-buffer)
	(with-temp-file, with-temp-buffer): Add def-edebug-spec calls.

1996-09-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* profile.el: Delete several \n\'s.
	(profile-fix-fun): Delete an if whose test is never true.
	Handle doc strings that are also the function value.

1996-09-27  Jacques Duthen  <duthen@cegelec-red.fr>

	* ps-print.el
	(ps-print-prologue-1): Fix bug in PostScript comment lines.
	(ps-nb-pages): Call ps-setup _before_ switching to the other
	buffer, because of buffer variables.

	* ps-print.el: Major rewrite.
	(ps-page-dimensions-database, ps-paper-type): Replace the
	following global variables:
	(ps-a4-page-height, ps-a4-page-width, ps-legal-page-height)
	(ps-legal-page-width, ps-letter-page-height, ps-letter-page-width)
	(ps-pages-alist, ps-page-dimensions): Variables deleted.
	(ps-page-height-i, ps-page-width-i): Variables deleted.
	(ps-print-prologue): Variable deleted.
	(ps-print-prologue-1, ps-print-prologue-2): New variables.
	Major rewrite of the PostScript code to handle landscape mode,
	multiple columns and new font management.
	(ps-landscape-mode, ps-number-of-columns, ps-inter-column): New
	variables.
	Add landscape mode and multiple columns with interspacing.
	(ps-font-info-database, ps-font-family, ps-font-size)
	(ps-header-font-family, ps-header-font-size, ps-header-title-font)
	(ps-header-title-font-size): New variables.
	New font management interface.
	(ps-header-line-pad, ps-header-offset): New variables.
	(ps-header-font, ps-landscape-page-height): New internal variables.
	(ps-top-margin): Change its semantics.  It is now really the top
	margin, not anymore twice the top margin.
	(/ReportAllFontInfo): New PostScript function to get all the font
	families of the printer.
	(ps-setup): New function.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region): New
	utility functions.
	(ps-page-dimensions-get-width, ps-page-dimensions-get-height): New
	macros.
	(/HeaderOffset): Fix bug with /PrintStartY.
	(/SetHeaderLines): Fix bug.

1996-09-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* lisp-mode.el (with-temp-file): Add lisp-indent-function property.

	* subr.el (with-temp-file): New macro.

1996-09-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* perl-mode.el: Add `provide' call.

	* ange-ftp.el (ange-ftp-skip-msgs): Recognize `passive'.

1996-09-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* etags.el (etags-file-of-tag): Fix looking-at regexp.

	* rmail.el: Delete all the autoload calls.

	* undigest.el, rmailsort.el: Add many autoload cookies.

	* rmailedit.el (rmail-edit-current-message): Add autoload.

	* rmailmsc.el (set-rmail-inbox-list): Add autoload cookie.

	* rmailkwd.el (rmail-read-label, rmail-add-label, rmail-kill-label)
	(rmail-previous-labeled-message, rmail-next-labeled-message):
	Add autoloads.

	* rmailsum.el (rmail-summary-by-senders, rmail-summary): Add autoload.
	(rmail-summary-by-topic, rmail-summary-by-regexp): Likewise.
	(rmail-summary-by-recipients, rmail-summary-by-labels): Likewise.

	* rmailout.el (rmail-fields-not-to-output): Add autoload cookie.
	(rmail-output-to-rmail-file, rmail-output): Likewise.

	* lucid.el (exec-to-string): New alias.

	* gud.el (perldb): Supply visited file name, or -e 0, as default args.

1996-09-25  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (split-string): Fix minor bug.

	* gud.el (gud-perldb-massage-args): Handle -e in ARGS.
	(gud-perldb-marker-filter): Handle drive letters in file name.
	(perldb): Update comint-prompt-regexp for latest Perl.

	* gud.el (gud-mode): Locally set comint-input-ignoredups to t.

	* paragraphs.el (forward-paragraph): Don't ever move forward
	again across a line if we stopped there because it doesn't start
	with the fill prefix.

1996-09-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Add lower-case varieties of
	ChangeLog filenames, for case-insensitive MSDOS and MS-Windows.

	* viper-util.el (vip-window-display-p): Don't treat MS-DOS as a
	windowed display.

1996-09-24  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse-copy.el: New file.

	* mouse-drag.el: New file.
	(mouse-drag-throw): Bind adjusted-mouse-delta.

	* mouse.el (mouse-drag-secondary): Make sure to return nil
	if we don't make a selection.

	* simple.el (shell-command-to-string): Make the buffer current
	since output goes in current buffer.  Use shell-command-switch.

	* lisp-mode.el (save-current-buffer, with-current-buffer)
	(with-output-to-string): Specify how to indent.

	* imenu.el (imenu--cleanup): Handle shared structure in alist.

	* subr.el (split-string): New function.

	* simple.el (shell-command-to-string): New function.

	* subr.el (with-output-to-string): New macro.

	* tex-mode.el (tex-main-file): Add missing initial value.
	(tex-file): Set tex-print-file to source-file always.
	(tex-last-file-texed): Renamed from tex-last-buffer-texed
	and now holds a file name.
	(tex-region): Test and set tex-last-file-texed.

	* edebug.el (edebug-original-signal): Don't define it.
	(edebug-signal): Call signal, not edebug-original-signal.
	(edebug-enter): Bind signal-hook-function instead of fsetting signal.
	(edebug-recursive-edit): Clear or clear signal-hook-function.

1996-09-23  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (insert-file-contents-literally): Doc fix.

	* iso-acc.el (iso-languages): Add element for latin-3.

1996-09-22  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (run-hooks): defconst deleted.
	The initialization is now in eval.c.

	* arc-mode.el: Doc fixes.
	(archive-mode, archive-extract, archive-check-dos)
	(archive-write-file-member): Set buffer-file-type only if
	default-buffer-file-type is bound.
	(buffer-file-type): Don't make this buffer-local or permanent.
	Just don't mess with it.

	* rmailkwd.el (rmail-keywords): Don't initialize.

1996-09-22  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el (time-stamp-old-format-warn): New variable.
	(time-stamp-format): Use ISO 8601 format for date.

1996-09-22  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (unread-command-event, unread-command-events)
	(last-command-event): defvars deleted.

	* edebug.el (pre-command-hook, post-command-hook): Defvars deleted.
	(post-command-idle-hook): Defvar deleted.
	(edebug-outside-post-command-idle-hook): Defvar deleted.
	(edebug-enter): Don't look at or set post-command-idle-hook.
	(edebug-outside-excursion): Likewise.
	(edebug-emacs-19-specific): Don't define read-expression-history
	and read-expression-map.

	* ffap.el (path-separator): Duplicate definition deleted.
	(ffap-what-domain): Don't define mail-extr-all-top-level-domains here.

	* refbib.el (r2b-capitalize-title-stop-words): Renamed from capit...
	(r2b-capitalize-title-stop-regexp): Renamed from capit...
	(r2b-capitalize-title-region): Renamed from capitalize...
	(r2b-capitalize-title): Renamed from capitalize...

	* bib-mode.el (bib-capitalize-title-stop-words): Renamed from capit...
	(bib-capitalize-title-stop-regexp): Renamed from capit...
	(bib-capitalize-title-region): Renamed from capitalize...
	(bib-capitalize-title): Renamed from capitalize...

	* edmacro.el (insert-kbd-macro): Duplicate definition deleted.

	* subr.el (eql): Incorrect definition deleted.
	Now it is only in cl.el.

	* lucid.el (add-timeout): Duplicate definition deleted.
	(screenw-width, screen-height): Likewise.
	(disable-timeout, keymap-parent, set-keymap-parent): Likewise.

	* frame.el (ctl-x-5-map, ctl-x-5-prefix): Duplicate defs deleted.

	* register.el: New kind of register value is a file name and position.
	(jump-to-register): Handle file-query.
	(register-swap-out): New function.  Add it to kill-buffer-hook.
	(register-alist): Doc fix.

	* subr.el (with-current-buffer): New macro.

	* byte-opt.el (byte-optimize-form-code-walker):
	Treat save-current-buffer like save-excursion.

1996-09-21  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* bytecomp.el (save-current-buffer): Compile it like save-excursion.
	(byte-compile-save-current-buffer): New function.

	* help.el (locate-library): Print no messages if called from Lisp.

	* imenu.el (imenu--split-menu): Keep the rescan item at top level.
	Keep subalists at top level too.
	Name the split-off submenus from the first item in them.
	(imenu--generic-function): Avoid adding nil as elt of the result.

	* imenu.el (imenu--generic-function): Create a special entry
	if the element of imenu-generic-function asks for it.
	(imenu): Handle special entries.
	(imenu--subalist-p): New function.  Use in various places.

1996-09-20  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* frame.el (scroll-bar-side): New variable.
	(toggle-scroll-bar): Use scroll-bar-side.

1996-09-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-mult.el (ediff-quit-session-group-hook): New hook.
	(ediff-filegroup-action): Now passes ediff-merge-store-file to
	subordinate Ediff sessions.
	* ediff.el: Now supports autostore for merge jobs.
	* ediff-util.el (ediff-maybe-save-and-delete-merge): New function.
	(ediff-setup): Now uses convert-standard-filename.
	(ediff-make-temp-file): Now returns expanded file name.
	(ediff-really-quit): Now warps pointer into a working frame
	* ediff-init.el (ediff-quit-merge-hook, ediff-autostore-merges):
	New variables.
	(ediff-convert-standard-file-name): New function.
	Added on-line help, moved some functions to and from ediff-util.el.
	(ediff-file-remote-p): Modified.
	(ediff-set-face-pixmap): New function.
	(ediff-odd-diff-pixmap, ediff-even-diff-pixmap, ediff-fine-diff-pixmap):
	New variables.
	* ediff-ptch.el (ediff-context-diff-label-regexp): Fixed regexp.
	(ediff-map-patch-buffer): Fixed beg/end patch boundaries.
	Now checks for the return code from the patch program.
	Fixed ediff-patch-options, ediff-backup-extension, ediff-backup-specs.
	* ediff-merg.el, ediff-diff.el, ediff-init.el:
	* ediff-hook.el: Changed ediff-meta to ediff-mult.
	* ediff-ptch.el (ediff-backup-specs): New variable.
	* ediff.el (ediff-documentation): Modified.
	* ediff-help.el: New file.
	* ediff-mult.el (ediff-intersect-directories)
	(ediff-meta-insert-file-info): Functions modified.
	* ediff-vers.el, ediff.el:
	Changed vc/rcs/etc-ediff-internal to ediff-vc/rcs/etc-internal
	* ediff-diff.el (ediff-setup-fine-diff-regions):
	Allow diff options to be passed to the diff program.

1996-09-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (vip-autoindent): No longer moves insert point.
	(vip-paren-match): Now pays no attention to comments and
	leaves region active.
	* viper-util.el (vip-convert-standard-file-name): New function.

1996-09-19  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Ignore event end-point if it
	is not a number.

	* imenu.el (imenu--generic-function): Use markers for positions.

1996-09-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--mouse-menu): Add special handling for
	rescan item.

	* tq.el (tq-filter): No need for save-match-data.

	* gud.el (gud-display-line): Don't call display-buffer
	if buffer already has a window.

1996-09-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-next-same-subject): Don't set
	search-regexp until after adjusting subject string.

1996-09-16  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ispell.el (ispell-dictionary-alist-1): Add `american' to list.

1996-09-16  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-print-log): Set the display window so that it shows
	the current log entry completely.

	* vc-hooks.el (vc-find-cvs-master): Fixed handling of "locally
	added" files.

1996-09-16  Erik Naggum  <erik@naggum.no>

	* files.el (file-locked-p): Alias to `ignore' if no file locking.

1996-09-15  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail-insert-inbox-text): Detect locked
	RMAIL files at the outset, before copying any files.

1996-09-15  Lennart Staflin  <lenst@lysator.liu.se>

	* tq.el (tq-filter): Add unwind-protect and save-match-data.

1996-09-14  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* info.el (Info-mode): Do fontify, if ms-windows.

	* startup.el (normal-top-level, command-line-1, command-line):
	Test for ms-windows instead of win32, and use memq.

	* mouse.el (mouse-set-region):
	Test for ms-windows instead of win32, and use memq.

	* faces.el (make-face, make-face-x-resource-internal):
	Test for ms-windows instead of win32.  Use memq.
	(initialization at end of file): Likewise.

	* facemenu.el (facemenu-color-equal): Change win32 to ms-windows.

	* bytecomp.el (byte-compile-lambda): If the doc string is also the
	return value, use it for both.

	* rmailout.el (rmail-output-file-alist): Add autoload cookie.
	(rmail-delete-after-output): Duplicate defvar deleted.

	* files.el (find-file-existing-other-name): Default value now t.

	* ps-print.el (ps-print-prologue): Get rid of backslash-digits
	control characters in comments.

1996-09-13  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (inhibit-first-line-modes-regexps): Add .tgz.

1996-09-13  Lars Magne Ingebrigtsen  <larsi@hrym.ifi.uio.no>

	* mail-extr.el (mail-extr-safe-move-sexp): Make sure this doesn't
	signal errors even for pathological From headers.

1996-09-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-transl.el (iso-transl-char-map): Add ACCENT SPACE sequences.

	* hideif.el (hif-token-regexp): Move ! after !=.

	* loadup.el: Load frame.elc unconditionally.

1996-09-12  Kevin Rodgers  <kevinr@ihs.com>

	* loadhist.el (read-feature): New function.
	(unload-feature): Read FEATURE interactively with read-feature.

1996-09-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ediff-init.el (ediff-eval-in-buffer): Add properties
	such lisp-indent-function, lisp-indent-hook, edebug-form-spec.

	* ediff-ptch.el (ediff-context-diff-label-regexp):
	Recognize -u format better.
	(ediff-map-patch-buffer): Recognize -u format better.

	* bindings.el: New file, split out from loaddefs.el.
	* loadup.el: Load bindings.el.

	* gud.el (gud-find-c-expr): Renamed from find-c-expr.
	Don't get fooled by if and while statements.
	(gud-expr-compound): Renamed from expr-compound.
	(gud-expr-compound-sep): Renamed from expr-compound-sep.
	(gud-next-expr): Renamed from expr-next.
	(gud-prev-expr): Renamed from expr-prev.
	(gud-forward-sexp): Renamed from expr-forward-sexp.
	(gud-backward-sexp): Renamed from expr-backward-sexp.
	(gud-innermost-expr): Renamed from expr-cur.

1996-09-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* easymenu.el (easy-menu-do-define): Use `x-popup-menu' instead of
	non-existing `easy-popup-menu'.

1996-09-10  Erik Naggum  <erik@psilocin.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-output-file-form): Bind print-quoted
	and print-gensym to t when writing compiled byte-code objects.
	(byte-compile-output-docform): Likewise.

1996-09-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* autoload.el (update-file-autoloads): Don't barf if autoloads
	file file is completely empty.

	* bytecomp.el (byte-compile-out-toplevel): Undo previous change.
	(byte-compile-byte-code-maker): Undo previous change.

	* rmail.el (rmail-find-all-files): Rely on directory-files
	to do the filtering.

	* imenu.el (imenu): Tests for when to widen were backwards.
	(imenu--split-menu): Handle imenu-sort-function here.
	(imenu--mouse-menu, imenu-update-menubar): Not here.
	(imenu--mouse-menu): Rewrite second half--handle
	nested menus reliably.
	(imenu--create-keymap-2): Include ITEM in the leaf menu-item.

1996-09-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* outline.el (outline-font-lock-keywords):
	Treat carriage return like newline.

	* pp.el (pp-eval-expression): Set font-lock-default locally to nil.

1996-09-08  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-file-owner): If the file is owned by somebody
	else, return the UID as a string, so that the rest of VC can use
	it like a username.

	* vc.el (vc-print-log): Move point to the log entry of the current
	version.

1996-09-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el, viper.el (vip-scroll):
	Changed to vip-scroll-screen, other modifications.
	(vip-alternate-ESC): Changed to vip-alternate-Meta-key.
	* viper.el (vip-escape-to-vi, vip-prefix-arg-value)
	(vip-prefix-arg-value): Now work with prefix arguments and also
	will work with 2dw and d2d style commands.
	(vip-prefix-arg-value, vip-prefix-arg-com): Now work in any Vi state.
	(vip-message-folder-hook, vip-dired-hook): New hooks.
	(vip-paren-match): Go to closing paren first.
	(vip-find-char-forward, vip-find-char-backward, vip-goto-char-forward)
	(vip-goto-char-backward): Functions modified.
	(vip-set-hooks): Added viper to fortran-mode.
	(viper-mode): Don't delete the startup message.
	* viper-keym.el: C-\ is now the meta key.
	C-z in insert mode now escapes to Vi.
	(vip-slash-and-colon-map, vip-comint-mode-modifier-map)
	(vip-dired-modifier-map): New modifying keymaps.
	* viper-util.el, viper.el: Added pixmaps to replace-region and
	search faces.
	(vip-get-filenames-from-buffer): The argument is now optional.
	(vip-ex-nontrivial-find-file-unix): Added the -d option to ls command.
	(vip-read-key): Inhibit quit added.
	(vip-get-cursor-color): Fixed to work with XEmacs.
	* viper-ex.el (ex-edit): Don't change to vi in dired mode.

1996-09-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* apropos.el (apropos-print): Don't say `Type ' before M-x cmd.

	* replace.el (perform-replace): Increment replace-count
	in the places where we do the replacement.

	* executable.el (executable-insert): Doc fix.
	(executable-query): Doc fix.

1996-09-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* startup.el (command-line, command-line-1):
	Stop processing options if we encounter "--".

	* dired.el (dired-mode-map): Add revert-buffer to Immediate menu.

	* frame.el (other-frame): Don't call unfocus-frame.

	* mouse.el (mouse-select-window): Don't call unfocus-frame.

	* rmail.el (rmail-convert-to-babyl-format):
	Increase sit-for timeout to 3 seconds.

1996-09-03  Paul Eggert  <eggert@twinsun.com>

	* calendar.el (calendar-current-date):
	Simplify by using decode-time instead
	of parsing current-time-string.

	* ls-lisp.el (insert-directory): Use same value of `now' for all files.
	(ls-lisp-format): New argument NOW.  Arguments are no longer optional.
	(ls-lisp-format-time): New argument NOW.  Use same method as `ls'
	to decide whether to show time-of-day or year.

	* timer.el (timer-next-integral-multiple-of-time): New function.
	(run-at-time): If TIME is t, do the action at the next
	integral multiple of REPEAT.
	* time.el (display-time): Use new run-at-time functionality to
	fix display glitches when display-time-interval != 60.

1996-09-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* paren.el (show-paren-function): Handle unbalanced parens as
	mismatched.  When the unbalanced paren is an opening paren,
	highlight it as mismatched.

1996-09-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-transl.el (iso-transl-dead-key-alist): Add dead-...
	and S-dead-... key names to this list.
	(key-translation-map): Don't define dead-... and S-dead... here.
	(iso-transl-define-keys): Handle multiple matches
	in iso-transl-dead-key-alist for one accent character.

1996-09-02  Paul Eggert  <eggert@twinsun.com>

	* timer.el (run-at-time): Doc fix.

1996-09-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail-find-all-files): Eliminate recursive scan.

	* server.el (server-process-filter): Quote with &, not \.

	* simula.el (save-match-data): Definition deleted.

1996-09-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ffap.el (ffap-locate-file): Function deleted.
	(ffap-locate-jka-suffixes): Variable deleted.
	(ffap-alist): Use locate-library.

	* help.el (locate-library): Doc fix.
	(locate-library): New arg PATH.  Handle autocompression mode.

	* mail-utils.el (rmail-dont-reply-to): Recognize the names to delete
	when they appear within <...>.

	* server.el (server-process-filter): Undo the quoting with
	backslashes that emacsclient now does for special characters.
	Delete some debugging code accidentally left in.

	* cl-seq.el, cl-extra.el, cl.el, cl-macs.el:
	Turn on byte-compile-dynamic.

	* files.el (insert-directory): If ls fails, get an error.

1996-09-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* info.el: Add menu items and xrefs to the menu bar menu.
	(Info-check-pointer): New function.
	(Info-mode-menu): New menu.
	(Info-menu-last-node): New variable.
	(Info-menu-update): New function.
	(Info-mode): Add `Info-menu-update' to `activate-menubar-hook'.

1996-09-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* compile.el (compilation-finish-functions): New variable.
	(compilation-handle-exit): Run compilation-finish-functions.

	* viper.el (vip-custom-file-name): Use convert-standard-filename.

	* desktop.el (desktop-basefilename): Use convert-standard-filename.

	* bookmark.el (bookmark-default-file): Use convert-standard-filename.

	* add-log.el (change-log-name): Don't treat MSDOS, NT specially.

	* vc.el (vc-register-switches): New variable.
	(vc-backend-admin): Use vc-register-switches.

1996-09-01  Vladimir Alexiev  <vladimir@cs.ualberta.ca>

	* tmm.el (tmm-add-one-shortcut): New subroutine.
	(tmm-add-shortcuts): Code moved to tmm-add-one-shortcut.
	Handle tmm-shortcut-style and tmm-shortcut-words.
	(tmm-define-keys): Use suppress-keymap.
	Moved use-local-map from the caller here.
	tmm-short-cuts is now a list of chars, not of one-char strings.
	(tmm-completion-delete-prompt): New function, used in
	completion-setup-hook.
	(tmm-shortcut-style): New variable.
	(tmm-shortcut-words): New variable.
	(tmm-shortcut): Handle tmm-shortcut-style.
	The shortcut searched in tmm-short-cuts is now a char, not a string.

1996-08-31  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-nt.el: New file.

	* dos-fns.el, winnt.el (path-separator, grep-null-device)
	(grep-regexp-alist, file-name-buffer-file-type-alist)
	(find-buffer-file-type, find-file-not-found-set-buffer-file-type)
	(find-file-binary, find-file-text, mode-line-format):
	Moved to dos-nt.el.

	* winnt.el (save-to-unix-hook, revert-from-unix-hook)
	(using-unix-filesystems): Functions removed.

	* loadup.el [windows-nt, ms-dos]: Load dos-nt.

1996-08-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* cc-mode.el (c-backslash-region): If a line ends at the end of
	the region, always delete backslash from it.

1996-08-31  Paul Eggert  <eggert@twinsun.com>

	* gnus.el, paths.el (gnus-local-domain): Remove.

1996-08-31  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* simple.el (set-hard-newline-properties): New fn.
	(newline): Use it.

	* paragraphs.el (use-hard-newlines): New minor mode function.
	Existing variable gets doc fix.

	* format.el (format-alist): Doc fix.
	(format-annotate-function): New argument ORIG-BUF, passed on to TO-FN.
	(format-encode-region): Let TO-FN know that our current buffer is
	its ORIG-BUF.

	* enriched.el: Don't fill based on window width.
	Don't require facemenu; it's preloaded if applicable.
	(enriched-default-right-margin, enriched-fill-after-visiting)
	(enriched-text-width): Variables deleted.
	(enriched-text-width): Function deleted.
	(enriched-initial-annotation): Use `fill-column' rather than
	enriched-text-width.
	(enriched-mode): Use `add-to-list'.  Turn use-hard-newlines on by
	calling function, not setting variable.
	(enriched-encode): New argument ORIG-BUF; evaluate
	enriched-initial-annotation in that buffer.
	(enriched-decode): Turn on use-hard-newlines with function.
	Use new `set-hard-newline-properties' function.  Set fill-column from
	File-Width header; re-fill paragraphs only if there is no
	File-Width header.

1996-08-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-show-mark): Detect loss of selection
	while we are showing it highlighted.

	* isearch.el (isearch-*-char): Use the isearch-other-end as new
	starting point in both directions.

	* files.el (make-auto-save-file-name): Try a few directories
	to get one we can write in.

	* doctor.el (make-doctor-variables): Eliminate unused variables `elist'
	and `monosyllables'.  `observation-list' also.

	* frame.el: Doc fixes.

	* faces.el (internal-set-face-1): When calling x-list-fonts,
	ask for just one match.

	* startup.el (command-line-1): Rearrange initial screen.

	* rmail.el (rmail-get-new-mail): Handle files in multiple batches,
	in case two inboxes have the same last name component.

1996-08-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* webjump.el (webjump-sample-sites): Define with defvar.
	(webjump-state-to-postal-alist): Likewise.

	* vc.el (vc-update-change-log): Doc fix.

	* simple.el (do-auto-fill): Do break after one word as last resort
	even if there is a fill prefix.

	* webjump.el: New file.
	(webjump-submit-bug-report): Function deleted.
	(webjump-maintainer-address, webjump-author): Variable deleted.
	(webjump-vc-id, webjump-version): Variables deleted.

1996-08-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* texinfmt.el (texinfo-format-printindex):
	Treat windows-nt and ms-dos like vax-vms.

	* foldout.el (foldout-hide-flag, foldout-show-flag):
	New variables.
	(foldout-exit-fold): Use those variables.

	* subr.el (save-match-data): Fix typo in previous change.

1996-08-29  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nndoc.el (nndoc-mbox-article-begin): New function.
	(nndoc-type-alist): Enter it into definition.
	(nndoc-dissect-buffer): Use new definition.

1996-08-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* reporter.el (reporter-compose-outgoing): Fix error syntax.
	(reporter-bug-hook): Fix error message.

	* simple.el (mail-user-agent, define-mail-user-agent):
	Definitions moved here from reporter.el.
	(sendmail-user-agent, mh-e-user-agent): Definitions moved here.

	* reporter.el (mail-user-agent): Variable moved to simple.el.
	(define-mail-user-agent): Function moved to simple.el.
	(sendmail-user-agent, mh-e-user-agent): Defs moved to simple.el.
	(reporter-mail): Function deleted.

1996-08-29  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-do-fcc): Supply the FROM-GNUS parameter to
	`rmail-output'.

1996-08-29  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-update-change-log): Remove code which found RCS files
	only in RCS directory; leave this to rcs2log, which will find
	entries for CVS or RCS/*,v and *,v.  Lose sub-process' stderr
	output.  Doc fix.

1996-08-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-associative):
	Treat one arg case like (+ x 0).

	* lisp.el (narrow-to-defun): New function.
	* loaddefs.el (ctl-x-map): Put narrow-to-defun on C-x n d.

1996-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (save-match-data): Fix previous change.

	* time.el (display-time): Call display-time-mode.
	(display-time-mode): Take arg or toggle, as a minor mode.

	* files.el (kill-some-buffers): New arg LIST says buffs to maybe kill.

	* sendmail.el (mail-mode-auto-fill): New function.
	(mail-mode): Put it into normal-auto-fill-function.

	* menu-bar.el (menu-bar-update-buffers): Make the Frames menu
	a submenu of the Buffers menu.

1996-08-28  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-group-read-group): Use range functions instead of
	list functions for the tick and marks ranges.

1996-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-ls): Run ange-ftp-before-parse-ls-hook.
	(ange-ftp-before-parse-ls-hook): Add defvar.

	* server.el (server-visit-files): New argument NOWAIT.
	Don't record on server-buffer-clients if NOWAIT.
	(server-process-filter): Pass NOWAIT arg based on data from server.
	Don't record in server-clients if NOWAIT.

	* subr.el (save-match-data): Use save-match-data-internal
	as the local variable, instead of an uninterned symbol.

	* bytecomp.el (byte-compile-funarg-2): New function.
	(sort): Use byte-compile-funarg-2.
	(byte-compile-out-toplevel): Always compile to byte code
	if an uninterned symbol appears.
	(byte-compile-byte-code-maker): Handle uninterned symbols
	in the constant vector.

	* sendmail.el (mail-self-blind, mail-interactive)
	(mail-yank-ignored-headers): Make them user options.

	* sh-script.el (sh-alias-alist): Use gnu/linux, not lignux.

1996-08-27  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-decode-rfc1522): Didn't put point at point-min
	before starting to decode.

1996-08-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-chown-program): Replace lignux with gnu/linux.

	* ediff-ptch.el: Require ediff-init.

1996-08-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-region-delete-keys): New variable.
	(mouse-show-mark): If one of those keys is next, delete the region.

	* apropos.el (apropos-mode-map): Don't use view-mode;
	instead, bind SPC and DEL directly.

	* shell.el (shell-mode): Don't assume /dev/null is its own truename.

1996-08-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* diff.el (diff): Don't pop to *diff* buffer.  Change bogus
	unwind-protect to save-excursion.

1996-08-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* pc-select.el (ensure-mark): Minor rewrite.
	(scroll-down-mark): Handle pc-select-override-scroll-error.
	(scroll-down-nomark): Likewise.
	(scroll-up-mark, scroll-up-nomark): Likewise.
	(pc-selection-mode): Get rid of the advice on scroll-up, scroll-down.

	* bytecomp.el (byte-compile-insert-header): Fix previous change.

1996-08-25  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--in-alist): Accept only bottom-level matches.

	* bytecomp.el (byte-compile-insert-header): Clean up syntax
	of messages.  Mention setting of byte-compile-dynamic.
	Edit byte-compile-version to extract just the version number.
	(byte-compile-version): Use the RCS version number.

	* tar-mode.el (tar-mode-write-file): Clear buffer's own modified flag
	after clearing the ones listed within it.

1996-08-25  Erik Naggum  <erik@naggum.no>

	* rmail.el (rmail-show-message): Bind `end' after clearing the
	"unseen" attribute.

1996-08-24  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-rmail-update): Bind rmail-not-really-seen
	non-nil if in isearch mode.

	* rmail.el (rmail-show-message): Clear `unseen' even if header
	is already reformatted--but don't do it if rmail-not-really-seen.
	(rmail-not-really-seen): New variable.

	* iso-acc.el (minibuffer-setup-hook): Fix misspelling of hook name.

	* tex-mode.el (tex-main-file): New variable.
	(tex-file): Use that.  Rename local var to source-file
	so it is obviously local.

1996-08-24  Lars Magne Ingebrigtsen  <larsi@ylfing.ifi.uio.no>

	* gnus.el (gnus-group-enter-directory): Would temporarily bind
	`nneething-read-only', shadowing the proper `defvar'.

1996-08-24  Paul Eggert  <eggert@twinsun.com>

	* add-log.el (change-log-time-zone-rule): New variable.
	(iso8601-time-zone): New function.
	(add-change-log-entry): If change-log-time-zone-rule is non-nil,
	calculate date according to that rule, and indicate resulting
	time zone.

1996-08-24  Erik Naggum  <erik@naggum.no>

	* add-log.el: Change to ISO 8601 date formats, without time of day.
	(change-log-font-lock-keywords): Adjust accordingly.
	(add-change-log-entry): Compare and insert with new date format.
	(change-log-mode): Make `paragraph-start' and `paragraph-separate'
	use \< like `page-delimiter' for consistency.

1996-08-23  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* cc-mode.el (c-mode-base-map): New variable.
	(c-mode-map, c++-mode-map, objc-mode-map, java-mode-map):
	Inherit from c-mode-base-map, not c-mode-map.

1996-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* apropos.el (apropos-mode): Turn on View mode.

	* isearch.el (isearch-edit-string): When starting nonincremental
	search, after peeking ahead one char, call cancel-kbd-macro-events.

1996-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (keyboard-translate): Use a char-table.
	(keyboard-translate-table): Add char-table-extra-slots property.

	* pc-select.el: Replace \n in doc strings.
	(pc-selection-mode): Big doc fix.  Don't bind f1.

1996-08-21  Michael Staats  <michael@thp.Uni-Duisburg.DE>

	* pc-select.el (forward-line-mark): New function.
	(forward-line-nomark): New function.
	(backward-line-mark): New function.
	(backward-line-nomark): New function.
	(pc-selection-mode): Add keybindings for those functions.
	(pc-select-override-scroll-error): New variable.
	(pc-selection-mode): Get rid of the advice on scroll-up, scroll-down.

1996-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (kill-region): inhibit-read-only overrides text props too.

1996-08-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (revert-buffer): Doc fix.

1996-08-20  Mike Long  <mike.long@analog.com>

	* make-mode.el (makefile-font-lock-keywords): Catch variable
	references that use substitutions.

1996-08-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* ielm.el (ielm-map): Don't bind M-q.
	(inferior-emacs-lisp-mode): Set fill-paragraph-function instead.
	* add-log.el (change-log-mode-map): Don't bind M-q.
	(change-log-mode): Set fill-paragraph-function instead.

1996-08-17  Paul Eggert  <eggert@twinsun.com>

	* rfc822.el (rfc822-bad-address): Don't put a newline into the
	error message; this confuses rmail.

1996-08-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-ignored-headers): Hide X-char* and X-face,
	but not Sender.

1996-08-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* decipher.el (decipher-get-undo-copy): New function.
	(decipher-get-undo): Use it.

	* simple.el (shell-command): Really use output-buffer in synchronous
	case, when it is a buffer.

	* faces.el (modify-face): Handle nil as stipple value.
	(internal-face-interactive-stipple): New function.
	(set-face-stipple): Use internal-face-interactive-stipple.

	* rmail.el (rmail-ignored-headers): Ignore Path:, Sender:, X-mailer:.

	* faces.el (modify-face): Handle stipple values
	of the form (WIDTH HEIGHT DATA).

1996-08-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Don't call mouse-set-region-1
	if mark is gone or no longer active or if we changed buffers.

1996-08-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* paths.el (news-inews-program): Look for /usr/contrib/lib/news/inews.

	* sgml-mode.el (html-tag-alist): Fix the entry for "font".

	* ange-ftp.el (ange-ftp-process-filter): Discard nulls.

1996-08-13  Erik Naggum  <erik@naggum.no>

	* message.el (message-mode): Delete abbrev mode initialization.
	(message-mode-hook): Move it here, instead, so the user can
	override it.
	(message-y-or-n-p, message-talkative-question)
	(message-flatten-list, message-flatten-list-1): Move utility
	functions up so macro is defined before first invocation.

	* f90.el (f90-auto-fill-mode): Function deleted, all references
	replaced with `auto-fill-mode'.
	(f90-mode): Make `normal-auto-fill-function' local to this buffer
	and bind to `f90-do-auto-fill'.

1996-08-13  Torbjorn Einarsson  <etxeina@etxdn.ericsson.se>

	* f90.el (f90-do-auto-fill): Fix bug which made program hang for
	space in fill-column.
	(f90-font-lock-keywords-1): Now we have common font-lock
	exps for Emacs and XEmacs.
	(f90-font-lock-keywords-2): Change reg-exp for line number.
	A number must be followed by a letter to be highlighted.
	Fix highlighting of declarations with trailing comments.
	(f90-match-end): Fix bug due to new message syntax.
	(f90-mode): Fix setup of variable font-lock-defaults.
	(f90-looking-at-program-block-start): Small error in detecting of
	function start.  Made the detection of subroutine start more flexible.
	(f90-mode-map): Much nicer menu with sections and added submenus
	for highlighting and keyword case change.
	Also added 'menu-enable' properties for region-based commands.
	(f90-imenu-generic-expression): Fix expression to find
	procedures, modules and types.
	(f90-add-imenu-menu): New function for adding imenu menu to the menubar.

1996-08-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-kill-ftp-process): Handle buffer name as arg.

See ChangeLog.6 for earlier changes.

;; Local Variables:
;; coding: utf-8
;; End:

	Copyright (C) 1997-1998, 2001-2012  Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.
