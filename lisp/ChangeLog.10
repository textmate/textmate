2003-07-03  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-menus.el (cc-imenu-init): Do not set
	`imenu-create-index-function' if the second argument is left
	out.  This bug broke the imenu support in C, C++ and Java modes.

	* progmodes/cc-engine.el, progmodes/cc-align.el
	(c-add-stmt-syntax, c-lineup-arglist)
	(c-lineup-arglist-close-under-paren): Fixes to cope with
	special brace lists in Pike.

2003-07-03  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (awk-mode): Call c-awk-after-change to
	ensure syntax-table props at loading.

	* progmodes/cc-fonts.el: Put (cc-require-when-compile 'cc-awk)
	to eliminate compile-time errors.

	* progmodes/cc-awk.el, progmodes/cc-engine.el: Add code to
	analyze AWK top-level forms properly (c-guess-basic-syntax
	CASE 5P), c-awk-backward-syntactic-ws.

2003-07-03  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fix.el: cc-mode-19.el has been renamed to
	progmodes/cc-fix.el since it now contains compatibility stuff
	for later versions than (X)Emacs 19.

	* progmodes/cc-langs.el (c-paren-nontype-kwds): New language constant.

	(c-other-decl-kwds, c-postfix-decl-spec-kwds): Add compiler
	specific declspec keywords: __attribute__ for gcc and
	__declspec for msvc.

	* progmodes/cc-fonts.el (c-font-lock-declarations)
	(c-complex-decl-matchers): Support specifiers in a couple more
	contexts to cope with msvc '__declspec'.

	* progmodes/cc-engine.el (c-forward-keyword-clause):
	Support `c-paren-nontype-kwds'.

	* progmodes/cc-langs.el (c-primary-expr-regexp): Don't match a
	bare period as a float.

	* progmodes/cc-bytecomp.el (cc-bytecomp-setup-environment):
	Do not cover functions that have been bound.

	(cc-external-require): New macro to use for requiring external
	packages, to handle the environment correctly.

	* progmodes/cc-defs.el, progmodes/cc-fix.el,
	progmodes/cc-fonts.el, progmodes/cc-mode.el: Replaced external
	require's with `cc-external-require'.

	* progmodes/cc-engine.el (c-beginning-of-member-init-list)
	(c-guess-basic-syntax): Fixes in handling of bitfields.

	* progmodes/cc-langs.el (comment-end): Put a space in front of
	the comment ender in C, as it was before the move from cc-mode.el.

2003-07-03  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el: Do not load progmodes/cc-awk.elc or
	awk-font-lock-keywords unless there is an AWK Mode buffer.

	* progmodes/cc-awk.el: New file that implements AWK support,
	superseding the old separate derived mode in awk-mode.el.

	* progmodes/cc-vars.el, cc-mode-19.el, progmodes/cc-langs.el,
	* progmodes/cc-mode.el, progmodes/cc-defs.el,
	* progmodes/cc-engine.el, progmodes/cc-fonts.el:
	Changes for the new AWK support.

2003-07-03  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, progmodes/cc-langs.el
	(c-decl-block-key, c-search-uplist-for-classkey): Check that
	the modifier is followed by "{" in Pike before considering it
	to start a class-like block.

	* progmodes/cc-mode.el (c-initialize-cc-mode): Add some
	compatibility to make this function behave somewhat more as
	documented for derived modes.  It's still not enough to make
	the old AWK mode behave reasonably, but it's been like this a
	long time now so fixing it more might cause trouble
	elsewhere. :P

	* progmodes/cc-fonts.el (c-remove-font-lock-face): New macro
	to remove a font lock face properly (especially in XEmacs).

	* progmodes/cc-bytecomp.el (cc-bytecomp-obsolete-fun):
	Add the same kludge as in `cc-bytecomp-obsolete-var' to avoid a
	confused compiler warning.

	* progmodes/cc-engine.el (c-forward-type): Fix a bug in the
	handling of concatenated types when the component types are known.

	* progmodes/cc-fonts.el (c-constant-face-name): Add face name variable
	to avoid the use of `font-lock-constant-face' for constants in
	emacsen that doesn't have it.

	* progmodes/cc-styles.el, progmodes/cc-vars.el,
	* progmodes/cc-cmds.el: Fixes for the syntactic symbols for
	module and composition blocks.

	* progmodes/cc-mode.el (c-basic-common-init):
	Use `open-paren-in-column-0-is-defun-start' if it exists and works.

	* progmodes/cc-vars.el (c-emacs-features): Add `col-0-paren'
	to detect when `open-paren-in-column-0-is-defun-start' exists
	and actually works.

	* progmodes/cc-vars.el, progmodes/cc-langs.el
	(c-primitive-type-kwds, c-font-lock-extra-types): "complex"
	and "imaginary" aren't keywords in C99, only macros that
	expand to the keywords "_Complex" and "_Imaginary", so make
	the former a bit less hardcoded by putting it on
	`c-font-lock-extra-types' instead.  There are also "bool" and
	"_Bool" that work the same way.
	(c-constant-kwds): "false" and "true" are standard constant
	macros in C99.

	* progmodes/cc-menus.el, progmodes/cc-langs.el,
	* progmodes/cc-engine.el, progmodes/cc-fonts.el,
	* progmodes/cc-cmds.el: Fixed various regexps to use POSIX char
	classes when that is supported.

	* progmodes/cc-defs.el (c-alpha, c-alnum, c-digit, c-upper, c-lower):
	New constants to make it easier to create regexps
	that use POSIX char classes in emacsen that support them.

	* progmodes/cc-vars.el (c-emacs-features): Detect in the
	regexp engine understands POSIX char classes.

	* progmodes/cc-mode.el (c-after-change): Add kludge for bug
	where this function sometimes gets positions outside the
	buffer range.

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Better handling of parentheses in unexpected places.

	* progmodes/cc-engine.el (c-forward-<>-arglist-recur): Fix a
	regexp match order problem that could cause empty template
	args on the form "<>" to be missed.

	* progmodes/cc-engine.el (c-parse-state): Add kludge to
	avoid an infinite loop when Emacs' open-paren-in-column-zero
	rule kicks in and causes the sexp functions to misbehave.

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Fix bug when C++-like code is encountered in non-C++ mode.

	* progmodes/cc-defs.el (c-make-keywords-re): Add option to
	specify the language to look up `c-nonsymbol-key' in.

	* progmodes/cc-cmds.el, progmodes/cc-engine.el
	(c-auto-newline-analysis): New dynamically bound variable to
	turn off the topmost-intro-cont/statement-cont kludge for
	brace lists during the analysis for the auto newline feature.
	This fixes some cases where the setting for `brace-list-open'
	on `c-hanging-braces-alist' didn't have any effect.

	* progmodes/cc-langs.el (c-literal-start-regexp): Yet another
	language variable.

	* progmodes/cc-fonts.el (c-font-lock-doc-comments)
	(c-find-invalid-doc-markup, javadoc-font-lock-keywords):
	Fix fontification of the markup in Javadoc comments.

	* progmodes/cc-engine.el: Fixes in face handling to cope with
	doc comments.
	(c-find-decl-spots): More failsafe skipping of comments and
	strings that only have been partially fontified.

	* progmodes/cc-defs.el (c-got-face-at): New subst to test
	faces at positions easier.

	* progmodes/cc-defs.el (c-safe-scan-lists): New wrapper macro
	to avoid the warnings with too many args to `scan-lists' in Emacs.

	* progmodes/cc-engine.el (c-syntactic-skip-backward):
	New function to make syntactic searches in the backward direction
	easier.

	(c-beginning-of-statement-1): Optimize skipping over large paren
	sexps somewhat.

	(c-safe-position): Remove the odd macro handling which was
	centered around the point instead of the passed position.

	* progmodes/cc-engine.el (c-in-knr-argdecl): Do not trip up on
	initialization expressions.

	* progmodes/cc-align.el (c-lineup-arglist)
	(c-lineup-close-paren, c-lineup-arglist-close-under-paren):
	Tune the "macro block" heuristics to work better in nested
	arglist situations.

	* progmodes/cc-styles.el (c-set-offset): Don't find a default
	syntactic element through syntactic analysis if called outside
	a CC Mode buffer.

	* progmodes/cc-mode.el (c-basic-common-init):
	Install `c-fill-paragraph' on `fill-paragraph-function'.
	Although it's not the normal way to call it in a CC Mode buffer it
	makes a direct call to `fill-paragraph' work better.

	* progmodes/cc-vars.el, progmodes/cc-mode.el
	(c-require-final-newline): Make this variable an alist to
	specify a value for each language.  The default value causes
	`require-final-newline' to be set to t only in languages where
	the standard requires a final newline.

	* progmodes/cc-mode.el, progmodes/cc-vars.el
	(c-require-final-newline): Add a variable to make the
	initialization of `require-final-newline' more configurable.

	* progmodes/cc-vars.el (c-mode-common-hook): Do not change the
	format string to "CC Mode Common Hook" since that causes
	confusion (although it is a more accurate name).

	* progmodes/cc-fonts.el (javadoc-font-lock-keywords)
	(autodoc-font-lock-keywords): Support for Javadoc and Pike
	Autodoc doc comments.

	* progmodes/cc-vars.el (c-doc-comment-style): New variable to
	control the fontification of documentation comments on top of
	the normal mode font lock.

	* progmodes/cc-langs.el, progmodes/cc-fonts.el
	(c-primary-expr-regexp, c-font-lock-declarations): Avoid false
	recognition of parens as casts when they are followed by an
	operator that is both prefix and infix.

	* progmodes/cc-cmds.el (c-guess-fill-prefix): Tune the
	heuristics of when to use `c-block-comment-prefix' for an
	unclosed block comment.

	* progmodes/cc-engine.el, progmodes/cc-langs.el
	(c-nonsymbol-sexp-kwds, c-forward-keyword-clause):
	Handle keywords like "extern" that can be followed by e.g. a string
	literal.

	* progmodes/cc-defs.el (c-make-keywords-re): Make a regexp
	correctly with one submatch when adorn is set and the list is empty.

	* progmodes/cc-fonts.el (c-font-lock-declarations): Fix a
	search that could go far past the relevant region and cause
	slowness.  Do not limit the declaration detection to the
	fontified region since that can cause misfontification in
	multiline declarations.

	* progmodes/cc-engine.el (c-find-decl-spots): Add limit
	argument to handle declarations spanning the fontification
	limit better.

	* progmodes/cc-engine.el (c-in-literal, c-literal-limits)
	(c-literal-limits-fast, c-beginning-of-inheritance-list):
	Use the paren cache instead of the impaired ad hoc in
	`beginning-of-defun', so that these functions doesn't trip up
	on "{" in the first column inside strings or comments.

	* progmodes/cc-vars.el (c-hanging-braces-alist):
	Add `statement-cont' and made it auto newline free by default.

	* progmodes/cc-cmds.el (c-electric-brace):
	Add `statement-cont' to the list of syntactic symbols to consider
	for auto newlines since it can be used for in-statement brace lists.

	* progmodes/cc-vars.el (c-emacs-features): There's no need to
	have this constant autoloaded.

	* progmodes/cc-fonts.el (c-font-lock-declarations):
	Use `c-recognize-typeless-decls' to avoid fontifying some macro
	constructs as declarations in languages where a preceding type
	is mandatory.

	* progmodes/cc-langs.el (c-recognize-typeless-decls):
	New language variable.

	* progmodes/cc-align.el (c-lineup-close-paren):
	Use `c-syntactic-eol' when checking if the open paren ends its line.

	* progmodes/cc-langs.el (c-syntactic-eol): Handle a line
	continuation backslash.

	* progmodes/cc-align.el (c-snug-do-while): Compatibility fix
	for changed structure in `c-syntactic-context'.

	* progmodes/cc-engine.el (c-parse-state): Filter angle bracket
	arglist parens in a better way than disabling the syntax table
	properties completely.

	* progmodes/cc-fonts.el (c-cpp-matchers): Handle line
	continuations in cpp expressions.  Do not fontify symbols after
	#ifdef etc as variables since that isn't consistent with how
	the face is used elsewhere (i.e. only for the definition of
	the symbol).

	* progmodes/cc-mode.el: Add autoload directives for the
	interface functions in cc-langs.

	* progmodes/cc-fonts.el (c-font-lock-declarations): Add a
	property to handle refontication in multiline declaration
	arglists better.
	(c-font-lock-<>-arglists): Fix to handle recursive template
	arglists better.  (As a side effect this will make
	fontification work better in older emacsen too.)

	* progmodes/cc-engine.el (c-forward-<>-arglist)
	(c-remove-<>-arglist-properties): Use a common text property
	`c-type' for all sorts of CC Mode char classification, to
	avoid cases when then same char is given conflicting types.
	(c-forward-<>-arglist): New reparse argument to control that
	aspect explicitly.
	(c-forward-name, c-forward-type): Changes in the handling of
	recursive template arglists.  Fixes to cope with the new 'known
	type classification.

	* progmodes/cc-mode.el (c-basic-common-init): Add the new
	char property `c-type' to `text-property-default-nonsticky'.

	* progmodes/cc-defs.el (c-put-char-property)
	(c-get-char-property, c-clear-char-property)
	(c-clear-char-properties): Generalize `c-put-char-syntax' and
	`c-get-char-syntax' to handle any property.

	* progmodes/cc-bytecomp.el (cc-bytecomp-defun): Fix bug that
	caused existing function definitions to be overridden by
	phonies when the bytecomp environment is restored.

	* progmodes/cc-cmds.el (c-mask-paragraph): Masking is
	necessary in normal code too to avoid getting a fill prefix
	from a nearby comment.  Change the name from `c-mask-comment'
	to a more accurate one.

	* progmodes/cc-defs.el, progmodes/cc-mode.el: Change the
	auto-load-alist strategy to not add entries on package load,
	to be defensive in the case that autoloads are updated in
	older emacsen.  The bug that would occur in that case would
	probably be rather nasty for the average user.

	* progmodes/cc-fonts.el (c-font-lock-declarations):
	Fine tuning of the decision tree that tells declarations from
	expressions to produce better results in some ambiguous cases.

	* progmodes/cc-fonts.el (c-font-lock-syntactic-face-function):
	Remove since it doesn't give the control we want.
	(c-font-lock-invalid-string): Replacement for
	`c-font-lock-syntactic-face-function' that puts the error face
	on the string opener only, to avoid the annoying excessive use
	of the error face while a string literal is being written.
	(c-basic-matchers-before): Use `c-font-lock-invalid-string'.

	* progmodes/cc-engine.el (c-string-syntax)
	(c-string-limit-regexp): Add constants to use when handling
	string limits, since not all old emacsen react well to the "|"
	syntax class.

	(c-literal-limits, c-literal-limits-fast, c-literal-type):
	Use `c-string-syntax' and `c-string-limit-regexp'.  Replace some
	hardcoded comment start regexps with `c-comment-start-regexp'.

	* progmodes/cc-mode.el: Added an association for pike-mode on
	`interpreter-mode-alist'.

	* progmodes/cc-mode.el: Add the `auto-mode-alist' entries to
	the end instead of the start of the list, to avoid overriding
	user additions that are made before this file is loaded when
	the entries don't correspond to any already on `auto-mode-alist'.
	This is done through the third append argument to
	`add-to-alist'.  That doesn't exist in older (X)Emacsen, so
	the function is advised in cc-defs.  However, that advice
	doesn't help if the autoloads are updated in an old (X)Emacs
	with this version of CC Mode, but I believe it's unlikely that
	anyone does that when CC Mode isn't distributed with it.

	* progmodes/cc-defs.el (add-to-list): Add advice to get the
	optional third append argument in older (X)Emacsen.

	* progmodes/cc-langs.el (c-keywords-obarray): Kludge for
	strange bug in Emacs that gives so odd errors that I frankly
	don't even muster to begin trying to narrow it down.
	If someone is so inclined, restore the commented code, byte
	compile, and try to open a C++ file or something in font lock mode.

	* progmodes/cc-langs.el: Update the IDL support from the
	specs.  This also adds the keywords for the variants PSDL and
	CIDL.  (This is mostly done from reading the grammars only;
	very lightly tested.)

	* progmodes/cc-langs.el (c-type-list-kwds): Add "new" in Java.

	* progmodes/cc-fonts.el: Make sure that
	`parse-sexp-lookup-properties' is properly insulated from
	clobbering by the font-lock package at all relevant entry points.

	* progmodes/cc-langs.el (c-opt-after-id-concat-key):
	New language constant to make the recognition of identifier
	qualifiers more flexible.  Recognize the identifier before
	".*" as a qualifier in Java.
	(c-identifier-key): Recognize "::*" inside identifiers in C++.
	Recognize identifiers ending with ".*" in Java for the sake of
	import directives.
	(c-type-list-kwds, c-ref-list-kwds): Recognize "import" and
	"package" declarations in Java.

	* progmodes/cc-vars.el (c-doc-face, c-doc-marker-face)
	(c-doc-markup-face): Remove since they aren't used (and
	probably won't be).

	* progmodes/cc-langs.el (c-ref-list-kwds): New language
	constant to specify keywords followed by references.
	(c-last-identifier-range): New variable to avoid going back to
	search for the identifier to font lock after a call to
	`c-forward-name'.
	(c-type-prefix-kwds, c-type-list-kwds): Fix classification of
	"@interface" etc in Objective-C.

	* progmodes/cc-engine.el (c-forward-keyword-clause):
	Fix handling of keyword prefixes in `c-type-list-kwds' and
	`c-colon-type-list-kwds' clauses.
	(c-keyword-sym, c-keyword-member): New functions to lookup and
	categorize keywords.
	(c-forward-keyword-clause): New function to move over a keyword
	and its associated clause according to `c-<>-arglist-kwds' etc.

	* progmodes/cc-langs.el (c-typeless-decl-kwds)
	(c-type-list-kwds, c-colon-type-list-kwds)
	(c-colon-type-list-re, c-paren-type-kwds): New language
	constants and variables to generalize the recognition of
	various language constructs.
	(c-keywords): Did away with the list of `*-kwds' constants.
	It's now built through macro expansion.
	(c-keywords-obarray): New language variable which contains each
	keyword as a symbol, to make fast reverse lookup of keywords to
	the `*-kwds' lists they come from.

	* progmodes/cc-defs.el (c-lang-defconst-eval-immediately):
	Add macro to be able to do direct evaluation in
	`c-lang-defconst' forms.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	Fix a bug which could cause the point to end up outside the
	containing sexp if PAREN-LEVEL was used.

	* progmodes/cc-engine.el, progmodes/cc-fonts.el,
	progmodes/cc-langs.el: Generalize the C++ template arglist
	support to handle angle bracket arglists in any language.
	(c-recognize-<>-arglists, c-<>-arglist-kwds)
	(c-opt-<>-arglist-start): New language variables to control
	angle bracket arglists.
	(c-opt-type-suffix-key): Use `c-recognize-<>-arglists' in
	Objective-C instead of matching a protocol reference list as a
	type suffix.

	* progmodes/cc-align.el (c-gnu-impose-minimum): Fix a missing
	`save-excursion' that caused the point to jump around.

	* progmodes/cc-mode.el, progmodes/cc-menus.el (objc-mode)
	(cc-imenu-init): Fix initialization bug that has made the
	Objective-C support inoperational since 5.26.
	(cc-imenu-objc-generic-expression): Update submatch indices
	due to changes in `cc-imenu-c++-generic-expression'.
	(cc-imenu-objc-function): Don't add an empty "C" menu since
	imenu doesn't like that.

	* progmodes/cc-align.el (c-lineup-arglist)
	(c-lineup-arglist-close-under-paren, c-lineup-close-paren):
	Add DWIM to the functions that line up at or after the
	arglist open paren to avoid that if there are brace blocks
	inside, e.g. when a macro contains a code block.

	* progmodes/cc-vars.el (objc-font-lock-extra-types):
	Change default to treat identifiers starting with capital letters as
	types, according to Objective-C naming conventions.  The types
	previously on the list is part of the language and therefore
	on `c-primitive-type-kwds' instead.

	* progmodes/cc-fonts.el: Fix font locking in Objective-C.
	Be more careful about returning nil from functions used
	directly as font-lock matchers.

	* progmodes/cc-mode.el (c-font-lock-init): Make the syntax
	table modification element of `font-lock-defaults'
	parameterized over the languages.

	* progmodes/cc-langs.el: Update the Objective-C constants
	according to the language spec.  The "@" chars that start
	directives are now considered part of the keywords to make
	things easier.

	* progmodes/cc-defs.el (c-(up|down)-list-(forward|backward)):
	Make the position optional and added docstrings.
	(c-go-(up|down)-list-(forward|backward)): Add variants of the
	above that move point and return successfulness instead.

	* progmodes/cc-fonts.el (c-font-lock-<>-arglists):
	New function to fontify all occurrences of template arglists in C++.

	* progmodes/cc-engine.el (c-disallow-comma-in-<>-arglists):
	New variable to be able to avoid false recognition of template
	arglists in some cases.

	* progmodes/cc-fonts.el, progmodes/cc-langs.el
	(c-decl-prefix-re, c-font-lock-declarations): Match template
	open brackets to get a declaration in the first template argument.
	(c-complex-decl-matchers): Fontify the second type in a "class
	X = Y" expression in C++.

	* progmodes/cc-engine.el (c-forward-<>-arglist): Break out the
	recursive part to a new function to improve efficiency when a
	nested template arglist search turns out to be futile.

	* progmodes/cc-menus.el (cc-imenu-java-generic-expression):
	Improve to avoid false matches on e.g. "else if (foo)".

	* progmodes/cc-engine.el (c-forward-token-2)
	(c-backward-token-2): New functions that work like the -1
	variants but that handle multicharacter operator tokens.

	* progmodes/cc-engine.el (c-inside-bracelist-p)
	(c-guess-basic-syntax): Do away with the hardcoded regexps to
	recognize "typedef" declaration prefixes, "extern" and
	"namespace" blocks, "enum"-style brace list declarations and
	Java-style array initializers with "new".

	* progmodes/cc-langs.el (c-brace-list-decl-kwds)
	(c-brace-list-key, c-inexpr-brace-list-kwds)
	(c-opt-inexpr-brace-list-key): New language constants and
	variables to parameterize some more of the hardcoded regexps
	in cc-engine.

	* progmodes/cc-align.el (c-lineup-cascaded-calls): Do not
	allow cascaded call lists containing both "->" and ".".

	* progmodes/cc-align.el, progmodes/cc-cmds.el,
	progmodes/cc-defs.el, progmodes/cc-engine.el,
	progmodes/cc-fonts.el, progmodes/cc-langs.el,
	progmodes/cc-mode.el, progmodes/cc-styles.el: New language
	variable system to make it easier to set up optimized language
	variables and to extend them in third party derived modes.
	cc-langs is no longer required at runtime.

	* progmodes/cc-mode.el (c-basic-common-init): No longer
	initializes the language variables.  It's necessary that the
	caller does that directly since the evaluated values for them
	now get compiled in directly.
	(c-font-lock-init, c-common-init): Separate the font-lock
	initialization from `c-common-init'.

	* progmodes/cc-mode.el (c-define-abbrev-table): Do not
	override an existing abbrev table.
	(c-Java-defun-prompt-regexp): Move here from cc-langs since
	cc-langs isn't always loaded at runtime.

	* progmodes/cc-langs.el (c-make-init-lang-vars-fun)
	(c-init-language-vars): Change to allow language variable
	initialization from derived modes.
	(c-mode-menu): New language variable for the mode menu.
	(c-make-mode-syntax-table, c-mode-syntax-table)
	(make-c++-template-syntax-table): New language variables for syntax
	tables.  The code that initializes them has been moved to cc-mode
	to make it possible to avoid loading cc-langs at runtime.

	* progmodes/cc-engine.el, progmodes/cc-langs.el
	(c-hungry-delete-key, c-auto-newline, c-auto-hungry-string):
	Move these state variables from cc-langs to cc-engine to make
	it possible to avoid loading cc-langs at runtime.

	* progmodes/cc-defs.el (c-lang-defconst, c-lang-const):
	Move from cc-langs and rewritten to make the language constant
	system usable from derived modes.

	(c-add-language): New function intended for use from derived modes
	that add new C-like languages.

	* progmodes/cc-defs.el, progmodes/cc-vars.el
	(c-buffer-is-cc-mode): Move from cc-vars to cc-defs to define
	it during compilation.

	* progmodes/cc-bytecomp.el (cc-require-when-compile):
	New support macro for compile time `require's.

	* progmodes/cc-defs.el, progmodes/cc-mode.el (c-version):
	Move from cc-mode to cc-defs to make it accessible to the
	other components.

	* progmodes/cc-engine.el (c-forward-token-1, c-backward-token-1):
	Compatibility fix for emacsen that doesn't understand generic
	string delimiters.

	* progmodes/cc-vars.el (c-emacs-features): Add detection of
	generic string and comment delimiters.

	* progmodes/cc-defs.el, progmodes/cc-langs.el
	(c-make-keywords-re): Change interface to make it more extensible.

	* progmodes/cc-langs.el, progmodes/cc-defs.el (c-regexp-opt)
	(c-regexp-opt-depth, c-make-keywords-re): Move from cc-langs
	to cc-defs since they are generally useful.

	* progmodes/cc-bytecomp.el, progmodes/cc-defs.el
	(cc-eval-when-compile): Move from cc-bytecomp to cc-defs to
	allow use at runtime.

	* progmodes/cc-bytecomp.el (cc-eval-when-compile):
	Workaround for a bug with nested `eval-when-compile' in XEmacs 21.

	* progmodes/cc-mode.el: Added autoloaded forms to install the
	appropriate file suffixes on `auto-mode-alist'.  Necessary in
	XEmacs 21.5, and it can be useful elsewhere too.

	* progmodes/cc-align.el (c-lineup-cascaded-calls): Handle "."
	too, for use in Java.

	* progmodes/cc-engine.el (c-forward-sws, c-backward-sws):
	Do not handle cpp directives in languages that doesn't have any.

	* progmodes/cc-langs.el (c-operators): Add a high level description
	of all operators, along with their precedence and associativity.

	* progmodes/cc-align.el (c-lineup-multi-inher): Fix bug
	where the position of the point and not the beginning of the
	line was used to calculate the indentation.

	* progmodes/cc-defs.el, progmodes/cc-engine.el
	(c-backward-single-comment, c-backward-comments): Add kludge
	for the bug in `forward-comment' in most (X)Emacs versions
	where it moves back over the "*/" of a block comment if
	there's no matching "/*".  This has become more important now
	since it can cause incorrect caching by `c-backward-sws'.

	* progmodes/cc-cmds.el (c-hungry-backspace)
	(c-hungry-delete-forward): New functions to do hungry deletion
	regardless of hungry-delete mode.  Contributed by Kevin Ryde.

	* progmodes/cc-engine.el (c-forward-sws, c-backward-sws)
	(c-invalidate-sws-region): Use text properties to cache regions
	with complex syntactic whitespace.  This helps a lot in
	improving responsiveness when there are lots of comments and
	cpp directives before point.

	* progmodes/cc-guess.el, progmodes/cc-langs.el,
	progmodes/cc-menus.el, progmodes/cc-mode.el,
	progmodes/cc-styles.el, progmodes/cc-vars.el,
	progmodes/cc-engine.el, progmodes/cc-fonts.el,
	progmodes/cc-cmds.el, progmodes/cc-defs.el: Introduce a
	classification of functions into those that make "hidden
	buffer changes" and those who don't.  This is prompted by the
	increasing use of text properties for various things, to
	correctly cover the silly buffer modifications that is caused
	by text property changes.
	(c-save-buffer-state): New macro that's put around any code that
	can manipulate text properties.

	* progmodes/cc-mode.el (c-basic-common-init):
	Setup `text-property-default-nonsticky' to avoid messing with the
	rear-nonsticky property on each character in Emacs 21.

	* progmodes/cc-defs.el (c-clear-char-syntax, c-put-char-syntax):
	Macros that sets and removes the
	syntax-table property on a single character and makes the
	property nonsticky in both directions in a suitable way for
	each (X)Emacs flavor.

	* progmodes/cc-vars.el, progmodes/cc-defs.el,
	* progmodes/cc-engine.el, progmodes/cc-mode.el:
	Use `lookup-syntax-properties' in XEmacs to control whether the
	syntax-table property has any effect or not.
	(c-parse-sexp-lookup-properties): New macro that expands to either
	`parse-sexp-lookup-properties' or `lookup-syntax-properties'.

	* progmodes/cc-defs.el, progmodes/cc-engine.el,
	progmodes/cc-fonts.el: Put the faces into the buffer in the
	same way as the font-lock package does.  This fixes a
	compatibility problem with XEmacs which sets an extra
	font-lock property.

	* progmodes/cc-fonts.el (c-put-font-lock-face): A macro that
	finds out the right way to put font lock faces at compile
	time.  We're definitely not byte code portable between Emacs
	and XEmacs now.

	* progmodes/cc-engine.el (c-forward-sws, c-backward-sws):
	Implement a cache for the last large skipped over syntactic
	whitespace.  This also has most effect after many macros.

	* progmodes/cc-engine.el, progmodes/cc-defs.el
	(c-forward-syntactic-ws, c-backward-syntactic-ws): Utilize the
	limit better when one is passed.  These are now macros to
	avoid a little overhead when no limit is given.
	(c-forward-sws, c-backward-sws): New functions called by the
	macros above to do the unbounded search.

	* progmodes/cc-fonts.el (c-font-lock-declarations):
	Implement a cache for the first backward search for a
	preceding `c-decl-prefix-re' match.  This typically speeds up
	interactive refontification a lot on the top level of macro
	heavy header files.

	* progmodes/cc-vars.el (c-emacs-features): Add check for
	syntax text properties.

	* progmodes/cc-mode.el (c-basic-common-init): Turn on
	`parse-sexp-lookup-properties' if it's supported.  Define the
	variable in any case since it's used at runtime to check on this.

	* progmodes/cc-langs.el (c-identifier-key): Support C++
	destructor names.
	(c-identifier-start, c-op-token-regexp, c-type-modifier-kwds)
	(c-opt-type-modifier-key, c-opt-type-component-key)
	(c-typedef-specifier-kwds, c-typedef-specifier-key)
	(c-paren-stmt-kwds, c-paren-stmt-key, c-syntactic-ws-start):
	A bunch of new language constants and variables to support the
	improved handling of names and types.

	* progmodes/cc-fonts.el (c-font-lock-declarators)
	(c-font-lock-declarations): Handle C++ template declarations
	and template references.  Fontify complex types and names more
	accurately by delegating it to `c-forward-type' and
	`c-forward-name'.  Fontify the identifiers in typedef
	declarations as types.

	* progmodes/cc-engine.el (c-forward-<>-arglist): New function
	to move forward over a C++ template arglist.  It also marks
	the '<' and '>' chars with paren syntax using the syntax-table
	property, to speed up later calls in emacsen that support
	syntax text properties (Emacs >= 20 and (undocumented) XEmacs 21).
	This also has the very interesting effect that if font locking
	is used with decoration level 3 or higher in these emacsen
	then template arglists will behave just like paren sexps with
	the various sexp movement commands.
	(c-forward-name): New function to move over a name.  Simple in
	most languages except C++ where a name can contain template
	arglists and therefore almost arbitrary expressions.
	(c-on-identifier): Fix for Pike operator identifiers.
	(c-simple-skip-symbol-backward, c-syntactic-content)
	(c-remove-<>-paren-properties): New helper functions.

	* progmodes/cc-defs.el (c-clear-char-syntax)
	(c-mark-paren-open, c-mark-paren-close): New support functions
	to handle syntactic properties on C++ template arglist brackets.
	(c-put-type-face, c-put-reference-face): Helpers to put faces on
	regions, since there are a bit of that inside `c-forward-name' etc
	in progmodes/cc-engine.el.

	* progmodes/cc-engine.el, progmodes/cc-fonts.el,
	* progmodes/cc-langs.el: Fix the names on a number of regexp
	language variables to conform to the nomenclature and
	shortened some names.

	* progmodes/cc-align.el, progmodes/cc-cmds.el,
	* progmodes/cc-fonts.el, progmodes/cc-engine.el
	(c-syntactic-re-search-forward): Remove the COUNT argument
	since it's never used.  Add an argument to tell which
	subexpression whose end should be tested for syntactic
	relevance.  Using this also removes some optimizations, so
	that it's possible to use a look behind subexpression that
	matches the end of a literal or a close paren when PAREN-LEVEL
	is used.

	(c-guess-continued-construct): Don't match <<= or >>= for the
	stream-op syntactic element.

	* progmodes/cc-defs.el (c-paren-re, c-identifier-re):
	Remove these helper macros since better and more correct tools are
	now available in progmodes/cc-langs.el.

	* progmodes/cc-align.el (c-lineup-string-cont): New lineup
	function to line up string literals that will be concatenated.

	* progmodes/cc-langs.el (c-populate-syntax-table):
	XEmacs classifies the hard space character as a symbol character
	but it's better to let it be in the punctuation class so that it's
	always highlighted with the inverted invalid face.  It can
	perhaps be argued that that character is allowed in
	identifiers in some languages (haven't checked), but using it
	would still be extremely confusing.

	* progmodes/cc-engine.el (c-beginning-of-statement-1): Fix a
	case when a labeled substatement caused incorrect association
	of the following continuation clause.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	Handle the case when the syntactic match position is in the
	middle of a comment starter.

	(c-guess-continued-construct): Analyze the "K&R region" of a
	function nested inside a function as func-decl-cont and not
	statement-cont.  New case E.  Also clean up case C (stream-op
	recognition) a bit.

	* progmodes/cc-engine.el (c-parse-state, c-check-state-cache):
	Move the check on `c-state-cache-start' from
	`c-check-state-cache' to `c-parse-state' so that the state
	cache isn't zapped if `c-check-state-cache' but not
	`c-parse-state' is called during a temporary narrowing.
	This fixes a performance problem that could occur when
	`fill-paragraph' is used in font lock mode on a comment at the
	end of a large class or function.
	(c-state-cache-start): Fix buffer localness.

	* progmodes/cc-langs.el: Updates from the C99 standard (or
	actually from the latest web accessible draft of it).

	* progmodes/cc-langs.el: Update the keywords and operator
	tokens from the latest C++ and Java standards.  Some other
	multichar token corrections.

	* progmodes/cc-cmds.el, progmodes/cc-engine.el,
	progmodes/cc-vars.el (c-syntactic-context)
	(c-syntactic-element): Do not bind any values to these
	variables globally since they should always be dynamically
	bound.  This makes it much easier to debug cases when they've
	gotten global values somehow.

	* progmodes/cc-langs.el (c-regexp-opt): Fix to work around the
	non-greedy behavior that the regexp engine sometimes exposes.
	This bug only shows in (X)Emacs 19 where there's no regexp-opt package.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	Add a feature to filter out matches in the middle of tokens.
	Changed the comment to a docstring since I consider this
	function generally useful.

	* progmodes/cc-defs.el (c-mode-symbol): Break out a part of
	`c-mode-var'.

	* progmodes/cc-align.el (c-lineup-cascaded-calls)
	(c-lineup-gcc-asm-reg): Cope with that `c-most-enclosing-brace'
	might return nil.

	* progmodes/cc-engine.el (c-found-types, c-clear-found-types)
	(c-add-type, c-check-type, c-add-complex-type)
	(c-list-found-types, c-forward-type): Add a sort of symbol
	table for types: If a name is recognized as a type in a
	declaration it's added in an obarray to be able to recognize
	it in other ambiguous declarations.
	(c-remove-ws): New helper function to canonicalize fully
	qualified identifiers for `c-found-types'.

	* progmodes/cc-defs.el (c-mode-var): New defsubst to access
	mode prefixed variables uniformly.

	* progmodes/cc-align.el (c-lineup-arglist-close-under-paren):
	Work correctly with nested arglist-cont-nonempty symbols.
	(c-lineup-arglist-operators): New lineup function to line up infix
	operators under the open paren of the surrounding sexp.

	* progmodes/cc-engine.el (c-forward-syntactic-ws): Fix a bug
	that could cause an infinite loop if something that looks like
	a macro begins in the middle of a line.
	(c-parse-state): Fix a bug that could cause `c-state-cache'
	to contain two conses in sequence when there's an unbalanced
	open paren in a macro.

	* progmodes/cc-defs.el (c-face-name-p): A defsubst to
	recognize the name of a face in a way that works also in XEmacs.

	* progmodes/cc-engine.el (c-forward-type): New function to
	move past a type spec.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	Fix behavior when the limit is reached inside a comment,
	string, or a macro.

	* progmodes/cc-align.el, progmodes/cc-cmds.el,
	* progmodes/cc-engine.el (c-forward-single-comment)
	(c-forward-comments, c-backward-single-comment, c-backward-comments):
	New replacements for `c-forward-comment' that wraps `forward-comment'
	more efficiently in each of the four different cases it's actually
	used.  These replacements also treats line continuations as whitespace.
	(c-forward-comment): Remove.  The four different cases above
	are basically different, so it's better to make them into
	separate functions than choose between them at runtime using
	the argument.

	* progmodes/cc-align.el (c-gnu-impose-minimum): Fix bug due
	to the new placement of cpp-macro and comment-intro in the
	syntactic context, as pointed out by Kevin Ryde.  Change the
	method that decides whether point is inside a top-level
	construct to one that doesn't depend on the set of syntactic
	elements so much.

	* progmodes/cc-defs.el (c-point): Use the functions
	`line-beginning-position' and `line-end-position' in emacsen
	that have them (currently Emacs 20 and later).

	* progmodes/cc-cmds.el (c-mask-comment): Fix a bug that
	sometimes caused code after a closed block comment to be taken
	into account when the fill prefix is calculated.

	* progmodes/cc-align.el (c-lineup-arglist, c-lineup-argcont)
	(c-lineup-math, c-lineup-cascaded-calls, c-lineup-gcc-asm-reg):
	Fixes to cope correctly with nested arglists for the lineups
	that can be used with arglist-cont-nonempty.

	* progmodes/cc-engine.el (c-add-stmt-syntax, c-guess-basic-syntax):
	Change the anchor position of
	arglist-cont-nonempty and arglist-close so that a relative
	indentation like + can be used with consistent results.
	Prior to this, the indentation engine more or less assumed that
	arglist-cont-nonempty always used `c-lineup-arglist'.
	Those two syntax symbols also get the opening paren as an extra
	position, to make it possible for `c-lineup-arglist' to
	continue to do a proper job.

	* progmodes/cc-engine.el (c-get-syntactic-indentation):
	A vector with an absolute indentation column now only overrides
	the indentation for surrounding structures, i.e. those whose
	syntactic elements are earlier in the `c-syntactic-context'
	list, but not nested ones.  This so that
	e.g. `c-lineup-arglist' can reliably line up with the first
	argument but still allow relative indentation changes for
	nested things, e.g. the arglist-close of a nested argument
	list.  This change means that the order in
	`c-syntactic-context' has become more essential.
	(c-guess-basic-syntax): Changes to make the nesting order of the
	returned syntax list correct.

	Compatibility note: This change means that `c-lineup-dont-change'
	now (again) isn't absolutely sure to keep the current indentation.
	However, I believe that most people use it for comments, macros
	and string literals, and since those are nested innermost it won't
	matter.

	* progmodes/cc-align.el, progmodes/cc-defs.el,
	* progmodes/cc-engine.el, progmodes/cc-vars.el
	(c-guess-basic-syntax, c-calc-offset)
	(c-get-syntactic-indentation, c-syntactic-context):
	Extend the representation of the syntactic context: Previously it was
	a list containing cons cells of the found syntactic symbols
	and their relpos values.  Now each element is instead a list
	containing the syntactic symbol in the first element and the
	relpos (if any) in the second.  After that there might be more
	elements, depending on the syntactic symbol.  The line-up
	functions get these additional elements as extra arguments.

	This change is slightly incompatible.  Although the calling
	convention for line-up functions is strictly extended, the format
	of the `c-syntactic-context' variable has changed slightly.  It's
	believed that this incompatibility is minor, though; not a single
	line-up function distributed with CC Mode needed to be changed,
	for instance.

	* progmodes/cc-styles.el (c-set-style, c-set-style-1):
	Add another state for the `dont-override' flag where it only keeps
	globally set variables.

	* progmodes/cc-mode.el (c-postprocess-file-styles): Do nothing
	except in CC Mode modes.

	* progmodes/cc-vars.el, progmodes/cc-fonts.el,
	progmodes/cc-langs.el, progmodes/cc-mode.el: Add font lock support.

	* progmodes/cc-engine.el (c-beginning-of-syntax): New function
	to be used for font-lock-beginning-of-syntax-function.
	It uses the state cache to quickly find a good position.

	* progmodes/cc-defs.el (c-major-mode-is): Allow a list of
	modes.  Made it a macro ensure that it's optimized to either
	eq or memq for constant arguments.

	* progmodes/cc-mode.el (c-common-init): Do away with the
	hardcoded setting of `comment-column'; it's a user variable
	that we have no business meddling with.  Since the default
	value for it is 32 in all supported (X)Emacs versions, it's
	also safe from a compatibility perspective.

	* progmodes/cc-mode.el (c-basic-common-init): New function
	that contains only the syntax and line breaking/filling
	initialization.  It's intended for use by other modes that
	embed CC Mode.

	* progmodes/cc-engine.el (c-add-stmt-syntax): Fix some cases
	of wrong anchoring, e.g. for else-if compounds.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fix anchor
	position for defun-open in K&R style functions.

	* progmodes/cc-engine.el (c-in-knr-argdecl): Don't trip up on macros.
	(c-search-decl-header-end): Handle C++ template arguments more
	correctly.
	(c-beginning-of-decl-1): Fix when the declaration is first in a macro.

	* progmodes/cc-engine.el (c-beginning-of-decl-1): Better way
	to handle protection labels, one which doesn't get confused by
	inherit colons.
	(c-end-of-decl-1): Don't treat functions that have "class" or
	"struct" in the return type as classes or structs.

	* progmodes/cc-langs.el (c-make-keywords-re): Fix the
	keyword adornment so that it works when a keyword ends with "_".

	* progmodes/cc-cmds.el (c-mask-comment): More fixes when used
	from `c-do-auto-fill' and point is at or near the limit of the
	comment.  Fix bug when the prefix from `c-guess-fill-prefix'
	is longer than the text on the first line of the comment when
	it's masked.

	* progmodes/cc-cmds.el (c-mask-comment): Fix bug where point
	was moved to the following line when it was at the first line
	of a block comment where comment-start-skip matched to eol.

2003-07-01  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* info.el (Info-fontify-menu-headers): Only fontify `* Menu:' at
	the beginning of a line.
	(Info-extract-menu-node-name): Correctly initialize while loop.
	(Info-scroll-prefer-subnodes): Change default to nil.

	* simple.el (vis-mode): Update documentation string to reflect
	earlier changes.

2003-06-30  Richard M. Stallman  <rms@gnu.org>

	* loadup.el (pure-space-overflow): Set it if overflow.

	* startup.el (pure-space-overflow): New variable.
	(fancy-splash-screens-1): Display warning if overflow.
	(normal-splash-screen): Likewise.

	* vc.el (vc-default-show-log-entry): Use with-no-warnings.

	* subr.el (lazy-completion-table, dynamic-completion-table):
	New macros.

2003-06-28  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-options-menu): Move mouse-set-fonts item here.

	* international/mule-cmds.el (mule-menu-keymap):
	Delete mouse-set-fonts item here.

2003-06-29  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-display-number-end): Don't re-initialize local
	variables to preserve array slices.
	(gdb-array-slice): Rename gdb-mouse-array-slice.
	(gdb-array-slice): Interactive function bound to "\r" for text
	terminals.
	(gdb-view-source): Rename gdb-view-source-function.
	Set uninitialized variables (defvars) to nil.

2003-06-29  Kai Großjohann  <kai.grossjohann@gmx.net>

	* international/mule-cmds.el
	(set-display-table-and-terminal-coding-system): Remove CVS
	conflict markers and some code.

2003-06-27  Kai Großjohann  <kai.grossjohann@gmx.net>

	* international/mule-cmds.el (menu-bar-options-menu):
	Move `mouse-set-fonts' here from Options/Mule submenu.

2003-06-26  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-read-buffer): Remove redundant variable
	iswitchb-prepost-hooks.
	(iswitchb-xemacs): Delete variable and use (featurep 'xemacs)
	and fboundp instead.
	(iswitchb-completions): Remove two redundant arguments and local
	variables.  (All above from Stefan Monnier).

2003-06-20  Masatake YAMATO  <jet@gyve.org>

	* progmodes/asm-mode.el (asm-font-lock-keywords):
	Support labels starting with "." and directives starting with ".".

2003-06-22  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation):
	Avoid variable as format argument for error.
	Don't call symbol-name on string.

	* eshell/esh-opt.el (eshell-do-opt): Avoid variable as format
	argument for error.

	* simple.el (vis-mode): Doc fix.

2003-06-22  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (diary-check-diary-file): New function.
	(diary, view-diary-entries, show-all-diary-entries)
	(mark-diary-entries): Use it.
	(view-other-diary-entries): Doc fix.  Use `prefix-numeric-value'.
	(diary-syntax-table, diary-attrtype-convert, diary-mail-days): Doc fix.
	(diary-modified, d-file): No need to defvar (for compiler).
	(list-diary-entries): No need for `let*' so use `let'.
	(simple-diary-display): Use `diary-file' directly rather than
	inheriting `d-file' from `list-diary-entries' caller.
	(make-fancy-diary-buffer, show-all-diary-entries):
	`mode-line-format' already buffer-local.
	(diary-mail-addr): Set to the empty string (rather than nil) if
	undefined, as per `user-mail-address'.
	(diary-mail-entries): Doc fix.  Error if `diary-mail-address' unset.
	(mark-sexp-diary-entries): Don't regexp-quote sexp-mark twice.
	Remove an un-needed `if'.
	(list-sexp-diary-entries): Remove local vars mark and s-entry, and
	use `let' rather than `let*'.
	(diary-date, insert-monthly-diary-entry)
	(insert-yearly-diary-entry, insert-anniversary-diary-entry)
	(insert-block-diary-entry, insert-cyclic-diary-entry)
	(font-lock-diary-date-forms): No need for `let*' so use `let'.
	(make-diary-entry): Doc fix.  Use `or' rather than `if'.
	(diary-font-lock-keywords): Use `when'.  `cal-islam' is required
	feature, not `cal-islamic'.
	`calendar-islamic-month-name-array-leap-year' does not exist - use
	`calendar-islamic-month-name-array'.

2003-06-21  Kenichi Handa  <handa@m17n.org>

	* international/utf-16.el: Many name changes: utf-16-{be,le} ->
	utf-16{be,le}.
	(mule-utf-16-le, utf-16-le, mule-utf-16-be, utf-16-be): New coding
	system aliases for backward compatibility.

	* international/utf-7.el: Adjusted for the name change:
	xxx-utf-16-{le,be} -> xxx-utf-16{le,be}.

	* international/ucs-tables.el (ucs-unify-8859, ucs-fragment-8859):
	Adjust for the name change: xxx-utf-16-{le,be} ->
	xxx-utf-16{le,be}.

	* international/mule-conf.el: Adjusted for the name change:
	xxx-utf-16-{le,be} -> xxx-utf-16{le,be}.

	* international/mule-cmds.el (reset-language-environment):
	Adjust for the name change: xxx-utf-16-{le,be} ->
	xxx-utf-16{le,be}.

2003-06-20  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* vc.el (vc-rename-file): Fix typo.

2003-06-19  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-fontify-node): Improve calculation of other-tag.

2003-06-19  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/cc-mode.el (c-mode): Reverting last change.

2003-06-18  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/gud.el (gud-find-expr-function): Rename from gud-find-expr.
	(gud-find-fortran-expr): Move to fortran.el.

	* progmodes/fortran.el (fortran-gud-find-expr): Move from gud.el
	where it was called gud-find-fortran-expr.
	(fortran-mode): Set gud-find-expr-function.

2003-06-18  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gud-display1): Keep the gdb command, "display", in
	the command history.
	(gdb-restore-windows): Make restore work when gdb-many-windows
	is nil.
	(gdb-source-info, gdba): Display assembler if there is no symbol
	table for main, or message if there is no main.
	(gdb-assembler-custom): Move point to current line of assembler.

	* progmodes/gud.el (gud-menu-map): Add dbx support for "run" and
	"nexti".
	(dbx): Define gud-nexti and gud-run.
	(gud-find-expr, gud-find-fortran-expr): New functions.
	(gud-find-expr): New variable.
	(gud-find-c-expr): Simplify.

	* progmodes/fortran.el (fortran-gud-syntax-table): Syntax table
	for parsing Fortran expressions for gud-print.  (Stefan Monnier)
	(fortran-mode): Add local variable gud-find-expr.

	* progmodes/cc-mode.el (c-mode): Add local variable gud-find-expr.

2003-06-18  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (looking-back): Handle the case of non-trivial regexps.
	Add an optional `limit' argument.
	(push, pop, with-temp-file, with-temp-message, delay-mode-hooks)
	(with-syntax-table): Add edebug info.

2003-06-17  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (kill-new): Leave yank-handler property alone if no
	explicit yank-handler is specified.
	(vis-mode-saved-buffer-invisibility-spec): Rename from
	saved-buffer-invisibility-spec.
	(vis-mode): Correctly handle the case where the mode is turned on
	or off several times in a row.

2003-06-17  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* info.el (Info-fontify-node): Give only the last whitespace
	character after the node name the display property.  Give all
	other such whitespace the invisibility property.

2003-06-17  Pinku Surana  <surana@rcn.com>

	* progmodes/sql.el: Add support for SQLite interpreter.

2003-06-17  Kai Großjohann  <kai.grossjohann@gmx.net>

	Version 2.0.35 of Tramp released.

	* net/tramp.el (tramp-password-end-of-line): Use "xy" with plink.
	(tramp-completion-function-alist): Add completion function for
	"remcp", "remsh" and "plink1".
	Factor out the `regular' file name handling via a remote shell of
	some sort into a specific function.  Intent is to later put that
	part of Tramp into a special file, so that the Tramp `core' is
	just a dispatcher that dispatches to various handlers.
	(tramp-sh-file-name-handler): New function.
	(tramp-foreign-file-name-handler-alist): New default value.
	Call tramp-sh-file-name-handler as default case.
	(tramp-file-name-handler): Do not invoke the old remote-shell handler.
	(tramp-find-foreign-file-name-handler): Return after first match
	is found.  From Francis Litterio <franl@world.std.com>.
	(tramp-handle-file-newer-than-file-p): `tramp-time-diff' returns
	integer, not list.  Do not apply `car' to the return value of
	`tramp-time-diff'.  Reported by David D. Smith
	<ultrasoul@ultrasoul.com>.
	(tramp-time-diff): Convert return value of subtract-time to a
	number of seconds in a correct manner, by applying float-time or
	time-to-seconds.  Also correct compat code accordingly.
	The XEmacs branch for itimer-time-difference didn't need correction,
	it returned a float already.  Reported by David D. Smith
	<ultrasoul@ultrasoul.com>.
	(tramp-handle-insert-file-contents): When calling
	`file-local-copy', let-bind `inhibit-file-name-operation'
	accordingly.  This makes sure that jka-compr is not called when
	`insert-file-contents-literally' is invoked.  From Katsumi Yamaoka
	<yamaoka@jpl.org>.
	(tramp-do-copy-or-rename-via-buffer): Avoid calling jka-compr when
	writing the target file.
	(tramp-foreign-file-name-handler-alist): Add comment about default
	value having to come last.
	(tramp-handle-file-local-copy, tramp-handle-write-region): Add the
	"-p" hack.
	(tramp-handle-copy-file): Set file modes of target file.
	(tramp-handle-file-local-copy)
	(tramp-do-copy-or-rename-via-buffer): Use binary coding system,
	instead of no-conversion.  They are the same on Emacs but
	different on XEmacs.
	(tramp-shell-prompt-pattern): Allow multiple escape
	sequences (each with optional trailing space).

	* net/tramp-uu.el:
	* net/tramp-util.el:
	* net/tramp-efs.el: Use iso-2022-7bit encoding with coding cookie
	for XEmacs compatibility.

2003-06-17  Kenichi Handa  <handa@m17n.org>

	* term/x-win.el (x-select-request-type): New variable.
	(x-select-utf8-or-ctext): New function.
	(x-selection-value): New function.
	(x-cut-buffer-or-selection-value): Call x-selection-value to get
	a selection data.  Set next-selection-coding-system to nil.

	* select.el (x-get-selection): If the string returned by
	x-get-selection-internal has text property `foreign-selection',
	decode it while preserving that property.

2003-06-16  Stefan Monnier  <monnier@cs.yale.edu>

	* menu-bar.el (ispell-menu-bar): Don't autoload.
	(cvs-global-menu): Use the function rather than the variable.

	* pcvs-defs.el (cvs-global-menu): Define as a function as well.

	* emacs-lisp/debug.el (debug): Fix call to message.

2003-06-16  Michael Mauger  <mmaug@yahoo.com>

	* emulation/cua-base.el (cua-mode): Use explicit arg to turn off
	minor modes.

2003-06-16  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl-extra.el (cl-macroexpand-all):
	Don't burp if (cadr (caddr found)) encounters a non-list element.

	* emacs-lisp/cl-macs.el (cl-parse-loop-clause): Use map-keymap.
	(defsubst*): Don't put a `cl-whole argument if it's not used.

	* emacs-lisp/cl-specs.el (pushnew): Use keywordp.

	* emacs-lisp/disass.el (disassemble): Accept plain expressions.

	* add-log.el (add-log-edit-prev-comment, add-log-edit-next-comment):
	New commands.
	(change-log-mode-map): Bind them.
	(smerge-resolve-function): Declare to quieten the byte-compiler.
	(change-log-mode): Add the keymap to the docstring.

2003-06-16  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* simple.el (vis-mode): New function.
	(saved-buffer-invisibility-spec): New variable.

2003-06-16  Juanma Barranquero  <lektu@terra.es>

	* progmodes/sh-script.el (sh-while-getopts, sh-if, sh-case):
	Revert part of previous change.

2003-06-16  Pieter E.J. Pareit  <pieter.pareit@skynet.be>

	* progmodes/mixal-mode.el: New file.

2003-06-16  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (recover-session-finish): Don't give up when there are
	two consecutive empty lines in the auto-save-list file.

2003-06-14  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/copyright.el (copyright-update-year): New function
	extracted from copyright-update.
	When `arg' is set, replace the year, not the `copyright' text.
	Ignore `copyright-update = nil' if called interactively.
	Use "," rather than ", " if that's what was used before.
	Recognize mixes of 2 and 4 digit years.
	Use replace-match.
	(copyright-update): Add interactivep arg.
	Use it instead of use last-command.
	Use replace-match.  Don't assume (point-min) == 1.

	* textmodes/tex-mode.el (tex-compile-commands):
	Handle tex-start-commands like tex-start-tex does.

	* cus-edit.el (custom-get-fresh-buffer): Kill overlays before erasing
	the buffer.

2003-06-13  Ilya N. Golubev  <gin@mo.msk.ru>  (tiny change)

	* shell.el (shell-command-separator-regexp): New variable.
	(shell-directory-tracker): Make regexp used for skipping to next
	command correspond to one used for command itself.

2003-06-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* textmodes/texinfmt.el (texinfo-format-scan):
	Silence `whitespace-cleanup'.

2003-06-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/timeclock.el (display-time-hook)
	(timeclock-modeline-display): Define for byte-compiler.
	(timeclock-time-to-date, timeclock-workday-remaining)
	(timeclock-time-to-seconds, timeclock-seconds-to-time):
	Move earlier in the file so defined before used.
	(timeclock-status-string): No need for `let*' so use `let'.
	(timeclock-query-out): Always return a non-nil value.

2003-06-10  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-version): Bump to 3.3.
	(whitespace-cleanup): Respect user preference for silence

	* whitespace.el: Remove :tag in commentary :link.  Remove empty
	lines in comment, since commentary seems to have a problem with that.

2003-06-09  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-search-noncomment): New macro.
	(tex-last-unended-begin, tex-next-unmatched-end): Use it
	so we don't get confused by \begin and \end in comments.
	(tex-compile): Change dir before calling tex-compile-default.

2003-06-09  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* bindings.el (global-map): Bind `kill-whole-line' to
	C-S-<backspace>.  Remove M-S-<backspace> binding: too close to
	C-M-<backspace>.

	* dired.el (dired-re-dot): Make it handle trailing /.
	(dired-get-filename): Update documentation string.
	Revert previous change and fix typo in earlier version.

2003-06-10  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-fontify-node): Make `invisible' property
	non-sticky so that whitespace added by filling stays visible.
	Make refilling less aggressive by starting at beginning of current
	line rather than beginning of current paragraph.

2003-06-09  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-get-filename): Complain only about "." and "..",
	not all directories.

2003-06-08  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-get-current-frame, gdb-frame-handler): Use Gdb
	command `info frame' instead of `frame' to preserve point.
	(gdb-invalidate-assembler): Only run disassemble again if frame
	has changed.
	(gdb-append-to-inferior-io): Revert change from 2003-05-17.

2003-06-07  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-enable-quote-macros): Fix thinko.
	(texinfo-insert-@table): Remove unused arg.
	(texinfo-show-structure): Remove unused var `source-buffer'.

	* info.el (Info-goto-node, Info-follow-reference, Info-menu-update)
	(Info-fontify-node): Don't search past header-end.
	Use match-string and line-end-position.

	* skeleton.el (skeleton-proxy-new): Consume the mark-active state.

	* textmodes/tex-mode.el (tex-mode-syntax-table)
	(tex-latex-indent-syntax-table): Don't use easy-mmode-defsyntax.

2003-06-07  Jason Rumney  <jasonr@gnu.org>

	* mwheel.el (mouse-wheel-up-event, mouse-wheel-down-event):
	Use wheel-* events on darwin.

2003-06-06  Era Eriksson  <era@iki.fi>  (tiny change)

	* shell.el (shell-resync-dirs): Tolerate an extra line of output
	before the list of directories from `shell-dirstack-query' (it
	looks for, and ignores, a literal copy of the value of
	shell-dirstack-query).

2003-06-06  Lute Kamstra  <lute@gnu.org>

	* info.el (Info-complete-menu-item): Revert change of 2003-06-03.

2003-06-06  Klaus Zeitler  <kzeitler@lucent.com>

	* progmodes/sh-script.el: Fix bug in "Options Loop" skeleton for
	ksh.  Add newlines to a few skeletons, add "select" keyword for bash.

2003-06-06  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-select-node): Doc fix.

2003-06-06  Miles Bader  <miles@gnu.org>

	* frame.el (set-frame-font): Default to frame's current default font.

2003-06-06  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-fontify-node): Don't refill over lines ending in a
	period; this should fix problems with lists like one in the
	"(emacs)Library Keywords" section.

2003-06-05  Markus Rost  <rost@math.ohio-state.edu>

	* dired.el (dired-get-filename): Don't err for . and .. for calls
	from dired-add-entry.

2003-06-05  Takaaki Ota  <Takaaki.Ota@am.sony.com>

	* textmodes/table.el (table-cell-horizontal-chars): Rename from
	table-cell-horizontal-char.  Now a string value instead of a
	character.  ?= is allowed for horizontal boundary as well as ?-.
	(table-command-remap-alist, table-command-list): Change defconst to
	defvar because the value is modified.
	(table-insert, table-insert-row, table-insert-column)
	(table-recognize, table-recognize-region, table-widen-cell)
	(table-span-cell, table-split-cell-vertically): Change due to
	table-cell-horizontal-chars.
	(table--cell-horizontal-char-p): New function.
	(table--generate-source-scan-lines, table-delete-row)
	(table-delete-column, table--spacify-frame)
	(table--find-row-column, table--probe-cell-left-up)
	(table--probe-cell-right-bottom, table--probe-cell): Change due to
	table-cell-horizontal-chars.  From David Abrahams
	<dave@boost-consulting.com>

2003-06-05  Juanma Barranquero  <lektu@terra.es>

	* gud.el: Moved to progmodes.

2003-06-05  Benjamin Riefenstahl  <Benjamin.Riefenstahl@epost.de>  (tiny change)

	* progmodes/tcl.el (tcl-mode): Set imenu-generic-expression to the
	value of tcl-imenu-generic-expression instead of the symbol.

2003-06-05  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* info.el (Info-mode): Mention `c' and remove duplicate mention
	of `q' in documentation string.

2003-06-05  Lute Kamstra  <lute@gnu.org>

	* shell.el (shell-mode): Put `shell-filter-ctrl-a-ctrl-b' on
	`comint-output-filter-functions' when bash is used as the inferior
	shell.
	(shell-filter-ctrl-a-ctrl-b): New function.

2003-06-05  Dave Love  <fx@gnu.org>

	* vc-hooks.el (vc-make-backup-files): Add :group backup.

2003-06-05  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-fontify-node): Individually refill menus and
	paragraphs to preserve menu items and varying indentation.
	Only color first 9 menu items differently.

2003-06-05  Juanma Barranquero  <lektu@terra.es>

	* desktop.el: Add new maintainer.

2003-06-04  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-parse-tag-backward): Try and detect
	when we're starting from within a tag.
	(sgml-get-context): When called from inside a tag, do something useful.
	Rename the arg now that it's never used for `full' context anymore.
	(sgml-calculate-indent): Make `lcon' an argument.
	Return nil when we DON'T know what to do.
	If the initial lcon turns out to be wrong, try again.
	(sgml-indent-line): If sgml-calculate-indent returns nil, don't indent.

2003-06-04  Jason Rumney  <jasonr@gnu.org>

	* mwheel.el (mouse-wheel-down-event, mouse-wheel-up-event):
	Default to new wheel-up and wheel-down events on MacOS.

	* term/mac-win.el: No need to bind wheel events specially.

2003-06-04  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* simple.el (yank-excluded-properties): Expand documentation string.

2003-06-04  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-keywords-finder-p):
	Use with-no-warnings.

	* gud.el (gud-minor-mode-type): Move defvar up.

	* progmodes/compile.el (compilation-next-error): When moving fwd,
	compare position of point with the errors.

	* dired.el (dired-get-filename): Err for . and .. in usual case.
	(dired-get-file-for-visit): Specify no-error to dired-get-filename,
	and check for real errors here.
	(dired-unmark-all-files): Specify no-error to dired-get-filename.

	* buff-menu.el (list-buffers-noselect): Use window-inside-edges
	to compute the number of offset spaces.
	(list-buffers-noselect): Use Buffer-menu-buffer+size to
	indent the dashes properly.  Put some in fixed-pitch.

2003-06-04  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el (desktop-create-buffer): Undo last change.
	(desktop-kill, desktop-save, desktop-remove): Use expand-directory
	rather than concat to construct desktop filename.
	(desktop-kill, desktop-read, desktop-change-dir):
	Ensure desktop-dirname is a directory name.
	(desktop-change-dir): Fix bug when DIR was relative.

2003-06-04  Alex Coventry  <alex_c@mit.edu>  (tiny change)

	* files.el (after-find-file): Fix arguments of call to `sit-for'.

2003-06-03  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-extract-menu-node-name): Remove unused arg errmessage.
	(Info-follow-reference): Update corresponding call.
	(Info-node-spec-re): New const.
	(Info-complete-menu-item): Use it to only allow : when necessary.
	(Info-fontify-node): Use it as well.  Fixup typo.

	* info.el (info-fontify-node): Use better help-echo text.
	Use :align-to display prop.
	Use `invisible' rather than `display' prop to hide text.

	* info.el (Info-mode-hook): Obey obsolete `Info-fontify'.
	(Info-find-in-tag-table-1): Remove unused vars.
	(Info-display-images-node): Remove unused var paragraph-markers.
	(Info-header-line): Remove.
	(Info-select-node): Don't set it.
	(Info-search): Remove unused var `current'.
	(Info-follow-reference): Remove unused var `beg'.
	(Info-extract-menu-node-name): Remove unused var `i'.
	(Info-complete-menu-item): Use `with-current-buffer'.
	(Info-index): Remove unused var `rnode'.
	(Info-mode): Set header-line-format to check text-properties directly.
	(Info-find-emacs-command-nodes): Remove unused var `found' and `exact'.
	(Info-fontify-node): Use `push'.
	(Info-speedbar-hierarchy-buttons): Use `dolist'.
	(Info-speedbar-goto-node, Info-speedbar-fetch-file-nodes):
	Check the return value of `string-match'.
	(Info-speedbar-fetch-file-nodes): Factor out common code.

2003-06-03  Lute Kamstra  <lute@gnu.org>

	* cus-edit.el (custom-get-fresh-buffer): Test for nonexistence buffer.

2003-06-03  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1):
	Add save-excursion.

	* windmove.el (windmove-reference-loc, windmove-frame-edges):
	Use window-inside-edges.
	(windmove-do-window-select): Fix error messages.

	* files.el (after-find-file): Simplify msg if nonexistent directory.
	(make-directory): Doc fix.

	* dabbrev.el (dabbrev--goto-start-of-abbrev):
	Use minibuffer-prompt-end.

	* comint.el (comint-move-point-for-output): Renamed from
	comint-scroll-to-bottom-on-output.  Old name is alias.
	All uses changed.  Doc fix.
	(comint-scroll-show-maximum-output): Doc fix.

	* comint.el (comint-exec-1): Don't use directory-sep-char.
	(comint-dynamic-complete-as-filename): Likewise.

	* bindings.el (global-map): Delete C-M-delete and C-M-backspace.

2003-06-03  Markus Rost  <rost@math.ohio-state.edu>

	* progmodes/ps-mode.el (ps-mode): Use autoload cookie in the
	standard way.

2003-06-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/bibtex.el (bibtex-member-of-regexp)
	(bibtex-assoc-of-regexp, bibtex-format-entry, bibtex-find-entry)
	(bibtex-autokey-demangle-name, bibtex-string-files-init, bibtex-mode):
	Fix up regexp usage and use match-string.

2003-06-02  Roland Winkler  <roland.winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el: Long overdue merge.
	Don't require `compile' since it seems unnecessary.
	For all internal variables and functions the docstring comments have
	been converted into proper docstrings.
	(bibtex-maintainer-address, bibtex-maintainer-salutation)
	(bibtex-version): Remove support for bug reporting.
	(bibtex-field-delimiters, bibtex-entry-delimiters)
	(bibtex-sort-ignore-string-entries, bibtex-maintain-sorted-entries)
	Replace make-variable-buffer-local by make-local-variable.
	(bibtex-entry-format): New tag `required-fields'.
	(bibtex-maintain-sorted-entries): New var.
	(bibtex-sort-entry-class, bibtex-sort-entry-class-alist): New vars.
	(bibtex-predefined-month-strings, bibtex-predefined-strings):
	Make into alists with pairs (abbreviation expansion).
	(bibtex-autokey-titleword-change-strings)
	(bibtex-autokey-transcriptions): Make into alists.
	Add new replacement pairs.
	(bibtex-autokey-use-crossref): New var.
	Replace bibtex-autokey-year-use-crossref-entry because updated code
	for autokey generation handles crossrefs independently of
	particular fields.
	(bibtex-reference-key, bibtex-mode-syntax-table):
	Remove = because it can't be part of a string's key.
	(bibtex-complete-key-cleanup): New var.
	(bibtex-complete): Merge bibtex-complete-string and bibtex-complete-key
	into it (and bind to M-tab).
	(bibtex-valid-entry-re, bibtex-any-valid-entry-re)
	(bibtex-valid-entry-whitespace-re, bibtex-empty-field-re)
	(bibtex-quoted-string-re): New vars.
	(bibtex-field-name-for-parsing): Don't make-variable-buffer-local.
	(zmacs-regions): Declare to quieten the byte-compiler.
	(bibtex-comment-start): Don't include the space.
	(bibtex-font-lock-syntactic-keywords): New var.
	(bibtex-font-lock-keywords): Remove the entry for @Comment.
	(bibtex-parse-field-string): Merge the functionality of
	bibtex-parse-field-string-braced, bibtex-parse-quoted-string and
	bibtex-parse-field-string-quoted.
	(bibtex-search-forward-field-string): Remove.
	(bibtex-parse-association): Use when.
	(bibtex-parse-field-name): Use when.
	(bibtex-parse-field-text): Use when and cond.
	(bibtex-parse-field): Use let.
	(bibtex-search-forward-field, bibtex-search-backward-field):
	Make bound optional, use let, setq, and cddr.
	(bibtex-start-of-field, bibtex-start-of-name-in-field)
	(bibtex-end-of-name-in-field): Use nth.
	(bibtex-name-in-field, bibtex-text-in-field-bounds)
	(bibtex-text-in-field, bibtex-type-in-head, bibtex-key-in-head)
	(bibtex-text-in-string): New functions.
	(bibtex-reference-key-in-string): New fun.  Merge of
	bibtex-start-of-reference-key-in-string and
	bibtex-end-of-reference-key-in-string.
	(bibtex-parse-string-prefix): Use let and when.
	(bibtex-parse-string-postfix): Use when.
	(bibtex-search-forward-string, bibtex-search-backward-string):
	Use save-excursion and setq.
	(bibtex-member-of-regexp): Use let.
	(bibtex-assoc-of-regexp): Use caar and let.
	(bibtex-skip-to-valid-entry): Return buffer position.
	(bibtex-map-entries): Use save-excursion.
	(bibtex-progress-message): Simplify.
	(bibtex-search-entry): Use skip-chars-forward, when, save-match-data.
	(bibtex-move-outside-of-entry): Handle the case that point is before
	first entry.
	(bibtex-enclosing-field): Use save-excursion, when.
	(bibtex-format-field-delimiters): Merge into bibtex-format-entry.
	(bibtex-enclosing-entry-maybe-empty-head): Simplify.
	(bibtex-format-entry): Simplify.  Handle new tag required-fields of
	bibtex-entry-format.
	(bibtex-autokey-abbrev): Accept negative values of len.
	(bibtex-autokey-get-field, bibtex-autokey-demangle-title): New funs.
	(bibtex-autokey-get-namefield, bibtex-autokey-get-namelist)
	(bibtex-autokey-get-yearfield-digits, bibtex-autokey-get-yearfield)
	(bibtex-autokey-get-titlestring): Remove.
	(bibtex-autokey-get-names): Simplify.
	(bibtex-autokey-get-titles): Rename to bibtex-autokey-get-title.
	(bibtex-autokey-demangle-name): Simplify, avoid error messages.
	(bibtex-generate-autokey): Simplify.
	(bibtex-parse-keys): Simplify, use push.
	(bibtex-parse-strings): New fun similar to bibtex-parse-keys.
	(bibtex-string-files-init): New fun.
	(bibtex-parse-buffers-stealthily): Use bibtex-parse-keys,
	bibtex-string-files-init and bibtex-parse-strings.
	(bibtex-complete): Rename to bibtex-complete-internal, use push,
	bibtex-reference-key-in-string, no sorting.
	(bibtex-complete-string-cleanup): New fun, displays expansion of
	completed strings.
	(bibtex-choose-completion-string): New fun.  Required for
	choose-completion-string-functions.
	(bibtex-do-auto-fill): Remove.  Set fill-prefix in bibtex-mode.
	(bibtex-pop): Simplify.
	(bibtex-mode): Move setting of bibtex-string to bibtex-parse-strings.
	Set choose-completion-string-functions.
	(bibtex-print-help-message,bibtex-make-field, bibtex-end-of-entry)
	(bibtex-count-entries): Simplify.
	(bibtex-entry-index, bibtex-lessp): New funs for generalized sorting
	scheme of indices, see bibtex-maintain-sorted-entries.
	(bibtex-sort-buffer): Use bibtex-lessp for sorting.
	(bibtex-find-crossref, bibtex-find-entry): New funs.
	(bibtex-find-entry-location): Rename to bibtex-prepare-new-entry, use
	bibtex-lessp, Simplify.
	(bibtex-validate): Simplify.  Fixe bug of internal variable
	questionable-month.
	(bibtex-remove-OPT-or-ALT): Use when.
	(bibtex-remove-delimiters, bibtex-kill-field, bibtex-kill-entry)
	(bibtex-clean-entry, bibtex-fill-entry, bibtex-reformat): Simplify.
	(bibtex-convert-alien): Use deactivate-mark rather than the
	non-existent bibtex-mark-active variable.
	(bibtex-complete-string, bibtex-complete-key): Merge into new
	`smart' defun bibtex-complete.
	(bibtex-String): Update for new sorting scheme, distinguish empty and
	non-empty key strings.

2003-06-02  Stefan Monnier  <monnier@cs.yale.edu>

	* sort.el (sort-subr): Add `predicate' arg.  Remove `sortcar' code.

2003-06-02  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-synopsis): Use relative filenames
	correctly.  Show the synopsis to the user when appropriate.
	Do not kill buffers that were created outside `lm-synopsis'.

2003-06-01  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-get-fresh-buffer): Be extra paranoid,
	just in case some used a file of the wrong name.

	* progmodes/sh-script.el (sh-is-quoted-p): New fun.
	(sh-font-lock-paren): Use it to allow \C in case patterns.
	(sh-get-indent-info): Check the \n before the line for string-status.
	(sh-feature): Remove unused var `function'.
	(sh-get-indent-info): Remove unused variables.
	(sh-prev-thing): Remove unused vars `going', `n', and `found'.
	(sh-set-indent): Remove unused var `new-val' and `val0'.
	(sh-learn-buffer-indent): Remove unused vars `last-pos' and `lines'.
	(sh-guess-basic-offset): Remove unused var `return' and `j'.

2003-05-27  David Ponce  <david@dponce.com>

	* ruler-mode.el

	Version 1.6

	Take into account changes made to the display margins, fringes and
	scroll-bar handling.

	(ruler-mode-margins-char): Remove.  Not used anymore.
	(ruler-mode-pad-face, ruler-mode-fringes-face): New faces.
	(ruler-mode-margins-face): New definition.  Move.
	(ruler-mode-left-fringe-cols)
	(ruler-mode-right-fringe-cols)
	(ruler-mode-left-scroll-bar-cols)
	(ruler-mode-right-scroll-bar-cols): Reimplement.  Move.
	(ruler-mode-full-window-width)
	(ruler-mode-window-col): New functions.
	(ruler-mode-mouse-set-left-margin)
	(ruler-mode-mouse-set-right-margin)
	(ruler-mode-mouse-add-tab-stop)
	(ruler-mode-mouse-del-tab-stop): Reimplement.
	(ruler-mode-mouse-current-grab-object): Rename to...
	(ruler-mode-dragged-symbol): New.
	(ruler-mode-mouse-grab-any-column): Use it.  Clean up.
	(ruler-mode-mouse-drag-any-column): Likewise.
	(ruler-mode-mouse-drag-any-column-iteration): Simplify.
	(ruler-mode): Restore previous `header-line-format' if
	`ruler-mode-header-line-format-old' has a local binding in current
	buffer.
	(ruler-mode-left-margin-help-echo)
	(ruler-mode-right-margin-help-echo): Remove.
	(ruler-mode-margin-help-echo)
	(ruler-mode-fringe-help-echo): New constants.
	(ruler-mode-ruler): Use them.  Reimplement.

2003-06-01  Jason Rumney  <jasonr@gnu.org>

	* mwheel.el (mouse-wheel-down-event, mouse-wheel-up-event):
	Default to new wheel-up and wheel-down events on Windows.

	* term/w32-win.el: No need to bind wheel events specially.

2003-06-01  Michael Kifer  <kifer@cs.stonybrook.edu>

	* desktop.el (desktop-create-buffer): Add (desktop-first-buffer) to
	the let-statement to avoid the startup error that desktop-first-buffer
	is undefined.

2003-06-01  Andreas Schwab  <schwab@suse.de>

	* man.el (Man-name-regexp): Also match Latin-1 soft hyphen.
	(Man-build-references-alist): Handle Latin-1 soft hyphen.

2003-05-31  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-buffer-ignore): Update custom type to
	allow functions.

2003-05-31  Stefan Monnier  <monnier@cs.yale.edu>

	* view.el (view-file, view-file-other-window, view-file-other-frame):
	Signal an error when trying to visit a nonexistent file.

	* vc-hooks.el (vc-call-backend): Give better error message
	when a backend function is missing.
	(vc-find-file-hook): USe unless.  Merge if and cond.

	* vc.el (vc-directory-exclusion-list): Add MCVS and .svn.
	(vc-checkin-hook): Adjust option to new name.

	* log-edit.el (log-edit-maximum-comment-ring-size)
	(log-edit-comment-ring, log-edit-comment-ring-index)
	(log-edit-last-comment-match): Rename vars from
	vc-maximum-comment-ring-size, vc-comment-ring, vc-comment-ring-index,
	and vc-last-comment-match.
	(log-edit-new-comment-index, log-edit-previous-comment)
	(log-edit-next-comment, log-edit-comment-search-backward)
	(log-edit-comment-search-forward, log-edit-comment-to-change-log):
	Rename funs from vc-new-comment-index, vc-previous-comment,
	vc-next-comment, vc-comment-search-reverse, vc-comment-search-forward,
	and vc-comment-to-change-log.

	* wid-edit.el (widget-specify-insert): Simplify.
	(widget-editable-list-entry-create): Don't assume that %d and %i are
	in the format string.
	(widget-map-buttons): Remove unused var `parent'.
	(widget-move): Remove unused shadowed var `new'.
	(widget-color-action): Remove unused var `pos'.

	* cus-edit.el (custom-get-fresh-buffer): New fun.
	(custom-buffer-create, custom-buffer-create-other-window)
	(customize-browse): Use it instead of killing buffers.
	(custom-bury-buffer): Obey the argument.
	(custom-variable-reset-saved, custom-variable-reset-standard):
	Remove unused var `comment-widget'.
	(custom-face-edit-deactivate): Remove unused var `to'.
	(custom-save-variables): Remove unused var `sep'.

2003-05-31  John Paul Wallington  <jpw@gnu.org>

	* files.el (large-file-warning-threshold): Add type, groups.

	* progmodes/delphi.el (delphi-ignore-changes): Defvar; non-constant.

2003-05-31  Kenichi Handa  <handa@m17n.org>

	* files.el (recover-file): Bind coding-system-for-read to
	auto-save-coding.

2003-05-31  Juanma Barranquero  <lektu@terra.es>

	* misc.el (mark-beginning-of-buffer, mark-end-of-buffer)
	(upcase-char, forward-to-word, backward-to-word): Move from unused.el.

	* unused.el: Deleted (contents moved to misc.el).

	* options.el:
	* emacs-lisp/float.el:
	* textmodes/scribe.el: Moved to obsolete.

	* byte-run.el:
	* derived.el:
	* float-sup.el:
	* map-ynp.el:
	* regi.el:
	* timer.el:
	* warnings.el: Moved to emacs-lisp.

	* enriched.el: Moved to textmodes.

	* textmodes/outline.el: Moved to lisp.

	* which-func.el: Moved to progmodes.

	* loadup.el: Load byte-run.el, map-ynp.el, timer.el and float-sup.el
	from emacs-lisp.

2003-05-31  Tom Wurgler  <twurgler@goodyear.com>  (tiny change)

	* subr.el (looking-back): New function to check for regular
	expression before point.

2003-05-30  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-empty-lines): New var.
	(comment-region-internal): Use it.

	* textmodes/tex-mode.el (latex-block-args-alist)
	(latex-block-body-alist): New vars.
	(latex-insert-block): Use them.
	(tex-string-prefix-p): New fun.
	(tex-guess-main-file): Use it to detect when the main file
	is in a parent directory.
	(tex-main-file): Try to find a main-file in parent directories.
	(tex-compile-default): Don't use `gv' on pdf files just because
	`gv' was used recently on a ps file.  Remove unused arg `dir'.
	Reuse a previous command as-is if it applied to the same file.
	(tex-compile): Use the right file name when file is not in dir.

	* textmodes/refill.el (refill-adjust-ignorable-overlay):
	Don't hardcode pint-min == 1.
	(refill-fill-paragraph-at): Use a more robust method to detect
	when the paragraph is after point.  Remove unused var `fill-pfx'.

	* xml.el (xml-parse-tag): Return (foo nil) rather than (foo nil "")
	for <foo/>, to make it behave like <foo></foo>.

	* emacs-lisp/edebug.el (edebug-storing-offsets): Move indent
	and debug to inside the macro.
	(edebug-read-storing-offsets): Simplify.
	(edebug-read-quote, edebug-read-function): Place the
	start-position correctly.
	(edebug-read-backquote-new): Remove.
	(edebug-read-backquote-level): New var to replace it.
	(edebug-read-backquote): Increment it.
	Don't store offsets one extra time.
	(edebug-read-comma): Decrement it.  Read the comma as a plain
	symbol if outside of any new-style backquote.
	(edebug-read-list): Use edebug-read-backquote-level.
	Don't call edebug-read-backquote directly.  This way the extra
	offsets store is done exactly when it's needed.
	(edebug-read-vector): Use push.
	(defmacro): Add support for the `declare' thingy.

2003-05-29  Stefan Monnier  <monnier@cs.yale.edu>

	* forms.el (forms-mode-hook): Rename from forms-mode-hooks.
	(forms-mode): Use add-hook rather than make-local-variable+setq.
	Use with-current-buffer.  Run the new and the old hooks.
	(forms--update): Use with-current-buffer and line-end-position.
	(forms--goto-record): New fun.
	(forms-jump-record, forms-insert-record, forms-delete-record): Use it.
	(forms--process-format-list): Remove unused var `this-item'.
	(forms--intuit-from-file): Remove unused var `the-result'.
	(forms--trans): Remove unused var `x'.
	(forms--exit, forms-exit, forms-exit-no-save): Remove unused arg.

	* emacs-lisp/edebug.el (edebug-window-list): Use push.
	(edebug-macrop): Use functionp.
	(edebug-functionp): Remove.
	(edebug-get-displayed-buffer-points): Use push.
	(edebug-set-buffer-points): Use save-current-buffer and buffer-live-p.
	(edebug-list-form): Remove dead code.
	(backquote-form): Correctly handle `(a . ,b).
	(edebug-mode-map, global-edebug-map): Move init to inside the defvar.
	(define-derived-mode, define-minor-mode): Remove outdated spec.
	(save-match-data, with-output-to-string, with-current-buffer)
	(combine-after-change-calls, with-temp-buffer, dolist, dotimes)
	(unless, when): Remove specs that are now in the corresponding macro.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Add edebug spec.
	Accept a :keymap argument, as you'd expect.

	* derived.el (define-derived-mode): Add a proper edebug declaration.

2003-05-29  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* simple.el (kill-whole-line): Make it interact correctly with
	the kill ring.

2003-05-29  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (ctext-non-standard-encodings-alist):
	Rename from non-standard-icccm-encodings-alist.
	(ctext-non-standard-encodings-regexp): New variable.
	(ctext-post-read-conversion): Full rewrite.
	(ctext-non-standard-designations-alist): Rename from
	non-standard-designations-alist.
	(ctext-pre-write-conversion): Full rewrite.

2003-05-28  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-fontify-node): Hide \n------- rather than -------\n.

	* skeleton.el (skeleton-edebug-spec): First cut of an edebug spec.
	(define-skeleton): Use it.

2003-05-28  Andreas Schwab  <schwab@suse.de>

	* descr-text.el (describe-char): Use `char' instead of
	`(char-after)'.  Fix display of Unicode.

2003-05-28  Nick Roberts  <nick@nick.uklinux.net>

	* gud.el (gud-gdb-goto-stackframe, gud-gdb-get-stackframe):
	Add server prefix to the gdb commands used by the speedbar.

2003-05-28  Kai Großjohann  <kai.grossjohann@gmx.net>

	* simple.el (kill-region): If nothing was killed, and the
	previous command was not a kill, break kill sequence.

2003-05-28  Richard M. Stallman  <rms@gnu.org>

	* textmodes/refill.el (refill-fill-paragraph-at):
	Avoid refilling the following paragraph.
	(refill-doit): Doc fix.

	* emulation/vip.el (ctl-x-map): Don't bind C-x C-i or C-x 3.
	(global-map): Don't bind C-z.
	(vip-setup): New function to rebind C-x 7 and C-z.

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display):
	Undo previous change (don't check for eob).  Widen at the beginning.

	* map-ynp.el (map-y-or-n-p): No special handling for exit-prefix.
	In help string, mention C-g but not ESC.

	* jka-compr.el (jka-compr-insert-file-contents):
	When REPLACE, delete the proper range of text.

	* info.el (Info-index): Add autoload cookie.

	* forms.el (forms-mode): Use write-file-functions instead
	of local-write-file-hooks.  Use make-local-variable to make it local.

	* descr-text.el (describe-char-unicode-data): New dummy definition.
	(unicode-data): Comment out since we can't use UnicodeData.txt as is.
	(describe-char-unicodedata-file): Variable renamed and commented out.

	* faces.el (set-face-attribute): Set face-modified prop to t
	when we change the new-frame defaults.
	(face-spec-set): Set face-modified prop to nil
	when we change the new-frame defaults.

	* cus-edit.el (custom-face-state-set): Non-nil `face-modified'
	means face was set outside of Custom.

2003-05-28  Richard M. Stallman  <rms@gnu.org>

	* byte-run.el (with-no-warnings): New function.

	* emacs-lisp/bytecomp.el (byte-compile-no-warnings): New function.
	(with-no-warnings): Set up compile handler.

	* startup.el (command-line-1): Use with-no-warnings.

	* type-break.el (type-break-cancel-function-timers):
	Use with-no-warnings.

2003-05-28  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* env.el (substitute-env-vars): Fix typo.

2003-05-28  Walter C. Pelissero  <walter@pelissero.de>  (tiny change)

	* net/browse-url.el (browse-url-mozilla): Correct the conditionals
	for using ,new-window.

2003-05-27  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/sh-script.el (sh-here-document-word):
	Document new treatment of leading "-".
	(sh-maybe-here-document): Strip a leading "-" from closing
	heredoc delimiter, if present.

	* align.el (align-rules-list): Doc fix.

	* calendar/timeclock.el: Update copyright.
	(timeclock-ask-before-exiting): Put `timeclock-query-out' on
	`kill-emacs-query-functions' rather than `kill-emacs-hook'.
	(timeclock-mode-string): Doc fix.
	(timeclock-modeline-display): Doc fix.  Use `global-mode-string'
	rather than `mode-line-format'.
	(timeclock-query-out): Doc fix.
	(timeclock-update-modeline): No need for `let*', so use `let'.
	Add some help-echo text to `timeclock-mode-string'.
	(timeclock-mode-string): Give it the risky-local-variable
	property, so that help-echo text will display.
	(timeclock-find-discrep): Set `accum' to 0 if
	`timeclock-discrepancy' is nil.

2003-05-27  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lisp-mode.el (lisp-font-lock-syntactic-face-function):
	Don't infinite loop at bob.
	(emacs-lisp-mode): Mark its main custom group to be `lisp'.
	(prin1-char): New fun.
	(eval-last-sexp-1): Use it.  Use with-syntax-table as well.
	(eval-defun-1): Don't replace `defvar' with `defconst'.

2003-05-27  Kai Großjohann  <kai.grossjohann@gmx.net>

	* bindings.el (global-map): Bind M-S-<backspace to kill-whole-line.

2003-05-26  Stefan Monnier  <monnier@cs.yale.edu>

	* gud.el (gud-find-class): Remove unused var `pos'.
	(gdb-script-mode-syntax-table, gdb-script-font-lock-keywords)
	(gdb-script-font-lock-syntactic-keywords)
	(gdb-script-font-lock-syntactic-face, gdb-script-basic-indent)
	(gdb-script-skip-to-head, gdb-script-calculate-indentation)
	(gdb-script-indent-line, gdb-script-mode): New mode to edit
	.gdbinit-like scripts.

2003-05-26  John Paul Wallington  <jpw@gnu.org>

	* faces.el (display-supports-face-attributes-p): Doc fix.
	(x-create-frame-with-faces): Call `face-set-after-frame-default'.

2003-05-26  Kai Großjohann  <kai.grossjohann@gmx.net>

	* bindings.el (global-map): Don't bind S-<backspace>.  Too many
	people hit it by mistake.

2003-05-26  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-delete-file): Fix free variable reference.
	(vc-annotate-display): Remove obsolescence declaration; it isn't
	obsolete.

2003-05-25  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (autoconf-mode setups): Recognize AH_ and AU_ entries
	in "(autoconf)Autoconf Macro Index".  Add "(autoconf)M4 Macro Index"
	and "(autoconf)Autotest Macro Index".  Remove duplicate copy of
	"(automake)Macro and Variable Index".  Keep automake after all
	autoconf possibilities, so as to prefer those.

2003-05-25  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-internal-1): Don't loop if interactor of
	subskeleton is nil.
	(skeleton-pair-default-alist): New var.
	(skeleton-pair-insert-maybe): Use it.  Don't munge multibyte chars.

2003-05-25  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-info-breakpoints-custom, gdb-assembler-custom):
	Put string associated with breakpoint at start of line so that it
	is always visible.
	(gdb-display-source-buffer): Display assembler during execution,
	when requested.
	(gud-menu-map): Add a toggle button to menubar for gdb-many-windows.
	(gdb-many-windows): Define explicitly as a function and a variable
	(formerly as a minor mode).  These need to be global so layout can
	be reset from any buffer.
	(gdb-assembler-mode): Keep fringe outside margin as the overlay
	arrow is not used for assembler.

2003-05-25  Tim Van Holder  <tim.vanholder@anubex.com>

	* which-func.el (which-func-update-timer): New variable.
	(which-function-mode): Use it.

2003-05-25  Richard M. Stallman  <rms@gnu.org>

	* simple.el (idle-update-delay): New variable.

2003-05-25  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* simple.el (forward-visible-line): Fix negative arguments.

2003-05-25  Juanma Barranquero  <lektu@terra.es>

	* skeleton.el (skeleton-pair-insert-maybe): Remove leftover
	reference to skeleton-abbrev-cleanup.

2003-05-24  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Preserve CR in a file name.

2003-05-24  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-abbrev-cleanup, skeleton-proxy):
	Remove obsolete code.

	* term/w32-win.el (iconify-or-deiconify-frame):
	* term/mac-win.el (iconify-or-deiconify-frame): Move to frame.el.

	* term/x-win.el (iconify-or-deiconify-frame): Move to frame.el.
	Turn on mouse-wheel support by default.

	* frame.el (iconify-or-deiconify-frame): Move from term/x-win.el.

2003-05-24  Kai Großjohann  <kai.grossjohann@gmx.net>

	* net/tramp.el: Version 2.0.34 released.
	(tramp-handle-file-symlink-p): If target of symlink is absolute,
	return a Tramp filename.  (Ie, return "/user@host:/target" instead
	of "/target".)
	(tramp-handle-file-truename): Deal with new return value from
	`file-symlink-p'.
	(tramp-handle-expand-file-name): Make default method explicit in
	file name.
	(tramp-unified-filenames): Move to an earlier spot in the file.
	(top-level): If tramp-unified-filenames is set and we're running
	on XEmacs, load tramp-efs.
	(tramp-wait-for-shell-prompt, tramp-barf-if-no-shell-prompt):
	New functions, used by tramp-send-command-internal.
	(tramp-open-connection-setup-interactive-shell): Simplify using
	`tramp-send-command-internal'.
	(tramp-send-command-internal): New function.
	(tramp-methods): New entries "remsh" and "remcp" are like "rsh"
	and "rcp" but invoke "remsh" instead of "rsh".  This is useful on
	Cray systems, for instance.  Unify tramp-rsh-program,
	tramp-telnet-program, tramp-su-program into tramp-login-program.
	Likewise with tramp-login-args, tramp-copy-program,
	tramp-copy-args, tramp-copy-keep-date-arg.  Users changed.  New
	method plink1; like plink but pass "-1" to force protocol version 1.
	(tramp-default-method): Use plink as the default on machines where
	the plink program is present.
	(tramp-completion-file-name-handler): Add safe-magic property.
	(tramp-shell-prompt-pattern): Allow ANSI escapes at
	end of prompt.  (ANSI escapes elsewhere in the prompt are
	recognized properly already.)

	* net/tramp-efs.el: New file.

2003-05-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-handle-file-truename): `sym' shouldn't be
	quoted.
	(tramp-methods, tramp-multi-connection-function-alist):
	Use argument "-p Password:" for "sudo" method, because password prompt
	might be changed by either passprompt option in /etc/sudoers, or
	SUDO_PROMPT environment variable.  Suggested by Peter Oliver
	<peter.oliver@aquila-networks.co.uk>.

2003-05-23  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/supercite.el: Use `push' and replace `regi-pos' by equivalents.
	(sc-emacs-features): Remove.  Use better tests instead.
	(sc-minor-mode): Use define-minor-mode.
	(sc-mode-string, sc-set-mode-string): Remove.
	Use a better modeline expression instead.
	(sc-completing-read, sc-read-string, sc-submatch, sc-member)
	(sc-string-text): Remove those compatibility functions.

	* pcvs.el (cvs-temp-buffer): Kill running process in displayed buffers.
	(cvs-make-cvs-buffer): Fix up format of the header.

	* progmodes/perl-mode.el (perl-font-lock-syntactic-keywords):
	Match more cases of /.../ patterns.

2003-05-23  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdba): Accommodate Fortran programs.
	(gud-gdba-command-name): Use -noasync in all cases (as Fortran
	seems to require it also).
	(gdb-source-info): Parse correctly when compilation directory
	specifies host also (IRIX).

2003-05-23  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-checkout): Don't leave the branch when
	REV is t.  From Don Provan <dprovan@bivio.net>

2003-05-23  Richard M. Stallman  <rms@gnu.org>

	* forms.el (forms--mode-commands1): Bind \t, not `tab'.
	(forms--mode-commands): Don't bind \t in the maps where
	we call forms--mode-commands1.

2003-05-23  Taro Kawagishi  <tarok@acm.org>

	* arc-mode.el (archive-lzh-summarize): Calculate correct total
	header size for LZH level 1 header.

2003-05-23  Richard M. Stallman  <rms@gnu.org>

	* textmodes/paragraphs.el (repunctuate-sentences): Add doc string.

2003-05-23  Daniel Ortmann  <dortmann@lsil.com>  (tiny change)

	* textmodes/paragraphs.el (repunctuate-sentences): New function.

2003-05-23  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp-mnt.el: Make the description of the library more
	accurate.
	(lm-any-header): New user option.
	(lm-section-start): New function; rewrite of `lm-section-mark'.
	(lm-section-mark): Make alias of `lm-section-start'.
	(lm-section-end): New function.
	(lm-code-start): New function; rewrite of `lm-code-mark'.
	(lm-code-mark): Make alias of `lm-code-start'.
	(lm-commentary-start): New function; rewrite of `lm-commentary-mark'.
	(lm-commentary-mark): Make alias of `lm-commentary-start'.
	(lm-commentary-end): New function.
	(lm-history-start): New function; rewrite of `lm-history-mark'.
	(lm-history-mark): Make alias of `lm-history-start'.
	(lm-commentary): Use `lm-commentary-end' to find the end of the
	commentary section.

	* emacs-lisp/checkdoc.el (checkdoc-file-comments-engine):
	Use `lm-commentary-end' to find the end of the commentary section.

2003-05-22  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (define-skeleton): Use the `no-self-insert' property.
	(skeleton-proxy-new): Fix docstring.  Remove broken interactive spec.
	Rely on use `no-self-insert' rather than `skeleton-abbrev-cleanup'.
	(skeleton-internal-1): Add a `recursive' argument.
	(skeleton-internal-list): Use it to propagate `recursive'.

2003-05-22  Ken Stevens  <kstevens@ichips.intel.com>

	* ispell.el: Sync to version 3.6.
	Summary: MIME support added for e-mail processing that
	skips encoded regions.  Allow user to skip saving Fcc messages with
	large attachments.  Fixed region skipping bug with multi-line
	comments - e.g.  tex $ regions spanning multiple lines.
	Added support for PostScript and uuencoded regions.
	Redundant dictionary file names purged.
	Dictionary definition field name changed from "Character Set"
	to "Coding System".  Fixed bug in reloading dictionaries.
	Modified headers to reflect new version.  XEmacs menu now adds
	customize item.
	(ispell-check-version): No longer an aliased function.
	Returns library path if not called interactively.
	Variable `temporary-file-directory' protected if not loaded.
	(check-ispell-version): Now the alias for `ispell-check-version'.
	(ispell-message-fcc-skip): New variable that determines if and when
	to query about saving Fcc copy of message if an attachment is large.
	(ispell-skip-html): Declare buffer-local.
	(ispell-local-dictionary-alist): Docstring expanded.
	Tag name changed from "Character Set" to "Coding System".
	(ispell-dictionary-alist-1): Remove redundant command-line option to
	load brasileiro, british, and castellano dictionary files.
	(ispell-dictionary-alist-2): Remove redundant command-line option to
	load czech dictionary file.
	(ispell-dictionary-alist-3): Move francais-tex here.
	(ispell-dictionary-alist-4): Remove german and german8 dictionaries.
	The deutsch ones are the correct definitions.  `nederlands'
	and `nederlands8' dictionaries moved here.
	(ispell-dictionary-alist-5): `polish' and `portugues' dictionaries
	moved here.  Removed redundant command-line option to `norsk'
	and `portugues'.
	(ispell-dictionary-alist-6): Remove redundant command-line option to
	load `russian' and `slovak' dictionary files.
	(ispell-dictionary-alist): Tag name changed from "Character Set" to
	"Coding System".
	(ispell-version): Update to 3.6.
	(ispell-library-directory): Calls non-deprecated function.
	(ispell-valid-dictionary-list): New function returning all valid
	dictionaries on machine.
	(ispell-checking-message): Documentation string improved.
	(ispell-skip-region-alist): Add uuencoded and PostScript region
	skipping.  Improve http/e-mail/file regexp to not match `/.\w'.
	(ispell-html-skip-alists): New variable for html region support.
	(ispell-send-string): Remove redundant xemacs check.
	(ispell-word): Fix spelling error in documentation string, add
	extent information to support highlighting in ispell-minor-mode.
	(ispell-command-loop): Disable horizontal scrollbar in XEmacs
	choices buffer.
	(ispell-show-choices): Directly select `choices-window'.
	(ispell-help): Use default buffer size for electric help.
	(ispell-adjusted-window-height): Correct for XEmacs detection.
	(ispell-start-process): Don't double specify dictionary file name.
	(ispell-init-process): Set `ispell-library-path' each call.
	(ispell-change-dictionary): Now only completes valid dictionaries.
	(ispell-region): Add support for MIME region skipping and Fcc
	message query for large attachments.
	(ispell-begin-skip-region-regexp): Add documentation string.
	Add message support and clean up code for generic and html regions.
	(ispell-begin-skip-region): Function is now requires alist argument.
	(ispell-begin-tex-skip-regexp): Add comments and support
	improved html and message regions.
	(ispell-skip-region-list): New function for MIME and region skipping.
	(ispell-tex-arg-end): Add documentation string.
	(ispell-ignore-fcc): New function to query saving Fcc message.
	(ispell-skip-region): Calculate alist for key match dynamically,
	html skipping pushed to alists.
	(ispell-get-line): Add support for multi-line comment regions.
	(ispell): Check that variables to continue spelling are bound.
	(ispell-message-text-end): PostScript and uuencoded regions now
	supported as MIME regions, rather than as end-of-message region.
	(ispell-mime-multipartp): New function supporting MIME.
	(ispell-mime-skip-part): New function supporting MIME.
	(ispell-message): Add MIME support.
	(ispell-buffer-local-parsing): Variable `ispell-skip-html' now local.
	(ispell-buffer-local-dict): Fix bug for detecting and reloading
	new dictionary.

2003-05-22  Stephen J. Turnbull  <stephen@xemacs.org>

	* subr.el (split-string): Implement specification that splitting on
	explicit separators retains null fields.  Add new argument
	OMIT-NULLS.  Special-case (split-string "a string").

2003-05-22  Stefan Monnier  <monnier@cs.yale.edu>

	* international/mule-cmds.el (select-safe-coding-system):
	Try default-buffer-file-coding-system too for automatic selection.

2003-05-21  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (ctl-x-map): Remove the C-x U binding added recently.

2003-05-21  Dave Love  <fx@gnu.org>

	* descr-text.el (unicodedata-file): New.
	(unicode-data): New (adapted from Unicode branch).
	(describe-char): Use it.  Print char's Unicode code point differently.
	Avoid elements with null cadr when formatting list.  Clarify error
	message when used in Help buffer.
	(button): Require when compiling.
	(describe-char-after): Alias for obsolete command.

2003-05-21  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gud-gdba-command-name): Use -noasync option for Gdb
	with MS windows.
	(gdb-display-end): Only make buffer writable temporarily.
	Move "View" submenu up one level.

2003-05-21  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-view-source, gdb-selected-view): New variables.
	(gdba): Inhibit DOS window in MS Windows.
	(gdb-inferior-io-mode): Use hexl instead of cat.
	(gdb-info-breakpoints-custom, gdb-assembler-custom, gdb-reset):
	Use text in margin for MS Windows as there is no image support.
	(gdb-restore-windows, gdb-setup-windows): Restore/start with
	assembler view if appropriate.
	(gdb-assembler-custom): Assembler code should display at point.
	Parse address correctly.
	(gdb-frame-handler): Accommodate selection of display of source
	or assembler.
	Add radio buttons to select display of source or assembler.

2003-05-20  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el (desktop-save): Ensure parameter is expanded and ends
	with a slash before assigning it to desktop-dirname and
	default-directory.
	(desktop-read): Put buffers existing prior to evaluating the
	desktop (and not reused) at the end of the buffer list.
	(desktop-create-buffer): Don't update desktop-first-buffer for old
	desktop files.

2003-05-19  John Paul Wallington  <jpw@gnu.org>

	* xml.el (xml-name-regexp): Wrap in `eval-and-compile'.

2003-05-19  Dave Love  <fx@gnu.org>

	* xml.el: Doc fixes.
	(xml-parse-file, xml-parse-region): Autoload.
	(xml-syntax-table, xml-name-regexp): New.
	(xml-parse-region): Narrow to region, set syntax-table and
	case-fold-search.  Reject fewer valid documents.
	(xml-parse-tag): Remove arg END.  Callers changed.
	(xml-parse-tag): Use skip-syntax-forward.  Use PARSE-DTD arg
	properly.  Don't use buffer-substring-no-properties.  Don't bind
	case-fold-search.  Fix syntax for empty elements.  Hoist consing
	of end-of-tag regexp out of loop.
	(xml-parse-attlist): Remove arg.  Callers changed.
	Use skip-syntax-forward, replace-regexp-in-string, forward-sexp.
	Allow non-ASCII names.
	(xml-skip-dtd): Remove arg.  Callers changed.  Change matching code.
	(xml-parse-dtd): Grok external DTDs.  Allow non-ASCII.
	Don't use match-string-no-properties.
	(xml-ucs-to-string): Delete.
	(xml-substitute-entity): New.
	(xml-substitute-special): Use it.
	(xml-debug-print-internal): Simplify insertions.
	(xml-parse-file): Avoid finding file in xml-mode.

2003-05-19  Kai Großjohann  <kai.grossjohann@gmx.net>

	* simple.el (kill-whole-line): New function.
	* bindings.el (global-map): Bind it.

2003-05-19  Richard M. Stallman  <rms@gnu.org>

	* net/goto-addr.el (goto-address-fontify-maximum-size):
	Value t means no limit.
	(goto-address-fontify): Implement that feature.

	* emacs-lisp/find-func.el (find-function-on-key):
	Move the call to find-function-other-window outside
	the save-excursion.

	* find-file.el (ff-special-constructs): Delete the Ada entry.

	* faces.el (x-create-frame-with-faces):
	Don't call face-set-after-frame-default.
	(face-set-after-frame-default): Copy attrs of global `default'
	face to FRAME's `default' face.

2003-05-19  Joe Kelsey  <joek@flyingcroc.net>

	* skeleton.el (skeleton-internal-1): Allow - as alternate
	interesting point marker and revert @ to just setting
	skeleton-positions.

2003-05-18  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lisp.el (beginning-of-defun-raw): Use shy-group.

	* progmodes/executable.el (executable-set-magic): Remove unused
	vars `point' and `buffer-modified-p'.

	* mail/sendmail.el (mail-mode): Don't bother setting paragraph-start.

	* mail/mail-extr.el: Use explicit coding tag.

	* international/mule.el (sgml-xml-auto-coding-function)
	(sgml-html-meta-auto-coding-function): Don't assume point-min == 1.

	* language/china-util.el (hz-set-msb-table): Build when compiling.
	(big5-to-cns): Pre-build the alist when compiling.

	* language/ind-util.el (indian-regexp-of-hashtbl-keys): Don't bother
	sorting the argument to regexp-opt.
	(indian--puthash-char): Use dolist rather than mapc.

2003-05-18  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (put-arrow): Rename gdb-put-arrow and simplify.
	(put-string): Rename gdb-put-string and simplify.
	(remove-strings): Rename gdb-remove-strings.
	(remove-arrow): Rename gdb-remove-arrow.
	(gdb-assembler-custom): Try to get line marker (arrow) to display
	in window (revisited).
	Use with-current-buffer where possible.

2003-05-18  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (ibuffer-display-summary): New customizable variable.
	(ibuffer-update-title-and-summary): Respect it.

2003-05-18  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-mult.el (ediff-default-filtering-regexp): New variable.

	* ediff-util.el (ediff-maybe-save-and-delete-merge): Change in a
	message.

	* ediff.el (ediff-directories,ediff-directory-revisions)
	(ediff-directories3,ediff-merge-directories)
	(ediff-merge-directories-with-ancestor,ediff-merge-directory-revisions)
	(ediff-merge-directory-revisions-with-ancestor): Make use of the new
	ediff-default-filtering-regexp variable.

2003-05-18  Richard M. Stallman  <rms@gnu.org>

	* which-func.el (which-func-current, which-func-format):
	Preload the risky-local-variable properties for them.

	* subr.el (prepare-change-group): Reinstate BUFFER arg; make it work.

2003-05-18  Nick Roberts  <nick@nick.uklinux.net>

	* gud.el (gdb): Define gud-nexti.
	(gud-menu-map): Add gud-nexti to map.
	(gud-tool-bar-map): Add gud-nexti and gud-stepi to toolbar.

	* toolbar/gud-stepi.xpm, toolbar/gud-stepi.pbm,
	toolbar/gud-nexti.xpm, toolbar/gud-nexti.pbm: New icons for debugger.

2003-05-17  John Paul Wallington  <jpw@gnu.org>

	* international/ja-dic-cnv.el (skkdic-okuri-nasi-entries)
	(skkdic-okuri-nasi-entries-count): Use defvar for non-constants.

	* register.el (number-to-register): Use `string-to-number' instead
	of `string-to-int'.

2003-05-17  Stefan Monnier  <monnier@cs.yale.edu>

	* log-edit.el: Don't require vc.el anymore.
	(log-edit-mode-map): Fold vc-log-mode-map into it.
	(vc-log-mode-map): Redefine as an alias.
	(vc-previous-comment): Don't widen.
	(vc-comment-to-change-log): Don't redundantly set paragraph-separate.
	Don't require `add-log' since it's already required at toplevel.

	* vc.el (vc-log-mode-map, vc-maximum-comment-ring-size)
	(vc-comment-ring, vc-comment-ring-index, vc-last-comment-match):
	Move vars to log-edit.el.
	(vc-new-comment-index, vc-previous-comment, vc-next-comment)
	(vc-comment-search-reverse, vc-comment-search-forward)
	(vc-comment-to-change-log): Move funs to log-edit.el.
	(vc-clear-context): Don't empty the comment-ring.
	(vc-finish-logentry): Don't add the comment onto the comment-ring.

	* log-edit.el (vc-log-mode-map, vc-maximum-comment-ring-size)
	(vc-comment-ring, vc-comment-ring-index, vc-last-comment-match):
	Move vars from vc.el.
	(vc-new-comment-index, vc-previous-comment, vc-next-comment)
	(vc-comment-search-reverse, vc-comment-search-forward)
	(vc-comment-to-change-log): Move funs from vc.el.
	(log-edit-show-files): Remove unused var `editbuf'.

	* progmodes/tcl.el (tcl-indent-exp): Remove dead code.
	(tcl-tab-always-indent): Default to tab-always-indent.

	* progmodes/perl-mode.el (perl-end-of-function): Remove unused var.
	(perl-tab-always-indent): Default to tab-always-indent.

	* which-func.el (which-func-format): Make it risky-local-variable.
	(which-func-table): New var.
	(which-func-current): Make it into a constant modeline spec.
	(which-func-previous): Remove.
	(which-func-update): Only update the selected window.
	(which-func-update-1): Use the new var to allow the current
	function to be different for a buffer shown in two windows.

	* subr.el (with-selected-window): New macro.
	(dolist, dotimes, with-current-buffer): Use backquotes.
	(when, unless, save-match-data, combine-after-change-calls)
	(with-output-to-string, with-temp-buffer): Add `declare' info.
	(listify-key-sequence): Don't allocate unnecessarily.
	(read-quoted-char): Allow up to base 36.
	(prepare-change-group): Remove unimplemented argument.
	(macro-declaration-function): Avoid `dolist' and `cadr'.

	* wid-edit.el (pp-to-string, Info-goto-node): Don't autoload.
	(widget-choose, widget-map-buttons): Use with-current-buffer.
	(widget-field-add-space): Change to nil (and to defconst).
	(widget-info-link-action): Use `info'.

2003-05-17  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-info-frames-custom): Reverse contrast of face for
	selected frame.
	(gdb-annotation-rules): Stop using frames-invalid and
	breakpoints-invalid annotations.  Update after post-prompt instead.
	(gdb-post-prompt): Update frames and breakpoints here.
	(gdb-invalidate-frame-and-assembler)
	(gdb-invalidate-breakpoints-and-assembler): Remove.
	(gdb-current-address): Remove.
	(gdb-previous-address): New variable.
	(gud-until): Extend to work in Assembler buffer.
	(gdb-append-to-inferior-io): Select IO buffer when there is output.
	(gdb-assembler-custom): Try to get line marker (arrow) to display
	in window.  Correct parsing for OS dependent output syntax of Gdb
	command, where.
	(gdb-frame-handler): Correct parsing for OS dependent output
	syntax of Gdb command, frame.
	(gdb-invalidate-assembler): Update assembler buffer correctly when
	frame changes (revisited).

2003-05-16  Stefan Monnier  <monnier@cs.yale.edu>

	* imenu.el (imenu--split-menu): Remove unused var `count'.
	Don't copy the sequence since we're already modifying it elsewhere.
	(imenu--create-keymap): Rename from imenu--create-keymap-1.
	Add optional `cmd' argument.  Remove unused var `counter'.
	(imenu-update-menubar): Use the new arg to keep the old behavior.
	(imenu--mouse-menu): Don't use the arg, to recover the lost behavior.

2003-05-16  Lute Kamstra  <lute@gnu.org>

	* hl-line.el (hl-line-highlight, global-hl-line-highlight):
	Use `line-beginning-position' to determine the beginning of the next
	line.

2003-05-16  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (mule-menu-keymap): Enable the menu
	set-various-coding-system when
	default-enable-multibyte-characters is non-nil.

2003-05-15  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/autoload.el (make-autoload): Add arglist for
	define-derived-mode.

2003-05-15  Lute Kamstra  <lute@gnu.org>

	* hl-line.el: Rewrite the local minor mode so that it can be
	sticky as well and made sticky the default.  Reimplement the
	global minor mode.  Update the commentary section to document
	these changes.
	(hl-line-sticky-flag): New user option.
	(hl-line-overlay): Make it buffer-local and give it a docstring.
	(global-hl-line-overlay): New variable.
	(hl-line-mode): Rewrite to use `hl-line-sticky-flag'.
	(hl-line-highlight): Rewrite to use `hl-line-sticky-flag'.
	(hl-line-unhighlight): Update docstring.
	(global-hl-line-mode): Implement directly so that is does not
	depend on `hl-line-mode' any more.
	(global-hl-line-highlight, global-hl-line-unhighlight): New functions.

2003-05-15  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (cyrillic-koi8-t): Alias of koi8-t.

2003-05-15  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Avoid unnecessary calls to funs in header and footer
	variables.  Reported by Greg Hill <ghill@synergymicro.com>.
	(ps-print-version): New version number (6.6.1).
	(ps-begin-page): Code fix.
	(ps-generate-string-list, ps-header-footer-string): New funs.
	(ps-lh-cache, ps-rh-cache, ps-lf-cache, ps-rf-cache): New vars.

	* ps-mule.el (ps-mule-header-string-charsets):
	Call ps-header-footer-string to avoid unnecessary calls to functions
	in header and footer variables.

2003-05-15  John Paul Wallington  <jpw@gnu.org>

	* mail/rmail.el (rmail-ignored-headers): Ignore Face: header.

2003-05-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-compile-history, tex-input-files-re)
	(tex-use-reftex, tex-compile-commands): New vars.
	(tex-summarize-command, tex-uptodate-p, tex-executable-exists-p)
	(tex-command-executable, tex-command-active-p, tex-compile-default)
	New functions.
	(tex-compile): New command.
	(tex-mode-map): Bind it to C-c C-c.

	* vc-svn.el (completion-ignored-extensions): Add .svn.
	(vc-svn-delete-file): New function.

	* pcvs.el (cvs-append-to-ignore): New arg `old-dir'.
	(cvs-mode-ignore): Use it.

	* pcvs-parse.el (cvs-parse-table): Remove unused var `type'.
	Look up `.cvsignore' to see what to do with `new-dir' messages.
	(cvs-parse-merge): Remove unused var `handled'.

2003-05-14  Christoph Wedler  <christoph.wedler@sap.com>

	* format.el (format-annotate-function): Copy coding system into the
	new temp buffer.

2003-05-14  John Paul Wallington  <jpw@gnu.org>

	* ls-lisp.el (insert-directory): Discard --dired switch when
	`ls-lisp-use-insert-directory-program' is nil.

2003-05-13  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/ispell.el (xemacsp): Remove.  Use (featurep 'xemacs).
	(ispell-graphic-p): Inline and then remove.
	(toplevel): Get rid of unnecessary loop.
	(ispell-parse-output, ispell-complete-word): Replace (substring s 0 1)
	with a call to aref.
	(ispell-get-line): Remove unused arg `reg-end'.
	(ispell-region): Update corresponding call.

	* progmodes/cpp.el (cpp-make-overlay-hidden): Don't make intangible.

	* progmodes/compile.el (compile-internal): Use with-current-buffer.
	(compilation-set-window-height): Use save-selected-window.

	* progmodes/ada-xref.el (ada-xref-update-project-menu): Use easymenu.
	(ada-goto-declaration-other-frame): Remove unused arg other-frame.
	(ada-gdb-application): Remove unused vars comint-exec, in-post-mode,
	and gud-gdb-massage-args.

	* progmodes/cc-langs.el (c-lang-defvar-init-form-tail):
	This is actually not a constant.

	* progmodes/autoconf.el (autoconf-current-defun-function):
	Copy the syntax table before modifying it.

	* progmodes/ada-mode.el (ada-in-comment-p, ada-in-string-p)
	(ada-in-string-or-comment-p): Use line-beginning-position.

	* textmodes/reftex.el (reftex-select-with-char): Don't assume
	that point-min == 1.

	* textmodes/reftex-toc.el (reftex-toc-visit-location):
	Don't switch the current window if the new buffer is in another.
	(reftex-toc): Don't assume that point-min == 1.

	* textmodes/reftex-parse.el (reftex-what-macro): Don't assume
	that point-min == 1.

	* textmodes/reftex-cite.el (reftex-extract-bib-entries)
	(reftex-extract-bib-entries-from-thebibliography): New arg re-list.
	(reftex-extract-bib-entries): Use ^ rather than \(\`\|[\n\r]\).
	Use member-ignore-case.  Don't add unnecessary trailing \n.
	(reftex-offer-bib-menu): Consolidate duplicated code from
	reftex-extract-bib-entries and
	reftex-extract-bib-entries-from-thebibliography.

	* simple.el (back-to-indentation): Simplify.
	(undo-equiv-table, undo-in-region, undo-no-redo): New vars.
	(undo): Use them to implement the no-redo form of undo.
	(undo-only): New fun.
	(shell-command): Don't require `shell' since shell-mode is autoloaded.
	(insert-buffer): Simplify.
	(completion-setup-function): Use minibufferp.
	(event-apply-alt-modifier, event-apply-super-modifier)
	(event-apply-hyper-modifier, event-apply-shift-modifier)
	(event-apply-control-modifier, event-apply-meta-modifier):
	Fix docstring to show the proper key sequence.

	* uniquify.el (uniquify-after-kill-buffer-p): Set default to t.
	(uniquify-ignore-buffers-re): Revert to nil now that uniquify
	is more careful about preserving buffer names.

	* menu-bar.el (menu-bar-options-menu) <cua-mode>:
	Use menu-bar-make-mm-toggle.

	* files.el (file-relative-name): Remove dead code.
	Make sure \n in a filename does not confuse us.

	* help-fns.el (describe-variable): Mention permanent local status.

	* comint.el (comint-carriage-motion, comint-output-filter):
	Bind inhibit-read-only rather than buffer-read-only.
	(comint-truncate-buffer): Bind inhibit-read-only.

	* pcvs.el (cvs-make-cvs-buffer): Add the tag info.
	(cvs-mode): Prevent pilot-error.

	* vc-mcvs.el (vc-mcvs-registered, vc-mcvs-root): Check the output
	of file-name-directory for nil.

2003-05-13  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-open-stream): Don't hard code
	starttls-program.

2003-05-13  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-global-mode): Add :link entry
	to the commentary section in whitespace.el

2003-05-13  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-invalidate-assembler): Update assembler buffer
	correctly when frame changes.
	(gdb-info-threads-custom, gdb-threads-buffer-name)
	(gdb-display-threads-buffer, gdb-frame-threads-buffer)
	(gdb-threads-mode-map, gdb-threads-mode, gdb-get-thread-number)
	(gdb-threads-select, gdb-threads-mouse-select): New functions and
	variable for a buffer that provides a selectable threads list.

2003-05-12  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-parse.el (cvs-parse-table): `New directory' messages include
	the full path.

	* pcvs.el (cvs-minor-current-files): Move before first use.
	(defun-cvs-mode): Remove unused var `restdoc'.
	(cvs-edit-log-revision, ediff-after-quit-hook-internal): Declare.
	(cvs-mode-diff-backup): Remove unused var `filter'.
	(cvs-mode-run): Remove unused var `cvs-buf'.
	(cvs-mode-do): Remove unused arg `parse'.
	(cvs-retrieve-revision): Make sure HEAD gets the head of the branch.

	* textmodes/sgml-mode.el (sgml-namespace-re): New const.
	(sgml-namespace-face): New face.
	(sgml-font-lock-keywords-1): Use them.

2003-05-11  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (info-lookup-make-completions): Allow colons in index
	entries by looking for ": " to terminate, as per latest info.el.

2003-05-11  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-mcvs.el (vc-mcvs-command): Filter output of `status'.
	(vc-mcvs-state, vc-mcvs-dir-state, vc-mcvs-print-log, vc-mcvs-diff):
	Change dir so that the filtered output of `mcvs makes sense.
	(vc-mcvs-mode-line-string): Handle the case where CVS is desync'd.
	(vc-mcvs-diff-tree): Don't bother with the local-diff code.
	(vc-mcvs-create-snapshot): Use `branch' and `switch'.

2003-05-10  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent): Try to align to adjacent comments.
	(comment-with-narrowing): Actually use the arguments.
	(comment-valid-prefix-p): Rename from comment-valid-prefix
	and fix to actually use its argument.

	* tex-mode.el (tex-mode-syntax-table): ~ is not whitespace.
	(tex-guess-mode): Add `renewcommand'.
	(tex-mode): Move the autoload to get the correct docstring and usage.

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Refresh the dirname in the case that rename-buffer was skipped.
	(uniquify-buffer-file-name): Return a dirname with no trailing slash.

	* mail/smtpmail.el (smtpmail-send-queued-mail): Use point-at-bol
	instead of forward-line.

2003-05-10  Oliver Scholz  <alkibiades@gmx.de>

	* startup.el (fancy-splash-default-action): Fix docstring.

2003-05-09  Sam Steingold  <sds@gnu.org>

	* pcvs.el (cvs-mode-find-file): Fixed the last patch's logic.

2003-05-09  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent): Be more careful when inserting
	the space, and insert it before setting `begpos'.

	* vc.el: New backend functions `delete-file' and `repository-hostname'.
	(vc-stay-local): New var.  Mostly taken from vc-cvs-stay-local.
	(vc-stay-local-p): New fun.  Adapted from vc-cvs-stay-local-p.
	(vc-diff-switches-list): Revert to the Emacs-21.[123] semantics.
	Mark as obsolete.
	(vc-delete-file): New command.
	(vc-default-rename-file): New function.
	(vc-rename-file): Use it.
	Be careful to disallow renaming if the file is locked or out-of-date.
	(vc-ensure-vc-buffer, vc-next-action-on-file, vc-insert-headers)
	(vc-cancel-version, vc-annotate): Use buffer-file-name variable.

	* vc-mcvs.el (vc-mcvs-stay-local): Remove unused var.
	(vc-mcvs-state, vc-mcvs-dir-state, vc-mcvs-print-log, vc-mcvs-diff)
	(vc-mcvs-diff-tree, vc-mcvs-annotate-command)
	(vc-mcvs-make-version-backups-p): Use vc-stay-local-p.
	(vc-mcvs-checkin): Disallow commits to a numbered rev.
	(vc-mcvs-repository-hostname): New function.
	(vc-mcvs-stay-local-p): Remove.

	* vc-cvs.el (vc-cvs-mode-line-string): Use vc-default-mode-line-string.
	(vc-cvs-delete-file, vc-cvs-rename-file): New functions.

	* vc-svn.el (vc-svn-rename-file): New fun.
	(vc-svn-diff): Correctly check svn's return status.
	(vc-svn-state, vc-svn-dir-state, vc-svn-print-log, vc-svn-diff)
	(vc-svn-diff-tree): Use vc-stay-local-p.
	(vc-svn-register-switches, vc-svn-diff-switches, vc-svn-header)
	(vc-svn-use-edit): Fix the :version property.
	(vc-svn-stay-local): Remove unused var.
	(vc-svn-mode-line-string): Remove, use the default instead.
	(vc-svn-repository-hostname): New fun taken from vc-svn-stay-local-p.
	(vc-svn-stay-local-p): Remove.

	* uniquify.el: Use the original buffer-name as `base' in place of the
	nondirectory part of the file name.
	(uniquify-rationalize-file-buffer-names):
	Split the `newbuffile' arg into `base' and `dirname'.
	Reuse old uniquify-items to avoid recomputing their base&dirname.
	(uniquify-buffer-file-name): Only return the directory part.
	(uniquify-rerationalize-w/o-cb): Don't bother resetting proposed names.
	(rename-buffer): Use the `newname' arg as base.
	(create-file-buffer): Split the file name into base and dirname.

2003-05-09  Jesper Harder  <harder@ifa.au.dk>

	* mail/smtpmail.el (smtpmail-send-queued-mail): Don't use kill-line.

2003-05-08  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-after-kill-buffer-p): Fix misleading docstring.
	(uniquify-make-item): Make `proposed' optional.
	(uniquify-rationalize-file-buffer-names): Don't compute the
	initial proposed name.
	(uniquify-buffer-file-name): Remove dead code.
	(uniquify-strip-common-suffix): New var.
	(uniquify-rationalize): Always recompute initial proposed name.
	Strip common suffix if requested.

	* vc-rcs.el (vc-rcs-register, vc-rcs-checkin, vc-rcs-checkout)
	(vc-rcs-find-version, vc-rcs-diff): Use vc-switches.

	* vc-sccs.el (vc-sccs-register, vc-sccs-find-version)
	(vc-sccs-checkin, vc-sccs-checkout, vc-sccs-diff): Use vc-switches.
	(vc-sccs-register): Remove unused var `|'.

	* vc-mcvs.el (vc-mcvs-read): Don't require `file' to exist.
	(vc-mcvs-diff): Don't return 0 for newly added empty files.
	(vc-mcvs-register, vc-mcvs-checkin, vc-mcvs-find-version)
	(vc-mcvs-checkout, vc-mcvs-diff, vc-mcvs-diff-tree): Use vc-switches.

	* vc-cvs.el (vc-cvs-dired-state-info): Use `added' for added files and
	don't use `concat' unnecessarily.  Remove impossible cases.
	(vc-cvs-diff): Don't return 0 for newly added empty files.
	(vc-cvs-stay-local-p): Simplify.
	(vc-cvs-register, vc-cvs-checkin, vc-cvs-find-version, vc-cvs-diff)
	(vc-cvs-diff-tree, vc-cvs-checkout): Use vc-switches.

	* vc-svn.el (vc-svn-dired-state-info): Use `added' for added files and
	don't use `concat' unnecessarily.  Remove impossible cases.
	(vc-svn-register, vc-svn-find-version, vc-svn-diff-tree):
	Use vc-switches.
	(vc-svn-checkin): Use vc-switches.  Fix up regexp.
	(vc-svn-diff): Use vc-switches.
	Don't return 0 for newly added empty files.
	Don't use svn's return status.
	(vc-svn-parse-status): Recognize copied files as well.
	Use the last-modified revision for workfile-version.

	* vc-hooks.el (vc-default-workfile-unchanged-p): Pass nil
	rather than (vc-workfile-version file) to diff.

	* vc.el (with-vc-properties, with-vc-file, edit-vc-file):
	Add `declare's for debugging and indentation.
	(vc-do-command): Use `remq'.
	(vc-buffer-context): Remove unused var `curbuf'.
	(vc-next-action-dired): Remove unused var `dired-dir'.
	(vc-switches): New fun.
	(vc-diff-switches-list): Use it.
	(vc-dired-hook): Remove unused var `cvs-dir'.
	(vc-dired-purge): Remove unused var `subdir'.
	(vc-cancel-version): Remove unused var `config'.
	(vc-rename-master): Use dolist iso mapcar.
	(vc-rename-file): Remove redundant tests.
	Clear the properties of the old file name.
	(vc-annotate): Pass the complete filename to `annotate-command'.
	(vc-annotate-lines): Remove unused var `overlay'.

2003-05-08  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (diary-pull-attrs): Make `ret-attr',
	`attr' local.
	(list-diary-entries): Make `temp' local.
	(fancy-diary-display): Make `marks', `temp-face', `faceinfo' local.
	(diary-mail-entries): There is no fancy-diary-buffer if there are
	no diary entries.  Use call-interactively.
	(mark-diary-entries): Make `temp' local.
	(mark-sexp-diary-entries): Make `marks' local, remove `temp'.
	(list-sexp-diary-entries): Make `temp' local.
	(add-to-diary-list): Make `prefix' local.

2003-05-08  Dave Love  <fx@gnu.org>

	* international/utf-7.el: New file.

2003-05-07  Francis J. Wright  <F.J.Wright@qmul.ac.uk>

	* files.el (insert-file-contents-literally): Allow it to be called
	within a magic file name handler.

2003-05-07  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Don't uniquify if there is no filename.

	* vc-hooks.el: Use buffer-file-name variable rather than function.
	(vc-handled-backends): Add SVN and MCVS.
	(vc-mode-line): Call vc-backend only once.
	(find-file-hook, find-file-not-found-hook): Use the new
	names rather than ...-hooks.

	* uniquify.el (uniquify-item, uniquify-get-proposed-name)
	(uniquify-rationalize-conflicting-sublist): Rename filename -> dirname.
	(uniquify-rationalize): New fun.  Set uniquify-managed to the fix-list.
	(uniquify-rationalize-file-buffer-names): Use it and make the args
	non-optional (i.e. don't support "re-rationalize all" any more).
	(uniquify-rerationalize-w/o-cb): New fun.
	(uniquify-maybe-rerationalize-w/o-cb): Use it to rerationalize
	immediately and only the relevant buffers.
	Merged from uniquify-delay-rationalize-file-buffer-names and
	uniquify-delayed-rationalize-file-buffer-names.
	(kill-buffer-hook, rename-buffer): Use it.

2003-05-06  Jesper Harder  <harder@ifa.au.dk>

	* progmodes/compile.el (compile-internal): Don't quote nil and t in
	docstrings.

	* emacs-lisp/eldoc.el (eldoc-echo-area-use-multiline-p): Likewise.

	* emacs-lisp/cl-macs.el (case, typecase): Likewise.

	* allout.el (allout-auto-activation)
	(allout-use-mode-specific-leader, allout-reindent-bodies)
	(allout-unprotected): Likewise.

	* progmodes/tcl.el (tcl-explain-indentation): Likewise.

	* progmodes/idlwave.el (idlwave-complete-special): Likewise.

	* progmodes/cpp.el (cpp-edit-list): Likewise.

	* progmodes/cperl-mode.el (cperl-lineup): Likewise.

	* progmodes/cc-align.el (c-lineup-argcont, c-lineup-gcc-asm-reg):
	Likewise.

	* play/mpuz.el (mpuz-silent): Likewise.

	* play/decipher.el (decipher-ignore-spaces): Likewise.

	* net/rlogin.el (rlogin-process-connection-type): Likewise.

	* mail/rmail.el (rmail-primary-inbox-list): Likewise.

	* mail/mailalias.el (mail-directory-function)
	(mail-directory-requery, mail-directory): Likewise.

	* emacs-lisp/lucid.el (buffer-syntactic-context): Likewise.

	* emacs-lisp/lmenu.el (popup-dialog-box): Likewise.

	* type-break.el (type-break-good-rest-interval)
	(type-break-query-mode, type-break-query-function)
	(type-break-mode-line-message-mode): Likewise.

	* skeleton.el (skeleton-autowrap, skeleton-untabify)
	(skeleton-newline-indent-rigidly, skeleton-insert)
	(skeleton-read): Likewise.

	* simple.el (newline): Likewise.

	* ps-print.el (ps-zebra-stripe-follow): Likewise.

	* mwheel.el (mouse-wheel-scroll-amount): Likewise.

	* env.el (setenv): Likewise.

2003-05-06  Stefan Monnier  <monnier@cs.yale.edu>

	* imenu.el (imenu--generic-function): Use font-lock-defaults
	case setting if imenu-case-fold-search is not locally set.

	* uniquify.el (uniquify-managed): New var.
	(uniquify-rationalize-file-buffer-names, rename-buffer): Use it and set
	it to prevent accidental renaming of unrelated buffers.
	(uniquify-delay-rationalize-file-buffer-names): Use it to avoid
	the cost of uniquify when killing unrelated buffers.

	* newcomment.el (comment-set-column, comment-kill)
	(comment-or-uncomment-region): Call comment-normalize-vars
	since these functions are autoloaded.

	* help-fns.el (help-add-fundoc-usage): Use t for "no arglist".
	* emacs-lisp/advice.el (ad-make-advised-docstring): Adjust usage.

2003-05-06  Lute Kamstra  <lute@gnu.org>

	* hl-line.el: Removed an erroneous comment.
	(hl-line-mode): Use buffer local hooks.
	(global-hl-line-mode): Turn local modes on unconditionally.
	(hl-line-highlight): Comment fix.

2003-05-06  Richard M. Stallman  <rms@gnu.org>

	* newcomment.el (comment-search-forward): Delete autoload cookie.

2003-05-06  Kenichi Handa  <handa@m17n.org>

	* arc-mode.el (archive-set-buffer-as-visiting-file):
	Use after-insert-file-set-coding, not
	after-insert-file-set-buffer-file-coding-system.

2003-05-05  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-buffer-name-style)
	(uniquify-after-kill-buffer-p, uniquify-ask-about-buffer-names-p)
	(uniquify-ignore-buffers-re, uniquify-min-dir-content)
	(uniquify-separator, uniquify-trailing-separator-p): Remove redundant
	group specification.
	(uniquify-file-name-nondirectory): Delete.
	(uniquify-rationalize-file-buffer-names): Simplify.
	Use directory names as `filename' component of uniquify-item.
	(uniquify-get-proposed-name): Adjust now that `filename' does not
	include `base'.

	* vc-svn.el: New file.

2003-05-05  John Paul Wallington  <jpw@gnu.org>

	* emacs-lisp/autoload.el (batch-update-autoloads):
	Call `update-directory-autoloads'.

2003-05-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* dired.el (dired-find-file): Bind find-file-run-dired around
	the call to find-file.

2003-05-04  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el: Move provide to end of file.
	(uniquify-ref-base, uniquify-ref-filename, uniquify-ref-buffer)
	(uniquify-ref-proposed, uniquify-set-proposed): Remove.
	(uniquify-item): New struct.  Update users of uniquify-ref-*.
	(uniquify-get-proposed-name, uniquify-rationalize-a-list):
	Make `depth' optional.
	(uniquify-non-file-buffer-names): Remove.
	(uniquify-rationalize-file-buffer-names): Don't set it up.
	Use uniquify-make-item and don't pass the now-optional depth.
	(uniquify-rationalize-conflicting-sublist): Check the new buffer
	name directly instead of relying on uniquify-non-file-buffer-names.
	(uniquify-rename-buffer): Use with-current-buffer and pass
	the `unique' arg to rename-buffer.

	* vc-mcvs.el (vc-mcvs-mode-line-string): Fix thinko.
	(vc-mcvs-rename-file): New function.

2003-05-04  Emmanuel Briot  <briot@gnat.com>

	* progmodes/ada-mode.el
	* progmodes/ada-prj.el
	* progmodes/ada-stmt.el
	* progmodes/ada-xref.el (ada-xemacs): Variable removed, since it's
	better to use (featurep 'xemacs).
	Removed warnings generated with Emacs 21.3.x (mostly by adding
	needed `require' statements).

2003-05-04  Nick Roberts  <nick@nick.uklinux.net>

	* toolbar/gud-break.pbm, toolbar/gud-cont.pbm, toolbar/gud-display.pbm,
	toolbar/gud-down.pbm, toolbar/gud-finish.pbm, toolbar/gud-until.pbm,
	toolbar/gud-next.pbm, toolbar/gud-print.pbm, toolbar/gud-remove.pbm,
	toolbar/gud-run.pbm, toolbar/gud-step.pbm, toolbar/gud-up.pbm:
	Correct size for cleaner bitmaps.

2003-05-03  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl-extra.el (cl-map-keymap): Redefine as alias.
	(cl-map-keymap-recursively): Use map-keymap.
	(cl-macroexpand-all): Don't quote functions.

	* emacs-lisp/lucid.el (cl-map-keymap): Be careful with aliases.

	* emacs-lisp/advice.el (ad-get-enabled-advices, ad-special-forms)
	(ad-arglist, ad-subr-arglist): Use push and match-string.
	(ad-make-advised-docstring): Extract & reinsert the usage info.

	* help-fns.el (help-add-fundoc-usage): Allow arglist to be a string.

2003-05-03  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (breakpoint-enabled-icon, breakpoint-disabled-icon):
	Include bitmap data for monochrome display.
	(breakpoint-enabled-pbm-data, breakpoint-disabled-pbm-data):
	New constants.

2003-05-03  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/autoload.el (update-directory-autoloads): Renamed from
	update-autoloads-from-directories.

	* progmodes/cperl-mode.el (cperl-nonoverridable-face): Doc fix.

	* mail/sendmail.el (mail-dont-send, mail-bury): Make ARG optional.

	* view.el (Helper-return-blurb): Add defvar.  (Also rearrange defuns.)

	* uniquify.el (uniquify-ignore-buffers-re): Change default
	to match some Gnus buffers.

	* newcomment.el (comment-search-forward): Add autoload cookie.

	* isearch.el (isearch-complete): Update isearch-message.

	* filesets.el (filesets-data): Add another defvar.
	(filesets-verbosity): Doc fix.

2003-05-02  Tak Ota  <Takaaki.Ota@am.sony.com>

	* recentf.el (recentf-cleanup): Swap tests for exclusion and
	accessibility.

2003-05-01  Eduardo Muñoz  <emufer@terra.es>  (tiny change)

	* ls-lisp.el (ls-lisp-format-file-size): New function to implement
	"-h" switch.
	(ls-lisp-format): Use it.

2003-05-01  Kenichi Handa  <handa@m17n.org>

	* international/utf-8.el (utf-translate-cjk-mode): Update the
	second extra slot of the translation table
	utf-translation-table-for-encode.
	(mule-utf-8): Set the property translation-table-for-encode.

2003-04-30  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-vc-command-advice): Don't parse "cvs update -p" output.
	(cvs-mode-find-file): Don't complain if bound to a non-mouse event.

	* textmodes/fill.el (text-property-default-nonsticky): Add fill-space.
	(fill-delete-newlines): Respect the new property.
	(fill-newline): Use the property instead of leaving "spurious" spaces.

	* emacs-lisp/easymenu.el (easy-menu-get-map): Correctly handle
	non-submap bindings.

2003-04-30  Emmanuel Briot  <briot@gnat.com>

	* progmodes/ada-mode.el (ada-search-directories): Take into account
	ADA_INCLUDE_PATH for better compatibility with GNAT.
	(ada-contextual-menu): Menu defined through `easy-menu-define'
	instead.  Various adjustments to the indentation engine (handling of
	subtypes, begin blocks, etc.).
	(ada-create-menu): Major rewrite of the handling of menus to use
	`easy-menu-define' for cleaner code and better compatibility with
	XEmacs.  All menus that were previously in ada-xref.el and
	ada-prj.el are now defined in this package, which makes it easier to
	edit menus.
	(ada-narrow-to-defun): Add support for `narrow-to-region'.
	No longer explicitly load ada-xref.el and ada-prj.el.  Use autoload
	statements instead.

	* progmodes/ada-xref.el (ada-gnatls-args): New variable.
	Add support for specifying arguments to gnatls.
	(ada-initialize-runtime-library): Properly parse "." in the output
	of gnatls.
	(ada-add-keymap): Remove since this is now done in ada-mode.el itself.
	(ada-add-ada-menu): Likewise.
	(ada-set-default-project-file): New parameter KEEP-EXISTING.
	(ada-prj-find-prj-file): New parameter FILE.
	(ada-parse-prj-file): Take into account the ADA_INCLUDE_PATH and
	ADA_OBJECTS_PATH environment variables.  Minor reorganization of
	the code.
	(ada-get-all-references): Add support for GNAT 3.16 cross-references.

	* progmodes/ada-prj.el (ada-prj-add-keymap): Move to ada-mode.el
	directly.  Add dependency on ada-xref.el to avoid compilation
	warnings.
	(ada-prj-get-prj-dir): Remove, no longer needed.

	* progmodes/ada-stmt.el (ada-stmt-add-to-ada-menu):
	Move to ada-mode.el.
	(ada-template-map): Merge with the keymap handling in ada-mode.el.

2003-04-29  Stefan Monnier  <monnier@cs.yale.edu>

	* isearch.el (isearch-complete1): Don't allocate unnecessarily.
	(isearch-complete-edit): Adjust to Emacs-21's new minibuffer handling.
	(isearch-update-ring): Use push.

2003-04-29  Oliver Scholz  <epameinondas@gmx.de>

	* play/gamegrid.el: Added a comment explaining the various ways to
	save a game score on POSIX systems.
	(gamegrid-add-score-with-update-game-score): Use `cond' instead of
	`if'.  Provide for the case that FILE is an absolute filename.
	Create the directory "$HOME/.emacs.d/games", if necessary.

2003-04-29  John Paul Wallington  <jpw@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-cl-warn): Use `string-match'.

2003-04-28  Dave Love  <fx@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-cl-warn): Avoid cl warnings
	from caaar & al.

2003-04-28  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (reset-language-environment):
	Raise the priority of mule-utf-8, mule-utf-16-be-with-signature and
	mule-utf-16-le-with-signature.

	* international/mule-conf.el: Set coding-category-utf-16-be to
	mule-utf-16-be-with-signature, coding-category-utf-16-le to
	mule-utf-16-le-with-signature.  Raise the priority of
	coding-category-utf-8, coding-category-utf-16-be, and
	coding-category-utf-16-le

2003-04-27  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* scroll-bar.el (scroll-bar-drag-1): Replace beginning-of-line with
	vertical-motion.

2003-04-27  David Ponce  <david@dponce.com>

	* recentf.el

	Major rewrite.  The code is reordered, cleaner and faster.
	Introduce new options to automatically cleanup the recent list,
	and to handle filename transformation (for example to use true
	filenames).

	(recentf-version): New constant.
	(recentf-save-file-header): Move.
	(recentf-data-cache): New variable.
	(recentf-update-menu-p, recentf-initialized-p): Remove.
	(recentf-menu-customization-changed): Move.  Doc fix.
	(recentf-max-saved-items): Doc fix.
	(recentf-save-file): Doc fix.  No more expand filename here.
	(recentf-exclude, recentf-menu-action)
	(recentf-menu-filter): Doc fix.
	(recentf-menu-append-commands-flag): Rename from...
	(recentf-menu-append-commands-p): Make obsolete.
	(recentf-keep-non-readable-files-flag): Rename from...
	(recentf-keep-non-readable-files-p): Make obsolete.
	(recentf-auto-cleanup, recentf-filename-handler): New options.
	(recentf-string-equal, recentf-string-lessp)
	(recentf-string-member): New functions.
	(recentf-trunc-list): Move.
	(recentf-dump-variable): Move.  Better code and output format.
	(recentf-auto-cleanup-timer): New variable.
	(recentf-auto-cleanup): New function.
	(recentf-push, recentf-expand-file-name): New functions.
	(recentf-add-file): In-line.  Use above functions.
	(recentf-remove-if-non-readable): In-line.  Expand file name.
	(recentf-find-file): Use `recentf-remove-if-non-readable'.
	(recentf-directory-compare): Move.  Use `recentf-string-equal'
	and `recentf-string-lessp' to do comparisons.
	(recentf-menu-items-for-commands)
	(recentf-menu-filter-commands): Move.
	(recentf-elements, recentf-make-menu-element)
	(recentf-menu-element-item, recentf-menu-element-value)
	(recentf-set-menu-element-item, recentf-set-menu-element-value)
	(recentf-sub-menu-element-p, recentf-make-default-menu-element)
	(recentf-menu-elements): In-line.  Some doc fix.
	(recentf-apply-menu-filter): Better code.
	(recentf-make-menu-items): Doc fix.
	Use `recentf-menu-append-commands-flag'.
	(recentf-make-menu-item): In-lined.  Better code.
	(recentf-clear-data): New function.
	(recentf-sort-ascending, recentf-sort-descending)
	(recentf-sort-basenames-ascending)
	(recentf-sort-basenames-descending)
	(recentf-sort-directories-ascending)
	(recentf-sort-directories-descending)
	(recentf-show-basenames-ascending)
	(recentf-show-basenames-descending): In-line.  Better code.  Doc fix.
	(recentf-show-basenames)
	(recentf-relative-filter): Better code.  Doc fix.
	(recentf-arrange-by-rule-subfilter): Doc fix.  Improve :set code.
	(recentf-match-rule-p): Use filename instead of file-path.
	(recentf-arrange-by-rule, recentf-build-mode-rules)
	(recentf-arrange-by-mode, recentf-build-dir-rules)
	(recentf-file-name-nondir)
	(recentf-filter-changer-alist): Some doc fix and code cleanup.
	(recentf-filter-changer-goto-next): Doc fix.
	Call `recentf-clear-data'.
	(recentf-filter-changer-get-current)
	(recentf-filter-changer-get-next): In-line.  Doc fix and better code.
	(recentf-filter-changer): Doc fix and better code.
	(recentf-cancel-dialog): Doc fix.
	(recentf-dialog-mode-map): Initialize in defvar.
	(recentf-dialog-mode): Doc fix.
	(recentf-track-opened-file): Rename from...
	(recentf-add-file-hook): Remove.
	(recentf-track-closed-file): Rename from...
	(recentf-remove-file-hook): Remove.
	(recentf-update-menu-hook): Remove.  Replace by...
	(recentf-update-menu): New.  Better catch unnecessary updates.
	Display a message on error.
	(recentf-used-hooks): New constant.
	(recentf-enabled-p): New function.
	(recentf-edit-selected-items)
	(recentf-open-files-action)
	(recentf-open-files-item-shift): Doc fix.
	(recentf-edit-list-action)
	(recentf-open-files-item): Doc fix.  Code cleanup.
	(recentf-edit-list, recentf-open-files)
	(recentf-open-more-files): Likewise.  Remove autoload cookie.
	(recentf-save-list, recentf-cleanup): Likewise.  Move.
	(recentf-load-list): New command.
	(recentf-mode): Better code.  Does nothing if enabling the already
	enabled mode.

2003-04-27  Alan Mackenzie  <acm@muc.de>

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Don't count a "//("
	which appears inside a character set.
	(regexp-opt-not-groupie*-re): New constant.

2003-04-26  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (ibuffer-name-map, ibuffer-mode-name-map)
	(ibuffer-mode-filter-group-map): Initialize in `defvar'.
	(ibuffer-do-view-1): Use `make-frame' instead of `new-frame'.

2003-04-25  Jan Nieuwenhuizen  <janneke@gnu.org>

	* info.el (Info-unescape-quotes, Info-split-parameter-string)
	(Info-display-images-node): New functions for displaying images.
	(Info-select-node): Call Info-display-images-node.

2003-04-25  David Ponce  <david.ponce@wanadoo.fr>

	* files.el (file-relative-name): Recognize "c:/foo" as absolute
	file name.

2003-04-24  Sam Steingold  <sds@gnu.org>

	* calendar/diary-lib.el (fancy-diary-display-mode): Bind "q" to
	`quit-window' in the fancy diary buffer.

	* emacs-lisp/cl-indent.el: `symbol-macrolet' is similar to `let',
	not `multiple-value-bind'.

2003-04-24  Lars Hansen  <larsh@math.ku.dk>

	* subr.el (assq-delete-all): Ignore non-cons elements.

2003-04-24  John Paul Wallington  <jpw@gnu.org>

	* help-mode.el (help-make-xrefs): Remove extra paren.

2003-04-23  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-normalize-vars): Prompt the user for
	the comment-start to use rather than signaling an error.  Fix regexp.
	(uncomment-region): Don't leave half-removed comment markers.

2003-04-23  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-send-and-exit): Make arg optional.

	* files.el (view-read-only): Doc fix.

	* simple.el (back-to-indentation): Call backward-prefix-chars.

	* help-mode.el (help-make-xrefs): Clean up the loop that scans
	over a keymap inserted by \\{...}; it now stops at end of buffer.

	* filesets.el: Don't call filesets-init.

	* emacs-lisp/bytecomp.el (byte-compile-defun): Generate and
	compile a defalias form, unless byte-compile-compatibility.

	* progmodes/scheme.el (scheme-mode-syntax-table):
	Use prefix syntax for ', `, comma, @ and #.

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Give @ prefix syntax.

2003-04-23  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-stay-local): Keep the old default.
	Simplify doc string.

2003-04-23  Wolfgang Scherer  <wolfgang.scherer@gmx.de>

	* vc-cvs.el (vc-cvs-stay-local): Allow lists of host regexps.
	(vc-cvs-stay-local-p): Handle them.
	(vc-cvs-parse-root): New function, used by the above.

2003-04-22  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-mcvs.el (vc-mcvs-root): Cache the result.
	(vc-mcvs-registered): Simplify.  Use file-relative-name.
	(vc-mcvs-register): Simplify.  Don't burp if MCVS/TYPES doesn't exist.
	(vc-mcvs-command): Filter F-NN names in the output for diff and log.

2003-04-21  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-default-dirs): New fun extracted from Info-initialize.
	(info-initialize): Use it.  Obey the "final :" convention for INFOPATH.

	* textmodes/fill.el (fill-region-as-paragraph):
	Fix "last line goes to fill-column+1" problem.

	* emacs-lisp/bytecomp.el (byte-compile-defvar): Improve message.

2003-04-20  Richard M. Stallman  <rms@gnu.org>

	* simple.el (kill-line): Doc fix.

2003-04-20  Sam Steingold  <sds@gnu.org>

	* pcvs.el (cvs-examine): Respect `find-file-visit-truename'.

2003-04-20  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* which-func.el (which-func-modes): Add f90-mode.
	(which-function): Handle imenu submenus.

	* progmodes/fortran.el (fortran-abbrev-start): Make XEmacs compatible.

	* progmodes/f90.el (f90-font-lock-keywords-2): Use override for
	font-lock-variable-name-face in declarations.
	Highlight continuation characters.
	(f90-indent-new-line): Remove direct call to f90-indent-line-no,
	f90-update-line.
	(f90-abbrev-start): Fix XEmacs compatibility.

2003-04-19  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-mcvs.el: New file.

	* vc-cvs.el (vc-cvs-dir-state): Use vc-cvs-command.
	(vc-cvs-could-register, vc-cvs-make-version-backups-p): Use defalias.
	(vc-cvs-merge-news): Simplify.
	(vc-cvs-diff): Remove unused var `options'.
	(vc-cvs-parse-entry): Use the same algorithm as cvs does.

2003-04-19  Richard M. Stallman  <rms@gnu.org>

	* desktop.el (desktop-buffer-mh): Don't require mh-e;
	it causes trouble in compilation.

	* add-log.el (add-log-current-defun-function): Add autoload cookie.

	* newcomment.el (comment-use-syntax): Add autoload cookie.

	* emacs-lisp/bytecomp.el (byte-compile-log-file)
	(byte-recompile-directory): Don't use byte-goto-log-buffer.
	Instead, set default-directory and then call compilation-mode.
	(byte-compile-from-buffer): Force byte-compile-last-position
	to end of buffer before issuing final warnings.

2003-04-18  Stefan Monnier  <monnier@cs.yale.edu>

	* emulation/cua-base.el (cua-mode): Use define-minor-mode.
	(cua-global-mark-face): Fix face format.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Only echo a message
	if the body didn't do so already.
	(easy-mmode-define-keymap): Remove unused var `suppress'.

	* view.el (view-read-only): Move to files.el.
	* files.el (view-read-only): Move from view.el.

2003-04-17  Stefan Monnier  <monnier@cs.yale.edu>

	* files.el (view-read-only): Don't declare a second time.
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Check that file does exist.
	(large-file-warning-threshold): New custom.
	(find-file-noselect): Use it.
	(report-errors): New macro.
	(normal-mode): Use it.
	(toggle-read-only): Really toggle, even if view-mode is on.
	(parse-colon-path): Remove unused `cd-prefix' var.
	(make-backup-file-name-1): Remove unused `failed' var.
	(basic-save-buffer): Remove unused `tempsetmodes' var.
	(basic-save-buffer-2): Remove unused `temp' var.
	(insert-directory): Remove unused `available' var.

2003-04-17  John Paul Wallington  <jpw@gnu.org>

	* hexl.el (hexl-find-file): Bind `default-major-mode' to
	`fundamental-mode'.

2003-04-16  Stefan Monnier  <monnier@cs.yale.edu>

	* reveal.el (reveal-post-command): Use overlay-get for overlays.

2003-04-16  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (describe-language-environment):
	At first, require all necessary features.

2003-04-16  Dave Love  <fx@gnu.org>

	* progmodes/xscheme.el: Moved from lisp directory.

2003-04-16  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-indent-to, f90-indent-line-no)
	(f90-no-block-limit, f90-end-of-block, f90-beginning-of-block)
	(f90-comment-region, f90-indent-line, f90-indent-region)
	(f90-find-breakpoint, f90-block-match): Trivial simplifications.
	(f90-looking-at-do, f90-looking-at-select-case)
	(f90-looking-at-if-then, f90-looking-at-where-or-forall):
	Drop XEmacs 19 support and simplify.
	(f90-indent-new-line): No need for case-fold-search.  Simplify.
	(f90-fill-region): Make marker nil when done.  Simplify.

	* progmodes/fortran.el (fortran-column-ruler): Minor doc change.

2003-04-16  Richard M. Stallman  <rms@gnu.org>

	* man.el (Man-follow-manual-reference): Don't require match
	when calling completing-read.

2003-04-15  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el: Whitespace changes, some re-ordering of
	code, trivial commentary change.
	(fortran, fortran-indent, fortran-comment)
	(fortran-tab-mode-default, fortran-continuation-indent)
	(fortran-comment-indent-style, fortran-blink-matching-if)
	(fortran-continuation-string, fortran-electric-line-number)
	(fortran-break-before-delimiters, fortran-mode-hook)
	(fortran-end-prog-re, fortran-imenu-generic-expression):
	Minor doc changes.
	(fortran-tab-mode-minor-mode-string): New variable.
	(fortran-tab-mode-string): Now customization is meaningful.
	(fortran-column-ruler-fixed, fortran-column-ruler-tab)
	(fortran-analyze-depth): Use defcustom.
	(fortran-if-start-re, fortran-end-prog-re1, fortran-fill)
	(fortran-break-line, fortran-prepare-abbrev-list-buffer)
	(fortran-auto-fill): Add doc string.
	(fortran-type-types): New constant (was local to let binding).
	(fortran-font-lock-keywords-1, fortran-font-lock-keywords-2)
	(fortran-font-lock-syntactic-keywords): Initialize in defvar.
	(fortran-font-lock-keywords-3): Initialize in defvar.  Use 1+ now
	depth of fortran-type-types has changed.  Remove extra and.
	(fortran-mode-menu): Minor re-organization.  Use lookup-key.
	(fortran-mode): Doc changes.  Some re-organization.
	Use fortran-tab-mode-minor-mode-string.
	(fortran-comment-indent): Add doc string.  Move save-excursion.
	Use 1+.
	(fortran-indent-comment, fortran-fill-statement):
	Change interactive spec.  Use unless.
	(fortran-comment-region): Doc change.  Reverse logic of arg
	test.  Use zerop.
	(fortran-abbrev-start, fortran-split-line)
	(fortran-electric-line-number, fortran-indent-subprogram)
	(fortran-strip-sequence-nos): Change interactive spec.
	(fortran-remove-continuation): Add doc string.  Use when.
	(fortran-numerical-continuation-char): Doc change.  Use 1+.
	(fortran-previous-statement, fortran-next-statement)
	(fortran-beginning-do, fortran-calculate-indent)
	(fortran-end-do, fortran-end-if, fortran-beginning-if):
	Use zerop, 1+, 1-.
	(fortran-blink-match, fortran-check-for-matching-do): Use when.
	(fortran-indent-line): Change interactive spec.  Remove un-needed
	if.  Use when.
	(fortran-indent-to-column): Doc change.  Use when, unless.
	(fortran-find-comment-start-skip): No longer interactive.
	(fortran-analyze-file-format): Minor doc change.
	Remove un-needed setq.
	(minor-mode-alist): Use add-to-list.
	(fortran-fill-paragraph): Change interactive spec, doc string.

	* progmodes/f90.el: Whitespace changes, trivial commentary changes.
	(f90, f90-indent, f90-program-indent, f90-continuation-indent)
	(f90-indented-comment-re, f90-imenu-generic-expression)
	(f90-mark-subprogram, f90-join-lines): Minor doc changes.
	(f90-menu): Shift definition to initialization of f90-mode-map.
	Add customization section.
	(f90-mode): Minor doc change.  Do not call easy-menu-add.
	Set `beginning-of-defun-function' and `end-of-defun-function' to
	appropriate F90 functions.
	(f90-indent-line, f90-indent-line, f90-indent-subprogram)
	(f90-break-line, f90-do-auto-fill, f90-insert-end)
	(f90-upcase-keywords, f90-capitalize-keywords)
	(f90-downcase-keywords): Change interactive spec.

2003-04-14  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-multiline, font-lock-fontified)
	(font-lock-set-defaults): Move back from font-core.el and merge
	it back with font-lock-set-defaults-1.
	(font-lock-mode-internal): New function (basically the body of
	the old font-lock-mode minor mode).

	* font-core.el (font-lock-maximum-size, font-lock-verbose): Remove.
	(font-lock-multiline, font-lock-fontified, font-lock-set-defaults):
	Move back to font-lock.el.
	(font-lock-default-function): Use font-lock-mode-internal.

	* files.el (auto-mode-alist): Add entries for *.ins and *.dtx.
	(recover-file): Abbreviate file name in messages.

	* textmodes/tex-mode.el (latex-mode-map): Bind latex-split-block.
	(tex-font-lock-keywords-2): Comment out unused var `type'.
	(tex-guess-mode): New name for old `tex-mode'.
	(tex-mode): Make it a derived mode of text-mode.
	(plain-tex-mode, latex-mode): Change parent from text-mode to tex-mode.
	(tex-common-initialization): Don't setup syntax-table any more.
	(tex-validate-buffer): Remove unused var `oend'.
	Use with-current-buffer and line-beginning-position.
	(tex-recenter-output-buffer): Remove unused var `old-buffer'.
	(latex-indent): Return `noindent' if no indentation can happen.
	(doctex-font-lock-^^A, doctex-font-lock-syntactic-face-function)
	(doctex-font-lock-syntactic-keywords, doctex-font-lock-keywords)
	(doctex-mode): New funs for DocTeX mode, derived from LaTeX mode.

	* font-lock.el (font-lock-preprocessor-face): New var and face.

2003-04-14  Andrew Choi  <akochoi@shaw.ca>

	* term/mac-win.el: Unconditionally set process-connection-type to nil.

2003-04-14  Richard M. Stallman  <rms@gnu.org>

	* derived.el (define-derived-mode): Make generated code work in
	Emacs versions that do not have run-mode-hooks.

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display):
	At end of buffer, run the global binding of the same key.

	* international/mule.el (after-insert-file-set-coding):
	Properly treat INSERTED as number of characters, for both
	for both the argument and the value.

	* desktop.el (desktop-base-file-name):
	Renamed from desktop-basefilename.  Add defvaralias.

2003-04-14  John Paul Wallington  <jpw@gnu.org>

	* international/fontset.el (create-fontset-from-ascii-font): Doc fix.
	(x-must-resolve-font-name): Fix error message typo.

2003-04-13  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-previous-statement): Check for
	fortran-continuation-string.
	(fortran-calculate-indent): Do not add extra whitespace to
	strings broken over lines.
	(fortran-fill): Handle long strings that must be broken.

2003-04-13  Michael Albinus  <Michael.Albinus@alcatel.de>  (tiny change)

	* net/ange-ftp.el (ange-ftp-expand-symlink): If result of
	expansion is a symlink, expand again.
	(ange-ftp-file-symlink-p): Return target of symlink literally.

2003-04-13  Masatake YAMATO  <jet@gyve.org>

	* bindings.el (toplevel): Don't change the face
	of major-mode on the mode line.  Setting the face on
	the mode line code is installed by my mistake in
	my last change.

2003-04-12  Stefan Monnier  <monnier@cs.yale.edu>

	* add-log.el (change-log-version-number-search): Fix old bug.
	(add-change-log-entry): Avoid inserting the same funname again.
	(add-log-indent-text): New var.
	(add-log-indent): New fun.
	(change-log-mode): Use it.

	* net/browse-url.el: Don't autoload all these defcustoms.
	(browse-url-default-macosx-browser): New fun.
	(browse-url-browser-function): Use it for system-type = darwin.
	(browse-url-usr1-signal): Remove.
	(browse-url-mosaic): Use SIGUSR1 directly instead.
	(browse-url-gnome-moz-program): New var.
	(browse-url-gnome-moz, browse-url-default-browser): Use it.

	* emacs-lisp/bytecomp.el: Use push, with-current-buffer, dolist, ...
	(byte-compile-const-variables): New var.
	(byte-compile-close-variables): Reset it.
	(byte-compile-file-form-defvar, byte-compile-defvar): Update it.
	(byte-compile-const-symbol-p): Now arg `value' to check defconsts.
	(byte-compile-variable-ref): Use it and improve warning message.
	(byte-compile-check-lambda-list): Use byte-compile-const-symbol-p.
	(byte-compile-lapcode): Remove unused vars.
	(byte-compile-eval): Fix thinko in handling of old-autoloads.
	(byte-recompile-directory): Use the expanded form for directory.
	(byte-compile-track-mouse): Use modern backquote syntax.
	(byte-compile-defvar): Detect and properly handle (defconst a).
	(byte-compile-defalias-warn): Remove unused arg `alias'.
	(byte-compile-defalias): Update call.

2003-04-13  Masatake YAMATO  <jet@gyve.org>

	* help.el (describe-minor-mode): New function implementation.
	Accept both minor mode string and minor mode indicator.
	(describe-minor-mode-completion-table-for-indicator)
	(describe-minor-mode-completion-table-for-symbol): New functions.
	minor-mode-list is used here.
	(describe-minor-mode-from-symbol):
	Renamed from (old) describe-minor-mode.
	Use describe-minor-mode-completion-table-for-symbol.
	Don't use eval.  Just use symbol-name.
	(describe-minor-mode-from-indicator): Document is updated.
	Use `format-mode-line'.
	Use describe-minor-mode-from-symbol instead of describe-minor-mode.
	Use describe-minor-mode-completion-table-for-indicator.
	(expand-minor-mode-indicator-object): Remove.
	(lookup-minor-mode-from-indicator): Remove the fist white
	space from both indicator and anindicator before comparing them.

	* bindings.el (mode-line-major-mode-keymap)
	(mode-line-minor-mode-keymap): Define keys for the maps
	here in `defvar'.

2003-04-12  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-socket-name): Use new safe location for socket.
	(server-ensure-safe-dir): New fun.
	(server-start): Use it and letf.
	(server-process-filter): Re-enable the -eval feature.

2003-04-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* play/gomoku.el (gomoku-buffer-name): New constant.
	(gomoku-mode): Doc fix.  Add call to kill-all-local-variables.
	(gomoku): Do not call gomoku-switch-to-window directly.
	(gomoku-prompt-for-other-game): Throw an error if no new game.
	(gomoku-switch-to-window): Use gomoku-buffer-name.

	* progmodes/f90.el (f90-abbrev-start): Only offer help if
	abbrev-mode is active.
	(f90-join-lines): Make it behave more like standard join-line.
	(f90-fill-region, f90-menu): Adapt for new f90-join-lines.

	* progmodes/fortran.el (fortran-abbrev-start): Only offer help if
	abbrev-mode is active.

2003-04-12  John Paul Wallington  <jpw@gnu.org>

	* help-fns.el (help-add-fundoc-usage): Pass an empty string to
	`format' if no newlines are necessary.

2003-04-11  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (global-map): Bind [select-window].

2003-04-11  John Paul Wallington  <jpw@gnu.org>

	* type-break.el (type-break-warning-countdown-string): Doc fix.

2003-04-11  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>  (tiny change)

	* international/utf-8.el (utf-translate-cjk-mode): Fix incorrect
	place of parenthesis.

2003-04-11  Masatake YAMATO  <jet@gyve.org>

	* progmodes/etags.el (select-tags-table-mode-map):
	Don't create new keymap.  Instead copy from button-buffer-map.
	Bind push-button to `t' instead of binding
	select-tags-table-select directly.
	(tags-select-tags-table): New button.
	(select-tags-table): Put a button for each selections.

2003-04-11  Kenichi Handa  <handa@m17n.org>

	* international/mule.el:
	Don't set after-insert-file-adjust-coding-function.
	(after-insert-file-set-coding):
	Renamed from after-insert-file-set-buffer-file-coding-system.

2003-04-11  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-guidance-str)
	(quail-guidance-frame): New variables.
	(quail-guidance-win): Delete this variable.
	(quail-setup-overlays): Make overlay not rear-advancing.
	(quail-kill-guidance-buf): Delete this function.
	(quail-activate): Add/remove quail-show-guidance to/from
	post-command-hook.
	(quail-input-method): Don't setup quail-guidance-buf.
	Initialize quail-guidance-str to "".
	(quail-start-translation): Call quail-show-guidance at first.
	(quail-start-conversion): Likewise.
	(quail-terminate-translation): Don't erase quail-guidance-buf.
	(quail-update-translation): Stretch overlays if their starting and
	ending positions are same.
	(quail-update-current-translations): Check the width of the
	current window, not the width of quail-guidance-win.
	(quail-make-guidance-frame): Delete the arg BUF.  Fix position
	calculation.  Don't set the window buffer, just return the new frame.
	(quail-minibuffer-message): New function.
	(quail-show-guidance): Renamed from quail-show-guidance-buf.
	Use message and quail-minibuffer-message to display the guidance.
	(quail-hide-guidance): Renamed from quail-hide-guidance-buf.
	Only delete quail-guidance-frame.
	(quail-update-guidance): Just update quail-guidance-str, not
	display it.
	(quail-get-translations): Renamed from quail-show-translations.
	Return a string instead of inserting it in quail-guidance-buf.

2003-04-11  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (sort-coding-systems): Set lower
	priority to a utf-16 base coding system.  Set higher priority to a
	coding system listed in coding-category-list.

2003-04-10  Juanma Barranquero  <lektu@terra.es>

	* frame.el (modify-all-frames-parameters): Deleted.

2003-04-10  Sebastian Tennant  <seb@albert.vcisp.net>  (tiny change)

	* desktop.el (desktop-buffer-file): Restore major-mode if it is
	different from the normal mode.

2003-04-10  Kenichi Handa  <handa@m17n.org>

	* international/mule.el:
	Set after-insert-file-adjust-coding-function to
	after-insert-file-set-buffer-file-coding-system instead of adding
	it to after-insert-file-functions.

	* language/ind-util.el (indian-2-column-to-ucs-region): Fix for
	the case of replacing multibyte characters.

2003-04-09  Richard M. Stallman  <rms@gnu.org>

	* files.el (file-chase-links): Fix previous change.

2003-04-09  Juanma Barranquero  <lektu@terra.es>

	* frame.el (new-frame): Add obsolescence declaration.

2003-04-09  Ehud Karni  <ehud@unix.mvs.co.il>

	* frame.el (set-frame-font): Allow keeping frame size after
	changing font.
	(modify-all-frames-parameters): New function to change parameters
	in all existing and future frames.

2003-04-09  Thien-Thi Nguyen  <ttn@gnu.org>

	* man.el (Man-heading-regexp): Accept hyphen.

2003-04-09  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el: Specify rescale ratio 1.3 for CDAC fonts.

	* international/mule-conf.el: Register ?\221 and ?\226 in
	latin-extra-code-table.

2003-04-08  Richard M. Stallman  <rms@gnu.org>

	* subr.el (minor-mode-list): New variable.
	(add-minor-mode): Add to it.

	* files.el (file-chase-links): New arg LIMIT.
	After that many iterations, just return what we've got.

	* map-ynp.el (map-y-or-n-p): When formatting chars in ACTION-ALIST,
	use single-key-description.

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display):
	At end of buffer, just call `newline'.

	* mail/rmailsum.el (rmail-make-basic-summary-line): If there's
	no From field, still try to use the To field.

2003-04-09  Kenichi Handa  <handa@m17n.org>

	* international/mule-diag.el (print-coding-system-briefly):
	If DOC-STRING is `tightly', print the doc-string tightly.
	(list-coding-systems-1): Sort coding systems.
	Call print-coding-system-briefly with the arg DOC-STRING `tightly'.

2003-04-08  Kai Großjohann  <kai.grossjohann@gmx.net>

	* net/tramp.el: Version 2.0.33 released.
	Change coding cookie to `iso-2022-7bit' for XEmacs
	compatibility.  (From Steve Youngs <youngs@xemacs.org>.)

2003-04-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp-ftp.el (tramp-ftp-file-name-handler):
	Do not disable file name handlers for `file-exists-p' and
	`file-directory-p'.

2003-04-08  Kenichi Handa  <handa@m17n.org>

	* international/mule-conf.el: Register ?\225 in latin-extra-code-table.

	* international/utf-16.el (utf-16-le-decode-loop)
	(utf-16-be-decode-loop): New temporary variables.
	(ccl-decode-mule-utf-16-le): Use utf-16-le-decode-loop.
	(ccl-decode-mule-utf-16-be): Use utf-16-be-decode-loop.
	(ccl-decode-mule-utf-16-le-with-signature)
	(ccl-decode-mule-utf-16-be-with-signature)
	(ccl-decode-mule-utf-16): New CCL programs.
	(utf-16-le-encode-loop, utf-16-be-encode-loop): New temporary
	variables.
	(ccl-encode-mule-utf-16-le): Use utf-16-le-encode-loop.
	(ccl-encode-mule-utf-16-be): Use utf-16-be-encode-loop.
	(ccl-encode-mule-utf-16-le-with-signature)
	(ccl-encode-mule-utf-16-be-with-signature): New CCL programs.
	(mule-utf-16-post-read-conversion): New function.
	(mule-utf-16-le-with-signature, mule-utf-16-be-with-signature)
	(mule-utf-16): New coding systems.
	(utf-16-le-with-signature, utf-16-be-with-signature)
	(utf-16): Aliases of the above coding systems.

2003-04-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-langs.el (c-symbol-key): Use POSIX char classes
	to match symbols.  This makes CC Mode cope with the full range
	of identifier characters in e.g. Java.

2003-04-07  Francesco Potortì  <pot@gnu.org>

	* xt-mouse.el (xterm-mouse-event-read): New function.
	(xterm-mouse-event): Use it to get xterm sequences above #x7f.
	Suggested by Aman Bhargava <emacs-bug@amanb.net>.

2003-04-07  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* man.el (Man-getpage-in-background): Set GROFF_NO_SGR env var in
	all cases, whether or not start-process is fboundp.

2003-04-06  Richard M. Stallman  <rms@gnu.org>

	* calendar/cal-menu.el (cal-menu-update): Use easy-menu-create-menu
	rather than easy-menu-change.

	* dired.el (dired-view-file): Let viewer program run asynchronously.

2003-04-06  Ben North  <ben@redfrontdoor.org>  (tiny change)

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display):
	Correct the starting point for previous-single-property-change.

2003-04-06  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el: Handle multiple desktop files in different dirs.
	Other cleanups.
	Command line option --no-desktop introduced.
	(desktop-read): Record buffers in the desktop file in
	the same order as that in the buffer list.
	(desktop-save): Put buffers in the order given in desktop file,
	regardless of what handlers do.
	(desktop-file-version): New variable.  Version number of desktop
	file format.
	(desktop-create-buffer-form): Variable deleted.
	(desktop-save): New customizable variable.
	(desktop-kill): Use `desktop-save'.
	(desktop-file-name-format): New option: format in
	which desktop file names should be saved.
	(desktop-file-name): New function to convert a filename to the
	format specified in `desktop-file-name-format'.
	(desktop-create-buffer): Parameters renamed to descriptive
	systematic names.  These parameters are visible to handlers.
	Renames:
	ver    -> desktop-file-version
	mim    -> desktop-buffer-minor-modes
	pt     -> desktop-buffer-point
	mk     -> desktop-buffer-mark
	ro     -> desktop-buffer-read-only
	locals -> desktop-buffer-locals.
	(desktop-buffer-major-mode, desktop-buffer-file-name)
	(desktop-buffer-name): Delete unused customizable variables.
	(desktop-buffer-misc): Delete unused variable.
	(desktop-save, desktop-buffer-dired-misc-data):
	Use `desktop-file-name'.
	(desktop-path): New customizable variable.  List of directories in
	which to lookup the desktop file.  Replaces hardcoded list.
	(desktop-globals-to-clear): New variable replaces hardcoded list.
	(desktop-globals-to-save): Variable made customizable.
	(desktop-clear-preserve-buffers-regexp): New customizable variable.
	(desktop-after-read-hook): New hook run after a desktop is read.
	(desktop-no-desktop-file-hook): New hook when no desktop file found.
	(desktop-change-dir): New function.
	(desktop-save-in-load-dir): New function.  Save desktop in
	directory from which it was loaded.
	(desktop-revert): New function.  Revert to the last loaded desktop.

2003-04-06  Masatake YAMATO  <jet@gyve.org>

	* progmodes/etags.el (tag-find-file-of-tag): Renamed from
	find-file-of-tag to avoid name space pollution.
	(tag-find-file-of-tag-noselect): Likewise.
	(etags-list-tags, etags-tags-apropos):
	Use tag-find-file-of-tag instead of find-file-of-tag.

2003-04-06  Masatake YAMATO  <jet@gyve.org>

	* info.el (Info-goto-emacs-command-node): If command
	is given as a string, convert it to a symbol.

2003-04-05  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (emacs-lisp-mode): Add prefix/suffix matching regexps.

2003-04-05  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-get-entries): New function that uses the
	right coding system for accessing CVS/Entries.
	(vc-cvs-registered, vc-cvs-dir-state-heuristic): Use it.

2003-04-04  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* subr.el (number-sequence): Adjust code.

2003-04-04  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/refill.el (refill-fill-paragraph-at): Undo last fix.
	(refill-fill-paragraph-at): Don't skip prefix since markers work right.

	* textmodes/fill.el (fill-delete-newlines): Remove trailing whitespace.
	(fill-paragraph): Don't skip prefix now that markers work right.

2003-04-04  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (ibuffer-insert-filter-group): `help-echo' text
	property dynamically respects `tooltip-mode'.
	(define-ibuffer-column name): Likewise.

	* ibuf-ext.el (ibuffer-format-filter-group-data): Don't append "\n".

2003-04-04  Masatake YAMATO  <jet@gyve.org>

	* progmodes/etags.el (find-file-of-tag-noselect, find-file-of-tag):
	New helper functions.
	(snarf-tag-function): Doc string is changed.  Explained about new
	optional argument, `use-explicit'.
	(etags-snarf-tag): Add one optional argument `use-explicit'.
	(file-of-tag-function): Doc string is changed.  Explained about new
	optional argument, `relative'.
	(file-of-tag): Doc string is changed.  Explained about new optional
	argument, `relative'.  Pass `relative' to `file-of-tag-function'.
	(etags-file-of-tag): Add new argument `relative`.
	(list-tags): Set `buffer-read-only' to t after making the major mode
	apropos-mode.
	(etags-list-tags): Use `make-text-button' instead of
	`add-text-properties'.  Used `snarf-tag-function',
	`goto-tag-location-function' and `find-file-of-tag' instead of
	`find-tag-other-window' (it's too simple).
	(find-tag-in-order): Use `find-file-of-tag-noselect' instead of
	`find-file'.
	(etags-tags-apropos): Use `find-file-of-tag-noselect' instead of
	`find-file'.  Do not use `etags-goto-tag-location` directly; use
	`goto-tag-location-function' instead.  Print relative file paths
	instead of complete ones in *Tags List* buffer, so lines in the
	buffer become shorter.
	(etags-tags-apropos-additional): Use `make-text-button' instead of
	`add-text-properties'.

2003-04-04  Andreas Schwab  <schwab@suse.de>

	* net/tramp.el (tramp-send-string): Handle empty string.

2003-04-03  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-define):
	Don't make a defvar for nil.
	(easy-menu-convert-item-1): Doc fix.
	(easy-menu-change): Call easy-menu-create-menu.

	* subr.el (read-quoted-char): Remember the input char
	before translation thru function-key-map, and use that for unreading.

	* shadowfile.el (shadow-parse-fullname):
	Rename from shadow-parse-fullpath.
	(shadow-parse-name): Rename from shadow-parse-path.
	(shadow-make-fullname): Rename from shadow-make-fullpath.
	(shadow-replace-name-component): Was shadow-replace-path-component.
	Callers of the above functions changed.
	(shadow-expand-cluster-in-file-name): Doc fix.
	(shadow-same-site, shadow-file-match): Doc fix.
	(shadow-define-literal-group): Doc fix.

	* kmacro.el (kmacro-end-and-call-macro): Doc fix.

	* hexl.el (hexl-find-file): Ignore user's value of default-major-mode.

	* files.el (hack-local-variables-prop-line): New arg MODE-ONLY.
	(hack-local-variables): When MODE-ONLY is set, pass it along to
	hack-local-variables-prop-line.

	* delsel.el (delete-active-region): Don't explicitly deactivate mark.

2003-04-03  Masatake YAMATO  <jet@gyve.org>

	* progmodes/etags.el: Require button.el.
	(etags-tags-apropos): Use `make-text-button' instead of
	`add-text-properties'.  Use `snarf-tag-function' and
	`etags-goto-tag-location' instead of `find-tag-other-window' (it's
	too simple).

	* man.el (Man-xref-header-file): Fix previous change.

2003-04-03  Kenichi Handa  <handa@m17n.org>

	* subr.el (number-sequence): New function.

2003-04-02  Ehud Karni  <ehud@unix.mvs.co.il>  (tiny change)

	* sort.el (sort-reorder-buffer): Fix saving of markers at the end
	of the sorted region.

2003-04-02  Masatake YAMATO  <jet@gyve.org>

	* woman.el (woman-xref): Removed.
	(woman-mode): Use `Man-highlight-references' instead of
	`WoMan-highlight-references'.
	(WoMan-highlight-references): Removed.

	* man.el (toplevel): Require button.
	(Man-header-file-path): New option.
	(Man-synopsis-regexp, Man-files-regexp, Man-include-regexp)
	(Man-file-name-regexp, Man-normal-file-prefix-regexp)
	(Man-header-regexp, Man-normal-file-regexp): New variables.
	(Man-mode-map): Inherit from `button-buffer-map'.  Don't define
	"\r" and mouse-2 directly.  These key are defined in
	`button-buffer-map'.
	(Man-xref-man-page, Man-xref-header-file, Man-xref-normal-file):
	New buttons.  `Man-xref-man-page' comes from woman.el.
	(man-follow-mouse): Removed.
	(Man-fontify-manpage): Use `Man-highlight-references' instead of
	calling `add-text-properties' directly.
	(Man-highlight-references, Man-highlight-references0): New functions.
	(Man-view-header-file): New function.

2003-04-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/refill.el (refill-fill-paragraph-at): Don't preserve
	the trailing space since fill.el doesn't remove it anymore.
	(refill-mode): Reset fill-paragraph-function even if it was nil.

	* textmodes/fill.el (fill-region-as-paragraph):
	Don't remove space at end of paragraph: it makes refill.el unusable.
	Remove obsolete `save-restriction'.
	(fill-paragraph, fill-comment-paragraph): Don't add newline at EOP.
	(fill-delete-newlines): Don't add a trailing space.
	(fill-newline): Don't leave markers before the prefix.

	* progmodes/asm-mode.el (asm-calculate-indentation, asm-indent-line):
	New functions.
	(asm-mode): Use them in indent-line-function.
	Set tab-always-indent to nil to stay closer to previous tab behavior.
	Set comment-add.  Remove space at end of comment-add.
	(asm-newline): Obsolete.  Use newline-and-indent instead.
	(asm-mode-map): Remove TAB binding.
	(asm-code-level-empty-comment-pattern)
	(asm-flush-left-empty-comment-pattern)
	(asm-inline-empty-comment-pattern): Remove.
	(asm-comment): Use newcomment functions instead.
	(asm-colon): Don't tab if colon is not after a label.
	(asm-line-matches, asm-pop-comment-level): Remove.

2003-04-02  Kai Großjohann  <kai.grossjohann@gmx.net>

	* emulation/crisp.el (top-level): Quote second arg to
	`eval-after-load'.

2003-04-02  Miles Bader  <miles@gnu.org>

	* scroll-bar.el (scroll-bar-mode): Correctly specify `nil' choice.

2003-04-01  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/asm-mode.el (asm-mode-syntax-table): Setup entries
	that do not depend on asm-comment-char.
	(asm-mode-map): Declare and init at the same time.
	(asm-code-level-empty-comment-pattern)
	(asm-flush-left-empty-comment-pattern)
	(asm-inline-empty-comment-pattern): Use \s< so they do not depend
	on asm-comment-char.  Turn them into constants.
	(asm-mode): Simplify.
	(asm-line-matches): Remove unused arg.

2003-04-01  Dave Love  <fx@gnu.org>

	* time.el: Doc fixes.
	(display-time-mail-face): Change :type and default to nil.
	(display-time-mail-icon): Use pbm, not xbm.
	(display-time-mail-string): New.
	(display-time-string-forms): Use display-time-mail-string.
	Add checks in display property.

2003-04-01  Kenichi Handa  <handa@m17n.org>

	* language/indian.el (indian-font-char-index-table): Fix the
	order of CDAC fonts.

2003-04-01  Kim F. Storm  <storm@cua.dk>

	* simple.el (pop-global-mark-quick-repeat): Remove defcustom.
	(set-mark-command): Unconditionally repeat pop-global-mark without
	C-x prefix.  Fix doc.

	* emulation/cua-base.el (cua-set-mark): Unconditionally repeat
	pop-global-mark without C-x prefix.  Fix doc.

2003-03-31  Stefan Monnier  <monnier@cs.yale.edu>

	* reveal.el (reveal-post-command): Better error handling.

2003-03-31  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-inferior-io-mode): Remove Unix pathname for cat
	so that it can run on NT also.

2003-03-31  Masatake YAMATO  <jet@gyve.org>

	* progmodes/asm-mode.el (asm-mode): Support skipping C lang style
	comments.

	* bindings.el (mode-line-major-mode-keymap): New variable.
	(mode-line-minor-mode-help): New function, bound to
	mode-line-minor-mode-keymap.
	(mode-line-modes): Split mode-line-mode definitions to
	mode-name, mode-line-process and minor-mode-alist.
	For mode-name, mode-line-major-mode-keymap is used.

	* help.el (describe-minor-mode, describe-minor-mode-from-indicator)
	(lookup-minor-mode-from-indicator): New functions.

2003-03-31  Kai Großjohann  <kai.grossjohann@gmx.net>

	* files.el (file-relative-name): Remove superfluous `and'.
	Clarify docstring.  From Lars Hansen.

2003-03-31  Kenichi Handa  <handa@m17n.org>

	* international/utf-16.el (ccl-decode-mule-utf-16-le):
	Don't assume the signature bytes.
	(ccl-decode-mule-utf-16-be): Likewise.
	(ccl-encode-mule-utf-16-le): Don't produce the signature bytes.
	(ccl-encode-mule-utf-16-be): Likewise.

2003-03-30  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (sh-mode): Add doc-specs for commands and variables.

2003-03-29  Kai Großjohann  <kai.grossjohann@gmx.net>

	* international/utf-8.el (utf-translate-cjk-mode): Minor mode,
	replaces variable utf-translate-cjk which must be set via Custom.

	* files.el (file-relative-name): If FILENAME and DIRECTORY are on
	different drives (on DOS/Windows) or use different handlers, do
	like `expand-file-name' on FILENAME and return an absolute name.
	From Lars Hansen <larsh@math.ku.dk>.

	* tramp.el: Version 2.0.31 released.
	(tramp-handle-expand-file-name): Do not allow ".." to
	cross file handler boundaries, so that "/user@host:/../foo"
	expands to itself, rather than "/foo".  This is intended to work
	in conjunction with a change in `file-relative-name' which makes
	sure to use absolute file names if FILE and DIRECTORY have
	different handlers.
	(tramp-handle-insert-directory): Comment out XEmacs
	kludge.  Suggested by Katsumi Yamaoka <yamaoka@jpl.org>.

2003-03-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* trampver.el: New file, to support Autoconf in Tramp CVS repository.
	* tramp.el (tramp-version, tramp-bug-report-address): Move to
	trampver.el, which is required now.
	(tramp-chunksize): Type can be nil as well.
	Reported by Markus Rost <rost@math.ohio-state.edu>.
	* tramp-smb.el (tramp-smb-read-file-entry): Make reading size of a
	listing entry more robust.  Ranges from 10 chars (Samba 1) to 7-9
	chars (Samba 2).

2003-03-29  John Paul Wallington  <jpw@gnu.org>

	* international/mule.el (with-category-table): Use `make-symbol'
	to avoid variable capture.  Set table within `unwind-protect'.
	Ensure table is restored in correct buffer.  Add docstring.

2003-03-29  Kenichi Handa  <handa@m17n.org>

	* language/japan-util.el: If system-type is not for Windows,
	prefer japanese-iso-8bit.

2003-03-28  Sudish Joseph  <sudish@corp.earthlink.net>  (tiny change)

	* term/mac-win.el (iconify-or-deiconify-frame): Define for
	compatibility with packages that use it.

2003-03-28  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-display-status-buffer):
	Fix docstring.
	(checkdoc-interactive, checkdoc-message-interactive): Make them
	perform spell checking when appropriate.
	(checkdoc-interactive-loop): Fix docstring and a few typos.
	(checkdoc-interactive-ispell-loop)
	(checkdoc-message-interactive-ispell-loop): New functions.
	(checkdoc-next-error): Fix docstring.
	(checkdoc-this-string-valid-engine): Fix typo.
	(checkdoc-ispell-docstring-engine): Do test for
	checkdoc-autofix-flag = nil.

2003-03-28  Jonathan Yavner  <jyavner@engineer.com>

	* emacs-lisp/testcover.el (testcover-mark-all): Handle screwy
	top-level macros that put functions as properties.
	(testcover-mark): No error for functions that just return a constant.

2003-03-27  Andreas Schwab  <schwab@suse.de>

	* vc-cvs.el (vc-cvs-parse-entry): Make sure a file with conflicts
	is marked as edited.

2003-03-26  Kenichi Handa  <handa@m17n.org>

	* files.el (recode-file-name): New function.

	* international/characters.el: Setup categories for Indian characters.

2003-03-26  Steve Youngs  <youngs@xemacs.org>

	* em-unix.el (eshell-plain-locate-behavior): Make the default
	nil on Emacs, t on XEmacs.

2003-03-25  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/byte-opt.el (byte-optimize-set): New.
	Turn `set' into `setq' when applicable.

2003-03-24  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Pass unknown keyword
	args blindly to defcustom.  Use custom-set-minor-mode.

2003-03-24  Kim F. Storm  <storm@cua.dk>

	* simple.el: Rework last change so C-x C-SPC C-SPC does not
	repeat pop-global-mark by default.
	(pop-global-mark-quick-repeat): New user option.
	(set-mark-command): Use it.

	* emulation/cua-base.el (cua-set-mark):
	Check pop-global-mark-quick-repeat.

2003-03-24  John Paul Wallington  <jpw@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-add-item): Don't default to
	the global map.

	* emerge.el (emerge-show-file-name): Read event irrespective of
	whether minibuffer window is resized.  Clear minibuffer when done.

	* cus-theme.el (customize-create-theme): Rename from
	`custom-theme-create'.

2003-03-24  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* cus-edit.el (custom-mode): Make `custom-local-buffer' local.

2003-03-23  Peter Breton  <pbreton@attbi.com>

	* net/net-utils.el (dns-lookup-host): New function.

2003-03-23  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (c-parse-state): Add kludge to avoid
	an infinite loop when Emacs' open-paren-in-column-zero rule
	kicks in and causes the sexp functions to misbehave.

2003-03-22  Peter Breton  <pbreton@cs.umb.edu>

	* filecache.el (file-cache-add-directory-recursively)
	(file-cache-complete, file-cache-display): New functions.

	* generic-x.el (etc-modules-conf-generic-mode): New generic mode.
	(rul-generic-mode): Bugfixes by Rolf.Sandau@marconi.com.

	* dirtrack.el (dirtrack-cygwin-directory-function): New function.
	Remove timestamp.

2003-03-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Remove unused NOBIND arg.  Fix doc string
	accordingly.
	(ido-define-mode-map): Bind C-l for both file and dir modes.
	(ido-wide-find-file, ido-wide-find-dir, ido-make-directory):
	Let-bind enable-recursive-minibuffers to t around read-string.

2003-03-22  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el (setup-default-fontset):
	Use indian-font-char-range for specifying ranges of indian-glyph
	chars.  Setup for AKRUTI fonts.

	* language/indian.el (indian-font-foundry): New variable.
	(indian-script-language-alist): New variable.
	(indian-font-char-index-table): New variable.
	(indian-font-char): New function.
	(indian-font-char-range): New function.
	(font-ccl-encoder-alist): Add entry for AKRUTI font.

2003-03-22  Kim F. Storm  <storm@cua.dk>

	* progmodes/cperl-mode.el (cperl-electric-backspace):
	Add delete-selection property.

	* simple.el (set-mark-command): Doc fixes.
	Allow pop-global-mark to be repeated with C-x C-SPC C-SPC...
	C-u C-u C-SPC now unconditionally sets the mark.

	* emulation/cua-base.el (cua-set-mark): Doc fixes.
	Allow pop-global-mark to be repeated with C-x C-SPC C-SPC...
	C-u C-u C-SPC now unconditionally sets the mark.

2003-03-20  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-parse-attlist): Fix typo in attribute parsing.

2003-03-20  Kenichi Handa  <handa@m17n.org>

	* international/utf-8.el (ccl-decode-mule-utf-8): Fix a bug in
	handling invalid 5 to 6 bytes sequence.

2003-03-19  Simon Marshall  <simon@gnu.org>

	* progmodes/make-mode.el (makefile-font-lock-syntactic-keywords):
	New variable.
	(makefile-mode): Use it for value of font-lock-syntactic-keywords.

2003-03-19  John Paul Wallington  <jpw@gnu.org>

	* cus-theme.el (custom-theme-create): Add autoload cookie.

2003-03-19  Kenichi Handa  <handa@m17n.org>

	* dired.el (dired-get-filename): Pay attention to the case that
	`read' returns a unibyte string.  Don't encode the file name by
	buffer-file-coding-system.

2003-03-18  Kenichi Handa  <handa@m17n.org>

	* language/european.el ("Latin-6"): Fix input-method.
	("Latin-7"): Fix input-method.

	* international/utf-8.el (utf-fragment-on-decoding):
	Don't call register-char-codings.
	(utf-fragment-on-decoding): Don't update char-coding-system-table.
	(utf-translate-cjk): Don't call register-char-codings nor
	optimize-char-coding-system-table.  Don't update
	char-coding-system-table.

	* international/ucs-tables.el (ucs-unify-8859): Don't call
	register-char-codings.
	(ucs-unify-8859): Don't call optimize-char-coding-system-table.
	(ucs-fragment-8859): Don't update char-coding-system-table.
	Don't call register-char-codings nor optimize-char-coding-system-table.

	* international/mule.el (optimize-char-coding-system-table):
	Remove this function.
	(register-char-codings): Make it obsolete.
	(char-coding-system-table): Defconst it here.
	(make-coding-system): Don't call register-char-codings, call
	define-coding-system-internal.

	* international/mule-conf.el (no-conversion):
	Call define-coding-system-internal on this coding system instead of
	calling register-char-codings.

	* international/mule-cmds.el (find-coding-systems-for-charsets):
	Use find-coding-systems-string instead of looking up
	char-coding-system-table.

	* international/code-pages.el (cp-fix-safe-chars): Make it obsolete.
	(cp-make-coding-system): Don't call cp-fix-safe-chars.

2003-03-18  Stefan Monnier  <monnier@cs.yale.edu>

	* startup.el (command-line-1): Use command-execute for any command.

2003-03-17  Stefan Monnier  <monnier@cs.yale.edu>

	* buff-menu.el (list-buffers-noselect): Use the display property
	to properly align header-line text with the buffer's contents.

2003-03-17  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (ctext-post-read-conversion): Convert the
	search pattern to multibyte by string-to-multibyte.

2003-03-16  Deepak Goel  <deego@gnufans.org>

	* calc/calc-forms.el (math-tzone-names): Introduce UTC as an alias
	for GMT.  Suggested by bob@rattlesnake.com.

2003-03-15  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-mode!): Remove unused argument.

	* emacs-lisp/easymenu.el (easy-menu-name-match): Catch any error
	that member-ignore-case might signal.
	(easy-menu-add-item): Default to the global map, as documented.
	(easy-menu-convert-item-1): Use match-string.

2003-03-15  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-ucs-to-string): New function to convert Unicode
	codepoints to strings.  Uses decode-char (mule.el) if available.
	(xml-parse-tag, xml-parse-attlist, xml-skip-dtd, xml-parse-dtd)
	(xml-parse-elem-type): Use ' \t\n\r' instead of '[:space:]'.
	(xml-parse-attlist): Add attribute normalization.
	(xml-parse-tag): Replace "\r\n" and "\r" with "\n".

2003-03-14  John Paul Wallington  <jpw@gnu.org>

	* files.el (recover-session): Error if there are no previous
	sessions to recover.

	* subr.el (posn-col-row): Simplify.

	* arc-mode.el (archive-subtype, archive-file-list-start)
	(archive-file-list-end, archive-proper-file-start)
	(archive-read-only, archive-local-name, archive-mode-map)
	(archive-file-name-indent, archive-remote)
	(archive-alternate-display, archive-superior-buffer)
	(archive-subfile-mode): Doc fixes.

2003-03-14  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (indent-for-tab-command): If tab-always-indent is non-nil
	and the user hits TAB a second time, just insert a tab.

	* textmodes/texinfo.el (texinfo-outline-level): Remove.
	(texinfo-mode): Set outline-heading-alist instead.
	(texinfo-section-list): Reorder for the needs of outline-heading-alist.
	(texinfo-insert-block): Don't cons needlessly.
	(texinfo-enable-quote-macros, texinfo-enable-quote-envs): New vars.
	(texinfo-insert-quote): Use them.

	* textmodes/outline.el (outline-level): Demote it to defvar.
	(outline-heading-alist): Document extended semantics.
	(outline-head-from-level): New fun.
	(outline-promote, outline-demote): Use it.
	(outline-show-heading): New fun.
	(hide-sublevels, show-children):
	Use it together with outline-map-region.
	(outline-get-next-sibling): Don't call outline-level at eob.

2003-03-14  Simon Josefsson  <jas@extundo.com>

	* fringe.el (fringe-mode): Autoload so that
	Options->Show/Hide->Fringe->Customize works.

2003-03-13  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-mode-menu-bar-map): Add entries.
	(outline-mode-prefix-map): Match new bindings to those of allout.
	(outline-map-region): New fun.
	(outline-map-tree): Remove.
	(outline-promote, outline-demote): Apply to region if active.
	Change the default to apply to the subtree.
	(outline-move-subtree-up, outline-move-subtree-down): New funs.
	(outline-invisible-p): Add optional `pos' argument.
	(outline-next-visible-heading, outline-toggle-children): Use it.
	(outline-get-next-sibling): Don't call outline-level at eob.

	* custom.el (custom-set-minor-mode): New fun.

2003-03-13  Dave Love  <fx@gnu.org>

	* international/latin1-disp.el (ucs-tables): Don't require.
	(latin1-display-face): New.
	(latin1-display-char): Use it.

2003-03-13  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (reset-language-environment):
	Set default-file-name-coding-system to iso-latin-1.

	* language/european.el (iso-latin-1): Definition of this coding
	system moved to mule-conf.el.

	* international/mule-conf.el (iso-latin-1): Move from
	european.el.

	* term/x-win.el (x-select-text): Don't set a text containing
	eight-bit-control/graphic into the cut buffer.

2003-03-12  Kenichi Handa  <handa@m17n.org>

	* files.el (insert-directory): Decode by what specified.

	* language/japan-util.el (setup-japanese-environment-internal):
	By default, use japanese-iso-8bit for file names, and prefer
	japanese-shift-jis on DOS and Windows.

	* international/quail.el (quail-show-guidance-buf): Make the quail
	guidance buffer inherit the current value of quail-current-package.

	* international/utf-8.el (ccl-decode-mule-utf-8): Don't lose bytes
	on handling an invalid byte sequence.

2003-03-11  Jason Rumney  <jasonr@gnu.org>

	* files.el (auto-mode-alist): Add .xsl for sgml-mode.

2003-03-11  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-skip-dtd): Fix parsing of DOCTYPE.

2003-03-11  John Paul Wallington  <jpw@gnu.org>

	* subr.el (posn-col-row): Heed frame parameter `line-spacing' and
	`default-line-spacing', rather than buffer-local `line-spacing'.

2003-03-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-rogue): New command.

2003-03-10  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-extract-menu-node-name)
	(Info-following-node-name): Revert last change.

2003-03-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/scheme.el (scheme-mode-syntax-table):
	Construct w/o using `with-syntax-table'.

2003-03-10  John Paul Wallington  <jpw@gnu.org>

	* subr.el (posn-col-row): Take into account `line-spacing'.

	* ebuff-menu.el (electric-buffer-update-highlight): Do nothing
	if major mode isn't `Electric-buffer-menu-mode'.

	* term/x-win.el (vendor-specific-keysyms)
	(x-last-selected-text-primary): Doc fixes.
	(x-win-suspend-error): Use proper noun in error message.

2003-03-09  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* man.el (Man-getpage-in-background): Always use `setenv' for
	environment variables, instead of modifying process-environment
	directly.  The previous version let-bound process-environment --
	the let-binding is skipped for GROFF_NO_SGR because there is
	already a let-binding in effect in some outer scope.

	* emulation/crisp.el (top-level): Interoperate with cua.

2003-03-08  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Provide `cua' feature.

2003-03-08  Juanma Barranquero  <lektu@terra.es>

	* emulation/cua-base.el (cua--standard-movement-commands):
	Fix docstring.

2003-03-07  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* man.el (Man-getpage-in-background): Only change
	default-directory if necessary.

2003-03-07  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-following-node-name): Skip trailing period.
	(Info-extract-menu-node-name): Allow period in node name.

2003-03-07  Kevin Rodgers  <kevin.rodgers@ihs.com>  (tiny change)

	* dired-x.el (dired-guess-shell-case-fold-search): New user option.
	(dired-guess-default): Use it.

2003-03-07  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/dcl-mode.el (dcl-font-lock-keywords): New var.
	(dcl-font-lock-defaults): New var.
	(dcl-mode): Make and init local var `font-lock-defaults'.

2003-03-06  Kevin Rodgers  <kevin.rodgers@ihs.com>  (tiny change)

	* ffap.el (dired-at-point): Check whether the user can create a
	directory before asking about creating it.

2003-03-06  John Paul Wallington  <jpw@gnu.org>

	* ebuff-menu.el (electric-buffer-list):
	Respect `Buffer-menu-use-header-line'.
	(electric-buffer-menu-looper): Likewise.

	* buff-menu.el (Buffer-menu-mode-map): Add docstring.
	(Buffer-menu-buffer): Fix indentation.
	(list-buffers-noselect): Calculate header-line spacing to take
	into account width of left fringe and left scrollbar.

2003-03-05  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-print-version): New version number (6.6).
	(ps-begin-job): If background and foreground color are the same, give
	an error.
	(ps-default-fg, ps-default-bg): Better doc.
	(ps-rgb-color): Became a defun, check RGB value list.
	(ps-default-background): New internal var.
	(ps-begin-file): Code fix.

2003-03-05  Richard M. Stallman  <rms@gnu.org>

	* replace.el (query-replace-read-args): Use save-excursion.
	(map-query-replace-regexp): Use prefix-numeric-value.

2003-03-05  Juanma Barranquero  <lektu@terra.es>

	* term/w32-win.el (x-handle-geometry): Put sizes on
	`initial-frame-alist' too.

	* startup.el (command-line-x-option-alist): Make --border-color set
	the border-color frame parameter, not border-width.

	* faces.el (frame-set-background-mode): Fix reference to attribute
	"backgroundMode".

2003-03-05  Reto Zimmermann  <reto@gnu.org>

	* progmodes/vhdl-mode.el: Version 3.32.12 released.
	Modifications for displaying all projects in hierarchy browser and case
	insensitive hierarchy browsing.  Change Rod's email address.
	Include `itimer.el' patch for XEmacs.  Backquote fix.  Change some
	documentation strings.  Add "ERROR: " prefix to all error
	messages.  Enhanced usage of hideshow.
	(vhdl-in-literal): Remove unused argument LIM.
	(vhdl-compiler-alist): Enhance customization for compilers; add
	"Speedwave", "Simili", "Synopsys Design Compiler", "Cadence NC",
	"Savant", "ProVHDL" and "VeriBest" compilers.
	Add new error message syntax for Modelsim.
	Add Synplify, column no in error regexp.
	Include library name in library command.
	Add unit-to-file name mapping for Savant.
	Add library option in Makefile generation command.
	Add command to create library directory.
	Built-in Makefile generation is always default.
	(vhdl-create-mode-menu): Split menus for compilers, projects, models.
	Add customization for `global-font-lock-mode'.
	Fix `customize-group' entries for XEmacs and
	change "Gen." to "Generate".  Get *Messages* buffer.
	Fix "Auto Load Setup File" menu entry.
	Add faces customization to "Options".  Add "Options" entry.
	Include `speedbar-indentation-width'.
	(vhdl-replace-string): Allow casing (use `vhdl-file-name-case').
	(vhdl-template-exit, vhdl-template-next, vhdl-template-return):
	Fix template abortion.
	(vhdl-speedbar-port-copy): Add subprogram copy; copy port of component
	in package.
	(vhdl-fixup-whitespace-region): No whitespace after '(' and before ')'.
	Better treat comments and strings.  Fix "=> ," alignment.
	(vhdl-port-paste-testbench): Print file names created.
	Better handling when file exist/open.  Additional comments in code.
	Replace keywords in testbench entity and architecture file headers.
	Adjust case in testbench configuration.
	(vhdl-port-paste-instance): Special case: no number in instance name.
	(vhdl-speedbar-expand-units): Fix speedbar frame switching oddity.
	(vhdl-font-lock-keywords-2): Enhance highlighting of instantiation;
	highlight instantiations without map.
	Highlight quantity declaration names.  Highlight formal parameters.
	Fix label highlighting for signal asst.
	(vhdl-mode): `comment-padding' for Emacs 21 only.
	Remove forced `turn-on-font-lock'.
	Remove `hippie-expand-only-buffers' setting.
	Update online documentation and web address.
	(vhdl-comment-uncomment-region): Remove usage of `comment-dwim' again.
	Change ARG for uncommenting.
	(vhdl-speedbar-make-*-line): Fix for displaying XEmacs speedbar images.
	(vhdl-fontify-buffer): Toggle font-lock-mode for better recovery.
	(vhdl-port-list): Add context clause.
	(vhdl-port-paste-signals): Include direction comments.
	(vhdl-testbench-declarations, vhdl-testbench-statements): New default.
	(vhdl-port-*): Include name in status messages.
	(vhdl-package-alist): Scan for and display subprogram body.
	Change key to lower case, add original case identifier.
	Scan for packages used by package body.
	(vhdl-speedbar-find-file): Always jump to design unit if buffer open.
	(vhdl-speedbar-insert-hierarchy): Mark non-existing entities/packages.
	Message "No VHDL design units!".
	(vhdl-compile-init): Allow fourth element (column no) in error regexp.
	Fix `nconc' bug.  Eliminate redundant regexps.
	(vhdl-minibuffer-tab): No indentation.
	Use `hippie-expand-only-buffers' to take
	expansions from VHDL buffers only; don't overwrite non-nil default of
	`hippie-expand-only-buffers'; check whether
	`hippie-expand-only-buffers' is bound.
	(vhdl-ams-types, vhdl-ams-enum-values): Add identifiers from
	`nature_pkg' package.
	(vhdl-align-alist): Fix "when/else ... =>" case.
	Align declaration keywords only at beg. of line.
	Align <=, := and == among each other.
	(vhdl-port-copy): Extended identifiers for signal names.
	Fix on empty generic/port clause.
	Fix parsing of comment on first line.
	Allow generic clause begin on first line.
	Add "inout" and "linkage" to direction modes.
	(vhdl-font-lock-function-face): Change DarkCyan to Cyan4.
	(vhdl-file-header): Insert VHDL language standard string.
	(vhdl-instance-name): Unique numbers in instance names.
	(vhdl-compile): Check for existing compile directory.
	Print out file name if compiler does not; put it in
	quotes if contains spaces.  Check compiler name.
	(vhdl-compiler): Change empty value from "" to nil.
	(vhdl-make): Check for existing compile directory.
	Fix missing options if there is a target.  Check compiler name.
	(vhdl-template-field): Fix case on all VHDL words.
	(vhdl-template-others): Re-electrified "others".
	(vhdl-speedbar-expand-architecture): Give user control over displayed
	hierarchy depth.
	(vhdl-project-alist): Insert library name in Makefile name.
	Sources exclude regexp.  Add file-specific compile exceptions.
	Enhance customization of projects.
	(vhdl-get-hierarchy): Include configurations in hierarchy list.
	Fix bug with configurations.
	Consider configurations; also at lower levels.
	(vhdl-speedbar-item-info): Enhance displaying.
	(vhdl-scan-file-contents): Fix skipping of comments in scanning.
	Sources exclude regexp.
	Allow comment lines in instantiations.
	Fix used packages in package body scanning.
	Allow code before first block configuration.
	Scan also for "is" keyword of design units.
	Scan configuration specification.
	Clear directory alists first.
	Consistency check.
	Check for multiply scanned design units.
	Scan components/subprograms in package.
	Scan library clauses and subconfigurations.
	Limit file size for scanning.
	(vhdl-entity-alist): Change key to lower case, add original case
	identifier.
	(vhdl-electric-tab): Not overwrite non-nil default of
	`hippie-expand-only-buffers'.
	(vhdl-electric-tab): Check whether `hippie-expand-only-buffers' is
	bound; use it to take expansions from VHDL buffers only.
	(vhdl-electric-tab): Toggle comment indent.
	(vhdl-generate-makefile): Check compiler name.
	Add library option in Makefile generation command.
	(vhdl-generate-makefile): Add dependencies for components in package.
	(vhdl-template-elsif): No expansion in concurrent part (except AMS).
	(vhdl-insert-string-or-file): Resolve environment variables.
	(vhdl-insert-string-or-file): Fix NTEmacs `file-exists-p' problem.
	(vhdl-submit-bug-report): Prompt for summary.
	(vhdl-resolve-paths): Rearrange environment variable resolution.
	(vhdl-scan-project-contents): Rearrange environment variable
	resolution.
	(vhdl-scan-project-contents): Allow absolute paths.
	(vhdl-doc-coding-style): Update RMM URL.
	(vhdl-end-of-leader): Consider "is" keyword in VHDL'93.
	(vhdl-model-insert): Replace header prompts too.
	(vhdl-template-header): New argument `is-model'.
	(vhdl-template-generate-body): Remove "begin" for VHDL'93.
	(vhdl-actual-port-name): Change default value (no "_i" extension).
	(vhdl-template-modify): Delete date instead of kill.
	(vhdl-get-source-files): Don't match source files beginning with ".".
	(vhdl-project-*-alist): Merge with variables `vhdl-*-alist'.
	(vhdl-speedbar-*): Many enhancements and fixes in hierarchy browser.
	(vhdl-speedbar-expand-*): Display used packages.
	(vhdl-sequential-statement-p): Better algorithm.
	(vhdl-electric-mode, vhdl-stutter-mode): Change key bindings.
	(vhdl-electric-...): No stuttering within literals.
	(vhdl-template-footer): Replace keywords in footer as in header.
	(vhdl-align-...): Enhance alignment, add progress reporting.
	(vhdl-beautify-region): Bug fix.
	(vhdl-comment-insert-inline): Remove wrapping to next line if too long.
	(vhdl-testbench-configuration-name)
	(vhdl-update-sensitivity-list-buffer): Fix starting cursor position.
	(vhdl-prepare-search-[12]): Fix search within hidden code.
	(vhdl-speedbar-jump-to-unit): Disable cursor re-positioning.
	(vhdl-template-for): Fix sequential statement part detection.
	(vhdl-electric-space): Fix wrapping for non-word characters.
	(vhdl-template-standard-package): Don't insert "std" library.
	(vhdl-template-architecture): Code optimization.
	(vhdl-template-package): Search for existing package name.
	(vhdl-template-component-decl, vhdl-port-paste-declaration):
	Insert "is" in VHDL'93.
	(match-string-no-properties, vhdl-forward-comment): New aliases.
	(vhdl-speedbar-library-face, vhdl-speedbar-subprogram-face): New faces.
	(file-expand-wildcards, regexp-opt, subst-char-in-string)
	(vhdl-add-modified-file, vhdl-align-buffer, vhdl-align-declarations)
	(vhdl-align-list, vhdl-align-region-2, vhdl-align-region-groups)
	(vhdl-align-same-indent, vhdl-aput, vhdl-auto-load-project)
	(vhdl-backward-same-indent, vhdl-beginning-of-block)
	(vhdl-character-to-event, vhdl-compile-directory)
	(vhdl-compile-print-file-name, vhdl-compose-components-package)
	(vhdl-compose-insert-generic, vhdl-compose-insert-port)
	(vhdl-compose-insert-signal, vhdl-compose-new-component)
	(vhdl-compose-place-component, vhdl-compose-wire-components)
	(vhdl-default-directory, vhdl-delete, vhdl-delete-indentation)
	(vhdl-do-group, vhdl-do-list, vhdl-do-same-indent)
	(vhdl-duplicate-project, vhdl-end-of-block, vhdl-expand-abbrev)
	(vhdl-expand-paren, vhdl-export-project, vhdl-fill-group)
	(vhdl-fill-list, vhdl-fill-region, vhdl-fill-same-indent)
	(vhdl-fix-case-word, vhdl-fix-clause, vhdl-forward-comment)
	(vhdl-forward-same-indent, vhdl-generate-makefile-1)
	(vhdl-get-compile-options, vhdl-get-components-package-name)
	(vhdl-get-end-of-unit, vhdl-get-make-options, vhdl-get-packages)
	(vhdl-get-visible-signals, vhdl-goto-marker)
	(vhdl-hs-forward-sexp-func, vhdl-hs-minor-mode, vhdl-import-project)
	(vhdl-indent-group, vhdl-insert-file-contents, vhdl-load-cache)
	(vhdl-makefile-name, vhdl-match-string-downcase, vhdl-max-marker)
	(vhdl-parse-group-comment, vhdl-paste-group-comment)
	(vhdl-port-paste-context-clause, vhdl-port-paste-initializations)
	(vhdl-port-reverse-direction, vhdl-process-command-line-option)
	(vhdl-project-p, vhdl-re-search-backward, vhdl-re-search-forward)
	(vhdl-remove-trailing-spaces, vhdl-require-hierarchy-info)
	(vhdl-resolve-env-variable, vhdl-run-when-idle, vhdl-save-cache)
	(vhdl-save-caches, vhdl-scan-context-clause)
	(vhdl-scan-directory-contents, vhdl-set-compiler, vhdl-set-project)
	(vhdl-show-messages, vhdl-sort-alist, vhdl-speedbar-check-unit)
	(vhdl-speedbar-contract-all, vhdl-speedbar-contract-level)
	(vhdl-speedbar-display-directory, vhdl-speedbar-display-projects)
	(vhdl-speedbar-expand-all, vhdl-speedbar-expand-config)
	(vhdl-speedbar-expand-package, vhdl-speedbar-expand-project)
	(vhdl-speedbar-generate-makefile, vhdl-speedbar-insert-projects)
	(vhdl-speedbar-insert-subpackages, vhdl-speedbar-line-key)
	(vhdl-speedbar-line-project, vhdl-speedbar-line-text)
	(vhdl-speedbar-make-design, vhdl-speedbar-make-subpack-line)
	(vhdl-speedbar-make-subprogram-line, vhdl-speedbar-place-component)
	(vhdl-speedbar-refresh, vhdl-speedbar-set-depth)
	(vhdl-speedbar-update-current-project, vhdl-statistics-buffer)
	(vhdl-subprog-copy, vhdl-subprog-flatten, vhdl-subprog-paste-body)
	(vhdl-subprog-paste-call, vhdl-subprog-paste-declaration)
	(vhdl-subprog-paste-specification, vhdl-template-others-hook)
	(vhdl-template-replace-header-keywords, vhdl-toggle-project)
	(vhdl-uniquify, vhdl-update-file-contents, vhdl-update-hierarchy)
	(vhdl-update-progress-info, vhdl-update-sensitivity-list)
	(vhdl-update-sensitivity-list-buffer)
	(vhdl-update-sensitivity-list-process, vhdl-use-direct-instantiation)
	(vhdl-warning, vhdl-warning-when-idle)
	(vhdl-widget-directory-validate, vhdl-work-library)
	(vhdl-write-file-hooks-init): New functions.
	(vhdl-append, vhdl-add-warning, vhdl-align-noindent-buffer)
	(vhdl-align-noindent-region, vhdl-create-customize-menu)
	(vhdl-forward-unit, vhdl-modify-date-init, vhdl-project-switch)
	(vhdl-scan-file-contents, vhdl-speedbar-display-hierarchy)
	(vhdl-speedbar-toggle-hierarchy): Functions deleted.
	(vhdl-in-comment-p, vhdl-in-string-p, vhdl-standard-p): Define as
	functions, not defsubsts.
	(vhdl-in-comment-or-string-p, vhdl-speedbar-project-p):
	Delete defsubsts.
	(vhdl-compose, vhdl-naming, vhdl-speedbar, vhdl-template)
	(vhdl-testbench): New customization groups.
	(vhdl-electric): Customization group deleted.
	(vhdl-align-alist, vhdl-doc-coding-style, vhdl-doc-keywords)
	(vhdl-imenu-generic-expression): Define as constants instead of
	variables.
	(vhdl-ams-packages, vhdl-doc-release-notes, vhdl-emacs-21)
	(vhdl-hs-start-regexp, vhdl-time-stamp, vhdl-xemacs): New constants.
	(vhdl-font-lock-keywords-0): Constants deleted.
	(vhdl-prepare-search-1, vhdl-prepare-search-2, vhdl-visit-file):
	New macros.
	(vhdl-ext-syntax-table): Macro deleted.
	(vhdl-align-group-separate, vhdl-align-same-indent)
	(vhdl-architecture-file-name, vhdl-compile-use-local-error-regexp)
	(vhdl-components-package-name, vhdl-compose-architecture-name)
	(vhdl-compose-create-files, vhdl-compose-include-header)
	(vhdl-copyright-string, vhdl-default-library, vhdl-directive-keywords)
	(vhdl-entity-file-name, vhdl-file-name-case)
	(vhdl-include-group-comments, vhdl-include-type-comments)
	(vhdl-indent-syntax-based, vhdl-makefile-generation-hook)
	(vhdl-package-file-name, vhdl-project-auto-load)
	(vhdl-project-file-name, vhdl-project-sort, vhdl-speedbar-auto-open)
	(vhdl-speedbar-cache-file-name, vhdl-speedbar-display-mode)
	(vhdl-speedbar-jump-to-unit, vhdl-speedbar-save-cache)
	(vhdl-speedbar-scan-limit, vhdl-speedbar-update-on-saving)
	(vhdl-testbench-configuration-name)
	(vhdl-testbench-include-configuration, vhdl-testbench-include-header)
	(vhdl-testbench-include-library, vhdl-use-components-package)
	(vhdl-use-direct-instantiation): New options.
	(vhdl-compiler-options, vhdl-speedbar, vhdl-speedbar-hierarchy-indent)
	(vhdl-speedbar-show-hierarchy, vhdl-testbench-architecture-header)
	(vhdl-testbench-entity-header): Options deleted.
	(speedbar-indentation-width, vhdl-compile-file-name)
	(vhdl-config-alist, vhdl-directive-keywords-regexp)
	(vhdl-directory-alist, vhdl-font-lock-keywords-0, vhdl-menu-max-size)
	(vhdl-mode-ext-syntax-table, vhdl-modified-file-list)
	(vhdl-port-flattened, vhdl-port-reversed-direction)
	(vhdl-speedbar-hierarchy-depth, vhdl-speedbar-last-selected-project)
	(vhdl-speedbar-show-projects, vhdl-speedbar-shown-project-list)
	(vhdl-speedbar-shown-unit-alist, vhdl-speedbar-update-current-unit)
	(vhdl-subprog-flattened, vhdl-subprog-list, vhdl-updated-project-list)
	(vhdl-warnings): New variables.
	(vhdl-project-ent-inst-list, vhdl-project-entity-alist)
	(vhdl-project-package-alist, vhdl-speedbar-last-file-name)
	(vhdl-speedbar-shown-units-alist, vhdl-startup-warnings): Delete vars.

2003-03-04  Rob Kaut  <rob@siworks.com>  (tiny change)

	* progmodes/vhdl-mode.el (vhdl-comment-uncomment-region):
	Remove two comment characters at start of line instead of one.

2003-03-03  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* printing.el (pr-get-symbol): Move it to next eval-and-compile.

2003-03-03  John Paul Wallington  <jpw@gnu.org>

	* ibuf-macs.el (ibuffer-aif): Use `make-symbol' instead of
	`gensym' in case user calls macro at runtime.
	(ibuffer-save-marks): Likewise.

2003-03-03  Kenichi Handa  <handa@m17n.org>

	* language/japan-util.el (japanese-symbol-table): Add two entries
	to make it complete.

2003-03-03  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-fontify-node): Don't hide indentation before the
	reference name.  Don't process a reference twice when a new tag is
	inserted.
	(Info-hide-note-references): Fix doc and customize type.

2003-03-02  Matt Swift  <swift@alum.mit.edu>

	* emacs-lisp/lisp-mode.el (emacs-lisp-docstring-fill-column):
	New custom variable.
	(lisp-fill-paragraph): Use it.  Add ?, to `paragraph-separate' so
	that first docstring lines ending with a comma are respected.
	Add "`(" to same so that function and macro bodies beginning with a
	backquote do not get disturbed.  Revise the comments.

2003-03-01  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line): Call menu-bar-mode with 1 instead of t.

	* menu-bar.el (menu-bar-mode): Change to define-minor-mode
	and initialize as for tool-bar-mode.

2003-02-28  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* net/tramp.el: Version 2.0.30 released.
	Replace term "path" with "localname" unless it is used for a
	search path.
	(tramp-handle-expand-file-name): Allow ".." to cross host boundaries.
	(tramp-open-connection-setup-interactive-shell): Unset $ENV in
	addition to setting $PS1 when starting the Bourne-ish shell.
	Some sh implementations (eg, bash when called as sh) read the file
	named there on startup, which could clobber $PS1.
	(tramp-do-copy-or-rename-file-one-local): New function.
	Not implemented.  Not used.  Should invoke rcp or scp directly to keep
	the time.

2003-02-28  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp-smb.el: Replace term `path' with `localname'
	unless it is used for a search path.  In GNU, the word `path' is
	reserved for search paths.

	* net/tramp.el (tramp-send-string, tramp-send-region): Remove.
	(tramp-send-string): New function.  Takes over the role of the
	functions above, in order to have a unique place handling
	`tramp-chunksize'.  Same implementation as `tramp-send-region'.
	(tramp-chunksize): It's now a defcustom.  Set to 500 on systems
	only known to have a buggy `process-send-string' implementation.
	First black-listed constellation is GNU Emacs/ hpux.
	(tramp-send-region): Correct debug message.
	(tramp-bug): Add `tramp-chunksize'.

2003-02-26  Matt Swift  <swift@alum.mit.edu>

	* startup.el: Streamline code in several functions for efficiency
	and readability.  Rephrase booleans to avoid `(not noninteractive)'.
	Clarify several booleans expressions using De Morgan's laws.

	(command-line): Fix barf when first command-line option handled by
	`command-line-1' is in the form --OPT=VAL.
	(command-line-1): Restore intended behavior of the --directory/-L
	command-line option: "-L a -L b -L c" on the command-line now puts
	'(a b c) at the front of `load-path'.

2003-02-26  Oliver Scholz  <alkibiades@gmx.de>

	* play/gamegrid.el (gamegrid-add-score): Add info to docstring.
	(gamegrid-add-score-with-update-game-score-1): New function,
	factored out of `gamegrid-add-score-with-update-game-score'.
	(gamegrid-add-score-with-update-game-score): Use it.  Fall back on
	`gamegrid-add-score-insecure' if the requested file does not exist
	in $(gamedir), in case the user has installed a game on his own.
	(gamegrid-add-score-insecure): Accept optional directory argument.

2003-02-25  Andreas Schwab  <schwab@suse.de>

	* progmodes/make-mode.el (makefile-font-lock-keywords): Protect shell
	variable references by requiring that $ is not preceded by another $.

2003-02-25  Kenichi Handa  <handa@m17n.org>

	* env.el (setenv): Fix previous change.

2003-02-25  Ramakrishnan M  <rama@gnu.org>  (tiny change)

	* language/mlm-util.el (mlm-char-glyph): Fix more rules.

2003-02-24  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/simula.el: Move abbrev loading to after the fun it uses.
	(simula-install-standard-abbrevs): Use dolist.
	Use system-flag when calling define-abbrev.

2003-02-24  Dave Love  <fx@gnu.org>

	* obsolete/cplus-md.el: Delete.  (Requires removed c-mode.el.)

	* env.el (read-envvar-name): Decode names.
	(substitute-env-vars): Use eval-when-compile and char class.
	(setenv): Doc fix.  Encode the data (after checking that's possible).
	(getenv): Encode the name and decode the result.

2003-02-24  Ken Manheimer  <klm@zope.com>

	* allout.el (allout-pre-command-business): Fix docstring.

2003-02-24  Ramakrishnan M  <rama@gnu.org>  (tiny change)

	* language/mlm-util.el (mlm-char-glyph): Fix several composing rules.

2003-02-24  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Fix syntaxes of gb2312 and big5.

	* language/japan-util.el (sentence-end-save): Variable deleted.
	(setup-japanese-environment-internal): Don't setup sentence-end.
	(exit-japanese-environment): Function deleted.

	* language/japanese.el ("Japanese"): Delete `exit-function'.

	* textmodes/paragraphs.el (sentence-end): Add Chinese and Japanese
	characters.

2003-02-24  Ramakrishnan M  <rama@gnu.org>  (tiny change)

	* language/mlm-util.el (mlm-char-glyph): Add entries for "halant +
	rakar + halant" and "halant + rrakar + halant".

2003-02-23  Richard M. Stallman  <rms@gnu.org>

	* replace.el (query-replace-read-args): Return just 3 values.
	(query-replace, query-replace-regexp)
	(query-replace-regexp-eval, map-query-replace-regexp)
	(replace-string, replace-regexp): Read the start and end args
	separately so that the expressions are recorded in command-history.

	* menu-bar.el (Revert Buffer): Condition on buffer-file-number.

	* startup.el (inhibit-startup-hooks): New variable.
	(normal-top-level): Obey that variable.
	(command-line-1): Run emacs-startup-hook before term-setup-hook.
	Set inhibit-startup-hooks too.

	* files.el (revert-buffer): Different error message
	for reverting a nonexistent file.

2003-02-22  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/cperl-mode.el: Merge changes from CPerl-5.0.
	(toplevel): Require man.
	Don't autoload tmm-prompt (it's in loaddefs.el).
	(cperl-electric-backspace-untabify): New var.
	(cperl-electric-backspace): Use it.
	(cperl-vc-header-alist): Extract numeric version from the Id.
	(cperl-build-manpage): New fun.
	(cperl-menu): Use it.  Add toggle-autohelp.
	(cperl-mode) <defun-prompt_regexp>: Understand prototypes.
	(cperl-electric-brace): Use `cperl-after-block-p' for detection.
	(cperl-electric-keyword): Make $if (etc: "$@%&*") non-electric.
	'(' after keyword would insert a doubled paren.
	(cperl-calculate-indent): Update syntaxification before checks.
	Fix wrong indent of blocks starting with POD.
	(cperl-find-pods-heres): If no end of HERE-doc found, mark to the end
	of buffer.  This enables recognition of end of HERE-doc "as one types".
	Require "\n" after trailing tag of HERE-doc.
	\( made non-quoting outside of string/comment (gdj-contributed).
	Likewise for \$.  Remove `here-doc-group' text property at
	start (makes this property reliable).
	Text property `first-format-line' ==> t.
	Do not recognize $opt_s and $opt::s as s///.
	(cperl-after-block-p): Optional arg pre-block to check for a pre-block
	Recognize `continue' blocks too.
	(cperl-after-expr-p): Update syntaxification before checks.  Work after
	here-docs, formats, and PODs too (affects many electric constructs).
	(cperl-fix-line-spacing): Allow "_" in $vars of foreach etc.
	(cperl-perldoc): Use case-sensitive search.

	* progmodes/cperl-mode.el: Merge changes from CPerl-4.35.
	(cperl-xemacs-p): Move.
	(cperl-can-font-lock): New var to replace window-system.
	(cperl-enable-font-lock): Use it.
	(cperl-use-major-mode): New var.
	(cperl-mode): Use it.
	(cperl-calculate-indent): Remove code whose removal was missed
	in some earlier merge.
	(cperl-tags-hier-init): Use display-popup-menus-p.

2003-02-22  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* files.el (abbreviate-file-name): Shorten docstring: variables
	are now hyperlinks and `C-h v' need not be mentioned explicitly.

2003-02-21  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* files.el (abbreviate-file-name): Document removal of
	automounter prefixes.  Reported by Lars Hansen.

2003-02-21  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Add run-time check to catch users trying
	to use older versions of CUA-mode, rather than the version
	distributed with Emacs.  Use autoload cookies and eval-after-load.

	* startup.el (command-line): Clarify and tidy up the message
	printed when there are errors in the user-init-file.
	Do not encapsulate the error data; it's read by humans here.
	Do not split windows when displaying the *Message* buffer.

2003-02-20  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (with-syntax-table): Don't copy the table any more.

2003-02-20  Ehud Karni  <ehud@unix.mvs.co.il>  (tiny change)

	* mail/rmail.el (rmail-insert-inbox-text): Make the pop3 mechanism
	work on cygwin systems too.

2003-02-20  Juanma Barranquero  <lektu@terra.es>

	* progmodes/ebrowse.el (ebrowse-show-file-name-at-point):
	Remove useless check.

2003-02-20  Andreas Schwab  <schwab@suse.de>

	* info.el (Info-extract-menu-node-name): Stop if colon is
	followed by open paren.

2003-02-20  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (unforward-rmail-message): Allow nested
	unforwarding, that is, preserve old Forwarded-From/Date headers.

2003-02-20  Kenichi Handa  <handa@m17n.org>

	* term/w32-win.el: Call set-fontset-font with NAME nil.

	* international/mule-diag.el (print-fontset): If FONTSET is nil,
	use the default fontset.
	(describe-fontset): If the current frame is not using a fontset,
	call print-fontset with nil.

2003-02-19  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-binary-assoc, vc-binary-suffixes): Remove; these
	were accidentally left over during the VC redesign in 2000.

2003-02-18  Juanma Barranquero  <lektu@terra.es>

	* help-macro.el (make-help-screen): Fix character constant.

	* mouse-sel.el (mouse-sel-determine-selection-thing): Likewise.

	* calc/calc-graph.el (calc-graph-plot): Likewise.

	* calc/calc-prog.el (calc-macro-edit-variable): Likewise.

	* emacs-lisp/edebug.el: Likewise.

	* emacs-lisp/helper.el (Helper-help-scroller): Likewise.

	* language/cyril-util.el (standard-display-cyrillic-translit):
	Likewise.

	* mail/rfc822.el (rfc822-nuke-whitespace): Likewise.

	* progmodes/cperl-mode.el (cperl-electric-keyword)
	(cperl-electric-pod, cperl-do-auto-fill): Likewise.

	* textmodes/reftex-ref.el (reftex-reference): Likewise.

	* textmodes/table.el (table-generate-source): Use ?\\ instead of
	space in "work in progress" message.

	* emacs-lisp/tq.el (tq-create): Fix quoted lambda expression.

2003-02-17  Dave Love  <fx@gnu.org>

	* progmodes/ebrowse.el (ebrowse-output): Don't use gensym.

2003-02-17  Markus Rost  <rost@math.ohio-state.edu>

	* calendar/calendar.el (diary-file-name-prefix-function):
	Fix custom type.

2003-02-17  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-dir-state): Protect against DIR not being
	under CVS control.  Suggested by Masanobu UMEDA.

2003-02-17  Kenichi Handa  <handa@m17n.org>

	* files.el (insert-directory): Add workaround for the case that we
	can't trust ls's output as to byte positions of filenames.

2003-02-15  Richard M. Stallman  <rms@gnu.org>

	* ffap.el: Many doc fixes.
	(ffap-replace-file-component):
	Renamed from ffap-replace-path-component.  Callers changed.
	(ffap-host-to-filename): Renamed from ffap-host-to-path.  Callers chgd.

	* international/iso-ascii.el (iso-ascii-display-table): New variable.
	(iso-ascii-standard-display-table): New variable.
	(iso-ascii-display): Define in iso-ascii-display-table.
	(iso-ascii-mode): New command.

	* tar-mode.el (tar-header-block-summarize):
	Use l for symlink, h for hard link.

2003-02-15  David Kastrup  <dak@gnu.org>

	* net/ange-ftp.el (ange-ftp-get-file-entry): Allow for graceful
	failure returning nil, as documented.

2003-02-14  Dave Love  <fx@gnu.org>

	* international/code-pages.el: Undo `Trailing whitepace deleted.'
	damage.
	(cp1125, mik): Nullify mime-charset.

	* language/cyrillic.el ("Cyrillic-KOI8"): Fix input-method.
	("Russian"): New.
	("Bulgarian"): Add tutorial.

	* international/mule-cmds.el (locale-language-names): Use Italian,
	Russian, Turkish, Chinese-EUC-TW.
	(set-locale-environment): Set ps-paper-type.

2003-02-14  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>  (tiny change)

	* time.el (display-time-string-forms): Add face property to mail
	string.

2003-02-14  Juanma Barranquero  <lektu@terra.es>

	* international/mule-cmds.el (view-hello-file): Use `view-file'
	instead of `find-file-read-only'.

	* dired-aux.el (dired-query-alist): Fix use of character constant.

	* simple.el (backward-delete-char-untabify): Likewise.

	* strokes.el (strokes-read-complex-stroke): Likewise.

	* wid-edit.el (widget-choose): Likewise.

	* xml.el (xml-parse-elem-type): Likewise.

	* emacs-lisp/testcover-ses.el (ses-exercise-signals): Likewise.

	* progmodes/cperl-mode.el (cperl-next-bad-style): Likewise.

	* progmodes/idlwave.el (idlwave-show-begin): Likewise.

2003-02-13  Stefan Monnier  <monnier@cs.yale.edu>

	* international/mule-cmds.el (sort-coding-systems): Use \'.
	(select-safe-coding-system): Remove redundant assq check.
	Remove raw-text, emacs-mule and no-conversion from the list of
	proposed encodings unless there's nothing else.

2003-02-13  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (find-alternate-file): Undo last change.

	* dired.el (dired-directory): Add autoload cookie.

2003-02-13  Juanma Barranquero  <lektu@terra.es>

	* international/characters.el: Use new ?\s syntax instead of "? "
	followed by a comment.

	* ruler-mode.el (ruler-mode-margins-char): Likewise.

2003-02-13  Dave Love  <fx@gnu.org>

	* newcomment.el (comment-indent): Ensure space before added comment.

2003-02-13  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Change the policy of background/foreground default
	color.
	(ps-print-version): New version number (6.5.9).
	(ps-default-fg, ps-default-bg): Adjust default value.
	(ps-begin-file, ps-begin-job): ps-default-fg and ps-default-bg
	variables now use `t' to indicate the use of Emacs session
	background/foreground color.
	(ps-output-string-prim): If index out of range, insert hexadecimal
	representation of character.

2003-02-13  Kim F. Storm  <storm@cua.dk>

	* help.el (where-is): Rename remap-command to command-remapping.
	* help-fns.el (describe-function-1): Likewise.

2003-02-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-fill): Fill lines that do not have
	comments.

2003-02-12  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/fortran.el (fortran-mode): Set comment-use-syntax.
	(fortran-fill-paragraph): Use fill-comment-paragraph.

2003-02-12  Juanma Barranquero  <lektu@terra.es>

	* files.el (file-truename): Revert change from 2002-11-27.

2003-02-12  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* help-fns.el (describe-function-1): Change output for keyboard macros.

2003-02-12  Andreas Schwab  <schwab@suse.de>

	* progmodes/sh-script.el (sh-mode-map): Don't remap
	beginning-of-defun to the non-existing command
	sh-beginning-of-compound-command.

2003-02-12  Karl Chen  <quarl@hkn.eecs.berkeley.edu>

	* files.el (find-alternate-file): Check whether `dired-directory'
	is bound.

2003-02-12  Simon Marshall  <simon@gnu.org>

	* progmodes/make-mode.el (makefile-font-lock-keywords):
	Fontify single character variable references, but protect shell
	variables references.
	(makefile-mode): Make `$' be punctuation in font-lock-defaults.

2003-02-12  Ami Fischman  <ami@fischman.org>

	Face markup of calendar and diary displays: Any entry line that
	ends with [foo:value] where foo is a face attribute (except :box
	:stipple) or with [face:blah] tags, will have these values applied
	to the calendar and fancy diary displays.  These attributes "stack"
	on calendar displays.  File-wide attributes can be defined as
	follows: the first line matching "^# [tag:value]" defines the
	value for that particular tag.  All of the tags' regexps can be
	customized.

	* calendar/calendar.el (diary-face-attrs): New custom.
	(diary-file-name-prefix-function): New custom.
	(diary-glob-file-regexp-prefix): New custom.
	(diary-file-name-prefix): New custom.
	(generate-calendar-window): Check that font-lock-mode is bound
	before checking value.
	(mark-visible-calendar-date): Add the ability to pass face
	attribute/value pairs in the mark argument.  Handle the mark.

	* calendar/diary-lib.el (diary-attrtype-convert): Convert an
	attribute value string to the desired type.
	(diary-pull-attrs): New function that pulls the attributes off a
	diary entry, merges with file-global attributes, and returns
	the (possibly modified) entry and a list of attribute/values using
	diary-attrtype-convert.
	(list-diary-entries, fancy-diary-display, show-all-diary-entries)
	(mark-diary-entries, mark-sexp-diary-entries)
	(list-sexp-diary-entries): Add handling of file-global attributes;
	add handling of entry attributes using diary-pull-attrs.
	(mark-calendar-days-named, mark-calendar-days-named)
	(mark-calendar-date-pattern, mark-calendar-month)
	(add-to-diary-list): Add optional paramater `color' for passing
	face attribute info through the callchain.  Pass this parameter around.

2003-02-11  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/etags.el (find-tag-tag): Move (default foo) to before
	`:' in the prompt.
	(find-tag): Make sure we move point in the proper window.

	* progmodes/meta-mode.el (meta-fill-paragraph): Remove.
	(meta-common-initialization): Don't set fill-paragraph-function
	now that fill-paragraph takes care of comments.

	* progmodes/scheme.el (scheme-mode-syntax-table): Don't switch
	the current buffer's syntax-table.

	* progmodes/simula.el (simula-font-lock-syntactic-keywords): New var.
	(simula-font-lock-keywords-1): Simplify.
	(simula-font-lock-keywords-2): Use regexp-opt.
	(simula-emacs-features): Remove.
	(simula-mode-syntax-table): Setup %...\n as comment style b.
	(simula-mode-map): Remove compatibility cruft.
	(simula-keep-region-active): Remove.
	(simula-popup-menu): Simplify.
	(simula-mode): Move abbrev-table setup to top-level.
	(simula-match-string-or-comment): Remove.

	* progmodes/tcl.el (tcl-omit-ws-regexp): Correctly handle cases
	like `proc foo {a {b c} d} {'.
	(tcl-mode): Make comment-start-skip more selective.

	* info-xref.el (info-xref-check): Use line-beginning-position.
	(info-xref-all-info-files): Cons a bit less.
	(info-xref-check-buffer): Use push and replace-regexp-in-string.
	(info-xref-output): Call insert only once.
	(info-xref-whitespace): Remove.

2003-02-11  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (toplevel): Don't require `font-lock';
	require `font-core' instead, even though it is dumped.

	* ibuf-ext.el (ibuffer-save-with-custom, ibuffer-add-to-tmp-hide)
	(ibuffer-add-to-tmp-show): Doc fixes.

	* language/tamil.el ("Tamil"): Doc fix.

2003-02-11  Juanma Barranquero  <lektu@terra.es>

	* language/vietnamese.el ("Vietnamese"): Fix typos.

	* info-xref.el (info-xref-check-buffer): Fix typo.

	* makefile.w32-in (DONTCOMPILE): Add malayalam.el and tamil.el.

2003-02-11  Kenichi Handa  <handa@m17n.org>

	* loadup.el: Load "language/malayalam" and "language/tamil".

2003-02-11  KAWABATA, Taichi  <kawabata@m17n.org>

	* Makefile.in (DONTCOMPILE): Add malayalam.el and tamil.el.

	* language/devan-util.el: Maintainer's mail address changed.
	(devanagari-composable-pattern): Add DANDA character.
	(dev-char-glyph): Add an entry for DANDA.

	* language/devanagari.el: Maintainer's mail address changed.

	* language/indian.el: Maintainer's mail address changed.

	* language/ind-util.el (indian-dev-base-table): Table fixed.
	(indian-pnj-base-table): Table contents defined.
	(indian-gjr-base-table): Likewise.
	(indian-ori-base-table): Likewise.
	(indian-bng-base-table): Likewise.
	(indian-asm-base-table): Likewise.
	(indian-tlg-base-table): Likewise.
	(indian-knd-base-table): Likewise.
	(indian-mlm-base-table): Likewise.
	(indian-tml-base-table): Likewise.
	(indian-pnj-itrans-v5-hash, indian-gjr-itrans-v5-hash)
	(indian-ori-itrans-v5-hash, indian-bng-itrans-v5-hash)
	(indian-asm-itrans-v5-hash, indian-tlg-itrans-v5-hash)
	(indian-knd-itrans-v5-hash, indian-mlm-itrans-v5-hash)
	(indian-tml-itrans-v5-hash): New variables.

	* language/malayalam.el: New file.
	* language/mlm-util.el: New file.
	* language/tamil.el: New file.
	* language/tml-util.el: New file.

2003-02-11  Kevin Ryde  <user42@zip.com.au>

	* info-xref.el: New file.

2003-02-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/page-ext.el (pages-directory-mode-map): New.
	(pages-directory-map): Redefine as an varalias.
	(pages-directory-mode): Use new map var and run mode hook.
	(pages-directory-address-mode): Use define-derived-mode.

	* textmodes/texinfmt.el (texinfo-format-iftex, texinfo-format-ifhtml)
	(texinfo-format-ifplaintext, texinfo-format-tex, texinfo-format-html)
	(texinfo-format-ifnotinfo, texinfo-format-titlepage)
	(texinfo-format-titlespec, texinfo-format-ignore, texinfo-if-set)
	(texinfo-if-clear): Use re-search-forward's return value.
	(texinfo-sort-startkeyfun, texinfo-format-buffer-1)
	(texinfo-format-region): Use line-{end,beginning}-position.
	(texinfo-append-refill, texinfo-alias): Use match-string-no-properties.

	* emacs-lisp/eldoc.el (eldoc-echo-area-multiline-supported-p)
	(eldoc-use-idle-timer-p): Remove.
	(timer): Never require.  It only works in current Emacs anyway.
	(eldoc-mode, eldoc-message, eldoc-display-message-p)
	(eldoc-docstring-format-sym-doc, eldoc-remove-command): Simplify.

	* ffap.el (ffap-complete-as-file-p):
	Use minibuffer-completing-file-name.

	* international/mule.el (load-with-code-conversion): Use push.

	* font-core.el (font-lock-defontify): Use restore-buffer-modified-p.

	* gud.el (gud-gdb-run-command-fetch-lines, gud-display-line):
	Use with-current-buffer and simplify.

	* help-mode.el (help-xref-on-pp): Only add xref if the text
	is less than 5K.

	* pcvs-parse.el (cvs-parse-table): "no longer in repo" does not
	make the file dead if we used the -n arg.

	* emacs-lisp/cl-macs.el (process-get): Add setf method.

	* server.el (server-previous-strings): Remove.
	(server-process-filter): Use (process-get 'previous-string) instead.
	(server-sentinel): Remove code made superfluous.

2003-02-10  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* info.el (Info-follow-nearest-node): Implement new behavior.

2003-02-10  Juanma Barranquero  <lektu@terra.es>

	* progmodes/ebnf-otz.el (ebnf-optimize, ebnf-optimize1): Fix typo.

	* progmodes/ebnf2ps.el (ebnf2ps): Fix typo.
	(ebnf-syntactic): Change group name and tag from "ebnf-syntatic".
	(ebnf-syntax, ebnf-lex-comment-char, ebnf-lex-eop-char)
	(ebnf-terminal-regexp, ebnf-case-fold-search)
	(ebnf-iso-alternative-p, ebnf-iso-normalize-p)
	(ebnf-yac-ignore-error-recovery): Add to group "ebnf-syntactic", not
	"ebnf-syntatic".
	(ebnf-optimize, ebnf-print-buffer, ebnf-print-region)
	(ebnf-spool-buffer, ebnf-spool-region, ebnf-eps-buffer)
	(ebnf-eps-region, ebnf-syntax-buffer, ebnf-syntax-region)
	(ebnf-generate-region): Fix typo.

2003-02-10  KAWABATA, Taichi  <kawabata@m17n.org>

	* language/ind-util.el (indian-itrans-v5-table): Add entries for
	"E" and "O".

2003-02-10  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-styles.el (c-set-offset): Don't find a default
	syntactic element through syntactic analysis if called outside
	a CC Mode buffer.

2003-02-09  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (c-basic-common-init):
	Install `c-fill-paragraph' on `fill-paragraph-function'.
	Although it's not the normal way to call it in a CC Mode buffer it
	makes a direct call to `fill-paragraph' work better.

2003-02-08  Kim F. Storm  <storm@cua.dk>

	* printing.el (pr-get-symbol): Define during compile.

2003-02-07  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* printing.el: New file.

2003-02-07  Francesco Potortì  <pot@gnu.org>

	* language/european.el ("French", "Slovenian"): Fix doc strings.

2003-02-06  John Paul Wallington  <jpw@gnu.org>

	* mail/rmailsum.el (rmail-summary-previous-msg): Add docstring.
	(rmail-summary-line-count-flag, rmail-summary-previous-labeled-message)
	(rmail-summary-next-labeled-message, rmail-summary-resend)
	(rmail-summary-override-mail-send-and-exit): Doc fixes.

2003-02-06  Francesco Potortì  <pot@gnu.org>

	* language/european.el ("Italian"): New.

2003-02-06  Matthew Swift  <swift@alum.mit.edu>

	* dired.el (dired-move-to-filename-regexp): Support "K" suffix on
	"ls -alh" output.

2003-02-05  Juanma Barranquero  <lektu@terra.es>

	* font-lock.el (font-lock-reference-face): Add obsolescence
	declaration and remove redundant info from docstring.

	* log-edit.el (cvs-commit-buffer-require-final-newline)
	(cvs-changelog-full-paragraphs): Likewise.

	* mwheel.el (mouse-wheel-down-button, mouse-wheel-up-button)
	(mouse-wheel-click-button): Likewise.

	* pcvs-defs.el (cvs-diff-ignore-marks, cvs-diff-buffer-name): Likewise.

	* vc.el (vc-annotate-display, vc-checkout-carefully): Likewise.

	* vc-hooks.el (vc-ignore-vc-files, vc-master-templates)
	(vc-header-alist): Likewise.

	* emacs-lisp/checkdoc.el (checkdoc-minor-keymap): Likewise.

	* textmodes/outline.el (outline-visible): Likewise.

2003-02-05  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-define-mode-map):
	Undo last change (duplicates part of 2003-02-04 change).
	Remap `viper' delete commands only in file or dir mode.

2003-02-05  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* ido.el (ido-define-mode-map): Interact with Viper.

2003-02-05  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* net/tramp.el: Version 2.0.29 released.
	(tramp-send-region): Protect against tramp-chunksize being nil.
	(tramp-chunksize): Set default to 500 as workaround for some ssh
	connections.
	(tramp-handle-directory-file-name): New implementation.  Not sure
	if it works.
	(tramp-md5-function): Require md5 before checking function md5.
	If using md5-encode, put wrapper around it that converts vector of
	bytes to ascii text.
	(top-level): Avoid byte-compiler warnings of unused variables if
	the byte-compiler supports this.  This is for the
	with-parsed-tramp-file-name macro which is wont to produce such stuff.

2003-02-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-handle-directory-file-name): Handle the case
	PATH is "".
	(tramp-completion-handle-file-name-all-completions):
	Define `tramp-current-user' locally.  See `tramp-parse-passwd'.
	(tramp-parse-passwd): For su-alike methods it would be desirable
	to return "root@localhost" as default.  Unfortunately, we have no
	information whether any user name has been typed already.  So we
	(mis-)use tramp-current-user as indication, assuming it is set in
	`tramp-completion-handle-file-name-all-completions'.
	(tramp-send-region): Handle the case `tramp-chunksize' is equal 0.
	I did it accidentally.  Infinite loop ...
	(tramp-get-device): `tramp-make-tramp-file-name' must not be
	called with NIL path.  It fails in case of multi-method.
	(tramp-file-name-for-operation): Apply `expand-file-name' for
	relative file names only.  Otherwise there might be problems if
	the default directory is another Tramp directory as the directory
	the file is based on.
	(tramp-find-foreign-file-name-handler): Check whether FILENAME is
	a Tramp file name.  It isn't if it comes from an expanded file
	name (like "/xx:yy//zz").
	(tramp-devices): New variable.  Keeps virtual device numbers.
	Devices must distinguish physical file systems.  The device
	numbers provided by "lstat" aren't unique, because we operate on
	different hosts.  So we use virtual device numbers, generated by
	`tramp-get-device'.  Both Ange-FTP and EFS use device number -1.
	In order to be different, we use device number (-1 x), whereby "x"
	is unique for a given (multi-method method user host).
	Suggested by Kai.
	(tramp-perl-file-attributes): Always return device number -1.
	There will be a virtual device number set in
	`tramp-handle-file-attributes', which replaces this one.
	(tramp-handle-file-attributes): Set virtual device number.
	(tramp-get-device): New function.  Returns the virtual device
	number.  If it doesn't exist, generate a new one.
	(tramp-handle-file-regular-p): Use Emacs file name primitives
	instead of calling tramp-handle-* equivalents directly.
	Needed for tramp-smb.
	(tramp-completion-function-alist-ssh): Add parsing of
	"/etc/ssh_config" and "~/.ssh/config".  Suggested by Kai.
	(tramp-completion-function-alist, tramp-set-completion-function):
	Doc string update.
	(tramp-parse-sconfig, tramp-parse-sconfig-group): New functions.
	Provide parsing of "~/.ssh/config" style files.
	(tramp-completion-handle-expand-file-name):
	Apply `tramp-drop-volume-letter'.  Otherwise, there are problems
	on W32 systems.
	(tramp-completion-mode): Perform check (integerp last-input-event)
	before (event-modifiers last-input-event) -- there might be
	problems if `last-input-event' is a mouse event.
	(tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd, tramp-parse-netrc):
	Use `file-readable-p' instead of `file-exists-p'.  Otherwise these
	functions might block.  Reported by <kin@neoscale.com>.

	* net/tramp-ftp.el (top-level): eval-after-load "ange-ftp"
	'(tramp-disable-ange-ftp).  Suggested by Kai.
	(tramp-ftp-file-name-handler): `tramp-disable-ange-ftp' not needed
	any longer.
	(top-level): Defaults for `tramp-default-method-alist' must be a list.

	* net/tramp-smb.el (tramp-smb-file-name-handler-alist):
	Apply `tramp-handle-directory-file-name'.
	(tramp-smb-handle-file-attributes): Apply `tramp-get-device'.
	ATIME and CTIME are (0 0) now (= "don't know"), which is more honest.
	(tramp-smb-handle-make-directory): Use Emacs file name primitives
	instead of calling tramp-smb-handle-* equivalents directly.
	(tramp-smb-read-file-entry): Return size as a number, not a string.
	(top-level): Defaults for `tramp-default-method-alist' must be a list.

2003-02-05  Stefan Monnier  <monnier@cs.yale.edu>

	* completion.el (eval-when-compile-load-eval, completion-eval-when)
	(cmpl-read-time-eval, minibuffer-window-selected-p): Remove.
	(completion-min-length, completion-max-length)
	(completion-prefix-min-length): Don't hard-code the default value
	when byte-compiling.
	(complete): Inline minibuffer-window-selected-p.

2003-02-04  Richard M. Stallman  <rms@gnu.org>

	* term.el (term-raw-map): Set it up at load time.
	(term-char-mode): Don't set up term-raw-map here.
	(term-set-escape-char): Don't set up C-x subcommand.
	(term-ansi-face-already-done): Renamed from
	term-ansi-face-alredy-done.
	(term-command-hook): Avoid error if STRING is empty.
	(term, term-mode): Doc fixes.

	* term.el: Redesign handling of colors and faces.
	Delete all the faces that this mode used to make.
	(ansi-term-color-vector): New variable.
	(ansi-term-fg-faces-vector, ansi-term-bg-faces-vector)
	(ansi-term-inv-bg-faces-vector, ansi-term-inv-fg-faces-vector):
	Variables deleted.
	(term-default-fg-color, term-default-bg-color): Use defcustom.
	(term-handle-colors-array): Use ansi-term-color-vector,
	and specify face attributes rather than faces in `face' property.

	* term.el (term-ansi-fg-faces-vector, term-ansi-bg-faces-vector)
	(term-ansi-inv-fg-faces-vector, term-ansi-inv-bg-faces-vector)
	(term-ansi-reverse-faces-vector): Delete unused variables.
	(term-ignore-error): Delete macro.

	* simple.el (back-to-indentation): Skip all whitespace
	except for newlines.

	* files.el (find-alternate-file): Handle dired-directory
	like buffer-file-name.

	* dired.el (dired-find-buffer-nocreate): Avoid error if
	dired-directory is nil.

2003-02-04  Juanma Barranquero  <lektu@terra.es>

	* image.el (image-type-regexps): Fix typo.

	* international/characters.el: Restore missing space and put a
	comment to protect it from being deleted as trailing whitespace.

	* ruler-mode.el (ruler-mode-margins-char): Likewise.

2003-02-04  Francesco Potortì  <pot@gnu.org>

	* mail/rmailout.el (rmail-output): If preserving MIME-version,
	preserve Content-type too.

2003-02-04  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-define-mode-map): Remap viper delete char/word
	commands to their ido specific equivalents.  Disable ESC in
	viper mode (to avoid exiting insert mode), since ido doesn't
	work in viper command mode.
	(ido-delete-backward-updir, ido-delete-backward-word-updir):
	Handle remapped viper commands.

2003-02-03  Juanma Barranquero  <lektu@terra.es>

	* calculator.el (calculator): Don't use the minibuffer even in
	electric mode; use a private buffer and display it in the minibuffer
	window using `set-window-buffer'.

2003-02-03  Dave Love  <fx@gnu.org>

	* emacs-lisp/benchmark.el: New.

2003-02-02  Andreas Schwab  <schwab@suse.de>

	* progmodes/asm-mode.el (asm-font-lock-keywords): Allow arbitrary
	words separated by dots.  Match optional parenthesized word at
	start of line.

	* font-lock.el
	(font-lock-match-c-style-declaration-item-and-skip-to-next):
	Don't require underscore in word before double open-paren.

2003-02-02  John Paul Wallington  <jpw@gnu.org>

	* hexl.el (hexl-mode-map): Bind C-m to `hexl-self-insert-command'.

2003-02-01  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el: Tweak doc strings and preamble commentary.
	(time-stamp): Fix parsing of "%%a" in time-stamp-pattern (change
	regexp subpattern 5)
	(time-stamp-pattern): Initialize to nil to avoid regexp work in
	default case.
	(time-stamp-string): Call set-time-zone-rule instead of setenv.
	(time-stamp-hhmmss): Remove (not needed after all).
	(time-stamp-month-dd-yyyy, time-stamp-dd/mm/yyyy)
	(time-stamp-mon-dd-yyyy, time-stamp-dd-mon-yy, time-stamp-yy/mm/dd)
	(time-stamp-yyyy/mm/dd, time-stamp-yyyy-mm-dd, time-stamp-yymmdd)
	(time-stamp-hh:mm:ss, time-stamp-hhmm): Make obsolete.

2003-01-31  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-edit.el (custom-unlispify-menu-entry): Use with-current-buffer.
	(custom-save-variables): Use dolist, simplify.
	Output a message if a `requests' entry looks suspicious.
	(custom-save-faces): Use dolist, simplify.

2003-01-31  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: Bug fixes, miscellaneous.
	(antlr-mode): Make major mode work with cc-mode-5.29 or higher,
	make it more robust against changes in cc-mode's style variables
	by using `boundp' and function `c-init-language-vars' if defined.
	(antlr-c++-mode-extra): Only ask if language is not "Cpp".
	(antlr-read-value): With completion, ignore case.
	(antlr-run-tool-interactive): New function.
	(antlr-run-tool): Use it for `interactive' specification.

	* antlr-mode.el: Simplify Emacs/XEmacs compatibility.
	(cond-emacs-xemacs): New compile-time macro.
	(defunx): New compile-time macro.
	(ignore-errors-x): New compile-time macro.
	(save-buffer-state-x): New compile-time macro.

	(antlr-scan-sexps, antlr-simple-scan-sexps): Deletia.
	(antlr-scan-lists, antlr-simple-scan-sexps): Deletia.
	(antlr-simple-default-directory): Deletia.
	(antlr-default-directory): Define directly.
	(antlr-simple-read-shell-command): Deletia.
	(antlr-read-shell-command): Define directly.
	(antlr-simple-with-displaying-help-buffer): Deletia.
	(antlr-with-displaying-help-buffer): Define directly.
	(antlr-fast-invalidate-context-cache): Deletia.
	(antlr-slow-invalidate-context-cache): Deletia.
	(antlr-invalidate-context-cache): Define directly.
	(antlr-fast-syntactic-context): Deletia.
	(antlr-slow-syntactic-context): Deletia.
	(antlr-syntactic-context): Define directly.

	(antlr-mode-menu): Use new macros.
	(antlr-font-lock-additional-keywords): Ditto.
	(antlr-skip-sexps): Ditto.
	(antlr-end-of-rule): Ditto.
	(antlr-beginning-of-rule): Ditto.
	(antlr-end-of-body): Ditto.
	(antlr-beginning-of-body): Ditto.
	(antlr-hide-actions): Ditto.
	(antlr-option-kind): Ditto.

	* antlr-mode.el: In Emacs, use face attribute :weight, not :bold.
	(antlr-font-lock-keyword-face): Use new macros.
	(antlr-font-lock-syntax-face): Ditto.
	(antlr-font-lock-ruledef-face): Ditto.
	(antlr-font-lock-tokendef-face): Ditto.
	(antlr-font-lock-literal-face): Ditto.

	Changes from 2002-05-24:

	* antlr-mode.el: Version 2.2a.

	Changes from 2002-05-03:

	* antlr-mode.el: Make context parsing faster on Emacs, for faster
	syntax highlighting, indentation and imenu support.
	Suggested by Aaron Davies <adavies42@users.sourceforge.net>.
	(antlr-slow-context-cache): New variable.
	(antlr-slow-syntactic-context): Use cache.
	(antlr-slow-cache-enabling-symbol): New internal variable.
	(antlr-slow-cache-diff-threshold): New variable.
	(antlr-fast-invalidate-context-cache): Renamed from
	antlr-xemacs-bug-workaround.
	(antlr-imenu-create-index-function): Search from beginning.

	* antlr-mode.el: More sophisticated indentation, i.e., use the
	indentation engine of cc-mode for most actions.
	(antlr-c-common-init): Allow nil for `antlr-indent-style'.
	(antlr-indent-line): Use indentation engine of cc-mode more often.
	(antlr-indent-at-bol-alist): Only used for header actions.
	(antlr-disabling-cc-syntactic-symbols): New variable.
	(antlr-indent-item-regexp): Delete stuff for actions.
	(antlr-indent-at-bol-alist): With language "Java", indent
	"package" and "import" at column 0 in header part.

	* antlr-mode.el (antlr-simple-default-directory): Define.
	(antlr-simple-read-shell-command): Define.
	(antlr-simple-with-displaying-help-buffer): Define.
	(antlr-simple-scan-sexps, antlr-simple-scan-lists):
	Renamed from antlr-scan-{sexps,lists}-internal.

	Changes from 2002-02-28:

	* antlr-mode.el: Version 2.2 is released.

	* antlr-mode.el (antlr): Moved to SourceForge.net

	* antlr-mode.el: Minor bug fixes: insert options and indentation.
	(antlr-option-location): Don't use point as position where to
	insert options if point is in comment.
	(antlr-mode): Don't set style here.
	(antlr-c-common-init): Set style here.  If boundp, set
	`c-current-comment-prefix' to not break indentation in comments.
	Hm, I should probably split `c-common-init' from cc-mode into two
	parts, one of which I could use for antlr-mode.el.

	Changes from 2002-01-31:

	* antlr-mode.el (antlr-font-lock-additional-keywords):
	Also highlight `~' with `antlr-font-lock-syntax-face'.
	Suggested by Helmut Neukirchen <neukirchen@itm.mu-luebeck.de>.

2003-01-31  Joe Buehler  <jhpb@draco.hekimian.com>

	* comint.el:
	* dired-aux.el:
	* dired.el:
	* dirtrack.el:
	* dos-w32.el:
	* fast-lock.el:
	* filecache.el:
	* files.el:
	* hippie-exp.el:
	* international/mule.el:
	* net/browse-url.el:
	* pcomplete.el:
	* recentf.el:
	* shell.el:
	* woman.el: Added cygwin to system-type comparisons.

2003-01-31  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (rmail-forward-separator-regex): New custom
	variable.
	(unforward-rmail-message): Use it.

2003-01-30  Dave Love  <fx@gnu.org>

	* textmodes/ispell.el (lookup-words): Fix last change.

2003-01-29  John Paul Wallington  <jpw@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Match `deftheme'.

	* emacs-lisp/lisp-mode.el (toplevel): Define docstring offset for
	`deftheme'.  Fix docstring offsets for `define-ibuffer-filter' and
	`define-ibuffer-sorter'.
	(lisp-imenu-generic-expression): Add `deftheme' to types.

	* custom.el (customize-mark-to-save, customize-mark-as-set)
	(custom-remove-theme): Doc fixes.

2003-01-29  Didier Verna  <didier@xemacs.org>

	* cus-edit.el (custom-save-variables): Also save non theme'd ones.
	* cus-edit.el (custom-save-faces): Ditto.

2003-01-29  Juanma Barranquero  <lektu@terra.es>

	* composite.el (decompose-composite-char): Fix docstring.

	* select.el (x-set-cut-buffer): Fix docstring.  Check type with
	`stringp' instead of `substring'.

	* textmodes/reftex.el (reftex-TeX-master-file): Use really the buffer
	file name if no other master file is located.

	* progmodes/cperl-mode.el (cperl-beautify-level)
	(cperl-beautify-regexp): Fix use of `prefix-numeric-value'.
	(cperl-calculate-indent): Fix typo.

2003-01-29  Taro Kawagishi  <tarok@transpulse.org>

	* arc-mode.el (archive-lzh-summarize): Fix previous change.

2003-01-29  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el: New format of AUTHORS file; list each
	author name once followed by contributed and changed files.
	Improve selection of entries to include in list, and generate list
	of unrecognized entries indicating syntax errors in ChangeLog files.
	(authors-coding-system): New variable.
	(authors-many-files): Update doc string.
	(authors-aliases): Change format.  Now one entry with multiple
	aliases per author.
	(authors-valid-file-names, authors-renamed-files-alist)
	(authors-renamed-files-regexps): New variables.
	(authors-canonical-file-name): New function.  Validates that file
	exists or occurs in one of the above lists.  Record unrecognized
	file names in global authors-invalid-file-names list.
	(authors-add): Change to record per-change counts.
	(authors-canonical-author-name): Handle new format of
	authors-aliases list.
	(authors-scan-change-log): Rename FILE arg to LOG-FILE.
	Change doc string to describe new entry format.
	Only add author entries for valid file names.
	(authors-print): Replace by authors-add-to-author-list.
	(authors-add-to-author-list): New function which reorders
	per-file entries and adds them to global authors-author-list.
	(authors): Instead of authors-print to insert in *Authors* buffer,
	use authors-add-to-author-list to reorder the list and then
	insert result in *Authors* buffer with new format.
	Generate *Authors Errors* compilation-mode buffer listing
	unrecognized ChangeLog entries.

2003-01-28  Benjamin Riefenstahl  <Benjamin.Riefenstahl@epost.de>

	* term/mac-win.el: Add entries in function-key-map for
	[tab], [backspace], [escape].

2003-01-28  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-extract-menu-node-name): Another fix for
	2003-01-24 change.  Also stop search if : is followed by TAB.

2003-01-28  John Paul Wallington  <jpw@gnu.org>

	* ibuf-ext.el (ibuffer-yank-filter-group): Move check for empty
	`ibuffer-filter-group-kill-ring' out of `interactive' declaration.

2003-01-28  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-vars.el, progmodes/cc-mode.el
	(c-require-final-newline): Made this variable an alist to
	specify a value for each language.  The default value causes
	`require-final-newline' to be set to t only in languages where
	the standard requires a final newline.

2003-01-27  Kim F. Storm  <storm@cua.dk>

	* simple.el (kill-new): Improve doc string for yank-handler.
	Signal args-out-of-range error if yank-handler is specified for
	an empty string.

	* subr.el (insert-for-yank): Remove COMMAND element from yank handler.

2003-01-27  Dave Love  <fx@gnu.org>

	* dired-x.el (dired-filename-at-point): Fix last change and tidy up.

	* thingatpt.el (thing-at-point-file-name-chars):
	Include non-ASCII again and re-write the filename ops.

2003-01-27  David Ponce  <david@dponce.com>

	* makefile.w32-in (update-subdirs-SH): Create lisp/subdirs.el.

2003-01-27  Juanma Barranquero  <lektu@terra.es>

	* filesets.el (filesets-file-open): Fix typo.

	* vcursor.el (vcursor-disable): Likewise.

	* eshell/esh-cmd.el (eshell-separate-commands): Likewise.

	* progmodes/cc-styles.el (c-make-styles-buffer-local): Likewise.

	* progmodes/cc-vars.el (c-offsets-alist): Likewise.

	* progmodes/ebrowse.el (ebrowse-draw-tree-fn): Likewise.

2003-01-26  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-vars.el, progmodes/cc-mode.el
	(c-require-final-newline): Add a variable to make the
	initialization of `require-final-newline' more configurable.

2003-01-26  Jan Djärv  <jan.h.d@swipnet.se>

	* emacs-lisp/authors.el (authors-aliases): Add Jan D.
	Set iso-2022-7bit coding: cookie.

2003-01-26  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-extract-menu-node-name): Fix 2003-01-24 change.
	Don't search for next colon if current colon is followed by
	one of ".", ",", ";", or ")".
	(info-insert-file-contents) [!MSDOS]: Avoid byte-compiler warning.
	(Info-find-node) [!MSDOS]: Avoid byte-compiler warning.

2003-01-26  Richard M. Stallman  <rms@gnu.org>

	* thingatpt.el (thing-at-point-file-name-chars): Undo previous change.

2003-01-25  Bill Wohler  <wohler@newt.com>

	* mh-e: Created directory.  ChangeLog will appear in a week when we
	release version 7.2.

	* mail/mh-alias.el, mail/mh-comp.el, mail/mh-customize.el, mail/mh-e.el,
	mail/mh-funcs.el, mail/mh-identity.el, mail/mh-index.el,
	mail/mh-loaddefs.el, mail/mh-mime.el, mail/mh-pick.el,
	mail/mh-seq.el, mail/mh-speed.el, mail/mh-utils.el,
	mail/mh-xemacs-compat.el: Moved to mh-e directory.
	Note that reply2.pbm and reply2.xpm, which were created by the
	MH-E package, were left in mail since they can probably be used by
	other mail packages.

	* makefile.w32-in (WINS): Add mh-e.

	* makefile.nt (WINS): Add mh-e.

2003-01-25  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file-form-custom-declare-variable):
	Compile any lambda-expressions among the args.

	* view.el (view-mode): Doc fix.

	* ido.el: Many doc fixes.
	(ido-complete): Fix message.

2003-01-25  Taro Kawagishi  <tarok@transpulse.org>

	* arc-mode.el (archive-unixdate): Correct the date field string.
	(archive-lzh-summarize): Extend it to allow the LZH level 2 header
	type (which is most prevalent now), in addition to the already
	supported level 0 and 1 header types.

2003-01-25  Markus Rost  <rost@math.ohio-state.edu>

	* international/mule-cmds.el (set-language-info)
	(current-language-environment): Simplify setting the type of
	current-language-environment.

2003-01-25  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--init-keymaps): Move C-S-x and C-S-c
	bindings from cua--cua-keys-keymap to cua--region-keymap, as they are
	only needed when the region is active.  This also makes the output
	from C-h b look normal when cua-mode is enabled (no C-S-x/c bindings).

2003-01-25  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff.el (ediff-revision): Better defaults.

	* ediff-vers.el (ediff-vc-latest-version): New function.
	(ediff-vc-internal): Use latest version instead of working version.

2003-01-24  Thien-Thi Nguyen  <ttn@gnu.org>

	* info.el (Info-extract-menu-node-name): When looking for end of menu
	item, don't stop at first ":"; instead, continue until trailing
	context is either a space or newline.
	(Info-complete-menu-item): Var `pattern': allow ":" in menu item.
	(Info-menu): Likewise, for regexp used in backwards search.
	(Info-try-follow-nearest-node): Remove case added in previous edit.
	Change regexp in the following case to allow ":" in menu item.
	(Info-fontify-node): Fix bug: Handle `next-property-change' returning
	point-max as "hasn't already been done".

2003-01-24  Thien-Thi Nguyen  <ttn@gnu.org>

	* info.el (Info-try-follow-nearest-node): Add case: Handle menu item
	terminated by ": " as an index entry.

2003-01-24  Juanma Barranquero  <lektu@terra.es>

	* isearch.el (isearch-forward): Fix typo.

2003-01-24  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (decode-coding-inserted-region):
	Rename from decode-coding-region-as-inserted-from-file to make it fit
	well in the Lisp manual.

	* jka-compr.el (jka-compr-insert-file-contents):
	Call decode-coding-inserted-region.

2003-01-24  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (ibuffer-window-list): Remove.
	(ibuffer-confirm-operation-on): Use `window-list' instead.
	(ibuffer-load-hook): New customizable variable.
	(toplevel): Run it.
	(ibuffer-customize): New command.
	(ibuffer-mode-map): Bind it.
	(ibuffer-mode-map): Add menu separator in View>Sort menu.
	(ibuffer-mode): Tidy.
	(ibuffer-fontification-alist, ibuffer-always-show-last-buffer)
	(ibuffer-default-directory, ibuffer-default-sorting-mode)
	(ibuffer-maybe-show-predicates, ibuffer-hook, ibuffer-mode-hook)
	(ibuffer-map-lines): Doc fixes.

	* ibuf-ext.el (ibuffer-copy-filename-as-kill): C-u means relative
	filenames.  Use `kill-new'.

2003-01-23  Dave Love  <fx@gnu.org>

	* abbrev.el (write-abbrev-file): Simplify, and put a coding cookie
	in the file.

2003-01-23  Masatake YAMATO  <jet@gyve.org>

	* progmodes/asm-mode.el (asm-mode): Add syntax table entries for
	/* */ comments.

2003-01-23  Kenichi Handa  <handa@m17n.org>

	* files.el (insert-directory): Read the output of "ls" by
	no-conversion, and decode it later while preserving
	`dired-filename' property.

2003-01-23  Markus Rost  <rost@math.ohio-state.edu>

	* descr-text.el (describe-text-mode-hook): Add a group.

2003-01-23  John Paul Wallington  <jpw@shootybangbang.com>

	* term/mac-win.el (interprogram-paste-function): Handle empty
	clipboard.

2003-01-22  Aubrey Jaffer  <agj@alum.mit.edu>  (tiny change)

	* info.el (Info-index): Change pattern so that index entries with
	colons can be read properly; also, require at least one space
	after the colons, which makeinfo puts in.

2003-01-22  Andreas Schwab  <schwab@suse.de>

	* jka-compr.el (jka-compr-insert-file-contents): Fix typo in last
	change.

2003-01-22  Markus Rost  <rost@math.ohio-state.edu>

	* Makefile.in (bootstrap-after): New target.
	(bootstrap): Move finder-data, custom-deps to bootstrap-after.

2003-01-22  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* info.el (Info-index-next): Use "(`,' tries to find next)" for
	more matches for consistency with standalone info browser.

2003-01-22  Kenichi Handa  <handa@m17n.org>

	* international/mule.el
	(decode-coding-region-as-inserted-from-file): New function.

	* jka-compr.el (jka-compr-insert-file-contents): Read a process
	output without decoding.  Decode the result by
	decode-coding-region-as-inserted-from-file.

2003-01-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-make-file-list, ido-make-dir-list): Don't move
	visited directories to end of list; it's the wrong thing to do if
	we want to find a file or directory in such directories.

	* simple.el: Doc fixes.
	* subr.el: Doc fixes.

2003-01-20  Nick Roberts  <nick@nick.uklinux.net>

	* gud.el (gud-display-line): If the current file is newer than its
	buffer, offer to reread the file.
	(gud-keep-buffer): New buffer local variable.  Ensures offer to
	reread file is made just once.

2003-01-20  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/regexp-opt.el (regexp-opt-group): Undo last change.
	Fix the docstring instead.

2003-01-20  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (calendar-only-one-frame-setup): Autoload it.

2003-01-20  Richard M. Stallman  <rms@gnu.org>

	* simple.el (completion-setup-function): Set default-directory
	in the minibuffer, so it'll be copied into the completion list buffer.

	* emacs-lisp/regexp-opt.el (regexp-opt-group): Compute HALF2 properly.

	* loadup.el (load-path): Rename `path' local var.

	* progmodes/octave-mod.el (octave-mode-map): Change C-c i bindings
	to C-c C-i.  Duplicate its bindings with last char a ctl char.
	Also change C-c f to C-c C-f.

2003-01-20  Markus Rost  <rost@math.ohio-state.edu>

	* ls-lisp.el (ls-lisp-use-insert-directory-program): Make default
	value system dependent.
	(ls-lisp-support-shell-wildcards): Add autoload cookie.

2003-01-19  Kim F. Storm  <storm@cua.dk>

	* msb.el: Use `dir' instead of `path' everywhere.

2003-01-18  Kim F. Storm  <storm@cua.dk>

	* simple.el (kill-new, kill-append, kill-region):
	New optional parameter yank-handler.
	(yank-excluded-properties): Add yank-handler to list.
	(yank-undo-function): New variable.
	(yank): Use it to undo previous yank or yank-pop command.
	Allow insert-for-yank to override this-command.

	* subr.el (insert-for-yank): Arg list changed; now only accepts one
	string rather than any number of strings; no callers needed change.
	Use yank-handler text property on the arg string.
	Set yank-undo-function variable appropriately for yank-pop.

2003-01-18  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-comment-paragraph): Fix simplistic
	regexp-concatenation.

	* add-log.el (add-change-log-entry): Don't leave space at eol.
	(add-log-current-defun): Perl functions names can't have (or {.

	* progmodes/sh-script.el (sh-indent-line): Use indent-line-to.
	(sh-non-closing-paren): New const.
	(sh-case, sh-while-getopts): Use it to make props non-sticky.
	(sh-add-completer): Use test-completion.

2003-01-18  Vasily Korytov  <deskpot@myrealbox.com>  (tiny change)

	* progmodes/cperl-mode.el: Don't make faces depend on window-system.

2003-01-18  Markus Rost  <rost@math.ohio-state.edu>

	* cus-edit.el (customize-changed-options): Undo last doc change.

2003-01-17  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-internal-list, skeleton-internal-1):
	Don't treat \n specially in sub-skeletons.

2003-01-17  Dave Love  <fx@gnu.org>

	* international/ucs-tables.el: Redo 8859-6 change in the right place.

2003-01-17  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el: Don't setup the default fontset and
	font-encoding-alist at the top level.
	(setup-default-fontset): New function.
	(create-fontset-from-fontset-spec): Delete autoload cookie.

	* term/x-win.el: Require fontset unconditionally again.
	Call setup-default-fontset at the top level.

	* term/w32-win.el: Call setup-default-fontset.

	* term/mac-win.el: Require fontset and call setup-default-fontset.

2003-01-16  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-region-as-paragraph): Only erase `hard'
	property until end-of-paragraph.

2003-01-16  Kenichi Handa  <handa@m17n.org>

	* international/ucs-tables.el: Undo the last change.

2003-01-15  Dave Love  <fx@gnu.org>

	* thingatpt.el (thing-at-point-file-name-chars): Include non-ASCII
	and use documented treatment of -.

	* dired-x.el (dired-filename-at-point): Fix filename-chars.

	* international/ucs-tables.el: Set up tables for 8859-6.

	* server.el (server-window): Customize.
	(server-mode): New.
	(server-unload-hook): Call server-start.

2003-01-15  John Wiegley  <johnw@gnu.org>

	* eshell/em-hist.el (eshell-save-history-on-exit):
	Rename `eshell-ask-to-save-history' to `eshell-save-history-on-exit',
	because the former name is somewhat unrelated to the variables'
	possible values.

2003-01-15  Deepak Goel  <deego@gnufans.org>

	* calc/README: Add new maintainer.

	* calc/*: Ditto.

	* calc/calc.el (calc-bug-address): Change address to deego@gnufans.org.

2003-01-15  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (loaddefs.el): Invoke make to build stub file
	using appropriate rule for build environment.
	(loaddefs.el-SH, loaddefs.el-CMD): New targets.  Include small set
	of autoloads and defvars, sufficient to dump bootstrap emacs.
	(update-subdirs-SH): Use hard-coded list of top-level lisp
	subdirs, because find program on Windows is not compatible with
	Unix find.
	(compile-CMD, compile-SH): Use `batch-byte-compile-if-not-done'.
	Explicitly load loaddefs.el so that bootstrap emacs can compile
	properly.
	(bootstrap-clean): Add dependency on loaddefs.el, to ensure
	minimal stub sufficient for dumping bootstrap emacs is available.

	* loadup.el: Include lisp/textmodes in load-path for bootstrap
	emacs, to resolve ispell menu reference.

2003-01-15  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>  (tiny change)

	* international/mule.el (optimize-char-coding-system-table):
	Optimize it.

	* term/mac-win.el: Setup the fontset "fontset-mac" correctly.

2003-01-14  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-info.el (cvs-fileinfo-from-entries): Deal with Solaris'
	occasional use of "05" rather than " 5" for day-of-month.

	* log-view.el (log-view-message-re): The rev might be locked.

2003-01-14  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el: Improve commentary.
	(gdb-window-height, gdb-window-width, gdb-display-number-end):
	Customize the dimensions of frames for displayed expressions.
	(gdb-error-begin): Comment out because it is not used because of
	bug/quirk in annotations.
	(gdb-reset): Use with-current-buffer.

2003-01-14  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-internal, ido-file-internal)
	(ido-copy-current-file-name, ido-wide-find-dirs-or-files):
	Don't use `path' as name of local variables holding a file name.

	* arc-mode.el (archive-arc-rename-entry): Fix error message.
	(archive-lzh-summarize): Rename local var `path' to `dir'.
	(archive-unique-fname) [!MSDOS]: Avoid byte-compiler warning.

	* dired.el: Doc fixes.
	* dired-aux.el: Rename `whole-path' to `whole-name' throughout.
	(dired-mark-read-regexp): Use "Abs." prefix instead of "Path".
	* dired-x.el: Doc fixes.

	* fast-lock.el (fast-lock-cache-name): Doc fix.

	* net/browse-url.el (browse-url-filename-alist): Doc fix.

2003-01-14  John Paul Wallington  <jpw@shootybangbang.com>

	* apropos.el (apropos): Restore autoload cookie.  Fix typo in
	"error retrieving function documentation" output.

2003-01-14  Kim F. Storm  <storm@cua.dk>

	* subr.el (process-put, process-get): New functions.

	* simple.el (clone-process): Copy process' plist to new process.

2003-01-13  Markus Rost  <rost@math.ohio-state.edu>

	* cus-dep.el (custom-make-dependencies): Don't set standard-value
	and version numbers for variables.  Handle faces.

	* cus-edit.el (customize-changed-options): Doc addition.  Load the
	version deps earlier.  Use other tests for groups and variables.
	Handle faces.

2003-01-14  Kim F. Storm  <storm@cua.dk>

	* ido.el: Doc fixes.
	(ido-max-file-prompt-width): Rename from ido-max-prompt-path.
	(ido-rewrite-file-prompt-functions): Rename from
	ido-make-file-prompt-hook.  Directory name is now in dynamic
	variable `dirname' (instead of `path').
	(ido-rewrite-file-prompt-rules): Rename from
	ido-rewrite-prompt-path-rules.
	(ido-make-prompt): Directory name now in `dirname' var.
	(ido-complete): Fix error message.

2003-01-13  John Paul Wallington  <jpw@shootybangbang.com>

	* server.el (server-process-filter): Use `minibufferp' to test
	whether we are inside a minibuffer.
	(server-process, server-kill-new-buffers): Doc fixes.

2003-01-13  Dave Love  <fx@gnu.org>

	* international/utf-16.el (mule-utf-16-be, mule-utf-16-le):
	Remove pre-write-conversion.

2003-01-13  Kim F. Storm  <storm@cua.dk>

	* hexl.el (hexl-mode-map): Don't quote remapped command names.

2003-01-13  David Ponce  <david@dponce.com>

	* ruler-mode.el (ruler-mode): Cleanup buffer local variable
	`header-line-format' if it didn't exist when `ruler-mode' was enabled.

2003-01-13  Masatake YAMATO  <jet@gyve.org>

	* ruler-mode.el (ruler-mode-comment-column-char)
	(ruler-mode-goal-column-char, ruler-mode-set-goal-column-ding-flag)
	(ruler-mode-mouse-current-grab-object): New variables.
	(ruler-mode-comment-column-face, ruler-mode-goal-column-face):
	New faces.
	(ruler-mode-mouse-set-fill-column): Remove.
	(ruler-mode-mouse-grab-any-column)
	(ruler-mode-mouse-drag-any-column-iteration)
	(ruler-mode-mouse-drag-any-column): New functions.
	(ruler-mode-map) [header-line down-mouse-2]: Bound to
	`ruler-mode-mouse-grab-any-column' instead of
	`ruler-mode-mouse-set-fill-column'.
	(ruler-mode-ruler-help-echo): Update its value.
	(ruler-mode-ruler-help-echo-when-goal-column): New help string used
	when goal-column is already set.
	(ruler-mode-ruler-help-echo-tab): Rename to...
	(ruler-mode-ruler-help-echo-when-tab-stops): New.
	(ruler-mode-fill-column-help-echo, ruler-mode-comment-column-help-echo)
	(ruler-mode-goal-column-help-echo): New help strings.
	(ruler-mode-ruler): Use `ruler-mode-ruler-help-echo-when-goal-column'
	instead of `ruler-mode-ruler-help-echo' if `goal-column' is set.
	Show `comment-column' and `goal-column'.  Echo the different help
	string for each *-column characters on the ruler.

2003-01-13  Richard M. Stallman  <rms@gnu.org>

	* apropos.el (apropos-documentation-property): New function.
	(apropos): Use apropos-documentation-property.

	* files.el (mode-line-process): Mark as risky.

	* help.el (where-is): Catch errors in indirect-function.

	* server.el (server-process-filter): Comment out -eval.
	Don't switch buffers if inside isearch or minibuffer.

	* progmodes/compile.el (compilation-revert-buffer):
	If buffer has a file, revert it in the normal way.

	* term/x-win.el: Require fontset conditionally again.

2003-01-13  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-enable-tramp-completion): New defcustom.
	(ido-enter-single-matching-directory): Change default to 'slash.
	(ido-is-tramp-root): New defun.
	(ido-is-root-directory, ido-is-ftp-directory, ido-is-slow-ftp-host)
	(ido-may-cache-directory, ido-final-slash, ido-read-internal)
	(ido-complete, ido-make-file-list1, ido-make-dir-list1):
	Handle tramp completion.
	(ido-file-name-all-completions1): New defun for tramp completion.
	(ido-file-name-all-completions): Use it.
	(ido-set-matches1): Relax matching of text with trailing slash.
	(ido-exhibit): Handle tramp completion.
	Simplified code using nested cond forms using new `refresh' var.
	Fixed handling of /~user/ paths.

2003-01-12  Andreas Schwab  <schwab@suse.de>

	* arc-mode.el (archive-mode-map): Use command remapping instead of
	substitute-key-definition.
	* emerge.el (emerge-setup-fixed-keymaps): Likewise.
	* msb.el (msb-mode-map): Likewise.
	* forms.el (forms--change-commands): Likewise.
	* hexl.el (hexl-mode-map): Likewise.
	* mail/mailabbrev.el (Commentary): Likewise.
	* play/decipher.el (decipher-mode-map): Likewise.
	* play/gomoku.el (gomoku-mode-map): Likewise.
	* play/landmark.el (lm-mode-map): Likewise.
	* play/solitaire.el (solitaire-mode-map): Likewise.
	* progmodes/sh-script.el (sh-mode-map): Likewise.
	* textmodes/picture.el (picture-substitute): Likewise.

	* ielm.el (inferior-emacs-lisp-mode):
	Bind comint-dynamic-complete-functions locally.

	* buff-menu.el (Buffer-menu-select): Fix for effect of header line.

2003-01-11  Andreas Schwab  <schwab@suse.de>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-2): Add flag to
	merge with existing fontification.

2003-01-11  Nick Roberts  <nick@nick.uklinux.net>

	* gud.el (gud-kill-buffer-hook): Save gud-minor-mode type.
	(gud-reset): New function.  Reset environment at end of debugging.
	(gud-sentinel): Call gud-reset or gdb-reset.
	(gud-menu-map, gud-tool-bar-map, gdb): Change gud-goto to gud-until.

	* gdb-ui.el (gud-display): Use GDB command ptype instead of whatis
	to find out if variable should be dereferenced.
	(gud-display1): Exit if there is `No symbol'.
	(gdb-expressions-mode-map): Correction to key-binding.
	(gdb-reset): New function.  Reset environment at end of debugging.
	(gdb-quit): Remove.

2003-01-10  Dave Love  <fx@gnu.org>

	* international/code-pages.el (cp-make-coding-system): Fix last change.

2003-01-10  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* dired.el (dired-garbage-files-regexp): Use \\' instead of $ and
	use regexp-opt for readability.

2003-01-10  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-parse-tag, xml-parse-attlist, xml-skip-dtd)
	(xml-parse-dtd, xml-parse-elem-type): Be more flexible in recognizing
	empty elements.

2003-01-10  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* progmodes/sh-script.el (sh-set-shell): Make sh-shell-file the default
	shell.

2003-01-09  John Wiegley  <johnw@gnu.org>

	* pcomplete.el (pcomplete-termination-string): Add a variable
	for modifying the string which is inserted after a completion or
	expansion using pcomplete.

2003-01-09  Karl Berry  <karl@gnu.org>

	* sort.el (sort-regexp-fields): Pass noerror to re-search-forward,
	so that we don't fail if no records match record-regexp.

2003-01-09  Markus Rost  <rost@math.ohio-state.edu>

	* cus-edit.el (customize-group, customize-group-other-window):
	Remove unnecessary calls to custom-load-symbol.
	(custom-group-value-create):
	Load widget deps if state is not hidden.  If widget deps are
	loaded, load them in advance.
	(custom-menu-create): If widget deps are loaded, load them earlier.

2003-01-09  John Paul Wallington  <jpw@shootybangbang.com>

	* language/ethio-util.el (ethio-gemination)
	(exit-ethiopic-environment): Doc fixes.

	* language/viet-util.el (viet-encode-viqr-region)
	(viet-decode-viqr-region, viet-encode-viqr-buffer)
	(viet-decode-viqr-buffer): Doc fixes.

2003-01-09  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* paths.el: Remove gnus-startup-file.

2003-01-08  Bill Wohler  <wohler@newt.com>

	* mail/mh-alias.el, mail/mh-customize.el, mail/mh-identity.el,
	mail/mh-loaddefs.el, toolbar/alias.pbm, toolbar/alias.xpm: Added.

	* mail/mh-comp.el, mail/mh-e.el, mail/mh-funcs.el,
	mail/mh-index.el, mail/mh-mime.el, mail/mh-pick.el,
	mail/mh-seq.el, mail/mh-speed.el, mail/mh-utils.el,
	mail/mh-xemacs-compat.el: Upgraded to MH-E version 7.1.

2003-01-08  Kim F. Storm  <storm@cua.dk>

	* mail/undigest.el (unforward-rmail-message): Don't use global
	variable `n'.

2003-01-08  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (unforward-rmail-message): Simplified.
	No functional change.

2003-01-07  Markus Rost  <rost@math.ohio-state.edu>

	* custom.el (custom-autoload, custom-variable-p): New functions.

	* emacs-lisp/autoload.el (make-autoload):
	Generate custom-autoload for autoloaded defcustoms.

	* help-fns.el (describe-variable): Use custom-variable-p.

	* simple.el (set-variable): Load deps of custom variables without type.

	* cus-edit.el (custom-variable-prompt): Doc change.
	Use custom-variable-p.
	(customize-option): Remove search in loaddefs.el.
	(customize-apropos): Use custom-variable-p.
	(custom-save-variables): Use custom-variable-p to detect
	non-rogue variables.

2003-01-07  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (unforward-rmail-message): Skip all newlines
	after the initial separator.
	(unforward-rmail-message): Forwarded-From: and Forwarded-Date:
	instead of Forwarded-from: and Forwarded-date:.

2003-01-07  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* dired.el (dired-garbage-files-regexp): Add `.aux$'.  These are
	produced by TeX.

2003-01-07  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-checkout): Fix the check whether we are on a
	branch.

2003-01-06  Dave Love  <fx@gnu.org>

	* textmodes/ispell.el (lookup-words): Cope with null lookup-dict.

	* language/chinese.el ("Chinese-EUC-TW"): New.

2003-01-06  John Paul Wallington  <jpw@shootybangbang.com>

	* mail/rmail.el (rmail-mmdf-delim1, rmail-mmdf-delim2): Doc fixes.

2003-01-05  Richard M. Stallman  <rms@gnu.org>

	* obsolete/uncompress.el: Display message that this pkg is obsolete.

	* isearch.el (isearch-repeat): Error if try to repeat search and
	there was no previous search.

	* dired.el (dired-recursive-deletes): Fix custom type.

	* dabbrev.el (dabbrev--substitute-expansion):
	Convert all whitespace to single spaces,
	except when it's carried over from the existing text.

	* simple.el (split-line): Clean up implementation.

	* mail/rmail.el (rmail-font-lock-keywords): Discard code to match
	both cases.
	(rmail-variables): Specify case-insensitive matching for font-lock.

2003-01-05  Alexander Pohoyda  <alexander.pohoyda@gmx.net>  (tiny change)

	* mail/sendmail.el (mail-font-lock-keywords):
	* mail/rmail.el (rmail-font-lock-keywords): Match multiline
	In-Reply-To and X-*.

2003-01-05  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-substitute-special): Check for &amp last.

2003-01-05  Dave Love  <fx@gnu.org>

	* buff-menu.el (Buffer-menu-execute): Fix for effect of header line.

2003-01-05  Dave Love  <fx@gnu.org>

	* international/mule-diag.el (non-iso-charset-alist):
	Add vietnamese-tcvn.

	* international/mule-cmds.el (locale-language-names):
	Use Croatian, Swedish.

2003-01-05  Andreas Schwab  <schwab@suse.de>

	* buff-menu.el (Buffer-menu-buffer+size): Don't clobber buffer name.

2003-01-05  Dave Love  <fx@gnu.org>

	* language/european.el ("Latin-6", "Croatian"): New.
	("Latin-7"): Fix nonascii-translation.  Add input method.
	("Lithuanian", "Latvian"): Add nonascii-translation.
	("German", "Spanish", "Dutch", "Welsh", "Swedish"):
	Fix nonascii-translation.

	* language/georgian.el ("Georgian"): Fix nonascii-translation.

	* international/mule-cmds.el (set-locale-environment):
	Ignore empty values of environment variables.

	* emacs-lisp/byte-opt.el (byte-optimize-nth)
	(byte-optimize-nthcdr): Fix for case of wrong-length forms.

2003-01-04  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el: Acknowledge Tom Lord as author of gdba.el.
	Use let construction to bind buffer-read-only to nil.
	(gdba): 'set height 0' in GDB.
	(gdb-display-end, gdb-frame-handler): Corrections to forming
	full expression name for header-line in display frame.
	(gdb-info-breakpoints-custom): Highlight breakpoints since
	they may be clicked on with mouse-2.
	(gdb-quit): Delete frames of displayed expressions when quitting.
	(gdb-delete-frames): New function.
	(gdb-source-info): Don't create stack buffer automatically.

2003-01-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* xml.el (xml-substitute-special): Move "&amp;" -> "&" last.

2003-01-04  Kim F. Storm  <storm@cua.dk>

	* simple.el (split-line): If present, copy fill-prefix from
	current line to new line.  Don't copy if prefix arg.
	From Lisp, arg may be an alternative prefix string to copy.
	Inspired by Ehud Karni <ehud@unix.mvs.co.il>.

	* mail/sendmail.el (mail-split-line): New function.
	(mail-mode-map): Remap split-line to mail-split-line.

2003-01-03  Dave Love  <fx@gnu.org>

	* emacs-lisp/find-func.el (find-variable-noselect): Make it work
	with new load-history format.

	* international/mule-cmds.el (sort-coding-systems):
	Adjust priority of utf-16 and x-ctext.

	* international/utf-8.el (utf-translate-cjk):
	Call optimize-char-coding-system-table.

	* international/ucs-tables.el (ucs-unify-8859, ucs-fragment-8859):
	Call optimize-char-coding-system-table.

	* international/mule.el (register-char-codings): Don't call
	optimize-char-coding-system-table here.
	(keyboard-coding-system): Doc fix.  Update :version.

	* textmodes/nroff-mode.el (nroff-mode-hook): Customize.
	(nroff-imenu-expression): New.
	(nroff-mode): Use it.

	* autoinsert.el (auto-insert-alist): Add man page skeleton.

2003-01-03  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-revert): Unlock only if the user does have
	the lock.

2003-01-03  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler):
	Corrected handling of delete-selection properties.

2003-01-03  John Paul Wallington  <jpw@shootybangbang.com>

	* emacs-lisp/eldoc.el (eldoc-get-var-docstring): Only return a
	documentation string when `sym' is non-nil.

2003-01-02  Steven Tamm  <steventamm@mac.com>

	* scroll-bar.el (toggle-scroll-bar, scroll-bar-mode):
	Have scroll bars correctly default to being on the right for Mac
	Carbon port by testing "mac-carbon" feature, not window-system.

2003-01-02  Markus Rost  <rost@math.ohio-state.edu>

	* cus-edit.el (customize-group, customize-group-other-window):
	Call custom-load-symbol unconditionally.
	(customize-face, customize-face-other-window): Fix format arg.

2003-01-02  John Paul Wallington  <jpw@shootybangbang.com>

	* menu-bar.el (menu-bar-left-scroll-bar): Set `scroll-bar-mode'
	to `left'.

2003-01-01  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-reply): Don't call mail-strip-quoted-names.

	* files.el (backup-buffer): Cope if file-modes returns nil.

2002-12-30  Steven Tamm  <steventamm@mac.com>

	* scroll-bar.el (toggle-scroll-bar, scroll-bar-mode):
	Have scroll bars correctly default to being on the right for Mac
	Carbon port

2002-12-29  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-delete-display): Rename (gdb-delete-expression).
	(gdb-goto-bp-this-line): Rename (gdb-goto-breakpoint).
	(gdb-toggle-bp-this-line): Rename (gdb-toggle-breakpoint).
	(gdb-delete-bp-this-line): Rename (gdb-delete-breakpoint).
	(gdb-toggle-disp-this-line): Rename (gdb-toggle-display).
	(gdb-delete-disp-this-line): Rename (gdb-delete-display).
	(gud-gdba-marker-filter): Remove unnecessary save-match-data.
	(gdb-mouse-goto-breakpoint, gdb-frames-select): New functions.
	(gdb-frames-mouse-select): Simplify.
	Make keybindings (gdb-goto-breakpoint, gdb-frames-select, etc)
	consistent with other modes in Emacs.
	(gdb-display-source-buffer): Return window of source buffer
	for (gud-display-line).

2002-12-29  Markus Rost  <rost@math.ohio-state.edu>

	* button.el (defface button): Add group.

	* cus-edit.el (customize-browse): Call `widget-setup'.

2002-12-29  Andreas Schwab  <schwab@suse.de>

	* Makefile.in: Generate cus-load.el and finder-inf.el in the
	source directory.  Change dependencies on lisp files to explicitly
	use $(lisp).
	(compile-calc): Fix command substitution.
	* cus-dep.el (generated-custom-dependencies-file): New variable.
	(custom-make-dependencies): Use it instead of hardcoding cus-load.el.
	* finder.el (generated-finder-keywords-file): New variable.
	(finder-compile-keywords): Use it instead of hardcoding finder-inf.el.

2002-12-28  Richard M. Stallman  <rms@gnu.org>

	* info-look.el (info-lookup): Fix error message typo.

	* comint.el (comint-mode): Locally set scroll-conservatively.
	(comint-postoutput-scroll-to-bottom): comint-scroll-show-maximum-output
	is active only when point is at end.

	* dired.el (dired-goto-file): Handle \ and ^M quoted by backslash.
	Fix error message.

	* files.el (find-file-noselect-1): Kill local value of `cursor-type'.

	* simple.el (repeat-complex-command): Signal real error on failure.

2002-12-28  Andreas Schwab  <schwab@suse.de>

	* progmodes/make-mode.el (makefile-font-lock-keywords):
	Highlight automatic variable references enclosed in parens and
	optionally suffixed by F or D.

2002-12-27  Miles Bader  <miles@gnu.org>

	* info.el (Info-complete-menu-item): Make `Info-complete-cache' a
	buffer-local variable.

2002-12-26  Markus Rost  <rost@math.ohio-state.edu>

	* cus-edit.el (customize-group-other-window): Use pop-to-buffer in
	the same way as `custom-buffer-create-other-window'.
	(customize-variable-other-window, customize-option-other-window):
	Definitions moved up.

2002-12-26  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* net/tramp*.el: Sync with upstream version 2.0.28.  Bugfixes.
	* net/tramp-ftp.el: Glue code with Ange-FTP, broken out of
	tramp.el.  From Michael Albinus.
	* net/tramp-smb.el: New file for using smbclient to access
	Windows shares with Tramp.  From Michael Albinus.

2002-12-26  Andreas Schwab  <schwab@suse.de>

	* international/mule-cmds.el (select-safe-coding-system): Fix typo.

2002-12-26  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Use t argument to vc-checkout in
	order to get the latest version on the current branch.
	Update documentation of vc-BACKEND-checkout to explain this.

	* vc-rcs.el (vc-rcs-checkout): Handle t argument for REV.
	(vc-rcs-checkin): By default, specify the current workfile
	branch as the check-in revision.

	* vc-cvs.el (vc-cvs-checkout): Handle t argument for REV.

	* vc-sccs.el (vc-sccs-checkout): Likewise.

2002-12-26  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-info-display-custom): Ensure that frames/buffers
	of displayed expressions are deleted when the displayed expressions
	are deleted.
	(gdb-delete-disp-this-line, gdb-delete-display): Frame/buffer
	deletion is handled by gdb-info-display-custom now.
	(gdb-source-info): Undo earlier change (do create display buffer
	automatically).

2002-12-25  Markus Rost  <rost@math.ohio-state.edu>

	* cus-edit.el (custom-save-faces): Fix typo.

2002-12-23  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (unforward-rmail-message): Do not assume that
	the forwarded message's Date: header comes after From:.  Use a
	Forwarded-from: rather than a Forwarded-by: header.  Add a
	Forwarded-date: header.

2002-12-23  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-display-number-end): Make auto-display of
	expressions in GDB work on text-only terminals.
	(gdb-post-prompt): Compute current frame properly.
	(gdb-get-current-frame, gdb-frame-handler): New functions.
	(gdb-source-info): Move last statement into if clause.
	Tidy, improve documentation.

2002-12-23  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/checkdoc.el: Don't define a name for the minor mode menu.

	* emacs-lisp/easymenu.el (easy-menu-do-define): Handle nil for SYMBOL.
	(easy-menu-define): Doc fix, say SYMBOL can be nil.

	* window.el (save-selected-window): Save and restore
	selected windows of all frames.

	* cus-start.el (scroll-up-aggressively, scroll-down-aggressively):
	Update custom types.

2002-12-23  Alex Schroeder  <alex@emacswiki.org>

	Merging Dave Love <fx@gnu.org>'s custom_themes branch containing
	Alex Schroeder's adaptation of Jan Vroonhof
	<vroonhof@math.ethz.ch>'s code.  Doc strings corrected by RMS.

	* cus-edit.el (customize-save-variable): Take themes into account.
	(custom-variable-save): Take themes into account.
	(custom-variable-reset-saved): Add comment-widget.
	(custom-variable-reset-standard): Add comment-widget.
	(custom-variable-reset-standard): Take themes into account.
	(custom-face-save): Take themes into account.
	(custom-face-reset-standard): Take themes into account.
	(custom-save-variables): Take themes into account.
	(custom-save-faces): Take themes into account.
	(custom-save-resets): New function.
	(custom-save-loaded-themes): New function.
	(customize-save-customized): Take themes into account.

	* cus-face.el (custom-set-faces): Call custom-theme-set-faces.
	(custom-theme-set-faces): New function.
	(custom-theme-face-value): New function.
	(custom-theme-reset-internal-face): New function.
	(custom-theme-reset-faces): New function.
	(custom-reset-faces): New function.

	* custom.el (custom-known-themes): New variable.
	(custom-declare-theme): New function.
	(deftheme): New macro.
	(custom-make-theme-feature): New function.
	(custom-theme-p): New function.
	(custom-check-theme): New function.
	(custom-push-theme): New function.
	(custom-theme-set-variables): Take themes into account.
	(custom-loaded-themes): New variable.
	(custom-theme-loaded-p): New function.
	(provide-theme): New function.
	(require-theme): New function.
	(custom-remove-theme): New function.
	(custom-do-theme-reset): New function.
	(custom-theme-load-themes): New function.
	(custom-load-themes): New function.
	(custom-theme-value): New function.
	(custom-theme-variable-value): New function.
	(custom-theme-reset-internal): New function.
	(custom-theme-reset-variables): New function.
	(custom-reset-variables): New function.

	* cus-theme.el: New file.

2002-12-23  Matthew Swift  <swift@alum.mit.edu>

	* emacs-lisp/rx.el (rx-and): Generate a shy group.
	Specify `no-group' when calling rx-to-string.
	(rx-submatch): Specify `no-group' when calling rx-to-string.
	(rx-kleene): Use rx-atomic-p to decide whether to make a group.
	(rx-atomic-p): New function.

2002-12-23  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (info-lookup): For ease of use try item
	case-insensitive if not found case-sensitive.
	Do case sensitive search in index nodes, so items differing only in
	case go correctly to their respective nodes.

2002-12-22  Richard M. Stallman  <rms@gnu.org>

	* subr.el (add-to-invisibility-spec): If it was t, start it out at (t).

	* textmodes/texinfmt.el (tex-start-of-header, tex-end-of-header):
	Add defvars.

	* textmodes/tex-mode.el (tex-print): Call shell-quote-argument
	on the file name.

	* textmodes/outline.el (outline-next-visible-heading):
	When going forward, test outline-invisible-p at start of header.

2002-12-22  Kevin Ryde  <user42@zip.com.au>

	* textmodes/makeinfo.el (makeinfo-buffer): Display result using
	Info-mode.
	(makeinfo-compilation-sentinel-buffer, makeinfo-current-node):
	New functions.
	(makeinfo-compile): Add a sentinel parameter.
	(makeinfo-compilation-sentinel-region): Renamed from
	makeinfo-compilation-sentinel, and makeinfo-temp-file now never nil.
	(makeinfo-region): Use this.
	* info.el (Info-revert-find-node): New function.

2002-12-22  Nick Roberts  <nick@nick.uklinux.net>

	* tooltip.el (tooltip-gud-tips): Output tooltip without switching
	process filter (gdba in gdb-ui.el only).
	(gdb-tooltip-print): New function.
	(tooltip-gud-process-output): Undo previous change.
	(tooltip-strip-annotations): Remove.

2002-12-22  Zoltan Kemenczy  <zoltan@ieee.org>

	* gud.el (gud-menu-map): Add jdb support for "run".
	(gud-jdb-find-source-using-classpath): Use 'identity.
	(gud-jdb-marker-filter): Marker regexp and filename filtering
	change to support a backwards-incompatible change in Sun's jdb
	line number display in SDK versions 1.4.
	(gud-format-command): gud-find-class now requires two
	parameters (file and linenumber).
	(gud-find-class): Bulk of the change related to using c-syntactic
	symbols to locate nested class declarations in java sources
	visited by java-mode (cc-mode).

2002-12-21  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el: Remove the concept of an instance.  This means that
	a lot of functions have been renamed.  Accessors are prefixed with
	gdb-get, setters with gdb-set and the word instance has been
	removed from many function and variable names.
	(gdb-display-buffer): Protect source buffer as well
	as GUD buffer when requesting new buffers.
	(gdb-source-info): Two changes : Don't create display buffer
	automatically, compute source window correctly.

2002-12-21  Richard M. Stallman  <rms@gnu.org>

	* man.el (Man-getpage-in-background): Put GROFF_NO_SGR in env.

	* ls-lisp.el (original-insert-directory): Make this a variable,
	don't set its function definition.
	(insert-directory): Use funcall to call that function.

	* bindings.el (help-echo): Change tooltip string.

	* chistory.el (command-history-map): Move definition up.

	* faces.el (help-xref-stack): Add defvar to avoid warning.

2002-12-21  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-insert-directory): Preserve text properties
	when quoting.

2002-12-20  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (rmail-mail-separator): Renamed from
	rmail-digest-mail-separator.  All users changed.
	(unforward-rmail-message): Rewritten to be more robust and to
	additionally account for the common style of forwarding messages
	by citing them entirely with headers.

2002-12-18  Dave Love  <fx@gnu.org>

	* international/utf-8-subst.el: Deleted.

	* international/ucs-tables.el (ucs-fragment-8859): Don't modify
	char-coding-system-table elements destructively.
	Use optimize-char-coding-system-table.

	* international/mule.el (optimize-char-coding-system-table): New.
	(register-char-codings): Use it.

	* international/utf-8.el (ucs-mule-cjk-to-unicode)
	(ucs-unicode-to-mule-cjk): Revert last change.
	(utf-subst-table-for-encode): Initially use ucs-mule-cjk-to-unicode.
	(utf-subst-table-for-decode): Initially use ucs-unicode-to-mule-cjk.
	(utf-fragment-on-decoding, utf-translate-cjk): Don't modify
	char-coding-system-table elements destructively.
	(utf-translate-cjk): Set ucs-mule-cjk-to-unicode,
	ucs-unicode-to-mule-cjk to new hash tables with realistic parameters.

2002-12-18  John Paul Wallington  <jpw@shootybangbang.com>

	* info.el (Info-dir-remove-duplicates): Avoid infloop when
	deleting last entry.

2002-12-17  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdba-marker-filter, gdb-output-burst): Merge and
	rename gud-gdba-marker-filter.
	(gdb-append-to-inferior-io): Only pop up IO buffer if there is output.
	(gdb-make-instance): Remove (put into gdba).
	Use gdb-instance-enqueue-input instead of
	gdb-instance-enqueue-idle-input for user functions.
	(gdb-instance-target-string): Simplify.
	(in-gdb-instance-context): Remove.
	Expand Commentary.

2002-12-17  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (set-file-name-coding-system): New function.

	* international/mule-cmds.el (mule-keymap, set-coding-system-map):
	Add bindings for set-file-name-coding-system.

2002-12-17  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (universal-coding-system-argument):
	Bind coding-system-require-warning to t.
	(select-safe-coding-system): Handle t in the arg
	DEFAULT-CODING-SYSTEM specially.  Use read-coding-system to read a
	coding-system to allow users to specify unsafe coding system on
	their risk.

2002-12-16  Francesco Potortì  <pot@gnu.org>

	* mail/undigest.el (rmail-digest-methods)
	(rmail-digest-mail-separator): New variables.
	(rmail-digest-parse-mime, rmail-digest-parse-rfc1153strict)
	(rmail-digest-parse-rfc1153sloppy, rmail-digest-rfc1153)
	(rmail-digest-parse-rfc934): New functions.
	(undigestify-rmail-message): Completely rewritten.

2002-12-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-file-name): Remove debug message.

2002-12-16  Daniel Pfeiffer  <occitan@esperanto.org>

	* buff-menu.el (Buffer-menu, Buffer-menu-use-header-line)
	(Buffer-menu-buffer-face, Buffer-menu-buffer+size-width)
	(Buffer-menu-mode-width): New customization.
	(Buffer-menu-sort-column): New var.
	(Buffer-menu-no-header): New function for not changing header line and
	recognizing swapped M&R columns, used by modifying commands in Buffer
	Menu.
	(Buffer-menu-buffer+size): New function for variable width buffer name.
	(list-buffers-noselect): Rewritten for nicer menu.

2002-12-16  Markus Rost  <rost@math.ohio-state.edu>

	* filesets.el (filesets-build-menu-now): Don't clear messages.

	* allout.el: Avoid name conflicts with outline.el.
	Replace globally string "outline-" with string "allout-".
	Replaced 1446 occurrences; there was no string "allout-" before the
	change and there seems to be no dependency on outline.el.
	Put `quotes' around many function and variable names.
	Doc changes to adjust to the change to prefix "allout-".
	Don't provide `outline'.  Use " Allout" as mode line string,
	not " Outl".  Put group `allout' in group `editing'.
	Update Copyright notice.  Autoload `allout-init'.
	(allout-init): Give report also in case auto-activation was inhibited.
	(my-mark-marker): Test for feature `xemacs' instead of a string parse.

2002-12-16  Stefan Monnier  <monnier@cs.yale.edu>

	* xml.el (xml-parse-tag): Allow spaces between / and >.

2002-12-15  David Kastrup  <David.Kastrup@t-online.de>

	* emacs-lisp/autoload.el (autoload-ensure-default-file):
	Insert missing space in file end comment.

2002-12-15  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-via-smtp): Fall back to
	user-mail-address as sender.

2002-12-15  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (standard-keyboard-coding-systems):
	Delete.
	(set-locale-environment): Don't use it.

	* international/utf-8.el (ucs-mule-cjk-to-unicode)
	(utf-subst-table-for-encode, ucs-unicode-to-mule-cjk)
	(utf-subst-table-for-decode): Specify :size, :rehash-size.
	(utf-translate-cjk): :set rewritten to load subst-... files.
	Add :set-after.
	(ccl-decode-mule-utf-8): Consider CJK translation for r3<#x3400.

2002-12-15  Gustav Hållberg  <gustav@virtutech.se>  (tiny change)

	* progmodes/compile.el (compile-reinitialize-errors): Don't mark the
	buffer as modified unless it really is.

2002-12-14  Andreas Schwab  <schwab@suse.de>

	* wid-edit.el (widget-move): Don't loop infinitely when there is
	no field or button.

2002-12-13  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-rationalize-file-buffer-names, rename-buffer)
	(uniquify-delay-rationalize-file-buffer-names, kill-buffer-hook):
	Undo 2002/09/27 change because kill-buffer-hook is not
	permanent-local.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Optimize the remaining part of for-effect and/or expressions.

2002-12-13  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use `custom-current-group'.  Pass all groups to the hook.
	(easy-mmode-define-global-mode): Use `custom-current-group'.

	* international/mule-cmds.el (current-language-environment):
	Set type according to `language-info-alist' also here.

	* progmodes/compile.el (compilation-menu-map):
	Use `kill-compilation' to stop compilation.

2002-12-13  Kenichi Handa  <handa@m17n.org>

	* language/european.el (encode-mac-roman): Fix last change.

	* language/cyrillic.el (ccl-encode-koi8, ccl-encode-koi8-u)
	(ccl-encode-alternativnyj): Fix last change.

2002-12-13  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el: Improve documentation strings.
	(gdb-many-windows): Set default value to nil.

2002-12-12  Dave Love  <fx@gnu.org>

	* international/subst-big5.el, international/subst-gb2312.el:
	* international/subst-jis.el, international/subst-ksc.el: New.

	* custom.el (defcustom, custom-set-variables): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-if): Suppress warnings from
	things protected by `(if (fboundp ...' or `(if (boundp ...'.

	* emacs-lisp/byte-opt.el (byte-optimize-featurep): New.

2002-12-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-mode-abbrev-table):
	Handle `define-abbrev' with either 5 or 6 arguments.

2002-12-12  Markus Rost  <rost@math.ohio-state.edu>

	* international/mule-cmds.el (set-language-info):
	Update custom-type of `current-language-environment'.
	(current-language-environment): Fix custom type.

2002-12-11  Pavel Janík  <Pavel@Janik.cz>

	* progmodes/antlr-mode.el (antlr): New URL.

2002-12-10  R. Bernstein  <rocky@panix.com>

	* gud.el (bashdb): Prompt now included parenthesis for subshell levels.
	Fix erroneous print expression command, and fix typos.
	(perldb): Undo previous change in prompt regexp.

2002-12-10  Steven Tamm  <steventamm@mac.com>

	* generic-x.el (javascript-generic-mode): Added C style block
	comments as used in ECMA-262 standard.

2002-12-10  Kenichi Handa  <handa@m17n.org>

	* language/european.el ("Swedish"): Change tutorial file name to
	TUTORIAL.sv in this language environment.

2002-12-09  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-mode): If `show-paren-mode' is enabled,
	disable it buffer-locally.
	(ibuffer-mouse-popup-menu): Use `=' instead of `eq' to compare
	`eventpt' and point.

	* ibuf-ext.el (ibuffer-remove-duplicates): New function.
	(ibuffer-set-filter-groups-by-mode): Use it instead of
	`delete-duplicates' so we don't require cl library at runtime.
	(ibuffer-insert-filter-group-before): Don't use `position' so we
	don't require cl library at runtime.

	* chistory.el (command-history-mode): Add interactive spec.
	Improve doc string.

2002-12-09  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-no-upper-case-p): \\ only quotes one character.

2002-12-09  Markus Rost  <rost@math.ohio-state.edu>

	* mwheel.el (mouse-wheel-scroll-amount): Revert previous change -
	customize type 'float is now defined.

2002-12-09  Dave Love  <fx@gnu.org>

	* international/code-pages.el (mik, pt154): New coding systems.

	* international/ucs-tables.el: Fix properly.

2002-12-09  Andreas Schwab  <schwab@suse.de>

	* international/ucs-tables.el: Fix last change.

2002-12-09  Kenichi Handa  <handa@m17n.org>

	* international/titdic-cnv.el (titdic-convert): Process the
	header part in multibyte mode.

2002-12-08  Dave Love  <fx@gnu.org>

	* international/code-pages.el (mule-diag): Move where it's required.

	* international/ucs-tables.el: Add latin-jisx0201 characters.
	Fix translation-table-for-input for lao, thai, tibetan.

2002-12-08  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Insert free space only when
	listing a full directory.

2002-12-08  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el : Remove inappropriate key-bindings.
	(gdb-info-breakpoints-custom, gdb-goto-bp-this-line):
	Parse correctly when breakpoint has no line number.
	(def-gdb-auto-update-handler, gdb-info-locals-handler)
	(gdb-display-end): Avoid using insert-buffer.
	(gdb-frames-select-by-mouse): Rename gdb-frames-mouse-select.

2002-12-07  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (compilation-enter-directory-regexp-alist)
	(compilation-leave-directory-regexp-alist): Match byte compiler output.

	* emacs-lisp/cl-macs.el: Add local variable list
	to turn off cl-function warnings.

	* emacs-lisp/bytecomp.el (byte-compile-eval): Handle (t . SYMBOL)
	elements in load-history.
	(byte-compile-cl-warn): No cl warnings for cl-defsubst-expand
	and cl-struct-setf-expander.

	* emacs-lisp/autoload.el (autoload-print-form-outbuf):
	New variable.
	(autoload-print-form): Use autoload-print-form-outbuf.
	(generate-file-autoloads): Bind autoload-print-form-outbuf.

	* calendar/calendar.el (calendar-day-name): Move defn down.

	* speedbar.el (speedbar-directory-buttons-follow):
	Don't use directory-sep-char.

2002-12-06  Masatake YAMATO  <jet@gyve.org>  (tiny change)

	* register.el (describe-register-1): Use window-width
	to truncate string in a register.  Check whether the string
	in a register is an empty string or a sequence of white spaces.

2002-12-07  Andreas Schwab  <schwab@suse.de>

	* faces.el (face-font-selection-order)
	(face-font-family-alternatives, face-font-registry-alternatives):
	Remove period from :tag value.

	* cus-edit.el (custom-face-edit-fix-value): Change :reverse-video
	to :inverse-video.

2002-12-07  Markus Rost  <rost@math.ohio-state.edu>

	* wid-edit.el (define-widget number): Clarify doc and error message.
	(define-widget float): New widget.

2002-12-07  Andreas Schwab  <schwab@suse.de>

	* eshell/em-ls.el (eshell-ls-product-regexp): Fix typo.

	* files.el (find-file-read-args): Reenable wildcard processing
	unconditionally.

2002-12-06  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-format-scan): Handle new
	functions for copyright notice and copying permissions.
	(texinfo-copying, texinfo-insertcopying): New functions.

2002-12-03  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* textmodes/texinfmt.el (texinfo-format-ifxml)
	(texinfo-format-xml): New function.
	(ifxml, ifnotxml): New aliases.

2002-12-06  Dave Love  <fx@gnu.org>

	* international/utf-8-subst.el: Revert last change.

2002-12-06  Miles Bader  <miles@gnu.org>

	* info.el (Info-insert-dir): Make dir-node-cache variables
	buffer-local, so that killing the *info* buffer forces the
	dir-node to be rebuilt.

2002-12-06  Markus Rost  <rost@math.ohio-state.edu>

	* finder.el (finder-compile-keywords): Don't insert a keyword to
	the generated file.

2002-12-05  Andreas Schwab  <schwab@suse.de>

	* speedbar.el (speedbar-highlight-face): Fix face spec.

2002-12-05  Stefan Monnier  <monnier@cs.yale.edu>

	* gdb-ui.el: Replace uses of (gdb-get-instance-buffer 'gdba) and
	gdb-proc with gud-comint-buffer instead.
	(gdb-proc): Remove.
	(def-gdb-var): Simplify.
	(gdb-get-create-instance-buffer): Avoid make-variable-buffer-local.
	Set gud-comint-buffer as well as gud-minor-mode and tool-bar-map.
	(gdb-goto-bp-this-line): Select the window while doing the goto-line.
	(gdb-info-locals-handler): Avoid replace-regexp.

	* calendar/calendar.el (facemenu-unlisted-faces): Only update
	after facemenu is loaded.
	(calendar-font-lock-keywords): Accept non-ASCII month names.
	Use regexp-opt.

	* gdb-ui.el (gud-gdb-complete-string, gud-gdb-complete-break)
	(gud-gdb-complete-list, gud-gdb-complete-in-progress): Remove.
	(gdba): Call `gdb' and then make modifications.
	Always call gdb-clear-inferior-io rather than just "the first time".
	(gud-break, gud-remove): Definitions moved to inside gdba.
	(gdb-target-name): Remove.  Use gud-target-name instead.
	(gdba-complete-filter, gdba-common-init): Remove.
	The changes were integrated into the generic code.

	* gud.el: Use match-string.
	(gud-menu-map): Re-fix gdb-running to gud-running.
	Activate up/down and finish for pdb.
	(gud-def): Use backquotes.
	(gdb, sdb, dbx, xdb, pdb, jdb, bashdb): Remove redundant menu bindings.
	(gud-gdb-complete-in-progress, gud-gdb-complete-string)
	(gud-gdb-complete-break, gud-gdb-complete-list):
	Rename to gud-gdb-fetch-lines-in-progress, gud-gdb-fetch-lines-string,
	gud-gdb-fetch-lines-break and gud-gdb-fetched-lines.
	(gud-gdb-fetch-lines-filter): Rename from gud-gdb-complete-filter.
	Add a `filter' argument and run it on `string'.
	(gud-gdb-run-command-fetch-lines): Use it instead of
	gud-gdb-speedbar-stack-filter.  Add a `skip' arg.
	Return the fetched lines.
	(gud-gdb-complete-command): Use it instead of cooking up
	something by hand using gud-gdb-complete-filter.
	(gud-gdb-get-stackframe): Use the new calling convention of
	gud-gdb-run-command-fetch-lines.
	(gud-gdb-fetched-stack-frame-list): Remove.
	(gud-gdb-speedbar-stack-filter): Remove.
	(gud-jdb-marker-filter): Change RE for easier extraction of submatches.
	(gud-bashdb-command-name): Add "--debugger" argument here.
	(bashdb): Use default gud-find-file and don't bother with
	a massage-args function now that --debugger is make explicit.
	(gud-bashdb-massage-args, gud-bashdb-find-file): Remove.
	(bashdb): Don't provide.
	(gud-target-name): New var.
	(gud-common-init): Set it.
	Also reset gud-running and gud-last-last-frame.

2002-12-05  Dave Love  <fx@gnu.org>

	* international/utf-8-subst.el: Update safe-chars of mule-utf-8,
	mule-utf-16-le, mule-utf-16-be.

2002-12-05  Richard M. Stallman  <rms@gnu.org>

	* textmodes/outline.el (outline-mode): Doc fix.

2002-12-05  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* calendar/solar.el (solar-atn2): Give correct quadrant for arctan.

2002-12-05  Kenichi Handa  <handa@m17n.org>

	* international/titdic-cnv.el (quail-misc-package-ext-info):
	Remove duplicate entry for chinese-b5-quick.
	(batch-miscdic-convert): Don't try to call miscdic-convert on
	files in the directory just following the arg "-dir".

2002-12-04  Stefan Monnier  <monnier@cs.yale.edu>

	* gdb-ui.el: Fold top-level `setq's and `define-key's into their
	corresponding defvar.
	(gdb-inferior-io-mode-map): New var.
	Add bindings to it rather than to comint-mode-map.
	(gdb-display-number-end): Use dolist.  Remove always-true test.
	(gdb-delete-line): Move and simplify.
	(gdb-display-end): Don't bother going to beg-of-line since we're there.
	(gdb-array-format1): Use dolist.
	(gdb-make-windows-menu, gdb-make-frames-menu):
	Move to top-level code.  Move the menus to within the GUD menu.
	Make the menus only appear in gdba mode.

	* gdb-ui.el (gdb-inferior-io-mode-map): Remove (unused).
	(gdb-inferior-io-mode): Use define-minor-mode.
	(gdb-source-info): Don't burp if there's no source file.
	(gdb-inferior-io-interrupt, gdb-inferior-io-quit)
	(gdb-inferior-io-stop, gdb-inferior-io-eof)
	(gdb-display-breakpoints-buffer, gdb-frame-breakpoints-buffer)
	(gdb-display-stack-buffer, gdb-frame-stack-buffer)
	(gdb-display-registers-buffer, gdb-frame-registers-buffer)
	(gdb-display-locals-buffer, gdb-frame-locals-buffer)
	(gdb-display-display-buffer, gdb-frame-display-buffer)
	(gdb-display-gdb-buffer, gdb-frame-gdb-buffer)
	(gdb-display-assembler-buffer, gdb-frame-assembler-buffer):
	Remove the spurious left over arg from the "big reorg".

2002-12-04  Richard M. Stallman  <rms@gnu.org>

	* gud.el (gud-menu-map): Update for bashdb.
	(perldb): Change prompt regexp.
	(gud-bashdb-history, gud-bashdb-massage-args, gud-bashdb-marker-filter)
	(gud-bashdb-find-file, gud-bashdb-command-name, bashdb): New.

	* progmodes/cc-vars.el: Simply require wid-edit and custom
	in eval-when-compile.

	* progmodes/cc-menus.el: Don't require imenu.

	* progmodes/cc-langs.el: Don't require cl.
	(c-delete-duplicates): New function.  Use instead of delete-duplicates.

	* progmodes/cc-bytecomp.el (cc-bytecomp-obsolete-var):
	Add an else-clause to the if to avoid confused compiler warning.

	* tooltip.el (tooltip-gud-tips-p): Undo previous change.

2002-12-03  Stefan Monnier  <monnier@cs.yale.edu>

	* gdb-ui.el: Get rid of (quote ..); use match-string and ignore.

	* gdb-ui.el (gdba, gdb-starting, gdb-stopped, gdb-quit):
	Update gdb-running -> gud-running.
	(gdba): Use the default for gud-find-file.
	(def-gdb-variable): Remove: fold into def-gdb-var.
	(def-gdb-var): Use buffer-local-value and with-current-buffer.

	* gud.el (gud-running): Rename from gdb-running.  Update uses.
	(gud-tool-bar-map): Use tool-bar-local-item-from-menu rather than
	tool-bar-add-item-from-menu to avoid let binding tool-bar-map
	which fails if tool-bar.el is loaded in the mean time.
	(gud-file-name): New fun.
	(gud-find-file): Use it as default value for gud-find-file.
	(gud-speedbar-buttons): Discriminate on gud-minor-mode rather than
	on gud-find-file.
	(gud-gdb-find-file, gud-dbx-file-name, gud-dbx-find-file)
	(gud-xdb-file-name, gud-xdb-find-file, gud-perldb-find-file)
	(gud-pdb-find-file, gud-jdb-find-file): Remove.
	(gud-query-cmdline): Don't stuff the whole cwd in the command.
	(gdb, dbx, xdb, perldb, pdb, jdb): Use the default for gud-find-file.
	(gud-mipsdbx-massage-args): Remove.
	(gud-dbx-command-name): New var.  Do what gud-mipsdbx-massage-args did.
	(gud-irixdbx-marker-filter): Use match-string and gud-file-name.
	(gud-jdb-command-name): New var.
	(gud-common-init): Re-instate RMS code of 11/13.

2002-12-03  Dave Love  <fx@gnu.org>

	* international/ucs-tables.el (ucs-unify-8859, ucs-unify-8859)
	(ucs-fragment-8859): Don't use set-buffer-major-mode-hook.
	(ucs-set-table-for-input): Use optional arg.  Check for null `cs'.

2002-12-03  Andreas Schwab  <schwab@suse.de>

	* cus-edit.el (custom-display): Add checkbox for type mac.

	* whitespace.el (whitespace-highlight-face): Fix face spec.

2002-12-02  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (completion-setup-function): Fix last change to use
	minibuffer-completing-file-name instead.

	* add-log.el (change-log-mode): Set indent-line-function explicitly
	to what it was before indent-line-function's default was changed.

2002-12-02  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-dict-map): Move specific
	dictionary selection into a submenu.

	* textmodes/fill.el (fill-indent-to-left-margin): New function.
	(fill-newline, fill-region-as-paragraph): Use that.

	* simple.el (completion-setup-function):
	Handle ffap-read-file-or-url-internal specially like
	read-file-name-internal.

2002-12-02  Simon Marshall  <marshals@perth>

	* font-lock.el (c++-font-lock-extra-types): Fix previous change.

2002-12-02  François Pinard  <pinard@iro.umontreal.ca>

	* progmodes/make-mode.el (makefile-font-lock-keywords): Highlight
	more make keywords: defined, endef, override, export, unexport
	and vpath.

2002-12-02  Dave Love  <fx@gnu.org>

	* autoarg.el (autoarg-kp-mode): Give it a :group.

2002-12-02  Noah Friedman  <friedman@splode.com>

	* complete.el (PC-do-completion): Do not add wildcards to pattern
	unless filename is non-nil.

2002-12-02  Andreas Schwab  <schwab@suse.de>

	* mwheel.el (mouse-wheel-scroll-amount): Fix customize type.

	* paren.el (show-paren-mismatch-face): Fix face spec.

2002-11-30  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el (gdb-many-windows): Define as a minor mode.
	(toggle-gdb-windows): Remove.  (Patch from Stefan Monnier)

	* tooltip.el (tooltip-gud-process-output): Handle annotations that
	are output with gdba in gdb-ui.el.
	(tooltip-strip-annotations): New function.

2002-11-29  Dave Love  <fx@gnu.org>

	* autoarg.el (autoarg-mode): Give it a :group.

2002-11-29  Bill Wohler  <wohler@newt.com>

	* mail/mh-comp.el, mail/mh-e.el, mail/mh-funcs.el,
	mail/mh-mime.el, mail/mh-pick.el, mail/mh-seq.el,
	mail/mh-utils.el, mail/mh-xemacs-compat.el: Upgraded to MH-E
	version 7.0.

	* mail/mh-index.el, mail/mh-speed.el: New files for indexed
	searches and speedbar support in MH-E version 7.0.

	* toolbar/reply-all.pbm, toolbar/reply-all.xpm,
	toolbar/reply-from.pbm, toolbar/reply-from.xpm,
	toolbar/reply-to.pbm, toolbar/reply-to.xpm: New toolbar images for
	MH-E version 7.0.

2002-11-29  Markus Rost  <rost@math.ohio-state.edu>

	* mwheel.el (mouse-wheel-inhibit-click-time): Fix custom type.

2002-11-29  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-convert-to-babyl-format):
	Make search for message delimiter case-sensitive.

	* simple.el (yank-window-start): New variable.
	(yank): Record yank-window-start.
	(yank-pop): Use yank-window-start.

	* info.el (Info-additional-directory-list): Doc fix.

	* indent.el (indent-according-to-mode, indent-region): Doc fix.

	* tooltip.el (tooltip-gud-tips-p): Doc fix.

	* eshell/em-script.el: Require eshell.

	* eshell/esh-ext.el, eshell/em-cmpl.el: Require esh-util.

2002-11-29  Kim F. Storm  <storm@cua.dk>

	* mwheel.el: Avoid accidental yanking of text while scrolling with
	the mouse wheel.  This adds a short period after each mouse wheel
	scroll event where a click on the mouse wheel button is ignored.
	(mouse-wheel-click-event, mouse-wheel-inhibit-click-time): New customs.
	(mouse-wheel-click-button, mwheel-inhibit-click-event-timer): New vars.
	(mwheel-inhibit-click-timeout,mwheel-filter-click-events): New defuns.
	(mwheel-scroll): Add mwheel-filter-click-events as pre-command-hook.
	Start mwheel-inhibit-click-event-timer with timeout handler
	mwheel-inhibit-click-timeout.

2002-11-28  Nick Roberts  <nick@nick.uklinux.net>

	* tooltip.el (tooltip-gud-tips-setup): Remove.
	(tooltip-gud-debugger): Remove.
	(tooltip-gud-print-command): Use gud-minor mode instead of
	tooltip-gud-tips-setup and tooltip-gud-debugger.

	* gdb-ui.el (gdb-starting): Set gdb-running to t.
	(gdb-stopped): Set gdb-running to nil.
	(gdb-quit): Reset some variables including tool-bar-map.

	* gud.el (gdb-running): New variable.
	(gud-menu-map): Use gdb-running to gray out toolbar buttons
	with gdba in gdb-ui.el.
	(gud-tool-bar-map): Move to avoid byte compiler warning.

2002-11-27  Jason Rumney  <jasonr@gnu.org>

	* files.el (file-truename): Canonicalize non-existent names on w32.

2002-11-28  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-xemacs): Remove defvar.  All uses changed to
	check (featurep 'xemacs) instead.
	(ido-visit-buffer): Use select-frame-set-input-focus unconditionally.

2002-11-27  Dave Love  <fx@gnu.org>

	* emacs-lisp/cl-macs.el: Move `predicates for analyzing Lisp
	forms' block to top (before uses).
	(help-fns): Don't require at top level.  (Recursively.)
	(cl-transform-lambda): Require help-fns.

2002-11-26  Dave Love  <fx@gnu.org>

	* language/european.el (encode-mac-roman): Deal with unencodable
	characters.

	* language/cyrillic.el (ccl-encode-koi8, ccl-encode-koi8-u)
	(ccl-encode-alternativnyj): Deal with unencodable characters.

	* international/code-pages.el (cp-make-coding-system): Deal with
	unencodable characters.

2002-11-24  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-signature): Handle case where
	value of mail-signature is a string.

	* menu-bar.el (menu-bar-describe-menu): Add "What's This?" item.

	* faces.el (face-set-after-frame-default): Ignore errors
	in face-spec-face-set.

	* cus-face.el (custom-declare-face): Add face-defface-spec
	prop after applying the face spec.

2002-11-23  Nick Roberts  <nick@nick.uklinux.net>

	* tooltip.el (tooltip-gud-print-command): Add server prefix to the
	print command for gdb to keep it out of the command history.

	* gdb-ui.el: Major re-organization.  Simplify legacy gdba
	code to allow only one gdb process.

2002-11-23  Markus Rost  <rost@math.ohio-state.edu>

	* scroll-all.el (scroll-all-mode): Move arg LIGHTER to the right
	place.  Add groups.

2002-11-22  Simon Marshall  <marshals@perth>

	* font-lock.el (c++-font-lock-extra-types): Add various STL classes.

2002-11-21  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el : General tidying.  Patches from Stefan Monnier.

2002-11-20  Simon Josefsson  <jas@extundo.com>

	* play/morse.el (morse-code): Add non-ASCII characters, according
	to table at http://www.soton.ac.uk/~scp93ch/morse/.

2002-11-21  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-sort-inhibit): New variable.
	(dired-sort-toggle-or-edit): Err if dired-sort-inhibit non-nil.

	* find-dired.el (find-dired): Set dired-sort-inhibit to t
	buffer-locally.

2002-11-21  Eugene Exarevsky  <zheka@relex.ru>

	* progmodes/sql.el: Added LINTER support.
	(sql-linter-program): New variable.
	(sql-linter-options): New variable.
	(sql-mode-menu): Added Linter keywords.
	(sql-mode-linter-font-lock-keywords): New variable.
	(sql-highlight-linter-keywords): New function.
	(sql-linter): New function.
	(sql-ms-options): New variable.
	(sql-ms): Use it.

2002-11-21  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-formats): Change default value; bump width
	of size column in first format to 7.

2002-11-20  Stefan Monnier  <monnier@cs.yale.edu>

	* help-fns.el (describe-variable): Look for (defvar . <sym>) in the
	load-history since `defvar' now uses this format.

	* custom.el (custom-declare-variable): Use push.
	Use the (defvar . <sym>) format in load-history like `defvar' does.

	* subr.el (symbol-file): Accept a non-atomic `function' arg.
	(with-local-quit): Add debug and indentation info.

2002-11-20  John Paul Wallington  <jpw@shootybangbang.com>

	* subr.el (symbol-file): Remove unused variable `functions'.

2002-11-20  Markus Rost  <rost@math.ohio-state.edu>

	* Makefile.in (setwins_almost): Renamed from finder_setwins.
	(custom-deps): Use it.
	(finder-data): Adjust to that name change.

2002-11-19  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/eldoc.el (eldoc-print-current-symbol-info):
	Turn errors into messages so they don't get ignored.
	(eldoc-get-fnsym-args-string): Use help-split-fundoc.
	(eldoc-beginning-of-sexp): Simplify.
	(eldoc-function-arglist): Remove.
	(eldoc-function-argstring): Use help-function-arglist instead.
	(eldoc-function-argstring-from-docstring-method-table)
	(eldoc-function-argstring-from-docstring): Remove.

	* emacs-lisp/cl.el (multiple-value-call): Add docstring.

2002-11-19  Dave Love  <fx@gnu.org>

	* emacs-lisp/bytecomp.el (maphash, map-char-table):
	Use byte-compile-funarg.

	* emacs-lisp/byte-opt.el (side-effect-free-fns): Several additions.

2002-11-19  Markus Rost  <rost@math.ohio-state.edu>

	* progmodes/vhdl-mode.el (defgroup vhdl-related): Declare the
	members here rather than with custom-add-to-group.  This is the
	intended way of using defgroup and also lets
	custom-make-dependencies do its job.
	(defgroup vhdl-highlight-faces): Ditto.

	* emacs-lisp/shadow.el (defgroup lisp-shadow): New group name.
	Previous group name shadow is used in shadowfile.el.
	(shadows-compare-text-p): Use group lisp-shadow.

2002-11-19  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl.el (multiple-value-call): Add docstring.

2002-11-19  Masatake Yamato  <jet@gyve.org>  (tiny change)

	* register.el (describe-register-1): Don't assign to val the value
	returned by `remove-list-of-text-properties'.

2002-11-18  Kai Großjohann  <kai.grossjohann@uni-duisburg.de>

	* calendar/diary-lib.el (fancy-diary-font-lock-keywords):
	Grok month numbers, too.

2002-11-18  Juanma Barranquero  <lektu@terra.es>

	* mail/smtpmail.el (smtpmail-send-queued-mail): Add autoload cookie.

2002-11-18  Markus Rost  <rost@math.ohio-state.edu>

	* pcvs.el (cvs-minor-mode, cvs-mode-commit-hook): Add group.

	* textmodes/refill.el (defgroup refill): New group.

	* emacs-lisp/checkdoc.el (checkdoc-minor-mode): Add group.

	* textmodes/sgml-mode.el (html-autoview-mode): Add group.

	* textmodes/paragraphs.el (use-hard-newlines): Add group.

	* progmodes/compile.el (compilation-shell-minor-mode): Add group.
	(compilation-minor-mode): Add group.

	* reveal.el (global-reveal-mode): Add group.

	* bookmark.el (bookmark-menu-length): Fix group name.

2002-11-17  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-ignored-headers): Add more headers.

	* calendar/parse-time.el (parse-time-elt): Var renamed from `elt'.
	(parse-time-val): Var renamed from `val'.  All uses changed.

	* files.el (parse-time-rules): Mark it as risky.

	* finder.el (finder-commentary): Use buffer *Finder-package*.

	* menu-bar.el (menu-bar-options-menu): Improve tooltip string.

	* simple.el (indicate-unused-lines)
	(default-indicate-unused-lines): New variable aliases.

2002-11-18  Kenichi Handa  <handa@m17n.org>

	* progmodes/cc-vars.el: Undo previous change.

2002-11-18  Kenichi Handa  <handa@m17n.org>

	* language/cyrillic.el (cyrillic-iso-8bit): Make it safe.

	* language/european.el (iso-latin-1): Make it safe.
	(iso-latin-2, iso-latin-3, iso-latin-4, iso-latin-5, iso-latin-8)
	(iso-latin-9): Likewise.

	* language/greek.el (greek-iso-8bit): Make it safe.

	* language/hebrew.el (hebrew-iso-8bit): Make it safe.

	* language/lao.el (lao): Make it safe.

	* language/thai.el (thai-tis620): Make it safe.

2002-11-17  Markus Rost  <rost@math.ohio-state.edu>

	* speedbar.el (defgroup speedbar): Use group 'etags instead of
	nonexistent group 'tags.

	* emacs-lisp/re-builder.el: Add provide call.

	* mail/feedmail.el (feedmail-fiddle-headers-upwardly)
	(feedmail-fiddle-plex-user-list): Fix typo in group name.

	* progmodes/make-mode.el (makefile-space-face): Fix group name.

	* textmodes/ispell.el (defgroup ispell): Arrange that definition
	starts at beginning of line.

	* textmodes/table.el (defgroup table-hooks): New group.
	(table-cell-map-hook): Fix typo in group name.

	* calendar/diary-lib.el (diary-button-face): Add group and version
	number.

	* warnings.el (defgroup warnings): New group.

2002-11-16  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/autoload.el (update-autoloads-from-directories):
	Sort the list of files with no autoloads.

2002-11-16  Alan Shutko  <ats@acm.org>

	* calendar/diary-lib.el (list-diary-entries): Pass a marker
	indicating source of entry to add-to-diary-list.
	(diary-button-face, diary-entry, diary-goto-entry): New, to
	support click to diary file.
	(fancy-diary-display): Buttonize diary entries.  Use new mode
	fancy-diary-display-mode.
	(list-sexp-diary-entries): Pass a marker indicating source of
	entry to add-to-diary-list.
	(diary-date): Return mark as well as entry.
	(add-to-diary-list): Add new marker argument, appended to
	diary-entries-list.
	(diary-mode, fancy-diary-display-mode): New derived modes, for
	diary file and fancy diary buffer respectively.
	(fancy-diary-font-lock-keywords, diary-font-lock-keywords): New
	variables.
	(font-lock-diary-sexps, font-lock-diary-date-forms): New
	functions, used in diary-font-lock-keywords.

	* calendar/calendar.el (diary-face): New.
	(european-calendar-display-form, describe-calendar-mode)
	(mark-visible-calendar-date, calendar-mark-today): Tidy doc string.
	(calendar-mode): Set up font-lock mode, using new variable
	calendar-font-lock-keywords.
	(generate-calendar-window): Fontify if font-lock-mode is on.
	(calendar-font-lock-keywords): New variable.

2002-11-16  Ivan Zakharyaschev  <imz@altlinux.org>  (tiny change)

	* international/codepage.el (cp866-decode-table): Fix the
	translation table.

2002-11-16  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-bytecomp.el (cc-bytecomp-defun): Fixed bug that
	caused existing function definitions to be overridden by
	phonies when the bytecomp environment is restored.

2002-11-15  Nick Roberts  <nick@nick.uklinux.net>

	* toolbar/gud-break.pbm, toolbar/gud-cont.pbm, toolbar/gud-display.pbm,
	toolbar/gud-down.pbm, toolbar/gud-finish.pbm, toolbar/gud-goto.pbm,
	toolbar/gud-next.pbm, toolbar/gud-print.pbm, toolbar/gud-remove.pbm,
	toolbar/gud-run.pbm, toolbar/gud-step.pbm, toolbar/gud-up.pbm:
	Icons for debugger (pbm files).

2002-11-15  Richard M. Stallman  <rms@gnu.org>

	* international/mule.el (set-buffer-file-coding-system): Redo prev chg.

2002-11-15  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-use-other-window, ibuffer-use-header-line)
	(ibuffer-visit-buffer, ibuffer-redisplay, ibuffer-update): Doc fix.
	(ibuffer-mode-hooks): Remove spurious defvar.
	(ibuffer): Run `ibuffer-hook' instead of `ibuffer-hooks'.
	(ibuffer-mode): Run `ibuffer-mode-hook' instead of
	`ibuffer-mode-hooks'.

2002-11-15  Markus Rost  <rost@math.ohio-state.edu>

	* mail/rmailedit.el: Add provide call.

	* play/bruce.el: Add provide call.

	* emacs-lisp/gulp.el: Add provide call.

2002-11-14  Richard M. Stallman  <rms@gnu.org>

	* international/mule.el (set-buffer-file-coding-system): Undo prv chg.

2002-11-14  Markus Rost  <rost@math.ohio-state.edu>

	* custom.el (custom-declare-group): Remove unnecessary line of code.

	* cus-dep.el (custom-make-dependencies): Bind load-file-name.

2002-11-14  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* calendar/diary-lib.el (make-diary-entry): Allow for local variables
	at end of diary file.

2002-11-14  Kim F. Storm  <storm@cua.dk>

	* files.el (mode-name): Mark it as risky-local-variable like the
	other mode-line elements (moved from bindings.el).

	* bindings.el (mode-name): Moved mark as risky-local-variable to
	files.el.

2002-11-14  Juanma Barranquero  <lektu@terra.es>

	* gud.el: Fix feature name in `provide'.

	* gdb-ui.el: Fix feature name in `require'.

2002-11-14  Per Cederqvist  <ceder@lysator.liu.se>  (tiny change)

	* progmodes/etags.el (find-tag-default): Copy text at point without
	properties.

2002-11-14  Kenichi Handa  <handa@m17n.org>

	* progmodes/cc-vars.el: Don't cc-bytecomp-defun char-table-p.

2002-11-14  Kim F. Storm  <storm@cua.dk>

	* textmodes/fill.el (fill-nobreak-invisible): New var.
	(fill-nobreak-p): Test it; return t if set and point invisible.
	(fill-newline): Test it; remove invisible prop on newline if set.

	* info.el (Info-fontify-node): New local list paragraph-markers.
	Record markers for mangled *note references on that list.
	When done, go back through those markers and fill each mangled
	paragraph with `fill-nobreak-invisible' let-bound to t.
	Don't use `display' property; insert "see" directly in buffer.

2002-11-14  Nick Roberts  <nick@nick.uklinux.net>

	* gdb-ui.el: New file, User Interface for running GDB

	* gud.el:(gud-find-file): Set up GDB tool bar.
	(gud-menu-map): New commands: run, goto.
	Enable some commands for gdba.
	(gud-query-cmdline): Pass default directory to gdba.
	(gdb): Define gud-goto and gud-run.
	(gud-gdb-complete-command): Maybe use gdba-complete-filter.
	(gud-mode): Set up local tool bar.
	(gud-display-line): For gdba, call gdb-display-source-buffer.
	(gud-basic-call): For gdba, maybe delete the current prompt.
	(gud-tool-bar-map): New variable.
	(gud-read-address): Correction.

	* toolbar/gud-break.xpm, toolbar/gud-cont.xpm, toolbar/gud-display.xpm,
	toolbar/gud-down.xpm, toolbar/gud-finish.xpm, toolbar/gud-goto.xpm,
	toolbar/gud-next.xpm, toolbar/gud-print.xpm, toolbar/gud-remove.xpm,
	toolbar/gud-run.xpm, toolbar/gud-step.xpm, toolbar/gud-up.xpm:
	Icons for debugger.

2002-11-13  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-mode-run): Don't pass "." if not needed.

2002-11-13  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-registered): Improve comment.

	* vc-sccs.el (vc-sccs-registered): Improve comment.

2002-11-13  Tim Van Holder  <tim.vanholder@anubex.com>  (tiny change)

	* progmodes/compile.el (compilation-error-regexp-alist):
	Don't include colon and space after a file name as part of the name.

2002-11-13  Richard M. Stallman  <rms@gnu.org>

	* gud.el (gdb): Undo 10-26 change.

2002-11-13  Kenichi Handa  <handa@m17n.org>

	* replace.el (occur-engine): Set buffer-file-coding-system of
	OUT-BUF to that of one of BUFFERS if they locally bind that variable.

2002-11-13  Markus Rost  <rost@math.ohio-state.edu>

	* custom.el (custom-handle-all-keywords): Fix arg passed to
	custom-add-to-group.

2002-11-12  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-defs.el (cvs-mode-map): Remove M-f binding.
	(cvs-minor-mode-map): Add e binding in log-view-mode.

	* progmodes/perl-mode.el (perl-hanging-paren-p): New fun.
	(perl-indent-line): Look at the open-paren to indent a close-paren.
	(perl-calculate-indent): Try to better indent args after hanging paren.
	Remove special code for open-paren-in-column-0.

	* textmodes/sgml-mode.el (sgml-namify-char): New cmd.
	(sgml-name-char): Use it.
	(sgml-tag-last, sgml-tag-history): New vars.
	(sgml-tag): Use them.
	(sgml-skip-tag-forward): Use sgml-tag-syntax-table.
	(sgml-delete-tag): Remove resulting empty lines.
	(sgml-tag) <symbol-plist>: Don't make intangible.
	(sgml-parse-tag-backward): Add limit argument.
	(html-autoview-mode): Use define-minor-mode.

2002-11-12  Markus Rost  <rost@math.ohio-state.edu>

	* vc-rcs.el (vc-rcs-registered): Handle the autoload cookie so
	that the definition is found by `find-function-search-for-symbol'
	and etags.

	* vc-sccs.el (vc-sccs-registered): Ditto.

	* emulation/edt.el (defgroup edt): Arrange that definition starts
	at beginning of line.

	* ls-lisp.el (defgroup ls-lisp): Remove autoload cookie.

	* hi-lock.el (defgroup hi-lock-interactive-text-highlighting):
	Remove autoload cookie.

	* newcomment.el (defgroup comment): Remove autoload cookie.

2002-11-11  Markus Rost  <rost@math.ohio-state.edu>

	* mwheel.el (mouse-wheel-down-button, mouse-wheel-up-button):
	Declare with defvar, not with defcustom.

	* cus-dep.el: Don't require 'autoload.
	(custom-make-dependencies): Handle :version also for autoloaded
	options.

	* winner.el (defgroup winner): Arrange that definition starts at
	beginning of line.

	* emulation/edt.el: Simplify Emacs 19 compatibility.

2002-11-11  Fabrice Bauzac  <fabrice.bauzac@wanadoo.fr>  (tiny change)

	* dired-aux.el (dired-show-file-type): Format filename with "%s" to
	escape any format-like sequences it could contain.

2002-11-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-save-delete): Force emacs-lisp-mode.

2002-11-11  Juanma Barranquero  <lektu@terra.es>

	* bindings.el (mode-name): Mark it as risky-local-variable.

2002-11-09  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (current-language-environment):
	Fix :type.

	* international/ucs-tables.el: Revert to using
	translation-table-for-input instead of keyboard-translate-table.

	* international/quail.el (quail-input-string-to-events):
	Revert last change.

	* simple.el (quoted-insert): Bind translation-table-for-input,
	not keyboard-translate-table.

2002-11-08  Stefan Monnier  <monnier@cs.yale.edu>

	* arc-mode.el (archive-zip-summarize): Don't hardcode (point-min) = 1.

	* complete.el (PC-do-completion): Make partial-completion work
	with incomplete directory names.

	* textmodes/tex-mode.el (latex-standard-block-names): Rename from
	standard-latex-block-names.
	(tex-font-lock-keywords-1): Add providecommand, renewenvironment,
	and renewtheorem.  Highlight \it and \bf separately since they
	may overlap.
	(tex-font-lock-suscript, tex-font-lock-unfontify-region): New funs.
	(tex-font-lock-keywords-3, tex-verbatim-environments)
	(tex-font-lock-syntactic-keywords): New vars.
	(superscript, subscript, tex-verbatim-face): New faces.
	(tex-font-lock-syntactic-face-function): Handle \verb construct.
	(tex-common-initialization): Update font-lock-defaults setting.
	(tex-insert-braces): Make it into a skeleton.
	(latex-fill-nobreak-predicate): Don't break after \.
	(latex-insert-block): Rename from tex-latex-block.
	(latex-down-list): Use tex-mode-syntax-table when skipping parens
	rather than the indentation syntax-table.
	(latex-close-block): Rename from tex-close-latex-block.
	(latex-split-block): New fun.
	(latex-indent): Don't indent inside a verbatim block.
	(latex-find-indent): Stick \begin{verbatim} to the margin.

2002-11-08  John Wiegley  <johnw@gnu.org>

	* calendar/timeclock.el (timeclock-modeline-display): Use assq as
	well as memq to find `global-mode-string' within
	`mode-line-format'.  The structure of that variable has changed in
	21.3.

2002-11-07  Stefan Monnier  <monnier@cs.yale.edu>

	* format.el (format-decode): Be careful with the order in `format'.

	* eshell/esh-cmd.el (function-p-func): Avoid `xemacs-p'.

	* eshell/em-glob.el: Require esh-util.
	(eshell-glob-initialize): Don't assume
	eshell-special-chars-outside-quoting is available.

	* textmodes/fill.el (fill-paragraph): Consider a comment-start as
	a paragraph starter when filling non-comments.
	(fill-comment-paragraph): Don't narrow while doing the fill.
	Recognize paragraph starters and separators within comments.
	Use adaptive-fill-prefix when it works.  Use comment-search-forward.

	* progmodes/compile.el (grep-default-command): New fun.
	(grep): Use it.
	(compilation-menu-map): New var.
	(compilation-minor-mode-map, compilation-shell-minor-mode-map): Use it.
	(compilation-mode-map): Simplify.
	(compilation-shell-minor-mode, compilation-minor-mode):
	Use define-minor-mode.

	* elide-head.el (elide-head): Don't make intangible.

	* help.el (where-is): Rename map to defs (a list of syms is not a map).
	Test fboundp first, to speed things up.  Use push.

	* isearch.el (isearch-hidden): New var.
	(isearch-search-and-update): Test it.
	(isearch-range-invisible): Set it.

	* progmodes/tcl.el (tcl-mode): Don't set paragraph-start,
	paragraph-separate, comment-column, and fill-paragraph-function.
	Simplify outline-regexp.
	(tcl-do-fill-paragraph): Remove.

2002-11-07  Markus Rost  <rost@math.ohio-state.edu>

	* mail/sendmail.el (mail-default-directory): Set the version to 21.4.

	* progmodes/compile.el (grep-compute-defaults): Undo previous change.
	Definition moved down.
	(grep-command, grep-find-command, grep-tree-command): Allow value nil.
	Do not declare :get property.
	(grep-use-null-device): Fix type.  Do not declare :get property.

	* emacs-lisp/checkdoc.el (checkdoc-find-error):
	Use get-file-buffer instead of get-buffer.

	* cus-dep.el (custom-make-dependencies): Fix comment inserted in
	cus-load.el.

2002-11-07  Juanma Barranquero  <lektu@terra.es>

	* help.el (where-is): Report also aliases of the passed command.

2002-11-06  Dave Love  <fx@gnu.org>

	* simple.el (quoted-insert): Bind keyboard-translate-table around
	read-char.

	* international/ucs-tables.el: Use keyboard-translate-table coding
	system property, not translation-table-for-input, for
	vietnamese-viscii & al.
	(translation-table-for-input): Set,
	don't defvar, and make permanent-local.
	(ucs-unify-8859, ucs-unify-8859, ucs-fragment-8859): Add/remove
	set-buffer-major-mode-hook, not quail-activate-hook.
	(ucs-set-table-for-input): Renamed from ucs-quail-activate.
	(ucs-unify-8859, ucs-unify-8859, ucs-fragment-8859):
	Setup keyboard-translate-table, not translation-table-for-input.
	Modify set-buffer-major-mode-hook, not quail-activate-hook.
	(ucs-fragment-8859): Don't use translation-table-for-input coding
	system property.
	(ucs-quail-activate): Deleted.
	(ucs-set-table-for-input): New.
	(ucs-minibuffer-setup): Use it.

	* international/quail.el (quail-input-string-to-events):
	Use keyboard-translate-table, not translation-table-for-input.

	* files.el (normal-mode): Call ucs-set-table-for-input.

	* international/mule.el (set-buffer-file-coding-system):
	Call ucs-set-table-for-input.

2002-11-06  Richard M. Stallman  <rms@gnu.org>

	* replace.el (query-replace, query-replace-regexp): Doc fixes.

	* emacs-lisp/bytecomp.el (byte-compile-lambda):
	Handle progn like let, inside interactive spec.

	* textmodes/tex-mode.el (tex-dvi-view-command): Value can be sexp.
	Initialize to a suitable sexp.
	(tex-view): Evaluate tex-dvi-view-command and use the value.

2002-11-06  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (coding-system-eol-type-mnemonic):
	Use eol-mnemonic-undecided if CODING-SYSTEM is nil.

2002-11-06  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-fontify-node): Fixed hiding of *note references
	with embedded file names like (xxx.yyy).
	Avoid making any lines visibly longer if hiding newlines inside
	note references by wrapping line after references if it contained
	a newline (unfortunately this makes more lines appear "shorter").
	Properly reindent multi-line menu entry descriptions.

2002-11-05  Juanma Barranquero  <lektu@terra.es>

	* language/cyrillic.el ("Bulgarian"): Fix typo.

	* international/mule.el (coding-system-eol-type-mnemonic):
	Move from mule-util.el.

	* international/mule-util.el (coding-system-eol-type-mnemonic):
	Move to mule.el.

2002-11-04  Juanma Barranquero  <lektu@terra.es>

	* files.el (find-buffer-visiting): Accept new optional PREDICATE
	argument to return only a buffer that satisfies the predicate.
	(insert-file-1): New function.
	(insert-file-literally): Use it.
	(insert-file): Use it.

2002-11-04  Robert Fenk  <Robert.Fenk@gmx.de>  (tiny change)

	* desktop.el (desktop-relative-file-names): New variable.
	(desktop-save): Use it.

2002-11-03  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-dired-mode): Adapt dired-move-to-filename-regexp to
	its current version in dired.el.

2002-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/autoload.el (generate-file-autoloads)
	(update-file-autoloads): Strip .gz and other such extensions.
	(update-autoloads-from-directories): Also consider compressed files.

	* info.el (Info-streamline-headings): New var.
	(Info-dir-remove-duplicates): New fun.
	(Info-insert-dir): Use it.  Simplify the code with push,mapc,dolist.
	(Info-select-node): Simplify handling of Info-header-line.
	(Info-forward-node): Undo 2000/12/15 since we don't narrow any more.
	(Info-mode): Set header-line-format once and for all.
	(Info-fontify-node): Accept bogus first line with `File:' missing.
	Only make first line invisible if Info-use-header-line.
	Don't use `intangible': it's evil.  Use inhibit-read-only.
	(Info-follow-reference, Info-next-reference, Info-prev-reference)
	(Info-try-follow-nearest-node): Don't bind inhibit-point-motion-hooks
	since we don't use intangible any more.

	* image.el (insert-image): Don't make intangible since
	adjust_point_for_property should be sufficient by default.

2002-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-paragraph-handle-comment): New var.
	(fill-comment-paragraph): New fun (generalizes of lisp-fill-paragraph).
	(fill-paragraph): Use them.

	* emacs-lisp/lisp-mode.el (lisp-fill-paragraph):
	Use fill-comment-paragraph.

2002-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (mode-line-change-eol)
	(mode-line-eol-desc-cache, mode-line-eol-desc): New.
	(mode-line-mule-info): Use them for the EOL part of the modeline.

	* server.el (server-sentinel): Kill buffers if applicable.
	(server-temp-file-p): Make arg optional.
	(server-done): Use it to simplify.
	(server-switch-buffer): If server-window is a function, use it.

	* mail/undigest.el (rmail-digest-end-regexps): Simplify.
	(undigestify-rmail-message): Fix paren-bug and simplify.

2002-11-02  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-hide-note-references): nil value now does no
	reformatting at all.  New choice 'tag reformats tag but shows
	the section reference.
	(Info-fontify-node): Use it.

2002-11-01  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el (tex-common-initialization):
	comment-start-skip shouldn't match on the next line.

	* emacs-lisp/lisp-mode.el (lisp-fill-paragraph): Use match-string.
	Don't bother making paragraph-start a superset of paragraph-separate.
	Use line-beginning-position.

	* textmodes/sgml-mode.el (sgml-skip-tag-backward)
	(sgml-skip-tag-forward): Deal with xml-style <foo/> empty tags.

2002-11-01  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-hide-note-references): New defcustom.
	(Info-fontify-node): Use it.

2002-10-31  Kim F. Storm  <storm@cua.dk>

	* shell.el (explicit-bash-args): Bash 1.x doesn't grok
	--noediting option; added run-time check to exclude it.

	* info.el (Info-follow-reference, Info-next-reference)
	(Info-prev-reference, Info-try-follow-nearest-node):
	Bind inhibit-point-motion-hooks to t while parsing reference.
	(Info-fontify-node): When font-lock-mode is enabled, display
	"*note" and "* menu" references in a more user friendly format.

2002-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-move-to-break-point): Skip white space
	_before_ checking to see if we're hitting the margin.
	(fill-region-as-paragraph): Don't fiddle with the undo-list any more:
	it's now done by the C primitives.  Don't use narrowing.
	Reorganize the line-breaking part of the code to simplify the control
	flow and make it work in the absence of narrowing.
	(fill-region): Don't use narrowing.

2002-10-30  Dave Love  <fx@gnu.org>

	* textmodes/po.el (po-content-type-charset-alist): Delete most entries.
	(po-find-charset): Doc fix.  Remove interactive spec.
	(po): Provide.
	(po-find-file-coding-system-guts): Re-written to use
	coding-system-alist, and code-pages, not codepage stuff.

	* term/x-win.el: Remove some ancient compatibility code.
	Populate x-keysym-table.

2002-10-30  Andreas Schwab  <schwab@suse.de>

	* subr.el (replace-regexp-in-string): Doc fix.

2002-10-29  Dave Love  <fx@gnu.org>

	* cus-start.el (selection-coding-system, scalable-fonts-allowed): Add.

	* progmodes/scheme.el (syntax-case): Define scheme-indent-function.

	* international/mule-conf.el: Doc fixes.

2002-10-29  Richard M. Stallman  <rms@gnu.org>

	* server.el (server-switch-buffer): Say when no server buffers remain.

	* net/goto-addr.el (goto-address-url-regexp): Don't match `mailto'.

2002-10-28  Masayuki Ataka  <ataka@milk.freemail.ne.jp>  (tiny change)

	* progmodes/make-mode.el (makefile-warn-continuations):
	Call re-search-forward with NOERROR t.

2002-10-29  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-wide-find-dirs-or-files): Fixed problem that caused
	incomplete list of matches to be returned.

2002-10-29  Masayuki Ataka  <ataka@milk.freemail.ne.jp>  (tiny change)

	* textmodes/texinfo.el (texinfo-environments): Add environment;
	copying, documentdescription, ifplaintext, ifnotplaintext, and
	verbatim.

	* textmodes/texinfmt.el (texinfo-format-ifplaintext): New function.
	(ifplaintext, ifnotplaintext)
	(afourpaper, afivepaper, afourlatex, afourwide)
	(documentlanguage, documentencoding): New aliases.

2002-10-29  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-mouse-popup-menu): Set point before popping
	up filter groups menu.  Preserve point unless a menu command has
	moved it from point clicked.

2002-10-29  David Kastrup  <dak@lola.goethe.zz>

	* calc/calc.el (calc-any-evaltos): Initialize to nil, since
	calc-refresh-evaltos appears to need this.

2002-10-28  Dave Love  <fx@gnu.org>

	* international/mule-diag.el (non-iso-charset-alist): Move to
	avoid compilation warning.
	(mule-diag): Provide.

	* international/code-pages.el (cp-make-coding-system):
	Use utf-translation-table-for-decode, not
	utf-8-translation-table-for-decode.
	(mule-diag): Require.

	* language/thai-util.el (thai-composition-function): Don't use prog1.

	* language/lao-util.el (lao-composition-function): Don't use prog1.

	* language/european.el (diacritic-composition-function):
	Modify confused prog1 form.

	* international/quail.el (quail-keyboard-layout-alist): Fix pc105-uk.
	(quail-keyboard-layout): Customize.
	Move after quail-keyboard-layout-alist.

2002-10-28  Miles Bader  <miles@gnu.org>

	* progmodes/make-mode.el (makefile-warn-continuations):
	Don't barf when there _aren't_ any suspicious continuations.

2002-10-28  Matthew Swift  <swift@alum.mit.edu>

	* progmodes/compile.el (grep-find-use-xargs): Fix docstring.

2002-10-27  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-wind.el (ediff-control-frame-parameters): Add scrollbar-height.

2002-10-27  Andreas Schwab  <schwab@suse.de>

	* progmodes/sh-script.el (sh-mode-syntax-table): Don't make ^L
	end-of-comment syntax.

2002-10-27  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-cannot-complete-command): New defcustom, default to
	ido-completion-help (similar to iswitchb-cannot-complete-hook).
	(ido-complete): Call value of ido-cannot-complete-command rather
	than ido-completion-help when no common completion.

2002-10-27  Dave Love  <fx@gnu.org>

	* international/code-pages.el (iso-8859-11): New.

2002-10-27  Kim F. Storm  <storm@cua.dk>

	* pcvs.el (cvs-checkout): Use read-directory-name.
	(cvs-query-directory): Likewise.

2002-10-26  Richard M. Stallman  <rms@gnu.org>

	* progmodes/make-mode.el (makefile-cleanup-continuations):
	Default for variable is nil.
	(makefile-warn-continuations): New function.
	(makefile-mode): Put it on write-file-functions.

	* international/mule-cmds.el (select-safe-coding-system):
	Delete debugging setq.

	* shell.el (shell): Look for .emacs_SHELL under ~/.emacs.d
	after looking in ~.

	* startup.el (command-line): Look for .emacs under ~/.emacs.d
	after looking in ~.

	* simple.el (toggle-truncate-lines): When turning off truncation,
	clear out the hscroll value in this buffer's windows.

	* simple.el (display-message-or-buffer): Don't display empty
	output in the echo area.

	* man.el (Man-default-man-entry): Don't look for all word chars,
	look only for characters that are normally part of a shell command.

	* gud.el (gdb): Pass default-directory to GDB via -cd option.

	* font-lock.el (c++-font-lock-keywords...): Add `restrict' keyword.

	* find-file.el (ff-find-related-file): Fix autoload cookie.

	* emacs-lisp/unsafep.el (unsafep-variable): Pass second arg to
	risky-local-variable-p.

	* files.el (risky-local-variable-p): VAL=nil has special meaning.

	* Makefile.in (compile-always): Avoid error in old Bash versions.

2002-10-26  John Paul Wallington  <jpw@shootybangbang.com>

	* textmodes/picture.el (picture-mouse-set-point): New command.
	(picture-mode-map): Bind it.
	(picture-motion-reverse): Doc fix.

2002-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-next-heading): Make sure the match-data
	is really correct where returning.

2002-10-24  Matthew Swift  <swift@alum.mit.edu>

	* textmodes/outline.el (outline-minor-mode): Add customization group.

2002-10-23  Richard M. Stallman  <rms@gnu.org>

	* files.el (risky-local-variable-p): New arg VAL.
	(compile-command): Use `stringp' for `safe-local-variable' prop.
	(hack-one-local-variable): Pass VAL to `risky-local-variable-p'.

2002-10-23  Francis J. Wright  <F.J.Wright@qmul.ac.uk>

	* woman.el (woman-version): Update to 0.551 (beta).
	(woman-parse-colon-path): Add support for current Cygwin mount
	conventions.
	(woman-Cyg-to-Win): New function to convert absolute filename from
	Cygwin to Windows form by executing external program cygpath if
	possible.
	(woman-man.conf-path): Update default to current common locations
	and to support Cygwin; update documentation.
	(woman-parse-man.conf): Generalize regexp to "man.*\\.conf" to
	match possible names of man.conf file; tidy code and documentation.
	(woman-manpath): Simplify default and documentation; essentially
	move code that was here into `woman-parse-colon-path'.
	(woman-default-indent): Change Linux to GNU in documentation.
	(woman-addition-face): Make documentation consistent with other
	WoMan faces.
	(woman-emulate-tbl): New variable, determines whether tbl
	emulation is required.
	(woman-decode-region): Add check for preprocessor requests.
	(woman0-process-escapes, woman-special-characters)
	(woman-get-next-char, woman-parse-numeric-value): Add support for
	long groff names of the form [xxx].
	(woman-strings, woman-change-fonts): Now call `woman-match-name'.
	(woman2-PD, woman2-na): Doc fix.
	(woman-match-name): New function.
	(woman2-TS): New function.
	(woman2-TE): New alias for `woman2-fi'.

2002-10-23  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-restrict-to-matches): New command.
	(ido-define-mode-map): Bind it to C-SPC and C-@ in ido-mode-map.

2002-10-22  Bob Halley  <halley@play-bow.org>  (tiny change)

	* eshell/esh-io.el (eshell-set-output-handle): Fix so that
	multiple redirection can work.

2002-10-21  Stefan Monnier  <monnier@cs.yale.edu>

	* ielm.el (inferior-emacs-lisp-mode): If hexl not found, use cat.
	Don't hardcode point-min == 1.

	* hexl.el (hexl-mode-old-write-contents-hooks): Remove.
	(hexl-mode, hexl-current-address, hexl-address-to-marker)
	(hexl-insert-char): Don't hardcode point-min == 1.
	(hexl-isearch-search-function): New fun.
	(hexl-mode-old-isearch-search-fun-function): New var.
	(hexl-mode): Use them.
	(hexl-mode, hexl-mode-exit, hexl-maybe-dehexlify-buffer):
	Use write-contents-functions rather then write-contents-hooks.

	* textmodes/text-mode.el (text-mode-syntax-table): Make ' a prefix.
	(paragraph-indent-text-mode-abbrev-table)
	(paragraph-indent-text-mode-syntax-table): Remove.
	(paragraph-indent-text-mode): Use the :abbrev and :syntax-table args.

2002-10-21  Juanma Barranquero  <lektu@terra.es>

	* eshell/esh-util.el (directory-files-and-attributes): Copy docstring
	from Emacs 21.  Arg DIR renamed to DIRECTORY for consistency.

2002-10-20  Andreas Schwab  <schwab@suse.de>

	* apropos.el (apropos-group): Use customize-group-other-window.

2002-10-18  Stefan Monnier  <monnier@rum.cs.yale.edu>

	* progmodes/perl-mode.el (perl-mode-syntax-table): Change $ back
	to just "/" instead of "/ p".
	(perl-font-lock-syntactic-keywords): Use ". p" for the `$'.

2002-10-18  Juanma Barranquero  <lektu@terra.es>

	* textmodes/artist.el (artist-ff-is-bottommost-line): Fix misplaced
	ELSE expression on IF.

2002-10-17  Juanma Barranquero  <lektu@terra.es>

	* align.el (align-rules-list, align-exclude-rules-list): Fix typos.

	* subr.el (remq): Likewise.

	* vc-cvs.el (vc-cvs-sticky-tag-display): Likewise.

	* vc-hooks.el (vc-insert-file): Likewise.

	* vcursor.el (vcursor-other-window): Likewise.

	* wid-edit.el (widget-choose): Likewise.

	* calendar/diary-lib.el (diary-name-pattern): Likewise.

	* emacs-lisp/elint.el (elint-error, elint-warning): Likewise.

	* emacs-lisp/lisp.el (beginning-of-defun): Likewise.

	* emulation/edt-mapper.el (top-level): Likewise.

	* eshell/esh-var.el (eshell/define): Likewise.

	* mail/feedmail.el (feedmail-nuke-body-in-fcc)
	(feedmail-queue-draft-directory): Likewise.

	* net/netrc.el (netrc-parse): Likewise.

	* obsolete/cplus-md.el (c++-empty-arglist-indent): Likewise.

	* progmodes/ebrowse.el (ebrowse-ts)
	(ebrowse-view/find-file-and-search-pattern)
	(ebrowse-draw-file-member-info): Likewise.

	* progmodes/idlwave.el (idlwave-region-active-p): Likewise.

	* progmodes/idlw-shell.el (idlwave-shell-set-bp): Likewise.

	* progmodes/sh-script.el (sh-indent-for-then): Likewise.

	* textmodes/bibtex.el (bibtex-find-entry-location): Likewise.

	* textmodes/sgml-mode.el (sgml-close-tag, html-imenu-index): Likewise.

2002-10-17  Dave Love  <fx@gnu.org>

	* international/mule-diag.el (non-iso-charset-alist): Add koi8-u.

	* international/code-pages.el (cp-make-translation-table): Use
	ucs-mule-to-mule-unicode.
	(cp-fix-safe-chars): Fix typo.
	(non-iso-charset-alist): Don't define.
	(cp-make-coding-system): Use utf-8-translation-table-for-decode.
	Define translation-table-for-input.
	(cp866): Reinstate.
	(alternativnj): Don't define alias.
	(koi8-u): Deleted.

	* language/european.el ("Slovenian"): Use slovenian input-method.
	(encode-mac-roman): Use ucs-mule-to-mule-unicode.

	* language/cyrillic.el (cyrillic-alternativnyj-decode-table): Fix
	the table.
	(cyrillic-alternativnyj): Don't give it `mime-charset' property.
	(cp866): Delete this alias.
	("Bulgarian"): Fix the value of `input-method'.

2002-10-16  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* dired-aux.el (dired-add-entry): Put point in correct position
	before inserting marker char.

2002-10-16  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-readin-insert): Expand dired-directory.

	* dired-aux.el (dired-insert-subdir-doinsert): Preserve point.

2002-10-16  Markus Rost  <rost@math.ohio-state.edu>

	* textmodes/reftex-vars.el: Move reftex-set-dirty here from
	reftex.el.  Move the provide call to end of file.

	* textmodes/reftex.el: Move reftex-set-dirty to reftex-vars.el.

2002-10-15  Dave Love  <fx@gnu.org>

	* man.el (Man-getpage-in-background): Set width in environment.

2002-10-15  Kenichi Handa  <handa@m17n.org>

	* mail/sendmail.el (sendmail-send-it): Call
	select-message-coding-system before changing the current buffer to
	" sendmail temp".

2002-10-14  Andre Spiegel  <spiegel@gnu.org>

	* files.el (insert-directory): Handle //SUBDIRED// lines in
	recursive listings from ls --dired.

	* vc.el (vc-dired-reformat-line): Simplified.  Handles text
	properties correctly now.

2002-10-14  Juanma Barranquero  <lektu@terra.es>

	* international/mule.el (set-selection-coding-system): Fix spacing.

2002-10-13  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Treat `ignore' specially--prevent warnings about functions
	called for effect, in its args.
	Don't warn when `pop' is used for effect.

	* emacs-lisp/autoload.el (autoload-print-form): Cleanup.

	* uniquify.el (uniquify-get-proposed-name):
	Don't use directory-sep-char.

	* thingatpt.el (read-from-whole-string): Add call to `ignore'.

	* find-file.el (ff-related-file-alist): New alias.
	(ff-find-related-file): New alias.

2002-10-13  Andreas Schwab  <schwab@suse.de>

	* dired.el (dired-insert-directory): When looking for existing
	indentation, goto OPOINT instead of beginning of buffer.

2002-10-12  Stefan Monnier  <monnier@cs.yale.edu>

	* cus-dep.el (custom-make-dependencies): Ignore preloaded files.

2002-10-12  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-init.el (ediff-frame-char-height): Use frame-selected-window.

	* ediff-util.el (ediff-file-checked-in-p): Changed progn with and.

	* ediff-wind.el (ediff-skip-unsuitable-frames): Distinguish selected
	frame from frame of selected window.
	(ediff-frame-has-dedicated-windows): Don't select any frames to avoid
	changing selected windows.
	(ediff-setup-control-frame): Make sure auto-raise is properly set for
	the control frame.

2002-10-10  Simon Josefsson  <jas@extundo.com>

	* browse-url.el (browse-url-mozilla): Doc fix.

2002-10-10  Steve Youngs  <youngs@xemacs.org>

	* browse-url.el (browse-url-mozilla-new-window-is-tab): New.
	(browse-url-mozilla): Use it.

2002-10-11  Miles Bader  <miles@gnu.org>

	* vc-cvs.el (vc-cvs-parse-entry): Don't barf when an `Entries'
	files contains an invalid timestamp.

2002-10-11  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (mail-envelope-from): New option `header' to
	use RFC 2822 From: header as the envelope address.
	(mail-envelope-from): New function, this should be used instead of
	looking at the `mail-envelope-from' variable.
	(sendmail-send-it): Use it.

	* mail/smtpmail.el (smtpmail-via-smtp): Use it.

2002-10-11  Andre Spiegel  <spiegel@gnu.org>

	* dired.el (dired-insert-directory): Fix check for indentation
	from ls --dired.

	* vc.el (vc-dired-reformat-line): As a temporary fix, remove all text
	properties from the reformatted line.

2002-10-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/paragraphs.el (forward-paragraph): Keep track of
	remaining paragraphs to skip more carefully.

	* add-log.el (add-change-log-entry): Don't call find-file at all
	if we're already in the proper buffer.
	(change-log-resolve-conflict): New fun.
	(change-log-mode): Use it and use define-derived-mode.
	(change-log-merge): Allow other-log to be a buffer.
	Don't add a \n if there are already enough \n's.

	* finder-inf.el, subdirs.el, cus-load.el: Remove.

	* finder.el ("finder-inf"): Don't fail if the file is absent.

	* cus-dep.el (custom-make-dependencies): Don't use find-file.
	Use feature names rather than file names if applicable.

	* cus-edit.el (customize-mode): New command.

	* custom.el (custom-group-of-mode): New fun.
	(custom-load-symbol): Don't use preloaded-file-list now that
	load-history is always complete.  Don't look up the expanded file
	name in load-history (looked like an XEmacsism).

	* smerge-mode.el (smerge-ediff): Autoload.
	(smerge-match-conflict): Don't assume as much about smerge-begin-re.
	(smerge-resolve-function): New var.
	(smerge-resolve): New command.
	(smerge-basic-map): Bind it.

2002-10-10  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-parse-entry): Parse the time stamp found in
	CVS/Entries, rather than comparing it textually.

2002-10-10  Markus Rost  <rost@math.ohio-state.edu>

	* international/encoded-kb.el: Add `provide' call.

2002-10-09  David Kastrup  <David.Kastrup@t-online.de>

	* calc/calc-alg.el (calcFunc-ln): In symbolic manipulations,
	ln(-1) should be i*pi, not pi.

2002-10-09  Markus Rost  <rost@math.ohio-state.edu>

	* vc-cvs.el (vc-cvs-registered): In the autoload version use load
	instead of require to avoid loops when loaddefs.el is loaded after
	vc-cvs.el.

	* cus-edit.el (Custom-reset-current): Don't test for default-boundp.
	(Custom-reset-saved): Don't test for saved-value.

2002-10-08  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-find-version): Use the new backend op `find-version'.
	(vc-default-find-version): Provide the new backend op `find-version'
	in terms of the old `checkout' op.

	* vc-rcs.el (vc-rcs-find-version): New fun.
	(vc-rcs-checkout): Remove `workfile' arg and simplify.

	* vc-sccs.el (vc-sccs-find-version): New fun.
	(vc-sccs-checkout): Remove `workfile' arg and simplify.

	* vc-cvs.el (vc-cvs-find-version): New fun.

2002-10-08  John Paul Wallington  <jpw@shootybangbang.com>

	* info.el (Info-next-menu-item, Info-last-menu-item)
	(info-emacs-manual): Add docstrings.
	(Info-index): Use `string-to-number' instead of `string-to-int'.

2002-10-08  Kenichi Handa  <handa@m17n.org>

	* international/ucs-tables.el (ucs-translation-table-for-decode):
	Define it as a translation-table.

2002-10-07  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Doc fix.

	* progmodes/compile.el (grep-compute-defaults): Set the standard-value
	properties of the variables being initialized.

	* thingatpt.el (thing-at-point-url-path-regexp): Doc fix.

2002-10-07  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-normal-cursor-color):
	Fixed initialization to make "Erase Customization" work.

2002-10-07  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-maybe-resolve-conflicts): Always call vc-resolve-conflicts
	in case some other package redefined it.
	(vc-resolve-conflicts): Make it into an alias for smerge-ediff.

	* textmodes/fill.el (fill-paragraph): Go to BOL before calling
	forward-paragraph to make sure its return value is meaningful.

2002-10-06  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.25 released.
	(tramp-handle-file-truename): If it's a directory,
	append slash only if result doesn't end in a slash already.
	(tramp-handle-file-truename): Restructure logic.  If list of steps
	is nil, return "/" as the real name.
	(tramp-completion-mode): Add "\\(" and "\\)".  Otherwise,
	`match-string' doesn't make sense.  From Michael Albinus.
	(tramp-host-with-port-regexp): New defcustom.  Equal to previous
	`tramp-host-regexp'.  From Michael Albinus.
	(tramp-host-regexp): Taken off hashes in host names.  Otherwise,
	scanning files like .rhosts would take comments as host names.
	From Michael Albinus.
	(tramp-file-name-structure, tramp-multi-file-name-hop-structure):
	Replace `tramp-host-regexp' by `tramp-host-with-port-regexp'.
	From Michael Albinus.
	(tramp-action-terminal): New function.
	(tramp-terminal-prompt-regexp): New variable, matches "tset" prompts.
	(tramp-actions-before-shell): Use them.
	(tramp-handle-shell-command): Logic error.  From Ivan
	Zakharyaschev <imz@altlinux.org>.

2002-10-06  Markus Holmberg  <markush@acc.umu.se>  (tiny change)

	* thingatpt.el (thing-at-point-uri-schemes): New variable.
	(thing-at-point-url-regexp): Use it.

2002-10-06  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-beginning-do): Ignore labeled DO
	loops.

2002-10-05  Stefan Monnier  <monnier@cs.yale.edu>

	* vc.el (vc-log-mode-map): Explicitly inherit from text-mode.
	(vc-maybe-resolve-conflicts): Don't check smerge-mode and smerge-ediff.
	(vc-print-log): Don't check log-view-mode.
	(vc-default-show-log-entry): Don't check log-view-goto-rev.
	(vc-log-mode): Remove.
	(vc-log-edit): Don't check log-edit.

2002-10-04  Stefan Monnier  <monnier@cs.yale.edu>

	* vc-cvs.el (vc-cvs-show-log-entry):
	* vc-rcs.el (vc-rcs-show-log-entry): Delete.

	* smerge-mode.el (smerge-ediff): Add name-{mine,other,base} args.

2002-10-04  Markus Rost  <rost@math.ohio-state.edu>

	* vc.el (vc-default-show-log-entry): Fix typo.

2002-10-04  Steven Tamm  <steventamm@mac.com>

	* term/mac-win.el: Add lines to handle the new [return] event.

2002-10-03  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-paragraph): Give up if there's no
	paragraph at or after point.

	* textmodes/paragraphs.el (forward-paragraph): Return the steps left.

	* vc.el (vc-print-log): Unconditionally use `show-log-entry'.
	(vc-default-show-log-entry): New fun.

	* subr.el (read-key-auxiliary-map, read-key): Remove.
	(read-quoted-char): Undo the `read-key' change of 2002-06-23.

2002-10-03  Markus Rost  <rost@math.ohio-state.edu>

	* progmodes/ada-stmt.el (ada-stmt-add-to-ada-menu): Handle the
	menu pseudo-keys generated by easymenu which are lowercase in
	Emacs 22.1.

	* progmodes/ada-xref.el (ada-xref-update-project-menu)
	(ada-add-ada-menu): Ditto.

2002-10-03  John Paul Wallington  <jpw@shootybangbang.com>

	* frame.el (delete-frame-hook): Variable alias for
	`delete-frame-functions'.  Mark obsolete.

2002-10-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-1, outline-2, outline-3, outline-4)
	(outline-5, outline-6, outline-7, outline-8): New faces.
	(outline-font-lock-faces, outline-font-lock-levels): New vars.
	(outline-font-lock-face): New fun.
	(outline-font-lock-keywords): Use it.
	(outline-font-lock-level): Remove.
	(outline-mode, outline-next-preface, outline-next-heading)
	(outline-previous-heading, outline-next-visible-heading):
	Use shy group.
	(outline-level) <var>: Update calling convention.
	(outline-level) <fun>: Take advantage of it.
	(outline-demote): Don't assume the match-data is still uptodate.
	(outline-up-heading): Simplify and make sure the match data is
	properly set at the end.

2002-10-02  Markus Rost  <rost@math.ohio-state.edu>

	* progmodes/sh-script.el (sh-alias-alist): Use append instead of
	nconc.

	* startup.el (normal-top-level): Reset standard-value property of
	`user-full-name' here.

2002-10-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-default-get): Change to return external
	value.
	(widget-choice-action): Update caller.
	(widget-editable-list-entry-create): Update caller.

	* wid-edit.el (widget-types-copy): New function.
	(default): Added :copy keyword.
	(menu-choice): Ditto.
	(checklist): Ditto.
	(radio-button-choice): Ditto.
	(editable-list): Ditto.
	(group): Ditto.
	(widget-copy): New function.
	(widget-create-child): Use it.
	(widget-create-child-value): Use it.

2002-10-01  Bill Wohler  <wohler@newt.com>

	* mail/mh-comp.el, mail/mh-e.el, mail/mh-funcs.el,
	mail/mh-mime.el, mail/mh-pick.el, mail/mh-seq.el,
	mail/mh-utils.el, mail/mh-xemacs-compat.el, mail/reply2.pbm,
	mail/reply2.xpm, toolbar/execute.pbm, toolbar/execute.xpm,
	toolbar/page-down.pbm, toolbar/page-down.xpm, toolbar/refile.pbm,
	toolbar/refile.xpm, toolbar/repack.pbm, toolbar/repack.xpm,
	toolbar/rescan.pbm, toolbar/rescan.xpm, toolbar/show.pbm,
	toolbar/show.xpm, toolbar/widen.pbm, toolbar/widen.xpm:
	Upgraded to mh-e version 6.1.1.  Full ChangeLog available in
	http://prdownloads.sourceforge.net/mh-e/mh-e-6.1.tgz?download .
	There were no user-visible changes in 6.1.1 from 6.1--only the
	section of the Makefile that installs the files into Emacs was changed.

2002-10-01  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-mode-find-file): Look up font-lock-face so it also
	works when font-lock is turned off.

	* jit-lock.el (jit-lock-fontify-now): Don't widen.
	Let the jit-lock-functions do it if they want to.

2002-10-01  Juanma Barranquero  <lektu@terra.es>

	* eshell/esh-module.el (eshell-load-defgroups):
	Add "no-byte-compile: t" to subdirs.el.

	* makefile.w32-in (update-subdirs-CMD): Likewise.

	* forms-d2.el:
	* forms-pass.el:
	* generic-x.el:
	* patcomp.el:
	* paths.el:
	* version.el:
	* international/mule-conf.el:
	* language/czech.el:
	* language/devanagari.el:
	* language/english.el:
	* language/georgian.el:
	* language/greek.el:
	* language/hebrew.el:
	* language/japanese.el:
	* language/korean.el:
	* language/lao.el:
	* language/misc-lang.el:
	* language/romanian.el:
	* language/slovak.el:
	* language/thai.el:
	* language/utf-8-lang.el:
	* emacs-lisp/cl-specs.el:
	* eshell/esh-maint.el:
	* mail/blessmail.el:
	* play/bruce.el:
	* term/apollo.el:
	* term/AT386.el:
	* term/bobcat.el:
	* term/internal.el:
	* term/iris-ansi.el:
	* term/keyswap.el:
	* term/linux.el:
	* term/lk201.el:
	* term/news.el:
	* term/vt102.el:
	* term/vt125.el:
	* term/vt200.el:
	* term/vt201.el:
	* term/vt220.el:
	* term/vt240.el:
	* term/vt300.el:
	* term/vt320.el:
	* term/vt400.el:
	* term/vt420.el:
	* term/wyse50.el: Add "no-byte-compile: t" in first line.

2002-10-01  Kenichi Handa  <handa@m17n.org>

	* international/utf-16.el: Don't provide utf-16.

	* international/utf-8.el (ccl-decode-mule-utf-8):
	Remove unnecessary line.

2002-09-30  Kenichi Handa  <handa@m17n.org>

	* language/thai.el (thai-tis620): Add `mime-charset' property.

	* language/indian.el: Don't register "ISO10646.*-1" in
	font-ccl-encoder-alist.

	* language/cyrillic.el (ccl-decode-koi8): Refer to
	ucs-translation-table-for-decode.
	(ccl-decode-koi8-u): Likewise.
	(ccl-decode-alternativnyj): Likewise.
	(cyrillic-koi8): Put `dependency' property.
	(koi8-u): Likewise.
	(cyrillic-alternativnyj): Likewise.

	* international/utf-8.el (ucs-mule-to-mule-unicode): Don't define
	this translation-table name here.
	(utf-translation-table-for-encode): New translation-table name.
	(utf-fragmentation-table): Renamed from utf-8-fragmentation-table.
	(utf-defragmentation-table): New variable.
	(ucs-mule-cjk-to-unicode): Renamed from utf-8-subst-rev-table.
	(utf-subst-table-for-encode): New translation-table name.
	(ucs-unicode-to-mule-cjk): Renamed from utf-8-subst-table.
	(utf-subst-table-for-decode): New translation-table name.
	(utf-fragment-on-decoding): Renamed from
	utf-8-fragment-on-decoding.  Correctly handle the case that
	unify-8859-on-encoding-mode is off.  Handle mule-utf-16-le and
	mule-utf-16-be too.
	(utf-translate-cjk): Renamed from utf-8-translate-cjk.
	Handle mule-utf-16-le and mule-utf-16-be too.
	(ccl-decode-mule-utf-8): Refer to utf-translation-table-for-decode
	and utf-subst-table-for-decode.
	(ccl-encode-mule-utf-8): Refer to utf-translation-table-for-encode
	and utf-subst-table-for-encode.
	(mule-utf-8): Fix `safe-charsets' property, put `dependency' property.

	* international/utf-8-subst.el: Setup ucs-unicode-to-mule-cjk and
	ucs-mule-cjk-to-unicode, not utf-8-subst-table and
	utf-8-subst-rev-table.

	* international/utf-16.el (utf-16-decode-ucs): Look up
	utf-subst-table-for-decode.  Fix for the case that the looking up
	succeeds.
	(ccl-decode-mule-utf-16-le): Translate characters by
	utf-translation-table-for-decode.
	(ccl-decode-mule-utf-16-be): Likewise.
	(ccl-encode-mule-utf-16-le): Look up utf-subst-table-for-encode
	at first.  Translate characters by utf-translation-table-for-encode.
	(ccl-encode-mule-utf-16-be): Likewise.
	(mule-utf-16-le, mule-utf-16-be): Add `dependency' property.

	* loadup.el: Preload international/utf-16.  Don't call ucs-unify-8859.

	* international/ucs-tables.el: Don't bind
	utf-8-translation-table-for-decode while setting up
	ucs-mule-8859-to-ucs-table, etc.  Add `dependency' property to
	iso-8859-* coding systems.
	(ucs-unify-8859): Arguments changed to FOR-ENCODE and FOR-DECODE.
	If FOR-DECODE is non-nil, make ucs-mule-8859-to-mule-unicode
	populate the translation table named
	ucs-translation-table-for-decode.  If FOR-ENCODE is non-nil, make
	ucs-mule-to-mule-unicode populates the translation table named
	utf-translation-table-for-encode.  Call register-char-codings for
	mule-utf-16-be and mule-utf-16-le too.
	(ucs-fragment-8859): Arguments changed to FOR-ENCODE and
	FOR-DECODE.  If FOR-DECODE is non-nil, make the translation table
	named ucs-translation-table-for-decode vacant.  If FOR-ENCODE is
	non-nil, make a proper char-table populates the translation table
	name utf-translation-table-for-encode.  Call register-char-codings
	for all mule-utf-* to reset their status to the original.
	(unify-8859-on-encoding-mode): Call ucs-unify-8859 and
	ucs-fragment-8859 with fixed arguments.  Set the version to 21.3.
	(unify-8859-on-decoding-mode): Likewise.  Remove dependency.
	(ccl-encode-unicode-font): Delete.
	(ucs-tables-unload-hook): Delete.

	* international/mule.el (decode-char): Refer to the translation
	hash table named utf-subst-table-for-decode.  Refer to the
	translation table named utf-translation-table-for-decode instead
	of utf-8-translation-table-for-decode.
	(encode-char): Refer to the translation hash table named
	utf-subst-table-for-encode.  Refer to the translation table named
	utf-translation-table-for-encode instead of
	utf-8-translation-table-for-encode.

	* international/mule-diag.el (describe-coding-system):
	Describe `dependency' property.

	* international/mule-conf.el (emacs-mule): Add property `composition'.

	* international/fontset.el (ucs-mule-to-mule-unicode): Define this
	translation table name here.
	(ucs-mule-cjk-to-unicode): New translation table name.
	(ccl-encode-unicode-font): Merge the code in ucs-tables.el.
	(font-ccl-encoder-alist): Change the font registry pattern to
	"ISO10646.*-*".

2002-09-30  Colin Walters  <walters@gnu.org>

	* calc/calc-stuff.el (calc-flush-caches): Add optional arg
	`inhibit-msg'.

	* calc/calc-prog.el (calc-kbd-report, calc-kbd-query): Don't bind
	`executing-kbd-macro' and `defining-kbd-macro'.

	* calc/calc-ext.el (calc-reset): Don't bind `executing-kbd-macro'.
	Call `calc-flush-caches' with inhibit-msg arg.
	(calc-change-mode): Remove extra arg for `calc-save-modes'.

	* calc/calc-mode.el (calc-save-modes): Remove `quiet' arg.
	Don't bind `executing-kbd-macro'.

2002-09-29  Noah Friedman  <friedman@splode.com>

	* subr.el (read-key): Use read-key-auxiliary-map, not read-key-aux-map.

2002-09-29  Richard M. Stallman  <rms@gnu.org>

	* startup.el (user-mail-address): Initialize to a useful value
	once Emacs is started up; initialize to "" at loadup time.
	(command-line): "", not nil, means user-mail-address not set yet.

2002-09-29  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.24 released.
	(tramp-methods, tramp-completion-function-alist):
	Rename "*-old" methods to "*_old".  From Michael Albinus.
	(tramp-completion-function-alist):
	Use `tramp-completion-function-alist-ssh' for the "fcp" method.
	From Michael Albinus.
	(tramp-default-method-alist): Use "su" for "root@localhost".
	(tramp-host-regexp): Allow "#" for "host#port" kludge.
	(tramp-ange-ftp-file-name-p): If METHOD is nil, find the right
	default method.  Require additional args USER and HOST for this.
	Callers changed.
	(tramp-handle-file-local-copy): More local bindings.  Bind results
	of tramp-get-{remote,local}-{de,en}coding earlier to avoid nasty
	"are you awake" problem.
	(tramp-action-password): Protect against clobbered match data.
	(tramp-open-connection-setup-interactive-shell): Explicitly set
	tramp-last-cmd-time before invoking tramp-send-command the first
	time.  Otherwise, tramp-send-command would issue "echo are you
	awake" right at the first time, which is not what we want.
	Reported by Douglas Gray Stephens.
	(tramp-find-inline-encoding): Don't redirect stdout to
	/dev/null to avoid "chmode go-rwx" operation from "mimencode
	>/dev/null" as root(!), and to check the output of the decoding
	command.
	(tramp-maybe-open-connection): Don't send "are you awake" if
	process has died.

2002-09-29  Colin Walters  <walters@gnu.org>

	* calc/calc.el (calc-dispatch-map): Actually set to keymap.

2002-09-29  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-guess-indent): Handle tabs correctly.

2002-09-29  Richard M. Stallman  <rms@gnu.org>

	* custom.el (defcustom): Doc fix.

2002-09-28  Richard M. Stallman  <rms@gnu.org>

	* loadhist.el (unload-feature): When undefining a variable,
	delete its buffer-local bindings.

2002-09-28  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* subr.el (remove-yank-excluded-properties): Fix bugs in
	handling of category properties.

2002-09-28  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el (ps-print-emacs-type): Error if ps-print is
	activated in Epoch, inLucid or in Emacs v19 or lesser.
	Value can no longer be `lucid'.
	(ps-print-version): New version number (6.5.8).
	(faces): Never do (require 'faces).

2002-09-28  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-via-smtp): Only negotiate STARTTLS on
	streams that were opened using STARTTLS.

2002-09-28  Paul Reilly  <pmr@pajato.com>

	* files.el (auto-mode-alist): Add support for Java Enterprise
	ARchive (ear/EAR) and Web ARchive (war/WAR) files.

2002-09-28  John Paul Wallington  <jpw@shootybangbang.com>

	* progmodes/m4-mode.el (m4-font-lock-keywords)
	(m4-mode-syntax-table, m4-mode-abbrev-table, m4-m4-buffer)
	(m4-m4-region): Doc fixes.

2002-09-27  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl-macs.el: Use the new usage-in-docstring syntax.
	(cl-push, cl-pop): Remove.
	Use pop and push throughout the file instead.
	(cl-transform-lambda): Add usage info to docstring if the arglist
	is complex.

	* emacs-lisp/autoload.el (make-autoload): Add usage info to docstring.
	(autoload-print-form): Also quote open-[-in-column 0.

	* help-fns.el (help-with-tutorial): Use minibuffer-completion-help.
	(help-split-fundoc): Don't support old syntax any more.
	(help-add-fundoc-usage): New fun.

	* emacs-lisp/cl-extra.el (cl-push, cl-pop): Remove.
	Use pop and push throughout the file instead.
	(cl-hash-lookup): Remove.
	(cl-make-hash-table, cl-hash-table-p, cl-gethash, cl-puthash)
	(cl-remhash, cl-clrhash, cl-maphash, cl-hash-table-count): Simplify.

	* emacs-lisp/cl-seq.el (cl-push, cl-pop): Remove.
	Use pop and push throughout the file instead.

	* emacs-lisp/edebug.el: Don't precompute menu shortcuts during
	loading since the current keymaps might be all weird.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Don't add properties
	to the name since they're added by mode-line-format already.
	(define-minor-mode): Run (,mode -1) when needed.

	* tar-mode.el (tar-untar-buffer): Handle dir-entries.
	(tar-summarize-buffer, tar-mode, tar-extract, tar-copy, tar-expunge)
	(tar-alter-one-field, tar-subfile-save-buffer, tar-mode-write-file):
	Don't hardcode 1 == point-min.

	* abbrev.el (write-abbrev-file): Don't hardcode point-min == 1.

	* subr.el (read-key-auxiliary-map): New var.
	(read-key): Use it.
	(make-temp-file): Make the file have mode 600.
	(add-minor-mode): Don't add properties to the name since it's
	added by mode-line-format already.
	Be more careful with the mode-line-menu entry name.

	* userlock.el (ask-user-about-supersession-threat): Don't abort
	when the user hits mouse-2.

	* register.el (set-register): Use push.
	(point-to-register): Set kill-buffer-hook in this buffer.
	(register-swap-out): Use dolist.
	(kill-buffer-hook): Don't change globally.

	* server.el (server-select-display): New function.
	(server-process-filter): Add support for `-display' and `-eval' args.
	(server-visit-files): Use save-current-buffer, push, and dolist.
	Add server-kill-buffer to kill-buffer-hook.
	(kill-buffer-hook): Don't modify globally.
	(server-switch-buffer): Be a bit more careful with multiple displays.
	(server-socket-name): Always use /tmp and non-qualified hostname.

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Add to kill-buffer-hook for buffers with conflict.
	(rename-buffer): Check kill-buffer-hook to see if there was a conflict.
	(uniquify-delay-rationalize-file-buffer-names): Remove useless check.
	(kill-buffer-hook): Don't change globally.

2002-09-27  Stefan Monnier  <monnier@cs.yale.edu>

	* calc/calc.el (calc-bug-address, calc-scan-for-dels, calc-stack)
	(calc-stack-top, calc-always-load-extensions)
	(calc-line-numbering, calc-line-breaking, calc-display-just)
	(calc-display-origin, calc-number-radix, calc-leading-zeros)
	(calc-group-digits, calc-group-char, calc-point-char)
	(calc-frac-format, calc-prefer-frac, calc-hms-format)
	(calc-date-format, calc-float-format, calc-complex-format)
	(calc-full-float-format, calc-complex-mode, calc-infinite-mode)
	(calc-display-strings, calc-matrix-just, calc-break-vectors)
	(calc-full-vectors, calc-full-trail-vectors, calc-vector-commas)
	(calc-vector-brackets, calc-matrix-brackets, calc-language)
	(calc-language-option, calc-function-open, calc-function-open)
	(calc-function-close, calc-language-output-filter)
	(calc-language-input-filter, calc-radix-formatter)
	(calc-left-label, calc-right-label, calc-word-size)
	(calc-previous-modulo, calc-simplify-mode, calc-auto-recompute)
	(calc-display-raw, calc-internal-prec, calc-inverse-flag)
	(calc-hyperbolic-flag, calc-keep-args-flag, calc-angle-mode)
	(calc-algebraic-mode, calc-incomplete-algebraic-mode)
	(calc-symbolic-mode, calc-matrix-mode, calc-shift-prefix)
	(calc-window-height, calc-display-trail, calc-show-selections)
	(calc-use-selections, calc-assoc-selections)
	(calc-display-working-message, calc-auto-why, calc-timing)
	(calc-display-sci-high, calc-display-sci-low, calc-other-modes)
	(calc-other-modes, calc-Y-help-msgs, calc-loaded-settings-file):
	Make into real defvars.
	(calc-mode-var-list): Delete.
	(calc-mode-save-mode, calc-standard-date-formats)
	(calc-autorange-units, calc-was-keypad-mode, calc-full-mode)
	(calc-user-parse-tables, calc-gnuplot-default-device)
	(calc-gnuplot-default-output, calc-gnuplot-print-device)
	(calc-gnuplot-print-output, calc-gnuplot-geometry)
	(calc-graph-default-resolution, calc-graph-default-resolution-3d)
	(calc-invocation-macro, calc-show-banner): Make into defvars,
	taken from `calc-mode-var-list'.
	(calc-emacs-type-epoch, calc-emacs-type-19)
	(calc-emacs-type-lucid, calc-emacs-type-gnu19): Make into defvars.
	(calc-version, calc-version-date, calc-trail-pointer)
	(calc-trail-overlay, calc-undo-list, calc-redo-list)
	(calc-main-buffer, calc-trail-buffer, calc-why, calc-next-why)
	(calc-inverse-flag, calc-hyperbolic-flag, calc-keep-args-flag)
	(calc-last-kill, calc-previous-alg-entry, calc-dollar-values)
	(calc-dollar-used, calc-hashes-used, calc-quick-prev-results)
	(calc-said-hello, calc-executing-macro, calc-any-selections)
	(calc-help-phase, calc-full-help-flag, calc-refresh-count)
	(calc-display-dirty, calc-prepared-composition)
	(calc-selection-cache-default-entry, calc-embedded-info)
	(calc-embedded-active, calc-standalone-flag, var-EvalRules)
	(math-eval-rules-cache-tag, math-radix-explicit-format)
	(math-expr-function-mapping, math-expr-variable-mapping)
	(math-read-expr-quotes, math-working-step, math-working-step-2)
	(var-i, var-pi, var-e, var-phi, var-gamma, var-Modes): Make into
	defvars, from toplevel setq.
	(calc-mode-map): Set up keymap in more modern fashion.
	(calc-dispatch-map): Ditto.
	(calc-command-flags, calc-final-point-line)
	(calc-final-point-column): Defvar.
	(calc-do): Use `save-current-buffer' instead of `save-excursion'.
	(sel-mode): Defvar.
	(calc-any-evaltos): Ditto.
	(calc-buffer, calc-prev-char, calc-prev-prev-char)
	(calc-digit-value): Ditto.
	(math-eval-rules-cache, math-eval-rules-cache-other): Ditto.
	(math-sub-bignum): Bind `diff'.
	(calc-selection-cache-entry): Defvar.
	(calc-count-lines): Reference `pos' instead of `newpos'.

2002-09-27  Simon Josefsson  <jas@extundo.com>

	* mail/mail-hist.el (mail-hist-next-input): Fix docstring.

2002-09-26  Richard M. Stallman  <rms@gnu.org>

	* mail/unrmail.el (unrmail): Do the work directly,
	without actually selecting the messages in the from file.
	(unrmail-unprune): New subroutine.

	* files.el (backup-buffer): Bind local var MODES.
	Don't use renaming for a suid or sgid file.
	Use backup-buffer-copy to do copying.
	(backup-buffer-copy): New subroutine.
	Clear suid and sgid bits for the copy.

2002-09-26  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* calendar/solar.el (solar-equinoxes-solstices):
	Use time properly adjusted for DST in the result.

2002-09-26  Richard M. Stallman  <rms@gnu.org>

	* follow.el (follow-generic-filter): Simply bind deactivate-mark.
	Bind inhibit-read-only; don't mess with buffer-read-only.

	* speedbar.el (speedbar-refresh): Simply bind deactivate-mark.

2002-09-26  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* ielm.el (inferior-emacs-lisp-mode): Treat the header as
	output, if comint-use-prompt-regexp-instead-of-fields is nil.

2002-09-26  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-update): Call `minibufferp' with argument
	instead of within `with-current-buffer'.

2002-09-26  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-completions): Test that
	iswitchb-common-match-string is a string, before printing common
	completions.

2002-09-25  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el: Use built-in network primitives.
	(server-program, server-previous-string): Remove.
	(server-previous-strings): New var.
	(server-socket-name): New var.
	(server-log): Minor change to the output format.
	(server-sentinel): Clean up global state when a client disconnects.
	(server-unquote-arg): New fun.
	(server-start): Use server-socket-name and make-network-process.
	(server-process-filter): Now talks to the clients directly.
	Normalize file name after unquoting and decoding.
	(server-buffer-done): Just close the connection.
	(server-switch-buffer): Handle the case where all windows are
	dedicated or minibuffers.

	* font-lock.el (fast-lock-mode, lazy-lock-mode, jit-lock-mode):
	Don't bind them variables.
	(font-lock-turn-off-thing-lock, font-lock-after-fontify-buffer)
	(font-lock-after-unfontify-buffer): Check that the vars are bound.
	(font-lock-dont-widen): New var.
	(font-lock-default-fontify-region): Use it.

	* emacs-lisp/find-func.el (find-library-name):
	Correctly find "file.el.gz" from "file.elc" or "file.elc.gz".

2002-09-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Handle safe but rejected default coding systems and unsafe default
	coding systems differently.

	* international/mule-diag.el (list-character-sets): Use the buffer
	name "*Character Set List*", not "*Help*".  List also indirectly
	supported character sets.
	(list-charset-chars): Use the buffer name "*Character List*", not
	"*Help*".  Display the current charset name in the modeline.
	(non-iso-charset-alist): Add mapped charset list for `mac-roman'.
	(sort-listed-character-sets): Don't alter the region showing
	indirectly supported charsets.

2002-09-24  Simon Josefsson  <jas@extundo.com>

	* mail/mail-extr.el (mail-extr-ignore-single-names): Change default.
	(mail-extract-address-components): Doc fix.

2002-09-24  Markus Rost  <rost@math.ohio-state.edu>

	* simple.el (edit-and-eval-command): Protect command-history.
	(repeat-complex-command): Protect command-history.

2002-09-24  Juanma Barranquero  <lektu@terra.es>

	* replace.el (occur-find-match): New function.
	(occur-next, occur-prev): Use it.

	* progmodes/sh-script.el (sh-mark-init): Don't set `occur-buffer'.
	(sh-mark-line): Likewise.  Use 'occur-target and 'occur-match
	instead of 'occur and 'occur-point.

	* eshell/em-unix.el (eshell-occur-mode-mouse-goto)
	(eshell-poor-mans-grep): Remove references to `occur-buffer'.

2002-09-24  Stefan Monnier  <monnier@cs.yale.edu>

	* descr-text.el (describe-text-category): Use *Help*.
	Don't kill-buffer.
	(describe-text-properties, describe-char):
	Delay self-inspection test.  Use *Help*.
	Use syntax-after.  Use `pos' rather than (point).
	Distinguish the before/after part of a composition.

2002-09-23  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-completion): Be sure to scroll
	quail-completion-buf.

2002-09-23  Richard M. Stallman  <rms@gnu.org>

	* ielm.el (*1): Fix previous change.

2002-09-23  Juanma Barranquero  <lektu@terra.es>

	* net/tramp.el (tramp-unified-filenames): Autoload it.

2002-09-23  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-init.el (ediff-get-next-window): Bug fix.

2002-09-22  Oliver Scholz  <alkibiades@gmx.de>

	* play/gamegrid.el (gamegrid-face): New variable to emulate a
	buffer-local default face.
	(gamegrid-xbm): New variable; XBM image as a replacement for
	`gamegrid-xpm' on Emacsen compiled without XPM-support.
	(gamegrid-colorize-glyph): Ported XEmacs-code for the generation
	of images to Emacs.
	(gamegrid-match-spec): Call `gamegrid-make-image-from-vector' to
	convert XEmacs-type image descriptors.
	(gamegrid-color-display-p): Remove (use `display-colors-p' instead.)
	(gamegrid-make-image-from-vector): New function.  Convert XEmacs'
	image descriptors.
	(gamegrid-display-type): Use Emacs' standard `display-.*-p'
	functions to check for display capabilities.  Fix the recognition
	of image-support in Emacs 21 by this way.
	(gamegrid-hide-cursor): Removed.
	(gamegrid-setup-default-font): Ported the code from XEmacs to
	Emacs: create a new face and assign the variable `gamegrid-face'
	to it.  Make sure that the face is not higher than the smallest
	image used by the game.
	(gamegrid-initialize-display): Use `(setq cursor-type nil)'
	instead of `gamegrid-hide-cursor'.
	(gamegrid-set-face): If `gamegrid-display-mode' is 'glyph, put an
	image in the buffer, instead of applying a face.  [This is because
	Emacs display-tables are not as capable as the display-tables in
	XEmacs.  Maybe this function should be renamed to reflect the change?]
	(gamegrid-init-buffer): If `gamegrid-display-mode' is 'glyph, put
	the face held by `gamegrid-face' in an overlay over the whole
	buffer to emulate a buffer-local default-face.

2002-09-22  Markus Triska  <triska@gmx.at>  (tiny change)

	* play/doctor.el (doctor-doc): Add 2 question words.
	(doctor-getnoun): Parse and save the complete object phrase.

2002-09-22  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system): Cope if
	default-coding-system gives nil which was then used in `min'.

	* mail/sendmail.el (sendmail-send-it): If user's buffer
	is unibyte, make tembuf unibyte.

2002-09-22  Kai Großjohann  <grossjoh@ls6.informatik.uni-dortmund.de>

	* net/tramp.el: Version 2.0.22 released.
	(tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd): Apply `push' but
	`add-to-list' for performance reasons.
	(tramp-get-completion-user-host): Return `nil' in case both `user'
	and 'host' are empty (not necessarily `nil'.
	(tramp-parse-netrc, tramp-parse-netrc-group): New functions.
	(tramp-user-regexp): " \t" are not user regexp characters.
	(tramp-completion-handle-file-name-all-completions):
	Remove Ange-FTP completion.  It has a bug not handling the "/ftp:"
	prefix completely, and it returns local completions as well.
	(tramp-completion-function-alist-ftp): New constant.
	(tramp-completion-function-alist): Add completion function for "ftp".
	From Michael Albinus <Michael.Albinus@alcatel.de>.

2002-09-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.21 released.
	(tramp-handle-file-newer-than-file-p): If mtime of both files is
	known, return a useful result.  Better error message in case one
	is a Tramp file and one isn't.
	(tramp-handle-file-local-copy, tramp-handle-write-region)
	(tramp-find-shell, tramp-open-connection-telnet)
	(tramp-open-connection-rsh, tramp-open-connection-su)
	(tramp-open-connection-setup-interactive-shell)
	(tramp-post-connection, tramp-maybe-open-connection)
	(tramp-method-out-of-band-p): Correct number of args for
	`tramp-get-rsh-program' and similar functions.

2002-09-22  Kai Großjohann  <grossjoh@ls6.informatik.uni-dortmund.de>

	* net/tramp.el: Version 2.0.20 released.

2002-09-20  Kai Großjohann  <grossjoh@ls6.informatik.uni-dortmund.de>

	* net/tramp.el (tramp-completion-function-alist): Escape open
	paren in docstring.
	(tramp-user-regexp, tramp-host-regexp): Allow empty strings.
	(tramp-handle-insert-file-contents): Call tramp-message-for-buffer
	instead of tramp-message.
	(tramp-open-connection-rsh): Handle empty string as user name.
	(tramp-open-connection-su): Handle empty string as host name.
	Handle nil user name.
	(tramp-handle-file-local-copy, tramp-handle-write-region)
	(tramp-completion-handle-file-name-all-completions)
	(tramp-open-connection-telnet, tramp-open-connection-rsh)
	(tramp-open-connection-su, tramp-post-connection)
	(tramp-maybe-open-connection, tramp-method-out-of-band-p)
	(tramp-get-connection-function, tramp-get-remote-sh)
	(tramp-get-rsh-program, tramp-get-rsh-args)
	(tramp-get-rcp-program, tramp-get-rcp-args)
	(tramp-get-rcp-keep-date-arg, tramp-get-su-program)
	(tramp-get-su-args, tramp-get-telnet-program)
	(tramp-get-telnet-args): Use `tramp-find-method', perhaps require
	additional args USER, HOST.
	(tramp-action-password, tramp-open-connection-telnet)
	(tramp-open-connection-su, tramp-open-connection-multi)
	(tramp-method-out-of-band-p): `tramp-method-out-of-band-p' now
	takes USER and HOST arguments, to be able to use
	`tramp-find-method'.  Update callers.
	(tramp-find-method): New function.

2002-09-20  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-handle-insert-directory): Handle "--dired"
	in SWITCHES (by removing it).

2002-09-18  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-file-name-handler): Add `file-remote-p' property.

2002-09-17  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (top-level): Maybe autoload uudecode-decode-region.

2002-09-16  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-bug): Add tramp-methods.

2002-09-16  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-methods): Update docstring:
	tramp-encoding-command, tramp-decoding-command,
	tramp-encoding-function and tramp-decoding-function are not
	parameters anymore.
	(tramp-uuencode-region): Autoload it.

2002-09-13  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.19 released.

	* net/tramp-uu.el: New file, implements uuencode in Lisp.

	* net/tramp.el (tramp-coding-commands):
	Use `tramp-uuencode-region' as local encoder for the uuencode based
	entries.

2002-09-13  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-handle-write-region): Wrong parens.

2002-09-13  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.18 released.

	* net/tramp.el (tramp-perl-decode): Perl changes to accommodate
	older versions of Perl.  Now tested with 5.004.  Suggestion from
	Michael Albinus.

2002-09-12  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-find-inline-encoding):
	Call tramp-call-local-coding-command with nil for INPUT and OUTPUT.
	(tramp-call-local-coding-command): OUTPUT equals nil means to
	discard the output.  INPUT equals nil means /dev/null.

2002-09-12  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-encoding-shell): Default to environment
	variable COMSPEC on Windows.
	(tramp-handle-write-region): More debugging output.
	(tramp-find-inline-encoding): Ditto.

2002-09-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

2002-09-11  Kai Großjohann  <grossjoh@ls6.informatik.uni-dortmund.de>

	* net/tramp.el (tramp-post-connection): Only send Perl
	mime-encode/decode implementations when using inline method.
	(tramp-handle-file-local-copy)
	(tramp-handle-write-region, tramp-post-connection)
	(tramp-coding-commands, tramp-find-inline-encoding): For the
	inline encodings, distinguish between local and remote commands,
	instead of between commands and functions.  (The local commands
	can be functions, too.)  If the local host is a Windows machine,
	we can't expect the same commands to work there as on the remote host.
	(tramp-call-local-coding-command): New function for calling local
	encoding and decoding commands.
	(tramp-set-remote-encoding, tramp-get-remote-encoding)
	(tramp-set-remote-decoding, tramp-get-remote-decoding)
	(tramp-set-local-encoding, tramp-get-local-encoding)
	(tramp-set-local-decoding, tramp-get-local-decoding): New functions.
	(tramp-get-encoding-command, tramp-set-encoding-command)
	(tramp-get-decoding-command, tramp-set-decoding-command)
	(tramp-get-encoding-function, tramp-set-encoding-function)
	(tramp-get-decoding-function, tramp-set-decoding-function):
	Old functions, removed.

2002-09-10  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-open-connection-setup-interactive-shell):
	Change command to invoke /bin/sh slightly to make it compatible
	with the `rc' shell.  Suggested by Daniel Pittman.

2002-09-10  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-handle-write-region): Added missing
	`)'.  Hope it's the right place.

2002-09-09  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-open-connection-setup-interactive-shell):
	Do "exec env PS1='$ ' /bin/sh" instead of just "exec /bin/sh" in
	order to get a sane shell prompt.  If people have ${CWD}, say, in
	their shell prompt, then the default login shell might display
	something harmless, but the /bin/sh will display a dollar sign
	which confused the subsequent prompt recognition.
	(tramp-multi-action-password): More debugging output.
	(tramp-encoding-shell): Renamed from tramp-sh-program.
	More documentation.  Default to cmd.exe on Windows NT.
	(tramp-encoding-command-switch): New variable.  Use instead of
	hard-wired "-c" which is only good for /bin/sh.
	(tramp-encoding-reads-stdin): New variable.  If t, commands are
	called like "/bin/sh -c COMMAND <INPUT", if nil, they are called
	like "/bin/sh -c COMMAND INPUT", ie the input file is the last arg.
	(tramp-multi-sh-program): Always default to tramp-encoding-shell.
	(tramp-handle-file-local-copy, tramp-handle-write-region):
	Respect tramp-encoding-shell and friends.
	(tramp-find-inline-encoding): Use new-style calls for checking if
	the local commands work.

2002-09-07  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-methods): Remove `tramp-completion-function'
	entries.  They are handled now by `tramp-completion-function-alist'.
	(tramp-completion-function): Defvar removed.  I've never used it.  Hmm.
	(tramp-get-completion-function)
	(tramp-get-completion-rsh, tramp-get-completion-ssh)
	(tramp-get-completion-telnet, tramp-get-completion-su):
	Functions removed as well.  Not necessary any longer due to extended
	customization means.
	(tramp-completion-function-alist): New defcustom.  Holds all
	FUNCTION FILE pairs used for user and host name completion
	relevant for METHOD.
	(tramp-completion-function-alist-rsh)
	(tramp-completion-function-alist-ssh)
	(tramp-completion-function-alist-telnet)
	(tramp-completion-function-alist-su): Defconst for initializing
	`tramp-completion-function-alist'.  Unfortunately, mainly UNIX-like
	values are known for me until now.  Needs to be completed for at
	least VMS++ like operating systems.
	(tramp-set-completion-function)
	(tramp-get-completion-function): New functions for configuration
	of `tramp-completion-function-alist'.  The old definition of
	`tramp-get-completion-function' has been discarded.
	(tramp-completion-handle-file-name-all-completions):
	Change function call for user/host completion according to definition
	in `tramp-completion-function-alist'.
	(tramp-parse-passwd): Added exception handling for "root", because
	`tramp-get-completion-su' (the previous place for this stuff)
	doesn't exist any longer.

2002-09-07  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-enter-password):
	Use `tramp-password-end-of-line' to terminate the line.
	(tramp-bug): Include new variable `tramp-password-end-of-line'.
	(tramp-password-end-of-line): New variable.  People who use plink
	under Windows might have to issue "\r\n" after the password, but
	they need to send just "\n" after the other commands.  So this
	variable was introduced to complement `tramp-rsh-end-of-line'.
	(tramp-wait-for-output, tramp-post-connection): Allow "\r" at end
	of line of the output delimiter.

2002-09-06  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-handle-file-local-copy, tramp-find-shell)
	(tramp-open-connection-setup-interactive-shell): Add some comments
	about Douglas Grey Stephen's suggestions to make Tramp work better
	with plink under Windows.  I'm not sure what to think of them, but
	now I have a guinea pig to try it out on.  Said guinea pig is
	having other problems, though...  Also remove some commented-out code.

2002-09-06  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-get-completion-methods): Algorithm slightly
	tuned.
	(tramp-get-completion-user-host): Accept user names as they are if
	typed until "@".
	(tramp-completion-mode): Replace `last-input-char' by modern
	`last-input-event'.  Check for `event-modifiers'.

2002-09-06  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (file-expand-wildcards): Corrected check to see if
	advising is necessary.

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-postfix-single-method-format)
	(tramp-postfix-multi-method-format)
	(tramp-postfix-multi-hop-format)
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-postfix-user-regexp)
	(tramp-make-multi-tramp-file-format)
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-prefix-format)
	(tramp-postfix-host-format): New format strings.
	(tramp-prefix-regexp, tramp-method-regexp)
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-user-regexp, tramp-postfix-user-regexp)
	(tramp-host-regexp, tramp-postfix-host-regexp)
	(tramp-path-regexp): New atomar regular expressions.
	If corresponding format strings exist, derived from them.
	(tramp-file-name-structure)
	(tramp-multi-file-name-structure)
	(tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format)
	(tramp-completion-mode)
	(tramp-completion-dissect-file-name)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group)
	(tramp-parse-hosts-group)
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate)
	(tramp-make-tramp-file-format-unified)
	(tramp-make-tramp-file-format-separate)
	(tramp-make-tramp-file-format)
	(tramp-make-tramp-file-user-nil-format-unified)
	(tramp-make-tramp-file-user-nil-format-separate)
	(tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure-unified)
	(tramp-multi-file-name-structure-separate)
	(tramp-multi-file-name-hop-structure-unified)
	(tramp-multi-file-name-hop-structure-separate)
	(tramp-make-multi-tramp-file-format-unified)
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names.  Generate tramp file format on-the-fly depending on
	parameters.  Apply atomar format strings resp expressions.
	(tramp-get-completion-methods)
	(tramp-get-completion-user-host): Apply `tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-methods): Add `tramp-completion-function'
	for "su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts)
	(tramp-parse-hosts-group)
	(tramp-get-completion-su)
	(tramp-parse-passwd)
	(tramp-parse-passwd-group): New functions.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganized.
	(tramp-completion-handle-file-name-all-completions):
	Call completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-file-name-handler-alist):
	Add handler for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and `ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group): Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-get-completion-methods)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Add "[" for XEmacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler)
	(tramp-completion-handle-file-name-all-completions):
	Apply `tramp-completion-run-real-handler'.
	(tramp-parse-rhosts)
	(tramp-parse-shosts): Use `with-temp-buffer'.  `result' renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist)
	(tramp-flatten-list)
	(tramp-completion-dissect-file-name)
	(tramp-get-completion-rsh)
	(tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added.  Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.

2002-08-18  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts)
	(tramp-parse-shosts-group): New functions.

2002-08-17  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-dissect-file-name)
	(tramp-completion-dissect-file-name1): New functions.

2002-08-16  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-get-completion-function)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh)
	(tramp-get-completion-telnet): New functions.
	(tramp-methods): Add `tramp-completion-function' for all methods.

2002-08-15  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-get-completion-methods): New function.
	(tramp-find-default-method): Allow host to be nil (like user).

2002-08-14  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-completion-file-name-regexp-unified)
	(tramp-completion-file-name-regexp-separate)
	(tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist): New defcustoms.
	(tramp-completion-file-name-handler): New function.
	Add `tramp-completion-file-name-handler' to `file-name-handler-alist'.
	(tramp-run-real-handler): Add `tramp-completion-file-name-handler'
	to `inhibit-file-name-handlers'.
	(tramp-completion-handle-file-name-all-completions)
	(tramp-completion-handle-file-name-completion): New functions.

2002-08-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-invoke-ange-ftp): `tramp-disable-ange-ftp'
	must be called again after activating `ange-ftp'.
	(tramp-ange-ftp-file-name-p): Check for XEmacs.

2002-08-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* net/tramp.el (tramp-do-copy-or-rename-file): Don't pass
	KEEP-DATE to tramp-invoke-ange-ftp 'rename.
	(tramp-handle-write-region): Don't pass LOCKNAME and CONFIRM to
	tramp-invoke-ange-ftp 'write-region.
	(tramp-handle-set-file-modes): Change order of FILENAME and MODE
	passing to tramp-invoke-ange-ftp 'set-file-modes.
	(tramp-flatten-list): New function.  Maybe this functionality does
	exist already elsewhere in the libraries.
	(tramp-invoke-ange-ftp): Apply `tramp-flatten-list' to parameter
	list in order to avoid nested lists, f.e. when invoked from
	`tramp-handle-dired-call-process'.

2002-09-05  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-chunksize): New kluge variable.
	(tramp-send-region): If tramp-chunksize is non-nil, send region in
	parts and sleep 0.1 seconds between chunks.

2002-09-03  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-handle-insert-directory):
	Use `insert-buffer-substring' instead of `insert-buffer', which is not
	supposed to be used from Lisp.  Remember old point in a variable
	instead of using `mark'.  Suggestion from Stefan Monnier.
	(tramp-unified-filenames): New variable.  Use it in default value
	of other filename variables.
	(file-expand-wildcards): Don't advise unless "[" and "]" are used
	in the filename format.

2002-09-01  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-methods): Remove duplicate definition of
	ssh1-old and ssh2-old.

2002-09-22  Kai Großjohann  <grossjoh@ls6.informatik.uni-dortmund.de>

	* dired.el (dired-insert-directory): Always add "--dired" to
	SWITCHES for remote files.
	* files.el (insert-directory): Comment saying that "--dired"
	might be in the SWITCHES.
	* net/ange-ftp.el (ange-ftp-ls): Handle "--dired" in LSARGS.
	(ange-ftp-insert-directory): Comment explaining "--dired" handling.

2002-09-21  Markus Rost  <rost@math.ohio-state.edu>

	* mail/mailabbrev.el (mail-abbrev-make-syntax-table): Give %!._-
	word constituent syntax.

2002-09-21  Richard M. Stallman  <rms@gnu.org>

	* cus-dep.el (custom-make-dependencies): Bind to t
	around evaluating the def-form.

	* custom.el (custom-dont-initialize): New variable.
	(custom-declare-variable): Don't init the variable
	if custom-dont-initialize is non-nil.

2002-09-21  John Paul Wallington  <jpw@shootybangbang.com>

	* net/eudc.el (eudc-install-menu): Use `define-key' and
	`easy-menu-create-menu' to avoid duplication of menu.

2002-09-20  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-step-edit-query): Use RET to execute rest of
	macro and terminate editing.
	(kmacro-step-edit-macro): Push previous macro onto ring if changed
	by step editing.

2002-09-19  Tom Tromey  <tromey@redhat.com>

	* play/blackbox.el (bb-right): Respect prefix argument.
	(bb-left, bb-up, bb-down): Likewise.

2002-09-19  Richard M. Stallman  <rms@gnu.org>

	* cus-dep.el (custom-make-dependencies): Fix previous change.

2002-09-19  Juanma Barranquero  <lektu@terra.es>

	* ielm.el (ielm-eval-input): Call `error-message-string' instead
	of the non-existent `ielm-format-error'.

2002-09-19  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-remove):
	* emacs-lisp/ewoc.el (ewoc--node-branch): Add docstring.

	* international/mule-diag.el (describe-coding-system):
	Remove unused `coding-spec' variable.
	(list-input-methods): Be more careful when setting up the help buffer.

	* international/ucs-tables.el (unify-8859-on-encoding-mode):
	Set init value to t to reflect reality.
	(ucs-minibuffer-setup): Use minibuffer-selected-window.

2002-09-18  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/make-mode.el (makefile-cleanup-continuations-p):
	Rename to makefile-cleanup-continuations.
	(makefile-mode): Use write-file-functions.
	(makefile-fill-paragraph): Use match-string-no-properties.
	(makefile-fill-paragraph): Use line-end-position.
	(makefile-add-log-defun): Simplify.

2002-09-18  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-mark-pop-up): Doc fix.

	* ediff-hook.el (ediff-cond-compile-for-xemacs-or-emacs): Put the
	definition straight into loaddefs.el as well as executing it here.

2002-09-18  Colin Walters  <walters@debian.org>

	* calc/calc.el (calc-mode): Add font-lock-defontify to
	change-major-mode-hook.

2002-09-18  Richard M. Stallman  <rms@gnu.org>

	* Makefile.in (bootstrap-clean): Use cd to shorten arg strings.
	Don't ignore errors in rm line.

	* menu-bar.el (menu-bar-search-menu): Nicer help string.

	* replace.el (occur-engine-add-prefix): Use 7 spaces.
	(occur-engine): Use 7 digits to align tabs in the data.

	* emacs-lisp/bytecomp.el (byte-compile-output-docform):
	Don't make the definition dynamic if it shares structure
	with the arg list.

	* gud.el (gud-pdb-marker-regexp): Allow : and \ in file name.
	(pdb): In gud-remove, pass down the file name.

	* cus-dep.el (custom-make-dependencies): Sort MEMBERS before use.

2002-09-18  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* ielm.el (*1, *2, *3): New variables.
	(ielm-eval-input): Make temporary buffers current on entry and
	exit to the let bindings for *, ** and ***.
	(inferior-emacs-lisp-mode): Mention *1, *2 and *3 in the docstring.
	Do not overrule global bindings for *, ** and ***.

2002-09-18  Tom Tromey  <tromey@redhat.com>

	* progmodes/make-mode.el (makefile-fill-paragraph): Find comment
	boundaries before filling.

2002-09-18  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-done): Fix harmlessly wrong arg to save-buffer.
	(server-switch-buffer): Only select a different window if
	next-buffer is non-nil.  Don't switch in a dedicated window.
	If next-buffer is already displayed, reuse that window.

	* diff-mode.el (diff-mode): Use compilation-minor-mode.
	Don't unbind compilation-last-buffer after autoloading compile.el.
	Hide the compilation-minor-mode bindings altogether.

2002-09-18  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* dired.el (dired-insert-directory): Never add "--dired" when
	listing remote directories.

2002-09-18  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-hooks.el: Put back the autoloads (for XEmacs compatibility).

	* ediff-init.el: Use defalias instead of fset.

	* ediff-util.el: Use defalias instead of fset.

	* viper-util.el (viper-chars-in-region): Simplification.

	* viper.el (viper-emacs-state-mode-list): Added modes.

2002-09-18  Jonathan Yavner  <jyavner@engineer.com>

	* emacs-lisp/testcover.el: New file.  Uses edebug to instrument a
	module of code, with graphical display of poor-coverage spots.

	* emacs-lisp/testcover-ses.el: New file.  Demonstrates use of
	testcover on a interactive module like ses.

	* emacs-lisp/testcover-unsafep.el: New file.  Demonstrates use of
	testcover on a noninteractive module like unsafep.

2002-09-18  Miles Bader  <miles@gnu.org>

	* diff-mode.el (diff-mode): Don't evaluate `compilation-last-buffer'
	unless it's bound.

2002-09-17  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-log): Add `client' arg.
	(server-start): Don't bother canceling the sentinel.
	(server-process-filter): Use replace-regexp-in-string and
	handle the new &n quoting.  Use push.  Use server-log's new arg.
	Don't output the C-x # message if `nowait'.
	(server-buffer-done): Use server-log's new arg.

2002-09-16  Jonathan Yavner  <jyavner@engineer.com>

	* ses.el: New file.

	* emacs-lisp/unsafep.el: New file.

	* files.el (auto-mode-alist): Add ".ses" for ses-mode.
	(inhibit-quit): This is risky for unsafep, doesn't matter much for
	anybody else.
	(risky-local-variable-p): New function.  Split off from
	hack-one-local-variable so unsafep can use it.  Add \|-history$ to
	the list of disallowed local variable names (malicious user could
	stuff a `display' property in there that would be activated when
	naïve user called up the history).

2002-09-16  Markus Rost  <rost@math.ohio-state.edu>

	* ls-lisp.el (ls-lisp-format-time-list): Fix type and provide :tag's.

2002-09-16  Richard M. Stallman  <rms@gnu.org>

	* play/gomoku.el (gomoku-move-up, gomoku-move-down):
	Use forward-line and move-to-column.

	* cus-edit.el (custom-variable-backup-value): New function.
	(custom-variable-reset-backup): New function.
	(custom-variable-menu): Add item for custom-variable-reset-backup.
	(custom-variable-set, custom-variable-reset-saved)
	(custom-variable-reset-standard): Call custom-variable-backup-value.

2002-09-16  Stefan Monnier  <monnier@cs.yale.edu>

	* dired.el (dired-font-lock-keywords): Use regexp-opt.
	(dired-move-to-filename): Better message when we fail to find the file.
	(dired-sort-toggle): Minor optimization.

2002-09-16  Juanma Barranquero  <lektu@terra.es>

	* dired-aux.el (dired-add-entry): Add missing argument to
	`dired-mark'.

2002-09-16  John Paul Wallington  <jpw@shootybangbang.com>

	* xscheme.el (scheme-interaction-mode): Doc fix.

	* net/eudc.el (eudc-plist-get): Doc fix.

2002-09-16  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-last-search-type): New var.
	(nonincremental-repeat-search-forward)
	(nonincremental-repeat-search-backward): Repeat string or
	regexp search depending on menu-bar-last-search-type.
	(nonincremental-search-forward, nonincremental-re-search-forward)
	(nonincremental-search-backward, nonincremental-re-search-backward):
	Set menu-bar-last-search-type to string or regexp.
	(nonincremental-repeat-re-search-forward): Removed.
	(nonincremental-repeat-re-search-backward): Removed.
	(menu-bar-replace-menu): New keymap for "Edit->Replace" submenu.
	(menu-bar-i-search-menu): New keymap for "Incremental Search" submenu.
	(menu-bar-adv-search-menu): Removed.
	(menu-bar-search-menu): Reorganized.
	(menu-bar-edit-menu): Added "Replace" submenu.

2002-09-15  Richard M. Stallman  <rms@gnu.org>

	* scroll-bar.el (scroll-bar-mode): Specify :initialize.

	* menu-bar.el (menu-bar-make-mm-toggle): Don't put a quote before FNAME
	when it's not being evaluated.

2002-09-15  Markus Rost  <rost@math.ohio-state.edu>

	* dired.el (dired-move-to-filename): Fix previous change.

2002-09-14  Kim F. Storm  <storm@cua.dk>

	* emulation/keypad.el (keypad-setup, keypad-shifted-setup)
	(keypad-numlock-setup, keypad-numlock-shifted-setup):
	Change `Remove Binding' option to `Unspecified/User-defined'.
	(keypad-setup): Enhance explanation of setup type `none'.

2002-09-14  Richard M. Stallman  <rms@gnu.org>

	* time.el (display-time-mode): Set display-time-load-average here.
	(display-time-load-average): Initialize to nil.
	(display-time-default-load-average): Add "None" alternative.
	(display-time-update): Handle "None" alternative for load-average.

	* dired-aux.el (dired-bunch-files): Put the arg FILES
	back as it was after temporary destructive mods.
	(dired-add-entry): Use dired-insert-directory to handle indentation.
	Explicitly restore the line's marker character.
	Preserve the old file name's text properties.
	(dired-add-entry-do-indentation): Function deleted.
	(dired-relist-file): Doc fix.
	(dired-rename-file): Change argument names.
	(foo-rename-file): New function.
	(dired-do-hardlink): Use dired-hardlink.
	(dired-hardlink): New function.
	(dired-insert-subdir-doinsert): Use dired-insert-directory;
	that handles indentation, text props and header line.
	dired-readin-insert gets no args.
	Use `last' instead of `reverse'.

	* dired.el (dired-use-ls-dired): New variable.
	(dired-directory): Document the rules better.

	* dired.el (dired-insert-headerline): Function deleted.
	(dired-revert): Pass no args to dired-readin.
	(dired-move-to-filename): First try using dired-filename property.
	(dired-move-to-end-of-filename): Likewise.
	(dired-why): Try to show the start of this page of warnings.
	(dired-log): Insert the buffer name at start of page, not end.
	(dired-log-summary): If just one failure, explain it in echo area.

	* dired.el (dired-internal-noselect):
	Always set dired-directory, when buffer is not new.
	Pass dir-or-list, not dirname, to dired-mode.
	Call dired-readin with no args.
	Don't call dired-after-readin-hook here.
	(dired-find-buffer-nocreate): Expand dirname.
	Expand the dir from dired-directory to compare with dirname.

	(dired-readin): Take no args.  Get the directory from dired-directory.
	Run dired-before-reading hook inside save-excursion.
	Run dired-after-readin-hook here.
	Don't make undo entries at all.
	Call dired-readin-insert with no args.
	Don't change indentation here.
	Don't insert headerline here.

	(dired-readin-insert): Take no args.
	Get dir and file-list from dired-directory.
	Call dired-insert-directory the new way.
	Don't insert "wildcard" info here.

	(dired-insert-directory): New arg FILE-LIST.
	First arg now DIR, always just the directory.
	This function fully handles setting up the buffer text:
	update indentation, insert headerline and "wildcard" info.
	Pass --dired arg if appropriate; put info in dired-filename props.
	Don't expand file names here.

	* warnings.el (display-warning): In batch mode,
	exclude the final newline from the arg to `message'.

2002-09-13  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (diff-buffer-with-file): Check whether associated file
	exists.  Display message for 1 second.  Always return nil.

2002-09-13  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-mode): Turn on compilation-minor-mode
	support again, but more carefully this time.

	* progmodes/perl-mode.el (perl-mode-syntax-table): Mark $, % and @
	such that backward-sexp correctly skips them.
	(perl-font-lock-keywords-2): Use regexp-opt.
	(perl-font-lock-syntactic-keywords)
	(perl-font-lock-syntactic-face-function): Better handle PODs.
	Handle package names with ' in them and ($$) in `sub' declarations.
	Handle format statements.  Handle regexp and quote-like ops.
	(perl-empty-syntax-table): New var.
	(perl-quote-syntax-table): New fun.

	* pcvs.el (cvs-mode-find-file): Work even if point is at beg-of-line.
	(cvs-do-removal): Bind inhibit-read-only while modifying the buffer.

	* newcomment.el (comment-with-narrowing): Use the `declare' thingy.

	* derived.el (define-derived-mode): Properly ignore unknown args.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Add a :require arg.
	Don't call the function during init if mode is on by default.

	* simple.el: Provide `simple'.
	(transient-mark-mode, line-number-mode, column-number-mode):
	Pass an explicit `:require nil' argument.

2002-09-13  Francesco Potortì  <pot@gnu.org>

	* play/tetris.el (tetris-blank-options, tetris-cell-options):
	Remove various redundant `(t nil)'.

	* play/snake.el (snake-border-options): Use color on tty if available.

	* play/tetris.el (tetris-border-options): Likewise.

	* play/pong.el (pong-border-options): Likewise, plus reset
	color on tty to be [0.5 0.5 0.5].

2002-09-13  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-start-macro): Doc fix.

2002-09-13  Juanma Barranquero  <lektu@terra.es>

	* progmodes/idlw-shell.el (idlwave-shell-cleanup): Fix reference
	to `idlwave-idlwave_routine_info-compiled'.

	* whitespace.el (whitespace-unload-hook): Call `remove-hook' with
	three arguments, not four.

2002-09-13  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-keymap): Changed bindings:
	C-x C-k s to kmacro-start-macro, C-x C-k b to kmacro-bind-to-key.

2002-09-12  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el (universal-coding-system-argument):
	Read the coding system inside `interactive' spec, for command-history.

2002-09-12  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/find-func.el (find-library-name): Don't forget
	the empty suffix.  Fix stale variable name.

	* gud.el (gud-gdb-massage-args, gud-sdb-massage-args)
	(gud-pdb-massage-args): Delete.
	(gdb, sdb, pdb): Don't pass gud-*-massage-args any more.
	(gud-gdb-command-name): New var.  Put "--fullname" in there.
	(gud-query-cmdline): Use the most recent executable as the default.
	Don't add "--fullname" (it's only valid/meaningful for GDB).
	(gud-xdb-marker-filter): Use match-string.
	(gud-perldb-massage-args): Don't add "-d".
	(gud-perldb-command-name): Add "-d".
	(gud-common-init): If `massage-args' is nil, don't call it.
	(gud-format-command): Don't hardcode point-min==1.

	* derived.el: Require CL when compiling.

2002-09-12  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-send-it): Don't use : in filenames
	(for cygwin).  Suggested by Andrew Senior <aws@watson.ibm.com>.
	Use expand-file-name.  Also don't require time-stamp.

2002-09-11  Richard M. Stallman  <rms@gnu.org>

	* derived.el (define-derived-mode): When making new abbrev table,
	don't try to copy the parent's abbrev table.

	* ruler-mode.el (ruler-mode-left-scroll-bar-cols):
	Always round scroll-bar-width parameter up.
	If it is nil, use 14.

	* abbrev.el (copy-abbrev-table): New function.

2002-09-11  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Adjust ps-print-color-p, ps-default-fg and
	ps-default-bg setting.
	(ps-print-version): New version number (6.5.7).
	(ps-mark-active-p): New fun.
	(ps-print-preprint-region): Adjust code.

2002-09-11  Dave Love  <fx@gnu.org>

	* international/mule.el (non-standard-designations-alist)
	(ctext-pre-write-conversion): Don't generate invalid extended
	segments for iso8859.

	* language/cyrillic.el ("Ukrainian"): Fix nonascii-translation.
	(cyrillic-alternativnyj-decode-table): Fix some entries.

	* international/ucs-tables.el: Fix last change.

	* international/utf-8.el (utf-8-fragment-on-decoding): Fix last
	change.

2002-09-11  Kim F. Storm  <storm@cua.dk>

	* edmacro.el (edit-kbd-macro): Recognize new C-x e binding,
	kmacro-end-and-call-macro.

2002-09-11  Juanma Barranquero  <lektu@terra.es>

	* newcomment.el (uncomment-region): Fix let/let* use.

2002-09-11  Simon Josefsson  <jas@extundo.com>

	* time-stamp.el (time-stamp-hhmmss): New function.

	* gud.el (gud-gdb-massage-args): Don't secretly add -fullname.
	(gud-query-cmdline): Add --fullname to the user cmdline.

	* mail/smtpmail.el (smtpmail-default-smtp-server): Doc fix.

2002-09-11  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-call-macro): Rephrase repeat prompt.
	(kmacro-step-edit-map): Bind "A" to `append-end'.
	(kmacro-step-edit-prompt): Fix prompt.
	(kmacro-step-edit-query): Handle `append-end' response.
	(kmacro-step-edit-pre-command): Activate `append-end' at end of
	macro when required.

2002-09-11  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el (define-derived-mode): Fix typo.

	* menu-bar.el (line-number-mode, column-number-mode)
	(transient-mark-mode): Use minor mode directly.
	(menu-bar-make-toggle): Remove `props' arg.
	Move customize-mark-as-set directly into the toggle function.

	* whitespace.el (whitespace-global-mode): Use define-minor-mode.
	Use the new file hook names.
	(whitespace-describe): Remove.  Move the text to `Commentary:'.
	(whitespace-unload-hook): Use the new file hook names.

	* finder.el (finder-find-library): Remove.
	(finder-commentary): Use find-library-name and add completion.

	* simple.el (transient-mark-mode, line-number-mode)
	(column-number-mode): Use define-minor-mode.
	(define-mail-user-agent): Delete.  Moved to subr.el.

	* loadup.el ("simple.el"): Move to after loaddefs.el.

	* subr.el (define-mail-user-agent): Moved from simple.el.

2002-09-10  Richard M. Stallman  <rms@gnu.org>

	* pcvs-info.el (cvs-check-fileinfo): Don't use boolp.
	(boolp): Function deleted.

2002-09-10  Dave Love  <fx@gnu.org>

	* international/utf-8.el (ucs-mule-to-mule-unicode):
	Define unconditionally.
	(utf-8-fragmentation-table): New.  Use it in top-level mapc.
	(utf-8-fragment-on-decoding): Use it to keep
	utf-8-translation-table-for-decode variable and translation table
	in sync.

	* international/ucs-tables.el: Bind utf-8-translation-table-for-decode
	when setting up tables and remove useless optimize-char-table.
	(ucs-mule-to-mule-unicode): Deleted.
	(ucs-unify-8859): Maybe optimize ucs-mule-to-mule-unicode.

	* international/utf-16.el (utf-16-le-pre-write-conversion)
	(utf-16-be-pre-write-conversion): Deleted.
	(mule-utf-16-le, mule-utf-16-be): Register encoding translation table.

2002-09-10  Richard M. Stallman  <rms@gnu.org>

	* files.el (diff-buffer-with-file): Simplify.
	Don't signal an error if buffer has no file.
	Call sit-for after `diff' returns.

	* play/gamegrid.el (gamegrid-make-color-tty-face):
	Handle string as COLOR arg.
	(gamegrid-display-type): Don't assume display-color-p
	implies a color-x terminal.
	(gamegrid-hide-cursor): Set `cursor-type' local variable.

	* descr-text.el (describe-text-mode): Add font-lock-defontify to
	change-major-mode-hook.

	* ibuffer.el (ibuffer-mode): Add font-lock-defontify to
	change-major-mode-hook.

	* comint.el (comint-mode): Add font-lock-defontify to
	change-major-mode-hook.

	* info.el (Info-mode): Add font-lock-defontify to
	change-major-mode-hook.

	* replace.el (occur-mode): Add font-lock-defontify to
	change-major-mode-hook.

	* font-core.el (font-lock-defontify): New function.

2002-09-10  Richard M. Stallman  <rms@gnu.org>

	* ps-print.el (ps-printer-name-option): Doc fix.

2002-09-10  Vinicius Jose Latorre  <vinicius@cpqd.com.br>

	* ps-print.el: Adjust ps-postscript-code-directory setting.
	XEmacs version check was adjusted.
	(ps-print-version): New version number (6.5.6).
	(ps-print-color-p, ps-page-dimensions-database): Autoload var.
	(ps-print-code, ps-print-preprint-region): Adjust code.

2002-09-10  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* files.el (auto-mode-alist): ~/.gnus, ~/.viper are in
	emacs-lisp-mode, like ~/.emacs.

2002-09-10  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (uncomment-region): Be more careful with `='.

2002-09-10  Deepak Goel  <deego@glue.umd.edu>

	* play/doctor.el (doc//): Rename from `//'.  Update callers.
	(doc$): Rename from `$'.  Update callers.

2002-09-10  Miles Bader  <miles@gnu.org>

	* simple.el (do-auto-fill): `fill-indent-according-to-mode' is a
	variable, not a function.

	* kmacro.el (kmacro-call-macro): Deal with a non-numeric prefix arg.

2002-09-10  Kim F. Storm  <storm@cua.dk>

	* macros.el (apply-macro-to-region-lines): Let-bind mark-active to
	nil while executing macro to avoid triggering delete-selection-mode.

	* simple.el (keyboard-quit): Set defining-kbd-macro to nil to
	cancel defining keyboard macro when applicable.

2002-09-09  Markus Rost  <rost@math.ohio-state.edu>

	* simple.el (transient-mark-mode, line-number-mode)
	(column-number-mode): Undo previous change because of bootstrapping.

2002-09-09  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el (define-derived-mode): Add keyword arguments.
	(derived-mode-make-docstring): Take abbrev and syntax table names.

	* font-core.el (font-lock-change-mode): Just turn off font-lock-mode.
	(font-lock-default-function): Change arg name.

	* cus-start.el (transient-mark-mode): Delete.  Done in simple.el.

	* paren.el (show-paren-function): Use syntax-after.

	* emacs-lisp/syntax.el (syntax-after): Delete.  Moved to subr.el.

	* subr.el (symbol-file): Also work for autoloaded funcs.
	(syntax-after): New fun moved from syntax.el.

	* find-file.el (ff-pre-find-hook, ff-pre-load-hook, ff-post-load-hook)
	(ff-not-found-hook, ff-file-created-hook): Rename from *-hooks.
	Update callers (but still run the old hooks as well).

	* emacs-lisp/find-func.el (find-library-suffixes, find-library-name)
	(find-library): New funs.
	(find-function-search-for-symbol): Use it.

	* emacs-lisp/bytecomp.el (byte-compile-file): Don't switch buffer.

	* isearch.el (isearch-cmds): Add docstring.
	(isearch-mouse-2): Lookup binding in the proper buffer.
	Use call-interactively and remove the now useless `arg'.
	(isearch-search-fun-function): New var.
	(isearch-search-fun): New fun.
	(isearch-search, isearch-lazy-highlight-search): Use it.

2002-09-09  Stefan Monnier  <monnier@cs.yale.edu>

	* simple.el (what-line): Don't hard-code 1.
	(transient-mark-mode, line-number-mode, column-number-mode):
	Use define-minor-mode.
	(do-auto-fill): Only ignore prefix if it's really empty.

2002-09-09  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (save-some-buffers-action-alist): Use lower case for
	help string of diff-buffer-with-file.

2002-09-09  Richard M. Stallman  <rms@gnu.org>

	* calendar/calendar.el (mouse-scroll-calendar-left)
	(mouse-scroll-calendar-right, mouse-calendar-other-month):
	New commands.
	(calendar-mode-line-format): Use them.

	* emacs-lisp/bytecomp.el (byte-recompile-directory):
	Set and then bind default-directory.

	* startup.el (fancy-splash-head, normal-splash-screen):
	Change the messages that explain about GNU or GNU/Linux.

	* info.el (Info-search): Add (point-min) to subfile positions
	to get them right.  Skip the current subfile using forward-line.

	* files.el (make-backup-file-name-1): When make-directory fails,
	ignore backup-directory-alist.
	(make-directory): Expand DIR before looking for handler.

2002-09-09  Jari Aalto  <jari.aalto@poboxes.com>

	* progmodes/cperl-mode.el (cperl-noscan-files-regexp):
	In addition to RCS, exclude CVS directories.

	* ls-lisp.el (ls-lisp-format-time-list): New variable.
	(ls-lisp-format-time): Use it.

	* files.el (auto-mode-alist): Use sh-mode for .bash files.

2002-09-09  Dave Love  <d.love@dl.ac.uk>

	* ps-print.el: Many doc fixes.

2002-09-09  John Paul Wallington  <jpw@shootybangbang.com>

	* play/doctor.el (doctor-cadr, doctor-caddr, doctor-cddr): Remove.
	Update callers.

2002-09-08  Markus Rost  <rost@math.ohio-state.edu>

	* diff.el (diff): Doc fix.

2002-09-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-delete-errors): Default to nil.

	* simple.el (undo-elt-in-region): Fix one-off error at END.
	(forward-visible-line): Handle invisibility by ignoring
	invisible newlines.  Also include entire invisible lines beyond
	the stopping point.

	* cus-edit.el (custom-save-variables, custom-save-faces):
	Clarify the comments written into .emacs.

2002-09-08  Markus Triska  <triska@gmx.at>

	* play/doctor.el (doctor-doc): Recognize question words
	and use qlist.  Use doctor-shorten's return value.
	(doctor-shorten): Compute a return value, don't alter `sent'.
	(doctor-hates1): Add a question mark.
	(doctor-strangelove): Unused function deleted.

2002-09-08  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-end-and-call-macro): New command to end and
	call keyboard macro in one step.  Bind it to C-x e by default.
	(kmacro-call-macro): Use format-kbd-macro.
	(kmacro-step-edit-macro): New command to interactively step edit
	and execute last keyboard macro.
	(kmacro-keymap): Bind SPC [C-x C-k SPC] to kmacro-step-edit-macro.
	(kmacro-step-edit-mini-window-height): New custom var.
	(kmacro-step-edit-map): New keymap (parent is query-replace-map).
	(kmacro-step-edit-prefix-commands): New var.
	(kmacro-step-edit-prompt, kmacro-step-edit-query)
	(kmacro-step-edit-insert, kmacro-step-edit-pre-command)
	(kmacro-step-edit-minibuf-setup, kmacro-step-edit-post-command):
	New aux functions for step editing keyboard macros.

	* subr.el (read-quoted-char): Apply listify-key-sequence to vector
	returned by this-single-command-raw-keys before appending it to
	unread-command-event.

2002-09-07  Colin Walters  <walters@debian.org>

	* progmodes/compile.el (compile-internal): Add optional argument
	no-async.

	* diff.el (diff): Add optional argument no-async, and use the
	above argument.

	* files.el (diff-buffer-with-file): Call diff synchronously, so we
	don't delete the temporary file before diff has a chance to read
	it.

	* ibuf-ext.el (ibuffer-diff-with-file): Just call
	`diff-buffer-with-file'.

2002-09-07  John Paul Wallington  <jpw@shootybangbang.com>

	* emacs-lisp/cl-indent.el (extended-loop-p): Doc fix.

	* emacs-lisp/find-func.el (find-function-recenter-line):
	Add custom type.  Doc fix.

2002-09-06  Stefan Monnier  <monnier@cs.yale.edu>

	* menu-bar.el (menu-bar-make-mm-toggle): New macro.
	(showhide-menu-bar, showhide-toolbar, menu-bar-toggle-auto-compression)
	(toggle-highlight-paren-mode, toggle-global-lazy-font-lock-mode):
	Remove.  Use the minor mode function directly instead.
	(menu-bar-mode): Add message and customize-mark-as-set and return
	the new value as do other minor modes.

	* edmacro.el (edmacro-subseq): Don't use cl-push/cl-pop.

2002-09-06  Simon Marshall  <simon@gnu.org>

	* progmodes/etags.el (find-tag-tag, complete-tag):
	Bind completion-ignore-case based on tags-case-fold-search, so that
	case-sensitivity of tag completion matches that of tag search.

2002-09-06  Juanma Barranquero  <lektu@terra.es>

	* calendar/solar.el (calendar-time-display-form): Fix spacing.

	* double.el (double-prefix-only): Likewise.

	* emacs-lisp/easymenu.el (easy-menu-define): Likewise.

	* emacs-lisp/find-func.el (find-function-search-for-symbol): Likewise.

	* emacs-lisp/float.el (string-to-float): Likewise.

	* emacs-lisp/rx.el (rx): Likewise.

	* faces.el (copy-face): Likewise.

	* hilit-chg.el (highlight-changes-colours)
	(highlight-changes-active-string)
	(highlight-changes-passive-string)
	(highlight-changes-rotate-faces, global-highlight-changes): Likewise.

	* international/mule.el (decode-char): Likewise.

	* progmodes/idlwave.el (idlwave-support-inheritance)
	(idlwave-routine-entry-compare): Likewise.

	* progmodes/idlw-shell.el (idlwave-shell-use-breakpoint-glyph):
	Likewise.

	* progmodes/pascal.el (pascal-start-keywords): Likewise.

	* progmodes/sh-script.el (sh-indent-for-fi, sh-indent-for-done):
	Likewise.

	* progmodes/vhdl-mode.el (vhdl-progress-interval)
	(vhdl-corresponding-begin): Likewise.

	* simple.el (choose-completion-string-functions): Likewise.

	* textmodes/reftex.el (reftex-TeX-master-file): Likewise.

	* textmodes/fill.el (fill-nonuniform-paragraphs)
	(fill-individual-paragraphs): Likewise.

	* vcursor.el (vcursor-toggle-vcursor-map): Likewise.

	* warnings.el (warning-level-aliases): Likewise.

	* speedbar.el (speedbar-mode): Fix spacing and typos.

	* textmodes/reftex-vars.el (reftex-label-menu-flags): Fix typo.

2002-09-05  Markus Rost  <rost@math.ohio-state.edu>

	* textmodes/table.el (table-command-prefix): Fix type.

2002-09-05  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el: Don't require vc.el at compile-time; it causes
	recursive requirements during bootstrap.

2002-09-05  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (decode-char): Cancel the previous change.

2002-09-04  Mats Lidell  <matsl@contactor.se>  (tiny change)

	* language/european.el ("Swedish"): New set-language-info-alist call.

2002-09-04  Richard M. Stallman  <rms@gnu.org>

	* help-fns.el (help-with-tutorial): Properly set up
	completion-reference-buffer in the *Completion* buffer.

2002-09-04  John Paul Wallington  <jpw@shootybangbang.com>

	* startup.el (use-fancy-splash-screens-p): If `fancy-splash-frame'
	returns nil, return nil.

2002-09-04  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el: Require vc.el at compile-time.
	(vc-workfile-unchanged-p, vc-default-workfile-unchanged-p):
	Moved here from vc.el.

	* vc.el (vc-workfile-unchanged-p, vc-default-workfile-unchanged-p):
	Moved to vc-hooks.el.

	* vc-rcs.el (vc-rcs-state): Don't require vc.el.

2002-09-04  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (decode-char): Translate a character by
	utf-8-translation-table-for-decode only when
	utf-8-fragment-on-decoding is non-nil.

2002-09-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/text-mode.el (paragraph-indent-text-mode-abbrev-table)
	(paragraph-indent-text-mode-syntax-table, paragraph-indent-text-mode):
	Use text-mode's syntax-table and abbrev-table.
	(text-mode): Set require-final-newline to t.

	* newcomment.el (comment-make-extra-lines): Only use the
	dummy `=' char when there's really nothing else.
	Don't remove spaces if it leads to an incorrect comment.

	* pcvs.el (cvs-run-process): Use a pty rather than a pipe to work
	around the cvs/ssh/libc bug.
	(cvs-update-header): Understand `cvs admin -m<rev>:<msg>' syntax.
	(defun-cvs-mode): Use the new `declare' thingy.
	(cvs-edit-log-text-at-point, cvs-mode-edit-log, cvs-do-edit-log)
	(cvs-edit-log-minor-wrap, cvs-edit-log-filelist): New funs.
	(cvs-mode-undo): Use `cvs add' for (CONFLICT. REMOVED).

	* pcvs-parse.el (cvs-parse-table): Create a `need-update'
	node rather than a message for new directories.
	(cvs-parse-status): Add support for `Entry Invalid'.

	* smerge-mode.el (smerge-diff-buffer-name): Default to *vc-diff*.
	(smerge-combine-with-next): New function.
	(smerge-diff): Don't output `wrote /tmp/foo' messages.
	Insert message if no diffs were found.

	* mail/sendmail.el (mail-mode): Don't set local-abbrev-table.
	(mail-mode-abbrev-table): Set to text-mode-abbrev-table.

2002-09-02  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.15 released.
	(require 'base64): Most modern Emacsen have the base64
	encode/decode functions built in, so test to see if they are bound
	before we go blindly requiring base64.el.
	From Steve Youngs <youngs@xemacs.org>.
	(tramp-feature-write-region-fix): XEmacs doesn't have a
	'find-operation-coding-system' and this variable doesn't seem to
	be used anywhere so wrap it in (unless (featurep 'xemacs)).
	From Steve Youngs <youngs@xemacs.org>.
	(tramp-methods): Remove duplicate definition of ssh1-old and ssh2-old.
	(tramp-open-connection-su): Use user name "root" if no user name
	is given.

	From Michael Albinus <Michael.Albinus@alcatel.de>:
	* net/tramp.el (tramp-invoke-ange-ftp):
	(tramp-ange-ftp-file-name-p): Check for XEmacs.
	(tramp-do-copy-or-rename-file): Don't pass KEEP-DATE to
	tramp-invoke-ange-ftp 'rename.
	(tramp-handle-write-region): Don't pass LOCKNAME and CONFIRM to
	tramp-invoke-ange-ftp 'write-region.
	(tramp-handle-set-file-modes): Change order of FILENAME and MODE
	passing to tramp-invoke-ange-ftp 'set-file-modes.
	(tramp-invoke-ange-ftp): `tramp-disable-ange-ftp' must be called
	again after activating `ange-ftp'.

2002-09-02  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-ignore-item-temp-list): New variable.
	(ido-read-internal): Don't set ido-default-item if the default is
	member of ido-ignore-item-temp-list.
	Don't return first match for C-j if no text is entered.
	(ido-buffer-internal): Check for empty string return.
	(ido-make-buffer-list1): Use member instead of memq.
	(ido-window-buffer-p): Likewise.
	(ido-get-bufname): Ignore buffers on ido-ignore-item-temp-list.
	(ido-ignore-item-p): Ignore items on ido-ignore-item-temp-list.

	* replace.el (multi-occur): Made "ido-aware":
	Changed prompt to use C-j instead of RET to end.
	Set ido-ignore-item-temp-list to the selected buffers so far, so
	they are automatically excluded from the list of choices.
	Use add-to-list instead of push.

2002-09-01  Richard M. Stallman  <rms@gnu.org>

	* term/x-win.el (function-key-map): Define S-iso-lefttab.

2002-09-01  Kim F. Storm  <storm@cua.dk>

	* edmacro.el (edit-kbd-macro): Recognize new default binding for
	C-x e in addition to old binding.

2002-09-01  Mario Lang  <mlang@debian.org>

	* files.el (save-some-buffers-action-alist): New variable.
	(save-some-buffers): Use that.
	(diff-buffer-with-file): New function.

2002-09-01  Richard M. Stallman  <rms@gnu.org>

	* ruler-mode.el (defgroup ruler-mode): Use `convenience' as parent.

	* dired.el (defgroup dired): Use `files' as parent.
	(dired-get-filename): Ignore handler if it has safe-magic prop.

	* jka-compr.el (jka-compr-handler): Add safe-magic property.

2002-08-31  Richard M. Stallman  <rms@gnu.org>

	* simple.el (kill-line): Use end-of-visible-line to determine
	if rest of line is blank.
	(end-of-visible-line): Cope if end-of-line moved back over
	invisible intangible chars at end of line.

	* simple.el (completion-setup-function): Don't use directory-sep-char.

2002-09-01  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-menu): Remove ":active" keyword where not
	needed.
	(f90-menu, f90-add-imenu-menu): Use lookup-key.
	Remove (eval-when-compile) for free variables.

2002-08-31  Andreas Schwab  <schwab@suse.de>

	* font-core.el (font-lock-change-mode): Avoid changing buffer
	state in any way.

2002-08-30  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-filter-return):
	Handle the case where the filter returns a single menu entry.
	(easy-menu-add): Improve docstring.
	(easy-menu-current-active-maps): Remove.
	(easy-menu-get-map): Use current-active-maps.

	* cus-edit.el (custom-unlispify-menu-entry): Don't remove
	the -p prefix from variables since they shouldn't have it anyway.
	(custom-group-menu-create, customize-menu-create):
	Only cdr if applicable, since custom-menu-create might return
	a vector (i.e. a single menu entry).

2002-08-30  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* calendar/diary-lib.el (diary-mail-entries): Don't overwrite
	user's value of diary-list-include-blanks, but generate message
	instead if there are no entries.

2002-08-30  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>  (tiny change)

	* ps-print.el (ps-lp-system): Fixed typo in `usg-unix-v'.

2002-08-30  Markus Rost  <rost@math.ohio-state.edu>

	* menu-bar.el (menu-bar-read-mail): Doc fix.

2002-08-30  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-update): Revert expansion of `caddr'.
	(ibuffer-fontification-alist): Check hidden buffer case isn't
	visiting a file and change its face to italic.

2002-08-30  Juanma Barranquero  <lektu@terra.es>

	* replace.el (occur-mode): Add interactive declaration.

	* bs.el (bs-message-without-log): Fix typo.

	* font-core.el (font-lock-defaults): Likewise.

	* font-lock.el (font-lock-add-keywords): Likewise.

	* mouse-copy.el (mouse-copy-work-around-drag-bug): Likewise.

	* textmodes/bibtex.el (bibtex-mode): Likewise.

	* emulation/viper-ex.el (ex-compile-command): Likewise.

	* progmodes/idlwave.el (idlwave-max-extra-continuation-indent):
	Likewise.

	* progmodes/dcl-mode.el (dcl-calc-cont-indent-relative): Likewise.

	* allout.el (my-mark-marker): Likewise.

2002-08-30  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-via-smtp): Delete process buffer
	unless s-debug-info is enabled.

2002-08-29  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-update): Use `minibufferp'.  Expand `caddr'.

	* mwheel.el (mouse-wheel-up-button): Doc fix.

2002-08-29  Juanma Barranquero  <lektu@terra.es>

	* replace.el (occur-mode-hook): New hook.
	(occur-mode): Use it.
	(occur-hook): Set default to nil.

2002-08-29  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el: Use match-string and drop useless `function's.
	(ange-ftp-get-process): Bind `ange-ftp-this-user' and
	`ange-ftp-this-host' before running ange-ftp-process-startup-hook.
	(ange-ftp-ls-parser): Use `switches' arg instead of dynamic binding.
	(ange-ftp-parse-dired-listing): Update the calls.
	(dired-local-variables-file): Declare to shut quieten the compiler.
	(ange-ftp-file-entry-active-p): Remove.
	(ange-ftp-file-name-all-completions, ange-ftp-file-name-completion):
	Don't exclude dangling symlinks.
	(ange-ftp-file-name-completion-1): Make predicate optional.
	(ange-ftp-parse-list-func-alist): Use add-to-list to update.
	(ange-ftp-fix-name-for-bs2000): Use subst-char-in-string.
	(ange-ftp-bs2000-posix-hook-installed): Remove.
	(ange-ftp-add-bs2000-posix-host): Don't use it anymore.
	(ange-ftp-bs2000-cd-to-posix): Use `ange-ftp-this-user' and
	`ange-ftp-this-host' instead of `user' and `host'.

2002-08-29  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-warning-prefix):
	Decide here whether to print which form we're compiling.
	If we do that, still print file and line.  Make file name
	relative to default-directory.  Print fewer newlines.
	(byte-compile-log-file): Print something even if no file.
	Print messages for entering and leaving directories,
	and set default-directory.
	(displaying-byte-compile-warnings): Only sometimes bind warning-series.
	(byte-compile-warning-series): New function.
	(byte-compile-file): Set byte-compile-last-logged-file, don't bind it.
	(byte-compile-display-log-head-p): Function deleted.

	* warnings.el (warning-series): Now can be a marker, not an integer.
	(display-warning): Handle new value for warning-series.

	* emacs-lisp/bytecomp.el (byte-compile-log-file): Use \f.
	(byte-compile-cl-warn): Add cl-macroexpand-all, cl-compiling-file
	to don't-warn list.

2002-08-29  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: Change default bindings from F7/F8 to F3/F4.
	Change default binding of C-x e to kmacro-end-or-call-macro.
	(kmacro-call-repeat-key, kmacro-call-repeat-with-arg): New custom
	variables.
	(kmacro-get-prefix-arg): New function.
	(kmacro-repeat-on-last-key): Rename from kmacro-repeat-loop and
	improve.  Callers changed.
	(kmacro-call-macro): Repeat macro by repeating last key or
	key defined in kmacro-call-repeat-key.  New third arg non-nil
	means to end current macro.
	(kmacro-end-or-call-macro): Call kmacro-call-macro appropriately
	to get repeat last key functionality.
	(kmacro-start-macro-or-insert-counter): Improve doc string.

2002-08-28  Luc Teirlinck  <teirllm@mail.auburn.edu>

	* files.el (find-buffer-visiting): Compare file attributes
	using buffer-file-truename.

2002-08-28  Richard M. Stallman  <rms@gnu.org>

	* files.el (make-auto-save-file-name, make-backup-file-name-1):
	Don't use directory-sep-char.

2002-08-28  Juanma Barranquero  <lektu@terra.es>

	* replace.el (occur-hook): Renamed from `occur-mode-hook'.
	(occur-mode): Remove call to `occur-mode-hook'.
	(occur-rename-buffer): Fix reference to `occur-mode-hook' in docstring.
	(occur-1): Add call to `occur-hook'.

	* subr.el (make-variable-frame-localizable): Alias for
	`make-variable-frame-local'.

2002-08-28  Miles Bader  <miles@gnu.org>

	* rfn-eshadow.el (read-file-name-electric-shadow-properties)
	(read-file-name-electric-shadow-tty-properties)
	(read-file-name-electric-shadow-mode): Remove compatibility defs.

	* comint.el (comint-carriage-motion): Start at START.

2002-08-27  Francesco Potortì  <pot@gnu.org>

	* net/ange-ftp.el (ange-ftp-skip-msgs): Skip the 530 response
	given by vsFTPd when accessed with a kerberized FTP client.

2002-08-27  Richard M. Stallman  <rms@gnu.org>

	* files.el (find-alternate-file):
	Bind kill-buffer-query-functions locally, don't set it.

2002-08-27  Andreas Schwab  <schwab@suse.de>

	* kmacro.el (kmacro-start-macro): Doc fix.

2002-08-27  Carsten Dominik  <dominik@sand.science.uva.nl>

	* textfile/reftex-ref.el (reftex-goto-label): New command.

	* textfile/reftex-vars.el (reftex-part-resets-chapter): New option.

	* textfile/reftex-parse.el (reftex-roman-number): New function.
	(reftex-section-number): Better handling of parts: No chapter
	counter resets.

	* textfile/reftex.el (reftex-highlight-overlays): Added a third
	overlay.
	(reftex-mode-menu): Added entry for `reftex-toc-recenter.
	Also moved `reftex-reset-mode' to top level.

	* textfile/reftex-toc.el (reftex-toc-recenter): New command.
	(reftex-toc-pre-command-hook): Don't remove highlight overlay.
	(reftex-toc-post-command-hook): Use overlay no 2 for highlighting.

	* textfile/reftex-sel.el (reftex-get-offset): Get offset of
	document pointer *before* position, not after.
	(reftex-insert-docstruct): Get offset of document pointer *before*
	position, not after.

	* textfiles/reftex-parse.el (reftex-where-am-I): Prefer marker
	match over section title match.

	* textfiles/reftex-cite.el (reftex-bib-or-thebib): New function
	which determines on a per-file-basis if BibTeX is being used
	locally for citations.
	(reftex-offer-bib-menu): Use `reftex-bib-or-thebib' for better
	cooperation with chapterbib.
	(reftex-bibtex-selection-callback): Use `reftex-bib-or-thebib' for
	better cooperation with chapterbib.

	* textfiles/reftex-dcr.el (reftex-view-cr-cite):
	Use `reftex-bib-or-thebib' for better cooperation with chapterbib.

2002-08-26  Kim F. Storm  <storm@cua.dk>

	* subr.el (suppress-keymap): Use command remapping instead of
	substitute-key-definition to undefine self-inserting keys.

2002-08-26  Juanma Barranquero  <lektu@terra.es>

	* makefile.w32-in (WINS): Add calc and obsolete.

2002-08-26  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use customize-mark-as-set for global minor modes.

2002-08-25  Miles Bader  <miles@gnu.org>

	* rfn-eshadow.el (file-name-shadow-properties-custom-type):
	Renamed from `read-file-name-electric-shadow-properties-custom-type'.
	Change name of face.
	(file-name-shadow-properties): Renamed from
	`read-file-name-electric-shadow-properties'.
	(file-name-shadow-tty-properties): Renamed from
	`read-file-name-electric-shadow-tty-properties'.
	(file-name-shadow): Renamed from `read-file-name-electric-shadow'.
	(rfn-eshadow-setup-minibuffer): Update references to renamed variables.
	(file-name-shadow-mode): Renamed from
	`read-file-name-electric-shadow-mode'.  Update references to
	renamed variables.

2002-08-24  Sam Steingold  <sds@gnu.org>

	* subr.el (eval-after-load): Do not call
	load-symbol-file-load-history (deleted yesterday).

2002-08-24  John Paul Wallington  <jpw@shootybangbang.com>

	* startup.el (normal-splash-screen): Ensure splash buffer is
	killed.  Use tabs in output.  Fix test whether previous buffer was
	*scratch* buffer.

	* progmodes/simula.el (simula-abbrev-keyword-default)
	(simula-abbrev-keyword, simula-abbrev-stdproc-default)
	(simula-abbrev-stdproc): Doc fix - escape open parens in column 0.

	* apropos.el (command-apropos): Use `defalias' instead of `fset'.

	* mail/rmail.el (rmail-speedbar-match-folder-regexp): Doc fix.

2002-08-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-xemacs-flag, f90-xemacs-menu)
	(f90-menu-bar-menu, f90-change-case-menu, f90-font-lock-on)
	(f90-font-lock-off, f90-font-lock-menu): Delete.
	Use easy-menu-define instead.
	(f90-mode): Use easy-menu-add.
	No longer (require 'imenu) when compiling.
	(f90-mark-subprogram, f90-indent-region, f90-fill-region)
	(f90-abbrev-start): Use fboundp.
	(f90-imenu-flag): Delete - use imenu--index-alist instead.

2002-08-23  Richard M. Stallman  <rms@gnu.org>

	* loadhist.el (unload-feature): Distinguish functions from
	variables in load-history.
	(feature-symbols): Doc fix.

	* files.el (ange-ftp-completion-hook-function): Add safe-magic prop.

	* subr.el (symbol-file-load-history-loaded)
	(load-symbol-file-load-history): Deleted.
	(symbol-file): Don't call load-symbol-file-load-history.

2002-08-23  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-kill-buffer-hook): Add it to kill-buffer-hook again.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* frame.el (select-frame-by-name, select-frame-set-input-focus):
	Always call x-focus-frame, if using x.
	Use set-mouse-position on all systems, if focus-follows-mouse.

2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.14 released.
	(tramp-shell-prompt-pattern): New variable.
	(tramp-actions-before-shell, tramp-multi-actions)
	(tramp-find-shell, tramp-open-connection-multi)
	(tramp-open-connection-setup-interactive-shell): Use it.
	(tramp-open-connection-telnet, tramp-open-connection-rsh)
	(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
	in the docstring.
	(tramp-bug): Report `tramp-shell-prompt-pattern'.
	(tramp-process-one-multi-action, tramp-process-one-action):
	Make message clearer so people don't confuse it with Emacs asking
	them a question if the regexp happens to end with "?".
	(tramp-verbose): Change default value from 10 to 9.  Also change
	some logging levels so that 10 is reserved for stuff which is
	needed for debugging only, but 9 catches everything that people
	might like to see in order to see that Tramp is actually working.

2002-08-22  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases, authors-fixed-entries):
	Corrected spelling mistakes (for Joseph Arceneaux).

2002-08-21  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: eval-when-compile a few defvars.
	(f90-xemacs-flag): Wrap in eval-and-compile.
	(f90-font-lock-keywords): Doc fix.
	(f90-mode-abbrev-table): Work with or without 6th arg of define-abbrev.
	(f90-mark-subprogram-overlay): Variable deleted.
	(f90-mark-subprogram): Remove overlay bit.  Don't be silent about
	pushing mark.
	(f90-abbrev-start): unread-command-event is obsolete in XEmacs.

2002-08-21  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.13 released.
	(tramp-handle-write-region): Don't check to see if remote end is
	awake after sending data to remote host: we want to send "EOF" not
	"echo are you awake"...
	(tramp-maybe-open-connection): Swap args for tramp-time-diff.
	(tramp-yn-prompt-regexp): New variable.
	(tramp-action-yn): New function, using it.
	(tramp-feature-write-region-fix): New internal variable.  Not yet
	used.  Should be used in `tramp-handle-write-region'.

2002-08-21  Kim F. Storm  <storm@cua.dk>

	* bindings.el (mode-line-format): Moved global-mode-string last.
	(mode-line-position): Moved %p first.  Added padding to %l/%c to
	eliminate jumpiness in modeline.  Use (%l,%c) format if both
	line-number-mode and column-number-mode are enabled.

2002-08-20  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-forward-syntactic-ws): Fixed a bug
	that could cause an infinite loop if something that looks like
	a macro begins in the middle of a line.

	* progmodes/cc-engine.el (c-parse-state): Fixed a bug that
	could cause `c-state-cache' to contain two conses in sequence
	when there's an unbalanced open paren in a macro.

2002-08-20  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-current-defun): Use save-excursion.

	* imenu.el (imenu--generic-function): Use mapc.
	(imenu-syntax-alist): Doc fix.

2002-08-20  Richard M. Stallman  <rms@gnu.org>

	* font-core.el (font-lock-change-mode): New function.
	(font-lock-mode): Use font-lock-change-mode instead of
	font-lock-unfontify-buffer.
	(font-lock-maximum-size, font-lock-verbose): Add defvars.

2002-08-20  Carsten Dominik  <dominik@astro.uva.nl>

	* textfiles/reftex-cite.el (reftex-bib-or-thebib): New function
	which determines on a per-file-basis if BibTeX is being used
	locally for citations.
	(reftex-offer-bib-menu): Use `reftex-bib-or-thebib' for better
	cooperation with chapterbib.
	(reftex-bibtex-selection-callback): Use `reftex-bib-or-thebib' for
	better cooperation with chapterbib.

	* textfiles/reftex-dcr.el (reftex-view-cr-cite):
	Use `reftex-bib-or-thebib' for better cooperation with chapterbib.

2002-08-20  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: Major rework based on discussions with RMS.
	Most important change is that C-x C-k is now bound to a keymap
	with keyboard macro related commands.  The original binding on
	C-x C-k is moved to C-x C-k e.

	* binding.el: Remove macro related bindings (now in kmacro.el).

	* edmacro.el: Remove C-x C-k binding (now in kmacro.el).

2002-08-19  Stefan Monnier  <monnier@cs.yale.edu>

	* help-fns.el (help-split-fundoc): Replace the function name
	from the docstring with the one that should be displayed.
	(help-make-usage): Understand CL style arglists.
	(describe-function-1): Adapt to the new behavior of help-split-fundoc.
	(describe-variable): Use delete-region.

2002-08-19  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (sgml-xml-auto-coding-function):
	Call re-search-forward with NOERROR t.

2002-08-19  Miles Bader  <miles@gnu.org>

	[original idea from Luc Teirlinck <teirllm@mail.auburn.edu>]
	* comint.el (comint-inhibit-carriage-motion): New variable.
	(comint-carriage-motion): Argument STRING removed.  New arguments
	START and END; interpret characters between START and END rather
	than using special comint state.
	(comint-output-filter): Call `comint-carriage-motion'.
	(comint-output-filter-functions): Don't add `comint-carriage-motion'.
	* ielm.el (inferior-emacs-lisp-mode):
	Give `comint-inhibit-carriage-motion' a local value of t.

2002-08-18  Richard M. Stallman  <rms@gnu.org>

	* textmodes/table.el: New file.

	* font-core.el (font-lock-mode): Set change-major-mode-hook locally.

2002-08-18  Andreas Schwab  <schwab@suse.de>

	* ibuf-ext.el (ibuffer-list-buffer-modes): Doc fix.

2002-08-17  Carsten Dominik  <dominik@astro.uva.nl>

	* textmodes/reftex.el (reftex-mode): Create special syntax tables.
	(reftex-syntax-table): Set a default in case this is being used
	outside a LaTeX file.
	(reftex-syntax-table-for-bib): Set a default in case this is being
	used outside a LaTeX file.

2002-08-17  Richard M. Stallman  <rms@gnu.org>

	* tar-mode.el (tar-subfile-mode): Use add-hook and remove-hook,
	and use write-file-functions instead of local-write-file-hooks.
	(tar-untar-buffer): Don't try to extract directories.

	* menu-bar.el (fringe-mode): Set to nil.

	* mail/rmail.el (rmail-search-mime-header-function): Doc fix.

2002-08-15  Richard M. Stallman  <rms@gnu.org>

	* calendar/appt.el (appt-delete): Use substring-no-properties.
	(appt-make-list): Don't use prin1-to-string; use the string unchanged.

2002-08-15  Jan Nieuwenhuizen  <janneke@gnu.org>

	* server.el (server-process-filter): Simplify code.
	(server-goto-line-column): New function.
	(server-visit-files): Use server-goto-line-column.
	Offer to revert only if file has changed.

2002-08-15  Richard M. Stallman  <rms@gnu.org>

	* files.el (recover-this-file): New function.
	(after-find-file): Recommend recover-this-file.

	* font-core.el (font-lock-mode): Add font-lock-unfontify-buffer
	to change-major-mode-hook when font lock is enabled.

	* simple.el (toggle-truncate-lines): Force redisplay.
	Display status message.

2002-08-15  Carsten Dominik  <dominik@sand.science.uva.nl>

	* textmodes/reftex.el (reftex-mode): Moved the creation of special
	syntax tables to top-level.

2002-08-15  David Kastrup  <David.Kastrup@t-online.de>

	* net/ange-ftp.el (ange-ftp-wipe-file-entries): Fix type mismatch;
	use `hash-table-size' instead of `length'.

2002-08-14  Stefan Monnier  <monnier@cs.yale.edu>

	* help-fns.el (locate-library): Use locate-file(-completion).
	(help-split-fundoc): Tighten the regexp and recognize a usage-info
	where the function name is `fn'.
	(help-function-arglist): Follow aliases and macros.
	(describe-function-1): Use keymapp.
	If the docstring contains a usage info, use it even if the function is
	not a subroutine.  Find usage info in aliases' docstring if necessary.
	(describe-variable): Get the value before setting up the *Help* buffer.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode):
	Use find-file-hook instead of find-file-hooks.
	(define-minor-mode): Get rid of this silly `togglep'.
	Add an explicit `toggle' argument (used for interactive calls).
	Emit a warning when a nil argument turns the mode off.

	* language/ethio-util.el (setup-ethiopic-environment-internal)
	(exit-ethiopic-environment): Use find-file-hook and
	write-file-functions instead of find-file-hooks and write-file-hooks.

	* window.el (handle-select-window): Don't do anything if the window
	has disappeared since the event was generated.
	(split-window-save-restore-data): Use push and with-current-buffer.

	* saveplace.el:
	* play/meese.el:
	* obsolete/hilit19.el:
	* completion.el (dynamic-completion-mode):
	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Use find-file-hook instead of find-file-hooks.

	* imenu.el (imenu-always-use-completion-buffer-p): Make obsolete.
	(imenu-use-popup-menu, imenu-eager-completion-buffer): New vars.
	(imenu-space-replacement): Allow nil value.
	(imenu--completion-buffer): Use new vars and simplify.
	Fix handling of minibuffer-setup-hook.
	Use minibuffer-completion-help instead of rolling our own.
	(imenu-choose-buffer-index): Use the new var.

	* startup.el (command-line): Load custom-file if not done yet.

2002-08-14  Kenichi Handa  <handa@etl.go.jp>

	* select.el (xselect-convert-to-string): If TYPE is non-nil, encode
	the selection data string.  Always return cons of type and string.
	(selection-converter-alist): Add (UTF8_STRING .
	xselect-convert-to-string).

2002-08-12  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-region): Force `lines' when `block' is set.

2002-08-12  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-next-tag-other-window, menu-bar-next-tag)
	(menu-bar-right-scroll-bar, menu-bar-left-scroll-bar)
	(menu-bar-no-scroll-bar, menu-bar-toggle-auto-compression)
	(menu-bar-toggle-cua-mode, menu-bar-read-mail)
	(menu-bar-help-extra-packages, help-with-tutorial-spec-language)
	(menu-bar-text-mode-auto-fill): New commands, used
	in menu bar menus instead of lambda expressions.

	(menu-bar-showhide-fringe-menu-customize-left)
	(menu-bar-showhide-fringe-menu-customize-right)
	(menu-bar-showhide-fringe-menu-customize-disable)
	(menu-bar-showhide-fringe-menu-customize-reset): Doc fixes.

	(menu-bar-options-menu): Use toggle-truncate-lines.
	(showhide-date-time): Call customize-mark-as-set.

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Obey `definition-name' properties.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode):
	Put `definition-name' properties on the functions whose
	names are constructed.

	* textmodes/page-ext.el (pages-target-buffer): Add defvar.
	Renamed from target-buffer.
	(pages-directory, pages-copy-header-and-position): Uses changed.

	* calendar/appt.el (appt-make-list): Correct the parsing of
	each appointment from time-string.

2002-08-12  Stefan Monnier  <monnier@cs.yale.edu>

	* scroll-all.el (scroll-all-mode): Use define-minor-mode.
	(scroll-all-mode) <defcustom>: Delete.
	(running-xemacs): Delete.
	(minor-mode-alist): Don't manipulate it directly.

2002-08-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (search-unencodable-char): New function.
	(select-safe-coding-system): Show unencodable characters.
	(unencodable-char-position): Deleted, and implemented in C in coding.c.

2002-04-09  John Wiegley  <johnw@gnu.org>

	* esh-util.el: Removed eshell-under-cygwin-p, and all uses of it.
	* em-cmpl.el (eshell-cmpl-ignore-case): Ditto.
	* em-dirs.el (eshell/cd): Ditto.
	* em-glob.el (eshell-glob-case-insensitive): Ditto.
	* em-hist.el (eshell-previous-matching-input-string-position): Ditto.
	* esh-ext.el (eshell-binary-suffixes): Ditto.

2002-08-09  Richard M. Stallman  <rms@gnu.org>

	* textmodes/page-ext.el (pages-directory-mode): Undo previous change.

	* simple.el (set-variable): Give locality status in prompt.

2002-08-09  Benjamin Rutt  <rutt@cis.ohio-state.edu>

	* simple.el (set-variable): If given a prefix argument, set
	variable buffer-locally.

2002-08-09  John Paul Wallington  <jpw@shootybangbang.com>

	* font-core.el (font-lock-function): Make it buffer-local.

2002-08-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc, checkdoc-interactive)
	(checkdoc-message-interactive, checkdoc-interactive-loop)
	(checkdoc-current-buffer, checkdoc-continue, checkdoc-comments)
	(checkdoc-defun):
	Update checkdoc-spellcheck-documentation-flag correctly.
	(checkdoc-ispell-docstring-engine): Don't test for
	checkdoc-autofix-flag = nil.

2002-08-07  John Paul Wallington  <jpw@shootybangbang.com>

	* xt-mouse.el (xterm-mouse-mode): Make it a global mode.

	* wid-browse.el (widget-minor-mode): Fix doc typo.

2002-08-07  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.12 released.
	(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
	Comment out possibly obsolete "echo hello" commands.
	(tramp-run-real-handler): If operation is
	`ange-ftp-hook-function', use first arg as the real operation.
	(tramp-check-ls-commands): Use / instead of \ as directory
	separator.  (Relevant for XEmacs on Windows.)
	(tramp-maybe-open-connection): Use tramp-wait-for-output when
	waiting for the "are you awake" command.  Use a different string
	for the "are you awake" command.
	(tramp-send-command): New optional arg NEVEROPEN means to never
	invoke tramp-maybe-open-connection.
	(tramp-maybe-open-connection): Use it

2002-08-07  Richard M. Stallman  <rms@gnu.org>

	* warnings.el (warning-prefix-function, warning-series)
	(warning-fill-prefix, warning-group-format): Add autoload cookies.

2002-08-07  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (select-safe-coding-system):
	Call pop-to-buffer inside save-window-excursion and save-excursion.

2002-08-06  John Paul Wallington  <jpw@shootybangbang.com>

	* help-fns.el (describe-function-1): Skip arglist note if
	function's definition is a keymap.

2002-08-06  Sam Steingold  <sds@gnu.org>

	* calendar/diary-lib.el (diary-mail-entries): Use `compose-mail'
	and `mail-user-agent' instead of straight sendmail.
	(diary-modified, diary-entries-list, displayed-year)
	(displayed-month, entry, date, number, date-string, d-file)
	(original-date): Defvar without binding to avoid compiler warnings.

2002-08-05  Alan Shutko  <ats@acm.org>

	* ibuffer.el (ibuffer-mode-map): Added ibuffer-filter-by-used-mode.
	(ibuffer-mode-map): Added ibuffer-filter-by-used-mode.
	(ibuffer-mode): Added ibuffer-filter-by-used-mode to doc string.

	* ibuf-ext.el (ibuffer-list-buffer-modes): New.
	(ibuffer-filter-by-used-mode): New.

2002-08-05  John Paul Wallington  <jpw@shootybangbang.com>

	* ediff-util.el (ediff-copy-list): Use `defalias' instead of
	`fset' and `symbol-function'.

2002-08-05  John Wiegley  <johnw@gnu.org>

	* pcomplete.el (pcomplete-entries): Don't set `above-cutoff' to a
	value unless pcomplete-cycle-cutoff-length is non-nil.

2002-04-09  John Paul Wallington  <jpw@shootybangbang.com>

	* esh-util.el (eshell-under-cygwin-p): New function.
	* em-cmpl.el (eshell-cmpl-ignore-case): Use it.
	* em-dirs.el (eshell/cd): Ditto.
	* em-glob.el (eshell-glob-case-insensitive): Ditto.
	* em-hist.el (eshell-previous-matching-input-string-position): Ditto.
	* esh-ext.el (eshell-binary-suffixes): Ditto.

2002-08-05  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system): Check for
	non-nil CODING-SYSTEM before warning it disagrees with AUTO-CS.

	* net/ange-ftp.el (ange-ftp-smart-gateway): Doc fix.

2002-08-05  Gerd Moellmann  <gerd@gnu.org>

	* image.el (image-jpeg-p): Accept "Exif" marker.

2002-08-05  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.11 released.
	(tramp-perl-file-attributes): Print uid and gid as signed integers.
	(tramp-invoke-ange-ftp): Correct check for Ange-FTP being loaded.
	Invoke Ange-FTP with tramp-run-real-handler to avoid Ange-FTP
	calling Tramp again.
	(tramp-find-file-exists-command): Check for `ls -d' last, after
	all the variants on `test -e'.
	(tramp-post-connection): Erase buffer before finding a command to
	check if file exists.

2002-08-05  David Kastrup  <David.Kastrup@t-online.de>

	* calc/calc.el (math-format-stack-value): Revert a broken
	if->when replacement and reformat so that this does not happen
	again.  Fixes a pretty lethal line formatting/yanking bug.

2002-08-04  John Paul Wallington  <jpw@shootybangbang.com>

	* startup.el (fancy-splash-frame): Check selected frame last.

2002-08-04  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.10 released.
	(tramp-uudecode): New shell function `tramp_uudecode' to decode to
	standard output even if `uudecode -p' and `uudecode -o -' don't work.
	(tramp-post-connection): After finding the right shell, wait a
	bit.  This is a kludge to avoid a race condition, even though I
	don't understand why there is a race condition in the first place.
	(tramp-post-connection): Install the `tramp_uudecode' shell
	function on the remote host.
	(tramp-coding-commands): Add an alternative for `tramp_uudecode'.
	(tramp-bug): Include more variables in the report.

2002-08-04  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.9 released.
	(tramp-bug): Add wording about additional info to include in bug
	report.
	(tramp-find-shell): Set $PS1 for invocation of second shell (for
	tilde expansion).
	(tramp-find-shell): Shell prompt must match at end of buffer.
	Do this also for fallback shell prompt.
	(tramp-find-shell): More debugging output.
	(tramp-find-inline-encoding): When checking the decoding command,
	some commands fail when reading from /dev/null.  So we pass a
	known string through the encoding command and pass that through
	the decoding command.  So we know whether the decoding command can
	deal with some real input.

2002-08-04  Andreas Schwab  <schwab@suse.de>

	* net/tramp.el (tramp-perl-encode, tramp-perl-decode): Doc fix.

2002-08-03  Andrew Choi  <akochoi@shaw.ca>

	* term/mac-win.el: Set keys to enable mouse wheel support.

2002-08-03  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.8.
	(tramp-perl-encode, tramp-perl-encode): Double the backslashes.

2002-08-03  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.7.
	(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
	(tramp-perl-encode, tramp-perl-decode): Escape `%' characters
	because of `format' and say so in the docstring.

2002-08-03  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-font-lock-keywords-1): Fix highlighting of
	`type' forms.
	(f90-font-lock-keywords-2): Fix `implicit type(foo)' case.
	(f90-type-def-re): Fix value.

2002-08-03  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Version 2.0.6.
	(tramp-default-method): Change to "ssh" from "sm".
	(tramp-wrong-passwd-regexp): Restructure.  Add additional alternative.
	(tramp-su-program): New internal variable for method parameter.
	(tramp-perl-encode-with-module, tramp-perl-decode-with-module):
	New variables.  Very short Perl one-liner, but requires Perl
	module MIME::Base64 to be installed on the remote site.
	(tramp-perl-encode, tramp-perl-decode): New base64
	encoder/decoder.  From Juanma Barranquero <lektu@terra.es>.
	(tramp-handle-file-truename): Invoke Ange-FTP properly (even
	though Ange-FTP doesn't do anything for this operation).
	(tramp-handle-set-visited-file-modtime): Comment change.
	(tramp-handle-make-directory): Save-excursion.
	(tramp-handle-expand-many-files): Don't try to invoke Ange-FTP
	twice, once is enough.
	(tramp-action-permission-denied): Show *tramp/foo* buffer so the
	user knows what's wrong.
	(tramp-post-connection): Support the two Perl encoders and decoders.
	(tramp-coding-commands): Ditto.  Add some todo items.

2002-08-02  Richard M. Stallman  <rms@gnu.org>

	* international/mule.el (merge-coding-systems): New function.
	(set-buffer-file-coding-system): Use merge-coding-systems.
	Change prompt for args.
	(revert-buffer-with-coding-system): New command.

	* international/mule-cmds.el (mule-keymap, set-coding-system-map):
	Add bindings for revert-buffer-with-coding-system.
	(set-coding-system-map): Clarify menu item info for
	set-buffer-file-coding-system.
	(set-coding-system-map): Reorder and add separators.

	* emacs-lisp/edebug.el (edebug-eval-top-level-form):
	Use eval-expression.

	* subr.el (atomic-change-group): Doc fix.

2002-07-31  Colin Walters  <walters@debian.org>

	* ibuffer.el (ibuffer-hooks): Rename to `ibuffer-hook'; Add
	defvaralias for compatibility.
	(ibuffer-mode-hooks): Rename to `ibuffer-mode-hook'; Add
	defvaralias for compatibility.

2002-07-31  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-fontification-alist):
	Use `font-lock-constant-face' instead of `font-lock-reference-face'.

2002-07-31  John Wiegley  <johnw@gnu.org>

	* pcomplete.el (pcomplete-comint-setup): Use `add-to-list', to
	prevent adding the symbol `pcomplete' to
	shell-dynamic-complete-functions to many times.

2002-07-31  Markus Rost  <rost@math.ohio-state.edu>

	* help-fns.el (describe-function-1): Test function for
	obsolescence only if it is a symbol.

	* ediff.el (ediff-backup): New autoloaded command.

2002-07-31  Richard M. Stallman  <rms@gnu.org>

	* makefile.w32-in (compile-after-backup): Renamed from `compile'.
	Use `compile-always'.
	(bootstrap): Use `compile', not `compile-files'.  Use `update-subdirs'.
	(compile): Renamed from `compile-files'.
	(compile-CMD, compile-SH): Renamed from `compile-files-*'.

	* emacs-lisp/bytecomp.el (byte-compile-find-cl-functions):
	Check that (car elt) is a string.

	* pcomplete.el (pcomplete-entries): Doc fix.

	* international/mule.el (non-standard-icccm-encodings-alist): Doc fix.

2002-07-31  Andreas Schwab  <schwab@suse.de>

	* dired.el: Hide disabling of dired-find-alternate-file behind
	autoload-cookie.

2002-07-31  Tak Ota  <Takaaki.Ota@am.sony.com>

	* makefile.w32-in: Revert some changes from 2002-07-23 because they
	don't work on MSVC/nmake builds.
	(update-subdirs-CMD): Generate the right list of subdirectories.

2002-07-30  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: New version 2.0.5.
	(tramp-methods): Remove inline encoding method parameters.
	The encoding is now autodetected.  Also shorten the list of
	methods (u/m distinction gone) and rename the remaining methods to
	have longer, but more mnemonic, names.
	(tramp-login-prompt-regexp, tramp-password-prompt-regexp)
	(tramp-wrong-passwd-regexp): Trailing `$' not needed, regexp is
	matched at end of buffer anyway.
	(tramp-yesno-prompt-regexp): New variable, for questions where the
	user should say "yes" or "no".
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate): Allow dash in method names.
	(tramp-actions-before-shell): New variable, contains list of
	pattern/action pairs.  Output sent by remote end is scanned for
	the patterns, then the actions are executed.
	(tramp-multi-actions): Like `tramp-actions-before-shell', but
	executed for each hop in a multi-hop connection.
	(tramp-last-cmd-time): New variable.  If nothing has been sent to
	remote end for 60 seconds, look to see if the remote end is still
	alive.
	(tramp-perl-mime-encode, tramp-perl-mime-decode): Remove.
	It didn't work.
	(tramp-perl-encode, tramp-perl-decode): New variables, these
	require the MIME::Base64 module on the remote end.
	(tramp-handle-file-attributes): Restructure logic.
	(tramp-handle-file-attributes-with-ls)
	(tramp-handle-file-attributes-with-perl): More debugging.
	(tramp-handle-directory-files): Grok fifth arg `files-only' for XEmacs.
	(tramp-handle-make-directory, tramp-handle-delete-directory)
	(tramp-handle-delete-file, tramp-handle-insert-directory):
	Expand file name.
	(tramp-handle-shell-command): Use `when', not `if'.
	(tramp-handle-file-local-copy, tramp-handle-write-region):
	Adapt to autodetection of inline encoding.
	(tramp-invoke-ange-ftp): Require ange-ftp to make sure that
	variable ange-ftp-name-format is defined before binding it.
	(tramp-action-login, tramp-action-password, tramp-action-succeed)
	(tramp-action-permission-denied, tramp-action-yesno):
	Functions called from `tramp-actions-before-shell'.
	(tramp-multi-action-login, tramp-multi-action-password)
	(tramp-multi-action-succeed, tramp-multi-action-permission-denied):
	Functions called from `tramp-multi-actions'.
	(tramp-process-one-action, tramp-process-actions):
	Pattern matching and action invocation code for
	`tramp-actions-before-shell'.
	(tramp-process-one-multi-action, tramp-process-multi-actions):
	Same for `tramp-multi-actions'.
	(tramp-open-connection-telnet, tramp-open-connection-rsh)
	(tramp-open-connection-su): Process actions instead of hardwired logic.
	(tramp-multi-connect-telnet, tramp-multi-connect-rlogin)
	(tramp-multi-connect-su): Ditto.
	(tramp-post-connection): New method for tramp_encode and
	tramp_decode scripts.
	(tramp-post-connection): Invoke inline autodetection code.
	(tramp-coding-commands): List of inline codings.
	(tramp-find-inline-encoding): This is the inline autodetection code.
	(tramp-maybe-open-connection): If nothing was sent to connection
	for 60 seconds, look if it connection is still alive.
	(tramp-send-command): Remember that something was sent to the
	connection.
	(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
	Use backticks for constructing alist.
	(tramp-get-encoding-command, tramp-set-encoding-command)
	(tramp-get-decoding-command, tramp-set-decoding-command)
	(tramp-get-encoding-function, tramp-set-encoding-function)
	(tramp-get-decoding-function, tramp-set-decoding-function):
	Use for results of inline autodetection.
	(tramp-get-encoding-command, tramp-get-decoding-command)
	(tramp-get-encoding-function, tramp-get-decoding-function):
	Remove these old functions.

2002-07-30  Kenichi Handa  <handa@etl.go.jp>

	* language/indian.el (in-is13194): Give correct `safe-chars' property.
	(devanagari): Define it as an alias of in-is13194.

	* international/mule.el (safe-chars):
	Put `char-table-extra-slots' property with value 0.

	* files.el (revert-buffer): Fix previous change.

2002-07-29  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (help-echo): If global-mode-string is non-nil,
	display some spaces after it.

	* emacs-lisp/bytecomp.el (byte-compile-find-cl-functions):
	Don't call string-match on non-string.

	* textmodes/ispell.el (check-ispell-version): Bind default-directory
	to avoid errors.  Kill the old temp buffer at the beginning.

2002-07-29  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* scroll-all.el (scroll-all-mode): Make argument optional.  Doc fix.

2002-07-29  John Paul Wallington  <jpw@shootybangbang.com>

	* scroll-all.el (scroll-all-mode): Handle numeric arg.  Use `if'
	instead of `cond'.

2002-07-29  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (ctext-post-read-conversion): Add support
	for embedded utf-8 encoding (ESC % G ... ESC % @).

2002-07-28  Kenichi Handa  <handa@etl.go.jp>

	* files.el (revert-buffer): Before calling insert-file-contents,
	kill the local variable buffer-file-coding-system.

2002-07-28  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (mode-line-format): Handle vc-mode specially.
	Move mode-line-position to after global-mode-string.
	(mode-line-modes): Move the starting 3 spaces out of here.
	(mode-line-position): Separate with a space, not dashes.

	* vc-hooks.el: Don't add to minor-mode-alist.

	* emacs-lisp/edebug.el (edebug-debugger):
	If inside redisplay, just return.

	* emacs-lisp/debug.el (debug): If inside redisplay, just return.

	* info.el (Info-find-index-name): Improve last change.

2002-07-27  Richard M. Stallman  <rms@gnu.org>

	* files.el (file-name-sans-extension): Avoid expanding DIRECTORY.

	* calendar/cal-hebrew.el (diary-rosh-hodesh): Cons mark on
	in the third case.

2002-07-27  Markus Rost  <rost@math.ohio-state.edu>

	* ps-print.el: Update copyright year.
	(ps-begin-cut-regexp, ps-end-cut-regexp): Fix type.

2002-07-26  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* eshell/eshell.el (eshell): Numeric prefix arg means to switch
	to the session with that number.  Old behavior still available
	with nonumeric prefix args.

2002-07-08  Simon Josefsson  <jas@extundo.com>

	* mail/mail-extr.el (mail-extr-all-top-level-domains): Update names.

2002-07-26  Juanma Barranquero  <lektu@terra.es>

	* warnings.el (lwarn, warn, warning-levels): Doc fix.
	(warning-suppress-log-types): Fix typo.
	(display-warning): Fix typo.  Remove useless assignment to free variable
	`group-string'.

2002-07-25  Markus Rost  <rost@math.ohio-state.edu>

	* ediff-wind.el (ediff-window-setup-function): Extend type declaration.

2002-07-25  Sam Steingold  <sds@gnu.org>

	* replace.el (occur-rename-buffer): New command.
	(occur-mode-map): Bind "r" to it.  Added keybindings for
	`kill-this-buffer', `clone-buffer' and `quit-window'.

2002-07-25  Kevin Ryde  <user42@zip.com.au>

	* info.el (Info-find-index-name): Search for a function definition
	with a return type.

2002-07-25  David Ponce  <david@dponce.com>

	* emacs-lisp/bytecomp.el (byte-compile-set-symbol-position):
	Don't recompute `entry' on each iteration.
	(byte-compile-delete-first): Make it defsubst.

2002-07-25  Sam Steingold  <sds@gnu.org>

	* progmodes/cc-engine.el (c-search-uplist-for-classkey):
	When `search-end' is a cons, use its car.

2002-07-25  Dave Love  <fx@gnu.org>

	* obsolete/c-mode.el: Deleted.

2002-07-25  Carsten Dominik  <dominik@astro.uva.nl>

	* textmodes/reftex.el (reftex-compile-variables):
	Simplified regular expression.

	* textmodes/reftex-parse.el (reftex-locate-bibliography-files):
	Simplified the regexp.

	* textmodes/reftex-cite.el (reftex-get-bibkey-default): New function.
	(reftex-extract-bib-entries-from-thebibliography):
	Use `reftex-get-bibkey-default' to get a default regex.
	(reftex-extract-bib-entries): Use `reftex-get-bibkey-default' to
	get a default regex.

	* textmodes/reftex-toc.el (reftex-toc-mode): Use `make-local-hook' for
	XEmacs compatibility (got OK from RMS).

	* textmodes/reftex-index.el (reftex-index-mode): Likewise.

	* textmodes/reftex-sel.el (reftex-select-label-mode): Likewise.
	(reftex-select-bib-mode): Likewise.

2002-07-25  Colin Walters  <walters@debian.org>

	* ibuffer.el (ibuffer-mouse-popup-menu): Allow point to be moved
	by menu functions.

2002-07-24  Dave Love  <fx@gnu.org>

	* international/mule.el (set-auto-coding): Doc fix.

	* international/utf-16.el: New file.

	* language/european.el ("German", "French", "Spanish", "Turkish"):
	Add alternative coding systems.
	("Dutch"): Likewise.  Add input method.
	("Welsh", "Latin-7"): Add nonascii-translation.

	* language/georgian.el ("Georgian"): Add nonascii-translation.

	* international/titdic-cnv.el: Doc fixes.
	(tit-process-header): Add coding cookie.
	(titdic-convert): Force writing as iso-2022-7bit.

	* international/ja-dic-cnv.el (skkdic-convert): Add coding cookie.

	* international/mule-cmds.el: Doc fixes.
	(unencodable-char-position): New.
	(select-safe-coding-system): Use it to indicate problematic
	characters and add extra explanation.  Avoid checking auto-coding
	for compressed files.
	(leim-list-header): Add coding cookie.
	(input-method-verbose-flag): Modify :type.
	(locale-language-names): Add bs, wa.  Modify cy.

2002-07-24  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-log-warning):
	Bind warning-group-format.

	* emacs-lisp/bytecomp.el (byte-compile-cl-functions): New variable.
	(byte-compile-cl-warn): Use that variable.
	(byte-compile-find-cl-functions): New function.
	(displaying-byte-compile-warnings):
	Call byte-compile-find-cl-functions.

	* warnings.el (warning-levels): Add %s to the strings.
	(warning-group-format): New variable.
	(warning-suppress-log-types): Renamed from warning-suppress-log.
	(warning-suppress-types): Renamed from warning-suppress.
	(display-warning): Implement those changes.

2002-07-23  Richard M. Stallman  <rms@gnu.org>

	* warnings.el: Add `provide' call.

	* files.el (basic-save-buffer-2): If there's an error writing the file,
	unrename the backup file if it was just made.
	(backup-buffer, basic-save-buffer-2, basic-save-buffer-1)
	(basic-save-buffer): Value now has form (MODES . BACKUPNAME)
	when a backup was just made by renaming.  Otherwise it's nil.

	* wid-edit.el (widget-convert): Handle an argument that's a keyword.
	Recognize explicit :args specification.

	* international/mule-cmds.el (select-safe-coding-system):
	Don't ask for confirmation of mismatch if find-file-literally was used.

2002-07-23  Markus Rost  <rost@math.ohio-state.edu>

	* add-log.el (add-log-current-defun): Fix typo in documentation.

2002-07-22  Markus Rost  <rost@math.ohio-state.edu>

	* add-log.el (add-log-mailing-address): Fix type.  Can be a string.

	* ido.el (ido-separator): Fix type.

2002-07-23  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (DONTCOMPILE): Remove cus-start.el.
	(DONTCOMPILE): Add various language files.
	(DONTCOMPILE): Remove term/xterm.el.
	(finder-inf.el): Remove.
	(update-authors): New target.
	(TAGS-LISP): Remove $(lispsource).
	(compile-always): Renamed from `compile-files'.
	(compile): New target, adapted from `compile-files'.
	(compile-calc): New target.
	(recompile): Change `.' to $(lisp).
	(bootstrap): Add update-subdirs and finder-data
	to dependencies; change compile-files to compile.

2002-07-22  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-next-action-on-file): Preserve find-file-literally.

2002-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* simple.el (undo, undo-more): Adjust messages when undoing in a
	region.

2002-07-22  John Paul Wallington  <jpw@shootybangbang.com>

	* net/browse-url.el (browse-url-lynx-input-attempts): Use defcustom.
	(browse-url-lynx-input-delay): Add custom type and group.

	* cus-start.el (double-click-fuzz): Added.

2002-07-22  Alan Shutko  <ats@acm.org>

	* calendar/solar.el (diary-sabbath-candles): Add optional MARK
	parameter, specifying what face or character to use in the
	calendar display.  These will now return (MARK . ENTRY).

	* calendar/lunar.el (diary-phases-of-moon): Add optional MARK
	parameter, specifying what face or character to use in the
	calendar display.  These will now return (MARK . ENTRY).

	* calendar/cal-hebrew.el (diary-omer, diary-yahrzeit)
	(diary-rosh-hodesh, diary-parasha, diary-parasha): Add optional
	MARK parameter, specifying what face or character to use in the
	calendar display.  These will now return (MARK . ENTRY).

	* calendar/diary-lib.el (mark-sexp-diary-entries): Retrieve mark
	from diary-sexp-entry and pass it to mark-visible-calendar-date.
	(list-sexp-diary-entries): Update doc string for new docs for ....
	If diary-sexp-entry returns a cons, only add the text to the diary
	list.
	(diary-sexp-entry): Allow sexps to return a cons of the form (MARK
	. STRING) to specify what face or character mark should be used in
	the calendar display.
	(diary-date, diary-block, diary-float, diary-anniversary)
	(diary-cyclic): Add optional MARK parameter, specifying what face
	or character to use in the calendar display.  These will now
	return (MARK . ENTRY).

	* calendar/diary-lib.el (check-calendar-holidays, diary-iso-date)
	(calendar-holiday-list, diary-french-date, diary-mayan-date)
	(diary-julian-date, diary-astro-day-number, diary-chinese-date)
	(diary-islamic-date, list-islamic-diary-entries)
	(mark-islamic-diary-entries, mark-islamic-calendar-date-pattern)
	(diary-hebrew-date, diary-omer, diary-yahrzeit, diary-parasha)
	(diary-rosh-hodesh, list-hebrew-diary-entries)
	(mark-hebrew-diary-entries, mark-hebrew-calendar-date-pattern)
	(diary-coptic-date, diary-persian-date, diary-phases-of-moon)
	(diary-sunrise-sunset, diary-sabbath-candles):
	Remove interactive flag from autoloads.

2002-07-22  Carsten Dominik  <dominik@astro.uva.nl>

	* textmodes/reftex-vars.el (reftex-index-verify-function): New option.
	(reftex-bibliography-commands): New option.
	(reftex-toc-split-windows-horizontally): New option.
	(reftex-toc-split-windows-horizontally-fraction): New option.
	(reftex-include-file-commands): New option.
	(reftex-cite-format-builtin): Added ?n for nocite.

	* textmodes/reftex-index.el (reftex-query-index-phrase):
	Use `reftex-index-verify-function'.

	* textmodes/reftex-toc.el (reftex-re-enlarge):
	Handle horizontal splitting.
	(reftex-toc): Handle horizontal splitting.
	(reftex-last-window-width): New variable.

	* textmodes/reftex-parse.el (reftex-locate-bibliography-files):
	Use `reftex-bibliography-commands'.
	(reftex-locate-bibliography-files): Regexp relaxed to allow for
	cases where \bibliography is not the first thing on the line.

	* textmodes/reftex.el (reftex-compile-variables):
	Use `reftex-include-file-commands'.
	(reftex-type-query-prompt): Changed defconst to defvar.
	(reftex-type-query-help, reftex-typekey-to-format-alist)
	(reftex-typekey-to-prefix-alist, reftex-env-or-mac-alist)
	(reftex-special-env-parsers, reftex-label-mac-list)
	(reftex-label-env-list, reftex-typekey-list)
	(reftex-words-to-typekey-alist, reftex-key-to-index-macro-alist)
	(reftex-query-index-macro-prompt, reftex-query-index-macro-help)
	(reftex-no-follow-message, reftex-no-info-message): Likewise.
	(reftex-mode): Define systax table for bibtex parsing.
	(reftex-syntax-table-for-bib): Syntax table for bibtex parsing.

	* textmodes/reftex-cite.el (reftex-format-names): %a as name
	format lists all names.
	(reftex-parse-bibtex-entry): Use `reftex-syntax-table-for-bib'.
	(reftex-with-special-syntax-for-bib): New macro.

2002-07-21  Richard M. Stallman  <rms@gnu.org>

	* international/ucs-tables.el (ucs-quail-activate):
	Cope if buffer-file-coding-system is nil.

	* bindings.el (last-buffer): Use buffer-list with frame arg.
	Create *scratch* if no other choice exists.  Fix bugs.

2002-07-21  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el: Bump version to 2.0.2.
	(tramp-methods): Rename methods invoking "ssh1" or "ssh2" to
	longer names.  Use old names "sm1", "sm2" and so on for methods
	invoking "ssh -1" or "ssh -2".
	(tramp-multi-file-name-structure-separate): Typo, its name was set
	to "tramp-file-name-structure-separate".  Trivial patch.
	From Steve Youngs <youngs@xemacs.org>.
	(tramp-multi-sh-program): New variable.
	(tramp-open-connection-multi): Use it.  Now you can use multi
	methods from Windows (at least in principle).
	(tramp-do-copy-or-rename-via-buffer): New function.
	(tramp-do-copy-or-rename-file): Use it.  Change and simplify
	logic.  Omit special case of invoking rcp directly to copy the files.
	(tramp-open-connection-su, tramp-multi-connect-telnet)
	(tramp-multi-connect-rlogin, tramp-multi-connect-su)
	(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
	Use backticks in format-spec for brevity and to avoid
	character/number confusion in XEmacs.

2002-07-20  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-documentation-string-value-create):
	Say "Hide Rest", not just "Hide".

	* cus-edit.el (custom-variable-value-create):
	Say "Show Value", not just "Show".  Also "Hide Value".
	Output a newline before the doc string.
	(custom-face-value-create): Say "Show Face" and "Hide Face".

	* files.el (toggle-read-only): Clean up the hint message.

	* emacs-lisp/bytecomp.el: Use warnings.el.
	(byte-compile-warning-prefix): New function.
	(byte-compile-log-file): Return page start position.
	(byte-compile-log-warning): New function.
	(byte-compile-warn): Use byte-compile-log-warning.
	(byte-compile-report-error): Likewise.  Also use error-message-string.
	(displaying-byte-compile-warnings): Bind warning-series.
	Don't bind or use byte-compile-warnings-point-max.
	Don't display the log buffer at the end.
	(byte-compile-warnings-point-max): Variable deleted.
	(byte-compile-log-1): Rewrite for trace info, not used for warnings.
	(byte-compile-last-warned-form, byte-compile-last-logged-file):
	Defvars moved.

	* warnings.el: New file.

2002-07-19  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-cl-warn): Delete `values'
	and `values-list' from list of CL functions.

2002-07-19  John Paul Wallington  <jpw@shootybangbang.com>

	* emacs-lisp/bytecomp.el (compile-defun):
	Bind `read-with-symbol-positions' to current buffer.

2002-07-19  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-insert-file): When called with a LIMIT regexp,
	delete anything that comes after LIMIT from the buffer.

	* vc-rcs.el (vc-rcs-fetch-master-state): Be more careful to check
	if this is really an RCS master file.

	* vc.el: Improve comment of vc-BACKEND-workfile-unchanged-p.

2002-07-19  Juanma Barranquero  <lektu@terra.es>

	* emacs-lisp/bytecomp.el (dot, dot-max, dot-min, dot-marker)
	(buffer-flush-undo, baud-rate, compiled-function-p, define-function)
	(unread-command-char, executing-macro, post-command-idle-hook)
	(post-command-idle-delay): Move obsolescence declarations to subr.el.

	* subr.el (dot, dot-max, dot-min, dot-marker, buffer-flush-undo)
	(baud-rate, compiled-function-p, define-function, unread-command-char)
	(executing-macro, post-command-idle-hook, post-command-idle-delay):
	Move obsolescence declarations from emacs-lisp/bytecomp.el.
	(directory-sep-char, mode-line-inverse-video):
	Add obsolescence declaration.

2002-07-18  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el: Updated to IDLWAVE version 4.14.  Too many
	changes to list them here.

	* progmodes/idlw-shell.el: Updated to IDLWAVE version 4.14.
	Too many changes to list them here.

	* progmodes/idlw-rinfo.el: Updated to IDLWAVE version 4.14.
	Too many changes to list them here.

	* progmodes/idlw-toolbar.el: Updated to IDLWAVE version 4.14 with
	only minor documentation changes.

2002-07-18  Dave Love  <fx@gnu.org>

	* info-look.el: Support current auto{conf,make} manuals.

2002-07-18  Juanma Barranquero  <lektu@terra.es>

	* bindings.el (last-buffer): Add missing frame argument.

2002-07-18  Richard M. Stallman  <rms@gnu.org>

	* timer.el (timer-inc-time): Doc fix.

	* replace.el (keep-lines, flush-lines): Interactively report
	read-only error before reading regexp argument.

	* dabbrev.el (dabbrev--search): Use inhibit-point-motion-hooks.

	* bindings.el (last-buffer): Handle buffer-list and buffer-predicate
	frame parameters like bury-buffer.

	* simple.el (choose-completion-delete-max-match):
	Handle minibuffer prompts explicitly.

2002-07-18  Juanma Barranquero  <lektu@terra.es>

	* international/mule-util.el (string-to-sequence, truncate-string):
	Add autoload cookie to obsolescence declaration.

	* rect.el (move-to-column-force): Likewise.

	* composite.el (decompose-composite-char): Likewise; also remove
	redundant info.

2002-07-18  Kim F. Storm  <storm@cua.dk>

	* loadup.el: Load international/utf-8 before international/characters.

2002-07-17  Dave Love  <fx@gnu.org>

	* international/ucs-tables.el: Optimize tables.  Deal with some
	non-8859 charsets.
	(ucs-mule-to-mule-unicode): New.
	(ucs-unify-8859): Use utf-8-fragment-on-decoding, set up Quail
	translation.
	(ucs-fragment-8859): Modified consistent with ucs-unify-8859.
	(unify-8859-on-encoding-mode): Doc mod.  Fix custom version.
	(unify-8859-on-decoding-mode): Doc mod.  Change code.  Fix custom
	version.  Add custom dependencies.
	(ucs-insert): Check for null from decode-char.
	(translation-table-for-input, ucs-quail-activate)
	(ucs-minibuffer-setup, ccl-encode-unicode-font)
	(ucs-tables-unload-hook): New.

	* international/mule.el (define-translation-hash-table): New.
	(decode-char): Use utf-8-translation-table-for-decode.
	(encode-char): Use ucs-mule-to-mule-unicode.

	* international/characters.el: Fix settings of U+2000-U+2027.
	Remove Ω.

	* international/mule-cmds.el (locale-language-names): Fix be, add
	sr_YU@cyrillic, modify tg.
	(locale-charset-language-names): Put @euro last.

	* language/cyrillic.el (cyrillic-koi8-r-decode-table)
	(cyrillic-alternativnyj-decode-table): Fill out with mule-unicode.
	(cyrillic-koi8-r-decode-table): Make unbound after use.
	(ccl-decode-koi8, ccl-decode-alternativnyj): Change expansion
	factor.  Use utf-8-translation-table-for-decode.
	(ccl-encode-koi8, ccl-encode-koi8): Don't check r0.
	(cyrillic-unify-encoding): New function.
	(cyrillic-koi8): Modify safe-chars, valid-codes.
	Remove charset-origin-alist.
	(Cp878, cp866): New alias.
	(ccl-encode-8859-5-font): New.
	(font-ccl-encoder-alist): Add ccl-encode-8859-5-font.
	(ccl-encode-koi8-font, ccl-encode-alternativnyj-font):
	Remove redundant parens.
	("Cyrillic-KOI8"): Add cyrillic-iso-8bit to coding-priority.
	(cyrillic-koi8-u-decode-table, ccl-decode-koi8-u)
	(ccl-encode-koi8-u, koi8-u, ccl-encode-koi8-u-font, "Ukrainian"): New.
	(cyrillic-alternativnyj): Modify safe-chars, add mime-charset.
	("Cyrillic-ALT"): Change input method.
	("Windows-1251", "Tajik", "Bulgarian", "Belarusian"): New.

	* international/utf-8.el (utf-8-subst-table)
	(utf-8-subst-rev-table, utf-8-translation-table-for-decode)
	(utf-8-fragment-on-decoding, ccl-untranslated-to-ucs)
	(utf-8-ccl-regs, utf-8-translate-cjk): New.
	(ccl-encode-mule-utf-8): Use utf-8-subst-rev-table.
	(ccl-decode-mule-utf-8, ccl-untranslated-to-ucs)
	(utf-8-untranslated-to-ucs, utf-8-compose): Rewritten.
	(mule-utf-8): Remove pre-write-conversion.
	(utf-8-post-read-conversion): Comment out.

	* international/ccl.el (ccl-command-table): Add lookup-integer,
	lookup-character.
	(ccl-extended-code-table): Add lookup-int-const-tbl,
	lookup-char-const-tbl.
	(ccl-compile-lookup-integer, ccl-compile-lookup-character)
	(ccl-dump-lookup-int-const-tbl, ccl-dump-lookup-char-const-tbl):
	New functions.
	(define-ccl-program): Doc update.

	* international/utf-8-subst.el: Populate utf-8-subst-rev-table.
	(utf-8-subst-table): Don't set.

2002-07-17  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (define-coding-system-alias):
	Don't append ALIAS in the property `alias-coding-systems' if ALIAS's
	eol-type is not auto-detection.

	* international/mule-diag.el (print-coding-system-briefly):
	Fix the handling of an alias of which eol-type is not auto-detection.

	* international/mule-conf.el (us-ascii): Define it as an alias of
	iso-safe.

2002-07-17  Juanma Barranquero  <lektu@terra.es>

	* help-fns.el (describe-function-1): Put empty line before "Not
	documented" text.

	* timer.el (timer-set-time-with-usecs): Mark obsolete.

2002-07-16  Stefan Monnier  <monnier@cs.yale.edu>

	* toolbar/tool-bar.el (tool-bar-add-item-from-menu):
	Make sure to change the global tool-bar-map.

	* vc.el (vc-default-comment-history): Hard code *vc*.
	This is because print-log always prints there now.
	(vc-annotate-font-lock-keywords): New var.
	(vc-annotate-mode): Use it.  Set truncate-lines as well.
	(vc-annotate-display-select): Unify the two error reports.
	(vc-annotate-offset): New var.
	(vc-annotate-lines): New fun extracted from vc-annotate-display.
	(vc-annotate-display): Use it, via font-lock.

	* help-fns.el (help-split-fundoc, help-function-arglist)
	(help-make-usage): New funs, extracted from describe-function-1.
	(describe-function-1): Use them.

	* help.el (help-key-description): Show the untranslated keys
	when they start with ESC and the ESC was not translated.

	* help-mode.el (view): Always require.
	(help-xref-mule-regexp): Don't use defconst for variables.
	(help-setup-xref): Keep the last 10 elements of the stack.
	(help-xref-override-view-map): New var.
	(help-make-xrefs): Use it instead of building a new map each time.
	(help-function-def): Allow help-fun to take a buffer as arg.

	* diff-mode.el (diff-reverse-direction): Simplify.
	(diff-after-change-function): Fix typo.
	(diff-post-command-hook): Take care of edge cases.
	(diff-current-defun): Do `goto-char' after setting the mode.

	* mouse-sel.el (mouse-sel-mode): Use define-minor-mode.
	Fold mouse-sel-bindings into it.
	(mouse-sel-bound-events): Turn it into an alist.
	(mouse-insert-selection): Delegate to mouse-yank-at-click if
	mouse-sel-default-bindings asks for it.

2002-07-16  Andre Spiegel  <spiegel@gnu.org>

	* files.el: Bind toggle-read-only to C-x C-q.
	(toggle-read-only): Display a warning message if the file is under
	version control.

	* vc-hooks.el: Don't bind vc-toggle-read-only to C-x C-q.
	(vc-toggle-read-only): Explain in the doc string that users can bind
	this to C-x C-q.
	(vc-checkout-model): Change doc string to refer to vc-next-action,
	not vc-toggle-read-only.

	* vc.el (vc-next-action-on-file): Ignore buffer-read-only while
	comparing to file on disk.  Fix the case when claiming the lock
	on a file that has unlocked changes.
	(vc-log-mode): Don't mention vc-toggle-read-only in the doc string.

2002-07-16  Richard M. Stallman  <rms@gnu.org>

	* simple.el (choose-completion-string): Doc fix.

	* cus-edit.el: New operation :custom-standard-value.
	(Custom-reset-standard): Use it.
	(custom-variable, custom-face): Define it.
	(custom-variable-standard-value, custom-face-standard-value): New fns.
	(custom-face-save): Don't save a face whose value is standard.
	(custom-save-faces): Use SYMBOL, not 'default, to set NOW and COMMENT.

	* cus-edit.el (custom-face-edit-fix-value):
	If VALUE is not a list, pass it thru.

	* compare-w.el (compare-windows-whitespace): Always allow newline
	even if it does not have whitespace syntax.

2002-07-16  Juanma Barranquero  <lektu@terra.es>

	* timer.el (timer-set-time, timer-set-time-with-usecs): Fix docstring.

2002-07-15  Juanma Barranquero  <lektu@terra.es>

	* help-fns.el (describe-variable): Show documentation for aliased
	variable if alias does not have its own.

2002-07-15  Mike Williams  <mdub@bigfoot.com>

	* mouse-sel.el (mouse-sel-bindings): Save/restore interprogram
	cut/paste functions.

2002-07-14  Richard M. Stallman  <rms@gnu.org>

	* files.el (find-alternate-file): Offer to save a modified buffer.
	Handle kill-buffer-query-functions better.

	* startup.el (normal-splash-screen, fancy-splash-text):
	Update name of help menu item for ordering printed manuals.

	* emacs-lisp/checkdoc.el: Fix doc typos.

2002-07-14  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/tex-mode.el: Set encoding to utf-8.
	(tex-start-options): Make it into always-a-string.
	Remove silly custom options that are covered by the other var.
	(tex-start-commands): Fix docstring.
	(tex-open-quote, tex-close-quote): Add options.
	(tex-command): Provide default.
	(tex-font-lock-keywords-1): Highlight $$...$$.
	(tex-font-lock-keywords-2): Fix latin-1 chars.
	(tex-mode-map): Remove redundant \t binding.
	(tex-mode): Add `subsection' and `newcommand' to known latex cmds.
	(latex-mode): Use add-hook for fill-nobreak-predicate.
	(tex-common-initialization): Set indent-tabs-mode to nil.
	(tex-insert-quote): Undo magic if invoked twice in a row.
	(latex-fill-nobreak-predicate): Don't use narrowing.
	(tex-latex-block): Don't cons uselessly.
	(tex-last-unended-begin): Signal user-friendlier error.
	(tex-goto-last-unclosed-latex-block): Don't catch signal.
	(tex-start-tex): Switch order of tex-start-options and
	tex-start-commands to make it obey docstrings.

2002-07-14  Mike Williams  <mdub@bigfoot.com>

	* mouse-sel.el (mouse-sel-bound-events): New constant.
	(mouse-sel-bindings): Save/restore original mouse-bindings.

2002-07-13  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/cl.el (cl-set-substring): Fix thinko.
	(cl-hack-byte-compiler): Avoid infinite require loop.

	* net/ange-ftp.el: Use hash-tables.
	(ange-ftp-make-hashtable, ange-ftp-map-hashtable)
	(ange-ftp-make-hash-key, ange-ftp-get-hash-entry)
	(ange-ftp-put-hash-entry, ange-ftp-del-hash-entry): Remove.
	Replace with make-hash-table, maphash, gethash, puthash and remhash.
	(ange-ftp-hash-entry-exists-p): Rewrite.
	(ange-ftp-vms-delete-file-entry, ange-ftp-vms-add-file-entry):
	Change mapatom -> maphash.
	(ange-ftp-file-entry-active-p, ange-ftp-file-entry-not-ignored-p):
	Update to new calling mode.

	* progmodes/ebrowse.el (ebrowse-symbol-regexp): Avoid cl-set-substring.
	(ebrowse-hash-table-to-alist): Delete.
	(ebrowse-tags-read-name, ebrowse-tags-list-members-in-file)
	(ebrowse-tags-complete-symbol): Use the hashtable for completion.

	* textmodes/sgml-mode.el (sgml-quote): Use narrowing.
	Improve the regexp used when unquoting.
	(sgml-pretty-print): New function.
	(sgml-get-context): Better handling of improperly nested tags.
	(sgml-show-context): Don't use the FULL arg of sgml-get-context.

2002-07-13  Andreas Schwab  <schwab@suse.de>

	* mail/mailabbrev.el (mail-abbrev-make-syntax-table): Check the
	inherited table entry.

2002-07-13  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/timeclock.el (timeclock-in): Handle the case where no
	log file exists (ie the very first call).

2002-07-13  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/ange-ftp.el: Do not hook into file-name-handler-alist, this
	is done by Tramp.

	* net/tramp.el (tramp-multi-file-name-structure-unified):
	Add missing slash and move colon from start to end of each hop.
	(tramp-multi-file-name-hop-structure-unified): Move colon from
	start to end of each hop.

2002-07-13  Kim F. Storm  <storm@cua.dk>

	* progmodes/compile.el (grep-tree): Fixed autoload.
	Corrected use of undefined variable `match-files-aliases'.

2002-07-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/timeclock.el (timeclock-get-workday-function):
	`timeclock-workday' is not a valid option, rather a possible
	return value.

2002-07-12  Richard M. Stallman  <rms@gnu.org>

	* net/ange-ftp.el (ange-ftp-write-region):
	Don't bind executing-kbd-macro; instead, pass non-nil VISIT arg
	to ange-ftp-real-write-region.

	* replace.el (flush-lines, keep-lines): Convert REND to a marker.

	* help-fns.el (help-with-tutorial): Display completion list right away.

	* ediff-ptch.el (ediff-test-patch-utility): Catch error and return nil.

	* startup.el (command-line): Set memory-signal-data.
	(fancy-splash-text, normal-splash-screen):
	Mention "Read the Emacs Manual" or C-h r.
	Rearrange the initial help to put the help cmds on left
	and the actions (exit, undo) on the right.  Other small
	text clarifications.
	(fancy-splash-text, actions page): Add blank line to balance help page.

	* help.el (help-map): Add binding for info-emacs-manual.
	(print-help-return-message): Doc fix.

	* strokes.el (strokes-help): Call print-help-return-message
	while inside with-output-to-temp-buffer.

	* info.el (info-emacs-manual): New function.
	(Info-use-header-line): Doc fix.

	* emacs-lisp/cl.el (multiple-value-call): Add alias.

	* progmodes/compile.el (compilation-normalize-filename):
	New subroutine, taken out of compilation-parse-errors.
	(compilation-parse-errors): Use that, and for directories too.
	Don't check whether a directory really exists.

2002-07-12  Juanma Barranquero  <lektu@terra.es>

	* help-fns.el (describe-variable): Remove useless "Documentation:"
	string.

	* timer.el (timer-set-time-with-usecs): Fix documentation.
	Simplify extraction of time data.

2002-07-12  John Paul Wallington  <jpw@shootybangbang.com>

	* help-fns.el (describe-variable): Mention if the variable is an
	alias.  Put `defvaralias' info before the documentation.

2002-07-12  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el (locale-language-names): Change "mk"
	(Macedonian), "ru" (Russian), and "sp" (Serbian with Cyrillic
	alphabet) to "Cyrillic-ISO".

2002-07-11  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-default-method): New default method "sm"
	which I guess to be good for most people.
	(tramp-default-method-alist): Use "ftp" method (ie, forwarding to
	Ange-FTP) for some user/host combinations.
	(tramp-file-name-structure, tramp-file-name-regexp)
	(tramp-make-tramp-file-format, tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure, tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format): New default value which
	unifies the filename syntax between Tramp and Ange-FTP.  The new
	syntax is "/method:user@host:path".  Note the colon after the method.
	(tramp-handle-file-name-directory): Don't return "/" when
	completing a remote root directory (where the filename looks like
	"/method:user@host:/").
	(tramp-handle-ange-ftp): Deleted.
	(tramp-disable-ange-ftp): New function, called at toplevel,
	deletes Ange-FTP from file-name-handler-alist.
	(tramp-handle-make-symbolic-link): Implement.

2002-07-10  Juanma Barranquero  <lektu@terra.es>

	* ido.el (ido-enter-single-matching-directory): Delete leftover comment.

	* speedbar.el (speedbar-tag-hierarchy-method): Fix typos.
	(speedbar-vc-do-check): Likewise.
	(speedbar-obj-do-check): Likewise.
	(speedbar-mouse-hscroll): Likewise.
	(speedbar-file-lists): Likewise.

	* emacs-lisp/authors.el (authors-obsolete-file-p): Fix typo.

2002-07-09  Ole Aamot  <ole@gnu.org>

	* compile.el (compilation-error-regexp-alist):
	Recognize Valgrind messages.

2002-07-09  Juanma Barranquero  <lektu@terra.es>

	* faces.el (face-id): Fix typo.

	* hexl.el (hexl-mode): Likewise.

	* progmodes/idlw-shell.el (idlwave-shell-set-bp): Likewise.

	* progmodes/ebnf-yac.el (ebnf-yac-error): Likewise.

	* speedbar.el (speedbar-make-specialized-keymap): Fix docstring.
	(speedbar-desired-buffer): Likewise.
	(speedbar-line-file): Likewise.
	(speedbar-special-mode-key-map): Fix typo.
	(speedbar-dynamic-tags-function-list): Likewise.
	(speedbar-use-images): Likewise.
	(speedbar-up-directory): Likewise.
	(speedbar-item-info): Likewise.
	(speedbar-set-timer): Likewise.
	(speedbar-insert-button): Likewise.
	(speedbar-make-button): Likewise.
	(speedbar-make-tag-line): Likewise.
	(speedbar-insert-files-at-point): Likewise.
	(speedbar-update-special-contents): Likewise.
	(speedbar-find-selected-file): Likewise.
	(speedbar-add-indicator): Likewise.
	(speedbar-do-function-pointer): Likewise.
	(speedbar-goto-this-file): Likewise.
	(speedbar-line-path): Likewise.
	(speedbar-mouse-event-p): Likewise.
	(speedbar-dir-follow): Likewise.
	(speedbar-tag-find): Likewise.
	(speedbar-fetch-etags-command): Likewise.
	(speedbar-fetch-etags-arguments): Likewise.
	(speedbar-toggle-etags): Likewise.
	(speedbar-extract-one-symbol): Likewise.
	(speedbar-parse-c-or-c++tag): Likewise.
	(speedbar-unhighlight-one-tag-line): Likewise.
	(speedbar-directory-face): Likewise.
	(defimage-speedbar): Likewise.
	(speedbar-convert-emacs21-imagespec-to-xemacs): Likewise.

2002-07-09  Miles Bader  <miles@gnu.org>

	* hexl.el (hexl-find-file): Bind `completion-ignored-extensions'
	to nil when prompting for a filename.

2002-07-09  Kenichi Handa  <handa@etl.go.jp>

	* files.el (insert-directory): Be sure to bind
	coding-system-for-write to the just decided coding-system-for-read.

2002-07-09  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-make-merged-file-list): Move fully matching item to
	head of list.
	(ido-find-common-substring): Return substring instead of t.

2002-07-08  Juanma Barranquero  <lektu@terra.es>

	* info.el (Info-directory-list): Fix docstring.

2002-07-08  Miles Bader  <miles@gnu.org>

	* comint.el (comint-dynamic-list-completions): Sort COMPLETIONS
	before first use.

2002-07-08  Kim F. Storm  <storm@cua.dk>

	* files.el (after-find-file): Don't check for read-only status
	of files just created (and not yet saved on disk).

	* ido.el (ido-completion-help): Changed XEmacs specific code to
	avoid byte compiler warning in GNU Emacs.
	(ido-set-matches1): Use regexp-quote instead of identity.
	(ido-complete-space): New function.
	(ido-define-mode-map): Bind it to SPACE.

2002-07-07  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-default-unfontify-region):
	Use remove-list-of-text-properties.
	(font-lock-extra-managed-props): Doc fix.

	* facemenu.el: Move `provide' to the end.
	(facemenu-read-color): Don't cons unnecessarily.

	* language/ind-util.el (indian-make-hash):
	* language/devan-util.el (dev-char-glyph-hash, dev-glyph-glyph-hash)
	(dev-glyph-glyph-2-hash): Switch makehash -> make-hash-table.

	* subr.el (insert-string): Update the obsolete info.
	(makehash): Move from C and mark obsolete.

	* emacs-lisp/debug.el (debug-on-entry): Fix the wrapper used for
	aliases to also work for interactive functions.
	Use the same wrapper for subroutines.
	(cancel-debug-on-entry): Get rid of the now-useless wrapper.
	(debug-on-entry-1): Correctly skip docstrings and interactive forms.

	* textmodes/texinfo.el (texinfo-font-lock-keywords): Disable the
	automatic environment name update.
	(texinfo-clone-environment): Fix it not to incorrectly match prefixes.

2002-07-07  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-popup-menu): Function deleted.

	* emacs-lisp/advice.el (ad-compile-function):
	Disable cl-function warnings if cl is loaded.

	* files.el (safe-local-eval-forms): New user option.
	(hack-one-local-variable-eval-safep): Support it.
	Also allow `safe-local-eval-function' property to be a function
	or a list of functions.
	(c-add-style): Delete `safe-local-eval-function' property.

	* files.el (after-find-file): Make buffer read-only if file is
	marked that way, even for root.

	* files.el (save-some-buffers): Doc fix.

	* bindings.el (completion-ignored-extensions): Add .gmo and .mo.

2002-07-06  Francesco Potortì  <pot@gnu.org>

	* dos-w32.el (file-name-buffer-file-type-alist): Add knowledge of
	.sx[dmicw] file suffixes for Open office data files.

	* files.el (auto-mode-alist): Likewise.

	* international/mule.el (auto-coding-alist): Likewise.

2002-07-05  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--rectangle-operation): Don't call
	FCT if current column is outside rectangle.
	(cua--delete-rectangle): Do nothing if zero width or out of bounds.

2002-07-04  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el: Use add-hook and find-file-hook.
	(ange-ftp-parse-netrc): Use run-hooks and find-file-hook.
	(ange-ftp-ls-parser): Make it into a function.
	Ignore trailing @ in symlink targets.
	(ange-ftp-file-entry-p): Ignore FTP errors.
	(ange-ftp-insert-directory): Use ange-ftp-expand-symlink
	to correctly expand "/flint:/bla -> ./etc" to /flint:/etc.

2002-07-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* simple.el (toggle-truncate-lines): New command.

2002-07-04  Miles Bader  <miles@gnu.org>

	* comint.el (comint-displayed-dynamic-completions): New variable.
	(comint-dynamic-list-completions): Be more careful about choosing
	when to scroll an existing completions window.

2002-07-03  Andreas Schwab  <schwab@suse.de>

	* net/tramp.el (tramp-handle-ange-ftp): Move interactive spec
	after doc string.

2002-07-03  Juanma Barranquero  <lektu@terra.es>

	* net/tramp.el (tramp-send-eof): Fix typo.
	(tramp-kill-process): Likewise.

	* play/dunnet.el (dun-physobj-desc): Likewise.

	* textmodes/reftex-vars.el (reftex-label-alist): Likewise.

	* calendar/timeclock.el (timeclock-workday-remaining): Likewise.
	(timeclock-workday-elapsed): Likewise.

	* allout.el (outline-goto-prefix): Likewise.

	* emulation/tpu-edt.el (tpu-delete-to-eol): Likewise.
	(tpu-delete-to-bol): Likewise.

	* subr.el (chars-in-region): Add obsolescence declaration for
	`chars-in-region'.

2002-07-03  Miles Bader  <miles@gnu.org>

	* faces.el (header-line): Don't use a `common' clause for
	inheriting from the mode-line face, since we can't override it,
	and we don't want it for ttys.

2002-07-02  Richard M. Stallman  <rms@gnu.org>

	* net/ange-ftp.el (ange-ftp-hook-function): Add file-remote-p prop.

	* files.el (hack-one-local-variable-constantp): New function.
	(hack-one-local-variable-eval-safep): New function.
	Check for `eval:' calling fn with `safe-local-eval-function' property.
	(hack-one-local-variable): Use hack-one-local-variable-eval-safep.
	(c-add-style, c-set-style): Add safe-local-eval-function property.

	* files.el (insert-directory): Handle --dired option to ls.

	* files.el (file-remote-p): New function.

	* emacs-lisp/easymenu.el (easy-menu-popup-menu): New function.

	* startup.el (fancy-splash-screens): Switch to a chosen frame.
	(fancy-splash-frame): Choose the right frame to use.
	(use-fancy-splash-screens-p): Check dimensions of the right frame
	in order to decide.

	* emacs-lisp/bytecomp.el (byte-compile-warning-types):
	Rename cl-func to cl-functions.  Enable it by default.
	(byte-compile-file-form-eval-boundary): Turn off cl-functions warnings
	if the file loads cl.
	(byte-compile-initial-macro-environment): For eval-and-compile,
	use byte-compile-eval-before-compile to eval.
	(byte-compile-eval-before-compile): New function to turn off
	cl-functions when appropriate, for eval-and-compile.
	(byte-compile-warnings): Doc fix.

2002-07-02  Dave Love  <fx@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-warnings): Add cl-func option.
	(byte-compile-cl-warn): New function.
	(byte-compile-form): Use it, to warn about calling cl functions.
	(byte-compile-warning-types): Doc fix.

2002-07-02  Juanma Barranquero  <lektu@terra.es>

	* mail/rmailsum.el (rmail-user-mail-address-regexp): Fix typo.

	* textmodes/reftex-cite.el (reftex-citation): Fix typo.

	* progmodes/cperl-mode.el (cperl-break-one-line-blocks-when-indent):
	Fix typo.

2002-07-02  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/bindat.el: New file.

2002-07-01  Sam Steingold  <sds@gnu.org>

	* textmodes/tex-mode.el (tex-file): Call `save-some-buffers'
	before `tex-main-file' because if the current buffer is new, its
	file might not exist yet, and then `tex-main-file' will
	incorrectly return "foo.tex.tex".

2002-07-01  Juanma Barranquero  <lektu@terra.es>

	* ido.el (ido-minibuffer-setup-hook): Doc fix.

2002-07-01  Dave Love  <fx@gnu.org>

	Make strokes a proper minor mode, and don't try to overload
	mouse-2, which doesn't work satisfactorily.

	* strokes.el: Doc fixes.
	(strokes-mode): Defcustom deleted; replaced by minor mode def with
	re-written function.
	(strokes-while-inhibiting-garbage-collector): Comment out.
	(define-stroke, strokes-fix-button2-command, strokes-insinuated)
	(strokes-insinuate, global-set-stroke, describe-stroke)
	(load-user-strokes, save-strokes, strokes-bug-address)
	(strokes-click-command): Deleted.
	(strokes-execute-stroke): Remove strokes-click-p case.
	(strokes-describe-stroke): Remove strokes-click-p stuff.
	(strokes-help): Fix.
	(strokes-report-bug): Alias to report-emacs-bug.
	(strokes-prompt-user-save-strokes): Modify format of the file.
	(strokes-mode-map, strokes-unload-hook): New.
	(strokes-buffer-name): Don't customize.

2002-07-01  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-index): Get immediate error if used in `dir'.

	* textmodes/picture.el (picture-forward-column)
	(picture-move-down): Never deactivate the mark.

2002-06-30  Simon Josefsson  <jas@extundo.com>

	* menu-bar.el (menu-bar-options-menu): Move elisp mode names from
	menu entry into balloon help.

2002-06-30  Andreas Schwab  <schwab@suse.de>

	* files.el (directory-free-space-args): Don't use `-P' on Darwin.
	* term/mac-win.el: Don't set it here.

2002-06-29  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-defs.el (cvs-mode-map): Bind ! to `force'.

2002-06-29  Andreas Schwab  <schwab@suse.de>

	* term/mac-win.el: Use directory-free-space-program instead of
	obsolete variable dired-free-space-program.  On Darwin, don't set
	directory-free-space-program, shell-file-name and
	process-connection-type; set directory-free-space-args to not
	include `-P' and use utf-8 for file name coding system.

	* simple.el (shell-command-on-region): Handle errors and signals
	from shell command execution.
	(display-message-or-buffer): Fix last change.
	(shell-command-default-error-buffer): Doc fix.

	* dired.el (dired-view-file): Quote file name for
	dired-run-shell-command.

2002-06-29  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: New file.

2002-06-28  John Wiegley  <johnw@gnu.org>

	* pcmpl-cvs.el: Added my name as the maintainer of this file.

2002-06-28  Andreas Schwab  <schwab@suse.de>

	* shell.el (explicit-bash-args): New user option.

2002-06-28  Kim F. Storm  <storm@cua.dk>

	* ido.el: New file.

2002-06-28  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el (define-derived-mode): Preserve the `mode-class' rather
	than the `special' symbol property.
	(derived-mode-class): Make it obsolete.

2002-06-27  Andreas Schwab  <schwab@suse.de>

	* net/tramp.el (tramp-handle-ange-ftp): Fix typo.

2002-06-27  Juanma Barranquero  <lektu@terra.es>

	* emacs-lisp/bytecomp.el (baud-rate): Fix obsolescence declaration.
	(meta-flag): Likewise.

	* international/mule-util.el (string-to-sequence): Likewise.

	* subr.el (char-bytes): Likewise.
	(make-local-hook): Likewise.
	(baud-rate): Remove redundant info from docstring.

	* faces.el (frame-update-faces): Fix obsolescence declaration.
	(internal-get-face): Remove redundant info from docstring and
	fix obsolescence declaration.

	* rect.el (move-to-column-force): Likewise.

	* help-fns.el (describe-function-1): Use semicolon instead of dot.
	(describe-variable): Likewise.

2002-06-27  Stefan Monnier  <monnier@cs.yale.edu>

	* mwheel.el (mouse-wheel-change-button): Deactivate before changing.
	(mouse-wheel-up-button, mouse-wheel-down-button): Obsolete.
	(mouse-wheel-up-event, mouse-wheel-down-event): New vars.
	(mouse-wheel-follow-mouse): Change default to t.
	(mwheel-event-button): Return the basic event symbol.
	(mwheel-scroll): Work with non-mouse events.
	(mouse-wheel-mode): Use the new vars.
	(mwheel-install): Obey `uninstall'.

	* term/xterm.el (function-key-map): Add some bindings.

	* uniquify.el (uniquify-delay-rationalize-file-buffer-names):
	Rename from delay-uniquify-rationalize-file-buffer-names.
	Only rationalize if the buffer is under uniquify control.
	(uniquify-delayed-rationalize-file-buffer-names):
	Rename from delayed-uniquify-rationalize-file-buffer-names.

2002-06-27  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-file-name-structure)
	(tramp-multi-file-name-hop-structure): Split for easier readability.
	(tramp-handle-make-symbolic-link): Use user/host/method/... from
	LINKNAME, not FILENAME.
	(tramp-handle-verify-visited-file-modtime):
	Call tramp-ange-ftp-file-name-p with right parameters.
	(tramp-handle-verify-visited-file-modtime): `insert' does not
	work for integers, convert them to strings first.
	(tramp-handle-ange-ftp): New function to perform setup for
	replacing Ange-FTP with Tramp.
	(tramp-repair-jka-compr): New function to factor out some
	previously top-level code.  Call the function at top-level.

2002-06-27  Juanma Barranquero  <lektu@terra.es>

	* composite.el (decompose-composite-char): Fix docstring.

	* faces.el (describe-face): Capitalize "not documented" message.

	* help-fns.el (describe-variable): Likewise.
	(describe-function-1): Likewise.  Also, document the obsolescence
	of the function, if applicable.

2002-06-26  Juanma Barranquero  <lektu@terra.es>

	* info.el (info-menu-5): Fix documentation.
	(Info-fontify-maximum-menu-size): Remove reference to `Info-fontify'.

2002-06-26  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/cl.el (values): Simplify definition.

	* simple.el (shell-command): Match & only at end of whole command.
	(display-message-or-buffer): Don't use the echo area
	if output buffer is visible.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): Doc fixes.

	* progmodes/cperl-mode.el: Many trivial doc fixes.
	(cperl-non-problems): Definition deleted.
	(cperl-menu): Don't refer to cperl-non-problems.
	(cperl-word-at-point): Add doc string.
	(cperl-beautify-regexp-piece): Fix error message.
	(cperl-invert-if-unless): Fix error message.

	* dired.el (dired-find-alternate-file): Mark as disabled.

2002-06-25  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/tramp.el (tramp-ftp-method): New user option.
	(tramp-invoke-ange-ftp): New function to forward calls to Ange-FTP.
	(with-parsed-tramp-file-name): New macro for the usual big `let'
	statement to dissect a file-name.
	(tramp-handle-make-symbolic-link, tramp-handle-load)
	(tramp-handle-file-name-directory)
	(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
	(tramp-handle-file-truename, tramp-handle-file-directory-p)
	(tramp-handle-file-regular-p, tramp-handle-file-symlink-p)
	(tramp-handle-file-writable-p, tramp-handle-file-writable-p):
	Use the new macro and forward call to Ange-FTP if applicable.
	(tramp-make-ange-ftp-file-name): New helper function to convert a
	file name into an Ange-FTP file name, used by `tramp-invoke-ange-ftp'.
	(tramp-default-method-alist): New user option.
	(tramp-find-default-method): Use it.
	(tramp-sh-extra-args): New variable.
	(tramp-find-shell): Use it.
	(tramp-open-connection-rsh): Support a kludgy feature for the
	"-p" option to ssh.  If host name is given as "host#42", uses the
	"-p 42" option.

2002-06-25  Andreas Schwab  <schwab@suse.de>

	* replace.el (occur-1): Avoid invalid message format string.

2002-06-24  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/bytecomp.el (byte-compile-callargs-warn):
	Check for `noruntime' even if the function has a known sig.
	(byte-compile-file, byte-compile-output-docform):
	Don't hard code point-min = 1.

	* pcvs.el (cvs-parse-process): Don't save/restore point.
	Fix last change not to introduce spurious dir FIs.
	(cvs-move-to-goal-column): New function extracted from
	cvs-mode-previous-line.
	(cvs-mode-previous-line, cvs-mode-next-line): Use it.
	(cvs-addto-collection): Use it to preserve point.
	(cvs-vc-command-advice): Ad-hoc workaround for `cvs -q add'.

	* mwheel.el (mouse-wheel-scroll-amount,mwheel-scroll,mouse-wheel-mode):
	Don't require the first element to be modifier-free.

	* pcvs-parse.el (cvs-parse-table):
	Handle `nothing known about' with more care.

	* pcvs.el (cvs-fileinfo-kill): Remove.
	(cvs-parse-process): Add `old-fis' argument.
	(cvs-mode-run): Use it instead of cvs-fileinfo-kill.

	* descr-text.el (describe-property-list): Make sure there's
	a space between the property name and its value.
	(describe-text-properties): Don't kill a pre-existing buffer.

	* mwheel.el: Undo last patch from Stephen Gildea for now.

2002-06-24  Kim F. Storm  <storm@cua.dk>

	* emulation/keypad.el: Added :require 'keypad to defcustoms.

2002-06-23  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (event-start, event-end, event-click-count):
	Accept non-mouse events as well.
	(read-key): New function.
	(read-quoted-char): Use it.  Use this-single-command-raw-keys as well.

	* files.el: Rename (and mark as obsolete)
	find-file-hooks to find-file-hook,
	find-file-not-found-hooks to find-file-not-found-functions,
	write-file-hooks to write-file-functions,
	write-contents-hooks to write-contents-functions.
	Mark local-write-file-hooks as obsolete.
	(locate-file-completion): Don't cons uselessly.  Use test-completion.
	(basic-save-buffer): Use (point-min) rather than 1.
	(basic-save-buffer-2): Obey the `setmodes' returned by backup-buffer.

	* help-fns.el (describe-variable): Only use `buffer' is still live.
	Use `delete-region' instead of save-excursion + delete-char.
	Document the obsolescence of the variable, if applicable.

2002-06-23  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-do-auto-fill): Respect the value of
	comment-auto-fill-only-comments.

2002-06-21  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* net/ange-ftp.el (backup-buffer): Delete `ange-ftp' property.
	This is not a handled operation.

2002-06-21  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--prefix-arg): Make register prefixes
	work again.  Corrected error in check for C-u initiated prefix.

	* emulation/keypad.el (keypad-setup): Handle kp-begin like kp-space.

2002-06-21  Richard M. Stallman  <rms@gnu.org>

	* net/browse-url.el (browse-url-at-mouse): Don't pass an arg
	to browse-url-at-point.

	* play/zone.el (zone-idle): Var deleted.

	* international/iso-acc.el (iso-languages) <french>:
	`~ ' now generates `~', `~,' definition deleted.

	* format.el (format-annotate-function): Copy multibyte flag
	and selective-display into the new temp buffer.

	* edmacro.el (edmacro-fix-menu-commands):
	Discard `help-echo' events.  Handle (menu-bar) events.
	Simplify by converting key sequence to a list and then back to vector.

2002-06-21  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* mwheel.el: Allow arbitrary keys for scrolling, add a third
	scrolling speed, fix an unwind-protect.
	(mouse-wheel-scroll-amount): Now a three-element list.
	(mouse-wheel-scroll-down-slow, mouse-wheel-scroll-up-slow)
	(mouse-wheel-scroll-down-normal, mouse-wheel-scroll-up-normal)
	(mouse-wheel-scroll-down-fast, mouse-wheel-scroll-up-fast):
	New functions.

2002-06-21  Andreas Schwab  <schwab@suse.de>

	* files.el (find-file-read-args): Add new argument `mustmatch' and
	pass it down to read-file-name.
	(find-file, find-file-other-window, find-file-other-frame)
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Use it and fix prompts.

2002-06-21  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs-defs.el (cvs-version): Use cvs-program rather than "cvs".

2002-06-20  Emmanuel Briot  <briot@act-europe.fr>

	* progmodes/ada-mode.el: Update copyright notice.
	Synchronize with GNAT release 3.15a1.
	Do not attempt to load ada-support, which is only for compatibility
	with older Emacs versions, and is not needed for Emacs 21.
	Fix various calls to count-lines, that didn't work correctly when the
	buffer was narrowed.
	(ada-continuation-indent): New variable.
	(ada-contextual-menu): New entry "List local references", faster than
	"List References".
	(ada-mode): New alignment rules provided by S. Leake.
	Add support for which-function-mode.
	(ada-get-current-indent): Fix indentation of named parameter lists and
	nested boolean expressions.
	(ada-indent-on-previous-lines): Fix indentation of labels.
	(ada-search-prev-end-stmt): Fix searching of the previous
	end-statement, specially with regards to nested subprograms.
	(comment-region advice): Initially disabled, for better compatibility
	with other modes.
	(ada-fill-comment-paragraph): Fixed (no longer worked with Emacs 21).

	* progmodes/ada-xref.el: Update copyright notice.
	(ada-xref-create-ali): The default is now not to create automatically
	the ALI files by compiling the unit, since this isn't always reliable
	and requires an up-to-date project file.
	(ada-prj-default-comp-cmd): No longer use gcc directly to compile
	a file, but use gnatmake instead, since this gives access to the GNAT
	project files.
	(ada-xref-search-with-egrep): New variable, suggested by P. Waroquiers.
	(ada-load-project-hook): New variable, for support of GNAT
	project files.
	(ada-update-project-menu): Fix the detection of the project file name.
	(ada-add-keymap): Change key binding for ada-find-file, that conflicted
	with another binding in ada-mode.el.
	(ada-add-menu): New menu "List Local References", to list the reference
	to the entity only in the current file, instead of looking in the whole
	project.  Much faster.
	(ada-find-references): New parameters arg and local-only.
	(ada-find-any-references): New parameters local-only and append.
	(ada-goto-declaration): Fix handling of predefined entities in xref.
	(ada-get-all-references): Updated to the new xref format in GNAT 3.15,
	still compatible with GNAT 3.14 of course.  Fix various calls to
	count-lines, that didn't work correctly when the buffer was narrowed.

	* progmodes/ada-prj.el: Update copyright.
	(ada-prj-load-directory): Make sure we do not use one of the new Emacs
	21 dialogs to select the file, since we want a directory name only.
	(ada-customize): Add support for the new GNAT project files.

2002-06-20  Francesco Potortì  <pot@gnu.org>

	* progmodes/etags.el (tag-implicit-name-match-p): New function.
	(etags-recognize-tags-table): Use it for implicit tag names.

2002-06-20  Miles Bader  <miles@gnu.org>

	* comint.el (comint-get-old-input-default): Strip text properties
	for fields too.

	* comint.el (comint-output-filter): Run output-filter functions
	before setting up the prompt.

	* international/characters.el: Re-enable code giving word syntax
	to certain japanese-jisx0208 characters.

2002-06-19  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-type-def-re): Fix value.
	(f90-looking-at-type-like): Adapt for new `f90-type-def-re' value.

2002-06-18  Stefan Monnier  <monnier@cs.yale.edu>

	* international/quail.el (quail-help): Don't assume the buffer
	is displayed in the same frame.

	* emacs-lisp/debug.el (cancel-debug-on-entry):
	* emacs-lisp/regexp-opt.el (regexp-opt-group): Don't cons uselessly.

	* pcvs.el (cvs-vc-command-advice): Handle the case where args
	are passed to `cvs' before the command name.
	(cvs-fileinfo-kill): Mark old FIs as up-to-date rather than dead.

	* pcvs-info.el (cvs-add-face): Minor rewrite.
	(cvs-fileinfo-pp): Use `cvs-goal-column' with directory entries.

	* newcomment.el (comment-normalize-vars): Refresh the comment-foo-skip
	regexp when they don't match comment-foo any more.

2002-06-18  Juanma Barranquero  <lektu@terra.es>

	* filesets.el (filesets-update-pre010505): Fix typo.

	* eshell/em-pred.el (eshell-modifier-help-string): Fix typos.

	* emulation/edt.el (edt-substitute): Fix typo.

	* emacs-lisp/checkdoc.el (checkdoc-this-string-valid-engine): Fix typo.

	* comint.el (comint-next-prompt, comint-previous-prompt): Fix typos.

	* progmodes/sh-script.el (sh-electric-rparen-needed): Remove.

2002-06-17  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-map): Rename to Describe Text
	to Describe Properties and use describe-text-properties.

	* simple.el (what-cursor-position): Use describe-char.

	* descr-text.el (describe-char): Moved from mule-diag.el, renamed
	from describe-char-after.  Now calls describe-text-properties.
	(describe-property-list): Renamed from describe-text-properties.
	(describe-text-properties): Renamed from describe-text-at.
	New arg OUTPUT-BUFFER.
	(describe-text-properties-1):
	New subroutine, broken out from describe-text-properties.
	Output a newline before each section of the output.

	* international/mule-diag.el (describe-char-after):
	Moved to descr-text.el.

2002-06-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (ctext-pre-write-conversion): Fix the values
	of FROM and TO if we create a new buffer.

2002-06-17  John Paul Wallington  <jpw@shootybangbang.com>

	* comint.el (comint-insert-clicked-input): Insert clicked-on
	previous input without properties.

2002-06-16  Andrew Choi  <akochoi@shaw.ca>

	* term/mac-win.el (scalable-fonts-allowed): Set to t.

2002-06-15  Colin Walters  <walters@debian.org>

	* pcvs-info.el (global-font-lock-mode, font-lock-auto-fontify):
	Delete defvars.
	(cvs-highlight): Delete.
	(cvs-add-face): Use `font-lock-face'.  Always add properties.

	* ibuffer.el (ibuffer-movement-cycle): New variable.
	(ibuffer-backward-line, ibuffer-forward-line): Use it.

2002-06-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-recompile-directory): Doc fix.
	(batch-byte-recompile-directory): Undo previous change.

	* comint.el (comint-skip-input): New function.
	(comint-interrupt-subjob, comint-kill-subjob, comint-quit-subjob)
	(comint-stop-subjob): Use comint-skip-input.

	* ielm.el (ielm-eval-input): Use error-message-string.
	(ielm-format-error, ielm-format-errors): Functions deleted.

2002-06-14  Kim F. Storm  <storm@cua.dk>

	* progmodes/compile.el (grep-tree): Doc fixes.
	Added SUBDIRS arg for non-interactive use.

2002-06-14  Juanma Barranquero  <lektu@terra.es>

	* comint.el (comint-snapshot-last-prompt):
	Bind `inhibit-read-only' to t to support read-only prompts.
	(comint-output-filter): Likewise.

2002-06-14  Miles Bader  <miles@gnu.org>

	* subr.el (copy-tree): Use `nconc' and `nreverse' instead of `nreconc'.
	(pop): Move the call to `car' outside the prog1, as the compiler
	then generates better code.

2002-06-13  Richard M. Stallman  <rms@gnu.org>

	* play/zone.el (zone-timer): New variable holds the idle timer.
	(zone): Don't fiddle with the idle timer at all.
	(zone-when-idle): Put the idle timer in zone-timer.
	If one is already set up, cancel it and make a new one.
	(zone-leave-me-alone): Likewise.

2002-06-13  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Reorder.

2002-06-13  Andreas Schwab  <schwab@suse.de>

	* files.el (auto-mode-alist): Move entry for ".in" to the end.

2002-06-13  Miles Bader  <miles@gnu.org>

	* comint.el (comint-mode): Don't set `font-lock-defaults'.
	(comint-mode-hook): Turn on font-lock by default.

2002-06-12  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-file-or-variation-thereof):
	Restore vc-backend check, thanks to Robert Thorpe for noticing.

2002-06-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/bibtex.el: Change the maintainer to "none".

2002-06-12  Juanma Barranquero  <lektu@terra>

	* term/w32-win.el (x-handle-switch): Fix handling of
	x-invocation-args for switches with arguments.

2002-06-12  Stefan Monnier  <monnier@cs.yale.edu>

	* menu-bar.el (menu-bar-showhide-fringe-menu): Don't use `fringe-mode'
	without first making sure it's bound.

2002-06-12  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-fontify-node): Compute header line specially
	if node has no next, previous or up links.
	Hide the part of the first line that is used in the header.
	Use Info-next-link-keymap, etc.
	(Info-next-link-keymap, Info-prev-link-keymap)
	(Info-up-link-keymap): New variables.

	* international/mule-diag.el (describe-char-after): Doc fix.

	* view.el (view-mode-enter): Clarify echo area message.

	* info.el (Info-select-node): Turn header line on or off here.
	(Info-setup-header-line): Function deleted.
	(Info-mode): Make Info-header-line local.
	(Info-fontify-node): Ignore Info-use-header-line.
	Unconditionally compute what the header line should be, and
	store it on the `header-line' property of the node's first char.
	Bind [header-line down-mouse-1].
	Use `keymap' property, not `local-map'.
	Bind [mouse-2] for mouse clicks on the node line in the text.

	* font-lock.el (font-lock-beginning-of-syntax-function): Doc fix.

2002-06-12  Miles Bader  <miles@gnu.org>

	* comint.el (comint-send-input): Properly handle empty and
	no-newline input regions.

2002-06-12  Colin Walters  <walters@gnu.org>

	* calc/calc.el: Use `when', `unless'.
	(calc-trail-mode): Use an italic `font-lock-face'.
	(calc-refresh): Ditto.

2002-06-12  Colin Walters  <walters@debian.org>

	* font-core.el (font-lock-core-only): Variable deleted.
	All uses removed.
	(font-lock-set-defaults): Variable alist settings moved back into
	font-lock-set-defaults-1.
	(turn-on-font-lock-if-enabled): Always turn on font-lock unless it
	is specifically excluded by the user.

	* font-lock.el (font-lock-set-defaults-1): Set variable alist here.

	* help-mode.el (help-mode): Don't set `font-lock-defaults'.

	* ibuffer.el (ibuffer-mode): Don't set `font-lock-defaults'.

	* info.el (Info-mode): Don't set `font-lock-defaults'.

	* replace.el (occur-mode): Don't set `font-lock-defaults'.

	* help-mode.el (help-highlight-p, help-highlight-face):
	Variable was unused; delete.
	(help-make-xrefs): Doc fix.

2002-06-11  Richard M. Stallman  <rms@gnu.org>

	* format.el (format-alist): Document new element PRESERVE.
	(format-write-file): Implement PRESERVE elt for a format.

	* files.el (make-auto-save-file-name): Rename local `filename' to
	`file-name'.

2002-06-10  Richard M. Stallman  <rms@gnu.org>

	* progmodes/ebrowse.el (ebrowse-draw-tree-fn): Use copy-sequence.
	(ebrowse-copy-list): Function deleted.

	* eshell/em-unix.el (eshell/diff): Use copy-sequence.

	* eshell/esh-mode.el (eshell-mode, eshell-mode): Use copy-sequence.

	* eshell/esh-util.el (eshell-copy-list): Function deleted.
	(eshell-sublist): Use copy-sequence.
	(eshell-copy-tree): Make it an alias for copy-tree.

	* emacs-lisp/cl.el (copy-list): Moved back from subr.el.

	* subr.el (copy-list): Moved to cl.el.
	(copy-tree): Don't use copy-list or cl-pop.

2002-06-10  Miles Bader  <miles@gnu.org>

	Make comint use text properties for highlighting instead of overlays:
	* comint.el (comint-last-output-overlay): Variable removed.
	(comint-send-input, comint-output-filter): Use text properties
	instead of overlays.
	(comint-insert-clicked-input): Rewrite to work with text
	properties as well as overlays.
	(comint-snapshot-last-prompt): Snapshot using text properties.
	(comint-get-old-input-default, comint-extract-string): Don't copy
	text properties.

	* simple.el (line-move-finish): Inhibit field motion when
	computing `line-end'.

	* files.el (revert-buffer): Correct typo: variable name is
	`buffer-file-format', not `buffer-file-formats'.

	* comint.el (comint-send-input, comint-output-filter): Use the
	`font-lock-face' property instead of `face'.  Don't check the
	highlight-enabling variables anymore.
	(comint-highlight-input, comint-highlight-prompt): Variables removed.

	* faces.el (display-supports-face-attributes-p): New function.
	(face-spec-set-match-display): Support `supports' predicate.
	(italic): Try underlining for displays that don't support real italics.
	* cus-edit.el (custom-display): Add support for `supports' predicate.
	* term/tty-colors.el (color-name-rgb-alist): Use 16-bit RGB values
	instead of 8-bit, for consistency with the rest of Emacs.
	(tty-color-canonicalize): Only copy COLOR if we need to change it.
	(tty-color-approximate): Scale values from `color-name-rgb-alist'
	appropriately.  Return the whole color description, rather than
	just the RGB values.
	(tty-color-standard-values): New function.  Code mostly taken from
	`tty-color-translate'.
	(tty-color-translate, tty-color-values): Use `tty-color-desc' to
	do all the work.
	(tty-color-desc): Do color lookup here instead of calling
	`tty-color-translate' and `tty-color-by-index'; this is now the
	main place to do it.

2002-06-09  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-style.el (c-set-style, c-set-style-1):
	Add another state for the `dont-override' flag where it only keeps
	globally set variables.

2002-06-08  Colin Walters  <walters@gnu.org>

	* descr-text.el (describe-text-properties): Sort the output by the
	size of the values.  Put `font-lock-face' property on property names.
	(toplevel): Provide `descr-text'.

	* international/mule-diag.el (describe-char-after): When there are
	text properties, require `descr-text', and just call
	`describe-text-properties'.

	* international/mule.el (sgml-html-meta-auto-coding-function):
	New function.
	(auto-coding-from-file-contents): Delete; merge functionality into
	`set-auto-coding'.
	(set-auto-coding): Move tests from `auto-coding-functions' so that
	they have a lower priority than coding: tags.
	Put `auto-coding-regexp-alist' tests before coding: tag tests.
	(sgml-xml-auto-coding-function): Simply `intern' the match, and
	test if it's a valid coding system.
	(auto-coding-functions): Add `sgml-html-meta-auto-coding-function'.

2002-06-08  Colin Walters  <walters@verbum.org>

	* subr.el (copy-list): Moved here from cl.el.
	(copy-tree): Renamed here from `cl-copy-tree' in cl-extra.el.

	* emacs-lisp/cl-extra.el (cl-copy-tree): Moved to `copy-tree' in
	subr.el.  Add a defalias with the old name.

	* emacs-lisp/cl.el (copy-list): Moved to subr.el.

	* replace.el (occur-mode): Don't set up categories.  Do set
	`font-lock-defaults', and be sure to set `font-lock-core-only'.
	(occur-1): Pass `list-matching-lines-face' and
	`list-matching-lines-buffer-name-face'.
	(occur-engine): Use `font-lock-face' instead of categories.

	* info.el (Info-mode): Don't set up categories.  Do set
	`font-lock-defaults', and be sure to set `font-lock-core-only'.
	(Info-fontify-menu-headers): Use `font-lock-face' instead of
	categories.
	(Info-fontify-node): Ditto.

	* ibuffer.el (ibuffer-category-alist): Delete.
	(ibuffer-get-category): Delete.
	(ibuffer-compile-make-eliding-form): Use `font-lock-face' instead
	of categories.
	(ibuffer-compile-format): Don't treat `name' category specially.
	(ibuffer-column name): Use `font-lock-face'.
	(filename-and-process): Ditto.
	(ibuffer-buffer-name-category): Renamed to
	`ibuffer-buffer-name-face'.  Don't use categories.
	(ibuffer-update-title-and-summary): Use `font-lock-face'.
	(ibuffer-insert-filter-group): Ditto.
	(ibuffer-mode): Don't set up categories.  Do set
	`font-lock-defaults', and be sure to set `font-lock-core-only'.
	(ibuffer-compile-format): Don't pass third argument
	to column functions.
	(filename-and-process): Ditto.

	* ibuf-macs.el (define-ibuffer-column): Don't create a third
	argument for the generated function.

	* font-core.el (font-lock-category-alist): Delete.
	(turn-on-font-lock-if-enabled): Don't use it.
	(font-lock-symbol-category-alist): Delete.
	(font-lock-default-function): Use new `char-property-alias-alist'
	to make `font-lock-face' an alias for `face' when font-lock mode
	is enabled.
	(font-lock-core-only): New variable.
	(font-lock-set-defaults): Use it.

2002-06-08  Richard M. Stallman  <rms@gnu.org>

	* files.el (find-file-noselect-1): Undo previous change.

	* bookmark.el (bookmark-file-or-variation-thereof): Doc fix.

2002-06-07  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-file-or-variation-thereof): Just use
	Info-suffix-list, as suggested by Stefan Monnier.

2002-06-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* select.el (xselect-convert-to-string): If VALUE is a string,
	return a cons of TYPE and the string.

2002-06-05  Pavel Janík  <Pavel@Janik.cz>

	* language/cyrillic.el (cyrillic-alternativnyj-decode-table):
	Fix the table to contain correct characters.

2002-06-04  Richard M. Stallman  <rms@gnu.org>

	* simple.el: Don't require cl.

2002-06-03  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-do-shell-command): Doc fix in autoload.

	* info.el (Info-extract-pointer): Ignore Info-header-line.

	* progmodes/cc-mode.el (c-postprocess-file-styles):
	Do nothing except in CC modes.

	* international/mule-cmds.el (select-safe-coding-system):
	When computing auto-cs, narrow to FROM...TO.
	Put save-excursion outside save-restriction.
	New arg FILE; use that for set-auto-coding.

2002-06-01  Richard M. Stallman  <rms@gnu.org>

	* simple.el (choose-completion-string-functions): Doc fix.
	(choose-completion-string): Add doc string.

2002-06-01  Kim F. Storm  <storm@cua.dk>

	* simple.el: Reworked previous change.
	(choose-completion-string1): Merge back into choose-completion-string.
	(choose-completion-string): Run choose-completion-string-functions
	after checking for proper minibuffer window.  Added mini-p arg to
	the hook functions.  Insert choice if all hook functions return nil.
	(choose-completion-string-functions): Doc update.

2002-06-01  Sam Steingold  <sds@gnu.org>

	* files.el (auto-mode-alist): Strip trailing ".in" from the file
	name when deciding the mode (for config.h.in, Makefile.in etc).

2002-06-01  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/prolog.el (prolog-mode-syntax-table): Add flags to
	?/ and ?* entries to support /* */ style comments.
	(prolog-font-lock-keywords): New var.
	(prolog-mode): Enable font-locking; set `font-lock-defaults'.

2002-06-01  Kim F. Storm  <storm@cua.dk>

	* simple.el (choose-completion-string-functions): New special hook.
	(choose-completion-string1): Rename from choose-completion-string.
	(choose-completion-string): Run choose-completion-string-functions
	until success, and only call choose-completion-string1 if it fails.

2002-05-31  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/ispell.el (autoloaded toplevel): Don't use
	ispell-library-directory without checking that it's bound.

2002-05-31  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--last-deleted-region-pos)
	(cua--last-deleted-region-text): New aux variables.
	(cua-delete-region): Set them.
	(cua-repeat-replace-region): Use them to find the replacement text.

2002-05-31  Juanma Barranquero  <lektu@terra.es>

	* emulation/viper-cmd.el (viper-smart-suffix-list, viper-ask-level):
	Fix typos.

2002-05-31  Kim F. Storm  <storm@cua.dk>

	* progmodes/compile.el (grep-tree-command, grep-tree-files-aliases)
	(grep-tree-ignore-CVS-directories, grep-tree-ignore-case):
	New custom variables.
	(grep-compute-defaults): Compute grep-tree-command's default value.
	(grep-expand-command-macros): New aux function.
	(grep-tree-last-regexp, grep-tree-last-files): New aux variables.
	(grep-tree): New command like grep-find but extended prompting.

2002-05-30  Richard M. Stallman  <rms@gnu.org>

	* files.el (find-file-default): Add defvar for var already used.

	* menu-bar.el (menu-bar-showhide-fringe-menu): Use defvar.

	* subr.el (open-network-stream, open-network-stream-nowait)
	(open-network-stream-server, process-kill-without-query):
	Moved from simple.el.

	* simple.el (open-network-stream, open-network-stream-nowait)
	(open-network-stream-server, process-kill-without-query):
	Moved to subr.el.

	* simple.el (byte-compiling-files-p): Function deleted.

	* textmodes/ispell.el (ispell-library-directory): Renamed from
	ispell-library-path.  If Ispell is not installed, init to nil.
	(check-ispell-version): Doc fix.
	(ispell-menu-map): Get rid of byte-compiling-files-p hackery;
	initialize this unconditionally when ispell-menu-map-needed is t.
	Local `path' renamed to `dir'.

2002-05-30  Miles Bader  <miles@gnu.org>

	* calc/calc.el (calc-show-banner): New variable.
	(calc-refresh): Only show banner if `calc-show-banner' is non-nil.
	(calc-mode-var-list): Add `calc-show-banner'.
	* calc/calc-ext.el (calc-init-extensions): Add binding for `d@'.
	(calc-toggle-banner): New function.
	* calc/calc-help.el (calc-d-prefix-help): Add `@'.

2002-05-29  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/cl-indent.el (common-lisp-indent-function-1):
	When recognizing a def... construct, make that indentation
	tentative, so that it can be overridden if the list in question
	is not actually an expression.
	(common-lisp-indent-call-method): New subroutine.

	* emacs-lisp/bytecomp.el (batch-byte-compile-file):
	Delete the output file if we get a file-error.

	* tooltip.el (tooltip-mouse-motions-active): New variable.
	(tooltip-activate-mouse-motions): Don't kill track-mouse local
	if it was not made by us.

	* mouse.el (mouse-set-font): Avoid misleading error message
	if user makes no selection.

	* info.el (Info-setup-header-line): Don't hide the links line.

	* files.el (find-file-noselect-1): Return the buffer we created
	even if it has been killed within `after-find-file'.

	* files.el (auto-mode-alist): Use ada-mode for .ad[bs].dg files.

2002-05-29  Kim F. Storm  <storm@cua.dk>

	* simple.el (open-network-stream-server): Pass on optional args
	sentinel and filter to make-network-process (from Luke Gorrie).

2002-05-28  Colin Walters  <walters@gnu.org>

	* textmodes/sgml-mode.el (xml-mode): New alias for `sgml-mode'.

	* emacs-lisp/bytecomp.el (byte-compile-last-line): Deleted.
	(byte-compile-delete-first): New function.
	(byte-compile-read-position): New variable.
	(byte-compile-last-position): New variable.
	(byte-compile-current-buffer): New variable.
	(byte-compile-log-1): Use it.
	(byte-compile-set-symbol-position): New function.
	(byte-compile-obsolete, byte-compile-callargs-warn)
	(byte-compile-arglist-warn, byte-compile-arglist-warn)
	(byte-compile-print-syms, byte-compile-file-form-defmumble)
	(byte-compile-check-lambda-list, byte-compile-lambda)
	(byte-compile-form, byte-compile-variable-ref)
	(byte-compile-subr-wrong-args, byte-compile-negation-optimizer)
	(byte-compile-condition-case, byte-compile-defun)
	(byte-compile-defvar, byte-compile-autoload)
	(byte-compile-lambda-form): Use it.
	(byte-compile-from-buffer): Set it, and bind
	`read-with-symbol-positions' and `read-symbol-positions-list'.

	* emacs-lisp/bytecomp.el (byte-compile-debug): New variable.

2002-05-28  Kim F. Storm  <storm@cua.dk>

	* files.el (read-directory-name): New function.
	(cd): Use it instead of read-file-name.

2002-05-27  Kim F. Storm  <storm@cua.dk>

	* simple.el (push-mark-command): Added optional NOMSG arg.

	* emulation/cua-base.el (cua-set-mark): Align pop to mark
	behavior with standard set-mark-command.
	(cua--pre-command-handler): Use push-mark-command.
	(cua-repeat-replace-region): Improve functionality when
	repeated after moving point or changing buffer.

2002-05-26  Colin Walters  <walters@verbum.org>

	* startup.el (command-line): Use `when', `unless'.
	(command-line-1): New argument "--nosplash".  Handle it.

	* startup.el (inhibit-splash-screen): New variable alias for
	`inhibit-startup-message'.

	* replace.el (perform-replace): Document return value.  Use `pop'.

2002-05-26  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-previous-block, f90-next-block): New names,
	and slightly changed behavior, for `f90-previous-block-start' and
	`f90-next-block-end'.
	(f90-beginning-of-subprogram, f90-end-of-subprogram): Simplify.

2002-05-26  Simon Josefsson  <jas@extundo.com>

	* fringe.el (set-fringe-mode): Work when updating
	`default-frame-alist'.

2002-05-26  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--repeat-replace-text): New variable.
	(cua-repeat-replace-region): New command.
	(cua--init-keymaps): Bind it to M-v in cua--cua-keys-keymap.
	Misc improvements to the commentary.

2002-05-26  Simon Josefsson  <jas@extundo.com>

	* fringe.el (fringe-query-style): New fringe style "minimal".

2002-05-24  Simon Josefsson  <jas@extundo.com>

	* rot13.el (rot13-translate-table): New variable.
	(rot13, rot13-string, rot13-region): New functions.

2002-05-25  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-add-stmt-syntax): Fix some cases
	of wrong anchoring, e.g. for else-if compounds.

2002-05-25  Miles Bader  <miles@gnu.org>

	* menu-bar.el (menu-bar-showhide-fringe-menu-customize-left)
	(menu-bar-showhide-fringe-menu-customize-right)
	(menu-bar-showhide-fringe-menu-customize-disable):
	Use proper calling convention for `customize-set-value'.
	Require `fringe' before setting variable.

2002-05-25  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--self-insert-char-p): New function.

	* emulation/cua-gmrk.el (cua--init-global-mark): Install default
	binding in cua--global-mark-keymap using cua--self-insert-char-p
	to handle all global self inserting characters in gmark mode.

	* emulation/cua-rect.el (cua--init-rectangles): Install default
	binding in cua--rectangle-keymap using cua--self-insert-char-p
	to handle all global self inserting characters in rectangle mode.

2002-05-24  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el (read-file-name-internal): Remove the
	`ange-ftp' property.
	(ange-ftp-real-read-file-name-internal): Remove.

2002-05-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-end-of-subprogram): Remove the final
	`forward-line'.
	(f90-end-of-block, f90-beginning-of-block, f90-next-block-end)
	(f90-previous-block-start): New navigation commands.

2002-05-20  Simon Josefsson  <jas@extundo.com>

	* fringe.el: New file.

	* menu-bar.el (menu-bar-options-save): Add fringe-mode.
	(menu-bar-showhide-fringe-menu): New menu.
	(menu-bar-showhide-menu): Add Fringe sub-menu.

2002-05-23  Colin Walters  <walters@verbum.org>

	* replace.el (occur-engine): Include all text properties except
	mouse-face on the newline at the end of occurrences.

2002-05-23  Kim F. Storm  <storm@cua.dk>

	* apropos.el (apropos-true-hit, apropos-false-hit-symbol)
	(apropos-false-hit-str, apropos-true-hit-doc): New functions.
	(apropos-command, apropos-value, apropos-documentation-internal)
	(apropos-documentation-check-doc-file)
	(apropos-documentation-check-elc-file): Use them to filter out
	false matches where only one keyword matches, but more than once.

	* apropos.el (apropos-show-scores, apropos-orig-regexp)
	(apropos-all-regexp, apropos-synonyms, apropos-words)
	(apropos-all-words): New variables.
	(apropos-words-to-regexp, apropos-rewrite-regexp)
	(apropos-calc-scores, apropos-score-str, apropos-score-doc)
	(apropos-score-symbol): New functions.
	(apropos-command, apropos, apropos-value, apropos-documentation):
	Allow keywords in addition to regexp.  Added scoring.
	(apropos-documentation-check-doc-file)
	(apropos-documentation-check-elc-file): Added scoring.
	(apropos-print): Sort according to score.

2002-05-22  Colin Walters  <walters@cis.ohio-state.edu>

	* info.el (Info-mode-hook): Change `font-lock-mode' to
	`turn-on-font-lock'.

	* font-core.el (font-lock-function): New variable.
	(font-lock-default-function): New function, created from
	`font-lock-mode'.
	(font-lock-mode): Just funcall `font-lock-function'.
	(font-lock-symbol-category-alist): New variable.

2002-05-22  Markus Rost  <rost@math.ohio-state.edu>

	* files.el (file-newest-backup): Use file-name-sans-versions.

	* diff.el (diff-latest-backup-file): Replace the main code by
	a call of file-newest-backup.

2002-05-22  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-guess-indent): Look further into
	the buffer.

2002-05-21  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el (ange-ftp-allow-child-lookup): Re-enable since
	the last patch works around the wu-ftpd misfeature that prompted
	the disabling of this optimization.

2002-05-21  Colin Walters  <walters@gnu.org>

	* international/mule.el (make-coding-system): Doc fixes.

	* international/mule.el (auto-coding-functions): New variable.
	(auto-coding-from-file-contents): Use it.
	(set-auto-coding): Update docs.
	(sgml-xml-auto-coding-function): New function.

	* international/mule-util.el (truncate-string-to-width):
	New optional argument `ellipsis'.  Add commented-out test suite, and
	change coding to iso-2022-7bit.

2002-05-21  Colin Walters  <walters@verbum.org>

	* font-lock.el (font-lock-defaults, font-lock-defaults-alist)
	(font-lock-multiline, font-lock-fontified, font-lock-mode)
	(turn-on-font-lock, font-lock-add-keywords, global-font-lock-mode)
	(font-lock-global-modes): Move to font-core.el.
	(font-lock-set-defaults-1): Partially moved to font-core.el.

	* font-core.el: New file, with functions taken from font-lock.el.
	(font-lock-category-alist): New variable.
	(font-lock-mode): Use it.
	(font-lock-set-defaults): Partially taken from font-lock.el.
	Only load font-lock.el when necessary.

	* loadup.el: Add font-core.el.

	* replace.el (occur-mode-hook): New variable.
	(occur-fontify-region-function): Delete.
	(occur-mode): Don't use it.  Set up `font-lock-category-alist'
	instead.
	(occur-fontify-on-property): Delete.
	(occur-engine): Use categories from `font-lock-category-alist'.

	* info.el (Info-fontify): Delete.
	(Info-select-node): Don't use it.
	(Info-mode-hook): New variable.
	(Info-mode): Set up categories.
	(Info-fontify-menu-headers, Info-fontify-node): Use categories.

	* ibuffer.el (ibuffer-formats): Update docs.
	(ibuffer-category-alist): New variable.
	(ibuffer-get-category): New function.
	(ibuffer-compile-make-eliding-form): Use category property instead
	of face.
	(ibuffer-compile-format): Pass current ibuffer buffer to column
	functions too.
	(ibuffer-buffer-name-category): New function.
	(ibuffer-compile-format): If the current column is a `name'
	column, figure out the appropriate category to put on it.
	(filename-and-process): Use category property.
	(ibuffer-fontify-region-function): Deleted.
	(ibuffer-unfontify-region-function): Deleted.
	(ibuffer-update-title-and-summary): Use category properties.
	(ibuffer-insert-filter-group): Ditto.
	(ibuffer-mode): Set up category properties.

2002-05-21  Colin Walters  <walters@debian.org>

	* replace.el (occur-engine): Increment globalcount all at once
	after searching a buffer.
	(occur-mode-map): Don't escape plain "o".

	* ibuf-macs.el (define-ibuffer-column): Add third argument
	`ibuffer-buf'.

	* ibuffer.el (toplevel): Require font-lock, to get the face
	definitions.
	(ibuffer-use-fontification): Deleted.
	(column filename-and-process): New column.
	(ibuffer-formats): Use it by default.
	(ibuffer-name-map, ibuffer-mode-name-map)
	(ibuffer-filter-group-map): Don't set parent to `ibuffer-mode-map'.
	(ibuffer-do-save, ibuffer-do-toggle-modified)
	(ibuffer-do-toggle-read-only, ibuffer-do-delete)
	(ibuffer-do-kill-on-deletion-marks): Include name in definition.
	(ibuffer): New optional argument `formats'.

2002-05-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* indent.el (indent-rigidly): Mention how to remove all indentation.

2002-05-21  Colin Walters  <walters@gnu.org>

	* international/mule-diag.el (describe-char-after): Order display
	of text properties by the size of their value, for clarity.

2002-05-20  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el (ange-ftp-generate-root-prefixes)
	(ange-ftp-file-name-completion): Don't cons unnecessarily.
	(ange-ftp-send-cmd): Always `cd' before doing `ls'.

	* wid-edit.el (widget-color-complete):
	* progmodes/etags.el (tags-complete-tags-table-file):
	* progmodes/cpp.el (cpp-choose-symbol): Don't cons unnecessarily.

	* textmodes/outline.el (outline-reveal-toggle-invisible):
	Reverse the meaning of the second arg.

	* reveal.el (reveal-post-command): Reverse the semantics of
	reveal-toggle-invisible and support isearch-open-invisible-temporary.

2002-05-20  Markus Rost  <rost@math.ohio-state.edu>

	* mail/sendmail.el (mail-recover-1): Remove (debug).
	(mail-signature): Fix :type.
	(mail-default-directory): New user option.
	(mail, mail-recover): Use that option.

2002-05-20  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* international/mule.el (auto-coding-alist): Use emacs-mule
	for auto-save files.

2002-05-20  Miles Bader  <miles@gnu.org>

	* files.el (find-file-read-args): Don't trash existing value of
	`minibuffer-setup-hook', just add our hook to it.

2002-05-19  Markus Rost  <rost@math.ohio-state.edu>

	* international/ucs-tables.el (unify-8859-on-encoding-mode)
	(unify-8859-on-decoding-mode): Change :version attributes to strings.

	* simple.el (yank-excluded-properties): Change :version attribute
	to a string.

	* dired.el (dired-view-command-alist): Change :version attribute
	to a string.

	* xscheme.el (xscheme-start-hook): Change :version attribute to a
	string.

	* find-dired.el (find-dired): Implement revert-buffer-function.

	* mail/emacsbug.el (report-emacs-bug-hook): Do another save-excursion.

2002-05-19  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-match-end, f90-break-line): Simplify a bit.
	(f90-get-present-comment-type): Fix earlier change.
	(f90-comment-indent): Doc fix.
	(f90-equal-symbols, f90-looking-at-do, f90-looking-at-select-case)
	(f90-looking-at-if-then): Remove lets.
	(f90-looking-at-where-or-forall): Handle if split over lines.
	(f90-change-keywords): Doc fix.

2002-05-19  Richard M. Stallman  <rms@gnu.org>

	* indent.el (indent-region): Make COLUMN arg optional.

	* files.el (find-file-read-args): New function.
	(find-file, find-file-other-window, find-file-other-frame)
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Use it.

	* custom.el (custom-load-symbol): Verify that LOADED is a string.

	* arc-mode.el (archive-zip-use-pkzip): Variable deleted.
	(archive-zip-extract, archive-zip-expunge, archive-zip-update)
	(archive-zip-update-case): Use locate-file to decide whether
	to use pkzip.
	(archive-zip-extract): Test for pkzip in value of archive-zip-extract.

	* files.el (locate-file): Doc fix.

2002-05-19  John Paul Wallington  <jpw@shootybangbang.com>

	* mail/rmail.el (rmail-show-message-hook): Offer `goto-address'
	as an option.

2002-05-18  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Always strip the trailing / even if the file is not a directory.

2002-05-18  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-mode-syntax-table, f90-mode-map): Do the
	initialization in the defvar.
	(f90-font-lock-on, f90-font-lock-off): Add 'menu-alias property.
	(f90-font-lock-1, f90-font-lock-2, f90-font-lock-3)
	(f90-font-lock-4): Move the doc strings.
	(f90-menu-bar-menu): New internal variable to hold the top-level menu.
	(f90-change-case-menu, f90-font-lock-menu): Minor code changes.
	(f90-mode-abbrev-table): Initialize in the defvar, with
	define-abbrev-table.

2002-05-18  Eli Zaretskii  <eliz@is.elta.co.il>

	* tar-mode.el (tar-octal-time): Fix last change.

2002-05-18  Markus Rost  <rost@math.ohio-state.edu>

	* mail/emacsbug.el (report-emacs-bug-text-prompt): New variable.
	(report-emacs-bug): Store the prompt in
	`report-emacs-bug-text-prompt'.  Move Configuration/Important
	settings information after the user's report.
	(report-emacs-bug-hook): Unclutter by deleting the content of
	`report-emacs-bug-text-prompt'.

2002-05-17  Thomas Morgan  <tlm@pocketmail.com>

	* forms.el (forms-jump-record, forms-insert-record)
	(forms-delete-record): Calculate lines from the beginning of the
	accessible portion rather than from the beginning of the buffer.

2002-05-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-mule.el (eval-and-compile): Add a trivial replacement for a
	possibly missing encode-char.
	(ps-mule-font-info-database-bdf): Add associations for Unicode
	fonts.  Doc fix.
	(ps-mule-font-info-database-ps-bdf): Doc fix.
	(ps-mule-encode-ucs2): New function for encoding Unicode characters.

	* tar-mode.el (tar-octal-time): Fix the last argument of logior.

2002-05-16  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Find funs defined with defun-cvs-mode.
	(find-function-space-re): New const.  Skips comments as well.
	(find-function-regexp, find-variable-regexp): Use it.

	* pcvs.el (cvs-cmd-do): Accept non-CVS dirs with CVS-ctrl'd subdirs.
	(cvs-mode-add-change-log-entry-other-window): Work on multiple files.
	(cvs-mode-set-flags): Don't cons unnecessarily.

2002-05-16  Colin Walters  <walters@debian.org>

	* menu-bar.el (menu-bar-tools-menu) <calculator>: Rename to
	"Simple Calculator".
	(menu-bar-tools-menu) <calc>: New.

2002-05-16  Juanma Barranquero  <lektu@terra.es>

	* progmodes/hideshow.el (hs-adjust-block-beginning): Fix typo.

	* filesets.el (filesets-ormap): Fix typo.

	* faces.el (describe-face): Fix typo.

2002-05-15  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-make-symbol):
	Don't treat (lambda () ...) as an expression.

2002-05-15  John Paul Wallington  <jpw@shootybangbang.com>

	* replace.el (occur-read-primary-args): Handle a bare 'C-u' correctly.

2002-05-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/easymenu.el (easy-menu-add): Doc fix.

2002-05-14  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-directive-re): New name for
	fortran-preprocessor-re.  All usage updated.
	(fortran-calculate-indent): Give directives zero indentation.

2002-05-14  Jason Rumney  <jasonr@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-name-match): Match both
	displayed text and internal name as string.

2002-05-14  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--rectangle-operation):
	Don't highlight empty lines in rectangles.

	* emulation/keypad.el: Improved commentary.
	(keypad-setup, keypad-shifted-setup): Add choice to setup
	Numeric keypad with decimal key; value is selected character.
	(keypad-decimal-key, keypad-shifted-decimal-key): Remove options.
	(keypad-numlock-setup, keypad-numlock-shifted-setup): New options.
	(keypad-setup): Arg list changed to support the new options.

2002-05-14  Richard M. Stallman  <rms@gnu.org>

	* dabbrev.el (dabbrev-case-distinction): New option.
	(dabbrev--try-find): Handle dabbrev-case-distinction.
	(dabbrev--search): Clean up the code.
	(dabbrev-upcase-means-case-search): Doc fix.
	(dabbrev-case-replace): Fix custom tags and docs.

2002-05-14  Jochen Küpper  <jochen@jochen-kuepper.de>

	* calc/calc-units.el (math-standard-units): Update from CODATA.

2002-05-14  Stefan Monnier  <monnier@cs.yale.edu>

	* skeleton.el (skeleton-transformation): Default to `identity'.
	(skeleton-insert): Use `move-after' markers and `insert' rather
	than rely on insert-before-markers.
	(skeleton-internal-1): Handle `> \n' specially so that the newline
	is inserted before the first line is indented.

2002-05-14  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-tag):
	Default skeleton-transformation to `identity'.

2002-05-14  Francesco Potortì  <pot@gnu.org>

	* shell.el (shell-mode): Make second part of initialization
	depend on whether comint-input-ring is empty, rather than depend
	on it being nil.

2002-05-14  Richard M. Stallman  <rms@gnu.org>

	* files.el (make-auto-save-file-name):
	Delete the auto-save file after make-temp-file creates it.

2002-05-13  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-enable-cursor-indications): Default off.
	(cua-mode): Print Enabled/Disabled messages if interactive.
	Disable delete-selection-mode and pc-selection-mode when cua-mode
	is enabled; reenable if cua-mode is turned off.
	Remember setting of transient-mark-mode when cua-mode is enabled;
	restore if cua-mode is disabled.

2002-05-13  Richard M. Stallman  <rms@gnu.org>

	* mail/emacsbug.el (report-emacs-bug): Change the "English please" msg.

2002-05-13  Colin Walters  <walters@gnu.org>

	* ibuf-ext.el (ibuffer-format-filter-group-data): New function.

	* ibuffer.el (ibuffer-insert-filter-group): New argument filter-string.
	(ibuffer-redisplay-engine): Handle it.

	* add-log.el (add-log-mailing-address): Can be a list, too.
	(add-change-log-entry): If `add-log-mailing-address' is a list,
	then handle it.

2002-05-12  Colin Walters  <walters@debian.org>

	* replace.el (occur-1): New optional argument `buf-name'.
	(occur-revert-function): Use it.

	(occur-1): Handle plurals.

	(occur-engine): If there are no more matches, then finish
	searching the current buffer.

2002-05-12  Pavel Janík  <Pavel@Janik.cz>

	* net/ange-ftp.el (ange-ftp-try-passive-mode)
	(ange-ftp-passive-host-alist): Change :version attributes to be
	strings.

2002-05-12  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/checkdoc.el (checkdoc-minor-mode): Define it with
	define-minor-mode.

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Handle more whitespace/newline combinations in symbol definitions.

2002-05-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* w32-vars.el (w32)
	* vc-cvs.el (vc-cvs-global-switches)
	(vc-cvs-sticky-date-format-string, vc-cvs-sticky-tag-display)
	* textmodes/sgml-mode.el (sgml-xml-mode)
	* ruler-mode.el (ruler-mode)
	* replace.el (query-replace-skip-read-only)
	* progmodes/fortran.el (fortran-preprocessor-re)
	* net/ange-ftp.el (ange-ftp-passive-host-alist)
	* mail/sendmail.el (mail-use-dsn)
	* faces.el (mode-line-inactive, minibuffer-prompt)
	* add-log.el (add-log-always-start-new-record): Change all
	post-21.1 :version attributes to 21.4.

2002-05-12  Richard M. Stallman  <rms@gnu.org>

	* mail/smtpmail.el (smtpmail-mail-address): New variable.
	(smtpmail-send-it): Bind and use that instead of `mail-address'.
	(smtpmail-via-smtp): Likewise.

	* ansi-color.el (ansi-color-get-face): Avoid add-to-list on local var.
	(ansi-color-apply-sequence): Avoid duplicates in combined face list.

	* dired-aux.el (dired-show-file-type): Use -- to say FILE's not option.

	* subr.el (functionp): Catch errors in indirect-function.

2002-05-12  Pavel Janík  <Pavel@Janik.cz>

	* net/ldap.el (ldap-search-internal): Unfold folded lines before
	parsing.

	* cus-edit.el (customize-set-value): Rename `var' to `variable'
	and `val' to `value'.
	(customize-save-variable): Rename `var' to `'variable.

2002-05-12  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-preprocessor-re): New variable.
	Use it for font-locking and indentation.
	(fortran-previous-statement, fortran-next-statement): Make them
	skip over preprocessor lines.
	(fortran-calculate-indent): Use fortran-preprocessor-re.

2002-05-10  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-enable-cua-keys)
	(cua-enable-register-prefix): Add value for `other' choice.

2002-05-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-showhide-scroll-bar-menu)
	(menu-bar-showhide-menu): Use display-graphic-p, not window-system.
	(menu-bar-showhide-menu) <showhide-menu-bar, showhide-tool-bar>:
	Run a named function.
	(showhide-menu-bar, showhide-toolbar): Invoke customize-mark-as-set.
	(menu-bar-showhide-menu) <column-number-mode, line-number-mode>:
	Fix help text.

2002-05-10  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-mode): Misc. changes to use
	emulation-mode-map-alists instead of minor-mode-map-alist.

2002-05-09  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-show-message):
	Catch error in check-coding-system.

	* progmodes/compile.el (compilation-error-regexp-alist):
	New element to recognize Python error messages.

	* shell.el (shell-replace-by-expanded-directory):
	If there's already a / at the end, don't add one.

2002-05-09  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-mode-map): Add :enable guards for
	`ibuffer-filter-disable', `ibuffer-pop-filter',
	`ibuffer-or-filter', `ibuffer-negate-filter',
	`ibuffer-decompose-filter', `ibuffer-save-filters',
	`ibuffer-switch-to-saved-filters', `ibuffer-delete-saved-filters',
	`ibuffer-save-filter-groups',
	`ibuffer-switch-to-saved-filter-groups',
	`ibuffer-delete-saved-filter-groups'.

	* ibuf-ext.el (ibuffer-do-occur): Default to 0 context lines.

2002-05-09  Markus Rost  <rost@math.ohio-state.edu>

	* woman.el (woman-menu): Move symbol before the comment so that
	find-function-search-for-symbol finds it.

2002-05-10  Miles Bader  <miles@gnu.org>

	* facemenu.el (list-colors-display): Don't use
	`display-color-cells' unless the display class is one for which
	that info is relevant.

2002-05-09  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-send-it): Use user-mail-address from
	calling buffer.
	(smtpmail-auth-credentials): Bump :version to 21.4 (21.3 will not
	have the patch).

2002-05-09  Kim F. Storm  <storm@cua.dk>

	* wid-edit.el (checkbox): New check-mark image.

2002-05-08  Pavel Janík  <Pavel@Janik.cz>

	* filesets.el (filesets-running-xemacs): Fix last change.

2002-05-08  Markus Rost  <rost@math.ohio-state.edu>

	* help-fns.el (describe-function-1): If the source is
	`loaddefs.el', look for the real source.  This is necessary only
	for defaliases.

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Add autoload cookie.
	(find-function-regexp): Include
	"\(quote " to match the defaliases in loaddefs.el.

	* filesets.el (filesets-conditional-sort): Use copy-sequence,
	not copy-list.
	(filesets-menu-path, filesets-menu-before, filesets-menu-in-menu):
	Defvar them to nil if running in Emacs.

2002-05-08  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/flyspell.el (make-flyspell-overlay): Add help text
	to flyspell overlays.

	* info.el (Info-mode-map): Bind `c' to Info-copy-current-node-name.

2002-05-08  Richard M. Stallman  <rms@gnu.org>

	* diff.el (diff-regexp-alist): Doc fix.

	* mail/smtpmail.el (netrc-machine, netrc-get): Add autoloads.

2002-05-08  Simon Marshall  <simon@gnu.org>

	* msb.el (msb-menu-bar-update-buffers): Fix frame menu to use
	the frame name as the car of a menu entry, rather than the frame.

2002-05-08  Juanma Barranquero  <lektu@terra.es>

	* rfn-eshadow.el (read-file-name-electric-shadow-mode): Fix typos
	in docstring.

2002-05-07  Colin Walters  <walters@verbum.org>

	* replace.el (occur-unfontify-region-function): Delete.
	(occur-mode): Don't use it.
	(occur-engine): Respect `keep-props'.
	(occur-accumulate-lines): If we're moving forward, decrement;
	don't increment, and vice versa.

2002-05-08  Toru Tomabechi  <Toru.Tomabechi@orient.unil.ch>

	* language/tibet-util.el (tibetan-canonicalize-for-unicode-alist)
	(tibetan-canonicalize-for-unicode-regexp): New variables.
	(tibetan-canonicalize-for-unicode-region): New function.
	(tibetan-strict-unicode): New variable.
	(tibetan-pre-write-canonicalize-for-unicode): New function.

2002-05-07  Markus Rost  <rost@math.ohio-state.edu>

	* net/ange-ftp.el (ange-ftp-re-read-dir): Don't hide it behind
	the autoload-cookie.  Remove comment.

	* ffap.el (ffap): Don't hide it behind the autoload-cookie.

	* rect.el (close-rectangle): Don't hide it behind the
	autoload-cookie.

2002-05-07  Juanma Barranquero  <lektu@terra.es>

	* windmove.el (windmove-default-keybindings): Add optional
	parameter to allow using a modifier other than 'shift.

2002-05-07  Thomas Link  <t.link@gmx.at>

	* filesets.el:
	(filesets-external-viewers): Fix customization problem.
	(filesets-some): Replaces cl's `some'.  Calls changed.
	(filesets-member): Replaces cl's `member*'.  Calls changed.
	(filesets-ormap): New function.

2002-05-07  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (toplevel): Specialize `ibuffer-mode-groups-popup'
	menu items.

2002-05-07  Colin Walters  <walters@gnu.org>

	* ibuf-ext.el (ibuffer-pop-filter-group): Doc fix.
	(ibuffer-clear-filter-groups): Likewise.
	(ibuffer-kill-filter-group): Likewise.
	(ibuffer-kill-line): Likewise.
	(ibuffer-read-filter-group-name): New function.
	(ibuffer-jump-to-filter-group): Use it.
	(ibuffer-kill-filter-group): Likewise.
	(ibuffer-yank-filter-group): Likewise.
	(ibuffer-decompose-filter-group): New function.

	* ibuffer.el (ibuffer-mode-map): Bind it.  Add :enable guard
	around `ibuffer-filters-to-filter-group' menu item.  Fix :enable
	guards for `ibuffer-pop-filter-group' and
	`ibuffer-clear-filter-groups'.

2002-05-06  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Use with-syntax-table.

2002-05-06  Francesco Potortì  <pot@gnu.org>

	* mail/rmail.el (rmail-font-lock-keywords): Highlight Resent-[Ff]rom:.

2002-05-05  Markus Rost  <rost@math.ohio-state.edu>

	* time-stamp.el (time-stamp-format): Doc fix: escape open
	parenthesis in column 0.

2002-05-04  Richard M. Stallman  <rms@gnu.org>

	* toolbar/tool-bar.el (tool-bar-local-item-from-menu):
	Handle both cases: when the menu item has cached info
	and when it doesn't.

	* filesets.el (filesets-browse-dir-function): Rename from ...-fn.
	(filesets-open-file-function, filesets-save-buffer-function): Likewise.
	(filesets-tree-max-level): Doc fix.
	(filesets-commands, filesets-external-viewers)
	(filesets-ingroup-patterns): Mark as risky.
	(filesets-cache-hostname-flag): Doc fix.
	(filesets-menu-cache-file): Doc fix.  Mark as risky.
	(filesets-menu-before, filesets-menu-path, filesets-menu-in-menu):
	Don't defcustom them if running in Emacs.

2002-05-04  Thomas Link  <t.link@gmx.at>

	* filesets.el (filesets-ingroup-collect-files):
	Fix problem with inclusion groups' :scan-depth property.

2002-05-04  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-kill-filter-group): Test for killing
	"Default" group earlier.  Push killed group on
	`ibuffer-filter-group-kill-ring'.
	(ibuffer-kill-line): Document.  Don't push killed group ourselves.
	(ibuffer-yank-filter-group): Rename from `ibuffer-yank'.
	(ibuffer-insert-filter-group-before): New function, broken out
	from `ibuffer-yank'.
	(ibuffer-yank): Now just call `ibuffer-yank-filter-group'.

	* ibuffer.el (ibuffer-mode-operate-menu, ibuffer-mode-mark-menu)
	(ibuffer-mode-view-menu): Unused variables; delete.
	(ibuffer-find-file): Pass wildcard flag to `find-file' correctly.

2002-05-04  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuffer.el (ibuffer-mode-groups-popup): New variable.
	(toplevel): Bind filter group menu entries in it.  Add :enable
	forms for some menu items.
	(toplevel): Bind [down-mouse-3] in `ibuffer-mode-filter-group-map'
	to `ibuffer-mouse-popup-menu'.
	(ibuffer-mouse-popup-menu): Test whether or not we're on a filter
	group name, and if so, pop up a filter group menu.

2002-05-04  Jason Rumney  <jasonr@gnu.org>

	* mwheel.el (mwheel-event-button): Translate mouse-wheel events.
	(mwheel-scroll): Recognize nil scroll amount as documented.

	* term/w32-win.el (mouse-wheel-scroll-line)
	(mouse-wheel-scroll-screen): Remove.
	([mouse-wheel], [C-mouse-wheel], [S-mouse-wheel]): Use mwheel-scroll.

	* w32-vars.el (mouse-wheel-scroll-amount): Remove.

2002-05-04  Markus Rost  <rost@math.ohio-state.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Bind case-fold-search when searching.

2002-05-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* apropos.el (apropos-print): Fix the reference to mouse-2.

2002-05-04  Daniel Pfeiffer  <occitan@esperanto.org>

	* play/mpuz.el (mpuz-switch-to-window): Set buffer-read-only directly.

2002-05-04  Kim F. Storm  <storm@cua.dk>

	* cus-edit.el (custom-buffer-verbose-help): New variable.
	(custom-buffer-create-internal): Remove verbose introduction
	in customization buffer when it is nil.

2002-05-03  Dave Love  <fx@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Don't offer coding systems that use locking shift.
	Ask for confirmation if chosen coding system disagrees with
	a `coding:' spec in the file.

2002-05-03  John Wiegley  <johnw@gnu.org>

	* eshell/esh-var.el (eshell-modify-global-environment): Added this
	customization variable, which will cause any "export" commands
	within any eshell buffer to modify the global Emacs environment.
	It defaults to nil, which means that such commands will only
	modify that Eshell buffer's environment.
	(eshell-var-initialize): Initialize `eshell-modify-global-environment'.

	* eshell/em-cmpl.el (eshell-command-completions-alist):
	Improve default completion targets for objdump, nm and readelf.

2002-05-03  Colin Walters  <walters@verbum.org>

	* play/gamegrid.el (gamegrid-user-score-file-directory): New variable.
	(gamegrid-add-score-with-update-game-score):
	Use `shared-game-score-directory'.  Correctly handle non-setuid case.

2002-05-02  Colin Walters  <walters@verbum.org>

	* replace.el (occur-mode-map): Bind "q" to `delete-window'.
	(occur-1): If one of the buffers we're searching is the *Occur*
	buffer itself, handle it by creating a temporary buffer.  If any
	of the buffers being searched are killed, note that in the search
	result message.  Also, set local variables before we possibly kill
	the buffer.

2002-05-02  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-make-toggle): Add optional PROPS arg.
	(menu-bar-options-save): Add cua-mode.
	(menu-bar-options-menu): Add toggle for cua-mode.
	Disable toggle for transient-mark-mode if cua-mode is enabled.

	* emulation/cua-base.el (cua-inhibit-cua-keys): New buffer-local var.

2002-05-01  Richard M. Stallman  <rms@gnu.org>

	* help.el (view-todo): New function.
	(help-map): Bind C-h C-t to view-todo.
	(help-for-help): Change the text.

2002-05-01  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: Yet more doc string, comment and whitespace
	changes.
	(f90-imenu-flag): New name for internal variable f90-imenu.
	(f90-blocks-re, f90-program-block-re, f90-end-if-re)
	(f90-no-break-re): Use regexp-opt.
	(f90-end-type-re): Add closing "\\>".
	(f90-indent-region): Correctly indent comments embedded in
	continued lines.
	(f90-indent-new-line): Make it indent the current line, as it should.
	(f90-line-continued, f90-get-present-comment-type)
	(f90-looking-at-if-then, f90-indent-line, f90-indent-new-line)
	(f90-indent-region, f90-indent-subprogram, f90-do-auto-fill)
	(f90-join-lines, f90-fill-region, f90-match-end, f90-insert-end)
	(f90-change-keywords): Minor code tidying.

	* progmodes/fortran.el (fortran-strip-sequence-nos): Rename from
	typo `fortran-strip-sqeuence-nos'.

2002-05-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (clone-indirect-buffer-other-window): Fix a typo in
	pop-up-window.

2002-05-01  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler):
	Only interpret delete-selection property if mark-active.
	(cua-mode): Fix require in defcustom.

2002-05-01  Pavel Janík  <Pavel@Janik.cz>

	* calendar/cal-menu.el (cal-menu-x-popup-menu): Fix argument of
	error call.

2002-05-01  Colin Walters  <walters@verbum.org>

	* textmodes/tex-mode.el (tex-validate-buffer):
	Use `occur-revert-arguments' instead of setting `occur-nlines' and
	`occur-buffer'.  Don't test for `input-pending-p' in loop.
	Set text property `occur-target' instead of `occur'.

2002-04-30  John Wiegley  <johnw@gnu.org>

	* align.el (align-region): Fix the fix to align-region, because
	the "name" argument was appearing twice.

2002-05-01  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-decl-1): Better way
	to handle protection labels, one which doesn't get confused by
	inherit colons.

	* progmodes/cc-engine.el (c-end-of-decl-1): Don't treat
	functions that have "class" or "struct" in the return type as
	classes or structs.

2002-04-30  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-custom-menu): Change "Recently Changed
	Options" to "New Options..."; rephrase tooltip.
	Rephrase tooltip for "Specific Option...".
	Added "Saved Options" item.  [from Simon Marshall]

2002-04-30  Richard M. Stallman  <rms@gnu.org>

	* time.el (display-time-mail-directory)
	(display-time-mail-function): Doc fixes.

	* ediff-hook.el: Remove autoload cookies.

	* language/tibetan.el (tibetan-obsolete-glyphs): Now in tibet-util.el.

	* language/tibet-util.el (tibetan-obsolete-glyphs): From tibetan.el.

	* align.el (align-region): Fix call to `message'.
	Check that (car rule) is a symbol.

	* autoinsert.el (auto-insert-directory): Doc fix.

	* facemenu.el (describe-text-at and stuff): Move to descr-text.el.

	* descr-text.el: New file, broken out of facemenu.el.

	* emacs-lisp/advice.el (documentation): Add ad-define-subr-args call.

2002-04-29  Markus Rost  <rost@math.ohio-state.edu>

	* mail/emacsbug.el (report-emacs-bug-hook):
	Use replace-match only if search was successful.

2002-04-29  Richard M. Stallman  <rms@gnu.org>

	* net/zone-mode.el (zone-mode): Add write-file-hooks hook locally.

	* mail/emacsbug.el (report-emacs-bug-hook): Don't fail completely
	if the user edits the Emacs version number in the text.

	* filesets.el (filesets-running-xemacs): Make defvar unconditional.
	(filesets-ingroup-files): Rename from filesets-ingroup-paths.
	(filesets-error): Simplify definition and make conditional
	on filesets-running-xemacs.
	(filesets-find-file-using): Rename from fsfind-file-using.

2002-04-29  Stefan Monnier  <monnier@cs.yale.edu>

	* info.el (Info-find-in-tag-table-1, Info-read-subfile): Use point-min.
	(Info-read-node-name-1): Complete file names.
	(Info-complete-menu-item): Don't cons unnecessarily.

	* files.el (locate-file): New fun.
	(locate-file-completion): Rename from load-completion and generalize.
	(load-library): Use it.
	(make-auto-save-file-name): Expand caddr.

	* newcomment.el (comment-fill-column): New var.
	(comment-indent): Use it.
	(comment-or-uncomment-region): New fun.
	(comment-dwim): Use it.

2002-04-29  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-kill-filter-group): Call `delete' function.
	(ibuffer-kill-line): Copy the filter group data structure when killing.
	(ibuffer-yank): Handle case where we're yanking on the default
	group correctly.
	(ibuffer-delete-saved-filter-groups): Doc fix.

	* play/gamegrid.el (gamegrid-add-score-with-update-game-score):
	Test whether or not update-game-score is setuid, and do the right
	thing.

2002-04-29  Kim F. Storm  <storm@cua.dk>

	* subr.el (remove-yank-excluded-properties): New helper function.
	(insert-for-yank, insert-buffer-substring-as-yank): Use it.

	* simple.el (yank-excluded-properties): Added help-echo to list.

2002-04-29  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* autoinsert.el (auto-insert-directory): Doc fix.

	* progmodes/f90.el: Add/change doc strings for many inline
	functions.  Whitespace changes.
	(f90-indent-line-no, f90-update-line): Minor code changes.

2002-04-29  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: New file.

	* emulation/cua-rect.el: New file.

	* emulation/cua-gmrk.el: New file.

	* emulation/keypad.el: New file.

2002-04-29  Triet Hoai Lai  <thlai@ee.usyd.edu.au>

	* language/vietnamese.el (viet-tcvn-decode-table, ccl-decode-tcvn)
	(ccl-encode-tcvn, ccl-encode-tcvn-font, vietnamese-tcvn):
	New Vietnamese coding system.

	* language/viet-util.el: Update Commentary section.

2002-04-29  Pavel Janík  <Pavel@Janik.cz>

	* filesets.el (filesets-data): Doc fix.
	(filesets-running-xemacs): Define even when compiling.

	* recentf.el (recentf-cancel-dialog): Remove dot at the end of
	sentence.

2002-04-29  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Fix last change with
	yet-another-approach.

2002-04-28  Markus Rost  <rost@math.ohio-state.edu>

	* net/ange-ftp.el (ange-ftp-passive-host-alist)
	(ange-ftp-bs2000-additional-pubsets): Fix custom type.

	* files.el (small-temporary-file-directory): Fix custom type.

2002-04-28  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-xemacs-flag): New variable.
	(f90-mark-subprogram-overlay): New variable.
	(f90-mark-subprogram): Now it highlights the subprogram.
	(f90-font-lock-keywords-1, f90-font-lock-keywords-2):
	Fix highlighting of various "type" forms.

2002-04-28  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-mode): Additional documentation on filter
	groups.

2002-04-28  John Paul Wallington  <jpw@shootybangbang.com>

	* ibuf-ext.el (ibuffer-set-filter-groups-by-mode): Don't make an
	ibuffer-mode filter group if `ibuffer-view-ibuffer' is nil.

2002-04-28  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-recover-1): Decrease non-random-len
	by 1 for the newly-readded #.

	* files.el (make-auto-save-file-name): Specify # as suffix
	in the non-file-visiting case.

	* subr.el (make-temp-file): New arg SUFFIX.

	* filesets.el: New file.

	* replace.el (occur-accumulate-lines): Avoid incf and decf.
	(occur-engine-add-prefix): New function.
	(occur-engine): Avoid using macrolet, incf and decf.
	Use occur-engine-add-prefix instead.
	Rename `l' to `lines' and `c' to `matches'.

	* replace.el (occur-engine, occur-mode-mouse-goto)
	(occur-mode-find-occurrence, occur-mode-goto-occurrence)
	(occur-mode-goto-occurrence-other-window)
	(occur-mode-display-occurrence): A position is just a marker,
	not a list.

	* replace.el (occur-revert-arguments):
	Renamed from occur-revert-properties.  All uses changed.

2002-04-28  Pavel Janík  <Pavel@Janik.cz>

	* recentf.el (recentf-menu-before): Use string to specify path in
	the menu.

	* international/mule-cmds.el (read-language-name): Take care of
	non-list values.

2002-04-27  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-load-symbol): Move from cus-edit.el.
	(custom-load-recursion): Likewise.

	* cus-edit.el (custom-load-symbol): Move to custom.el.
	(custom-load-recursion): Likewise.

	* progmodes/ada-xref.el (ada-add-ada-menu): Menu pseudo-keys
	generated by easymenu are now lowercase.

2002-04-27  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-update-buffers): Add menu items
	Next Buffer and Previous Buffer.

	* simple.el (next-buffer, prev-buffer): New commands.
	Bind C-x left and C-x right to them.

	* info.el (Info-header-line): Mark it as risky-local-variable.

	* subr.el (insert-for-yank): Replace `category' property
	with whatever properties it stands for.

	* subr.el (member-ignore-case): Ignore non-strings in LIST.

2002-04-27  Miles Bader  <miles@gnu.org>

	* faces.el (read-face-name): Format the prompt correctly when
	there's no default.

2002-04-26  Andrew Choi  <akochoi@shaw.ca>

	* term/mac-win.el: Don't call ediff-toggle-multiframe.
	Set default directory.  Set process-connection-type to nil.

2002-04-26  Richard M. Stallman  <rms@gnu.org>

	* loadup.el: Explicitly load cus-face and timer.

	* isearch.el: Don't require timer.

	* faces.el: Don't require cus-face.

	* cus-edit.el (customize-face): Use read-face-name
	and handle multiple faces.
	(customize-face-other-window): Make it work similarly.

	* faces.el (read-face-name): New defaulting features.
	New args STRING-DESCRIBING-DEFAULT and MULTIPLE.
	(list-faces-display): Use the face, not its name string,
	as arg when running customize-face.
	Put a `read-face-name' prop on the entire line.
	(describe-face): Handle multiple faces via read-face-name.

	* textmodes/tex-mode.el (tex-start-options): New variable.
	(tex-start-commands): New variable.
	(tex-start-options-string): Variable deleted.
	(tex-start-tex): Use tex-start-options and tex-start-commands,
	not tex-start-options-string.
	(tex-command): Doc fix.

2002-04-26  Sam Steingold  <sds@gnu.org>

	* mail/smtpmail.el (smtpmail-try-auth-methods): When `host' is
	not in the authinfo/netrc, keep `cred' at nil.

2002-04-26  Gerd Moellmann  <gerd@gnu.org>

	* find-file.el: Remove Ada-specific example code.

2002-04-25  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-hooks.el: Put back the autoloads.

2002-04-25  Colin Walters  <walters@verbum.org>

	* ibuffer.el (define column process): Use `ibuffer-aif'.

	* ibuf-ext.el (ibuffer-saved-filter-groups): Don't include broken
	defaults.
	(ibuffer-yank): Be sure to `setq' after we use `nconc'.
	(ibuffer-save-filter-groups): Correctly structure filter groups.
	(ibuffer-switch-to-saved-filter-groups): Correctly extract filter
	groups.

2002-04-25  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (mail-use-dsn): New variable to request
	delivery status notification from MTA.
	(sendmail-send-it): Use it.

	* mail/smtpmail.el (smtpmail-queue-counter): New variable.
	(smtpmail-send-it): Use it to construct new queue filenames (needed
	if you send more than one message per second, which is possible if
	you use Gnus Agent).

	* mail/smtpmail.el (smtpmail-auth-credentials): Support netrc
	files as well.
	(smtpmail-try-auth-methods): Support netrc data.
	(netrc-parse): Autoload netrc.

2002-04-25  Colin Walters  <walters@verbum.org>

	* replace.el (multi-occur-by-filename-regexp): Doc fix.
	(occur-engine): Go to `point-min'.  Make nlines argument actually
	mean number of context lines.  Handle it.  Pad digits to the right.

	* ibuf-ext.el (ibuffer-filtering-groups): Rename to
	`ibuffer-filter-groups'.  Update all users.
	(ibuffer-show-empty-filter-groups): New variable.
	(ibuffer-saved-filter-groups): New variable.
	(ibuffer-maybe-save-stuff): Rename from
	`ibuffer-maybe-save-saved-filters'.  Update callers.
	Handle `ibuffer-saved-filter-groups'.
	(ibuffer-hidden-filtering-groups): Rename to
	`ibuffer-hidden-filter-groups'.
	(ibuffer-filter-group-kill-ring): New variable.
	(ibuffer-save-with-custom): Doc fix.
	(ibuffer-set-filter-groups-by-mode): New function.
	(ibuffer-clear-filter-groups): New function.
	(ibuffer-current-filter-groups-with-position): Rename from
	`ibuffer-current-filter-groups'.  Update callers.
	(ibuffer-kill-filter-group): New function.
	(ibuffer-kill-line): New function.
	(ibuffer-yank): New function.
	(ibuffer-save-filter-groups): New function.
	(ibuffer-delete-saved-filter-groups): New function.
	(ibuffer-switch-to-saved-filter-groups): New function.
	(ibuffer-mark-on-buffer): Add optional arguments for adding a
	specific mark, and marking on a specific group.

	* ibuffer.el (ibuffer-formats): Doc fix.
	(ibuffer-mode-map): Bind <up> to `ibuffer-backward-line'.
	Bind new functions from ibuf-ext.el.  Add menu entries for them.
	Remove superfluous tooltips.
	(ibuffer-toggle-marks): If on a group name, then toggle marks just
	in that group.
	(ibuffer-mark-interactive): Handle filter groups.
	(ibuffer-mark-forward, ibuffer-unmark-forward)
	(ibuffer-mark-for-delete, ibuffer-unmark-backward)
	(ibuffer-mark-for-delete-backwards): Update docs.
	(ibuffer-current-filter-groups): Move to ibuf-ext.el, and renamed
	to `ibuffer-current-filter-groups-with-position'.
	(ibuffer-redisplay-engine): Handle `ibuffer-show-empty-filter-groups'.
	(ibuffer-mode): Add some documentation about filter groups.

2002-04-25  Andreas Schwab  <schwab@suse.de>

	* find-dired.el (find-name-dired): Don't quote pattern twice.

2002-04-26  Miles Bader  <miles@gnu.org>

	* cus-edit.el (customize-face, customize-face-other-window):
	Use default instead of initial-input for suggested face.

2002-04-25  Gerd Moellmann  <gerd@gnu.org>

	* cus-edit.el (customize-face-other-window, customize-face):
	Interactively, when point is on text with a face, suggest to
	customize that face.

2002-04-25  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: General tidy-up of commentary and some doc strings.

2002-04-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* scroll-all.el (scroll-all-function-all) New function to do the
	actual work.
	(scroll-all-scroll-down-all, scroll-all-scroll-up-all)
	(scroll-all-page-down-all, scroll-all-page-up-all)
	(scroll-all-beginning-of-buffer-all, scroll-all-end-of-buffer-all):
	Make them use scroll-all-function-all.

	* progmodes/f90.el (f90-get-beg-of-line): Remove and replace
	with line-beginning-position.
	(f90-get-end-of-line): Remove and replace with line-end-position.
	(f90-match-piece): Remove and replace with match-string.
	(f90-current-indentation): Remove `current-column'.
	(f90-get-present-comment-type): Use match-string rather than
	buffer-substring.
	(f90-match-end): Use line-beginning-position, line-end-position
	rather than beginning-of-line, end-of-line.
	(f90-startup-message): Variable removed.

2002-04-24  Colin Walters  <walters@verbum.org>

	* replace.el (occur-accumulate-lines): Add optional argument
	`no-props'.  Handle it.
	(occur-engine): Use it.

	* ibuf-ext.el (toplevel): Remove byte-compile-dynamic.  Try to set
	up autoloads manually.
	(ibuffer-split-list): New function.
	(ibuffer-filtering-groups): New variable.
	(ibuffer-hidden-filtering-groups): New variable.
	(ibuffer-mouse-toggle-filter-group): New function.
	(ibuffer-toggle-filter-group): New function.
	(ibuffer-toggle-filter-group-1): New function.
	(ibuffer-forward-filter-group): New function.
	(ibuffer-backward-filter-group): New function.
	(ibuffer-generate-filter-groups): New function.
	(ibuffer-filters-to-filter-group): New function.
	(ibuffer-pop-filter-group): New function.
	(ibuffer-jump-to-filter-group): New function.
	(ibuffer-do-occur): Just use `occur-read-primary-args'

	* ibuffer.el (ibuffer-filter-group-name-face): New.
	(ibuffer-mode-map): Bind and add menu entries for most new
	functions; also, bind the arrow keys to the movement functions.
	(ibuffer-mode-filter-group-map): New.
	(ibuffer-mouse-toggle-mark): Handle group names.
	(ibuffer-mouse-visit-buffer): Error if the current buffer is killed.
	(ibuffer-skip-properties): New function.
	(ibuffer-backward-line, ibuffer-forward-line): Optionally skip
	group names.  Also, handle new properties.
	(ibuffer-visit-buffer, ibuffer-visit-buffer-other-window):
	Move error handling to `ibuffer-current-buffer'.
	(ibuffer-visit-buffer-other-frame, ibuffer-bury-buffer): Ditto.
	(ibuffer-visit-tags-table, ibuffer-do-view-1): Ditto.
	(ibuffer-toggle-marks): Add optional group argument.
	(ibuffer-mark-interactive): Skip group names.
	(ibuffer-current-buffer): Clean up error handling.
	(ibuffer-fontify-region-function): Fontify group names.
	(ibuffer-map-lines): Add extra group argument.  Handle it.
	(ibuffer-current-filter-groups): New function.
	(ibuffer-redisplay): Handle hidden filtering groups.
	(ibuffer-sort-bufferlist): New function, taken from
	`ibuffer-insert-buffers-and-marks'.
	(ibuffer-insert-filter-group): New function.
	(ibuffer-redisplay-engine): Rename from
	`ibuffer-insert-buffers-and-marks'.  Handle new filtering groups.
	(ibuffer): Add filter-groups argument.  Handle it.
	Use `save-selected-window'.
	(ibuffer-mode): Make `ibuffer-filtering-groups' and
	`ibuffer-hidden-filtering-groups' buffer-local.

	* ibuf-macs.el (ibuffer-save-marks): Call `ibuffer-redisplay-engine'.

2002-04-24  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-intern): Downcase before interning.
	(easy-menu-define-key-intern): Function deleted; callers intern
	and then call easy-menu-define-key.
	(easy-menu-do-add-item): Explicitly intern the key, but not BEFORE.
	(easy-menu-define-key): Use easy-menu-name-match to match BEFORE.
	(easy-menu-name-match): New function.
	(add-submenu): New function.
	(easy-menu-get-map-look-for-name): Use easy-menu-name-match.

2002-04-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-adv-search-menu)
	(menu-bar-adv-search-menu): Improve the help text.

2002-04-24  Simon Josefsson  <jas@extundo.com>

	* net/netrc.el: New file.

2002-04-24  Thomas DeWeese  <tdeweese@rochester.rr.com>

	* term/x-win.el (x-select-text, x-cut-buffer-or-selection-value):
	Check if any of the available selection sources has new content
	and if so it will return that content.

2002-04-24  Miles Bader  <miles@gnu.org>

	* menu-bar.el (buffers-menu-show-directories)
	(buffers-menu-show-status): New variables.
	(menu-bar-update-buffers-1): Use them.

2002-04-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-mask-comment): More fixes when used
	from `c-do-auto-fill' and point is at or near the limit of the
	comment.  Fixed bug when the prefix from `c-guess-fill-prefix'
	is longer than the text on the first line of the comment when
	it's masked.

2002-04-24  Miles Bader  <miles@gnu.org>

	* menu-bar.el (menu-bar-update-buffers-1): Make sure
	`uniquify-buffer-name-style' is bound.

2002-04-23  Colin Walters  <walters@verbum.org>

	* replace.el (toplevel): Require `cl' while compiling.
	(occur-buffer, occur-nlines): Delete.
	(occur-revert-properties): Rename to `occur-revert-properties'.
	(occur-mode): Handle it.  Set up font lock.
	(occur-revert-function): Simply apply `occur-1'.
	(occur-mode-find-occurence, occur-mode-mouse-goto)
	(occur-mode-goto-occurrence-other-window)
	(occur-mode-display-occurrence): Handle buffer property.
	(list-matching-lines-face): Use defcustom.
	(list-matching-lines-buffer-name-face): New variable.
	(occur-accumulate-lines): Renamed from `ibuffer-accumulate-lines',
	in ibuffer.el.
	(occur-read-primary-args): Move out of `occur'.
	(occur): Delete.  Now simply call `occur-1'.
	(multi-occur, multi-occur-by-filename-regexp): New functions.
	(occur-1): New function.
	(occur-engine): Renamed from `ibuffer-occur-engine' to replace the
	previous implementation of `occur'; taken from ibuf-ext.el.
	(occur-fontify-on-property): New function.
	(occur-fontify-region-function, occur-unfontify-region-function):
	New functions.

	* ibuffer.el (ibuffer-accumulate-lines): Moved to replace.el.

	* ibuf-ext.el (ibuffer-depropertize-string): Delete.
	(ibuffer-occur-match-face): Delete.
	(ibuffer-occur-props, ibuffer-occur-mode): Delete.
	(ibuffer-occur-mouse-display-occurence): Delete.
	(ibuffer-occur-goto-occurence, ibuffer-occur-display-occurence)
	(ibuffer-do-occur-1, ibuffer-occur-revert-buffer-function): Delete.
	(ibuffer-occur-engine): Moved to replace.el.
	(ibuffer-do-occur): Simply call `occur-1'.

	* play/gamegrid.el (gamegrid-add-score-with-update-game-score):
	Handle the case where we're already viewing the score file.

2002-04-23  Andreas Schwab  <schwab@suse.de>

	* menu-bar.el (menu-bar-goto-menu): Fix bindings for next-tag and
	next-tag-otherw.

2002-04-23  Miles Bader  <miles@gnu.org>

	* menu-bar.el (menu-bar-update-buffers-1): Don't display a
	directory separator if there's no directory.  Don't display
	directories at all if uniquify is active.  Some code cleanup.
	(uniquify-buffer-name-style): Declare (but don't initialize).

	* menu-bar.el (menu-bar-update-buffers): Don't use constant lists
	for command menu entries, since the low-level menu code modifies
	them.  Cache the resulting list.
	(menu-bar-buffers-menu-command-entries): New variable.

	* menu-bar.el (menu-bar-update-buffers): Add `Select Named Buffer'.
	Add separator line before commands
	Remove old crufty code that tried to line things up by adding
	spaces to entries (it doesn't work).
	Move `Frames' submenu after the normal buffers, and add a
	separator line before it.
	(menu-bar-buffers-menu-list-buffers-entry): Variable removed.

2002-04-22  Richard M. Stallman  <rms@gnu.org>

	* files.el (after-find-file): Use %s to output MSG.

	* dired.el (dired-mouse-find-file-other-window):
	Handle events that move out of the window.

2002-04-23  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-mask-comment): Fixed bug where point
	was moved to the following line when it was at the first line
	of a block comment where comment-start-skip matched to eol.

2002-04-22  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move-finish): Find beg and end of line
	before calling line-move-to-column.  Do consider intangible
	when finding the end.  Take more care in analyzing the results
	of intangibility after line-move-to-column.

2002-04-22  Pavel Janík  <Pavel@Janik.cz>

	* international/mule-diag.el (list-input-methods-1): Doc fix (LEIM is
	now part of the standard distribution).

	* tmm.el (tmm-completion-prompt): Doc fix.

	* hilit-chg.el (global-highlight-changes): Capitalize status texts.

2002-04-22  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* diary-lib.el (include-other-diary-files): Allow modifying
	included buffer, to turn off selective display.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (c-define-abbrev-table): New function to
	pass the SYSTEM-FLAG to `define-abbrev' in a way that works in
	emacsen that doesn't support it.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el, progmodes/cc-engine.el,
	* progmodes/cc-styles.el, progmodes/cc-vars.el
	(c-guess-basic-syntax, c-lineup-topmost-intro-cont):
	Find correct anchor for statement-cont in top level constructs.
	Analyze variable initializations in top level constructs as
	topmost-intro-cont instead of statement-cont.  That is an
	incompatible change but it gives better consistency.  The new
	lineup function c-lineup-topmost-intro-cont' compensates for
	it and is now put on topmost-intro-cont by default.

	* progmodes/cc-align.el, progmodes/cc-engine.el,
	progmodes/cc-langs.el (c-lineup-argcont): Lineup function
	contributed by Kevin Ryde.

	(c-in-gcc-asm-p): Function to recognize asm statements.
	Contributed by Kevin Ryde.

	(c-opt-asm-stmt-key): New language variable to recognize the
	beginning of asm statements.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Detect variable declarations after class and struct declarations
	correctly.  Fixed limit error when finding the anchor for
	template-args-cont and topmost-intro-cont.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-beginning-of-defun)
	(c-declaration-limits): Find the "line oriented" declaration
	start too, just like the "line oriented" end is found.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-vars.el (c-offsets-alist): A more sane default
	for `inexpr-statement'.  This is not compatible, though.
	I think the benefit of a good default style outweights that in
	this case.  Besides, `inexpr-statement' is not very common.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-delete-forward):
	Fix silly bug that caused it to delete backwards in hungry delete
	mode.  (It's amazing that this bug hasn't been reported.)

	* progmodes/cc-cmds.el (c-declaration-limits, c-mark-function):
	Extracted the code to get the declaration limits from
	`c-mark-function' to a new `c-declaration-limits'.

	(c-indent-defun): Use the same method to get the limits of the
	declaration or macro as `c-mark-function'.

	* progmodes/cc-engine.el (c-beginning-of-decl-1): Handle brace
	list initializers correctly (but costly; it ought to be
	integrated into `c-beginning-of-statement-1').

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, progmodes/cc-engine.el
	(c-beginning-of-defun, c-end-of-defun, c-mark-function):
	Rewritten to detect the declaration limits better.
	Now handles K&R argdecls, class definitions followed by variables etc.

	(c-in-knr-argdecl): Broke out the K&R argdecl test in
	`c-beginning-of-decl-1' to this new function.

	(c-end-of-statement-1, c-end-of-decl-1):
	Replace `c-end-of-statement-1' with `c-end-of-decl-1', which correctly
	handles declarations that continue after the block.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	Added an option to restrict matching to the top level of the
	current paren sexp.

	* progmodes/cc-langs.el (c-opt-block-decls-with-vars-key):
	New regexp to recognize declarations that continue after the block.

	(c-syntactic-eol): New regexp to match a "syntactic" eol.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixed a bug
	that often caused the backward limit to be lost at the top
	level.  This improves performance a bit.

	* progmodes/cc-engine.el (c-syntactic-re-search-forward):
	New function that works like `re-search-forward' but only returns
	matches in syntactically significant text.

	* progmodes/cc-engine.el: Fixed a faster and more accurate way
	to recognize K&R argdecls.

	(c-beginning-of-decl-1): New function that put point at the
	beginning of the declaration.  It handles K&R argdecl blocks.

	(c-guess-basic-syntax): Replaced the `knr-argdecl' recognition
	code with one that doesn't depend on the current indentation.
	The anchor position for `knr-argdecl' has also changed, but in
	a way that is unlikely to cause compatibility problems.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-defs.el, progmodes/cc-engine.el
	(c-forward-comment): `forward-comment' in XEmacs skips over
	line continuations in the backward direction.  Correct for
	that.  Also made this a defun since it has grown too large now
	to be a defsubst.

	* progmodes/cc-langs.el: More convenient and decentralized
	setup of the language specific variables.  The regexp-opt
	mangling is also done at compile time now.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-indent-line-or-region):
	Call `c-indent-line' directly instead of through
	`indent-according-to-mode' so that this function always
	indents syntactically.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixed a bug
	where a class beginning with a nested class could cause an
	infinite loop (the state outside the narrowed out class is
	never used now).

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el, progmodes/cc-cmds.el,
	progmodes/cc-engine.el, progmodes/cc-vars.el: Fixes so that
	the context sensitive analysis inside macros is restricted to
	the bodies of #define's; other things, like #if expressions,
	never have anything in common with their surroundings.
	The old `cpp-macro-cont' syntax is now used in situations where
	the syntactic analysis isn't applicable, and a new syntactic
	element `cpp-define-intro' is used to add indentation in
	#define bodies.

	(c-lineup-cpp-define): New name for `c-lineup-macro-cont' to
	better reflect its use.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Ignore line
	continuation backslashes in the detection of `arglist-cont-nonempty'.

	* progmodes/cc-align.el: Use the vector form in the return
	value in all cases where lineup functions return absolute columns.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-add-stmt-syntax)
	(c-guess-basic-syntax): Anchor `brace-list-intro' and
	`bracec-list-close' better for brace lists nested inside expressions.

	* progmodes/cc-engine.el, progmodes/cc-langs.el,
	progmodes/cc-mode.el, progmodes/cc-styles.el: Cleaned up the
	various language specific variables and their initialization.
	The keyword regexps are now lists that are combined with
	regexp-opt.  Some variables have changed names to fit better
	with the naming convention.

	* progmodes/cc-defs.el, progmodes/cc-vars.el
	(c-buffer-is-cc-mode): The value is the mode symbol of the
	original CC Mode mode.

	(c-major-mode-is): Compare against the buffer local variable
	`c-buffer-is-cc-mode', which is faster than using `derived-mode-class'.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-forward-syntactic-ws)
	(c-backward-syntactic-ws, c-forward-token-1)
	(c-backward-token-1, c-in-literal, c-literal-limits)
	(c-collect-line-comments, c-literal-type, c-on-identifier)
	(c-guess-basic-syntax): These functions are now considered part
	of the "CC Mode API" and may be used by other code.
	That's signified by making their documentation into docstrings.

	(c-whack-state, c-hack-state, c-skip-case-statement-forward):
	Removed these internal functions since they aren't used.

	(c-forward-to-cpp-expression): Classified this function as internal.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-langs.el (c-ObjC-class-key, c-Java-class-key):
	Simplified these regexps; the class keywords they contain
	ought to be enough to avoid false matches, so checking for
	following identifiers etc is just unnecessary (and might also
	fail for oddly formatted code).

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, progmodes/cc-cmds.el
	(c-forward-comment-lc): New function that behaves like
	`c-forward-comment', with the exception that line
	continuations are treated as whitespace.

	(c-beginning-of-statement): Use `c-forward-comment-lc', to
	work correctly in macros and other places where line
	continuations should be treated as whitespace.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Analyze a
	normal label in a switch block as a case label, to get
	consistent lineup with the case labels.

	* progmodes/cc-engine.el (c-backward-syntactic-ws): Fixed bug
	in skipping over a macro that ends with an empty line.

	* progmodes/cc-styles.el: Require cc-align since styles added
	with `c-add-style' often contains references to functions
	defined there, and so the `c-valid-offset' check might
	otherwise complain on them.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el, progmodes/cc-mode.texi,
	progmodes/cc-vars.el: Added two new lineup functions:

	(c-lineup-knr-region-comment): A new lineup function to get
	(what most people think is) better indentation of comments in
	the "K&R region" between the function header and its body.

	(c-lineup-gcc-asm-reg): New lineup function for better
	indentation inside gcc asm blocks.  Contributed by Kevin Ryde.

	(c-offsets-alist): Use `c-lineup-gcc-asm-reg' and
	`c-lineup-knr-region-comment' in the default offset
	configuration, since these two functions have little impact
	outside their intended use, and they generally do the right
	thing when they kick in.

	* progmodes/cc-engine.el (c-guess-continued-construct)
	(c-guess-basic-syntax): Handle nested functions in all
	languages, not just Pike.  In C and C++ there's a gcc
	extension for this, and it also gives better treatment of
	macros that are followed by blocks.

	* progmodes/cc-langs.el (c-symbol-key): Made this variable
	mode specific, to handle Pike special symbols like `== better.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, progmodes/cc-engine.el,
	progmodes/cc-vars.el (c-report-syntactic-errors): A new
	variable to control the syntactic error messages.  It defaults
	to off; since CC Mode ignores most syntactic errors it might
	as well ignore them all for the sake of consistency.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-looking-at-inexpr-block):
	Optimization.  Can give a noticeable speedup if there's a
	large preceding function or class body.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el, progmodes/cc-cmds.el: Use more
	efficient and correct insertion functions in many places.
	Always inherit text properties correctly if the text is
	permanent.  Also do it for speed in temporary insertions,
	since I figure it's less work to continue the surrounding text
	properties than to break them.

	* progmodes/cc-styles.el (c-read-offset): Unbind SPC in the
	completion to make it easier to enter lists.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-beginning-of-defun): Fixed bug where
	c-state-cache was clobbered.

	* progmodes/cc-cmds.el, progmodes/cc-engine.el
	(c-calculate-state): Moved from cc-cmds.el to cc-engine.el due
	to dependency.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-parse-state): Ignore unbalanced
	open parens in macros (if point isn't in the same one).

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-context-open-line): New function
	that is the `open-line' equivalent to `c-context-line-break'.

	* progmodes/cc-mode.el (c-mode-base-map): Compatibility fix
	for Emacs 21 since `indent-new-comment-line' has been changed
	to `comment-indent-new-line' there.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, progmodes/cc-langs.el
	(c-stmt-delim-chars, c-stmt-delim-chars-with-comma):
	New variables containing the character sets used to recognize
	statement/declaration boundaries.  These variables might help
	to support languages like javascript and awk, where newlines
	sometimes delimits statements.

	(c-crosses-statement-barrier-p): Use `c-stmt-delim-chars' as
	the set of statement delimiting characters, to allow it to be
	changed dynamically and per-mode.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-looking-at-bos)
	(c-looking-at-inexpr-block, c-add-stmt-syntax)
	(c-guess-basic-syntax): Treat blocks directly inside function
	calls like "bare" statements inside function calls, and not
	like in-expression statements.  This to make indentation of
	such blocks consistent with other statements inside macro calls.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Made arglist-cont anchor correctly in arglists that contain statements.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Fixed consistent anchoring of defun-block-intro in defuns in code
	blocks (can only occur in Pike).

	* progmodes/cc-engine.el (c-looking-at-inexpr-block)
	(c-looking-at-inexpr-block-backward): Changed the arguments to
	require containing sexps and paren state, for better efficiency.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, progmodes/cc-engine.el,
	progmodes/cc-vars.el: Improved anchoring of statement and
	handling of labels in front of substatements.

	(c-guess-continued-construct, c-guess-basic-syntax):
	Improved and unified anchoring at statements.  Statements beginning
	with comments or labels are now avoided, by going out of
	blocks and containing statements if necessary.  This nesting
	handling also fixes the case when there's a statement after a
	block open brace.  Added the syntactic symbol `substatement-label'.

	(c-electric-colon): Map the new `substatement-label' to
	`label' when consulting `c-hanging-colons-alist'.

	(c-offsets-alist): Added substatement-label.  Updated the
	comments for the new anchoring positions at statements.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Use more sane
	anchor points for knr-argdecl-intro and access-label.
	They used to refer to some point on the same line, a bug which was
	neutralized by a kludge in `c-get-syntactic-indentation' which
	ignored such anchor points.

	(c-get-syntactic-indentation): Removed the kludge that was
	necessary due to buggy anchor points.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Do not check
	the absence of a comma before arglist-close (case 7A) in any
	language, since there's nothing better to do that case anyway.
	Added special case to make in-expression statements be
	recognized as normal arglist-cont if we're directly in a macro
	arglist, for consistency with other "bare" statements.

	* progmodes/cc-engine.el (c-looking-at-bos): Added optional
	limit arg for backward searches.

	* progmodes/cc-engine.el (c-looking-at-inexpr-block):
	Anchor gcc in-expression statements at the surrounding open
	parenthesis.  Treat a class body as an in-expression class if
	it's used in an object clone expression in Pike.

	* progmodes/cc-engine.el (c-get-offset)
	(c-get-syntactic-indentation): Allow several anchor positions
	in the list of syntactic symbols.  Only the first is used as
	the base for the offset calculation.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-indent-defun): Indent the current
	macro if inside one at the top level.  Do not throw an error
	if used at the top level outside a macro.

	* progmodes/cc-cmds.el (c-backslash-region): Do tab width
	alignment only if the backslashes can't be aligned with
	surrounding backslashes.

	* progmodes/cc-engine.el (c-end-of-macro): New function.

	* progmodes/cc-engine.el (c-least-enclosing-brace):
	Rewritten to not be destructive.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-context-line-break): Only do a macro
	line break when point is inside the content of it; if it's in
	the cpp keyword a normal line break is done.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Do not add
	cpp-macro-cont inside the argument list to a #define.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-defs.el (c-forward-comment): Implemented a
	kludge to avoid the problem most forward-comment incarnations
	have with `\' together with comment parsing.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-check-state-cache): Fixed bug
	which could cause the state returned by `c-parse-state' to
	lack a closed paren element.  That in turn could result in
	very long searches, since it's common that they start from the
	last preceding close brace.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-statement-1): Do not
	treat else-if as a single continuation, since that'd make it
	hard to get the right anchor point when there's a line break
	between the two keywords.  This change causes else-clause to
	be anchored on the closest preceding else-if and not always on
	the starting if, but that doesn't affect the indentation for
	any reasonably sane style.  Also introduced a noerror flag.

	(c-beginning-of-closest-statement): Removed;
	c-beginning-of-statement-1 now avoids the problem this one solved.

	* progmodes/cc-engine.el (c-guess-continued-construct)
	(c-guess-basic-syntax): Better and more uniform anchor points
	for 'statement-cont and 'substatement.  The effect is
	noticeable mostly when there's a label on the same line as the
	beginning of the statement, or when there are more stuff
	before the start of the statement.

	* progmodes/cc-engine.el (c-looking-at-inexpr-block):
	Added flag to disable looking at the type of the surrounding paren
	since that confuses c-beginning-of-statement-1 and a couple of
	other places.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Avoid stepping to the previous statement in case 18.
	Improvements in recognition of statement blocks on the top level.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-statement-1)
	(c-crosses-statement-barrier-p): Rewritten to get a well
	defined and documented behavior.  This fixes some tricky cases
	in recognition of do-while constructs.

	(c-backward-to-start-of-do, c-backward-to-start-of-if):
	Removed; use c-beginning-of-statement-1 instead.

	(c-guess-continued-construct, c-guess-basic-syntax):
	Various fixes to not depend on the bugs previously in
	c-beginning-of-statement-1.  Cleanups in cases 18 and 17 to
	use the new behavior of c-beginning-of-statement-1 better.
	Fixed recognition of catch blocks inside macros.

	* progmodes/cc-engine.el (c-backward-syntactic-ws): Fixed bug
	in skipping over a macro.

	* progmodes/cc-langs.el (c-label-kwds): New variable to
	contain the appropriate c-*-label-kwds value.

	* progmodes/cc-vars.el (defcustom-c-stylevar): Fixed value
	evaluation bug that caused the widget for
	c-block-comment-prefix to bug out.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Improved recognition of statements: They are now recognized in
	contexts where they normally can't occur, e.g. on the top level or
	in function call arguments.  This is mainly useful to recognize
	statements in macros at the top level, and in arguments to
	macros.  The cases has been moved around quite a bit, and case
	10 has been copied to case 18.  (The cases has not been
	renumbered because of this.)

	(c-guess-continued-construct): New function which has the
	rules which are common between cases 10 and 18.

	* progmodes/cc-engine.el (c-beginning-of-statement-1)
	(c-backward-to-start-of-do, c-backward-to-start-of-if):
	Fixes so that they really obey the passed limits.

	(c-safe-position): Return nil if the state doesn't contain a
	suitable position.

	(c-guess-basic-syntax): Fixes some too short limits in calls
	to c-beginning-of-statement-1.  Some fixes for top level
	analysis in ObjC mode.

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	Fixed bug in do-while statements where the body is not a block.

	* progmodes/cc-styles.el (c-set-style):
	Reset c-special-indent-hook to its global value if in override mode.
	Fixes problem where functions on that hook remained after
	style switch.

	* progmodes/cc-engine.el (c-evaluate-offset, c-get-offset):
	Use c-benign-error to report the c-strict-syntax-p error.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el, progmodes/cc-defs.el,
	progmodes/cc-cmds.el, progmodes/cc-engine.el, cc-vars.el:
	Several fixes to treat macros as code and not literals and to
	handle line continuations transparently.

	(c-skip-ws-forward, c-skip-ws-backward): New macros to skip
	through whitespace and line continuations, but not comments
	and macros.

	(c-in-literal): No longer recognizes macros as literals by
	default.  An extra flag argument is required to do that.

	(c-macro-start, c-query-macro-start)
	(c-query-and-set-macro-start): Added a cache for the macro
	start position.

	(c-forward-syntactic-ws, c-backward-syntactic-ws): Fixes for
	more speed when limits are given.  Workaround for bad behavior
	in forward-comment in some emacsen when it hits a buffer limit
	with a large repeat count.

	(c-lineup-macro-cont): Improved behavior when
	c-syntactic-indentation-in-macros is nil.

	(c-syntactic-indentation-in-macros, c-backslash-max-column)
	(c-auto-align-backslashes): New customization variables to
	control macro handling.

	* progmodes/cc-menus.el (cc-imenu-c++-generic-expression):
	Fixes to handle line continuations.

	* progmodes/cc-defs.el, progmodes/cc-styles.el
	(c-get-style-variables, c-set-offset): Report style errors
	with message and ding instead of error signal.  This to avoid
	interrupted mode init if there's some style problem.

	(c-benign-error): New macro to report errors that doesn't need
	to interrupt the operation.

	* progmodes/cc-defs.el (c-point): Added eonl and eopl positions.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-brace, c-indent-region):
	Removed most of the c-state-cache fiddling, since the global
	state cache now handles this.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixed bug
	when there's an open paren at the very first char of the
	visible buffer region.

	* progmodes/cc-engine.el (c-parse-state, c-check-state-cache):
	Cache the state globally and invalidate it below every buffer
	change with the new after change function
	`c-check-state-cache'.  This gives a considerable performance
	boost when editing large functions or classes.

	* progmodes/cc-engine.el (c-whack-state-after): Slight optimization.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, progmodes/cc-langs.el,
	progmodes/cc-align.el: Improvements to syntactic analysis
	inside macros:

	(c-block-stmt-1-kwds, c-block-stmt-2-kwds): New variables used
	by `c-guess-basic-syntax'.

	(c-parse-state): Fixed bug with braces inside macros when
	using cached state info.

	(c-forward-to-cpp-expression): New function to aid in
	syntactic analysis inside macros.

	(c-beginning-of-statement-1, c-backward-syntactic-ws):
	Fixes to work better inside macros.

	(c-forward-syntactic-ws): Whitespace between the # and the
	command should be allowed in preprocessor directives.

	(c-lineup-macro-cont): New lineup function to get context
	sensitive indentation inside macros.

	(c-offsets-alist): Made `c-lineup-macro-cont' the default for
	cpp-macro-cont.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-statement-1)
	(c-forward-syntactic-ws): Fixes to handle continued lines.

	(c-backward-to-start-of-if, c-guess-basic-syntax):
	Do syntactic analysis inside macros.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-indent-region): Did a speedup made
	possible by the more flexible state cache.

	* progmodes/cc-engine.el (c-parse-state, c-whack-state-before)
	(c-whack-state-after, c-hack-state)
	(c-narrow-out-enclosing-class, c-guess-basic-syntax):
	Improved the state cache system.  It now can use partial info from
	an old cached state to calculate a new one at a different
	position.  Removed some kludges to avoid the state cache.
	The new functions `c-whack-state-before' and `c-whack-state-after'
	replace the now obsolete `c-whack-state'.

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	Optimized backing through a macro.  This can speed things up
	quite a bit when there are long macros before point.

	(c-beginning-of-macro): Do not ignore the limit.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-continued-statement):
	Fixed a bug where the keyword wasn't reindented correctly if
	followed by another keyword or identifier.

	* progmodes/cc-engine.el (c-parse-state): Ignore closed brace
	pairs that are in macros.  Fixes some cases where e.g. the
	second of two "do { } while (0)" macros after each other
	indented differently.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-macro)
	(c-forward-syntactic-ws): Recognize "#!" as a preprocessor
	directive when it begins a line, to allow for script
	interpreter lines like "#!/usr/bin/pike" at the beginning of
	the file.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-looking-at-inexpr-block):
	Recognize brace blocks inside a parenthesis expression as
	inexpr-statement.  Useful when writing statements as macro arguments.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-fill-paragraph, c-do-auto-fill)
	(c-mask-comment): Broke out the comment masking code from
	`c-fill-paragraph' to a new function `c-mask-comment', to be
	able to do the same thing in `c-do-auto-fill'.  This should
	make auto-fill-mode behave better.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-brace, c-electric-paren):
	Check `executing-macro' to avoid blinking parens when macros
	are executed.

	* progmodes/cc-mode.el, progmodes/cc-styles.el
	(c-setup-filladapt): Moved from cc-mode.el to cc-styles.el for
	consistency with `c-setup-paragraph-variables' (which was
	placed there due to the dependency from `c-set-style').

	* progmodes/cc-styles.el, progmodes/cc-vars.el: Fixed bug with
	incomplete initialization from the style variable fallbacks if
	there already is a style called "user" defined when CC Mode
	starts up for the first time.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, progmodes/cc-vars.el
	(c-comment-indent, c-indent-comment-alist): Added new variable
	`c-indent-comment-alist' to allow better control over
	`c-comment-indent'.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el (c-lineup-C-comments): Try to match
	both `comment-start-skip' and the comment prefix on the
	current line with the comment starter, so that we line up
	comments which matches `c-comment-prefix-regexp' on the first
	line (after the `/') without the need to make
	`comment-start-skip' match whatever `c-comment-prefix-regexp' matches.

	* progmodes/cc-mode.el, progmodes/cc-styles.el (c-common-init)
	(c-set-style-1, c-setup-paragraph-variables): Moved the
	variable initialization based on `c-comment-prefix-regexp' to
	a new function `c-setup-paragraph-variables', which is now
	used both at mode init and when a style that sets
	`c-comment-prefix-regexp' is activated.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Better handling of C++ template args to avoid confusion with
	`<' and `>' used as operators in member init expressions.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-most-enclosing-brace)
	(c-least-enclosing-brace): Added optional second arg to limit
	the search to before a certain point.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fixed bug which
	could cause incorrect analysis if a cached state is used (usually
	only happens when an electric key reindents a line).

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-defs.el (c-forward-comment): More idiosyncrasy
	insulation.  This time for XEmacs 21.

	* progmodes/cc-engine.el, progmodes/cc-langs.el:
	Improved handling of inheritance lists:

	(c-beginning-of-inheritance-list): Rewritten to use a more
	syntactically correct method that doesn't get confused by
	badly placed linebreaks and comments.

	(c-guess-basic-syntax): Several fixes to the handling of
	inheritance lists in combination with templates.  'inher-intro
	is now anchored on the start of the class declaration and not
	the indentation of the current line.  Switched places on cases
	5D.3 and 5D.4 and made them use more syntactically correct methods.

	(c-inher-key): Removed since the code in
	`c-guess-basic-syntax' now uses token-based search.

	* progmodes/cc-cmds.el, progmodes/cc-mode.el (c-mode-menu):
	Added a submenu to access some toggles.

	(c-toggle-syntactic-indentation): New function to toggle the
	variable `c-syntactic-indentation'.

	* progmodes/cc-styles.el (c-set-style): Improved the error
	message for incorrect offsets a bit.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-indent-exp): Don't require that the
	sexp follows point immediately, instead find the closest
	following open paren that ends on another line.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el (c-lineup-cascaded-calls):
	New indentation function.

	* progmodes/cc-engine.el (c-beginning-of-macro): Bugfix for
	directives with whitespace between the '#' and the name.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-forward-syntactic-ws)
	(c-backward-syntactic-ws): Handle line continuations as
	whitespace.  Don't move past a macro if that'd take us past
	the limit.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-macro)
	(c-forward-syntactic-ws): Multiline strings begin with `#"' in
	Pike, and that shouldn't be confused with a preprocessor directive.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: Extended the kludge to interoperate
	with the delsel and pending-del packages wrt to the new
	function `c-electric-delete-forward'.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-indent-exp): Keep the indentation of
	the block itself, i.e. only indent the contents in it.

	* progmodes/cc-styles.el (c-set-style): Use the default
	argument to completing-read instead of initial-contents, if
	the function is recent enough to support it.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (c-mode-help-address):
	Removed bug-gnu-emacs@gnu.org from the receiver list for bug reports.
	I've almost never seen a bug reported this way that should go
	to that list, but it's rather common that the reports concern
	the combination CC Mode and XEmacs instead.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-paren): Fixed bug when both
	brace-elseif-brace and brace-catch-brace are active and
	there's a "else if"-block before the catch block.

	* progmodes/cc-menus.el (cc-imenu-c++-generic-expression):
	Detect function headers that span lines.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-brace)
	(c-electric-semi&comma, c-electric-colon, c-electric-paren):
	Check for last on line only for doing the auto-newline-mode
	stuff, not for the reindentation.

	* progmodes/cc-cmds.el (c-electric-brace): Fixed bugs in the
	handling of c-syntactic-indentation: When it's nil, indent the
	new lines but don't reindent the current one.  Reindent the
	line only when the inserted brace comes first on it, instead
	of last.

	* progmodes/cc-cmds.el (c-electric-brace)
	(c-electric-semi&comma): Fixed two places where
	c-syntactic-indentation wasn't heeded.

	* progmodes/cc-cmds.el (c-electric-pound): Don't be electric
	inside a macro.

	* progmodes/cc-engine.el (c-backward-to-start-of-if): Try a
	little harder to find a fallback position when an orphan else
	is found.  Fixed case where an else following a do-while
	statement could be associated with an if inside the do-while.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-guess-fill-prefix): Tuned the dwim
	for the fallback to add a single space after the comment prefix.

	* progmodes/cc-cmds.el (c-indent-new-comment-line): Somewhat better
	behavior in some special cases, especially for single-line comments.
	Avoid breaking up a comment starter or ender.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-outline-level): Applied patch from
	the Emacs sources to make this work in invisible text.

	* progmodes/cc-langs.el (c-switch-label-key): Fixed regexp to
	not be confused by a later ':' on the same line as the label.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, progmodes/cc-mode.el
	(c-electric-delete, c-electric-delete-forward):
	Split `c-electric-delete' into two functions where
	`c-electric-delete-forward' always deletes forward and
	`c-electric-delete' only contains the code necessary for
	XEmacs to choose between backward and forward deletion.
	`c-electric-delete-forward' is now bound to C-d to get the
	electric behavior on that key too.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-fill-paragraph): Fixed bogus direct
	use of c-comment-prefix-regexp, which caused an error when
	it's a list.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el, progmodes/cc-vars.el (c-common-init)
	(c-default-style): Removed the hardcoded switch to "java" style
	in Java mode.  It's instead taken care of by the default value
	for c-default-style.

2002-04-22  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-align.el (c-lineup-math): Fix bug where lineup
	was triggered by equal signs in string literals.

2002-04-21  Kim F. Storm  <storm@cua.dk>

	* subr.el (insert-buffer-substring-no-properties): New function.
	(insert-buffer-substring-as-yank): New function.

2002-04-21  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* scroll-all.el (minor-mode-alist): Fix usage of `scroll-all-mode'.
	(scroll-all-page-down-all, scroll-all-page-up-all) Remove `fkey-'
	prefix from scroll commands.  Ignore end-of-buffer errors from
	other windows.
	(scroll-all-check-to-scroll): Remove `fkey-' prefix from scroll
	commands.
	(scroll-all-beginning-of-buffer-all, scroll-all-end-of-buffer-all):
	New functions.

	* files.el (auto-mode-alist): .f95 files in f90-mode.

	* progmodes/fortran.el (fortran-beginning-do): Make regexp match
	a DO statement irrespective of numeric label.

2002-04-20  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* files.el (auto-save-file-name-transforms): Doc fix.
	Add third element to "uniquify" filenames.
	(make-auto-save-file-name): Use new element of
	auto-save-file-name-transforms.
	* startup.el (command-line): Add third element to
	auto-save-file-name-transforms.

2002-04-19  Stefan Monnier  <monnier@cs.yale.edu>

	* files.el (file-name-non-special): Don't mangle the 0'th arg and the
	return value of file-name-completion and file-name-all-completions.

2002-04-19  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el: Update maintainer.
	(f90-line-continued): Recognize blank/comment lines embedded in
	continuation lines.
	(f90-looking-at-program-block-start): No extra indentation after
	function or subroutine keyword appears in single quotes.

2002-04-19  Miles Bader  <miles@gnu.org>

	* custom.el (customize-mark-to-save, customize-mark-as-set)
	(custom-quote): Moved here from `cus-edit.el'.
	* cus-edit.el (customize-mark-to-save, customize-mark-as-set)
	(custom-quote): Moved to `custom.el'.

2002-04-18  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (list-text-properties-at): Command deleted.

	* rect.el (insert-rectangle): Use insert-for-yank.

	* register.el (insert-register): Use insert-for-yank.
	(describe-register-1): Discard text props in yank-excluded-properties.

	* toolbar/tool-bar.el (tool-bar-local-item-from-menu):
	Fix parts in construction of `menu-item' item at end.

	* mail/mailabbrev.el (mail-mode-abbrev-table): Delete defvar.

	* subr.el (insert-for-yank): New function.

	* simple.el (yank-excluded-properties): New user option.
	(yank-pop, yank): Use insert-for-yank.

2002-04-19  Kim F. Storm  <storm@cua.dk>

	* simple.el (pop-to-mark-command): Do not set this-command.
	(set-mark-command): Always jump to mark when called with arg.

2002-04-18  Francesco Potortì  <pot@gnu.org>

	* comint.el (comint-watch-for-password-prompt): Remove whitespace
	at the beginning of password prompts.

2002-04-18  Andrew Innes  <andrewi@gnu.org>

	* facemenu.el: Remove require of wid-edit.

2002-04-17  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-visit-buffer): Optionally allow reducing to
	one window.
	(ibuffer-visit-buffer-1-window): Simply call `ibuffer-visit-buffer'.
	(ibuffer-current-state-list): Reinstate optional argument; now
	just call `point' inside the mapping function.

2002-04-17  Francesco Potortì  <pot@gnu.org>

	* dired-aux.el (dired-star-subst-regexp)
	(dired-quark-subst-regexp): New constants.
	(dired-do-shell-command, dired-shell-stuff-it): Use them.
	(dired-do-shell-command): Raise an error if both `*' and `?'
	substitution marks are used in the same command.
	(dired-shell-stuff-it): Substitute all instances of `*' and `?'
	in a command given via dired-do-shell-command.

	* comint.el (comint-password-prompt-regexp): Match "Repeat passphrase".

2002-04-16  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (locale-preferred-coding-systems):
	Add "jpn".

2002-04-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* term.el (term-emulate-terminal): Fix last change.

2002-04-16  Pavel Janík  <Pavel@Janik.cz>

	* bindings.el (mode-line-mode-menu): Update names to reflect
	latest changes.

2002-04-16  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-at-indentation-p): Move to fix
	compilation error.

2002-04-16  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-ex.el: Patch by Samuel Padgett.  Copyright papers received.
	(viper-ex-print-buf-name): New variable.
	(viper-ex-print-buf): New variable.
	(ex-token-alist): Invoke ex-print on ":print" Ex commands.
	(ex-g-marks): New variable.
	(ex-print): New function.
	(ex-print-display-lines): New function.

	* viper.el (viper-set-hooks): Add window-setup-hook, which sets
	the cursor color.

	* ediff-util.el (ediff-cleanup-mess): Delete ctl window on exit
	when the window is not in its own frame.
	(ediff-clone-buffer-for-region-comparison): More robust window
	arrangement while prompting for regions to compare.
	(ediff-make-cloned-buffer): Use generate-new-buffer-name.
	(ediff-inferior-compare-regions): Deleted unused vars
	ctl-buf and quit-now.

2002-04-15  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-add-new-face): Use this only for faces.
	Delete arg MENU.
	(facemenu-add-new-color): New function.
	(facemenu-set-foreground, facemenu-set-background):
	Use facemenu-add-new-color.

2002-04-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* ediff-init.el (ediff-current-diff-face-A)
	(ediff-current-diff-face-B, ediff-current-diff-face-C)
	(ediff-current-diff-face-Ancestor, ediff-fine-diff-face-A)
	(ediff-fine-diff-face-B, ediff-fine-diff-face-C)
	(ediff-fine-diff-face-Ancestor, ediff-even-diff-face-A)
	(ediff-even-diff-face-B, ediff-even-diff-face-C)
	(ediff-even-diff-face-Ancestor, ediff-odd-diff-face-A)
	(ediff-odd-diff-face-B, ediff-odd-diff-face-C)
	(ediff-odd-diff-face-Ancestor): Add special color definitions for
	tty and MS-DOS displays.

2002-04-15  Andrew Innes  <andrewi@gnu.org>

	* facemenu.el: Require wid-edit.

2002-04-15  Miles Bader  <miles@gnu.org>

	* faces.el (highlight): Force foreground to be black on a tty, so
	this face is readable on a dark-background tty.
	* wid-edit.el (widget-field-face, widget-single-line-field-face):
	Likewise.

2002-04-14  Kim F. Storm  <storm@cua.dk>

	* simple.el (pop-to-mark-command, push-mark-command): New commands.
	(set-mark-command): Use them.
	Enhanced functionality when command is repeated:
	- If first command set the mark (no prefix arg), repeat temporarily
	enables transient-mark-mode.
	- If first command jumped to mark off ring (with argument),
	repeat (with or without arg) jump to next mark off ring.
	- Use C-u C-u prefix to set mark after jump.
	(exchange-point-and-mark): Temporarily enable transient-mark-mode
	if prefix arg.

2002-04-14  Pavel Janík  <Pavel@Janik.cz>

	* speedbar.el (speedbar-tag-hierarchy-method)
	(speedbar-toggle-updates, speedbar-toggle-images): Doc fixes.

2002-04-14  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-parse-tag-backward): Fix to work at
	beginning of buffer.

2002-04-14  Pavel Janík  <Pavel@Janik.cz>

	* speedbar.el (speedbar-generic-item-info)
	(speedbar-sort-tags): Doc fix.
	(speedbar-add-supported-extension): Fix typo in interactive spec.

2002-04-13  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-forward-line): Just skip header if we're
	only moving one line forward.
	(ibuffer-map-lines): Preserve point position even if we delete
	lines.  Only call mapping functions with buffer and mark
	arguments; the other two were unused.
	(ibuffer-redisplay, ibuffer-update): Always skip special areas.

	* ibuf-macs.el, ibuf-ext.el: Update callers of `ibuffer-map-lines'.

	* calc/calc-bin.el (math-format-radix-float): Use `when'.

	* calc/calc.el (math-format-number): Load `calc-ext' before we
	call `math-group-float'.

	* play/gamegrid.el (gamegrid-add-score-with-update-game-score):
	Renamed from `gamegrid-add-score'.
	(gamegrid-add-score-insecure): Restored from the old
	`gamegrid-add-score'.
	(gamegrid-add-score): Just dispatch on `system-type' to one of the
	previous two functions.

2002-04-13  Pavel Janík  <Pavel@Janik.cz>

	* iswitchb.el: Update commentary to include new function
	iswitchb-exclude-nonmatching.

2002-04-12  John Wiegley  <johnw@gnu.org>

	* eshell/esh-ext.el (eshell-script-interpreter): Fix for CRLF
	operating systems to the regexp used to detect a script's interpreter.

2002-04-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (frames-on-display-list): Use `equal' to compare the
	`display' frame parameter to the argument DISPLAY.

2002-04-12  Dave Love  <fx@gnu.org>

	* help.el (string-key-binding): Deal with margin events.

2002-04-12  Francesco Potortì  <pot@gnu.org>

	* comint.el (comint-password-prompt-regexp): Match " SMB password".

2002-04-11  Stefan Monnier  <monnier@cs.yale.edu>

	* sort.el (sort-reorder-buffer): Don't assume point-min == 1.

	* xt-mouse.el (xterm-mouse-mode): Use define-minor-mode.

	* emacs-lisp/lucid.el (device-class, buffer-syntactic-context)
	(buffer-syntactic-context-depth): New funs.

	* emacs-lisp/edebug.el (edebug-eval-defun): Don't use defconst
	on variables.

	* emacs-lisp/debug.el (debug-on-entry): Use push.
	(debugger-make-xrefs): Don't assume point-min == 1.

	* progmodes/cc-engine.el (c-backward-to-start-of-if):
	Don't assume point-min == 1.

	* progmodes/etags.el (etags-verify-tags-table, etags-snarf-tag)
	(etags-list-tags, etags-tags-apropos, select-tags-table):
	Don't assume point-min == 1.

2002-04-12  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-guess-indent): New function.

2002-04-11  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Fix up last change.

	* simple.el (line-move): Use memq rather than or.
	(transpose-sexps): Don't presume as much of forward-sexp's behavior.
	(do-auto-fill): Use fill-move-to-break-point.
	(syntax-code-table): Remove.

	* textmodes/fill.el (canonically-space-region): Obey sentence-end.
	Don't add spaces at end of sentences at end of line.
	(fill-move-to-break-point): Make sure the result is always greater
	than linebeg, so we ensure forward progress.
	(fill-region-as-paragraph): Compare to `to' rather than eobp.
	(fill-paragraph): Don't rebind fill-paragraph-function.

2002-04-11  Pavel Janík  <Pavel@Janik.cz>

	* menu-bar.el (menu-bar-adv-search-menu): Add incremental search.

2002-04-11  Andreas Schwab  <schwab@suse.de>

	* files.el (file-name-non-special): Handle return value of t from
	`file-name-completion'.

2002-04-10  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Match the two prefixes
	differently to avoid pathological exponential-time case.
	(adaptive-fill-regexp): Add ! and %.
	(fill-delete-prefix): Remove indentation while removing prefix.
	(fill-delete-newlines): Obey sentence-end.
	(fill-move-to-break-point, fill-newline): New functions extracted
	from fill-region-as-paragraph.
	(fill-region-as-paragraph): Use them.
	Don't fiddle with fill-indent-according-to-mode.

2002-04-10  Colin Walters  <walters@verbum.org>

	* play/snake.el (snake-score-file): Default to just "snake-scores".

	* play/tetris.el (tetris-score-file): Likewise.

	* play/gamegrid.el (gamegrid-add-score): Rewrite from scratch to
	use `update-game-score'.

	* ibuffer.el (ibuffer-canonicalize-state-list): Delete unused function.
	(ibuffer-current-buffers-with-marks): Don't call `buffer-list'
	ourselves; take it as an argument.  Caller updated.
	(ibuffer-mode): Make mode-class special.

2002-04-10  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-view-command-alist): New variable.
	(dired-view-file): Use external viewers for some files names.

	* mouse.el (mouse-drag-region-1): Display region highlight
	only in the selected window.

	* subr.el (remove-hook): When there are no more local hooks,
	kill the buffer-local value.

	* isearch.el (isearch-mode): Don't call make-frame-visible
	if frame is already visible.

	* cus-face.el (custom-face-attributes): Fix typo in `ultra-bold'.

2002-04-09  Emmanuel Briot  <briot@act-europe.fr>

	* progmodes/ada-prj.el: Add support for the new project file
	fields: gnatfind-opt, debug-pre-cmd and debug-post-cmd.
	Fix widget handling for Emacs 21.  ada-mode now only supports a single
	active project file, instead of one per buffer.  This is far less
	confusing.

	* progmodes/ada-stmt.el: Menu changed from Statements to Templates.
	(ada-func-or-proc-name): Get real subprogram name, after change in
	ada-mode.el.

	* progmodes/ada-xref.el: Ada-mode no longer supports a different
	project file per buffer.  This was too complex.  Instead, there is
	now a single active project file at any given time, and the user
	can switch the active one through the Ada menu.  This revision
	also provides better handling of the Windows command line, and the
	various available shells on that platform.  ada-mode is now fully
	integrated with the GNU visual debugger gvd, see
	http://libre.act-europe.fr.
	(ada-prj-default-comp-opt): Use the new GNAT switch -gnatQ.
	This is only available with GNAT 3.14.
	(ada-prj-gnatfind-switches, ada-cd-command): New variable.
	(ada-quote-cmd): New function.
	(ada-initialize-runtime-library): Get the location of the actual
	runtime the compiler will be using, including support for
	cross-platform environments.
	(ada-treat-cmd-string): Add support for the new variable
	${full_current} add support for debug-pre-cmd and debug-post-cmd,
	two commands to run just prior to running the debugger, and just
	after starting it.  This provide better support for cross-platform
	and remote debugging.
	(ada-get-absolute-dir): Remove, replace with expand-file-name.
	(ada-gdb-application): New parameter executable-name.
	(ada-get-ali-file-name): Better handling of separate packages.
	Checkin on behalf of the ada-mode maintainer.

	* progmodes/ada-mode.el (ada-case-exception-file)
	(ada-indent-handle-comment-special): New variables.
	(ada-case-exception-substring): New variable.  Casing exceptions
	can now also be defined for substrings, in addition to full
	identifier names.  This provides more flexibility.
	(ada-align-list): New fun, provide support for align.el in ada-mode.
	(ada-procedure-start-regexp): Add support for operators and
	generic formal subprograms and packages.
	(ada-imenu-comment-re): New variable.
	(ada-imenu-generic-expression): Add support for protected types.
	(ada-mode): Set comment-start only after running ada-mode-hook, so
	that the user can change ada-comment-start in the hook.
	Add support for ispell in comments.  Add support for align.el.
	(ada-save-exception-file, ada-create-case-exception-substring)
	(ada-adjust-case-substring): New functions.
	(ada-get-current-indent): Properly handles keywords with uppercases.
	(ada-goto-matching-end): Rewritten, fixes problems in the handling
	of nested blocks.
	(ada-untab-hard): Do not touch the contents of comments and strings.

2002-04-09  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-lexical-context):
	Use sgml-parse-tag-backward to find start point.
	(sgml-looking-back-at): Doc fix.

2002-04-09  Pavel Janík  <Pavel@Janik.cz>

	* isearch.el (isearch-message-prefix): Use minibuffer-prompt face
	for prompt.

2002-04-08  Stefan Monnier  <monnier@cs.yale.edu>

	* autorevert.el (auto-revert-mode, global-auto-revert-mode):
	Use define-minor-mode.
	(auto-revert-buffers): Use with-current-buffer.
	Avoid changing the minor modes.

	* international/iso-acc.el (iso-accents-accent-key): Use `vector'
	rather than char-to-string since last-input-char can be any event.

	* international/titdic-cnv.el (tit-dictionary):
	Use defvar for non-constants.

	* progmodes/cwarn.el (global-cwarn-mode): Use define-minor-mode.
	(global-cwarn-mode): Use easy-mmode-define-global-mode.
	(cwarn-font-lock-keywords): New function.
	Replaces cwarn-font-lock-remove-keywords cwarn-font-lock-add-keywords.
	(cwarn-font-lock-match): New macro.
	(cwarn-font-lock-match-assignment-in-expression)
	(cwarn-font-lock-match-dangerous-semicolon)
	(cwarn-font-lock-match-reference): Use it.

	* progmodes/cperl-mode.el (cperl-make-face, cperl-force-face):
	Use defvar rather than defconst since it's meant to be settable.
	(cperl-syntax-done-to): Don't hardcode 1 as (point-min).
	(cperl-fix-line-spacing): Add missing \ in [ t].

	* loadup.el: Call ucs-unify-8859 directly rather than
	unify-8859-on-encoding-mode.
	(fns-*.el): Don't use it anymore.  Keep the load-history in purespace.

	* textmodes/sgml-mode.el (sgml-comment-indent-new-line): New fun.
	(sgml-mode): Use it for comment-line-break-function.

2002-04-08  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (reset-language-environment):
	Handle coding-systems not being defined yet.

2002-04-08  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el (vc-cvs-valid-version-number-p): New function.
	(vc-cvs-checkin): Use it.

2002-04-08  Pavel Janík  <Pavel@Janik.cz>

	* files.el (display-time-string): Fix last change.

2002-04-07  Sam Steingold  <sds@gnu.org>

	* vc-cvs.el (vc-cvs-checkin): Pass the required argument to `error'.

2002-04-07  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (set-default-coding-systems)
	(reset-language-environment): Preserve eols on
	default-process-coding-system.
	(coding-system-change-text-conversion): Fix case where CODING is nil.

2002-04-07  Pavel Janík  <Pavel@Janik.cz>

	* subr.el (play-sound): Move here from simple.el.

	* simple.el (play-sound): Move to subr.el.

2002-04-06  Richard M. Stallman  <rms@gnu.org>

	* files.el (display-time-string-forms): Mark as risky.

	* enriched.el (enriched-decode-foreground, enriched-decode-background):
	Use proper format for desired elts of `face' property.
	Don't test display-color-p; make the properties unconditionally.

	* progmodes/compile.el (compilation-error-regexp-alist):
	New alternatives for FILE:LINE.COL and for ranges of columns and lines.

2002-04-06  Per Abrahamsen  <abraham@dina.kvl.dk>

	* progmodes/cc-vars.el (c-block-comment-prefix): Specify :value
	for customization type.
	Reported by Mattias Fredsberg <mattias.fredsberg@active-tv.com>.

2002-04-06  Mike Williams  <mdub@bigfoot.com>

	* textmodes/xml-lite.el: Remove.

2002-04-05  Pavel Janík  <Pavel@Janik.cz>

	* simple.el (play-sound): New function (uses play-sound-internal).

2002-04-04  Richard M. Stallman  <rms@gnu.org>

	* files.el (mode-line-format, mode-line-modified)
	(mode-line-mule-info, mode-line-buffer-identification)
	(mode-line-modes, mode-line-position): Explicitly mark as risky.
	(hack-one-local-variable): Don't recognize "mode-line-..." as risky.

	* calendar/solar.el (solar-northern-spring-or-summer-season): Doc fix.

	* mail/mailabbrev.el (mail-abbrev-make-syntax-table):
	Use (syntax-table), not old-syntax-table.

	* enriched.el (enriched-decode-foreground)
	(enriched-decode-background): Don't call facemenu-get-face.

2002-04-04  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el: Add missing require.
	(sgml-lexical-context): Fix up CDATA detection for boundary cases.

2002-04-03  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* pcvs.el (cvs-mode-previous-line, cvs-mode-next-line): Move to
	spot indicated by text property `cvs-goal-column', if present.

	* pcvs-info.el (cvs-fileinfo-pp): Use text property
	`cvs-goal-column' to indicate position of file name (if present).

2002-04-03  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (mail-abbrev-complete-alias):
	Call mail-abbrev-make-syntax-table.

	* format.el (format-deannotate-region): Doc fix.

	* enriched.el (enriched-face-ans): Delete special treatment
	for fg:... and bg:... faces.
	(enriched-decode-foreground): Return a list that specifies
	the foreground color, rather than creating a face.
	(enriched-decode-background): Likewise.

	* shell.el (shell-mode): Don't reinit comint-input-ring
	if that was already done.

2002-04-03  Edward M. Reingold  <reingold@emr.cs.iit.edu>

	* solar.el (solar-spring-or-summer-season): Delete.
	(solar-northern-spring-or-summer-season): New variable.
	(solar-sunrise-and-sunset, solar-moment, solar-sunrise-sunset):
	Rewrite.

	* solar.el (diary-sabbath-candles-minutes): New variable.
	(diary-sabbath-candles): Use it instead of fixed 18 minutes.

	* calendar.el (update-calendar-mode-line): Force mode-line update.
	Make date under the cursor available as `date' in
	calendar-mode-line-format.
	Eval items in calendar-mode-line-format list.

	* cal-tex.el (cal-tex-hook, cal-tex-year-hook, cal-tex-month-hook)
	(cal-tex-week-hook, cal-tex-daily-hook): Add doc strings.

	* cal-tex.el (cal-tex-latexify-list): Fix doc string.

	* cal-tex.el (cal-tex-insert-day-names): LaTeXify day names.
	(cal-tex-cursor-week-iso, cal-tex-week-hours, cal-tex-weekly4-box)
	(cal-tex-cursor-filofax-2week, cal-tex-cursor-filofax-week)
	(cal-tex-daily-page, cal-tex-mini-calendar): LaTeXify day names.

	* cal-tex.el: Change all instances (interactive "P") to
	(interactive "p").
	(cal-tex-cursor-month): Add hfill and newline at end of month that
	ended on Saturday.
	(cal-tex-preamble): Change to LaTeX2e.
	(cal-tex-cursor-filofax-year): Don't use default month names in
	LaTeX macros in case user changes them.
	(cal-tex-month-name): New function.  Used throughout in case user
	has done something funny with month names.

	* cal-hebrew.el (holiday-rosh-hashanah-etc): Spelling correction.
	(diary-rosh-hodesh): Spelling correction.

2002-04-03  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-lexical-context)
	(sgml-parse-tag-backward): Extend support for CDATA to include
	conditional sections.

2002-04-03  Pavel Janík  <Pavel@Janik.cz>

	* cus-start.el: Rename `autoselect-window' to
	`mouse-autoselect-window'.

2002-04-02  Richard M. Stallman  <rms@gnu.org>

	* files.el (hack-one-local-variable):
	Clear text props from string value.

2002-04-02  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/f90.el (f90-keywords-re, f90-keywords-level-3-re)
	(f90-procedures-re, f90-operators-re, f90-hpf-keywords-re):
	Use regexp-opt.
	(f90-keywords-re, f90-keywords-level-3-re): Add `pure' and `elemental'
	from F95.
	(f90-procedures-re): Add `null' and `cpu_time' from F95.
	(f90-font-lock-keywords-1): Minor reorganization so we don't need
	`override' any more.
	(f90-font-lock-keywords-3): Use `keep' rather than `override'.
	(f90-indent-subprogram): Use indent-region.
	(f90-break-line): Use indent-according-to-mode.

2002-04-02  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el (sgml-close-tag): Rename from
	sgml-insert-end-tag.  Simplify by using sgml-lexical-context.
	(sgml-get-context): Remove use of sgml-inside-tag-p.
	(sgml-inside-tag-p): Remove.
	(sgml-looking-back-at): Short-circuit at beg of buffer.
	(sgml-lexical-context, sgml-calculate-indent): Add support for
	CDATA sections.

2002-04-01  Stefan Monnier  <monnier@cs.yale.edu>

	* help.el (help-key-description): New fun.
	(describe-key-briefly, describe-key): Use it and
	this-single-command-raw-keys plus new arg `untranslated'.

	* textmodes/sgml-mode.el (sgml-at-indentation-p, sgml-tag)
	(sgml-parse-tag-name, sgml-looking-back-at, sgml-parse-tag-backward)
	(sgml-inside-tag-p, sgml-get-context, sgml-show-context)
	(sgml-insert-end-tag): New funs taken from xml-lite.el.
	(sgml-calculate-indent): Use them.
	(sgml-slash-matching): Rename from sgml-slash.
	(sgml-slash): Copied from xml-lite and changed to use
	sgml-slash-matching and sgml-quick-keys.

	* international/mule-cmds.el (standard-keyboard-coding-systems):
	Add koi8-u and koi8-r.

	* eshell/.cvsignore: New file.

	* eshell/esh-groups.el: Remove.

	* progmodes/tcl.el: Change maintainer.
	(tcl-electric-hash-style): Change default to nil.
	(tcl-imenu-generic-expression): Use tcl-proc-regexp.
	(tcl-do-auto-fill): Remove.
	(tcl-auto-fill-mode): Rewrite using comment-auto-fill-only-comments.

2002-04-01  Mike Williams  <mdub@bigfoot.com>

	* textmodes/sgml-mode.el: Doc fixes.
	(sgml-mode): Set indent-line-function to sgml-indent-line.
	(sgml-calculate-indent): Add an explicit check for 'text syntax,
	to protect against future enhancements to sgml-lexical-context.
	(sgml-empty-tag-p, sgml-unclosed-tag-p): New funcs.

	* textmodes/xml-lite.el: Removed much redundant stuff.
	(xml-lite-parse-tag-backward): Simplify parsing by assuming we
	always start within text.  Make use of sgml-unclosed-tag-p.

2002-04-01  Ville Skyttä  <ville.skytta@xemacs.org>

	* tcl.el (tcl-imenu-generic-expression): New value.
	(tcl-imenu-create-index-function): Function deleted.
	(tcl-mode): Check for filladapt-mode.
	Use tcl-imenu-generic-expression instead of
	tcl-imenu-create-index-function.
	(inferior-tcl-mode): Doc fix.
	Change not legally significant.

2002-04-01  Pavel Janík  <Pavel@Janik.cz>

	* cus-start.el: Rename `x-autoselect-window' to `autoselect-window'.

	* window.el (handle-select-window): New function.
	Update copyright.

2002-04-01  Richard M. Stallman  <rms@gnu.org>

	* info.el (info-tool-bar-map): Use tool-bar-local-item-from-menu.

	* toolbar/tool-bar.el (tool-bar-local-item): Renamed from
	tool-bar-add-item, and new arg MAP.
	(tool-bar-add-item): Now calls tool-bar-local-item.
	(tool-bar-local-item-from-menu): Renamed from
	tool-bar-add-item-from-menu, and new arg IN-MAP.
	(tool-bar-add-item-from-menu): Now calls tool-bar-local-item-from-menu.

	* help-fns.el (help-with-tutorial): Allow various ways
	to specify the text in the [...] line, in handling the <...> line.

	* progmodes/idlw-rinfo.el (idlwave-system-routines):
	WOLRDTITLE => WORLDTITLE.  SUPRESS_VALUE => SUPPRESS_VALUE.

	* subr.el (redraw-modeline): Define alias.

2002-03-31  Richard M. Stallman  <rms@gnu.org>

	* files.el (file-expand-wildcards): Use save-match-data.

	* files.el (format-alist): Mark as risky.

	* simple.el (kill-new): Doc fix.

	* emacs-lisp/byte-opt.el (side-effect-free-fns)
	(side-effect-and-error-free-fns): Add many functions, remove some.

2002-03-30  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-tools-menu): Rename gdb item to say GDB.

2002-03-30  Eli Zaretskii  <eliz@gnu.org>

	* font-lock.el (save-buffer-state): Fix last change.

	* files.el (auto-save-file-name-transforms): Fix last change.

	* startup.el (command-line): Fix last change.

2002-03-29  Richard M. Stallman  <rms@gnu.org>

	* subr.el (play-sound-file): Moved to simple.el.

	* simple.el (play-sound-file): Moved from subr.el, made unconditional.

2002-03-29  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-mark-interactive): Use `ibuffer-forward-line'
	instead of `forward-line'.
	(ibuffer-forward-line): Be sure to skip over special properties
	before moving, too.

	* calc/calc.el (calc-was-split): Var deleted.
	(calc): Remove reference to it.
	(calc): Ditto.
	(calc-quit): Ditto.
	(calc-init-base): Ditto.

	* calc/calc-misc.el (calc-delete-windows-keep): Function deleted.

2002-03-29  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-lexical-context): Return (text . START)
	instead of nil when point is outside of any tag.
	(sgml-beginning-of-tag): Adjust to the change.
	(sgml-calculate-indent): Use the new info returned by
	sgml-lexical-context.  Try to handle unclosed tags.

	* textmodes/xml-lite.el (xml-lite-get-context): Don't stop parsing
	at unclosed tags unless it is at indentation.
	Kill nested unclosed tags.
	(xml-lite-calculate-indent, xml-lite-indent-line): Remove.
	(xml-lite-mode): Use sgml-indent-line instead.

2002-03-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-save-file-name-transforms): Don't run "\\2" via
	expand-file-name.

	* startup.el (command-line): Recompute auto-save-file-name-transforms
	using the updated value of temporary-file-directory.

2002-03-29  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/xml-lite.el (xml-lite-get-context): Allow stopping
	even with an empty context.  Don't save excursion any more.
	Don't complain about unmatched start-tags in sgml-unclosed-tags.
	Ignore end-tags in sgml-empty-tags.
	(xml-lite-get-context, xml-lite-calculate-indent)
	(xml-lite-insert-end-tag): Save excursion around xml-lite-get-context.
	(xml-lite-indent-line): Use back-to-indentation.

	* textmodes/sgml-mode.el (sgml-basic-offset): New var.
	(sgml-name-re, sgml-attrs-re): New consts.
	(sgml-tag-name-re, sgml-start-tag-regex, sgml-font-lock-keywords-1)
	(sgml-mode): Use them.
	(sgml-lexical-context): Default to (point-min) if nothing else works.
	(sgml-calculate-indent): Indent slightly differently.
	(sgml-indent-line): Use back-to-indentation.
	(sgml-parse-dtd): New function.
	(sgml-unclosed-tags): New var.
	(html-mode): Set it.

2002-03-29  Simon Marshall  <simon.marshall@misys.com>

	* font-lock.el (save-buffer-state): Use make-symbol to bind `modified'.

2002-03-29  Richard M. Stallman  <rms@gnu.org>

	* dired-aux.el (dired-do-query-replace-regexp, dired-do-search):
	Use FILTER arg in dired-get-marked-files to exclude directories.
	(dired-nondirectory-p): New function.

	* dired.el (dired-get-marked-files): New arg FILTER
	allows selection of some files.

	* progmodes/tcl.el (tcl-imenu-create-index-function): Doc fix.

2002-03-29  Eric M. Ludlam  <eric@siege-engine.com>

	* speedbar.el (speedbar-default-directory-list): Made robust
	against deleted directories.

2002-03-28  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-toggle-marks): Renamed from dired-do-toggle.
	Bindings changed.

	* progmodes/compile.el (compilation-handle-exit):
	If compilation-window-height is 0, display status in echo area.

	* simple.el (line-move-to-column): Don't call move-to-column if COL=0.

	* rect.el (replace-rectangle): Add autoload.

	* files.el: Mark many more variables as risky.
	(hack-one-local-variable): Recognize several additional
	patterns as risky.

	* bindings.el (mode-line-mule-info): Use :propertize, not :eval.

2002-03-28  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/xml-lite.el (xml-lite-in-string-p):
	Use sgml-lexical-context.
	(xml-lite-parse-tag-backward): Use sgml-tag-syntax-table.
	(xml-lite-get-context): Check that open/close tags match.
	Don't stop scanning while we're ignoring matching tags.

	* textmodes/sgml-mode.el (sgml-make-syntax-table): New fun.
	(sgml-mode-syntax-table): Use it.
	(sgml-tag-syntax-table, sgml-tag-name-re): New const.
	(sgml-tags-invisible): Use it.
	(sgml-lexical-context): New fun.
	(sgml-maybe-end-tag, sgml-beginning-of-tag): Use it.
	(sgml-quote): Accept \n as entity reference terminator.
	(sgml-calculate-indent, sgml-indent-line): New funs.

2002-03-28  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-global-switches): New user option.
	(vc-cvs-command): New function.  Update all callers of
	`vc-do-command' in vc-cvs.el to use this instead.

2002-03-27  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (bootstrap-clean-SH): Use for loop, instead of
	relying on shell globbing.

2002-03-27  Colin Walters  <walters@debian.org>

	* ibuffer.el (ibuffer-help-buffer-modes): New variable.
	(ibuffer-fontification-alist): Use it.
	(ibuffer-backward-line): Handle `ibuffer-summary' area.
	(ibuffer-forward-line): Ditto.

	* ibuf-ext.el (sorter mode-name): Doc fix.
	(ibuffer-mark-help-buffers): Use `ibuffer-help-buffer-modes'.
	(operation query-replace): Use new `noerror' arg for
	`query-replace-read-args'.
	(operation query-replace-regexp): Ditto.

2002-03-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/xml-lite.el: Fix copyright notice.
	(xml-lite-basic-offset): Rename from xml-lite-indent-offset.
	(xml-lite-indent-comment-offset): Remove.
	(xml-lite-calculate-indent): Use new name.  Use natural alignment
	for comments.
	(xml-lite-in-string-p): Simplify.

2002-03-27  Pavel Janík  <Pavel@Janik.cz>

	* allout.el (outline-layout): Doc fix.

2002-03-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/xml-lite.el: Don't require `custom'.
	(xml-lite-parse-tag-name): Properly treat non-ASCII chars.
	(xml-lite-parse-tag-backward): Obey sgml-empty-tags.
	(xml-lite-get-context): Drop nested tags not just for comments.
	(xml-lite-indent-line): Be more careful about moving point.
	(xml-lite-insert-end-tag, xml-lite-slash):
	Use indent-according-to-mode instead of xml-lite-indent-line.
	(xml-lite-mode): Make xml-lite-orig-indent-line-function buffer-local.
	Set sgml-xml-mode.  Don't call force-mode-line-update.
	(xml-lite-mode-map): Don't bind TAB.

2002-03-27  Zoltan Kemenczy  <zoltan@ieee.org>

	* gud.el (gud-jdb-sourcepath): New variable, saves jdb -sourcepath
	parameter value.
	(gud-jdb-build-source-files-list): Comment clarification.
	(gud-jdb-massage-args): Reworked into loop-based argument list
	processing in order to support -classpath and -sourcepath argument
	processing.
	(gud-jdb-find-source-using-classpath): Prepend gud-jdb-sourcepath
	to gud-jdb-classpath to obtain search list.
	(gud-jdb-parse-classpath-string): Remove any trailing slashes from
	directory names in classpath/sourcepath lists, update comment.
	(jdb): Add setting of gud-jdb-sourcepath, update comment.
	(gud-find-class): Add gud-jdb-sourcepath use, and correct
	behavior for the case when classpath is not used--backward
	compatibility fix.

2002-03-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* Makefile.in (compile, compile-always): Don't try to compile
	non-existent files or files in empty directories.

2002-03-26  Michael Ernst  <mernst@alum.mit.edu>

	* compare-w.el (compare-windows-whitespace): Match all whitespace.

	* emacs-lisp/shadow.el (list-load-path-shadows): Only ignore last
	copy of standard Lisp directories.

	* tar-mode.el (tar-header-block-summarize, tar-get-descriptor):
	Support "next has longname" link type.

2002-03-26  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/xml-lite.el (xml-lite-at-indentation-p): Move.
	(xml-lite-in-string-p, xml-lite-looking-back-at, xml-lite-looking-at):
	New functions.
	(forward-xml-tag, backward-xml-tag, beginning-of-xml-tag)
	(end-of-xml-tag): Remove.
	(xml-lite-get-context): Better handling of comments.
	(xml-lite-calculate-indent): Use xml-lite-in-string-p.
	(xml-lite-parse-tag-backward): Rewrite.

2002-03-26  Juanma Barranquero  <lektu@terra.es>

	* makefile.w32-in (WINS): Add the toolbar directory.

2002-03-26  Richard M. Stallman  <rms@gnu.org>

	* subr.el (substring-no-properties): Function deleted (now in C).

2002-03-25  Pavel Janík  <Pavel@Janik.cz>

	* mwheel.el (mouse-wheel-mode): Use global-set-key and
	global-unset-key.

2002-03-24  Richard M. Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-resend): Call mail-abbrev-make-syntax-table.

	* progmodes/etags.el (tags-query-replace): Pass t for NOERROR
	to query-replace-read-args.

	* progmodes/compile.el (compilation-forget-errors):
	Don't adjust compilation-parsing-end if it's nil.

	* replace.el (query-replace-read-args): New optional arg NOERROR.
	(perform-replace): Use save-window-excursion around recursive edit.

2002-03-24  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer): If the user has `ibuffer-use-other-window'
	non-nil, then always use another window.

2002-03-24  Gerd Moellmann  <gerd@gnu.org>

	* subr.el (macro-declaration-function): New function.  Set the
	variable macro-declaration-function to it.

	* emacs-lisp/bytecomp.el (byte-compile-file-form-defmumble):
	Handle declarations in macro definitions.

2002-03-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* facemenu.el (facemenu-get-face): Remove unused variable `foreground'.

	* enriched.el (enriched-face-ans): Support FACE of the form
	(:foreground COLOR) and (:background COLOR).
	(enriched-decode-foreground, enriched-decode-background): Set the
	fore- and background colors of the faces we create, since facemenu
	doesn't.

2002-03-24  Pavel Janík  <Pavel@Janik.cz>

	* mwheel.el (mouse-wheel-mode): Use the result of
	current-global-map instead of the variable `global-map'.

2002-03-23  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (mail-abbrev-make-syntax-table): New subroutine
	broken out of sendmail-pre-abbrev-expand-hook.
	(sendmail-pre-abbrev-expand-hook): Use it.

2002-03-22  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile.in (finder-inf.el): Remove.
	(finder-data): Don't depend on finder-inf.el any more.
	(compile, compile-always): Handle the case where some files
	from DONTCOMPILE are missing (it tried to compile them).
	(bootstrap-clean): Use src/emacs only if executable.
	(bootstrap): Update subdirs.el and finder-inf.el.

	* finder.el: Don't load finder-inf.el during byte-compilation.

	* vc-cvs.el (vc-cvs-registered, vc-cvs-dir-state-heuristic):
	Don't consider cvs-removed files as under VC control.
	VC wouldn't handle them properly anyway and it confuses
	vc-file-not-found-hook.

	* emacs-lisp/bytecomp.el (batch-byte-compile-if-not-done):
	Add autoload cookie.

2002-03-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/calendar.el (calendar): Doc fix.

2002-03-22  Juanma Barranquero  <lektu@terra.es>

	* play/gomoku.el (gomoku-font-lock-O-face): Convert to use `defface'.
	(gomoku-font-lock-X-face): Likewise.
	(gomoku-font-lock-keywords): Use faces instead of variables.

2002-03-21  Stefan Monnier  <monnier@cs.yale.edu>

	* Makefile.in (bootstrap): Make sure subdirs.el is ready.

2002-03-21  Kim F. Storm  <storm@cua.dk>

	* simple.el (open-network-stream, open-network-stream-nowait)
	(open-network-stream-server): Use featurep to test for
	supported networking features.

2002-03-21  Thien-Thi Nguyen  <ttn@gnu.org>

	* mail/emacsbug.el (report-emacs-bug-hook): Remove submitter
	directions as the last action.

2002-03-21  Pavel Janík  <Pavel@Janik.cz>

	* startup.el (fancy-splash-tail, normal-splash-screen):
	Update copyright.

	* novice.el (disabled-command-hook): Clarify output text to match
	prompt.

2002-03-20  Jason Rumney  <jasonr@gnu.org>

	* frame.el (display-images-p): Do not explicitly check display type.

2002-03-20  Paul Reilly  <pmr-sav@hamm.pajato.com>

	* mail-utils.el:
	Eliminate compilation warnings due to `rfc822-addresses'.
	(rmail-dont-reply-to): Eliminate `pos' as a free variable for a
	warning free compile.

2002-03-20  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-install-fine-diff-if-necessary):
	Take the current highlighting style into account.
	(ediff-forward-word-function,ediff-whitespace,ediff-word-1)
	(ediff-word-2,ediff-word-3,ediff-word-4): Make them buffer local.

	* ediff-init.el (ediff-patch-job): New macro.

	* ediff-mult.el (ediff-make-new-meta-list-header): New API function.
	(ediff-intersect-directories): Use ediff-make-new-meta-list-header.

	* ediff-ptch.el (ediff-map-patch-buffer):
	Use ediff-make-new-meta-list-header.
	(ediff-fixup-patch-map): Use the meta-list API from ediff-mult.el.

	* ediff-util.el (ediff-toggle-hilit): Fix toggling of highlighting.
	(ediff-select-difference): Take highlighting style into account.
	(ediff-clone-buffer-for-region-comparison): New function.
	(ediff-inferior-compare-regions): Added comparison of current diff
	regions.

	* ediff.el (ediff-clone-buffer-for-region-comparison)
	(ediff-clone-buffer-for-window-comparison): Moved to ediff-util.el.

2002-03-19  Paul Reilly  <pmr-sav@hamm.pajato.com>

	* mail-utils.el (rmail-dont-reply-to):
	Overhaul to correctly apply the regular
	expressions in the variable `rmail-dont-reply-to-names' to the list of
	destination addresses.  Contributed by lorentey@elte.hu.

	* rmail.el (rmail-dont-reply-to-names):
	Modify the documentation to make it email
	address centric rather than login name centric.  Contributed by
	lorentey@elte.hu.

2002-03-18  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-toggle-sorting-mode): Remove `find-if' so
	we don't require `cl' at runtime.
	(sorting mode mode-name): Don't take the symbol-name of a string.

	* ibuffer.el (ibuffer-set-mark): Go back to the beginning of the
	line after setting the mark.
	(ibuffer-insert-buffers-and-marks): Invert the test for
	`ibuffer-sorting-reversep'.

2002-03-18  Stefan Monnier  <monnier@cs.yale.edu>

	* international/ucs-tables.el (unify-8859-on-decoding-mode)
	(unify-8859-on-encoding-mode): Remove autoload cookie.

2002-03-18  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-register): Fix handling of
	vc-[rcs-]register-switches.
	(vc-rcs-checkin-switches, vc-rcs-checkout-switches):
	Variables removed, since they weren't used yet.

	* vc-cvs.el (vc-cvs-register): Fix handling of
	vc-[cvs-]register-switches.

	* vc-sccs.el (vc-sccs-register): Fix handling of
	vc-[sccs-]register-switches.

2002-03-18  Stefan Monnier  <monnier@cs.yale.edu>

	* loadup.el ("emacs-lisp/backquote"): Load earlier.
	("international/ucs-tables"): Load and turn on
	unify-8859-on-encoding-mode unconditionally.
	(emacs-version): Use `defconst' rather than `setq'.

	* eshell/esh-ext.el (eshell-binary-suffixes): Use exec-suffixes.

2002-03-18  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-options-menu): Cope if
	text-mode-hook is not a list.

2002-03-17  Richard M. Stallman  <rms@gnu.org>

	* emulation/pc-select.el (pc-selection-mode):
	Alter the existing global map, don't replace it.

	* files.el (list-directory): Set default-directory at the end.

	* dabbrev.el (dabbrev--goto-start-of-abbrev):
	Put a limit on field-beginning search.

2002-03-17  Simon Josefsson  <jas@extundo.com>

	* net/browse-url.el (browse-url-mosaic-pidfile): New variable.
	(browse-url-mosaic): Use it.

	* net/browse-url.el (browse-url-filename-alist): Don't begin
	docstring with *, you don't want to set this one with M-x set-variable.

	* net/browse-url.el: Put * in user option doc strings.

2002-03-17  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-xml-mode): Renamed from sgml-xml.
	(sgml-xml-guess): Simplify.
	(sgml-mode-common): Remove (move into sgml-mode).
	(sgml-mode): Add code from sgml-mode-common.
	Remove redundant setting of indent-line-function.
	Don't set skeleton-transformation when in XML mode.

	* international/mule-diag.el (describe-char-after):
	Use `internal-describe-syntax-value' again (got lost somewhere).

	* international/ucs-tables.el (ucs-unify-8859, ucs-fragment-8859):
	Use unify-8859-on-decoding-mode.
	(unify-8859-on-decoding-mode): Also set translation-table-for-input.
	(ucs-insert): Give an error if the Unicode char can't be created.

	* pcvs-parse.el (cvs-parse-table): Be a bit more lenient.
	(cvs-parse-status): Handle the "used to have a conflict" marker.

2002-03-17  Kim F. Storm  <storm@cua.dk>

	The following changes are related to the enhanced network process
	support.

	* simple.el: Update copyright.
	(clone-process): Use make-network-process to clone network
	processes.  Get command list via (process-contact ... t).
	Use set-process-query-on-exit-flag and process-query-on-exit-flag
	instead of process-kill-without-query.
	(open-network-stream): Replaces C-version from process.c.
	(open-network-stream-nowait, open-network-stream-server): New funs.
	(process-kill-without-query): Replaces C-version from process.c.

	* files.el: Update copyright.
	(save-buffers-kill-emacs): Also check for active server
	processes.  Use process-query-on-exit-flag.  Only list processes
	which has the query-on-exit flag set in connection with user query.

	* shadowfile.el: Update copyright.
	(shadow-save-buffers-kill-emacs): Also check for active server
	processes.  Use process-query-on-exit-flag.

2002-03-16  Simon Marshall  <simon.marshall@misys.com>

	* imenu.el (imenu-menubar-modified-tick): Renamed from
	imenu-update-menubar-modified-tick.
	(imenu-update-menubar): Update imenu-menubar-modified-tick
	whenever outer condition succeeds.

	* lazy-lock.el (save-buffer-state):
	Bind inhibit-modification-hooks and buffer-file-truename
	instead of before-change-functions and after-change-functions.

2002-03-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/codepage.el (codepage-setup): Don't define a
	codepage if it is already defined.

	* textmodes/po.el (po-content-type-charset-alist): Convert the
	car of each association to a string.
	(po-find-file-coding-system-guts): If the charset matches a name
	of a codepage, set up that codepage and return it as a coding
	system to decode the file.
	(po-find-charset): Search for the Charset= header even if we've
	read less than 4KB.
	<top-level>: Remove the setup for all known codepages: it seems
	to cause crashes in the CCL driver.

2002-03-16  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/bibtex.el (bibtex-sort-ignore-string-entries)
	(bibtex-entry-field-alist): Doc fix.

2002-03-16  Richard M. Stallman  <rms@gnu.org>

	* progmodes/cperl-mode.el (cperl-imenu--function-name-regexp-perl):
	Move definition above cperl-outline-regexp.

	* bindings.el (mode-line-mule-info): In computing help-echo prop,
	avoid using save-window-excursion.  And compile the function.

2002-03-15  Stefan Monnier  <monnier@cs.yale.edu>

	* files.el (load-completion): New function.
	(load-library): Use it.

2002-03-15  Pavel Janík  <Pavel@Janik.cz>

	* calendar/cal-french.el (calendar-goto-french-date): Fix prompt
	to match the actual code.

2002-03-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/po.el (po-find-file-coding-system-guts):
	Use with-temp-buffer instead of po-with-temp-buffer.

	* international/mule-conf.el (file-coding-system-alist): Add an
	association for PO files.

	* textmodes/po.el: New file.

2002-03-15  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (common-lisp-loop-part-indentation):
	Fix simple loop indentation.

2002-03-14  Miles Bader  <miles@gnu.org>

	* net/rlogin.el (rlogin-mode): Use `define-derived-mode'.

2002-03-14  Richard M. Stallman  <rms@gnu.org>

	* textmodes/picture.el (picture-insert)
	(picture-clear-column, picture-draw-rectangle):
	Use move-to-column, not move-to-column-force.

	* dired.el (dired-readin): Clear out undo list.
	(dired-fun-in-all-buffers): Definition moved from dired-aux.el.
	(dired-delete-entry): New function.
	(dired-internal-do-deletions): Use dired-fun-in-all-buffers
	and dired-delete-entry, to update this buffer (and others).

	* dired-aux.el (dired-fun-in-all-buffers): Moved to dired.el.

	* facemenu.el (facemenu-add-new-face):
	Pass region args to facemenu-set-face, when there is a region.
	(facemenu-set-foreground, facemenu-set-background)
	(facemenu-add-face): Doc fixes.

	* progmodes/cperl-mode.el (cperl-outline-regexp): Move definition up.

2002-03-14  Miles Bader  <miles@gnu.org>

	* emacs-lisp/debug.el: Require `button'.
	(debugger-mode-map): Set the parent keymap to `button-buffer-map',
	to get TAB and <backtab> bindings.

	* net/rlogin.el (rlogin-carriage-filter): Function removed.
	(rlogin): Don't install the `rlogin-carriage-filter' filter, as
	comint removes carriage returns itself now.

	* rfn-eshadow.el (rfn-eshadow-update-overlay):
	Bind `inhibit-point-motion-hooks' to t while messing around, to avoid
	getting hosed by our own intangible property.

2002-03-13  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/fortran.el (fortran-mode): Set comment-padding to "$$$".
	Add fortran-comment-line-start-skip to comment-start-skip.
	(fortran-comment-indent): Keep whole-line comments in column 0.
	(fortran-find-comment-start-skip): New arg `all'.
	If ALL is nil, make sure we only match comment-start-skip if we
	can't match fortran-comment-line-start-skip.
	Fix bug that made it return t but without moving point when
	matching '!'! (a false-comment followed by a real comment).
	(fortran-indent-comment): Use new `all' argument above.
	Be careful not to add an incorrect comment-starter like "C"
	in comment-column.
	(fortran-split-line): When splitting a comment, reuse the comment
	starter from the current line rather than fortran-comment-line-start.
	(fortran-indent-line, fortran-auto-fill): Simplify thanks to the
	cleaner behavior of fortran-find-comment-start-skip.
	(fortran-fill): Don't be confused by ! inside a comment.
	(fortran-break-line): Minor cleanup and simplification.

2002-03-13  Francesco Potortì  <pot@gnu.org>

	* progmodes/etags.el (tag-exact-file-name-match-p)
	(tag-file-name-match-p, tag-partial-file-name-match-p): Use a
	simpler regexp.

2002-03-12  Colin Walters  <walters@debian.org>

	* ibuffer.el (ibuffer-redisplay-current): Don't move point when
	redisplaying a line.

2002-03-12  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (emacs-session-restore): Take previous id as
	an argument.
	(emacs-session-save): Add comment that return t means cancel shutdown

	* startup.el (command-line): Must check that x-session-previous-id
	is bound also, for non-X platforms.

2002-03-12  Gerd Moellmann  <gerd@gnu.org>

	* emacs-lisp/cl-indent.el (lisp-loop-keyword-indentation)
	(lisp-loop-forms-indentation, lisp-simple-loop-indentation):
	New user options.
	(extended-loop-p, common-lisp-loop-part-indentation): New functions.
	(common-lisp-indent-function-1): Renamed from
	common-lisp-indent-function.
	(common-lisp-indent-function): Handle loop forms specially.
	(lisp-indent-defmethod): Use car/cdr instead of first/rest.
	(lisp-backquote-indentation): New user option.

2002-03-12  Francesco Potortì  <pot@gnu.org>

	* progmodes/etags.el (tag-exact-file-name-match-p)
	(tag-file-name-match-p, tag-partial-file-name-match-p):
	Assume that the header of a tags section has either a number
	or nothing after the last comma.

2002-03-11  Richard M. Stallman  <rms@gnu.org>

	* imenu.el (imenu-update-menubar-modified-tick): New variable.
	(imenu-update-menubar): Don't call imenu--make-index-alist
	if buffer has not changed since last time.

	* desktop.el (desktop-buffer-handlers): Doc fix.
	(desktop-buffer-file): Explicitly return BUF.

	* paren.el (show-paren-function): Move back in other direction
	to verify the match is correct.

	* mail/supercite.el (sc-select-attribution): Accept whatever value
	we get in CHOICE; there is no value meaning "try again".

2002-03-11  Colin Walters  <walters@verbum.org>

	* shell.el (toplevel): Revert previous change to use pcomplete.
	(shell-mode): Ditto.
	(shell-pcomplete-setup-done): Remove.
	(shell-pcomplete): Ditto.
	(shell-pcomplete-reverse): Ditto.

	* comint.el: Remove documentation on setting up pcomplete.

2002-03-11  Pavel Janík  <Pavel@Janik.cz>

	* font-lock.el (java-font-lock-extra-types): Add "URL" as separate
	item.  Doc fix.

	* image.el (image-type-from-file-header): Make temporary buffer
	unibyte.

	* subr.el (add-to-list): Doc fix.

2002-03-11  Miles Bader  <miles@gnu.org>

	* pcomplete.el (pcomplete-entries): Expand environment variables
	in filename.

2002-03-10  Daniel Pfeiffer  <occitan@esperanto.org>

	* play/mpuz.el: Use defface instead of facemenu-get-face.

2002-03-10  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line): Add call to emacs-session-restore if
	both x-session-id and x-session-previous-id are strings.

	* term/x-win.el (x-handle-smid): New function.
	(emacs-session-filename): New function.
	(emacs-session-save): New function.
	(emacs-save-session-functions): New variable.
	(emacs-session-restore): New function.

2002-03-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* simple.el (shell-command-on-region): Call push-mark with
	non-nil second arg, to suppress the "Mark set" message.

2002-03-08  Richard M. Stallman  <rms@gnu.org>

	* textmodes/picture.el (picture-forward-column): New arg `interactive'
	is non-nil for an interactive call.  Use instead of interactive-p.
	(picture-backward-column): Likewise.

	* tar-mode.el (tar-untar-buffer): New function.

	* info.el (Info-fontify-node): Bind up-clicks, not down-clicks.
	Put the mouse-face on the entire xref, like the local keymap.

	* find-dired.el (find-name-dired): Use shell-quote-argument.

2002-03-08  Daniel Pfeiffer  <occitan@esperanto.org>

	* play/mpuz.el (mpuz-unsolved-face, mpuz-solved-face)
	(mpuz-trivial-face, mpuz-text-face, mpuz-solve-when-trivial)
	(mpuz-allow-double-multiplicator): New options for nicer look and
	new features.
	(mpuz-put-number-on-board, mpuz-paint-number, mpuz-solve): New funs.
	(mpuz-check-all-solved, mpuz-random-puzzle)
	(mpuz-paint-statistics, mpuz-paint-digit, mpuz-close-game)
	(mpuz-show-solution): Functions streamlined and removed french
	style space before punctuation, added face support and optional
	solving of trivial results.

2002-03-07  Colin Walters  <walters@verbum.org>

	* ibuf-macs.el (define-ibuffer-column): Add :summarizer property.

	* ibuffer.el (ibuffer-update-mode-name): Substitute "view time"
	instead of "recency" for clarity.
	(ibuffer-compile-format): Document more.  Handle new "summarizer"
	columns.
	(ibuffer-fontify-region-function): Ditto.
	(ibuffer-insert-buffer-line): Ditto.
	(ibuffer-map-lines): Ditto.
	(ibuffer-insert-buffers-and-marks): Ditto.
	(ibuffer-update-title-and-summary): Renamed from
	`ibuffer-update-title'.  Handle "summarizer" columns.
	(ibuffer-clear-summary-columns): New function.

	* ibuf-ext.el (ibuffer-filter-format-alist): Add type and group.

2002-03-07  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/ebrowse.el (ebrowse-view/find-file-and-search-pattern):
	Use the other-window instead of the other-frame functions when
	the window is dedicated.

2002-03-06  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* textmodes/bibtex.el (bibtex-make-field): Call bibtex-find-text
	with SILENT so that a new field can be added.

2002-03-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (make-auto-save-file-name): Make sure the produced file
	name does not contain characters that are invalid for DOS/Windows
	filesystems.

	* dos-fns.el, w32-fns.el (make-auto-save-file-name):
	Remove replacement functions.

2002-03-06  Gerd Moellmann  <gerd@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-2): Highlight keywords of
	the form `:x'.

	* vc.el (vc-branch-part): Add autoload cookie.  This function can
	be called from vc-rcs-find-most-recent-rev when visiting a file
	checked into RCS in a CVS sandbox.

2002-03-06  Andreas Schwab  <schwab@suse.de>

	* progmodes/hideif.el: Augment expression parser to handle
	conditional expressions.
	(hif-token-regexp): Also match `?' and `:'.
	(hif-tokenize): Handle `?' and ':' as tokens.
	(hif-expr): Parse conditional expressions.
	(hif-or-expr): Parse `||' expressions.
	(hif-and-expr): Renamed from hif-term.
	(hif-conditional): New function to evaluate a conditional
	expression.

2002-03-06  Pavel Janík  <Pavel@Janik.cz>

	* language/czech.el ("Czech"): Fix the documentation.

	* language/slovak.el ("Slovak"): Likewise.

2002-03-05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* xml.el (xml-parse-attlist): Accept empty strings.

2002-03-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-show-mark): Remove the no-highlight alternative:
	all terminals now support highlighting of some kind.

	* language/european.el (mac-roman): Fix the safe-chars property.

2002-03-05  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-transfer-file): Use `make-temp-file'.
	(vc-default-update-changelog): Remove conditional use of
	`make-temp-name'.

	* vc-cvs.el (vc-cvs-diff-tree): Fix typo in parameter names.

2002-03-05  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-init.el: Comments.

	* ediff-hook.el: Got rid of autoloads.  Not needed, since the hook
	is loaded.

	* ediff-mult.el (ediff-intersect-directories)
	(ediff-prepare-meta-buffer,ediff-get-directory-files-under-revision):
	Cleanup.
	(ediff-draw-dir-diffs): Now supports the "C" command in directory
	difference buffer.
	(ediff-dir-diff-copy-file): New function that implements copying
	of files from one Ediff dir to another.
	(ediff-bury-dir-diffs-buffer): Kills the buffer instead.
	(ediff-append-custom-diff): Better error msgs.

	* ediff-util.el (ediff-compute-custom-diffs-maybe): Buglet fix.
	(ediff-inferior-compare-regions): Use
	ediff-clone-buffer-for-region-comparison.  Better and simpler interface.

	* ediff.el (ediff-directories-internal): Cleanup.
	(ediff-clone-buffer-for-region-comparison): Better interface.

2002-03-04  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Use "P" in interactive spec of minor mode commands.

2002-03-04  Stefan Monnier  <monnier@cs.yale.edu>

	* faces.el (face-spec-choose): Allow `t' to appear before the end.
	(mode-line, tool-bar, minibuffer-prompt, region, fringe, bold, italic)
	(bold-italic, underline, highlight, secondary-selection, fixed-pitch)
	(variable-pitch, trailing-whitespace): Don't use the old-style entries.
	(mode-line-inactive, header-line): Move the `t' section to the
	beginning so the `:inherit' setting can be shared.

2002-03-04  Pavel Janík  <Pavel@Janik.cz>

	* net/snmp-mode.el: Require tempo when compiling to prevent
	warnings.  Update copyright notice.

	* help.el (describe-key-briefly, describe-key): Interpret `undefined'
	like not defined at all.

2002-03-03  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el: Change maintainer to FSF.
	(sgml-start-tag-regex, sgml-font-lock-keywords-1, sgml-mode-common)
	(sgml-tags-invisible, sgml-beginning-of-tag):
	Allow _ : and non-ASCII in tag names, as required for XML.
	(sgml-name-char): Don't assume anything about charsets handled by
	encode-char.

	* textmodes/tex-mode.el (tex-guess-main-file): Handle the case
	where one of the buffers is narrowed.

	* hexl.el (hexlify-command, dehexlify-command): Remove.
	(hexlify-buffer, dehexlify-buffer): Use call-process-region
	rather than shell-command-on-region.

	* newcomment.el (comment-forward): Use forward-comment to skip
	over whitespace (or comments) even when comment-use-syntax is nil.

	* progmodes/cperl-mode.el (cperl-menu): Add "-emacs" to the version.

	* textmodes/xml-lite.el: New file.

2002-03-03  Richard M. Stallman  <rms@gnu.org>

	* textmodes/artist.el (artist-system): Use make-temp-file.

	* progmodes/ps-mode.el (ps-run-make-tmp-filename): Use make-temp-file.

	* mail/sendmail.el (mail-recover-1): Increase non-random-len
	by 1 since we changed make-auto-save-file-name to add one
	fewer character to the buffer name.
	(mail-recover): Really show point at the right place
	in the *Directory* buffer.

	* files.el (make-auto-save-file-name): Use make-temp-file.

	* terminal.el (te-create-terminfo): Use make-temp-file
	to create the source file in a safe way.

2002-03-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* cus-start.el: Rename automatic-hscroll-step and
	automatic-hscroll-margin into hscroll-step and hscroll-margin.

	* frame.el (auto-hscroll-mode): Renamed from automatic-hscrolling.
	(automatic-hscrolling): Now a defvaralias for auto-hscroll-mode.

	* mouse.el (mouse-region-delete-keys): Add deletechar.

2002-03-03  Sam Steingold  <sds@gnu.org>

	* play/snake.el (snake-score-file): Fixed parens (broken by the
	last patch).
	* play/tetris.el (tetris-score-file): Ditto.

2002-03-03  Richard M. Stallman  <rms@gnu.org>

	* play/tetris.el (tetris-score-file): Put in home dir, not in /tmp.

	* play/snake.el (snake-score-file): Put in home dir, not in /tmp.

	* play/gamegrid.el (gamegrid-set-font, gamegrid-setup-face)
	(gamegrid-make-mono-tty-face): Fix usage of condition-case.

2002-03-03  Thien-Thi Nguyen  <ttn@gnu.org>

	* calendar/diary-lib.el (list-diary-entries): Use `buffer-substring'
	instead of `buffer-substring-no-properties' to support enriched mode.

2002-03-02  Richard M. Stallman  <rms@gnu.org>

	* find-dired.el (find-grep-dired): Call shell-quote-argument.
	Specify the -e option.
	Rename arg to `regexp'.

2002-03-02  Milan Zamazal  <pdm@zamazal.org>

	* textmodes/tildify.el (tildify-string-alist): Add entry for xml-mode.

2002-03-02  Miles Bader  <miles@gnu.org>

	* mwheel.el (mwheel-scroll): Remove `double' and `triple' from the
	event-modifiers before looking up in `mouse-wheel-scroll-amount'.
	If there's no applicable modifiers entry in the alist in
	`mouse-wheel-scroll-amount', fall back to the default, not to
	nil (which causes full screen scrolls).

2002-03-01  Andreas Schwab  <schwab@suse.de>

	* textmodes/texnfo-upd.el (texinfo-start-menu-description):
	Remove extra paren in regexp.

2002-03-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-show-mark): Use display-mouse-p, not
	display-graphic-p, to decide whether to move point or use the
	highlighting.

2002-02-28  Colin Walters  <walters@verbum.org>

	* eshell/esh-var.el (eshell-parse-variable-ref): Use `make-temp-file'.

	* calc/calc-graph.el (calc-gnuplot-tempfile): Don't expand against
	`temporary-file-directory'; we now do that in `calc-graph-file-cache'.
	(calc-temp-file-name): Use `make-temp-file'.

2002-02-28  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (java-font-lock-extra-types):
	Match java.net.URL, etc.

2002-02-28  Pavel Janík  <Pavel@Janik.cz>

	* hexl.el (hexl-options): Doc fix.
	Update Commentary section.

	* textmodes/sgml-mode.el (sgml-specials, sgml-quick-keys):
	Doc fixes.

2002-02-28  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-revert-buffer): If the buffer is not saved, prompt
	the user to do that first.
	(vc-update): New function.

	* vc-hooks.el (vc-menu-map): New entry "Update to Latest Version",
	which calls vc-update.  Use the term "Base Version" instead of
	"Last Version" for the entries "Revert" and "Compare".

2002-02-28  Kim F. Storm  <storm@cua.dk>

	* simple.el (shell-command-on-region): Report non-zero exit
	status in mode line instead of buffer.

2002-02-27  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-preoutput-filter-functions): Doc fix.
	(comint-output-filter-functions, comint-input-filter-functions)
	(comint-redirect-filter-functions): Likewise.

	(comint-redirect-preoutput-filter): Do the local-hook
	handling of t when running comint-redirect-filter-functions.
	(comint-output-filter): Likewise for comint-preoutput-filter-functions.

2002-02-26  Richard M. Stallman  <rms@gnu.org>

	* paths.el (remote-shell-program): Add doc string.

2002-02-26  Colin Walters  <walters@debian.org>

	* ibuf-ext.el (sorter mode-name): New.
	(ibuffer-do-occur): Don't quote ibuffer-marked-char.

	* calc/calc-ext.el (calc-scroll-left): Call scroll-left
	interactively, so they do something.
	(calc-scroll-right): Ditto.

2002-02-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (ctext-pre-write-conversion): Handle the
	case when FROM is a string, and when we are called from
	build_annotations_2.

2002-02-26  Richard M. Stallman  <rms@gnu.org>

	* rect.el (clear-rectangle-line): Reindent to the same column
	that move-to-column reached when it tried to go to endcol.

	* icomplete.el (icomplete-exhibit): Use minibuffer-prompt-end.

2002-02-26  Ivar Rummelhoff  <ivarru@math.uio.no>

	* winner.el (winner-boring-buffers, winner-set): A window which
	displays a buffer whose name is in the list
	`winner-boring-buffers', will no longer be restored by `winner-undo'.
	(winner-sorted-window-list): Used to improve comparison between
	window configurations.
	(winner-win-data): Simplified and moved.
	(winner-conf): Simplified (now uses `winner-win-data').
	(winner-change-fun, winner-save-old-configurations)
	(winner-save-(un)conditionally, winner-redo): Changes made while in
	the minibuffer will be ignored.  (Such changes are undone upon
	exit for the minibuffer, anyway.)
	(winner-set-conf): Preserve selected window whenever possible.
	(winner-make-point-alist): Simplified.
	(winner-mode, winner-save-unconditionally): Save current window
	configuration on entering minibuffer.
	(minor-mode-alist): Don't add winner-mode to `minor-mode-alist',
	since it does not change the overall behavior of Emacs.

2002-02-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-conf.el (compound-text): Renamed back from
	compound-text-no-extensions.
	(ctext-no-compositions): Remove the mime-charset property.
	(compound-text-with-extensions): Renamed from compound-text.
	(x-ctext-with-extensions, ctext-with-extensions): Renamed aliases.

2002-02-26  Juanma Barranquero  <lektu@terra.es>

	* faces.el (list-faces-display): Fix typo.

2002-02-25  Richard M. Stallman  <rms@gnu.org>

	* frame.el (focus-follows-mouse): Doc fix.

2002-02-26  Miles Bader  <miles@gnu.org>

	* mwheel.el (mouse-wheel-mode): Pass vectors instead of symbols
	to `define-key', since it no longer accepts the latter.

2002-02-25  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (mouse-wheel-scroll-line): Use car of
	mouse-wheel-scroll-amount.

	* w32-vars.el (mouse-wheel-scroll-amount): Use same definition as
	mwheel.el.

	* language/japanese.el (iso-2022-jp-2): Add init-bol flag.

2002-02-25  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-switches-list): Fix prev change, making the macro
	consistent with the others that take a backend name as a symbol.

	* vc-cvs.el, vc-rcs.el, vc-sccs.el: Fix calls to vc-diff-switches-list.

2002-02-25  Kim F. Storm  <no-spam@cua.dk>

	* comint.el (comint-replace-by-expanded-filename): Do nothing if
	comint-match-partial-filename returns nil.

	* shell.el (shell-pcomplete-setup-done): New variable.
	(shell-pcomplete): Use it instead of shell-pcomplete-setup-p.
	(shell-pcomplete-reverse): Ditto.

2002-02-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* ps-print.el (ps-print-printer): Added `lpr' customize group member.

2002-02-25  Juanma Barranquero  <lektu@terra.es>

	* subr.el (save-match-data): Doc fix.

	* ielm.el (ielm-prompt): Allow customization; make it read-only.

2002-02-25  Kim F. Storm  <storm@cua.dk>

	* shell.el (shell-mode-map): Add "Complete" header so completion
	menu is shown on the menu bar in shell mode.

2002-02-25  Stefan Monnier  <monnier@cs.yale.edu>

	* ielm.el (ielm-match-data): New var.
	(inferior-emacs-lisp-mode): Make it buffer-local.
	(ielm-eval-input): Use it to preserve match-data between inputs.

2002-02-24  Juanma Barranquero  <lektu@terra.es>

	* ielm.el (inferior-emacs-lisp-mode): Use hexl for the dummy process.

2002-02-24  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-unlispify-remove-prefixes): Add to
	`custom-buffer' customize group.

2002-02-23  Kim F. Storm  <storm@cua.dk>

	* help.el (where-is): Use remap-command.

	* help-fns.el (describe-function-1): Use remap-command.

	* subr.el (global-set-key, local-set-key): Undo 2002-02-06
	change (no longer accept a symbol for the KEY argument).

2002-02-23  Colin Walters  <walters@debian.org>

	* calc/calcalg3.el (calc-invent-variables): Convert integer to string.
	* calc/calcalg2.el (math-solve-get-sign): Ditto.

	* ibuffer.el (ibuffer-compile-format): Don't uselessly bind `pt'
	in generated function.

	* ibuf-ext.el (ibuffer-old-time): Change to hours.
	(ibuffer-mark-old-buffers): Handle it.

	* shell.el (shell-pcomplete, shell-pcomplete-reverse): New functions.
	(toplevel): Bind them.
	(shell-mode): Don't set `comint-dynamic-complete-functions'; it is
	not necessary now that we use pcomplete.

	* comint.el: Document how use new pcomplete completion facility.

2002-02-23  Richard M. Stallman  <rms@gnu.org>

	* mail/rmailsum.el (rmail-summary-output): Properly advance
	to next message, by calling rmail-summary-goto-msg.

	* net/browse-url.el (browse-url-galeon): Specify --existing
	for an existing window.  Use --noraise rather than --no-raise.
	Don't use -x.

2002-02-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/etags.el (find-tag-noselect, find-tag)
	(find-tag-other-window, find-tag-other-frame, find-tag-regexp):
	Fix a typo in doc strings.

2002-02-20  Deepak Goel  <deego@glue.umd.edu>

	* play/snake.el (snake-velocity-queue, snake-update-velocity)
	(snake-final-x-velocity, snake-final-y-velocity):
	New variable and functions.  Store user's keypresses
	into a queue and pop from the queue each subsequent turn.
	(snake-update-game, snake-move-left)
	(snake-move-right, snake-move-up, snake-move-down, snake-active-p)
	(snake-start-game): Use that queue.
	(snake-use-glyphs-flag): Renamed from snake-use-glyphs.
	(snake-use-color-flag): Likewise.
	(snake-mode): Rename uses of those variables.

2002-02-22  Eli Zaretskii  <eliz@is.elta.co.il>

	Support for ICCCM Extended Segments in X selections:

	* international/mule-conf.el (ctext-no-compositions): New coding
	system.
	(compound-text-no-extensions): Renamed from compound-text.
	(x-ctext-no-extensions, ctext-no-extensions): Aliases for
	compound-text-no-extensions.
	(compound-text): Redefined using post-read and pre-write conversions.

	* international/mule.el (non-standard-icccm-encodings-alist)
	(non-standard-designations-alist): New variables.
	(ctext-post-read-conversion, ctext-pre-write-conversion):
	New functions.

2002-02-21  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* vc.el (vc-default-init-version): Update documentation to
	indicate that the backend can override the default init version.
	(vc-register): Use the backend init-version function, if it
	exists, to determine the initial version of a file.
	(vc-diff-switches-list): Don't symbol-quote backend, since it's
	already a symbol.  Don't fail if vc-BACKEND-diff-switches isn't bound.

	* vc-hooks.el (vc-mode-line): Set vc-mode to nil if the file is
	not version-controlled.  This is necessary, e.g., if the file has
	just been reverted, and thus was previously under version control
	but isn't any longer.
	(vc-find-file-hook): Likewise.

2002-02-21  Martin Lorentzson  <Martin.Lorentzson@telia.com>

	* vc-cvs.el (vc-cvs-sticky-date-format-string): New variable.
	(vc-cvs-sticky-tag-display): New variable.
	(vc-cvs-mode-line-string): Add sticky-tag to the mode-line.
	(vc-cvs-checkin): If the input revision is a valid symbolic tag
	name, we create it as a branch, commit and switch to it.
	(vc-cvs-retrieve-snapshot): Set file-property sticky-tag.
	(vc-cvs-valid-symbolic-tag-name-p): New function.
	(vc-cvs-parse-sticky-tag): New function.
	(vc-cvs-parse-entry): Add parsing of sticky tags.

2002-02-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* toolbar/tool-bar.el (tool-bar-mode): Revert the :init-value to
	nil, and then explicitly set the standard-value to t.

2002-02-20  Sam Steingold  <sds@gnu.org>

	* textmodes/flyspell.el (flyspell-mode): Autoload the variable
	since it is used in the menu bar.

2002-02-20  Richard M. Stallman  <rms@gnu.org>

	* simple.el (shell-command-on-region): Display the exit status
	when a command fails.

	* subr.el (add-hook): Doc fix.

	* frame.el (other-frame): Doc fix.

	* simple.el (yank): Clear `field' property.

2002-02-20  Tom Tromey  <tromey@cachet>

	* progmodes/tcl.el (tcl-do-fill-paragraph): Find and fill on more
	natural paragraph boundaries.  Don't fail at beginning of buffer.

2002-02-20  Pavel Janík  <Pavel@Janik.cz>

	* tar-mode.el (tar-next-line, tar-previous-line): Add doc string,
	call the argument "arg" to match plain next-line and
	previous-line.  From Kevin Ryde <user42@zip.com.au>.

2002-02-19  Sam Steingold  <sds@gnu.org>

	* mwheel.el (mouse-wheel-scroll-amount): Can specify different
	scroll amounts for different modifiers now.
	(mwheel-scroll): Handle the new `mouse-wheel-scroll-amount'
	format properly.
	(mouse-wheel-mode): Ditto.

2002-02-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/bibtex.el (bibtex-parse-keys): Put save-match-data
	around function body.

	* net/browse-url.el (browse-url-maybe-new-window): Reverse the
	sense of the comparison, to match the doc strings of functions
	that use this macro.

2002-02-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* facemenu.el (describe-text-mode-map): Removed bootstrap kludge.

	* toolbar/tool-bar.el (tool-bar-mode): Made the standard value t.
	* menu-bar.el (menu-bar-mode): Ditto.

2002-02-18  Andreas Schwab  <schwab@suse.de>

	* replace.el (query-replace-regexp-eval): Doc fix.

2002-02-18  Colin Walters  <walters@verbum.org>

	* calc/calcalg2.el (math-solve-get-int): Convert return value from
	`math-get-from-counter' to a string before calling `concat' on it.

	* calc/calc-maint.el (calc-split-manual): Look for calc.texi.
	(calc-public-autoloads): Obsolete; remove.
	(calc-private-autoloads): Ditto.
	(calc-add-autoloads): Ditto.

	* calc/calc-macs.el (calc-with-default-simplification): Use &rest
	for body.

2002-02-17  Jason Rumney  <jasonr@gnu.org>

	* w32-win.el (x-option-alist, x-long-option-alist)
	(x-switch-definitions): Remove, use command-line-x-option-alist
	instead to be consistent with X.
	(x-handle-initial-switch): New function.

2002-02-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (mode-line-inactive, header-line): Add the :inherit
	attribute for the tty case.

2002-02-17  stanislav shalunov  <shalunov@internet2.edu>

	* mail/uce.el (uce-reply-to-uce): Fix incorrect behavior when
	invoked from Rmail with full headers displayed.

2002-02-17  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* emacs-lisp/lisp.el (mark-defun): Don't leave multiple marks
	when repeated.
	* textmodes/paragraphs.el (mark-paragraph): Ditto.

2002-02-17  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (menu-bar-showhide-menu): Added speedbar.
	(menu-bar-tools-menu): Removed speedbar.

	* textmodes/ispell.el (ispell-menu-map): Added `customize-ispell'
	and `flyspell-mode' entries.

	* textmodes/flyspell.el (flyspell): Add to ispell group.

2002-02-17  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* emacs-lisp/lisp.el (mark-sexp): Don't leave multiple marks when
	repeated.
	(mark-defun): Mark more if repeated.

2002-02-17  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-toggle-sorting-mode): Make it work.

	* ibuffer.el (ibuffer-truncate-lines): New option.
	(ibuffer-mode): Use it.

2002-02-17  Kim F. Storm  <storm@cua.dk>

	* cus-start.el: Add mouse-highlight.

2002-02-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* Makefile.in (DONTCOMPILE): Remove cus-start.el.

	* cus-start.el: Add automatic-hscroll-margin and
	automatic-hscroll-step.

2002-02-16  Pavel Janík  <Pavel@Janik.cz>

	* cus-start.el (x-autoselect-window): Allow customization.

	* eshell/em-alias.el (eshell-alias-initialize): Do not use
	make-local-hook.

	* eshell/em-cmpl.el (eshell-cmpl-initialize): Likewise.

	* eshell/em-dirs.el (eshell-dirs-initialize): Likewise.

	* eshell/em-glob.el (eshell-glob-initialize): Likewise.

	* eshell/em-hist.el (eshell-hist-initialize): Likewise.

	* eshell/em-pred.el (eshell-pred-initialize): Likewise.

	* eshell/em-prompt.el (eshell-prompt-initialize): Likewise.

	* eshell/em-rebind.el (eshell-rebind-initialize): Likewise.

	* eshell/em-smart.el (eshell-smart-initialize): Likewise.

	* eshell/em-unix.el (eshell-unix-initialize): Likewise.

	* eshell/esh-cmd.el (eshell-cmd-initialize): Likewise.

	* eshell/esh-ext.el (eshell-ext-initialize): Likewise.

	* eshell/esh-io.el (eshell-io-initialize): Likewise.

	* eshell/esh-mode.el (eshell-mode): Likewise.

	* eshell/esh-test.el (eshell-show-usage-metrics): Likewise.

	* eshell/esh-var.el (eshell-var-initialize): Likewise.

	* progmodes/idlw-shell.el (idlwave-shell-mode): Likewise.

	* progmodes/idlwave.el (idlwave-mode): Likewise.

	* textmodes/reftex-sel.el (reftex-select-label-mode)
	(reftex-select-bib-mode): Likewise.

2002-02-16  John Wiegley  <johnw@gnu.org>

	* eshell/em-hist.el (eshell-hist-initialize): When in the
	minibuffer, use the global value of `eshell-history-ring', and
	never save it to disk, or ask to save it to disk.  This allows
	users of session.el to control whether its global state should be
	persisted or not.
	(eshell-add-command-to-history): Don't write Eshell's history out
	to disk, let the governing mode control that upon exit.

2002-02-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/eshell.el (eshell-command): Before reading from the
	minibuffer, add eshell-add-command-to-history to
	minibuffer-exit-hook, and remove it after read-from-minibuffer
	returns.

	* eshell/em-hist.el (eshell-add-input-to-history): New function,
	with most of the code from eshell-add-to-history.
	(eshell-add-command-to-history): New function, to record in
	eshell-history the commands run via eshell-command.
	(eshell-add-to-history): Call eshell-add-command-to-history to do
	most of the work.

2002-02-16  John Wiegley  <johnw@gnu.org>

	* eshell/esh-ext.el (eshell-external-command): Added a fix for
	XEmacs' new dired.el, which adds a global entry in the
	`file-name-handler-alist'.

2002-02-16  John Wiegley  <johnw@gnu.org>

	* align.el (align-region): Added a missing name argument.

2002-02-16  John Wiegley  <johnw@gnu.org>

	* eshell/esh-ext.el (eshell-script-interpreter): Allow whitespace
	after the #! of a shell interpreter specification.

2002-02-15  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key-briefly): Make output in INSERT case
	look just like what is displayed in the normal case.

2002-02-15  Andreas Schwab  <schwab@suse.de>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2):
	Require non-letter after specials.

2002-02-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-tools-menu): Add an item for Calculator.

2002-02-15  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* simple.el (mark-word): Mark more if repeated.
	* textmodes/paragraphs.el (mark-paragraph): Ditto.
	(mark-end-of-sentence): Ditto.

2002-02-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widgetp): Made it more robust.

2002-02-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* facemenu.el (describe-text-done): New function.
	(describe-text-mode-map): New variable.
	(describe-text-mode-hook): New option.
	(describe-text-mode): New function.
	(describe-text-widget): New function.
	(describe-text-sexp): New function.
	(describe-text-properties): New function.
	(describe-text-category): New command.
	(describe-text-at): New command.
	(facemenu-menu): Replace `list-text-properties-at' with
	`describe-text-at' in the menu.

	* wid-edit.el (widgetp): New function.
	* wid-edit.el (widget-keymap, widget-insert, widget-setup): Autoload.

	* emacs-lisp/pp.el (pp-to-string): Autoloaded.

	* wid-browse.el: Removed version and x-url keywords.

2002-02-13  Kim F. Storm  <storm@cua.dk>

	* cus-start.el (mode-line-in-non-selected-windows):
	Allow customization.

2002-02-13  Richard M. Stallman  <rms@gnu.org>

	* textmodes/bibtex.el (bibtex-parse-buffers-stealthily):
	Tell bibtex-parse-keys to output no progress messages.

2002-02-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/pascal.el (pascal-imenu-generic-expression):
	Add menu-title and fix parentheses.

2002-02-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (menu-bar-options-save): Removed `truncate-lines'.
	(menu-bar-options-menu): Don't set default value for `truncate-lines'.

2002-02-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (menu-bar-options-save): Only save
	`current-language-environment' and `default-input-method' when
	marked as customized.

	* international/mule-cmds.el (setup-specified-language-environment):
	Mark `current-language-environment' as customized.
	(set-input-method): Mark `default-input-method' as customized when
	called interactively.
	(toggle-input-method): Ditto.

2002-02-11  Colin Walters  <walters@verbum.org>

	* ibuffer.el (ibuffer-switch-format): Supply required argument for
	`ibuffer-current-formats'.

2002-02-11  Miles Bader  <miles@gnu.org>

	* faces.el (mode-line-inactive): Add dark-background variant.

2002-02-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* toolbar/tool-bar.el (tool-bar-mode): Removed standard value.
	* menu-bar.el (menu-bar-mode): Ditto.
	* cus-edit.el (customize-mark-to-save): Always save variables
	without a standard value.

	* menu-bar.el (menu-bar-make-toggle): Made it aware of customize.
	(menu-bar-options-save): Ditto.
	(menu-bar-showhide-menu): Ditto.
	(menu-bar-options-menu): Ditto.
	(menu-bar-scroll-bar-right, menu-bar-scroll-bar-left)
	(menu-bar-scroll-bar-none): Remove.
	(menu-bar-showhide-scroll-bar-menu): Use customize aware lambda
	expressions instead.

	* cus-edit.el (customize-set-value): Return value.
	(customize-set-variable): Ditto.
	(customize-save-variable): Ditto.
	(customize-set-variable): Load dependencies before setting value.
	(custom-load-symbol): Autoload it.
	(customize-mark-as-set): New function.

2002-02-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* cus-start.el: Don't warn about "x-*" symbols when building a
	non-GUI version.

2002-02-11  Pavel Janík  <Pavel@Janik.cz>

	* strokes.el (strokes-do-stroke, strokes-do-complex-stroke):
	Doc fix.
	(strokes-help): Do not use doubled with-output-to-temp-buffer.
	Fix the help string.
	(strokes-prompt-user-save-strokes): Fix typo.
	(strokes-list-strokes): Use proper exit-action argument for
	view-buffer.  Update copyright notice.

	* international/mule-diag.el: Various doc and message fixes.
	(non-iso-charset-alist): Add mac-roman.  Don't add entries for
	codepages already present.
	(list-block-of-chars): Display space for null entries in
	translation table.  Display tab specially.
	(list-non-iso-charset-chars): Check for null charsets.  Use pop
	for clarity.  Don't break 8-bit sets into sections between ranges.
	(list-charset-chars): Avoid indent-tabs-mode.
	(describe-char-after): Maybe use the text property for syntax
	table information.  Maybe report char-code-property-table info.
	Maybe report character's unicode.  Tweak printing of list info.
	(list-input-methods): Add xref buttons.
	(dump-charsets, dump-codings): Deleted (obsolete).
	From Dave Love <fx@gnu.org>.

2002-02-10  Pavel Janík  <Pavel@Janik.cz>

	* menu-bar.el (menu-bar-showhide-menu): Rename functions for toggling.

2002-02-10  Stephen J. Turnbull  <stephen@xemacs.org>

	* ediff-init.el (ediff-has-gutter-support): What was this?

2002-02-10  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-util.el (viper-read-key-sequence): Fix so it'll read
	fast key sequences in Emacs native mode.
	(viper-events-to-keys): Delete.

	* viper.el (describe-key, describe-key-briefly): Get rid of
	viper-events-to-keys.

	* ediff-wind.el (ediff-setup-control-frame):
	Use ediff-has-gutter-support.

	* ediff-util.el (ediff-dispose-of-variant-according-to-user):
	Check if buff is alive.

	* ediff.el: Typo in comment.

2002-02-09  Pavel Janík  <Pavel@Janik.cz>

	* menu-bar.el (menu-bar-options-save): Take care of
	line-number-mode and column-number-mode variables.
	(menu-bar-showhide-menu): New menu-items "Show Line Number" and
	"Show Column Number" in "Show/Hide" menu.

2002-02-09  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (mail-mode-map): Use eval-after-load to change it.

2002-02-09  Kim F. Storm  <storm@cua.dk>

	* faces.el (mode-line-inactive): New face for mode-line for
	non-selected windows.
	(mode-line): Doc fix: Only used for selected window.

2002-02-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/cal-menu.el (calendar-mode-map): Change the menu item's
	name to "Insert Diary Entry".

2002-02-08  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (save-buffer-state): Use restore-buffer-modified-p.
	(c-font-lock-syntactic-face-function): Accept doxygen-style comments.

2002-02-08  Richard M. Stallman  <rms@gnu.org>

	* textmodes/text-mode.el (text-mode-hook-identify): Define as no-op.

2002-02-08  Andreas Schwab  <schwab@suse.de>

	* calc/calc.el (calcDigit-key): Use minibuffer-prompt-end instead
	of point-min.

2002-02-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* net/ange-ftp.el (ange-ftp-process-handle-line)
	(ange-ftp-set-xfer-size): If the file's size is a float, divide
	by 1024 instead of using ash.

	* international/mule-cmds.el (select-safe-coding-system):
	State the buffer's name in the message popped in the *Warning* buffer,
	and make sure the offending buffer is displayed.

2002-02-07  Markus Rost  <rost@math.ohio-state.edu>

	* ffap.el (ffap-newsgroup-p): Test for non-nil symbol-value of htb.

2002-02-07  Richard M. Stallman  <rms@gnu.org>

	* terminal.el (terminal-map): Define [menu-bar] so global def is seen.

	* register.el (list-registers): New command.
	(describe-register-1): New subroutine, taken out of view-register.

	* emacs-lisp/copyright.el (copyright-regexp):
	Delete the unibyte copyright symbol; it's redundant.
	Fix a spazz in the multibyte encoding here.

2002-02-07  Dave Love  <fx@gnu.org>

	* language/cyril-util.el (cyrillic-encode-koi8-r-char)
	(cyrillic-encode-alternativnyj-char): Get translation tables from
	symbol properties, not as variables.
	(standard-display-cyrillic-translit): Include Unicode characters.

2002-02-06  Kim F. Storm  <storm@cua.dk>

	* help.el (where-is): Report remapped commands.

	* help-fns.el (describe-function-1): Ditto.

	* subr.el (global-set-key, local-set-key): Accept a symbol for the
	KEY argument (like define-key).

2002-02-06  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/flyspell.el (flyspell-insert-function): Doc fix.

2002-02-06  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el: Require sendmail only at compile time.
	(mail-mode-header-syntax-table): Var deleted.
	(mail-abbrev-syntax-table): Init to nil, will compute when needed.
	(sendmail-pre-abbrev-expand-hook): Only temporarily change
	local-abbrev-table and the syntax table.
	Compute mail-abbrev-syntax-table if that has not been done.

	* progmodes/compile.el (grep-compute-defaults): Definition moved up.

	* emacs-lisp/debug.el (debugger-frame-offset): Var deleted.
	(debugger-frame-number): Figure out the offset directly.
	(debugger-setup-buffer): Don't use debugger-frame-offset.
	(debugger-frame, debugger-frame-clear): Likewise.
	(debugger-jump): Don't alter debugger-frame-offset.

	* emacs-lisp/checkdoc.el (checkdoc-this-string-valid-engine):
	Replace foo-p as var name with foo-flag, not foo-p-flag.

	* hilit-chg.el (highlight-changes-active-string): Default to +Chg.
	(highlight-changes-passive-string): Default to -Chg.
	(highlight-changes-global-modes): Doc fix.

	* dired.el (dired-get-filename): Add /: when appropriate
	to avoid taking a local name as remote.

	* files.el (file-name-non-special): Add special handling for
	file-name-sans-versions, file-name-completion, and
	file-name-all-completions.

	* isearch.el (isearch-update): Don't update display in kbd macro.
	(isearch-lazy-highlight-new-loop): Do nothing in kbd macro.

	* subr.el (force-mode-line-update): Doc fix.

	* subr.el (atomic-change-group, prepare-change-group)
	(activate-change-group, accept-change-group, cancel-change-group):
	New functions.

	* simple.el (undo-get-state, undo-revert-to-state): Fns deleted.
	(transpose-subr-1): Use atomic-change-group.

	* subr.el (add-minor-mode): Include the mode's lighter string
	in the minor mode menu item name.

	* mail/rmail.el (rmail-toggle-header): Avoid possibly slow call to
	rmail-count-screen-lines starting from (point-min).

	* startup.el (use-fancy-splash-screens-p): Need 19 lines,
	beyond the image height, to use the fancy splash screen.

	* textmodes/text-mode.el (text-mode-hook-identify): Function deleted.
	(text-mode): Set text-mode-variant here.

2002-02-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/pong.el (pong-height): Don't use height that exceeds the
	frame height.
	(pong-border-options): Make the border colors slightly more bright.

	* play/gamegrid.el (gamegrid-display-type): Treat any
	color-capable display as color-x, if display-color-p is fboundp.
	(gamegrid-make-color-x-face): Don't call gamegrid-color twice.
	(gamegrid-make-color-tty-face): Use the value of color, not the
	symbol itself.  Don't call gamegrid-color.

2002-02-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* gud.el (gud-refresh): Call recenter only after we are sure we
	are in the right window.

2002-02-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-mark-to-save): New function.
	* menu-bar.el (menu-bar-options-save): Rewrote.

2002-02-05  Pavel Janík  <Pavel@Janik.cz>

	* cus-start.el (x-use-underline-position-properties):
	Allow customization.

2002-02-04  Simon Josefsson  <jas@extundo.com>

	* dired.el (dired-load-hook, dired-mode-hook)
	(dired-before-readin-hook, dired-after-readin-hook): Defcustom.

2002-02-03  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el (ibuffer-filter-format-alist)
	(ibuffer-cached-filter-formats, ibuffer-compiled-filter-formats):
	New variables.
	* ibuffer.el (ibuffer): Remove link; the "home page" for ibuffer
	is now the Emacs CVS tree.
	(ibuffer-formats): Doc fix.
	(ibuffer-active-formats-name, ibuffer-current-formats): New functions.
	(ibuffer-current-format): Use them.
	(ibuffer-recompile-formats, ibuffer-check-formats)
	(ibuffer-switch-format, ibuffer-update-title):
	Add support for ibuffer-filter-format-alist.
	(define-ibuffer-column process): Remove unnecessary consing.

	* ibuf-macs.el (define-ibuffer-column): Add beginnings of support
	for a summary column.

2002-02-03  Andreas Schwab  <schwab@suse.de>

	* window.el (save-selected-window): Move macro before first use.
	(balance-windows): Fix misplaced parenthesis.

2002-02-03  Pavel Janík  <Pavel@Janik.cz>

	* calculator.el (calculator-displayers): Doc fixes.

2002-02-03  Pavel Janík  <Pavel@Janik.cz>

	* menu-bar.el (menu-bar-help-menu): Use different text for tool-tip.
	(menu-bar-options-save): Save also the value of `display-time-mode'.
	(showhide-date-time): New function.
	(menu-bar-showhide-menu): New menu-item "Date and time".

2002-02-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmail.el (rmail): Use find-buffer-visiting instead of
	get-file-buffer to check for rmail buffer existence.

	* term.el (term-emulate-terminal): Extract proper command string
	which is supplied to term-command-hook.

2002-02-03  Richard M. Stallman  <rms@gnu.org>

	* international/quail.el (quail-help): Don't call help-setup-xref.

	* international/mule-cmds.el (describe-input-method):
	Call help-setup-xref here.
	(describe-current-input-method): Doc fix.

	* novice.el (disabled-command-hook): Clarify output text.
	Indent the paragraph from the command's doc string.

	* dabbrev.el (dabbrev--goto-start-of-abbrev):
	Exit loop on beginning of field rather than bobp.

2002-02-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/uce.el (uce-reply-to-uce): Prune the headers before copying
	the message text into the *mail* buffer, and restore the pruned
	state after that.

	* mail/rmail.el (rmail-redecode-body): Prune the headers before
	looking for X-Coding-System header, and restore the pruned state
	before returning.

2002-02-02  Pavel Janík  <Pavel@Janik.cz>

	* cus-edit.el (customize-save-variable): Fix typo in prompt.

	These changes integrate new version of flyspell.el from its
	maintainer, Manuel Serrano:

	* textmodes/flyspell.el (flyspell-issue-message-flag): New user option.
	(flyspell-mode-on, flyspell-notify-misspell)
	(flyspell-small-region, flyspell-external-point-words)
	(flyspell-large-region): Use it.
	(flyspell-before-incorrect-word-string)
	(flyspell-after-incorrect-word-string): New user options.
	(make-flyspell-overlay): Use them.
	(flyspell-version): New function.
	(flyspell-incorrect-face, flyspell-duplicate-face): Adapt face
	definitions to use :weight.
	(flyspell-insert-function): New user option.
	(flyspell-auto-correct-word, flyspell-correct-word)
	(flyspell-xemacs-correct): Use it.
	(flyspell-define-abbrev): New function.
	(flyspell-auto-correct-word, flyspell-correct-word)
	(flyspell-xemacs-correct): Use it.
	(make-flyspell-overlay): Use `evaporate' property.
	(flyspell-auto-correct-word, flyspell-correct-word): Remove overlay.
	(flyspell-emacs-popup): Use `session' instead of `accept'.
	(flyspell-auto-correct-previous-pos): New variable.
	(flyspell-auto-correct-previous-hook)
	(flyspell-auto-correct-previous-word): New functions.

2002-02-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* novice.el (enable-command): If Emacs was invoked as "emacs -q",
	don't alter the user's ~/.emacs.
	(disable-command): If user-init-file is nil or does not exist,
	default to "~/.emacs" (~/_emacs on DOS and, maybe, Windows).
	But don't alter the init file if Emacs was invoked as "emacs -q"

2002-02-01  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/sendmail.el (mail-mode): Undo half of last change.

	* indent.el (indent-for-tab-command): Remove spurious code.

	* hi-lock.el (hi-lock-find-patterns): Save restriction.

2002-02-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/time-date.el: Moved from lisp/gnus.

	* calendar/parse-time.el: Ditto.

2002-01-31  Richard M. Stallman  <rms@gnu.org>

	* international/iso-acc.el (iso-languages): Fix ", " in French.

	* cus-start.el (history-length): Specify customization for it.

	* emacs-lisp/debug.el (debugger-setup-buffer):
	When an eval-buffer frame was reading from a buffer,
	insert indication of the buffer position.
	(debugger-frame-number): Ignore ;;;-comment lines in backtrace.
	(debugger-frame-clear, debugger-frame): Error on non-frame line.

	* simple.el (shell-command-on-region): Err if no mark
	before reading the command string.

	* hl-line.el (hl-line-highlight, hl-line-unhighlight):
	Definitions moved down after hl-line-mode var's definition.

	* hilit-chg.el (hilit-chg-fixup): Don't alter overlay if not ours.
	(hilit-chg-set-face-on-change): Rename arg.
	(hilit-chg-make-ov): Detect error earlier.

	* ediff-hook.el: Delete autoload cookies.

	* comint.el (comint-scroll-show-maximum-output): Default is t.

	* emacs-lisp/bytecomp.el (batch-byte-compile): New arg noforce.
	(batch-byte-compile-if-not-done): New function.

	* Makefile.in (compile): New target.
	(compile-always): Renamed from compile-files.
	(compile-after-backup): Renamed from compile.
	(bootstrap): Depend on compile-always, not compile-files.

	* emulation/pc-select.el (pc-select-save-and-set-mode):
	Properly use MODE-VAR.

2002-01-29  Pavel Janík  <Pavel@Janik.cz>

	* menu-bar.el (menu-bar-help-menu): Change menu-item "Show Emacs
	Version" to "About Emacs".
	(menu-bar-options-save): Add `default-frame-alist'
	to saved variables.
	(menu-bar-showhide-scroll-bar-menu): Use frame-parameters instead
	of the variable `scroll-bar-mode'.

	* startup.el (normal-splash-screen, display-splash-screen):
	New functions (separated from command-line-1).
	(command-line-1): Use them.

2002-01-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* calendar/calendar.el (generate-calendar-month): Doc fix.

2002-01-27  Pavel Janík  <Pavel@Janik.cz>

	* time.el (display-time-mail-directory): New option.
	(display-time-mail-function): Update doc-string.
	(display-time-mail-icon): Use XPM image when available.
	(display-time-string-forms): Use more descriptive text as
	help-echo property.
	(display-time-mail-check-directory): New function.
	(display-time-update): Use it.

	* menu-bar.el (menu-bar-showhide-scroll-bar-menu):
	Quote `window-system'.

	* tmm.el (tmm-get-keymap): Honour :visible in `menu-item'.
	Add Keywords header.  Update Commentary section.
	Update copyright notice.

	* menu-bar.el (menu-bar-scroll-bar-right)
	(menu-bar-scroll-bar-left, menu-bar-scroll-bar-none)
	(showhide-menu-bar): New functions.
	(menu-bar-showhide-menu): New submenu "Show/Hide".
	(menu-bar-showhide-scroll-bar-menu): "Scroll-bar" submenu of
	"Show/Hide".
	Update copyright notice.

2002-01-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* lazy-lock.el (lazy-lock-mode): Add a reference to jit-lock.

2002-01-26  Evgeny Roubinchtein  <evgenyr@cs.washington.edu>

	* pc-select.el (pc-selection-mode-hook)
	(pc-select-saved-settings-alist, pc-select-map)
	(pc-select-saved-global-map, pc-select-key-bindings-alist)
	(pc-select-default-key-bindings, pc-select-extra-key-bindings)
	(pc-select-meta-moves-sexps-key-bindings)
	(pc-select-tty-key-bindings, pc-select-old-M-delete-binding):
	New variables.
	(pc-select-define-keys, pc-select-restore-keys): New functions.
	(pc-select-add-to-alist, pc-select-save-and-set-var)
	(pc-select-save-and-set-mode, pc-select-restore-var)
	(pc-select-restore-mode): New macros.
	(pc-selection-mode): Completely rewrote the body of the function;
	the main goal was to make pc-selection-mode "turn-off"-able, like
	other minor modes.  Use define-minor-mode instead of just a
	defun.  Store the key bindings into four alists:
	pc-select-default-key-bindings, pc-select-extra-key-bindings,
	pc-select-meta-moves-sexps-key-bindings, and
	pc-select-tty-key-bindings; then have the pc-select-define-keys
	function walk those alists instead of calling define-key
	repeatedly.  When the mode is turned on, set the
	keybindings in global-map and remember the old keybindings; when
	the mode is turned off, restore the previously-saved keybindings.
	(pc-selection-mode defcustom): Reflect the fact that the mode is
	now "turn-off"-able.

2002-01-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* eshell/esh-cmd.el (eshell-eval-command): If eshell-resume-eval
	returns t, don't treat that as an error.

2002-01-25  Jason Rumney  <jasonr@gnu.org>

	* faces.el (face-font-registry-alternatives) [windows-nt]:
	Add ms-oemlatin as an alternative for iso8859-1.

2002-01-25  Stefan Monnier  <monnier@cs.yale.edu>

	* pcvs.el (cvs-reread-cvsrc): Distinguish between an empty list of
	args and the absence of an entry.  Don't add -f each time.

2002-01-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* emacs-lisp/cl-seq.el (mismatch): Doc fix.

	Support for more than 8 colors on character terminals:

	* term/rxvt.el: New file.

	* Makefile.in (DONTCOMPILE): Remove term/xterm.el.

	* term/xterm.el (xterm-standard-colors): New variable.
	(xterm-rgb-convert-to-16bit, xterm-register-default-colors)
	(xterm-rxvt-set-background-mode): New functions.
	(toplevel): Call xterm-register-default-colors,
	xterm-rxvt-set-background-mode, and tty-set-up-initial-frame-faces.
	Add support for more keys from xterm's terminfo entry.

	* facemenu.el (list-colors-display): If the argument is nil, don't
	show more colors that the number returned by display-color-cells.

	* term/pc-win.el (msdos-color-values): Reverse the order of the
	colors, since tty-color-define now preserves the registration order.

	* w32-fns.el (w32-tty-standard-colors): Reverse the order.

	* term/tty-colors.el (tty-standard-colors): Reverse the order.
	(tty-register-default-colors): New function; code moved from
	startup.el's command-line.
	(tty-modify-color-alist): Use nconc instead of cons, to preserve
	the order the colors where registered.

	* frame.el (display-color-cells): Use tty-display-color-cells.

	* startup.el (command-line): Call tty-register-default-colors.

2002-01-25  Richard M. Stallman  <rms@gnu.org>

	* subr.el (remove): Doc fix.

2002-01-24  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (compilation-handle-exit):
	Add a compilation-handle-exit property to the "finished" message.
	(compilation-parse-errors): Stop parsing when that property is seen.

	* subr.el (substring-no-properties): New function.
	(copy-without-properties): Function deleted.

	* term/x-win.el (x-handle-geometry): Put sizes on both
	initial-frame-alist and default-frame-alist.

	* cus-edit.el (custom-save-all): Bind file-precious-flag to t
	for saving .emacs.

	* files.el (basic-save-buffer-2): Ignore file-error in delete-file.

	* calendar/calendar.el (generate-calendar-month): Doc fix.

2002-01-23  Richard M. Stallman  <rms@gnu.org>

	* play/tetris.el (tetris): New defgroup.
	(tetris-use-glyphs, tetris-use-color, tetris-draw-border-with-glyphs)
	(tetris-default-tick-period): Convert to defcustom.
	Added * in docstring to indicate user variable.
	(tetris-update-speed-function, tetris-mode-hook, tetris-tty-colors)
	(tetris-x-colors, tetris-buffer-name, tetris-buffer-width)
	(tetris-buffer-height, tetris-width, tetris-height)
	(tetris-top-left-x, tetris-top-left-y): Convert to defcustom.

2002-01-22  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/sendmail.el (mail-mode): ">" is not a supercite-style prefix
	and is already matched by adaptive-fill-regexp.

2002-01-22  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (mode-line-copied-mode-name): New variable.
	(mode-line-mode-name): Don't modify mode-name itself!
	Instead, make a copy and reuse it.

	* subr.el (copy-without-properties): New function.

	* progmodes/sh-script.el (sh-set-shell): Doc fix.

	* net/ange-ftp.el (ange-ftp-canonize-filename): Avoid duplicate
	slash if DIR is just slash.

	* progmodes/perl-mode.el (perl-mode-abbrev-table): Restore definition.

2002-01-21  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/copyright.el (copyright-regexp): Fix previous change.

	* net/ange-ftp.el (ange-ftp-bs2000-posix-hook-installed):
	Move defvar up.

	* textmodes/ispell.el (ispell-help): Clean up echo area if user quits.

	* ibuffer.el: Don't require ibuf-ext at load time.
	(ibuffer): Require ibuf-ext here.

2002-01-21  Francesco Potortì  <pot@gnu.org>

	* generic-x.el (apache-conf-generic-mode): Highlight the first
	word in a line even if preceded by blanks.

2002-01-21  Richard M. Stallman  <rms@gnu.org>

	* window.el (window-body-height): Handle minibuffer window specially.
	Otherwise, don't return less than 1.

2002-01-20  Thomas Dorner  <Thomas.Dorner@start.de>

	* ange-ftp.el: Added support for BS2000, and for raw ftp
	login commands (needed in some circumstances).
	(ange-ftp-raw-login): New custom var.
	(ange-ftp-normal-login): Perform login with raw ftp commands, if
	ange-ftp-raw-login is set and account password is needed.
	(ange-ftp-host-type, ange-ftp-guess-host-type): Handle BS2000 hosts.
	(ange-ftp-bs2000-filename-pubset-regexp)
	(ange-ftp-bs2000-filename-username-regexp)
	(ange-ftp-bs2000-filename-prefix-regexp)
	(ange-ftp-bs2000-name-template): New consts.
	(ange-ftp-bs2000-short-filename-regexp)
	(ange-ftp-bs2000-fix-name-regexp-reverse)
	(ange-ftp-bs2000-fix-name-regexp): New consts.
	(ange-ftp-bs2000-special-prefix): New custom var.
	(ange-ftp-fix-name-for-bs2000)
	(ange-ftp-fix-dir-name-for-bs2000): New funs.
	(ange-ftp-bs2000-host-regexp, ange-ftp-bs2000-posix-host-regexp)
	(ange-ftp-bs2000-posix-hook-installed): New vars.
	(ange-ftp-parse-bs2000-filename, ange-ftp-parse-bs2000-listing)
	(ange-ftp-bs2000-host, ange-ftp-bs2000-posix-host)
	(ange-ftp-add-bs2000-host, ange-ftp-add-bs2000-posix-host): New funs.
	(ange-ftp-bs2000-filename-regexp): New const.
	(ange-ftp-bs2000-additional-pubsets): New custom var.
	(ange-ftp-bs2000-cd-to-posix): New fun.

2002-01-20  Colin Walters  <walters@verbum.org>

	* ibuffer.el (toplevel): Require `ibuf-ext', which is now compiled
	with `byte-compile-dynamic'.
	(ibuffer-default-directory, toplevel): Doc files.

2002-01-20  Pavel Janík  <Pavel@Janik.cz>

	* tempo.el (tempo-define-template): Doc fix.

	* scroll-bar.el (scroll-bar-mode): Make argument optional.

2002-01-20  Jason Rumney  <jasonr@gnu.org>

	* w32-vars.el: New file.

	* loadup.el [windows-nt]: Load it.

	* w32-fns.el, term/w32-win.el: Move user variables to w32-vars.el
	and make them defcustoms.

	* term/w32-win.el (mouse-set-font): Use w32-list-proportional-fonts.

2002-01-19  Pavel Janík  <Pavel@Janik.cz>

	* language/tibet-util.el (tibetan-decompose-region)
	(tibetan-decompose-string): Fix typo in docstring.

	* ruler-mode.el (ruler-mode): New keyword.  Fix :version.

2002-01-18  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-redirect-send-command-to-process):
	Restore previous current buffer.

	* window.el (window-body-height): New function.

2002-01-18  Zoltan Kemenczy  <kemenczy@rogers.com>

	* gud.el (easy-mmode-defmap): Enable "Up Stack", "Down Stack", and
	"Finish Function" menu map entries for jdb mode.
	(gud-jdb-use-classpath): New customization variable.
	(gud-jdb-command-name): Add customization.
	(gud-jdb-classpath, gud-marker-acc-max-length): New variables.
	(gud-jdb-classpath-string): New variable.
	(gud-jdb-source-files, gud-jdb-class-source-alist): Add doc strings.
	(gud-jdb-build-source-files-list): Likewise.
	(gud-jdb-massage-args): Record any command argument classpath
	string in `gud-jdb-classpath-string'.
	(gud-jdb-lowest-stack-level): New function, finds bottom of current
	java call stack in jdb output.
	(gud-jdb-find-source-using-classpath, gud-jdb-find-source)
	(gud-jdb-parse-classpath-string): New functions.
	(gud-jdb-marker-filter): Search/detect classpath information in
	jdb's output.  marker regexp updated to match oldjdb and jdb output
	formats.  Expand search for source files to include new/old methods
	using new functions above.  Do not allow `gud-marker-acc' to grow
	without bound.
	(jdb): Set classpath information (if available) as jdb is started.
	Change `gud-break' and `gud-remove'
	to use new %c ("class") escape in format strings.
	Add `gud-finish', `gud-up', `gud-down' command string functions, and
	add them to the local menu map.  Update `comint-prompt-regexp' for
	jdb and oldjdb.  If attaching to an already running java VM and
	configured to use classpath, send command to query for classpath,
	else use previous method for finding and parsing java
	sources.  Set `gud-jdb-find-source' function accordingly.
	(gud-mode): Doc fix.
	(gud-format-command): Add support for new %c ("class") escape.
	(gud-find-class): New function in support of %c escape.

2002-01-17  Richard M. Stallman  <rms@gnu.org>

	* ibuf-ext.el: Enable byte-compile-dynamic.

2002-01-17  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el: Restore conditional require of fontset.

2002-01-16  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-region-1): Renamed from mouse-drag-region,
	more or less.
	(mouse-drag-region): New function.  For a click in the echo area,
	show *Messages*.

	* ibuf-ext.el: Delete the autoloads for functions defined with
	ibuffer-specific commands.

	* help.el (describe-distribution): Really call view-file.

	* net/ange-ftp.el (ange-ftp-passive-mode): New arg PROC.
	(ange-ftp-get-process): Pass that arg.

	* comint.el (comint-simple-send): Fix previous change.

	* net/telnet.el (telnet-simple-send): Fix previous change.

	* progmodes/sql.el (sql-escape-newlines-and-send)
	(sql-query-placeholders-and-send): Fix previous change.

2002-01-16  Colin Walters  <walters@verbum.org>

	* ibuf-ext.el, ibuf-macs.el, ibuffer.el (toplevel): Remove X-RCS,
	URL, Compatibility headers.  Update copyright notice.
	* ibuf-macs.el (toplevel): Require `cl' when compiling.

2002-01-16  Andrew Choi  <akochoi@cse.cuhk.edu.hk>

	* startup.el (command-line): Set EOL mnemonics for the Mac.

2002-01-16  Andreas Schwab  <schwab@suse.de>

	* mail/feedmail.el (feedmail): Fix :link spec.

2002-01-16  Pavel Janík  <Pavel@Janik.cz>

	* net/ldap.el (ldap-ldapsearch-prog): Default to OpenLDAP version
	2 ldapsearch.

	* net/eudc.el: New maintainer.  Change author's address.
	(eudc-pre-select-window-configuration, eudc-insertion-marker):
	Variables removed.
	(eudc-insert-selected): Function removed.
	(eudc-select): Reimplemented.
	(eudc-expand-inline): Delete the strings only after its expansion
	is chosen not before.

	* net/eudcb-ph.el (eudc-ph-open-session): Remove XEmacs case.
	Minor coding style fixes.

	* net/eudcb-ldap.el: New maintainer.  Change author's address.
	(eudc-attribute-display-method-alist): Display mail with
	eudc-display-mail.

	* net/eudcb-bbdb.el, net/eudc-export.el, net/eudc-hotlist.el,
	* net/eudc-vars.el: New maintainer.  Change author's address.

	* net/eudc-bob.el: New maintainer.  Change author's address.
	(eudc-bob-mail-keymap): New keymap for e-mail addresses.
	(eudc-display-mail): New function.
	(eudc-bob-play-sound-at-point): Remove XEmacs case.

2002-01-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/autoload.el (make-autoload):
	Don't handle define-ibuffer-column, define-ibuffer-filter,
	define-ibuffer-sorter, and define-ibuffer-op.

2002-01-14  Richard M. Stallman  <rms@gnu.org>

	* calendar/calendar.el (diary-date-forms): Doc fix.

2002-01-14  Eli Zaretskii  <eliz@is.elta.co.il>

	* startup.el (command-line): Register the default tty colors even
	if the terminal doesn't seem to support colors.
	<tty-long-option-alist>: New option --color.
	(tty-handle-args): Parse the --color arg.

	* term/tty-colors.el (tty-color-mode-alist): New variable.

2002-01-14  Stefan Monnier  <monnier@cs.yale.edu>

	* net/ange-ftp.el (ange-ftp-root-dir-p): New function.
	(ange-ftp-file-name-all-completions, ange-ftp-file-name-completion):
	Use it.
	(ange-ftp-hook-function): Preserve match-data.
	(ange-ftp-insert-directory): Typo.
	(ange-ftp-shell-command): Check if regexp matched.

2002-01-13  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el: help-map bindings moved to help.el.

	* help.el (view-echo-area-messages): New function.
	(help-map): Add `e' binding.  Delete obsolete `d' binding.
	Change old Info bindings C-f, C-k and C-i to F, K, S.
	Move view-emacs-FAQ from F to C-f.
	Move view-emacs-problems from P to C-e.
	Bindings moved here from mule-cmds.el.
	C-l binding for describe-language-environment deleted.
	(help-for-help): Update for all these changes.

	* emacs-lisp/copyright.el (copyright-regexp): Make (C) optional.

2002-01-13  Dave Love  <fx@gnu.org>

	* emacs-lisp/copyright.el: Doc fixes.
	(copyright-regexp): Add Latin-9 copyright sign.
	Match comment delimiters in year lists.
	(copyright-current-year): Initialize to load-time year.

2002-01-13  Andreas Schwab  <schwab@suse.de>

	* dired-aux.el (dired-do-shell-command): Doc fix.

2002-01-13  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line-x-option-alist): New options "-fs",
	"-fw", "-fh", "--fullscreen", "--fullwidth", and "--fullheight".

	* term/x-win.el (x-handle-initial-switch): New function.

2002-01-13  Colin Walters  <walters@debian.org>

	* emacs-lisp/autoload.el (make-autoload): Handle define-ibuffer-column,
	define-ibuffer-filter, define-ibuffer-sorter, and define-ibuffer-op.

	* emacs-lisp/lisp-mode.el (toplevel): Ditto.

	* ibuffer.el, ibuf-ext.el, ibuf-macs.el: New files.

2002-01-12  Richard M. Stallman  <rms@gnu.org>

	* net/browse-url.el (browse-url-grail):
	Use browse-url-maybe-new-window.

	* net/telnet.el (telnet-simple-send):
	Handle comint-input-sender-no-newline like comint-simple-send.

	* progmodes/sql.el (sql-query-placeholders-and-send):
	Handle comint-input-sender-no-newline like comint-simple-send.
	(sql-escape-newlines-and-send): Likewise.

	* comint.el (comint-input-sender): Doc fix.
	(comint-input-sender-no-newline): New variable.
	(comint-simple-send): If comint-input-sender-no-newline,
	don't output newline, but maybe send eof.
	(comint-send-input): New arg NO-NEWLINE.
	(comint-send-eof): Call comint-send-eof with NO-NEWLINE.

2002-01-12  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/flyspell.el (flyspell-check-pre-word-p):
	Prevent delaying when executing keyboard macros.

2002-01-12  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move): If we can't move enough lines,
	go to beginning or end of line.

	* help-mode.el (help-xref-go-back): Restore POSITION in proper buffer
	and proper window.

	* help.el (describe-mode): Call help-setup-xref in the help buffer.
	Switch buffers only after calling `help-buffer'.

	* dired-aux.el (dired-shell-stuff-it): Substitute for * or ?
	only when they are surrounded by whitespace.
	Use dired-mark-separator when adding one file name to a command.
	(dired-do-shell-command): Verify that * is surrounded by whitespace.
	Ask for confirmation if * or ? is not surrounded by whitespace.
	(dired-bunch-files): Re-reverse the partial file list when it is used.

2002-01-12  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-dynamic-list-completions): Repeating the command
	after displaying a completion list scrolls the list.

2002-01-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (find-file-noselect): Don't consider a buffer as
	visiting a file literally if it is in hexl-mode.

	* faces.el (minibuffer-prompt): A better face definition for MS-DOS.

2002-01-11  Richard M. Stallman  <rms@gnu.org>

	* startup.el (initial-scratch-message): Fix custom type, add group.

	* mail/rmail.el (rmail-decode-babyl-format): Disable undo
	around the decode-coding-region call.

	* emacs-lisp/lisp.el (lisp-complete-symbol): Repeating the command
	after displaying a completion list scrolls the list.

2002-01-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* version.el (emacs-version): Bump to 21.2.50.

2002-01-10  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* play/zone.el (zone-timeout): New var.
	(zone-hiding-modeline): New macro.
	(zone-call): New func.

	(zone): Init `modeline-hidden-level' symbol property.
	Use `zone-call' instead of `funcall'.

	(zone-pgm-whack-chars): Use `make-string' (fix bug introduced in 1.7).

	(zone-pgm-stress): Use `zone-hiding-modeline'.

	(zone-pgm-stress-destress): New zone program.

2002-01-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (minibuffer-prompt): Special face definition for MS-DOS.

2002-01-09  Richard M. Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-screens): Set tab-width in correct buffer.

2002-01-09  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper.el (viper-set-hooks): Zap viper-unfriendly bindings in
	flyspell-mouse-map.

2002-01-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/regexp-opt.el (regexp-opt): Bind max-specpdl-size.

	* emacs-lisp/eldoc.el (eldoc-minor-mode-string): Fix custom type.

	* textmodes/flyspell.el (flyspell-mode-line-string): Fix custom type.

2002-01-08  Pavel Janík  <Pavel@Janik.cz>

	* progmodes/ada-mode.el (ada-initialize-properties, ada-mode):
	Do not use make-local-hook.

2002-01-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/quail.el (quail-start-translation)
	(quail-start-conversion): Bind last-command-event, last-command,
	and this-command in the first let.  This fixes the change from
	2000-08-30.

2002-01-08  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-hook.el: Add an autoload cookie.

2002-01-08  Pavel Janík  <Pavel@Janik.cz>

	* net/eudcb-ph.el, net/ldap.el: New maintainer.  New e-mail
	address of the author.

2002-01-08  Richard M. Stallman  <rms@gnu.org>

	* replace.el (occur-mode-goto-occurrence-other-window): New command.
	(occur-mode-map): Bind `o' to that.

2002-01-07  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-init.el (viper-cond-compile-for-xemacs-or-emacs):
	New macro that replaces viper-emacs-p and viper-xemacs-p in many
	cases.  Used to reduce the number of warnings.

	* viper-cmd.el: Use viper-cond-compile-for-xemacs-or-emacs.
	(viper-standard-value): Move here from viper.el.
	(viper-set-unread-command-events): Move to viper-util.el.
	(viper-check-minibuffer-overlay): Make sure
	viper-minibuffer-overlay is moved to cover the entire input field.

	* viper-util.el: Use viper-cond-compile-for-xemacs-or-emacs.
	(viper-read-key-sequence, viper-set-unread-command-events)
	(viper-char-symbol-sequence-p, viper-char-array-p): Moved here.

	* viper-ex.el: Use viper-cond-compile-for-xemacs-or-emacs.

	* viper-keym.el: Use viper-cond-compile-for-xemacs-or-emacs.

	* viper-mous.el: Use viper-cond-compile-for-xemacs-or-emacs.

	* viper-macs.el (viper-char-array-p, viper-char-symbol-sequence-p)
	(viper-event-vector-p): Move to viper-util.el

	* viper.el (viper-standard-value): Move to viper-cmd.el.
	Use viper-cond-compile-for-xemacs-or-emacs.

	* ediff-help.el: Use ediff-cond-compile-for-xemacs-or-emacs.

	* ediff-hook.el: Use ediff-cond-compile-for-xemacs-or-emacs.

	* ediff-init.el (ediff-cond-compile-for-xemacs-or-emacs):
	New macro designed to be used in many places where ediff-emacs-p or
	ediff-xemacs-p was previously used.  Reduces the number of warnings.
	Use ediff-cond-compile-for-xemacs-or-emacs in many places in lieu
	of ediff-xemacs-p.
	(ediff-make-current-diff-overlay, ediff-highlight-diff-in-one-buffer)
	(ediff-convert-fine-diffs-to-overlays, ediff-empty-diff-region-p)
	(ediff-whitespace-diff-region-p, ediff-get-region-contents):
	Move to ediff-util.el.
	(ediff-event-key): Moved here.

	* ediff-merge.el: Got rid of unreferenced variables.

	* ediff-mult.el: Use ediff-cond-compile-for-xemacs-or-emacs.

	* ediff-util.el: Use ediff-cond-compile-for-xemacs-or-emacs.
	(ediff-cleanup-mess): Improve the way windows are set up after
	quitting ediff.
	(ediff-janitor): Use ediff-dispose-of-variant-according-to-user.
	(ediff-dispose-of-variant-according-to-user): New function
	designed to be smarter and also understands indirect buffers.
	(ediff-highlight-diff-in-one-buffer)
	(ediff-unhighlight-diff-in-one-buffer)
	(ediff-unhighlight-diffs-totally-in-one-buffer)
	(ediff-highlight-diff, ediff-highlight-diff)
	(ediff-unhighlight-diff, ediff-unhighlight-diffs-totally)
	(ediff-empty-diff-region-p, ediff-whitespace-diff-region-p)
	(ediff-get-region-contents, ediff-make-current-diff-overlay):
	Moved here.
	(ediff-format-bindings-of): New function by Hannu Koivisto
	<azure@iki.fi>.
	(ediff-setup): Make sure the merge buffer is always widened and
	modifiable.
	(ediff-write-merge-buffer-and-maybe-kill): Refuse to write the
	result of a merge into a file visited by another buffer.
	(ediff-arrange-autosave-in-merge-jobs): Check if the merge file
	is visited by another buffer and ask to save/delete that buffer.
	(ediff-verify-file-merge-buffer): New function to do the above.

	* ediff-vers.el: Load ediff-init.el at compile time.

	* ediff-wind.el: Use ediff-cond-compile-for-xemacs-or-emacs.

	* ediff.el (ediff-windows, ediff-regions-wordwise)
	(ediff-regions-linewise): Use indirect buffers to improve
	robustness and make it possible to compare regions of the same
	buffer (even overlapping regions).
	(ediff-clone-buffer-for-region-comparison)
	(ediff-clone-buffer-for-window-comparison): New functions.
	(ediff-files-internal): Refuse to compare identical files.
	(ediff-regions-internal): Get rid of the warning about comparing
	regions of the same buffer.

	* ediff-diff.el (ediff-convert-fine-diffs-to-overlays): Moved here.
	Plus the following fixes courtesy of Dave Love: Doc fixes.
	(ediff-word-1): Use word class and move - to the
	front per regexp documentation.
	(ediff-wordify): Bind forward-word-function outside loop.
	(ediff-copy-to-buffer): Use insert-buffer-substring rather than
	consing buffer contents.
	(ediff-goto-word): Move syntax table setting outside loop.

2002-01-07  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-copy-filename-as-kill): Call kill-append
	if following a kill command.

	* help-fns.el (describe-variable, describe-function):
	Do save-excursion.

2002-01-06  Pavel Janík  <Pavel@Janik.cz>

	* net/ldap.el (ldap-search-internal): Skip error message from
	ldapsearch.  Allow listing attribute names only.  Do not open
	non-existent files.

	* net/eudcb-ldap.el (eudc-ldap-get-field-list): Do not try to
	call non-existent function.

	* net/eudc.el (top-level): Revert previous change.

	* net/net-utils.el (nslookup-font-lock-keywords): Defvar font-lock
	variables to prevent warning from byte-compiler.

	* net/eudc.el (top-level): Use eudc-xemacs-p instead of
	string-match on emacs-version again.

	* enriched.el (enriched-make-annotation): Fix the change from
	2002-01-05.
	(enriched-handle-display-prop): Return proper values.

	* net/eudcb-ldap.el (eudc-attribute-display-method-alist):
	Use proper attribute name labeledUri instead of deprecated labeledUrl.

2002-01-05  Pavel Janík  <Pavel@Janik.cz>

	* net/eudc-hotlist.el (eudc-edit-hotlist): Avoid error when
	editing an empty hotlist.

	* net/ldap.el (ldap-search-internal): Make the buffer unibyte.
	Use buffer-string instead of buffer-substring for the whole buffer.

	* net/eudc-vars.el (eudc-external-viewers): Do not use xv, it is
	not free.

	* net/eudc-bob.el (eudc-bob-can-display-inline-images)
	(eudc-bob-display-jpeg): Use fboundp instead of boundp.
	(eudc-bob-save-object): Make the buffer unibyte.
	(eudc-bob-generic-keymap): Add new keybinding `!' to pipe the
	object to external program.

2002-01-05  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-branch-part): Return nil if there's no `.'.
	(vc-default-previous-version): Renamed from vc-previous-version.
	New args BACKEND and FILE.  Return nil for revision numbers
	without a `.'.
	(vc-version-diff): Call vc-BACKEND-previous-version.
	(vc-steal-lock): Steal lock before composing mail, so that no mail
	is sent when the stealing goes wrong.  And we'll actually see the
	error in that case now.
	(vc-finish-steal): Removed.

	* vc-rcs.el (vc-rcs-steal-lock): Do a real checkout after stealing
	the lock, so that we see expanded headers.
	(vc-rcs-trunk-p, vc-rcs-branch-part, vc-rcs-branch-p)
	(vc-rcs-minor-part, vc-rcs-previous-version): Removed.  These are
	available from vc.el.  Updated all callers.

2002-01-05  Richard M. Stallman  <rms@gnu.org>

	* enriched.el (enriched-make-annotation): Doc fix.

	* format.el (format-replace-strings, format-subtract-regions)
	(format-annotate-region, format-annotate-location)
	(format-annotate-atomic-property-change)
	(format-annotate-single-property-change): Doc fixes.

2002-01-05  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el: Require fontset unconditionally.
	(w32-handle-scroll-bar-event): Remove.

2002-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* emacs-lisp/copyright.el (copyright-regexp): Allow multi-line
	copyrights to be updated.

2002-01-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* textmodes/texinfo.el (texinfo-insert-@end): Fix the change from
	2001-10-24.

	* mail/sendmail.el (mail-recover-1, mail-recover): Doc fix.

2002-01-04  Pavel Janík  <Pavel@Janik.cz>

	* net/ldap.el (ldap-host-parameters-alist): Remove duplicated entry.
	(ldap-ignore-attribute-codings): Change the default value to allow
	encoding/decoding of attributes.
	(ldap-coding-system): Use UTF-8 as the coding-system.  Doc fix.

2002-01-03  Richard M. Stallman  <rms@gnu.org>

	* files.el (basic-save-buffer): Undo previous change.

	* calendar/diary-lib.el (diary-block): Doc fix.

	* custom.el (defcustom): Fix syntax of previous change.

2002-01-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (defcustom): Documented :tag, :link and :load.

2002-01-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/sendmail.el (mail-recover-1): New function.
	(mail-recover): Switch to the *mail* buffer right away.
	Use buffer-auto-save-file-name instead of calling
	make-auto-save-file-name.  Call dired-noselect instead of invoking
	`ls' directly.  Bind coding-system-for-read to emacs-mule-unix
	before reading the auto-save file.  If the buffer's auto-save file
	does not exist, call mail-recover-1 to allow recovery from past
	auto-saved drafts.

2002-01-03  Pavel Janík  <Pavel@Janik.cz>

	* time.el (display-time-load-average-threshold):
	Fix defcustom (add type and group).

	* net/ange-ftp.el (ange-ftp-shell-command): Remove port
	specification from the hostname.

2002-01-02  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-active-faces):
	Use face-attributes-as-vector, not face-attributes-vector.

2002-01-02  Chris Hanson  <cph@aarau.ai.mit.edu>

	* xscheme.el: Eleven years of updates on a private copy.

	Extensive changes to support multiple xscheme buffers:
	(run-scheme): Break up into new functions to facilitate starting
	processes in other buffers.
	(xscheme-start, xscheme-read-command-line): New functions.
	(start-scheme, select-scheme)
	(default-xscheme-runlight)
	(global-set-scheme-interaction-buffer)
	(local-set-scheme-interaction-buffer)
	(local-clear-scheme-interaction-buffer)
	(exit-scheme-interaction-mode)
	(verify-xscheme-buffer): New functions.
	(xscheme-process-name, xscheme-buffer-name)
	(xscheme-runlight): New internal vars.
	(default-xscheme-runlight): New const.
	(xscheme-start-process): Add args for the process/buffer names.
	(reset-scheme): Pass process/buffer names.
	(scheme-interaction-mode): Initialize new local vars.
	(reset-scheme, xscheme-send-string-2, xscheme-process-running-p)
	(xscheme-select-process-buffer, xscheme-process-buffer)
	(xscheme-send-region, xscheme-send-char, xscheme-send-interrupt)
	(xscheme-goto-output-point, xscheme-write-message-1): Use new
	var xscheme-process-name.
	(xscheme-start-process): Initialize xscheme-process-name and
	xscheme-buffer-name in the process buffer.  Pass buffer name to
	xscheme-modeline-initialize.
	(xscheme-modeline-initialize): Add argument to specify buffer name
	for mode-line vars.
	(xscheme-process-sentinel): Make sure sentinel is run in the
	process buffer so it sees its local vars.
	(xscheme-process-filter-initialize, xscheme-set-runlight):
	More elaborate logic to handle multiple-buffer mode lines.

	(xscheme-enter-input-wait): Re-enable control-G handler upon
	entering input wait.

	(scheme-interaction-mode): Add arg to preserve local vars.
	(xscheme-enter-interaction-mode)
	(xscheme-enter-debugger-mode): Preserve local vars.
	(xscheme-start-process): Clobber local vars.

	(scheme-interaction-mode-commands): Allow end user to add commands
	to scheme-interaction-mode keymap.
	(scheme-interaction-mode-commands-alist): New variable.

	(xscheme-send-string): Don't use insert-before-markers.

	Implement a per-buffer kill ring:
	(xscheme-insert-expression)
	(xscheme-rotate-yank-pointer, xscheme-yank)
	(xscheme-yank-pop, xscheme-yank-push): New functions.
	(xscheme-expressions-ring)
	(xscheme-expressions-ring-yank-pointer)
	(xscheme-expressions-ring-max): New variables.
	(xscheme-send-string-1): Call xscheme-insert-expression to save
	expression in ring.
	(xscheme-yank-previous-send): Now an alias for xscheme-yank.
	(xscheme-previous-send): Deleted variable.

	(xscheme-send-string-2, xscheme-send-char, xscheme-send-proceed)
	(xscheme-send-control-g-interrupt): Use process-send-string rather
	than send-string.

	(xscheme-send-region): Insert a newline after an expression that
	is submitted in the interaction buffer, for consistency with
	recent changes to Edwin.

	(xscheme-delete-output): New function mimics comint-delete-output.
	(xscheme-last-input-end): New internal variable.
	(xscheme-process-filter-output): Update xscheme-last-input-end.

	(xscheme-send-control-g-interrupt): Make sure that
	xscheme-control-g-disabled-p is looked up in the right buffer.

	(xscheme-enable-control-g): Clear C-g message if visible.
	(xscheme-control-g-message-string): New internal var.
	(xscheme-send-control-g-interrupt): Use new var.

	(xscheme-send-control-g-interrupt, xscheme-send-interrupt):
	Delay after sending interrupt in order to work around race condition.

	(xscheme-send-control-g-interrupt, xscheme-send-interrupt)
	(xscheme-send-char): Use xscheme-send-char rather than send-string
	to send single char.

	(xscheme-process-filter, xscheme-process-filter-alist):
	Add support for evaluating expressions outside of the call-excursion.
	(xscheme-process-filter:string-action-noexcursion): New func.

	(xscheme-write-value): Change output string to match that used by
	Edwin.

	(xscheme-coerce-prompt): Don't write a space after a command
	prompt.  The PROMPT-FOR-COMMAND- procedures will take care of this
	for us.

	(reset-scheme): Delete process after killing it.

2002-01-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* bindings.el (function-key-map): Don't bind shifted keypad
	numeric keys.

2002-01-02  Pavel Janík  <Pavel@Janik.cz>

	* enriched.el (enriched-handle-display-prop): Remove unused variables.
	(enriched-mode): Doc fix.

2002-01-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/ucs-tables.el (ucs-8859-8-alist): Comment away
	Hebrew points.

2002-01-01  Richard M. Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-write-region): If START = nil, use whole buf.

2001-12-31  Richard M. Stallman  <rms@gnu.org>

	* comint.el, cus-edit.el, diff-mode.el, enriched.el, font-lock.el:
	* generic-x.el, info.el, log-view.el, pcvs-info.el, speedbar.el:
	* wid-edit.el, woman.el, calendar/calendar.el, textmodes/flyspell.el:
	* emulation/viper-init.el, eshell/em-ls.el, progmodes/antlr-mode.el:
	* progmodes/cperl-mode.el, progmodes/idlwave.el:
	* progmodes/sh-script.el, progmodes/vhdl-mode.el:
	Adapt face definitions to use :weight and :slant.

	* ps-print.el (ps-font-lock-face-attributes): Use :weight and :slant.

	* cus-edit.el (custom-face-edit-fix-value): Delete `assert' call.

	* font-lock.el (initializing from font-lock-face-attributes):
	Use :weight and :slant, not :bold and :italic.

2001-12-31  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-face-edit-fix-value): New function.
	(custom-face-edit): Use it, to convert :italic and :bold to new forms.

2001-12-30  Pavel Janík  <Pavel@Janik.cz>

	* progmodes/octave-mod.el (octave-abbrev-table):
	* progmodes/idlwave.el (idlwave-mode-abbrev-table):
	* progmodes/fortran.el (fortran-mode-abbrev-table):
	* progmodes/f90.el (f90-mode-abbrev-table):
	* progmodes/vhdl-mode.el (vhdl-mode-abbrev-table-init):
	* progmodes/sql.el (sql-mode-abbrev-table): Mark all the
	predefined abbrevs as "system" abbrevs.

2001-12-30  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-fontify-node): For a **** underline line, put the
	invisible and intangible props on the following newline, but not
	on the previous newline or the last char of the previous line.

	* faces.el (face-set-after-frame-default): Don't change `default' face.

	* faces.el (minibuffer-prompt): Adopt some default colors.

	* replace.el (query-replace-read-args): Immediate error if read-only.

	* textmodes/makeinfo.el (makeinfo-compilation-sentinel):
	Display the output buffer in a more intelligent way.

2001-12-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* ls-lisp.el (insert-directory): Modify the "total" line wording,
	in accordance with files.el's insert-directory.

2001-12-29  Richard M. Stallman  <rms@gnu.org>

	* files.el (basic-save-buffer): If a before-write hook displays
	an echo area message, pause before calling basic-save-buffer-1.

2001-12-29  Markus Rost  <rost@math.ohio-state.edu>

	* textmodes/reftex-global.el (reftex-query-replace-document)
	(reftex-change-label): Doc fix.

	* dired-aux.el (dired-do-query-replace-regexp): Doc fix.

	* progmodes/etags.el (tags-query-replace): Doc fix.

2001-12-29  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (compile-internal): Fix previous change.

2001-12-28  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-mode-line-1): When dragging a mode line upward,
	shrink the windows above as necessary to get space.
	(mouse-drag-move-window-bottom, mouse-drag-window-above): New fns.

	* net/ange-ftp.el (ange-ftp-allow-child-lookup): Always return nil.
	This fixes a bug that treated all files as directories.
	(ange-ftp-insert-directory): Explicitly follow symlinks.

	* international/iso-transl.el (iso-transl-char-map) Eliminate the
	alias symbols--put the translated sequences here directly.

	* progmodes/cc-mode.el (c-mode-abbrev-table)
	(c++-mode-abbrev-table, objc-mode-abbrev-table)
	(java-mode-abbrev-table, pike-mode-abbrev-table):
	Mark all the predefined abbrevs as "system" abbrevs.

	* mail/sendmail.el (mail-envelope-from): Fix custom type.
	(sendmail-send-it): Check mail-specify-envelope-from
	and mail-envelope-from in the mail buffer at start.

2001-12-28  Simon Josefsson  <jas@extundo.com>

	* mail/sendmail.el (mail-envelope-from): Fix :type.
	(sendmail-send-it): Copy `mail-envelope-from' from calling buffer.

2001-12-28  Richard M. Stallman  <rms@gnu.org>

	* net/ldap.el (ldap-search-internal): Handle <file://...> in results.

	* simple.el (line-move-invisible): New subroutine.
	(line-move-to-column): New subroutine--smarter about advancing over
	invisible parts of a line, or lines, but only as long as hpos grows.
	(line-move-finish): New subroutine: repeatedly processes desired
	column, intangibility, and fields.
	(line-move): Use those subroutines.
	When moving lines downward, skip invisible text first rather than last.

2001-12-27  Richard M. Stallman  <rms@gnu.org>

	* international/mule-diag.el (describe-char-after):
	Describe the text properties of the char after point.

	* help.el (describe-key): Doc fix.

2001-12-26  Markus Rost  <rost@math.ohio-state.edu>

	* find-dired.el (find-dired-sentinel): Precede exit message by
	two spaces, to match the regexp in dired-between-files.

2001-12-28  Miles Bader  <miles@gnu.org>

	* wid-edit.el (widget-toggle-value-create): Don't eval actual
	images (which are lists too).

2001-12-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* language/european.el: Fix the doc string of "Latin-5" language
	environment.

2001-12-26  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-mode-map): New keymap,
	defined as before 2001-11-09.
	(add-minor-mode call): Specify the keymap.

	* progmodes/compile.el (compile-internal):
	Set TERM variable in process-environment.

2001-12-25  Richard M. Stallman  <rms@gnu.org>

	* help-mode.el (help-xref-on-pp): Catch and ignore errors in scanning
	the buffer.

	* startup.el (command-line): Convert command line args
	to Emacs internal representation using locale-coding-system.

2001-12-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/fontset.el: Don't require ind-util when compiling.

2001-12-25  Pavel Janík  <Pavel@Janik.cz>

	* emulation/tpu-edt.el (tpu-reset-screen-size):
	Use set-frame-height and set-frame-width instead of set-screen-height
	and set-screen-width.

	* vt-control.el (vt-wide, vt-narrow): Use set-frame-width instead
	of obsolete set-screen-width.

	* locate.el (locate): Remove dot at the end of error argument.

	* emerge.el (emerge-show-file-name): Use frame-height instead of
	obsolete screen-height.

	* mail/mh-utils.el (mh-show-msg): Likewise.
	(mh-handle-process-error): Use frame-width instead of obsolete
	screen-width.

2001-12-25  Richard M. Stallman  <rms@gnu.org>

	* window.el (balance-windows): Use new PRESERVE-BEFORE arg
	to enlarge-window.  Use save-selected-window.  Don't try
	to resize windows that end at the bottom "level".
	Retry changing the sizes until the windows get the desired sizes.
	Discount the minibuffer when computing total height available.

	* emacs-lisp/debug.el (debugger-mode-map): Bind C-m, not `RET'.
	(debugger-make-xrefs): Only make a button for the first symbol
	on any line.

2001-12-24  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (dos-cpNNN-setup, dos-codepage-setup):
	Call IT-setup-unicode-display here instead of adding it to
	dos-codepage-setup-hook, so that Unicode display tables are set
	before dos-codepage-setup-hook runs.

2001-12-24  Richard M. Stallman  <rms@gnu.org>

	* net/net-utils.el (ftp-mode-abbrev-table): Don't define it.
	(nslookup-mode-abbrev-table): Don't define it.
	(smbclient-mode-abbrev-table): Don't define it.
	(ftp-mode): Don't use ftp-mode-abbrev-table; don't enable Abbrev mode.
	(nslookup-mode, smbclient-mode): Likewise.
	(network-connection-service-abbrev-alist): Variable deleted.
	(network-connection-mode-setup): Don't set up abbrev table.

	* faces.el (minibuffer-prompt): New face.
	(minibuffer-prompt-properties): Add `face' property.

	* replace.el (occur-mode-display-occurrence): New function.
	(occur-mode-map): Bind C-o to it.

2001-12-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-cmd.el (viper-change-state): Got rid of make-local-hook.
	(viper-special-read-and-insert-char): Make C-m work right in the r
	command.
	(viper-buffer-search-enable): Fixed format string.

	* viper-ex.el (ex-token-alist): Use ex-set-visited-file-name
	instead of viper-info-on-file.
	(ex-set-visited-file-name): New function.

	* viper.el (viper-emacs-state-mode-list): Added mail-mode.

	* ediff-mult.el (ediff-meta-mark-equal-files): Added optional
	action argument.

	* ediff-init.el: Fixed some doc strings.

	* ediff-util.el (ediff-after-quit-hook-internal): New variable.
	Got rid of make-local-hook.

	* ediff-wind.el (ediff-setup-control-frame): Got rid of
	make-local-hook.

2001-12-23  Richard M. Stallman  <rms@gnu.org>

	* term/x-win.el (x-handle-geometry): Put height and width
	on default-frame-alist, left and top on initial-frame-alist.
	* term/w32-win.el (x-handle-geometry): Likewise.

	* sort.el (sort-reorder-buffer): Copy all to a temp buffer first.

	* play/yow.el (yow): Use an arg to distinguish interactive calls,
	not interactive-p.

2001-12-22  Pavel Janík  <Pavel@Janik.cz>

	* emacs-lisp/elint.el (elint-unknown-builtin-args):
	Remove mocklisp entries.

	* subr.el (insert-string): Moved from mocklisp.c, reimplemented in
	Lisp.  Obsoleted.

	* emulation/mlconvert.el: File removed.

	* emulation/mlsupport.el: Moved to obsolete.

	* obsolete/mlsupport.el: Moved there from lisp/emulation.

	* emacs-lisp/find-gc.el (source-files): Remove mocklisp.c.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Remove mocklisp case.

	* help-fns.el (describe-function-1): Remove mocklisp function case.

2001-12-22  Miles Bader  <miles@gnu.org>

	* textmodes/refill.el (refill-mode): Don't barf when redundantly
	turning refill-mode off.

2001-12-22  Pavel Janík  <Pavel@Janik.cz>

	* time.el (display-time-load-average-threshold): New variable.
	(display-time-update): Use it.

	These changes allow cycling through past 1, 5 and 15 minutes
	load-average displayed in the mode-line.

	* time.el (display-time-default-load-average): New customizable option.
	(display-time-load-average): New variable.
	(display-time-cycle-load-average): New function.
	(display-time-update): Use them.

2001-12-21  Richard M. Stallman  <rms@gnu.org>

	* apropos.el (apropos-print): SPACING is now nil or a separator string.
	(apropos-documentation, apropos-value): Pass a suitable string.

2001-12-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-free-space-program, dired-free-space-args):
	Aliases for back-compatibility.

	* info.el (Info-select-node): If Info-use-header-line is nil, set
	header-line-format to nil.
	(Info-fontify-node): Don't put a keymap text property on the
	heading if we are not going to display the header line.  Remove
	any such text properties left over from past visits to this node.

	* ls-lisp.el (insert-directory): Insert the amount of free disk
	space, like files.el's insert-directory does.

	* files.el (directory-free-space-program):
	Mention file-system-info in the doc string.
	(get-free-disk-space): New function; code moved from insert-directory.
	(insert-directory): Call get-free-disk-space to get the amount of
	free space.

2001-12-21  Richard M. Stallman  <rms@gnu.org>

	* help.el (view-order-manuals, view-emacs-news, describe-copying)
	(describe-distribution, describe-project): Use view-file.

	* emacs-lisp/cl-indent.el (define-modify-macro): Better indent spec.

	* net/ange-ftp.el (ange-ftp-file-modtime): Use save-match-data.

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Make no arg by default in an interactive call,
	so that repeating the command toggles again.

	* emacs-lisp/lisp-mode.el (eval-defun-1): Cope with atoms as args.

2001-12-21  Christoph Wedler  <Christoph.Wedler@sap.com>

	* antlr-mode.el: More sophisticated indentation of cpp directive.
	(antlr-indent-at-bol-alist): New user option.
	(antlr-indent-line): Use it.
	(antlr-indent-style): New user option.
	(antlr-mode): Use it.
	(antlr-indent-item-regexp): Customize.

	* antlr-mode.el: Syntax highlighting changes.
	(antlr-font-lock-literal-regexp): New user option.
	(antlr-font-lock-syntax-face): New face used for :, |, ....
	(antlr-font-lock-default-face): New face.
	(antlr-font-lock-additional-keywords): Use them.

	* antlr-mode.el: New command to insert options -- variables.
	(antlr-mode-map): New binding [C-c C-o].
	(antlr-mode-menu): New submenus.
	(antlr-options-use-submenus): New user option.
	(antlr-tool-version): New user option.
	(antlr-options-auto-colon): New user option.
	(antlr-options-style): New user option.
	(antlr-options-push-mark): New user option.
	(antlr-options-assign-string): New user option.
	(antlr-options-headings): New variable.

	* antlr-mode.el: New command to insert options -- specific.
	(antlr-options-alists): New variable.
	(antlr-read-value): New function.
	(antlr-read-boolean): New function.
	(antlr-language-option-extra): New function.
	(antlr-language-limit-n-regexp): Change default to higher LIMIT.
	(antlr-c++-mode-extra): New function.
	(antlr-grammar-tokens): New function.
	(antlr-imenu-create-index-function): New optional argument.

	* antlr-mode.el: New command to insert options -- functions.
	(antlr-insert-option): New command.
	(antlr-insert-option-interactive): New function.
	(antlr-options-menu-filter): New function.
	(antlr-option-kind): New function.
	(antlr-scan-lists): New alias.
	(antlr-scan-lists-internal): New function.
	(antlr-skip-file-prelude): Hack for special SKIP-COMMENT.
	(antlr-option-level): New function.
	(antlr-syntactic-grammar-depth): New function.
	(antlr-option-location): New function.
	(antlr-insert-option-do): New function.
	(antlr-option-spec): New function.
	(antlr-version-string): New function.
	(antlr-insert-option-existing): New function.
	(antlr-insert-option-space): New function.
	(antlr-insert-option-area): New function.

	* antlr-mode.el: New electric keys ":;|&(){}", TAB works better
	with narrowing.  Menu change.  Miscellaneous.
	(antlr-mode-menu): Include "Indent Region" and "Customize Antlr".
	(antlr-mode-map): New bindings for characters in ":;|&(){}".
	(antlr-electric-character): New command.
	(antlr-class-header-regexp): New variable.
	(antlr-font-lock-additional-keywords): Use it.
	(antlr-imenu-create-index-function): Use it.
	(antlr-file-dependencies): Use it.
	(antlr-indent-line): Also works with restrictions.
	(antlr-indent-command): Interactive spec - changes the buffer.
	(antlr-language-for-option): Deletia.
	(antlr-language-option): New function, defined instead.
	(antlr-mode): Use it.

2001-12-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* jka-compr.el (jka-compr-partial-uncompress): Use null-device
	instead of a literal /dev/null.

	* Makefile.in (distclean): Remove Makefile in the build
	directory, not in the source directory.

2001-12-21  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-send-queued-mail):
	Use with-temp-buffer instead of find-file-noselect, and bind
	coding-system-for-read to no-conversion when reading the queued
	messages.  (Simon's code modified slightly by Eli Zaretskii.)

2001-12-20  Werner Lemberg  <wl@gnu.org>

	* international/mule-diag.el (describe-coding-system)
	(print-coding-system-briefly): Make printed output have a similar
	format as describe-character-set.

2001-12-20  Pavel Janík  <Pavel@Janik.cz>

	* play/blackbox.el (bb-member): Remove, use member instead.
	(bb-delete): Remove, use delete instead.
	Update copyright notice.  Defvar for bb-board, bb-x, bb-y,
	bb-score, bb-detour-count and bb-balls-placed.
	Propertize results of rays.

2001-12-19  Karl Fogel  <kfogel@red-bean.com>

	* isearch.el (isearch-forward, isearch-edit-string): Make doc
	strings mention keybinding for `isearch-yank-word-or-char',
	rather than `isearch-yank-word', since the former is bound now
	and the latter is not.
	(isearch-yank-word-or-char): Fix formatting.

2001-12-19  Werner Lemberg  <wl@gnu.org>

	* language/czech.el, language/european.el, language/slovak.el:
	More fixes for language info doc strings.

2001-12-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* loadup.el: Add "language" to the load-path.

2001-12-19  Richard M. Stallman  <rms@gnu.org>

	* international/mule-cmds.el (describe-language-environment):
	Fix calls to help-xref-button.

2001-12-19  Miles Bader  <miles@gnu.org>

	* international/fontset.el: Require `ind-util' when compiling.

2001-12-18  Pavel Janík  <Pavel@Janik.cz>

	* language/ethio-util.el (ethio-modify-vowel): Use char-to-string
	instead of decompose-composite-char.

2001-12-18  Richard M. Stallman  <rms@gnu.org>

	* simple.el (eval-expression-print-level)
	(eval-expression-print-length): Doc fixes.

	* international/mule-diag.el (describe-character-set):
	Fix the arg to help-xref-button.

	* files.el (directory-free-space-program): New variable.
	(directory-free-space-args): New variable.
	(insert-directory): Use those two variables for getting free space.
	Use file-system-info instead, if that is defined.

	* dired.el (dired-free-space-program): Variable deleted.
	(dired-free-space-args): Variable deleted.
	(dired-insert-directory): Don't try to determine free space.

	* files.el (font-lock-defaults): Add risky-local-variables prop.
	(hack-one-local-variable): Treat various font-lock variables as risky.

2001-12-18  Werner Lemberg  <wl@gnu.org>

	* language/chinese.el, language/cyrillic.el:
	* language/czech.el, language/european.el, language/greek.el:
	* language/hebrew.el, language/indian.el, language/japanese.el:
	* language/korean.el, language/lao.el, language/slovak.el:
	* language/thai.el, language/tibetan.el, language/vietnamese.el:
	Improve documentation strings of coding systems and language infos.

2001-12-18  Werner LEMBERG  <wl@gnu.org>

	Add support for EUC-TW decoding/encoding.

	* language/china-util.el (big5-to-flat-code, flat-code-to-big5)
	(euc-to-flat-code, flat-code-to-euc, expand-euc-big5-alist):
	New auxiliary functions to build `big5-to-cns'.
	(big5-to-cns): New translation alist.

	* language/chinese.el: Added new coding system `euc-tw' and its
	alias `euc-taiwan'.
	Updated language `Chinese-CNS' to include euc-tw encoding also.
	(ccl-decode-euc-tw, ccl-encode-euc-tw): New functions for handling
	euc-tw.

2001-12-18  Dave Love  <fx@gnu.org>

	* loadup.el: Add language/utf-8-lang, language/georgian.

	* image-file.el (image-file-name-extensions): Add pnm.  Doc fix.
	(image-file-name-regexps): Doc fix.

	* server.el (server-unload-hook): New function.

	* emacs-lisp/lisp-mnt.el (lm-copyright-prefix): Group the leader.
	(lm-crack-copyright): Cope with multi-line copyright `lines'.

	* simple.el (newline): Doc fix.
	(eval-expression-print-level, eval-expression-print-length): Doc
	fix.  Amend :type.
	(next-line, previous-line): Make arg optional.
	(newline): Doc fix.

	* Makefile.in (DONTCOMPILE): Add various language files.

	* international/quail.el (quail-input-string-to-events): Don't use
	string-to-list.

	* progmodes/f90.el (f90-break-line): Avoid infinite recursion
	calling `newline'.

2001-12-17  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-dynamic-list-input-ring-select): New function.
	Switches back to the old window configuration.
	(comint-dynamic-list-input-ring): Bind RET to that function.
	(comint-dynamic-list-input-ring-window-conf): New variable.

2001-12-17  Werner Lemberg  <wl@gnu.org>

	* international/mule-conf.el: Improve documentation strings of
	character sets.

2001-12-16  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-copy-filename-as-kill): Moved from dired-x.el.
	(dired-mode-map): Bind w to dired-copy-filename-as-kill.

	* dired-x.el (dired-copy-filename-as-kill): Moved to dired.el.

	* autoinsert.el (auto-insert-alist): Redo finding C and C++ headers.
	Add a DESCRIPTION for the makefile item.

	* find-file.el (ff-other-file-name): New function.

2001-12-16  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/quail.el (quail-input-string-to-events): Fix last
	change.

2001-12-16  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-edit-string): When we set isearch-string
	to the default, also set isearch-message.

	* subr.el (temp-buffer-show-hook, temp-buffer-setup-hook): Add defvars.

	* startup.el (command-line-1): Display startup screen
	even if there are command line args.
	Add a note about how to go to editing your files.
	(fancy-splash-head): Add a note about how to go to your files.
	(fancy-splash-outer-buffer): New variable.
	(fancy-splash-screens): Bind variable fancy-splash-outer-buffer.

	* subr.el (with-temp-message): At the end, always discard
	the temp message, even by clearing the echo area.

	* progmodes/sh-script.el (sh-mode): Run sh-mode-hook.

2001-12-16  Stefan Monnier  <monnier@cs.yale.edu>

	* log-view.el (log-view-message-re, log-view-current-tag):
	Recognize Subversion's log output format.

	* international/fontset.el: Build the list L at compile time.

	* language/ind-util.el (mapthread): Make a closure.

2001-12-15  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-start-hscroll): New variable.
	(isearch-mode): Set isearch-start-hscroll.
	(isearch-update): Restore original hscrolling if possible.

	* isearch.el (isearch-edit-string):
	Treat isearch-yank-word-or-char specially, like isearch-yank-word.

	* emacs-lisp/debug.el (debugger-previous-backtrace): New variable.
	(debugger-make-xrefs): Optimize by (1) using skip-syntax-forward
	rather than regexp search and (2) copying text properties
	already set up on text unchanged from the previous backtrace.

	* case-table.el (set-case-syntax-pair):
	Detect invalid calls and signal an error.

2001-12-15  Richard M. Stallman  <rms@gnu.org>

	* language/ind-util.el (range): Function deleted.
	(indian-regexp-of-hashtbl-keys): Renamed from `regexp-of-hashtbl-keys'.
	All calls changed.

	* language/devan-util.el (devanagari-range): Renamed from `range'.
	All calls changed.
	(devanagari-regexp-of-hashtbl-keys):
	Renamed from `regexp-of-hashtbl-keys'.  All calls changed.

2001-12-15  Dave Love  <fx@gnu.org>

	* language/ind-util.el: Don't require cl.
	(indian-glyph-char, indian-glyph-max-char)
	(indian-char-glyph): Moved from indian.el.
	(indian--puthash-char, mapthread): Don't quote lambda.
	(indian--map): New function.
	(indian--puthash-v, indian--puthash-c, indian--puthash-m)
	(indian--puthash-cv): Use it.

	* language/indian.el (indian-glyph-char, indian-glyph-max-char)
	(indian-char-glyph): Moved to ind-util.el

	* language/devan-util.el (devanagari-post-read-conversion):
	New function.

	* language/georgian.el: New file.

	* international/mule-cmds.el (locale-language-names): Add various
	entries.  Remove utf-8 special case.
	(locale-charset-language-names, locale-preferred-coding-systems):
	Add utf-8 case.
	(set-language-environment): Process required-features earlier.

	* international/quail.el (quail-keyboard-layout-alist):
	Add pc105-uk.
	(quail-keyboard-layout-type): Fix :type.
	(quail-choose-completion-string): Simplify.
	(quail-update-leim-list-file): Don't get fooled by commented-out code.
	(quail-input-string-to-events): Run events through
	translation-table-for-input.

	* international/mule-conf.el (translation-table-for-input):
	New variable.
	(latin-iso8859-14): Amend description.
	(file-coding-system-alist): Add entry for utf-8.

	* language/utf-8-lang.el: New file.

	* international/code-pages.el: New file.

	* language/hebrew.el ("Windows-1255"): New language.

	* language/european.el ("Welsh", "Latin-7", "Lithuanian")
	("Latvian"): New languages.

2001-12-14  Stefan Monnier  <monnier@cs.yale.edu>

	* xml.el: Use setq rather than (set 'foo bar).
	Use push+nreverse rather than append.
	(xml-node-name, xml-node-attributes, xml-node-children):
	Use defsubst rather than macros.
	(xml-parse-region): Handle a nil return value from xml-parse-tag.
	(xml-parse-tag): Don't skip white space.  Return nil for a comment.
	Concat the two strings surrounding a comment into a single string.

	* newcomment.el (comment-indent): Jump to the middle of empty comments.

2001-12-14  Pavel Janík  <Pavel@Janik.cz>

	* select.el (xselect-convert-to-class, xselect-convert-to-name):
	Document.

2001-12-14  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-checkout-model, vc-state, vc-workfile-version):
	Return nil if FILE is not registered.
	(vc-check-master-templates, vc-default-make-version-backups-p):
	Doc fix.

2001-12-13  David Ponce  <david@dponce.com>

	* ruler-mode.el (ruler-mode-extra-left-cols): Remove.
	(ruler-mode-left-fringe-cols): New macro.
	(ruler-mode-right-fringe-cols): New macro.
	(ruler-mode-left-scroll-bar-cols): New macro.
	(ruler-mode-right-scroll-bar-cols): New macro.
	(ruler-mode-ruler): Use above new macros.

2001-12-13  Richard M. Stallman  <rms@gnu.org>

	* files.el (set-auto-mode): Fix previous change.

2001-12-13  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/easymenu.el (easy-menu-intern): New fun.
	(easy-menu-do-define, easy-menu-convert-item-1)
	(easy-menu-define-key-intern, easy-menu-get-map): Use it.
	(easy-menu-return-item): Only return nil if there is no binding.

2001-12-13  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-version): 3.2
	* whitespace.el (whitespace-force-mode-line-update): Replace with
	`whitespace-mode-line-update', which is an alias to the correct
	function in various emacsen.
	* whitespace.el (whitespace-{un,}highlight-the-space):
	Add colorized highlighting of the bogus whitespaces in a buffer/file,
	using the `whitespace-highlight-face' if
	`whitespace-display-spaces-in-color' is set.

2001-12-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (set-auto-coding): Don't search for
	"unibyte:" or "coding:" if set-auto-mode-1 returns nil.

2001-12-13  Pavel Janík  <Pavel@Janik.cz>

	* mail/mailabbrev.el (mail-abbrevs-setup): Do not use make-local-hook.

	* mail/rmail.el (rmail-fontify-buffer-function): Likewise.

	* mail/rmailsum.el (rmail-summary-mode): Likewise.

2001-12-13  Richard M. Stallman  <rms@gnu.org>

	* simple.el (undo): Always set this-command to `undo',
	so that the next undo after an error will not begin redoing.

	* simple.el (shell-command): Doc fix.
	(shell-command-on-region): If there is output and an error,
	add "...Shell command failed" to the output.

2001-12-13  David Ponce  <david@dponce.com>

	* ruler-mode.el (ruler-mode-left-fringe-cols): Variable removed.
	(ruler-mode-left-fringe-cols): Function replaced by more efficient
	implementation `ruler-mode-extra-left-cols'.
	(ruler-mode-ruler): Use above new function.  Take into account
	that the fringe areas can now be resized.

2001-12-12  Richard M. Stallman  <rms@gnu.org>

	* international/characters.el (Unicode): Comment out
	the specifications for kelvin and angstrom signs.

	* international/mule.el (make-translation-table-from-vector):
	Allow null elements in VEC.

	* international/ucs-tables.el (unify-8859-on-encoding-mode)
	(unify-8859-on-decoding-mode): Swap the code in their bodies.
	Add :version.

2001-12-11  Richard M. Stallman  <rms@gnu.org>

	* derived.el (derived-mode-p): Function moved to subr.el.

	* subr.el (derived-mode-p): Moved here from derived.el.

	* international/mule.el (set-auto-coding): Use set-auto-mode-1.

	* files.el (set-auto-mode-1): New subroutine, broken out of
	set-auto-mode.
	(set-auto-mode, hack-local-variables-prop-line): Use that.

2001-12-11  Dave Love  <fx@gnu.org>

	* language/thai-util.el, language/thai.el: Add Unicode equivalents.

	* language/european.el: Remove autoload cookies.  Fix registration
	of diacritic composition function.

2001-12-11  Pavel Janík  <Pavel@Janik.cz>

	* calendar/todo-mode.el: Require time-stamp.

	* net/zone-mode.el (zone-mode): Don't use make-local-hook.

2001-12-11  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/authors.el (authors-aliases): Delete "Richard Stallmao".

	* textmodes/ispell.el (ispell-buffer-local-parsing):
	Match xml like sgml.

	* emacs-lisp/advice.el (ad-compile-function):
	Byte compile the function under another (uninterned) name.

	* gud.el (gdb): Define and bind gud-jump.

	* font-lock.el (font-lock-mode):
	Put our function at the end of after-change-functions.

	* ediff-diff.el (ediff-cmp-options): Doc fix.

	* comint.el (comint-password-prompt-regexp): Match "UNIX Password".

2001-12-10  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (isearch-yank-word-or-char): New function.
	(isearch-mode-map): Bind C-w to that.

	* menu-bar.el (menu-bar-mode): Make arg optional.

	* simple.el (line-move): Cope if next-single-property-change
	or previous-single-property-change returns nil.

	* emacs-lisp/lisp-mnt.el (lm-verify): New arg NON-FSF-OK.
	Don't use interactive-p; instead, pass the proper args
	in (interactive...).  Clean up most of the trouble-report strings.

2001-12-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/smtpmail.el (smtpmail-send-queued-mail): Insert the
	enqueued messages literally.

2001-12-10  Noah Friedman  <friedman@splode.com>

	* battery.el (battery-insert-file-contents): Obsolete function
	removed.
	(battery-read-function): Obsolete function removed.
	(battery-linux-proc-apm): Use insert-file-contents.

2001-12-07  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-visit-buffer):
	Use `select-frame-set-input-focus'--needed when window manager
	uses "click to focus" policy.

2001-12-09  Pavel Janík  <Pavel@Janik.cz>

	* COPYING: Moved back.

2001-12-07  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (IT-character-translations): Add entries for
	more points.

	* international/characters.el: Resurrect the Hebrew category
	settings for all Hebrew characters removed by the last change.
	Add code for setting the Hebrew category of the Unicode Hebrew
	characters.  Set syntax entries for Hebrew punctuation characters.

	* international/ucs-tables.el (ucs-8859-8-alist): Add Hebrew
	points and directional formatting control characters.

2001-12-07  Dave Love  <fx@gnu.org>

	* language/lao-util.el: Add Unicode equivalents for rules.
	(lao-post-read-conversion): New function.

	* language/lao.el: Add Unicode equivalents.
	(lao): Add post-read conversion.

	* international/latin1-disp.el: Fix some 8-bit-graphic characters.
	Use iso2022 encoding.
	(latin1-char-displayable-p): Doc fix.
	(latin1-display-ucs-per-lynx): New option.
	(latin1-display-ucs-per-lynx): New command.
	(latin1-display-reset): Special-case arabic.
	(ucs-tables): Require.
	(latin1-display-sets, latin1-display-setup): Add arabic.
	(latin1-display) <variable>: Use function latin1-display.
	(latin1-display) <function>: Add mule-unicode stuff.
	(latin1-display-check-font): Don't lose if `info' is nil.

	* international/iso-transl.el: Insert Latin-1 characters, not
	unibyte codes.

	* language/european.el (diacritic-composition-pattern): New constant.
	(diacritic-compose-region, diacritic-compose-string)
	(diacritic-compose-buffer, diacritic-post-read-conversion)
	(diacritic-composition-function): New functions.

	* international/utf-8.el (ucs-mule-to-mule-unicode):
	New translation table.
	(ccl-encode-mule-utf-8): Use it.
	(utf-8-untranslated-to-ucs, utf-8-help-echo, utf-8-compose)
	(utf-8-post-read-conversion, utf-8-pre-write-conversion): New function.
	(utf-8-subst-table): New variable.
	(utf-8-compose-scripts): New option.
	(mule-utf-8): Update safe-charsets, pre-write and post-read conversion.

	* international/ucs-tables.el, international/utf-8-subst.el:
	New files.

	* international/characters.el: Don't set word syntax (the default)
	explicitly.  Add a diacritic category.  Add info for Unicode
	equivalents of characters in various Mule charsets and for extra
	Unicode characters.  Don't define specific categories for
	Indian/Devanagari, since they aren't used.

2001-12-06  Richard M. Stallman  <rms@gnu.org>

	* textmodes/fill.el (set-justification): Rename arg VALUE to STYLE.
	(set-justification-left, set-justification-right): Doc fix.

	* progmodes/f90.el (f90-break-line): Use (newline 1) to insert newline.
	(bug-f90-mode): Variable deleted.

2001-12-06  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (indent-line-function): Default is indent-relative again.

2001-12-07  Miles Bader  <miles@gnu.org>

	* progmodes/compile.el (compilation-error-regexp-alist):
	Added regexps for RXP.

2001-12-05  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/cwarn.el (cwarn-font-lock-match-assignment-in-expression):
	Add shift-assignment operators to those highlighted, and highlight
	the whole operator rather than just the "=".

2001-12-04  Juanma Barranquero  <lektu@terra.es>

	* files.el (save-abbrevs, save-some-buffers): Don't ask the user
	before saving abbrevs if `save-abbrevs' has the value `silently'.

2001-12-04  Andreas Schwab  <schwab@suse.de>

	* xt-mouse.el (turn-off-xterm-mouse-tracking): Doc fix.

2001-12-04  Colin Walters  <walters@debian.org>

	* emacs-lisp/autoload.el (make-autoload): Also generate autoloads
	for `defmacro*' forms.

	* emacs-lisp/lisp-mode.el (toplevel): Define docstring offset for
	`defmacro*'.

2001-12-03  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/antlr-mode.el (antlr-c-common-init): Undo last change.

2001-12-02  Richard M. Stallman  <rms@gnu.org>

	* files.el (insert-directory): If the df output does not look right,
	don't try to use it.  Other cleanups in overall code structure.

2001-12-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-mode-prefix-map):
	Add bindings for outline-promote and outline-demote.
	(outline-minor-mode-menu-bar-map): New var.
	(outline-minor-mode): Use it.
	(outline-heading-alist): New var (renamed from outline-level-heading).
	(outline-level): Use it.
	(outline-insert-heading, outline-promote, outline-demote):
	Update to use outline-heading-alist.

	* disp-table.el (standard-display-european):
	Simplify since the function is not interactive any more.
	Don't set the existing buffers to unibyte.

	* pcvs-util.el (cvs-file-to-string): Move condition-case outside.

	* pcvs.el (cvs-reread-cvsrc): Don't use cvs-file-to-string.

	* reveal.el (reveal-mode): Fix reveal-mode's lighter.

	* shell.el (shell): Use shell-file-name.
	Pop to buffer before calling comint to set COLUMNS properly.

	* emacs-lisp/cl.el (svref): New alias.

	* progmodes/antlr-mode.el (antlr-c-common-init):
	Don't inhibit adaptive-fill-mode any more.

	* progmodes/delphi.el (delphi-mode): Don't use make-local-hook.

	* progmodes/etags.el (tags-with-face): Use make-symbol.
	(tags-search, tags-query-replace): Use backquotes.

	* textmodes/picture.el (picture-mode-map): Don't use defconst
	for a variable.

2001-12-02  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/reftex-index.el (reftex-index-mode):
	Remove make-local-hook.

	* textmodes/reftex-toc.el (reftex-toc-mode): Likewise.

2001-12-02  Kim F. Storm  <storm@cua.dk>

	* isearch.el (isearch-resume-enabled): New variable.
	(isearch-done): Use that variable.

2001-12-01  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-button-click): Don't move point permanently:
	Avoid mouse-set-point--instead select the window,
	then do save-excursion, then move point.
	Specify the buffer for get-char-property.
	Don't use `@' in interactive.

	* indent.el (indent-line-function):
	Default is indent-to-left-margin again.

	* replace.el (query-replace-read-args): Display message
	if FROM contains `\n' or `\t'.

2001-12-01  Stefan Monnier  <monnier@cs.yale.edu>

	* indent.el (tab-to-tab-stop): Use delete-horizontal-space.

	* bindings.el (minibuffer-local-map): Bind TAB to insert-tab.

	* emacs-lisp/regexp-opt.el (regexp-opt):
	Bind completion-regexp-list to nil.

	* progmodes/hideif.el (hif-nexttoken): Move to before first def.

2001-12-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* progmodes/idlwave.el, progmodes/idlw-rinfo.el:
	* progmodes/idlw-shell.el, progmodes/idlw-toolbar.el:
	Update maintainer.

2001-11-30  Stefan Monnier  <monnier@cs.yale.edu>

	* mail/smtpmail.el: Use with-current-buffer.
	(message-make-date, message-make-message-id): Autoload when needed.
	(smtpmail-send-it): Use them to add `Date:' and `Message-Id:'
	headers when missing.

	* international/encoded-kb.el (encoded-kbd-mode):
	Use define-minor-mode.

	* enriched.el (enriched-mode): Use define-minor-mode.
	Use dolist and pop and push.

	* info.el (Info-find-node-2): Don't call info-insert-file-contents
	with the `visit' argument.
	(Info-extract-menu-node-name): Use `replace-regexps-in-string'.

	* progmodes/hideif.el (hide-ifdef-mode): Only modify
	`change-major-mode-hook' locally.  Reset invisibility spec.

	* man.el (Man-build-section-alist): Remove last Man-match-substring.

2001-11-30  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* textmodes/paragraphs.el (mark-paragraph): Clarify doc.
	Clarify error message.

2001-11-29  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* textmodes/paragraphs.el (mark-paragraph): Allow prefix arg.

2001-11-30  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-parse-status): Store file state in property,
	don't just return it.

2001-11-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-read-lispref, menu-bar-read-lispintro)
	(menu-bar-read-emacs-man, search-emacs-glossary)
	(emacs-index-search, elisp-index-search): New functions.
	(apropos-documentation, apropos, apropos-value, apropos-variable)
	(apropos-commands): Modify menu item names and help text.
	(elisp-index-search, emacs-index-search, emacs-glossary):
	New menu items.
	(menu-bar-manuals-menu): Move the Ordering Manuals item to a
	submenu.
	(info-elisp, info-elintro): New menu items.
	(apropos): Modify the menu item name.

2001-11-30  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lisp-mode.el (read-if): Add lisp-indent-function prop.

	* textmodes/outline.el (outline-promote, outline-demote): Typo.

	* man.el (man-follow-mouse): New function.
	(Man-mode-map): Bind mouse-2 to it.
	(Man-match-substring): Remove.  Replace with `match-string'.
	(man): Use the `default-value' argument to `read-string'.
	(Man-fontify-manpage): Add mouse-face to cross references.

	* emacs-lisp/cl-macs.el (shiftf): Fix more.  Simplify.

2001-11-29  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/crm.el (completing-read-multiple): Better preserve
	the value of require-match in minibuffer-completion-confirm.
	Use crm-local-completion-map.

	* emacs-lisp/cl-macs.el (shiftf): Fix the fast case so
	(let ((a 1) (b 2)) (shiftf a b (cons a b)) b) returns (1 . 2).
	(cl-make-type-test): Use char-valid-p for `character'.

	* info.el (Info-complete-next-re, Info-complete-cache): New vars.
	(Info-complete-menu-item): Rewrite.  Add the ability to search
	several sequential nodes.  Add a simple caching mechanism.
	(Info-goto-index): New function extracted from Info-index.
	(Info-index): Use it.  Add completion to the interactive spec.
	(Info-menu-update): Simplify call to `Info-complete-menu-item'.

2001-11-29  Pavel Janík  <Pavel@Janik.cz>

	* COPYING: Removed.

2001-11-29  Dave Love  <fx@gnu.org>

	* progmodes/fortran.el: Fontify rewind, backspace.  Doc fixes.
	(fortran-window-create, fortran-window-create-momentarily):
	Rewrite, moving error condition.
	(fortran-beginning-do, fortran-beginning-if): Fix regexps.
	(fortran-mode-syntax-table): Revert last change.

	* international/mule.el: Doc fixes.
	(map-charset-chars): New function.
	(register-char-codings): Use it to cope with generic chars in
	safe-chars.

2001-11-29  Pavel Janík  <Pavel@Janik.cz>

	* play/blackbox.el (blackbox-mode, blackbox): Doc fix.

	* play/cookie1.el (cookie, cookie-insert, shuffle-vector): Doc fixes.

	* play/studly.el (studlify-word, studlify-region)
	(studlify-buffer): Fix doc-string.
	(studlify-buffer): Add autoload cookie.

2001-11-28  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/outline.el (outline-up-heading): Add `invisible-ok' arg.
	(outline-up-heading-all): Remove.
	(hide-sublevels): Move to end-of-heading before calling flag-region.
	(outline-copy-overlay, outline-discard-overlays): Remove.
	(outline-flag-region): Use `remove-overlays'.
	Don't move to end-of-heading.
	(outline-next-visible-heading, outline-back-to-heading)
	(outline-on-heading-p): Use outline-invisible-p.
	(outline-font-lock-level): Use outline-up-heading's new arg.
	(outline-minor-mode): Simplify.
	(outline-map-tree, outline-reveal-toggle-invisible): New funs.
	(outline): Put a `reveal-toggle-invisible' property.
	(outline-level-heading): New var.
	(outline-insert-heading, outline-promote, outline-demote)
	(outline-toggle-children): New commands.

	* progmodes/hideif.el (hif-end-of-line): New function.
	(hide-ifdef-mode): Set line-move-ignore-invisible.
	(hide-ifdef-region-internal): New function.
	(hide-ifdef-region): Use it.
	(hif-defined): Return an integer.
	(hif-infix-to-prefix): Remove.
	(hif-tokenize): Parse from the buffer rather than from a string.
	Correctly tokenize integers.  Use forward-comment.
	(hif-expr): Use hif-or.
	(hif-term): Use hif-and.
	(hif-factor): Use hif-not.  Handle numbers properly.
	Don't require parenthesis around `defined's argument.
	(hif-and, hif-or, hif-not): New funs.
	(hif-canonicalize): Pass a region to hif-tokenize.  Use hif-not.
	(hif-hide-line): Don't hide the \n before the line.
	(hif-possibly-hide): Correctly handle numeric evaluation results.

	* progmodes/make-mode.el: Use line-(end|beginning)-position.
	(makefile-mode): Set indent-line-function.
	(makefile-browser-insert-continuation): Use with-current-buffer.
	(makefile-beginning-of-line-point, makefile-end-of-line-point): Remove.

2001-11-28  Karl Fogel  <kfogel@red-bean.com>

	* isearch.el (isearch-yank-internal): New helper function.
	(isearch-yank-char): New function.
	(isearch-yank-word, isearch-yank-line): Rewrite to use
	isearch-yank-internal.

2001-11-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* mouse.el (mouse-set-font): Make it a no-op if multiple fonts
	aren't supported.  Print a message to that effect if invoked.

2001-11-27  Stephen Eglen  <stephen@gnu.org>

	* locate.el (locate): Put point at first matching file rather
	than top of buffer.

2001-11-27  Stefan Monnier  <monnier@cs.yale.edu>

	* reveal.el: New file.

	* progmodes/hideif.el: Misc cleanup.
	(hide-ifdef-mode-submap): Put the def in the defvar.
	Use substitute-key-definition.
	(hide-ifdef-mode): Use define-minor-mode.
	(hif-outline-flag-region): Remove.
	(hif-show-all): Define in terms of hif-show-ifdef-region.
	(hif-after-revert-function): Rename from hif-before-revert-function.
	(hide-ifdef-region, hif-show-ifdef-region): Use overlays.
	(hif-tokenize): Use with-syntax-table.
	(hif-make-range): Use `else' also for `else-p'.
	(hif-range-else-p): Remove.
	(hif-find-range): Simplify.
	(hif-hide-line): Don't bother preserving buffer-modified-p.
	(hide-ifdefs, show-ifdefs, hide-ifdef-block, show-ifdef-block):
	Don't use selective-display and inhibit-read-only.

	* subr.el (copy-overlay, remove-overlays): New funs.

	* emacs-lisp/regexp-opt.el (regexp-opt-depth): Fix off-by-two error.

2001-11-27  Sam Steingold  <sds@gnu.org>

	* ansi-color.el, bookmark.el, dired.el, emerge.el, fast-lock.el
	* lazy-lock.el, mouse-sel.el, mail/feedmail.el
	* emacs-lisp/advice.el, emacs-lisp/checkdoc.el, emacs-lisp/ewoc.el
	* obsolete/c-mode.el, obsolete/cplus-md.el
	* progmodes/dcl-mode.el, progmodes/idlw-shell.el, progmodes/idlwave.el
	* term/sun-mouse.el, textmodes/artist.el:
	Converted backquote to the new style.
	* mouse.el, reposition.el: Likewise (in comments).
	* expand.el: Likewise (in a string).

2001-11-27  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-load-symbol): Don't always load locate-library.

2001-11-26  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-toggle-value-create): On graphic terminal,
	if :on-glyph or :off-glyph is a list, eval it and store it back.
	(checkbox): Quote the values for :on-glyph and :off-glyph.

	* cus-start.el (recursive-load-depth-limit): Delete item.

2001-11-26  Stefan Monnier  <monnier@cs.yale.edu>

	* help-fns.el (describe-categories, help-describe-category-set): New.
	describe-categories moved here from src/category.c.

2001-11-26  Sam Steingold  <sds@gnu.org>

	* progmodes/cc-mode.el (c-submit-bug-report): Make sure that the
	arguments to `insert' are strings.

2001-11-26  Richard M. Stallman  <rms@gnu.org>

	* startup.el (command-line-1): Call kill-buffer only in non-fancy case.

2001-11-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el: Require help-fns instead of
	help-funs.

	* help-fns.el: Renamed from help-funs.el.

	* startup.el (command-line-1): Don't try to call process-list if
	it is not fboundp.

2001-11-26  Sam Steingold  <sds@gnu.org>

	* frame.el (show-trailing-whitespace): Remove :set argument (the
	value was essentially identical to the default).

2001-11-26  Pavel Janík  <Pavel@Janik.cz>

	* hexl.el (hexl-mode, hexl-follow-ascii): Remove make-local-hook.

	* icomplete.el (icomplete-minibuffer-setup): Likewise.

	* hilit-chg.el (hilit-chg-set): Likewise.

	* speedbar.el (speedbar-mode): Likewise.

	* calendar/calendar.el (calendar-mode): Likewise.

	* play/yow.el (psychoanalyze-pinhead): Use insert instead of
	insert-string.

	* play/gamegrid.el (gamegrid-init-buffer): Likewise.

	* term/bg-mouse.el (bg-insert-moused-sexp): Likewise.

	* term/sun-mouse.el (sun-yank-selection): Likewise.

	* textmodes/bib-mode.el (return-key-bib): Likewise.

	* calendar/appt.el (appt-disp-window): Likewise.

	* calendar/diary-lib.el (list-diary-entries): Likewise.

	* array.el (array-reconfigure-rows): Likewise.

	* filecache.el (file-cache-minibuffer-complete): Likewise.

	* obsolete/cplus-md.el (fill-c++-comment): Likewise.

	* strokes.el (strokes-prompt-user-save-strokes): Likewise.

	* allout.el (outline-version, outline-open-topic)
	(outline-rebullet-heading, outline-insert-listified)
	(outline-latex-verbatim-quote-curr-line)
	(outline-latexify-one-item, outlineify-sticky): Likewise.

	* vc.el (vc-next-action-on-file): Likewise.
	(vc-dired-mode): Remove make-local-hook.

2001-11-26  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-find-version): New function.
	(vc-version-other-window): Redefined in terms of the above.

	* log-view.el (log-view-find-version): New function.
	(log-view-mode-map): Bind it to `f'.

2001-11-26  Gerd Moellmann  <gerd@gnu.org>

	* language/devan-util.el (dev-char-glyph): Escape `"' in
	string literals.
	(dev-glyph-glyph, dev-glyph-glyph-2)
	(devanagari-compose-syllable-region): Likewise.

2001-11-26  Richard M. Stallman  <rms@gnu.org>

	* window.el (save-selected-window): No error if saved window is dead.

	* help-funs.el (describe-syntax): Put (interactive) after doc string.

2001-11-26  Pavel Janík  <Pavel@Janik.cz>

	* international/quail.el (quail-help): Require help-mode in
	top-level instead.

	* iswitchb.el (iswitchb-exhibit): Use insert instead of
	insert-string.

	* icomplete.el (icomplete-exhibit): Likewise.

2001-11-25  Stefan Monnier  <monnier@cs.yale.edu>

	* diff-mode.el (diff-end-of-hunk): Watch out for ambiguities.
	(diff-hunk-kill): Simplify.
	(diff-post-command-hook): Only apply to a single hunk.
	(diff-hunk-text): Make `char-offset' non-optional.
	(diff-find-text): Return a cons cell.
	(diff-find-approx-text): New fun.
	(diff-find-source-location): Use it.
	(diff-apply-hunk, diff-test-hunk, diff-goto-source):
	Adapt to new retval of diff-find-text.

	* vc-cvs.el (vc-cvs-parse-entry): Rewrite, comparing the string-
	rather than integer- representation of dates.

	* textmodes/fill.el (fill-indent-according-to-mode): Default to nil.

	* emacs-lisp/syntax.el: Don't profile syntax-ppss any more.
	(syntax-after): New fun.

	* help-funs.el (describe-syntax): New fun.

	* font-lock.el (font-lock-cache-state, font-lock-cache-position)
	(font-lock-ppss-stats, font-lock-ppss): Remove.
	(font-lock-fontify-syntactically-region): Remove tuning code.
	(font-lock-compile-keywords): Fix off-by-one bug.
	(font-lock-set-defaults): Don't set removed vars.
	(c-keywords): Add `inline'.
	(c-type-names): Add `_Complex', `_Imaginary' and `_Bool'.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set syntax-begin-function.
	(lisp-interaction-mode-abbrev-table): Defvar to its correct value.
	(lisp-interaction-mode): Don't set local-abbrev-table any more.
	(lisp-mode-auto-fill): Use syntax-ppss and obey
	comment-auto-fill-only-comments.
	(lisp-fill-paragraph): Use syntax-ppss.

2001-11-25  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mail/rmail.el (rmail-enable-mime-composing): New.  A lightweight
	version of rmail-enable-mime.
	(rmail-forward): Use it.

2001-11-25  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Add doc string.

	* international/quail.el (quail-keyboard-layout-button):
	Define button type.
	(quail-keyboard-customize-button): Likewise.
	(quail-help): Use those button types.  Require `help-mode'.
	Avoid altering the argument `package'.

	* help-mode.el (help-function, help-variable, help-face)
	(help-coding-system, help-input-method, help-character-set):
	Define each button type with its own explicit define-button-type.

	* language/devan-util.el: Comment out parts of the file
	which apparently are garbled.

2001-11-25  Pavel Janík  <Pavel@Janik.cz>

	* mail/smtpmail.el (smtpmail-deduce-address-list): Don't use
	insert-string.

2001-11-25  Pavel Janík  <Pavel@Janik.cz>

	* play/snake.el (snake-mode): Remove make-local-hook.

	* play/tetris.el (tetris-mode): Likewise.

	* play/decipher.el (decipher-mode): Likewise.

	* tmm.el (tmm-add-prompt): Likewise.

2001-11-25  Sam Steingold  <sds@gnu.org>

	* menu-bar.el (menu-bar-apropos-menu): New variable.
	Moved all `apropos' bindings to this menu.
	(menu-bar-help-menu): Added `menu-bar-apropos-menu'.

2001-11-24  KAWABATA, Taichi  <batta@beige.ocn.ne.jp>

	The following changes are for new indian languages support based
	on Unicode charset and CDAC fonts.

	* international/mule-conf.el: Change indian-1-column charset to
	indian-glyph charset.

	* international/characters.el: Adjusted for the change of
	indian-1-column -> indian-glyph.

	* international/fontset.el: Delete the setting for indian-1-column
	and add the setting for indian-glyph in the default fontset.

	* language/indian.el: Completely re-written.

	* language/devanagari.el: Completely re-written.

	* language/devan-util.el: Completely re-written.

	* language/ind-util.el: New file.

2001-11-24  Richard M. Stallman  <rms@gnu.org>

	* startup.el (command-line-1): Don't do startup screen
	if a subprocess is running.  Call the startup screen buffer
	"GNU Emacs".  Make a special mode-line-format for it.

	* net/browse-url.el (browse-url-galeon-new-window-is-tab): New var.
	(browse-url-galeon): Use that variable.

	* mail/supercite.el (sc-toggle-var): Don't use set-variable or
	eval-expression.  Eval and set the variable simply.

	* files.el (temporary-file-directory): Use defcustom.
	(small-temporary-file-directory): Likewise.
	(normal-backup-enable-predicate): Move down in file
	after definition of temporary-file-directory.

	* bindings.el (last-buffer, unbury-buffer): Doc fixes.

2001-11-24  Colin Walters  <walters@debian.org>

	* calc/calc-ext.el (calc-init-extensions): Update the rest of the
	autoload names to match files renamed on initial calc import.

	* calc/calc.el (Commentary): Cleanup, and add logistic curve
	fitting suggestion from Robert J. Chassell <bob@rattlesnake.com>.

2001-11-23  Colin Walters  <walters@debian.org>

	* Makefile.in (finder_setwins, setwins): Include Calc again.

	* calc/calc-rules.el: Add header comment.

2001-11-23  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (with-vc-properties): Don't bind `filename' locally.
	(with-vc-file, edit-vc-file): Use `make-symbol' for local bindings
	to avoid name clashes.  Fix `lisp-indent-function' property for
	both.

2001-11-23  Francesco Potortì  <pot@gnu.org>

	* generic-x.el (mailrc-generic-mode): Highlight the `source' keyword.

2001-11-22  Colin Walters  <walters@debian.org>

	* calc/calc-misc.el (report-calc-bug):
	Use `reporter-prompt-for-summary-p'.

	* calc/INSTALL, calc/Makefile: Remove.

2001-11-22  Miles Bader  <miles@gnu.org>

	* emacs-lisp/re-builder.el (reb-match-0, reb-match-1)
	(reb-match-2, reb-match-3): Add dark-background variants.

2001-11-22  Colin Walters  <walters@debian.org>

	* calc/calc-misc.el (calc-info): Don't perform voodoo,
	just (info "Calc").
	(report-calc-bug): Use reporter.el.

	* mail/reporter.el (reporter-submit-bug-report): Doc fixes.

2001-11-21  Richard M. Stallman  <rms@gnu.org>

	* which-func.el (which-function): Call imenu--make-index-alist
	if necessary to get a list of functions.
	(which-function-imenu-failed): New variable.
	(which-func-update): Handle all visible windows.
	(which-func-update-1): New subroutine broken out of which-func-update.

	* files.el (temporary-file-directory, null-device)
	(small-temporary-file-directory): Definitions moved up.

	* progmodes/cperl-mode.el (cperl-problems, cperl-tips)
	(cperl-non-problems, cperl-praise): Doc fixes.

	* progmodes/sh-script.el (sh-mode): Don't use define-derived-mode.
	(sh-mode-syntax-table): Function restored.
	Variable set up for use by function sh-mode-syntax-table.
	(sh-set-shell): Set the syntax table.

	* play/gomoku.el (gomoku-mode): Don't use define-derived-mode.

	* progmodes/perl-mode.el (perl-mode): Don't use define-derived-mode.

	* international/encoded-kb.el: Don't alter minor-map-alist.

2001-11-20  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* files.el (auto-save-file-name-transforms): Put remote files in
	temporary-file-directory rather than /tmp.

2001-11-21  Colin Walters  <walters@debian.org>

	* calc/calc-macs.el (calc-slow-wrapper): Move (point) call outside
	of (function ...) wrapper.

2001-11-20  Stefan Monnier  <monnier@cs.yale.edu>

	* derived.el (define-derived-mode): Create the abbrev-table
	from inside the `defvar'.

	* jit-lock.el (jit-lock-defer-time): New var.
	(jit-lock-defer-timer, jit-lock-buffers): New vars.
	(jit-lock-mode): Initialize them.  Cancel the timers more carefully.
	(jit-lock-function): Defer fontification if requested.
	(jit-lock-stealth-chunk-start): Pay attention to the new non-nil value.
	(jit-lock-stealth-fontify): Check the new `jit-lock-defer-multiline'
	text property.
	(jit-lock-deferred-fontify): New fun.

2001-11-20  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-interaction-mode):
	Set local-abbrev-table to lisp-mode-abbrev-table.

	* emacs-lisp/re-builder.el (reb-mode):
	Don't use define-derived-mode.  Call kill-all-local-variables.

	* emacs-lisp/lisp-mode.el (lisp-mode, emacs-lisp-mode):
	Don't use define-derived-mode.

	* help-mode.el (help-mode): Undo 2001-10-07 change.

	* replace.el (occur-mode): Undo 2001-5-20 change.

2001-11-20  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-system-coding-system): Change to an alias for
	locale-coding-system.
	(set-w32-system-coding-system): Document the above change.
	Set locale-coding-system instead.

2001-11-20  Richard M. Stallman  <rms@gnu.org>

	* ruler-mode.el: Add pagination.
	(ruler-mode-toggle-show-tab-stops): No need to
	test `ruler-mode' variable.

2001-11-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* play/landmark.el: Mark lm-mode as special.

	* play/gomoku.el: Mark gomoku-mode as special.

2001-11-20  Juanma Barranquero  <lektu@terra.es>

	* emacs-lisp/re-builder.el (reb-change-target-buffer): New function.
	(top-level): Bind it to C-c C-b.
	(re-builder): Don't re-enter RE Builder Mode.

	* bs.el (bs-delete): Signal an error if the buffer cannot be deleted.

2001-11-20  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/cperl-mode.el (cperl-perldoc): Require man before binding
	`manual-program'.

	* emacs-lisp/lisp-mode.el (lisp-fill-paragraph): Don't move back
	to a line without a comment.

2001-11-20  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-listing-switches): Mention in the doc string
	that some switches are not supported by ls-lisp.el

2001-11-19  Stefan Monnier  <monnier@cs.yale.edu>

	* imenu.el (imenu--split-menu): Use dolist and copy-sequence.
	(imenu--create-keymap-2): Remove.
	(imenu--create-keymap-1): Simplify, remove third argument.
	(imenu--generic-function): Use dolist.
	(imenu-find-default): New function.
	(imenu--completion-buffer): Use it.
	(imenu--mouse-menu): Use popup-menu.
	(imenu--menubar-select): Return t rather than calling imenu.

	* textmodes/fill.el (fill-delete-prefix, fill-delete-newlines):
	New functions, extracted from fill-region-as-paragraph.
	(fill-region-as-paragraph): Use them.
	Use an end marker instead of eob.
	Ignore whitespace-only fill-prefixes when indenting according to mode.
	Simplify the loop that searches for spaces backwards.

	* textmodes/picture.el (picture-vertical-step)
	(picture-horizontal-step): Don't use defconst for variables.

	* mail/mail-extr.el: Use backquote/dolist/mapc/when.  Docstring fixes.
	(mail-extract-address-components): Downcase domain names.
	(mail-extr-delete-char): Remove.  Use delete-char instead.

	* emulation/pc-select.el: Doc string fixes.
	(pc-selection-mode): Don't treat macos as a tty.

	* emacs-lisp/lisp.el (mark-sexp): Mark more if repeated.

	* progmodes/cc-engine.el (c-parse-state): Typo.  From Martin Stjernholm.

	* mwheel.el (mouse-wheel-scroll-amount): Allow float values.
	(mouse-wheel-progressive-speed): New var.
	(mwheel-scroll): Use it and handle float values.

	* lazy-lock.el (lazy-lock-install-hooks): Remove make-local-hook.

	* iswitchb.el (iswitchb-mode): Use define-minor-mode.
	(iswitchb): Fix the case where the result was selected with the mouse.
	(iswitchb-completion-help): Use the normal *Completions* now that
	mouse selection works.
	(iswitchb-minibuffer-setup): Simplify.

	* newcomment.el (comment-column, comment-style, comment-multi-line)
	(comment-auto-fill-only-comments): Remove :group arg.
	(comment-padding): Add :type.
	(comment-indent-new-line): Ignore comment-auto-fill-only-comments
	if called interactively.

2001-11-19  Colin Walters  <walters@verbum.org>

	* calc/calc.el (toplevel): Add comment and version header.
	(calc-init-base): Bump version to 2.02f, update date.

2001-11-19  Richard M. Stallman  <rms@gnu.org>

	* net/browse-url.el: Support Mozilla and Galeon.
	By default, find the installed browser whichever it is.
	(browse-url-mozilla): New function.
	(browse-url-mozilla-sentinel): New function.
	(browse-url-galeon, browse-url-galeon-sentinel): New functions.
	(browse-url-default-browser): New function.
	(browse-url-process-environment): Use browse-url-browser-display.
	(browse-url-browser-display): Renamed from browse-url-netscape-display.
	(browse-url-mozilla-startup-arguments, browse-url-galeon-program)
	(browse-url-galeon-arguments, browse-url-galeon-startup-arguments)
	(browse-url-mozilla-program, browse-url-mozilla-arguments): New vars.
	(browse-url-browser-function): New default, new options.

2001-11-19  Sam Steingold  <sds@gnu.org>

	* bindings.el (last-buffer, unbury-buffer): New function.
	(mode-line-unbury-buffer): Use `unbury-buffer'.

2001-11-18  Stephen Eglen  <stephen@gnu.org>

	* iswitchb.el (iswitchb-cannot-complete-hook): New variable to
	control behavior when no further completion is possible.

2001-11-19  Colin Walters  <walters@verbum.org>

	* calc/calc-macs.el (calc-wrapper, calc-slow-wrapper)
	(math-showing-full-precision, math-with-extra-prec, math-working)
	(calc-with-default-simplification)
	(calc-with-trail-buffer): Use backtick.
	(Math-zerop, Math-integer-negp, Math-integer-posp, Math-negp)
	(Math-looks-negp, Math-posp, Math-integerp, Math-natnump)
	(Math-ratp, Math-realp, Math-anglep, Math-numberp, Math-scalarp)
	(Math-vectorp, Math-messy-integerp, Math-objectp, Math-objvecp)
	(Math-integer-neg, Math-equal, Math-lessp, Math-primp)
	(Math-num-integerp, Math-bignum-test, Math-equal-int)
	(Math-natnum-lessp, math-format-radix-digit): Change to `defsubst'.
	(calc-record-compilation-date-macro): Deleted.  Callers updated.
	(math-format-radix-digit): Move to calc-bin.el.

	* calc/calc.el (calc-record-compilation-date): Remove.
	(calc-bug-address): Update.
	(calc-settings-file): Use `user-init-file'.

	* calc/calc-mode.el (calc-settings-file-name, calc-save-modes):
	Handle null `calc-settings-file'.

	* calc/calc-frac.el (calc-over-notation): Use `completing-read'.
	* calc/calc-keypd.el (calc-keypad-mode): New.
	(calc-do-keypad): Use it.
	(calc-keypad-map): Move into `calc-keypad-mode'.

	* calc-math.el (calcFunc-sqrt, calcFunc-hypot): Add missing quote
	to defalias argument.

	* calc-misc.el (math-fixnump, math-fixnatnump, calcFunc-trunc)
	(calcFunc-floor): Ditto.

	* calc-units.el (calcFunc-usimplify): Ditto.

	* calc-aent.el, calc-ext.el, calc-incom.el, calc-misc.el
	* calc-sel.el, calc-vec.el, calc-alg.el, calc-fin.el
	* calc-keypd.el, calc-mode.el, calc-stat.el, calc-yank.el
	* calc-arith.el, calc-forms.el, calc-lang.el, calc-mtx.el
	* calc-store.el, calc.el, calc-bin.el, calc-frac.el, calc-macs.el
	* calc-poly.el, calc-stuff.el, calcalg2.el, calc-comb.el
	* calc-funcs.el, calc-maint.el, calc-prog.el, calc-trail.el
	* calcalg3.el, calc-cplx.el, calc-graph.el, calc-map.el
	* calc-rewr.el, calc-undo.el, calccomp.el, calc-embed.el
	* calc-help.el, calc-math.el, calc-rules.el, calc-units.el
	* calcsel2.el: Change all toplevel `setq' forms to `defvar' forms,
	and move them before their first use.  Use `when', `unless'.
	Remove trailing periods from error forms.  Add description and
	headers suggested by Emacs Lisp coding conventions.

2001-11-19  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-indent):
	Fix misindentation for comment-only lines.
	(comment-indent-new-line): Only obey comment-multi-line if the
	comment-ender is not the end-of-line.

2001-11-19  Richard M. Stallman  <rms@gnu.org>

	* net/net-utils.el (network-connection-service-abbrev-alist):
	New variable.

	* emacs-lisp/cl-indent.el (lisp-indent-defmethod):
	Advance to start of 3rd sexp by moving fwd and backing over it.
	At first three elements, act like defun.

	* delsel.el (delete-selection-pre-hook): Handle and resignal
	file-supersession errors to interact properly with userlock.el.

2001-11-18  Richard M. Stallman  <rms@gnu.org>

	* progmodes/fortran.el (fortran-mode-syntax-table):
	Specify punctuation syntax for backslash.

	* progmodes/sh-script.el (sh-must-be-shell-mode): Function deleted.
	All calls deleted.

	* international/mule-util.el (string-to-sequence): Make it obsolete.
	(string-to-list, string-to-vector): Implement them directly
	using append and vconcat, not with string-to-sequence.

	* startup.el (command-line): Set abbrevs-changed to nil after
	reading the init file and the abbrevs file.

	* isearch.el (isearch): Use magenta2 as bg for (background light)

2001-11-17  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-update-buffers-1): Don't pad the buffer name.

	* simple.el (minibuffer-history-sexp-flag): Doc fix.

2001-11-17  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-compile-keywords): New arg `regexp'.
	If set and if applicable, add a regexp to highlight defun-like
	text inside comments and strings.
	(font-lock-fontify-keywords-region): Pass that new arg.
	(font-lock-set-defaults): Move the code to set `font-lock-keywords'
	to the end and pass that new arg.
	(c-font-lock-keywords-2): Fix regex for labels.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next):
	Make it work when LIMIT is several lines further.
	(c-font-lock-keywords-3, c++-font-lock-keywords-3)
	(objc-font-lock-keywords-3, java-font-lock-keywords-3):
	Use backquote and make the regexes for `int a, b, c;' work on
	multiple lines.

	* emacs-lisp/re-builder.el (reb-mode): Use define-derived-mode.
	(font-lock-defaults-alist): Don't change it any more.
	(reb-subexp-mode-map): Cleanup.

	* custom.el (custom-current-group-alist): New var.
	(custom-declare-group): Set it.
	(custom-current-group): New fun.
	(custom-declare-variable, custom-handle-all-keywords):
	Use it as a default if no :group argument is specified.

	* international/mule-cmds.el (locale-name-match): Use \` and \(?:.
	(standard-keyboard-coding-systems): New var.
	(set-locale-environment): Use it to decide whether or not to call
	set-keyboard-coding-system.
	(locale-language-names): Use \"French\" for "fr".

2001-11-17  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/checkdoc.el (princ-list, checkdoc-read-event)
	(add-to-list): Delete compatibility code.
	(checkdoc-next-message-error): Doc fix.

2001-11-17  Stephen Eglen  <stephen@gnu.org>

	* locate.el (locate): Show default locate pattern within the
	prompt, but don't insert it into the minibuffer contents.
	Catch the case when pattern is the empty string.

2001-11-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* language/european.el ("French"): New language environment.

2001-11-16  Richard M. Stallman  <rms@gnu.org>

	* calendar/todo-mode.el (todo-save): Fix previous change.

	* subr.el (functionp): Do use cdr-safe on object.

2001-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* bindings.el (mode-line-mode-name): Only put the help-echo property
	if the local-map property was put as well.
	(global-map): Bind switch-frame, delete-frame, iconify-frame
	and make-frame-visible events.

	* emacs-lisp/elp.el (elp-not-profilable): New var.
	(elp-not-profilable-p): New function.
	(elp-instrument-function): Use it.  Use backquotes and push.

	* emacs-lisp/bytecomp.el (byte-compile-call-tree, byte-code-vector)
	(byte-stack+-info, byte-compile-last-warned-form)
	(byte-compile-last-logged-file): Don't defconst a variable.
	(no-byte-compile): Declare.
	(byte-compile-file): Don't boundp-check no-byte-compile any more.
	(byte-compile-defvar): Leave defconst as is.

	* emacs-lisp/edebug.el (edebug-form-data, edebug-offsets)
	(edebug-offsets-stack, edebug-read-dotted-list, edebug-def-name)
	(edebug-current-offset, edebug-old-def-name, edebug-error-point)
	(edebug-best-error): Don't defconst a variable.
	(edebug-read-syntax-table): Use a char-table.
	(edebug-lemacs-specific): Remove.
	Toplevel: Eliminate check for Lucid Emacs.

	* pcvs-util.el (cvs-prefix-define): Don't defconst a variable.

	* rect.el (move-to-column-force): Mark obsolete.
	(operate-on-rectangle, delete-extract-rectangle-line)
	(insert-rectangle, delete-whitespace-rectangle-line)
	(open-rectangle-line, clear-rectangle-line): Use move-to-column.
	(string-rectangle-history): New var.
	(string-rectangle, string-insert-rectangle): Use it.
	(delete-rectangle-line): Fix pos/column mixup and simplify.

	* startup.el (normal-top-level-add-subdirs-to-load-path): Simplify.
	(normal-top-level, command-line, command-line-1): Simplify.

	* tar-mode.el (tar-mode): Use define-derived-mode.

	* view.el (view-mode-enable): Don't use make-local-hook.

	* emacs-lisp/eldoc.el (eldoc-mode): Use define-minor-mode.

2001-11-16  Richard M. Stallman  <rms@gnu.org>

	* mail/mail-extr.el (mail-extr-voodoo): Treat a number as a word
	if it doesn't make sense as anything else.
	Don't recognize a "telephone number" at the beginning of the name.
	(mail-extr-leading-garbage): Match non-word characters only.

2001-11-16  Pavel Janík  <Pavel@Janik.cz>

	* startup.el (command-line-processed): Doc fix.

	* apropos.el (apropos-next-label-button): Doc fix.

2001-11-16  Stefan Monnier  <monnier@cs.yale.edu>

	* comint.el (comint-mode): Simplify.
	(make-comint-in-buffer): Run `comint-mode' only if necessary.

	* subr.el (eval-after-load): Make it work with features as well.

	* log-view.el (log-view-mode): Don't mark the buffer unmodified.

	* international/mule-cmds.el (describe-input-method): Setup xref.
	(set-language-environment): Use functionp.
	(locale-language-names, locale-charset-language-names)
	(locale-preferred-coding-systems): Defconst and purecopy.

	* language/european.el (mac-roman): Add mime-charset property.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/cl.el (values, values-list, multiple-value-list)
	(multiple-value-apply, nth-value): Use defsubst rather than defalias
	to get better doc strings.

2001-11-15  Pavel Janík  <Pavel@Janik.cz>

	* derived.el: Fix autoload cookie.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-partial-uncompress): Fix previous change.

2001-11-15  Stefan Monnier  <monnier@cs.yale.edu>

	* menu-bar.el (menu-bar-edit-menu) <copy>: Put an explicit key binding.

2001-11-15  Richard M. Stallman  <rms@gnu.org>

	* dired.el (dired-undo): Display a message to explain
	that this does not undo file system changes.

2001-11-15  David Kastrup  <David.Kastrup@t-online.de>

	* mouse-drag.el (mouse-drag-throw): Push back non-drag events
	into `unread-command-events' instead of trying keymap
	lookups ourselves.  This makes mouse-clicks do the right
	thing even when keymaps of overlays are involved.
	(mouse-drag-drag): Likewise.

2001-11-15  Andreas Schwab  <schwab@suse.de>

	* progmodes/ada-mode.el (ada-add-extensions): Quote regexp special
	characters and append anchor to pattern added to auto-mode-alist.

2001-11-15  Stefan Monnier  <monnier@cs.yale.edu>

	* server.el (server-process-filter): Run pre/post-comment-hook
	before/after visiting the file.

	* info-look.el (makefile-mode): Add info for automake.
	(autoconf-mode): Fix the name of the index for automake.

	* international/latin-9.el: Give pilcrow punctuation syntax.

2001-11-15  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Documentation fixes.

2001-11-14  Stefan Monnier  <monnier@cs.yale.edu>

	* smerge-mode.el (smerge-match-conflict): Fix typo.
	(smerge-diff): Be careful to read match-data early enough.

2001-11-14  Colin Walters  <walters@verbum.org>

	* calc/calc-alg.el (calcFunc-esimplify, calcFunc-simplify)
	(calcFunc-subst): Use `defalias' instead of `fset' and
	`symbol-function'.

	* calc/calc-arith.el (calcFunc-abs, calcFunc-float)
	(calcFunc-ceil, calcFunc-round): Ditto.

	* calc/calc-bin.el (calcFunc-clip): Ditto.

	* calc/calc-ext.el (calcFunc-evalv): Ditto.

	* calc/calc-math.el (calcFunc-sqrt, calcFunc-hypot): Ditto.

	* calc/calc-misc.el (math-fixnump, math-fixnatnump)
	(calcFunc-trunc, calcFunc-floor, calc-report-bug): Ditto.

	* calc/calc-units.el (calcFunc-unsimplify): Ditto.

	* calc-aent.el, calc-ext.el, calc-incom.el, calc-misc.el
	* calc-sel.el, calc-vec.el, calc-alg.el, calc-fin.el
	* calc-keypd.el, calc-mode.el, calc-stat.el, calc-yank.el
	* calc-arith.el, calc-forms.el, calc-lang.el, calc-mtx.el
	* calc-store.el, calc.el, calc-bin.el, calc-frac.el, calc-macs.el
	* calc-poly.el, calc-stuff.el, calcalg2.el, calc-comb.el
	* calc-funcs.el, calc-maint.el, calc-prog.el, calc-trail.el
	* calcalg3.el, calc-cplx.el, calc-graph.el, calc-map.el
	* calc-rewr.el, calc-undo.el, calccomp.el, calc-embed.el
	* calc-help.el, calc-math.el, calc-rules.el, calc-units.el
	* calcsel2.el: Style cleanup; don't put closing parens on their
	own line, add "foo.el ends here" to each file, and update
	copyright date.

	* README: Update maintainer.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (recompile): Use compilation-arguments if
	set, so as to be able to M-x recompile the exact command which
	created a compilation-mode buffer.

	* progmodes/ada-mode.el (ada-fill-comment-prefix): Doc fix.

2001-11-13  Gerd Moellmann  <gerd@gnu.org>

	* mouse.el (mouse-drag-region): Don't run the up-event
	handler if window start changed due to the down-mouse event.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-show-mark): Either move point to the mark
	or use highlighting, never both.
	(mouse-buffer-menu): If WINDOW is a frame, select its selected window.

2001-11-13  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (top-level): Change maintainer to Simon
	Josefsson, cleanup the smtpmail.el header.

	* mail/smtpmail.el (top-level): Don't require cl or base64.
	(smtpmail-cred-server, smtpmail-cred-port, smtpmail-cred-key)
	(smtpmail-cred-user, smtpmail-cred-cert, smtpmail-cred-passwd):
	Defsubst instead of defmacro.
	(smtpmail-intersection): Return value in reverse order.
	(smtpmail-open-stream): Use stringp instead of string-to-list.
	(smtpmail-open-stream, smtpmail-try-auth-methods): New functions,
	separated from smtpmail-via-smtp.

	* mail/smtpmail.el (top-level): Autoload starttls, mail-utils and
	rfc2104.  Require base64 and cl.
	(smtpmail-smtp-service): Doc fix.  :type fix.
	(smtpmail-debug-info): Doc fix.
	(smtpmail-debug-verb, smtpmail-auth-credentials)
	(smtpmail-starttls-credentials, smtpmail-auth-supported):
	New variables.
	(smtpmail-deduce-address-list, smtpmail-send-it): Don't require
	mail-utils (it is autoloaded).
	(smtpmail-cred-server, smtpmail-cred-port, smtpmail-cred-key)
	(smtpmail-cred-user, smtpmail-cred-cert, smtpmail-cred-passwd)
	(smtpmail-find-credentials, smtpmail-intersection): New utility funs.
	(smtpmail-via-smtp): Support STARTTLS, if binary is installed.
	(smtpmail-via-smtp): Support AUTH.
	(smtpmail-via-smtp): Use `smtpmail-debug-verb' to control VERB.

2001-11-13  Richard M. Stallman  <rms@gnu.org>

	* ebuff-menu.el (electric-buffer-update-highlight): New function.
	(electric-buffer-overlay): New variable.
	(electric-buffer-menu-looper): Call electric-buffer-update-highlight.
	(electric-buffer-list): Likewise.

	* isearch.el (isearch-whitespace-chars): Doc fix.
	(isearch-mode): Handle negative search-slow-window-lines correctly.

2001-11-13  Stefan Monnier  <monnier@cs.yale.edu>

	* newcomment.el (comment-normalize-vars): Handle a nil comment-padding.

	* progmodes/ada-mode.el (ada-fill-comment-prefix): GNAT wants 2 spaces.
	From Emmanuel Briot <briot@act-europe.fr>.

2001-11-13  Colin Walters  <walters@debian.org>

	* calc/calc.el (calc-unread-command): Use `unread-command-events'.

	* calc/calc-mode.el (calc-settings-file-name): Don't hardcode
	"~/.emacs"; use `read-file-name'.

	* calc/calc-graph.el, calc/calc-embed.el, calc/calc-graph.el
	* calc/calc-misc.el, calc/calc-mode.el, calc/calc-prog.el
	* calc/calc-sel.el, calc/calc-store.el, calc/calc-yank.el
	* calc/calc.el: Use `frame-width' instead of `screen-width',
	`frame-height' instead of `screen-height', and,
	`executing-kbd-macro' instead of `executing-macro'.

	* calc/calc-embed.el (calc-do-embedded): Call `y-or-n-p' with
	correct number of arguments.

	* calc/calc-aent.el (calc-do-alg-entry):
	Use `blink-paren-function' instead of `blink-paren-hook'.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* calendar/todo-mode.el (todo-save): Add save-excursion
	and save-restriction.

	* server.el (server-edit, server-done): Doc fix.

	* simple.el (clone-indirect-buffer): Error if major mode symbol
	has a no-clone-indirect property.
	(clone-buffer): Check for obvious errors before reading clone name.

	* info.el (Info-mode): Add a no-clone-indirect property.

2001-11-12  Sam Steingold  <sds@gnu.org>

	* vc.el (vc-print-log): Bind `inhibit-read-only' to t before and
	set-buffer-modified-p to nil after `vc-exec-after'.
	* log-view.el (log-view-mode-map): Bind "q", "z", "m" and "d".
	(log-view-mode): Make read-only.
	(log-view-current-file): Do final `expand-file-name' in the
	current `default-directory'.
	(log-view-current-tag): Take an optional `where' arg.
	(log-view-diff): New user command.

2001-11-12  Pavel Janík  <Pavel@Janik.cz>

	* progmodes/cpp.el (cpp-choose-face): Fix typo.

2001-11-12  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/cl-indent.el (toplevel): Indent properly
	`generic-flet', `generic-labels', `with-accessors',
	`with-condition-restarts'.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* dired.el: Many trivial doc fixes.
	(dired-get-file-for-visit): New function.
	(dired-find-alternate-file, dired-mouse-find-file-other-window)
	(dired-view-file, dired-find-file-other-window, dired-display-file)
	(dired-find-file): Use dired-get-file-for-visit.

2001-11-12  Alex Schroeder  <kensanata@yahoo.com>

	* sql.el (sql-mode): Doc change.

	* sql.el (sql-mode-syntax-table): The backslash is no longer an
	escape character.

2001-11-12  Colin Walters  <walters@debian.org>

	* calc/calc-keypd.el (toplevel): Bind mouse buttons.
	(calc-do-keypad): Don't attempt to use nonexistent global
	mouse-map, use calc-keypad-map.
	(calc-keypad-x-left-click): Renamed to calc-keypad-left-click.
	(calc-keypad-left-click): Don't use mouse-map; update to new event
	interface.
	(calc-keypad-x-middle-click, calc-keypad-x-right-click): Ditto.
	(calc-keypad-press): Use `unread-command-events' instead of
	`unread-command-char'.

	* calc/calc-ext.el (calc-init-extensions): Update autoload names
	to match files renamed on initial calc import.

2001-11-12  Pavel Janík  <Pavel@Janik.cz>

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Fix previous change.

2001-11-12  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Fix custom type.

2001-11-11  Richard M. Stallman  <rms@gnu.org>

	* calendar/solar.el (solar-sunrise-and-sunset):
	Exchange the two extreme values of day-length.

	* progmodes/sh-script.el (sh-must-be-shell-mode):
	Allow modes derived from sh-mode.

	* emacs-lisp/checkdoc.el (checkdoc-file-comments-engine):
	Turn off error in some re-search-forward calls.

	* replace.el (query-replace-skip-read-only): New variable.
	(perform-replace): If that variable is non-nil, ignore matches
	that have a read-only property.

	* derived.el (define-derived-mode): Doc fix.

	* server.el (server-buffer-done): Test of server-existing-buffer
	was backwards.
	(server-existing-buffer): Doc fix.

	* textmodes/flyspell.el (flyspell-default-dictionary):
	Allow nil as value, and make nil the default.

2001-11-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* menu-bar.el (menu-bar-edit-menu): Don't use x-selection-exists-p if
	it is not fboundp.
	(clipboard-yank): Ditto.

2001-11-11  Colin Walters  <walters@verbum.org>

	The following changes are based on patches from
	Eli Zaretskii <eliz@is.elta.co.il>, Kai Großjohann
	<Kai.Grossjohann@CS.Uni-Dortmund.DE>, and others.

	* calc/calc.el (toplevel): Require calc-macs.
	(calc-minibuffer-size): New.
	(calcDigit-nondigit): Use it instead of `buffer-size'.
	(calcDigit-backspace): Likewise.
	(calcDigit-nondigit): Use `minibuffer-contents' instead of
	`buffer-string'.
	(calc-minibuffer-contains): Use `minibuffer-prompt-end' instead of
	`point-min'.
	(calcDigit-key): Use `calc-minibuffer-contains' instead of a
	`save-excursion'.

	* calc/calc-macs.el (calc-record-compilation-date-macro): Return a
	simple `setq' form.

	* calc/calc-ext.el (toplevel): Require calc.
	(calc-fancy-prefix-map): New.
	(calc-fancy-prefix): Use it.
	(calc-fancy-prefix-other-key): New.

	* calc/calc-aent.el (toplevel): Require calc-macs during compilation.
	(calc-do-quick-calc): Use `frame-width' instead of `screen-width'.
	(calcAlg-edit): Use `minibuffer-contents' instead of `buffer-string'.
	(calcAlg-enter): Likewise.
	(calcAlg-enter): Use `minibuffer-prompt-end' instead of `point-min'.

2001-11-10  Richard M. Stallman  <rms@gnu.org>

	* abbrev.el (read-abbrev-file): Don't set save-abbrevs.
	(quietly-read-abbrev-file): Doc fix.

	* startup.el (command-line): Read standard abbrev
	file (abbrev-file-name), if it exists.

	* files.el (save-abbrevs): Default value is t.

	* progmodes/compile.el (compile-goto-error): Fix previous change
	in the case where subsequent errors have not been parsed yet
	because they are in a different source file.

2001-11-10  Peter Kleiweg  <kleiweg@let.rug.nl>

	* progmodes/ps-mode.el (ps-mode-font-lock-keywords-1):
	Merge two regular expressions into one.
	(ps-mode): Make local bindings for `comment-start' and
	`comment-start-skip'.
	(ps-mode-looking-at-nested): Simplify an if-else construct;
	use `set-match-data' to set the result.

2001-11-10  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-correct-word/local-keymap):
	Function deleted.
	(flyspell-correct-word): Old definition deleted.
	(flyspell-correct-word/mouse-keymap): Renamed to flyspell-correct-word.
	All references renamed too.

2001-11-10  Gerd Moellmann  <gerd@gnu.org>

	* Makefile.in (finder_setwins, setwins): Exclude Calc.

2001-11-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (checklist): Removed `:menu-tag'.
	(radio-button-choice): Ditto.
	(editable-list): Ditto.

2001-11-09  Pavel Janík  <Pavel@Janik.cz>

	* play/gomoku.el: Move definitions of constants to the beginning
	of file, before their use.

2001-11-09  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el: Use the keymap property
	instead of local-map, and don't use a minor-mode map.
	(flyspell-mode-map): Variable deleted.
	Don't mess with minor-mode-map-alist.
	(calling add-minor-mode): Specify nil for keymap.
	And always use add-minor-mode, now that it exists.
	(flyspell-overlay-keymap-property-name): Set it to `keymap'.
	(flyspell-mode-on): Don't locally bind flyspell-mouse-map
	or flyspell-local-mouse-map.
	(make-flyspell-overlay): Use flyspell-mouse-map directly.
	(flyspell-mode): Doc fix.
	(flyspell-mode-on): Don't call make-local-hook.

2001-11-09  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs):
	Add buttons to all symbols.

2001-11-09  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Add John David Smith to credits.

	Suggested by Kalle Olavi Niemitalo <kon@iki.fi>:

	* vc-hooks.el (vc-error-occurred): Backquotified.
	(vc-file-prop-obarray): Use prime length for better efficiency.

	* vc.el (vc-clear-context): Fill obarray with 0, not nil.

2001-11-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-file-list-for-emacs): Add entries for Calc.

2001-11-09  Miles Bader  <miles@gnu.org>

	* subr.el (functionp): Don't consider macros as functions.

2001-11-08  Miles Bader  <miles@gnu.org>

	* subr.el (functionp): Make work correctly for macros and unbound
	symbols.

	* comint.el (comint-send-input): Fix description of
	`comint-process-echoes' in the doc-string.

2001-11-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule.el (make-translation-table): Doc fix.
	Suggested by Alex Schroeder <alex@gnu.org>.

2001-11-07  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-fontify-node): Highlight every third menu item.

2001-11-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-face-value-create): Don't ignore the
	`customized-face' attribute when finding the current face spec.

2001-11-07  Stefan Monnier  <monnier@cs.yale.edu>

	* subr.el (with-local-quit): New macro.
	(make-syntax-table): Always inherit.
	(functionp): Be more careful when `object' is a symbol.

	* dabbrev.el (dabbrev-completion): Use "*Completions*".

2001-11-07  Paul Eggert  <eggert@twinsun.com>

	* dired.el (dired-move-to-filename-regexp):
	Do not distinguish between ASCII letters and non-ASCII characters.
	Don't allow comma except in the form "month day, year".
	Don't allow space between month name and comma.
	Clean up the code that checks for trailing period, comma, and space.
	Remove now-obsolete comments, and add more commentary about
	Japanese dates.
	Always gobble up trailing spaces, instead of doing it only sometimes.

2001-11-07  Miles Bader  <miles@gnu.org>

	* paren.el (show-paren-match-face): Add dark-background variant.

2001-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression): Paren typo.
	(lisp-mode-variables): Don't set paragraph-{start,separate}.
	Don't disable adaptive-fill-mode.
	(lisp-fill-paragraph): Use tab-width rather than 8.
	Prevent filling the first line of docstrings.

2001-11-06  Richard M. Stallman  <rms@gnu.org>

	* play/gomoku.el (gomoku): Doc fix.

	* jka-compr.el (jka-compr-partial-uncompress):
	Support an alternative of not using dd.
	(jka-compr-dd-program): Use defcustom to define this.
	(jka-compr-load-suffixes): Use defcustom.
	(jka-compr-mode-alist-additions): Use defcustom.

2001-11-06  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el (font-lock-match-c-style-declaration-item-and-skip-to-next):
	Also work when LIMIT is further than the end of line.

2001-11-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/quail.el (quail-update-leim-list-file): Print the
	offending file name if some of its quail-define-package forms is broken.

2001-11-05  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-last-sexp-1): Return the value
	of the evaluated form.

2001-11-05  Paul Eggert  <eggert@twinsun.com>

	* ls-lisp.el (ls-lisp-time-to-seconds): New function.
	(ls-lisp-format-time): Emulate GNU fileutils 4.1.1 ls, whose time
	stamps always line up by default.  Also, it uses a slightly
	different window to determine whether files are "recent".

2001-11-05  Andrew Innes  <andrewi@gnu.org>

	* makefile.w32-in (bootstrap-clean-CMD, bootstrap-clean-SH):
	Don't attempt to remake autoloads before nuking .elc files.

2001-11-04  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display): Cope if
	previous-single-property-change or next-single-char-property-change
	returns nil.

	* international/mule-cmds.el (set-locale-environment):
	Make it interactive; make arg optional.

	* international/mule-diag.el (help-funs): Require help-funs.

2001-11-04  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/internal.el (term-setup-hook): Add IT-setup-unicode-display.

2001-11-04  Miles Bader  <miles@gnu.org>

	* startup.el (fancy-splash-head): Reapply Gerd's hack to make the
	shadow of the splash image gray on a dark background instead of black.

2001-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* term.el (all faces): Don't (copy-face 'default <foo>).

	* term/xterm.el (function-key-map):
	Add entry for `ESC [ 3 ~' -> <delete>
	Add entries `ESC O 5 [ABCD]' -> C-{up,down,right,left}.
	Use inheritance so that .emacs and terminfo take precedence.

2001-11-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* tooltip.el (tooltip-delay): Decrease to 0.7.
	(tooltip-hide-delay): Enlarge to 10.

2001-11-03  Richard M. Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-tail): Explain how to recover
	from a crash, if there was a crash.
	(command-line-1): Reorganize display of startup screen,
	to simplify the logic.  Use a temp buffer for it.

2001-11-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* frame.el (set-background-color, set-foreground-color):
	Call face-set-after-frame-default, to propagate the new colors to
	the frame's parameters alist.

	* calendar/timeclock.el (timeclock-out): Signal an error if
	timeclock-last-event is nil.

2001-11-02  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (fill-context-prefix): Fix braino.

	* international/quail.el (quail-help):
	Use `help-buffer' and move `help-setup-xref' to beginning.

	* international/mule-cmds.el (describe-language-environment):
	Use `help-buffer' and move `help-setup-xref' to beginning.

	* international/mule-diag.el (list-character-sets)
	(sort-listed-character-sets, describe-character-set)
	(describe-coding-system, describe-fontset, list-fontsets):
	Use `help-buffer' and move `help-setup-xref' to beginning.
	(describe-char-after): Use `internal-describe-syntax-value'.

2001-11-02  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (popup-menu): If the user refuses to select
	from a menu, don't try to invoke the menu.

2001-11-02  Miles Bader  <miles@gnu.org>

	* help-mode.el (help-xref): New button type.
	(help-function, help-variable, help-face, help-coding-system)
	(help-input-method, help-character-set, help-type, help-symbol)
	(help-back, help-info, help-customize-variable, help-customize-face)
	(help-function-def, help-variable-def): Use it as a supertype.
	Remove `action' property.

	* international/mule-diag.el (describe-character-set)
	(describe-coding-system): Pass correct args to `help-xref-button'.
	(sort-listed-character-sets): New button type.
	(list-character-sets): Use it.
	(list-charset-chars): New button type.
	(list-character-sets-1): Use it.

2001-11-01  Stefan Monnier  <monnier@rum.cs.yale.edu>

	* indent.el (tab-always-indent, indent-for-tab-command):
	Remove redundant `never' setting.

	* fill.el (fill-region-as-paragraph): Don't forget to skip
	over current whitespace before looking for a preceding space.

2001-11-01  Richard M. Stallman  <rms@gnu.org>

	* files.el (file-newest-backup): Don't pass backup file name
	thru file-name-sans-versions, because it never has version numbers.

	* textmodes/sgml-mode.el (sgml-xml-guess): Fix regexp
	to avoid ambiguous nested loops.

	* files.el (find-file-noselect): Offer to change buffer-read-only
	only when the file's read-only status has changed from before
	as well as disagreeing with the buffer's current status.
	(buffer-file-read-only): New var, local in all buffers.

	* buff-menu.el (buffer-menu): Doc fix.
	(buffer-menu-other-window): Doc fix.
	(list-buffers, list-buffers-noselect): Doc fix.

2001-11-01  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (command-line): If the terminal Emacs is running on
	has erase char set to ^H, use the Backspace key for deleting
	backward, and the Delete key for deleting forward.

2001-11-01  Miles Bader  <miles@gnu.org>

	* button.el (define-button-type): Make sure every user-defined
	button type has a supertype.

2001-10-31  Jason Rumney  <jasonr@gnu.org>

	* international/mule-cmds.el (locale-language-names): Add chs and
	cht as aliases for Chinese-GB and Chinese-BIG5.

2001-10-31  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (mode-line-frame-identification): Add doc string.
	(mode-line-position, mode-line-modes): New variables.
	(mode-line-format): Use mode-line-position for the part
	that displays the position-in-buffer info.
	Use mode-line-modes for the part that displays major and minor modes.

2001-10-31  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs): New function.
	(debugger-setup-buffer): Call it.
	(debugger-mode-map): Bind RET and mouse-2.

2001-10-31  Pavel Janík  <Pavel@Janik.cz>

	* startup.el: Document command line option --no-window-system
	instead of --no-windows.

2001-10-30  David Ponce  <david.ponce@wanadoo.fr>

	* font-lock.el (java-font-lock-syntactic-face-function): New fun.
	(font-lock-defaults-alist): Use it.

2001-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* progmodes/autoconf.el (autoconf-mode): Fix comment-start-skip.

	* progmodes/perl-mode.el (perl-indent-line): Use `eq' to compare
	output of `char-after'.

	* bindings.el (ctl-x-map): Add binding for C-x (, C-x ) and C-x e.

	* simple.el (reindent-then-newline-and-indent): Insert the newline
	before indenting the first line.
	(undo-get-state, undo-revert-to-state): New funs.
	(shell-command): Don't kill the buffer even if empty.
	(transpose-subr-start1, transpose-subr-start2, transpose-subr-end1)
	(transpose-subr-end2): Remove.
	(transpose-subr): Add `special' arg and simplify.
	(transpose-subr-1): Rewrite.
	(do-auto-fill): Use fill-indent-according-to-mode and fill-nobreak-p.
	(rfc822-goto-eoh): Simplify.

2001-10-30  Richard M. Stallman  <rms@gnu.org>

	* enriched.el (enriched-face-ans): Fix previous change.

2001-10-30  Gerd Moellmann  <gerd@gnu.org>

	* international/iso-acc.el (iso-accents-compose): Remove a
	superfluous setq.

2001-10-30  Eli Zaretskii  <eliz@is.elta.co.il>

	* buff-menu.el (list-buffers-noselect): If the buffer's name
	starts with a blank, but it visits a file, do show it (for files
	whose names start with a blank).

2001-10-30  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/fill.el (sentence-end-double-space)
	(sentence-end-without-period): Move to paragraphs.el.
	(fill-indent-according-to-mode): Change default to t.
	(fill-context-prefix): Simplify control-flow and use a more
	sophisticated merge that unifies both previous checks.
	(fill-single-word-nobreak-p, fill-french-nobreak-p): New funs.
	(fill-nobreak-predicate): Make it into a defcustom'd hook.
	(fill-nobreak-p): New fun.
	(fill-region-as-paragraph): Use it.
	Handle `fill-indent-according-to-mode' slightly differently.
	(fill-individual-paragraphs-prefix): Simplify the control-flow.
	(fill-individual-paragraphs-citation): Fix.

	* textmodes/paragraphs.el (use-hard-newlines): Use define-minor-mode.
	(paragraph-start): Change default to the `text-mode' value.
	(sentence-end-double-space, sentence-end-without-period):
	Move from fill.el.
	(forward-paragraph): Use `parstart' and `parsep' for temp variables
	rather than rebinding `paragraph-start' and `paragraph-separate'.

	* indent.el (indent-line-function): Change default to indent-relative.
	(tab-always-indent): Add an `never' setting.
	(indent-according-to-mode): Handle `indent-relative' and
	`indent-relative-maybe' specially.
	(indent-for-tab-command): Rename `prefix-arg' to `arg'.
	Handle the `never' case for `tab-always-indent'.
	Don't call indent-according-to-mode for indent-relative' and
	`indent-relative-maybe'.
	(insert-tab): Rename `prefix-arg' to `arg'.
	(indent-region): Indent the first line as well.
	(indent-relative): Don't mark the buffer modified if the indentation
	is unchanged.

	* textmodes/text-mode.el (paragraph-indent-minor-mode):
	Don't set paragraph-separate.  Set paragraph-start more carefully.
	Set indent-line-function.
	(paragraph-indent-text-mode): Use it and define-derived-mode.
	(text-mode-map): Remove the \t binding.
	(text-mode): Simplify now that the default is more favorable.

2001-10-29  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	If the regexp doesn't match, use a looser one.
	(find-variable-noselect): Add `file' argument.

	* pcvs.el (cvs-mode-commit-hook): New hook.
	(cvs-mode-commit): Run it.

	* log-edit.el (log-edit): Run hook after `log-edit-files'.

	* emacs-lisp/edebug.el (delay-mode-hooks): Add edebug-spec.
	(edebug-instrument-function): Use `find-function-noselect'.

2001-10-29  Richard M. Stallman  <rms@gnu.org>

	* term.el (term-if-emacs19): Macro deleted.
	Callers changed to use progn instead.

	* frame.el (blink-cursor-mode): Doc fix.

	* files.el (find-backup-file-name): Use make-backup-file-name.

	* emacs-lisp/edebug.el (edebug-window-live-p): Always alias to
	window-live-p.
	(edebug-set-conditional-breakpoint): Unconditionally use
	the former Emacs >=19 definition.
	(edebug-mark): Define unconditionally.
	(edebug-eval-expression): Always call read-from-minibuffer
	and specify history list.
	(edebug-lemacs-specific): Override emacs-mark, edebug-window-live-p,
	edebug-set-conditional-breakpoint.
	(edebug-emacs-version-specific): Function deleted;
	do the job at top level.
	(edebug-emacs-19-specific): Function deleted, this is the default.

2001-10-29  Sam Steingold  <sds@gnu.org>

	* w32-fns.el (convert-standard-filename): Handle cygwin-specific
	"/cygdrive/LETTER/" pathnames.

2001-10-29  Eli Zaretskii  <eliz@is.elta.co.il>

	* faces.el (invert-face): Check for 'unspecified, not for nil,
	when testing whether face colors are not specified.
	From David.Kastrup@t-online.de (David Kastrup).
	(read-face-name): Doc fix.
	(make-face-bold, make-face-unbold, make-face-italic)
	(make-face-unitalic, make-face-bold-italic, invert-face):
	Remove trailing blank from the prompt passed to read-face-name.

2001-10-29  Sam Steingold  <sds@gnu.org>

	* emacs-lisp/bytecomp.el (byte-recompile-directory):
	Report numbers of files skipped and failed too.
	(byte-compile-file): Return 'no-byte-compile for skipped files.

2001-10-29  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* log-view.el (log-view-mode-map): Bind `M-n' and `M-p', not `M n'
	and `M p'.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* international/iso-acc.el (iso-accents-compose): Push SECOND-CHAR
	as is on unread-command-events instead of `(SECOND-CHAR)'.

2001-10-29  Andre Spiegel  <spiegel@gnu.org>

	* vc.el: Mention vc-*-switches in backend API documentation.
	(vc-annotate): Adapt doc string to recent change.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* enriched.el (enriched-face-ans): Handle face attributes
	of the form `(FACE1 FACE2 ...)'.

	* dired-x.el (dired-omit-startup): Show ``Omit'' only in Dired buffers.

2001-10-29  Alex Schroeder  <kensanata@yahoo.com>

	* progmodes/sql.el (sql-mysql): Doc change by RMS.

	* progmodes/sql.el (sql-db2): Doc change.
	(sql-help): Doc change by Christian Egli <christian.egli@stest.ch>.
	(sql-mysql): Doc change by Christian Egli <christian.egli@stest.ch>.

2001-10-29  Gerd Moellmann  <gerd@gnu.org>

	* env.el (substitute-env-vars): Don't quote argument to `rx';
	it's a macro.

2001-10-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (recursive-load-depth-limit): Added.

2001-10-28  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (version18p, version20p): Vars deleted.
	All uses removed--assume Emacs version is >= 20.

	* mail/supercite.el (sc-emacs-features): Test for "Emacs 19"
	by really checking that it is not version 18.

	* emacs-lisp/lisp-mode.el (eval-defun): Doc fix.

2001-10-28  Miles Bader  <miles@gnu.org>

	* faces.el (face-attribute): Add INHERIT argument, consider face
	inheritance if it's non-nil.
	(face-attribute-merged-with): New function.
	(face-attribute-specified-or): New macro.
	(face-foreground, face-background, face-stipple): Add INHERIT
	argument.  Use `face-attribute-specified-or'.

2001-10-28  Stefan Monnier  <monnier@cs.yale.edu>

	* font-lock.el: Require `syntax'.
	(font-lock-defaults-alist): Don't define keywords for lisp languages.
	Use `c-font-lock-syntactic-face-function' for c languages.
	(font-lock-mode): Don't unset vars when turning the mode off.
	(font-lock-default-fontify-buffer): Don't unset vars at the end.
	(font-lock-extra-managed-props): New var.
	(font-lock-default-unfontify-region): Use it.
	(font-lock-apply-syntactic-highlight): Flush the syntax cache.
	Don't eval the value when there's no match.
	(font-lock-ppss-stats): New var.
	(font-lock-ppss): New fun.
	(font-lock-fontify-syntactically-region): Use it and syntax.ppss.
	(font-lock-apply-highlight): Allow `highlight' to set several props.
	(font-lock-set-defaults): Use dolist.
	(font-lock-unset-defaults): Remove.
	(font-lock-match-c-style-declaration-item-and-skip-to-next):
	Try to recognize prototypes using `foo P_ ((args))'.
	({c,c++,java,objc}-font-lock-keywords-{1,2,3}): Don't setq a defconst.
	(c-font-lock-keywords-2): Fix last change to still use Anders' trick.
	(c-font-lock-syntactic-face-function): New function.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next)
	(c++-keywords): Use a more sophisticated regexp to handle
	shallowly nested templates.

2001-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-empty-tags): New var.
	(sgml-tag): Use it.  Cleanup with `cond'.
	(sgml-tags-invisible): Make sgml-tags-invisible buffer-local.
	Mark the overlays and only delete those that are marked.
	(sgml-skip-close-p): Remove.
	(sgml-value): Replace sgml-skip-close-p with its definition.
	(html-tag-alist): Use sgml-xml a bit more.
	(html-mode): Set sgml-empty-tags.

	* textmodes/texnfo-upd.el: Use `when', `dolist', `push', ...
	(texinfo-update-node, texinfo-sequential-node-update):
	Don't bind the obsolete `auto-fill-hook'.
	(texinfo-multi-file-included-list,texinfo-multi-file-master-menu-list):
	Use `set-buffer' rather than `switch-to-buffer'.
	(texinfo-multi-file-update): Use "Top" rather than `up-node-name'.
	Use `set-buffer' rather than `switch-to-buffer'.

	* mail/sendmail.el (mail-mode-syntax-table): Let it inherit from
	text-mode-syntax-table.
	(mail-mode): Use define-derived-mode.
	Fix ordering of alternatives in adaptive-fill-regexp.
	(mail-mode-map): Don't rely on keymap's internal representation.

2001-10-27  Sam Steingold  <sds@gnu.org>

	* textmodes/sgml-mode.el (sgml-xml): Renamed from `html-xhtml'.
	(sgml-xml-guess): Extracted from `html-mode' and generalized.
	(sgml-mode-common): Call it.
	(sgml-mode, html-mode): Set `mode-name' based on `sgml-xml'.
	(sgml-tag, sgml-skip-close-p, html-tag-alist, html-line)
	(html-horizontal-rule, html-image, html-ordered-list):
	(html-unordered-list, html-list-item, html-paragraph):
	(html-checkboxes, html-radio-buttons): Use `sgml-xml' instead of
	`html-xhtml'.

2001-10-26  Masayuki Ataka  <ataka@milk.freemail.ne.jp>

	* textmodes/texinfmt.el (texinfo-format-ifnotinfo): New function.
	(ifnothtml): New alias.

2001-10-27  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/text-mode.el (text-mode): Use define-derived-mode.
	(toggle-text-mode-auto-fill): Use derived-mode-p.

2001-10-27  Gerd Moellmann  <gerd.moellmann@t-online.de>

	* net/ange-ftp.el (ange-ftp-send-cmd): Call fix-name-func for
	`mdtm'.  From "Forrest Cahoon" <forrest.cahoon@merrillcorp.com>.

2001-10-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (x-frob-font-slant, x-frob-font-weight):
	Add make-obsolete cookies, to follow faces.el.

	These changes avoid warnings from the byte compiler in faces.el:

	* faces.el (internal-get-face): Use facep instead of the obsolete
	internal-find-face.
	(internal-frob-font-weight, internal-frob-font-slant):
	New defaliases for obsolete functions.
	(x-make-font-bold, x-make-font-demibold, x-make-font-unbold)
	(x-make-font-italic, x-make-font-oblique, x-make-font-unitalic)
	(x-make-font-bold-italic): Use internal-frob-font-weight and
	internal-frob-font-slant aliases instead of the obsolete
	x-frob-... functions.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* textmodes/sgml-mode.el (html-mode): Set `html-xhtml' from the
	DOCTYPE; set `mode-name' based on it.
	(html-tag-alist): Use `html-xhtml' for "li", "dt" and "dd".
	(sgml-tag): Close empty tags in XHTML.

2001-10-26  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (w32-charset-info-alist): Use ANSI for iso10646-1
	when UNICODE is not defined.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* font-lock.el (c-font-lock-keywords-2): Do not require labels to
	be alone on the line.

2001-10-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* button.el (button): Special face definition for MS-DOS terminals.

2001-10-26  Sam Steingold  <sds@gnu.org>

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords):
	Protect the /= test by checking that the args are non-nil.
	(sh-font-lock-close-heredoc): Check eof for being non-nil.

2001-10-26  Tomas Abrahamsson  <tab@lysator.liu.se>

	* textmodes/artist.el (artist-version): 1.2.4.
	(artist-butlast-fn): New variable.
	(artist-butlast): New function.
	(artist-ellipse-mirror-quadrant): Use it.
	(artist-mouse-draw-poly): Use nil for `point-list'.
	(artist-mouse-draw-poly): Check for point-list being nil.

2001-10-26  Peter Kleiweg  <kleiweg@let.rug.nl>

	* progmodes/ps-mode.el (ps-mode-print-function): Remove quote for
	lambda expression.
	(ps-mode-menu-main): Submenu with options on/off was replaced with
	a toggle button.
	(ps-mode, ps-run-mode): Define with `define-derived-mode'.
	(ps-mode): Autoload cookie added on same line as comment.
	(ps-mode-tabkey, ps-mode-backward-delete-char):
	(ps-mode-r-balance): Replace `delete-horizontal-space' and
	`indent-to' with `indent-line-to'.
	(ps-mode-print-buffer, ps-mode-print-region): Use `funcall'
	instead of `eval'.
	(ps-mode-print-region): Use `with-temp-buffer'.
	(ps-run-start): Use of `mapconcat'.  Use `apply' instead of `eval'.
	(numerous places): Add back-tick and tick around names in
	docstrings, fix punctuation in docstrings, remove trailing spaces.

2001-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1): Ignore comments.
	(sgml-font-lock-keywords-2): Use `eval'.  Moved from sgml-mode-common.
	(sgml-font-lock-syntactic-keywords): New var.
	(sgml-mode-common): Drop the two args.
	Don't make buffer-local variables that aren't used.
	Don't set sgml-font-lock-keywords-2 now that it uses `eval instead.
	Don't set `before-string' props from sgml-display-text.
	(sgml-mode): Use define-derived-mode.
	(sgml-tags-invisible): Use sgml-display-text.
	(sgml-quote): New command.
	(html-tag-alist): Add args for `span'.
	(html-mode): Use define-derived-mode.
	Set sgml-display-text and sgml-tag-face-alist.

2001-10-25  Sam Steingold  <sds@gnu.org>

	* add-log.el (add-log-always-start-new-record): New user option.
	(add-change-log-entry): Use it.

2001-10-25  Richard M. Stallman  <rms@gnu.org>

	* progmodes/etags.el (tags-query-replace): Make tags-loop-scan
	bind case-fold-search if FROM is not all lower case.

2001-10-25  Gerd Moellmann  <gerd@gnu.org>

	* startup.el (normal-top-level): Check for frame-initial-frame
	only if it's really used.

	* mail/mh-utils.el (mh-recenter): Call recenter with arg `(4)'.

	* progmodes/compile.el (compilation-parse-errors-filename-function):
	New variable.
	(compilation-parse-errors): Use it.

2001-10-25  Stefan Monnier  <monnier@cs.yale.edu>

	* emacs-lisp/checkdoc.el (checkdoc-eval-defun): Call eval-defun
	interactively so that C-u M-C-x still does edebug.
	(checkdoc-sentencespace-region-engine): Don't force a double-space
	after `.' if it doesn't look like an end-of-sentence.
	(debug-ignored-errors): Add `disambiguate ...'.

2001-10-24  Stefan Monnier  <monnier@cs.yale.edu>

	* textmodes/texinfo.el (texinfo-environments)
	(texinfo-environment-regexp): Hoist.
	(texinfo-font-lock-keywords): Use `italic' and `bold' faces.
	Only highlight the menu name in menu items.
	Setup `@foo ... @end foo' as text clones.
	(texinfo-clone-environment): New function.
	(texinfo-mode): Simplify auto-fill-inhibit-regexp.
	(texinfo-insert-block): Simplify.
	(texinfo-insert-quote): Insert a plain " if preceded by \ or if
	the command is repeated.
	(texinfo-last-unended-begin, texinfo-next-unmatched-end): New funs.
	(texinfo-insert-@end): Simplify.

	* textmodes/texnfo-upd.el (texinfo-section-types-regexp)
	(texinfo-section-level-regexp, texinfo-subsection-level-regexp)
	(texinfo-subsubsection-level-regexp)
	(texinfo-update-menu-same-level-regexps)
	(texinfo-update-menu-higher-regexps)
	(texinfo-update-menu-lower-regexps): Hoist to eliminate warnings.

	* derived.el (define-derived-mode): Use {delay,run}-mode-hooks.
	(derived-mode-p): Autoload.

	* subr.el (delay-mode-hooks, delayed-mode-hooks, run-mode-hooks):
	New vars and functions.
	(text-clone-maintain, text-clone-create): New functions.

2001-10-25  Miles Bader  <miles@gnu.org>

	* facemenu.el (facemenu-add-new-face): Fix variable names.

2001-10-24  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-unlisted-faces): Improve doc strings
	of t and nil values.
	(facemenu-set-face): Handle START and END interactively.
	(facemenu-set-foreground): Don't use a face; specify color directly.
	(facemenu-set-background): Likewise.
	(facemenu-set-face-from-menu): Doc fix.
	(facemenu-active-faces): Use face-attribute-vector
	to handle bare attributes not in faces.
	(facemenu-get-face): Don't handle face names fg:... and bg:...
	specially.
	(facemenu-add-new-face): New argument MENU.
	New way to handle adding colors to the color menus.

	* env.el (substitute-env-vars): Quote the arg to rx.

2001-10-24  Sam Steingold  <sds@gnu.org>

	* mouse.el (mouse-buffer-menu-mode-groups): Added "Version
	Control" and "SGML" groups.

2001-10-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Better handling of C++ template args to avoid confusion with `<'
	and `>' used as operators in member init expressions.

2001-10-24  Gerd Moellmann  <gerd@gnu.org>

	* replace.el (perform-replace): Move START and END parameters
	to the end of the argument list and make them optional.

	* progmodes/ebrowse.el, progmodes/etags.el: Adapt to change in
	perform-replace.

	* international/fontset.el (x-must-resolve-font-name): New function.
	(x-complement-fontset-spec): Use it.

2001-10-23  Stefan Monnier  <monnier@cs.yale.edu>

	* uniquify.el (uniquify-get-proposed-name): Fix (.. "usr" "/usr" 0).

	* progmodes/compile.el (compile-mouse-goto-error, compile-goto-error):
	Turn caadr into caar of cdr.

2001-10-23  Gerd Moellmann  <gerd@gnu.org>

	* info.el (Info-fontify-node): Bind down-mouse-{1,2} instead
	of mouse-{1,2} since dragging is on the down event.

	* play/doctor.el (make-doctor-variables): Remove a '($ please)'.

	* mail/mh-utils.el (mh-recenter): Call `recenter' with arg t
	if ARG is nil.

	* desktop.el (desktop-last-buffer): New variable.
	(desktop-create-buffer): Set it.
	(desktop-read): Bind it and switch to that buffer.

2001-10-22  Gerd Moellmann  <gerd@gnu.org>

	* progmodes/compile.el (compilation-set-window-height):
	Select old window only if it's still live.

2001-10-22  Pavel Janík  <Pavel@Janik.cz>

	* help-mode.el (help-buffer): Remove debugging code.
	From Stefan Monnier <monnier@cs.yale.edu>.

2001-10-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (file-name-sans-extension, file-name-extension):
	Don't count the leading dots in file names as signaling an extension.

2001-10-22  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-switches): Doc rewritten.

2001-10-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* tooltip.el (tooltip-set-param): Doc fix.

	* textmodes/sgml-mode.el (sgml-mode-map): Bind 8-bit codes above
	127 to sgml-maybe-name-self.
	(sgml-name-8bit-mode): Doc fix.
	(sgml-char-names-table): New variable.
	(sgml-name-char): Support non-ASCII and mule-unicode-*
	characters.  Doc fix.
	(sgml-maybe-name-self): Convert unibyte characters to multibyte.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): Mention in the
	doc string the effect of `left' and `top' parameters in
	tooltip-frame-parameters, the default values, and the units.
	(tooltip-frame-parameters): Mention `top' and `left' in the doc string.
	(tooltip-show): Mention in the doc string the `top' and `left'
	parameters in tooltip-frame-parameters, and x-max-tooltip-size.

2001-10-22  Andre Spiegel  <spiegel@gnu.org>

	Add autoscaling support for vc-annotate.
	From J.D. Smith <jdsmith@alum.mit.edu>.

	* vc.el (vc-annotate-display-default): Accept colormap scaling
	ratio (now deprecated).
	(vc-annotate-display-autoscale): Added.
	(vc-annotate-add-menu): New autoscaling menu options "Span to
	Oldest" and "Span Oldest->Newest".  Easymenu support added for
	toggle menus driven by customize variable `vc-annotate-display-mode'.
	(vc-annotate-display-select): Added.
	(vc-annotate): Changed temp-buffer-show-function to
	`vc-annotate-display-select'.
	(vc-annotate-display): Removed arguments BUFFER and BACKEND.
	Added argument OFFSET.  Instead of backend function, calls now
	generic `vc-annotate-difference'.
	(vc-annotate-difference): Added as generic function instead of
	backend-specific function.  No longer takes argument POINT, but
	instead accepts a time OFFSET.
	(vc-default-annotate-current-time): Added.

	* vc-cvs.el (vc-cvs-annotate-difference): Removed to generic
	version in vc.el.
	(vc-cvs-annotate-current-time): Added, as override of default.
	(vc-cvs-annotate-time): Added.  Taken mostly from the (now removed)
	`vc-cvs-annotate-difference'.

2001-10-22  Gerd Moellmann  <gerd@gnu.org>

	* saveplace.el (save-place): Require `saveplace'.

	* progmodes/cwarn.el (cwarn-font-lock-feature-keywords-alist):
	Use `sexp' for :value-type instead of `face'.

2001-10-21  Eli Zaretskii  <eliz@is.elta.co.il>

	* mail/rmailsum.el (rmail-summary-font-lock-keywords): Fix the
	regexps due to 5-digit message IDs.

2001-10-21  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (redisplay-dont-pause): Don't set.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Variable removed.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Remove entries for
	`insert', `insert-and-inherit', `insert-before-markers',
	`insert-before-markers-and-inherit', `message', `message-box',
	`message-or-box', `propertize', `format', `encode-time', `append',
	`concat', `vconcat', `nconc', `widget-apply', `make-hash-table',
	`insert-string', `ml-if', `ml-provide-prefix-argument', and
	`ml-prefix-argument-loop'.

2001-10-21  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-internal, vc-coding-system-for-diff)
	(vc-default-diff-tree): New functions.
	(vc-version-diff): Use them.  As a result, coding systems are now
	set up properly for all sorts of diffs, and tree diffs can now
	also be done locally.
	(vc-diff): With a prefix argument, don't require that it's called
	from a buffer under version control.
	(diff-switches): Remove duplicate definition.

	* vc-cvs.el (vc-cvs-diff-tree): New function.

2001-10-21  Miles Bader  <miles@gnu.org>

	* help-funs.el (help-manyarg-func-alist): Remove entries for
	`list', `vector', `make-byte-code', `call-process',
	`call-process-region', `string', `+', `-', `*', `/', `max', `min',
	`logand', `logior', and `logxor'.

	* wid-edit.el (checkbox): Swap bg/fg colors in image, and invert
	image bits to compensate.  Use `make-string' instead of
	`make-bool-vector' (XBM apparently wants byte-aligned rows).

2001-10-20  Kim F. Storm  <storm@cua.dk>

	* simple.el (kill-ring-save): Don't show extent of copied region
	if using transient-mark-mode and region is fully visible.

See ChangeLog.9 for earlier changes.

;; Local Variables:
;; coding: utf-8
;; End:

    Copyright (C) 2001-2012  Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.
