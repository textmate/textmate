2007-04-24  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-shell.el (idlwave-shell-clear-all-bp):
	Don't re-query for each cleared BP.
	(idlwave-shell-clear-bp): Optionally skip BP query.
	(idlwave-shell-update-bp-overlays): Use set-window-margins instead
	of set-window-buffer, which incorrectly moves displayed region.

2007-04-23  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (calc-bug-address): Update maintainer's address.
	* calc/*: Update maintainer's address.

2007-04-23  Richard Stallman  <rms@gnu.org>

	* simple.el (set-mark-command-repeat-pop): Doc fix.
	Put in `editing-basics' group.

2007-04-23  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-mouse-scroll-up, Info-mouse-scroll-down):
	New functions.
	(Info-mode-line-node-keymap): Bind mouse commands to
	Info-mouse-scroll-up/down instead of Info-scroll-up/down.

2007-04-23  Luc Teirlinck  <teirllm@auburn.edu>

	* locate.el (locate-local-prompt): New var.
	(locate-prompt-for-command): Doc fix.
	(locate-prompt-for-search-string): New function.
	(locate): New optional arg.  Make locate-local-prompt
	buffer-local.  Use locate-prompt-for-search-string.
	(locate-with-filter): New optional arg.
	Use locate-prompt-for-search-string.
	(locate-update): Bind locate-prompt-for-command.

2007-04-23  Glenn Morris  <rgm@gnu.org>

	* files.el (magic-mode-alist): `<!DOCTYPE HTML' in html-mode.

2007-04-23  Nick Roberts  <nickrob@snap.net.nz>

	* button.el (button): Inherit from link face on a tty.

2007-04-23  Glenn Morris  <rgm@gnu.org>

	* button.el (button): Use color for this face on a tty.

	* files.el (magic-mode-alist): Allow for carriage-returns in
	html-mode and sgml-mode entries.

2007-04-22  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-globalized-minor-mode):
	Improve doc string of generated command.

	* subr.el (read-number): Catch errors.

	* hi-lock.el (hi-lock-file-patterns-policy): Doc fix.

2007-04-22  Chong Yidong  <cyd@stupidchicken.com>

	* image-dired.el: Rename from thumbnails.el.  All instances of
	"thumbnails" replaced with "image-dired".

	* dired.el (dired-mode-map): Rename "thumbnails" again, to
	"image-dired".

2007-04-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-kill-buffer-at-head, ido-delete-file-at-head):
	Don't use kill-line.

2007-04-22  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el (t-mouse-make-event): Pass on mev's more informative
	error message.

2007-04-22  Chong Yidong  <cyd@stupidchicken.com>

	* dired.el: Rename "tumme" to "thumbnails".

	* thumbnails.el: Rename from tumme.el.  All instances of "tumme"
	replaced with "thumbnails".

2007-04-22  Glenn Morris  <rgm@gnu.org>

	* hi-lock.el (hi-lock-file-patterns-policy): Make it a defcustom,
	and give it the risky-local-variable property.

	* textmodes/flyspell.el (flyspell-define-abbrev): Downcase abbrev
	before defining it.

2007-04-21  Martin Rudalics  <rudalics@gmx.at>

	* progmodes/cc-mode.el (c-remove-any-local-eval-or-mode-variables):
	Use delete-region instead of kill-line.

2007-04-21  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-electric-slash): Replace wrong use of
	`kill-region' by `delete-region'.

2007-04-21  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/perl-mode.el (perl-indent-command): Use delete-region
	instead of kill-region.

	* progmodes/mantemp.el (mantemp-make-mantemps-region)
	(mantemp-insert-cxx-syntax, mantemp-sort-and-unique-lines)
	(mantemp-remove-memfuncs): Use delete-region instead of kill-word
	and kill-line.

	* progmodes/vhdl-mode.el (vhdl-template-type)
	(vhdl-template-record, vhdl-template-nature)
	(vhdl-template-configuration-spec, vhdl-template-component-inst)
	(vhdl-template-break, vhdl-regress-line, vhdl-electric-tab):
	Use delete-region instead of kill-word and kill-line.

2007-04-21  Johan Bockgård  <bojohan@dd.chalmers.se>

	* dired-x.el (dired-virtual-mode): Doc fix.

2007-04-21  Richard Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-keywords-alist): Mark as risky.

	* subr.el (read-number): Doc fix.

	* simple.el (pop-to-mark-command): Display message "mark popped"
	if point does not move.
	(set-mark-command): Doc fix.

2007-04-21  Luc Teirlinck  <teirllm@auburn.edu>

	* locate.el: Revert 2006-09-09 and 2007-04-20 changes.
	(locate-local-filter, locate-local-search): New vars.
	(locate): Make variables local.
	(locate-update): Bind locate-buffer-name.  Call locate using
	locate-local-filter and locate-local-search.

2007-04-20  David Koppelman  <koppel@ece.lsu.edu>

	* hi-lock.el (hi-lock-file-patterns-policy): New var.
	(hi-lock-find-patterns): Use hi-lock-file-patterns-policy.
	(hi-lock-mode): Update docstring.

2007-04-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/fill.el (fill-move-to-break-point): Don't inhibit
	fill-nobreak-predicate when the break is past fill-column.

2007-04-20  Francesco Potortì  <pot@gnu.org>

	* locate.el (locate): Output from shell-command should go in the
	current buffer rather than *Shell Command Output*.

2007-04-20  Chong Yidong  <cyd@stupidchicken.com>

	* paren.el (show-paren-function): Fix last fix.

2007-04-19  Kevin Ryde  <user42@zip.com.au>

	* arc-mode.el (archive-find-type): lzh-exe for lzh self-extracting exe.
	(archive-lzh-summarize): Add optional start arg for where to start
	looking at the archive.
	(archive-lzh-exe-summarize, archive-lzh-exe-extract): New functions.

	* international/mule.el (auto-coding-alist): no-conversion for .exe
	and .EXE.

2007-04-19  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-in-function-trailer-p): Fix this: when a
	function return type contains "struct", "union", etc.
	c-end-of-defun goes too far forward.

2007-04-19  Chong Yidong  <cyd@stupidchicken.com>

	* paren.el (show-paren-function): Reset window-start to avoid
	recentering.

2007-04-19  Glenn Morris  <rgm@gnu.org>

	* calendar/todo-mode.el: Fix typo: "threshhold" -> "threshold".

2007-04-18  Glenn Morris  <rgm@gnu.org>

	* calendar/diary-lib.el (diary-header-line-format): Add a custom
	:set function.
	(diary-list-entries): Only switch to diary-mode from
	default-major-mode (reverts 2007-03-21 change).  Otherwise, if in
	diary-mode set header-line-format, in case of any customization.

2007-04-18  Levin Du  <zslevin@gmail.com>  (tiny change)

	* calendar/parse-time.el (parse-time-string-chars): Check if CHAR
	is less than the length of parse-time-syntax.

2007-04-17  David Kastrup  <dak@gnu.org>

	* replace.el (query-replace-regexp-eval): Deprecate.

2007-04-17  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-beginning-of-defun): With -ve arg and
	point too close to EOB, leave point at EOB rather than last `}'.

2007-04-17  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-include-OPTkey)
	(bibtex-user-optional-fields, bibtex-entry-field-alist):
	Fix defcustom.

2007-04-17  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-dst.el (calendar-dst-find-startend): If YEAR cannot
	be encoded, fall back to current year.

2007-04-14  Kevin Ryde  <user42@zip.com.au>

	* arc-mode.el (archive-lzh-summarize): Only apply the "downcase if
	all upcase" rule to OS-ID 0 "generic".  Always downcase for OS-ID
	M "MSDOS".

2007-04-16  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/python.el (python-end-of-block): Avoid looping forever
	if python-next-statement fails.

2007-04-16  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-entry-field-alist): Use defcustom.

2007-04-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/perl-mode.el (perl-indent-level): Mark as safe local var.
	* progmodes/cperl-mode.el (cperl-indent-level): Likewise.

2007-04-15  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-version): New function.
	(calc-trail-mode): Shorten the title.

2007-04-15  Chong Yidong  <cyd@stupidchicken.com>

	* mail/footnote.el (footnote-style): Clarify docstring to state
	that customizing this only applies to future footnotes.

2007-04-15  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-field-list): Use functionp.
	(bibtex-make-field): Check that INIT is a string.  Use functionp.

2007-04-14  Glenn Morris  <rgm@gnu.org>

	* complete.el (PC-goto-end): New buffer-local variable.
	(PC-do-completion-end): Make buffer-local.
	(partial-completion-mode) <choose-completion-string-functions>:
	Do not go to the end of the minibuffer if PC-goto-end is non-nil.
	(PC-do-completion): New optional fourth argument GOTO-END.  Add a
	doc string.  Set PC-goto-end for choose-completion.
	(PC-lisp-complete-symbol): Pass non-nil GOTO-END arg to
	PC-do-completion.

	* textmodes/bibtex.el (bibtex-insert-kill): Pass non-nil NODELIM
	arg to bibtex-make-field.
	(bibtex-make-field): Add optional fourth arg NODELIM.
	Insert delimiters around INIT unless this arg is non-nil.

2007-04-14  Nick Roberts  <nickrob@snap.net.nz>

	* tmm.el (tmm-get-keybind): Use copy-sequence to ensure that the
	global map isn't modified.

2007-04-14  Glenn Morris  <rgm@gnu.org>

	* calendar/appt.el (appt-disp-window): Do not split small windows.
	Suggested by Jeff Miller <jmiller@cablespeed.com>.

2007-04-13  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-start): Revert 2007-03-25 change.

	* files.el: Ditto.

2007-04-13  Juanma Barranquero  <lekktu@gmail.com>

	* cus-edit.el (minibuffer, auto-save): Fix typos in docstrings.

	* term.el (term-buffer-maximum-size, term-exec, term-escape-char)
	(term-set-escape-char, term-termcap-format, term-get-old-input-default)
	(term-skip-prompt, term-send-string, term-send-region, term-pager-page)
	(term-pager-help): Fix typos in docstrings.

	* wid-edit.el (widget-documentation): Fix typo in docstring.

	* progmodes/ebnf2ps.el (ebnf-insert-style, ebnf-merge-style):
	Fix typos in error messages.

2007-04-13  Martin Rudalics  <rudalics@gmx.at>

	* emacs-lisp/edebug.el (edebug-pop-to-buffer): Don't select
	window marked as dedicated.

	* mail/footnote.el (footnote-latin-string): New variable.
	(footnote-latin-regexp): Redefine as regexp alternative.
	(Footnote-latin): Use footnote-latin-string instead of
	footnote-latin-regexp.

2007-04-13  Glenn Morris  <rgm@gnu.org>

	* tmm.el (tmm-get-keybind): Use car-safe to avoid errors with
	inherited keymaps.

2007-04-12  Chong Yidong  <cyd@stupidchicken.com>

	* outline.el (outline-get-next-sibling): Clarify docstring.
	(outline-get-last-sibling): Handle case where we are at the first
	heading.  Clarify docstring.

2007-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-minor-mode-map): Make go button same
	length as stop button to lessen flicker.
	(jdb): Add gud-print.
	(gud-find-expr): Jdb prints the expression with the value, so
	don't insert it in the output.

2007-04-11  Jason Rumney  <jasonr@gnu.org>

	* dnd.el (dnd-get-local-file-name): Decode both upper and lower
	case hex.  Do not try to decode non-hex letters.

2007-04-11  Markus Triska  <markus.triska@gmx.at>

	* emacs-lisp/byte-opt.el (byte-optimize-backward-char)
	(byte-optimize-backward-word): Remove (move to bytecomp.el).
	(byte-optimize-form-code-walker): Evaluate pure function calls if
	possible.
	(byte-optimize-all-constp): New function.

	* emacs-lisp/bytecomp.el (byte-compile-char-before):
	Improve numeric argument case.
	(byte-compile-backward-char, byte-compile-backward-word):
	New functions, performing rewriting previously done in byte-opt.el.
	Fix their "Fixme" item (restriction to numeric arguments).

2007-04-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* desktop.el (desktop-save, desktop-create-buffer): Replace mapcar
	with dolist.
	(after-init-hook): Don't quote lambda.
	(desktop-first-buffer): Don't wrap it in eval-when-compile.
	(desktop-internal-v2s): Remove unused var `el'.
	(desktop-buffer-major-mode, desktop-buffer-locals): Move out of
	desktop-restore-file-buffer.
	(desktop-buffer-ok-count, desktop-buffer-fail-count): Move out of
	desktop-create-buffer.

2007-04-10  Chong Yidong  <cyd@stupidchicken.com>

	* woman.el (woman-decode-buffer): Postpone macro-set check...
	(woman-decode-region): ...to here.

2007-04-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* startup.el (tty-handle-args): Use %S to log ARGS.

2007-04-10  Glenn Morris  <rgm@gnu.org>

	* dframe.el (dframe-frame-mode): Do not set auto-show-mode, since
	it is obsolete and has no effect.

	* dos-w32.el (default-buffer-file-type): Add defvar to quieten
	byte-compiler.

	* progmodes/cperl-mode.el (cperl-mode): Remove unnecessary call to
	obsolete function make-local-hook.

	* progmodes/dcl-mode.el (top-level): Move (require 'tempo) to
	start to quieten byte-compiler.

2007-04-10  Markus Triska  <markus.triska@gmx.at>

	* emacs-lisp/byte-opt.el (byte-optimize-char-before): Remove (move
	to bytecomp.el as byte-compile-char-before).
	* emacs-lisp/bytecomp.el (byte-compile-char-before):
	New function (modified replacement for byte-optimize-char-before in
	byte-opt.el).

2007-04-09  Alan Mackenzie  <acm@muc.de>

	* startup.el (inhibit-splash-screen): Emphatically state that it
	can't be set in site-start.el.

2007-04-09  Masatake YAMATO  <jet@gyve.org>

	* progmodes/cc-subword.el (c-capitalize-subword): More closely
	mimic the behavior of `capitalize-word'.  Do not move point with a
	negative argument.  Based on tiny change by Paul Curry.

2007-04-09  Paul Curry  <dashteacup@gmail.com>  (tiny change)

	* progmodes/cc-subword.el (c-downcase-subword, c-upcase-subword):
	Don't move point if ARG is negative.

2007-04-09  Alan Mackenzie  <acm@muc.de>

	Changes to make `narrow-to-defun' and `mark-defun' work properly
	in CC Mode:

	* progmodes/cc-defs.el (c-beginning-of-defun-1):
	* progmodes/cc-cmds.el (c-beginning-of-defun, c-end-of-defun):
	Bind beginning/end-of-defun-function to nil around calls to
	beginning/end-of-defun.

	* progmodes/cc-langs.el (beginning-of-defun-function)
	(end-of-defun-function): New c-lang-setvar's.

	* progmodes/cc-awk.el (c-awk-beginning-of-defun): Add "(or arg
	(setq arg 1))" to enable non-interactive call.

2007-04-09  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (set-mark-command): Doc fix.

2007-04-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): Restore existing session if user
	tries to start a second one in graphical mode.

2007-04-08  Martin Rudalics  <rudalics@gmx.at>

	* cus-start.el <scroll-preserve-screen-position>: Add choices.

2007-04-08  Johan Bockgård  <bojohan@dd.chalmers.se>

	* term/xterm.el (terminal-init-xterm): Fix key definitions.
	Add binding for C-M-SPC.

2007-04-08  Richard Stallman  <rms@gnu.org>

	* pcomplete.el (pcomplete-read-event): One single definition,
	and not a defsubst.

2007-04-08  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/cc-cmds.el (c-end-of-defun): Tidy up, to eliminate
	byte-compiler warning "value unused".

2007-04-08  Andreas Schwab  <schwab@suse.de>

	* term/xterm.el (terminal-init-xterm): Add bindings for keypad keys.

2007-04-07  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (diary-font-lock-keywords, diary-live-p):
	Autoload these functions.
	(diary-date-forms): Add a custom :set form.

	* calendar/diary-lib.el (diary-set-maybe-redraw): Move definition
	before first use.
	(diary-font-lock-keywords): New function with old code for
	initialization of variable of same name.

2007-04-07  David Hansen  <david.hansen@gmx.net>  (tiny change)

	* progmodes/cc-cmds.el (c-electric-paren): Fix space-before-funcall
	clean-up: only insert space when on identifier, etc.

2007-04-07  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/grep.el (grep-find-use-xargs): Rewrite docstring.

	* net/tls.el (open-tls-stream): Properly handle case where there
	is no associated buffer.

2007-04-07  Glenn Morris  <rgm@gnu.org>

	* ffap.el (ffap-file-at-point): Lower the priority of the
	ffap-ftp-sans-slash-regexp check.

2007-04-06  Alan Mackenzie  <acm@muc.de>

	Fix fontification of labels, and other things with ":".

	* progmodes/cc-engine.el (c-forward-label): The function now
	returns 'goto-target, 'qt-2kwds-colon, 'qt-1kwd-colon, as well as
	the former t.

	* progmodes/cc-fonts.el (c-font-lock-declarations): Interpret the
	new return code from c-forward-label, fontifying tokens properly.
	Add some general comments throughout the file.

2007-04-06  Chong Yidong  <cyd@stupidchicken.com>

	* textmodes/flyspell.el (flyspell-duplicate, flyspell-incorrect):
	Revert 2006-01-27 change.

	* diff-mode.el (diff-mode): Revert 2007-03-04 change.

	* menu-bar.el (menu-bar-tools-menu): Revert 2003-07-25 change.

	* desktop.el (desktop-create-buffer, desktop-save):
	Revert 2004-11-12 change for lack of copyright papers.

	* dired-x.el (dired-guess-shell-case-fold-search): Delete var.
	(dired-guess-default): Respect case.

	* isearch.el (isearch-forward): Revert 1998-08-26 doc change.

	* emacs-lisp/byte-opt.el (byte-optimize-pure-func): Remove function;
	was originally checked in as byte-optimize-concat on 1997-11-02.

	* mail/sendmail.el (mail-text, mail-mode): Revert extant pieces of
	1995-05-19 doc changes.

2007-04-06  Kim F. Storm  <storm@cua.dk>

	* loadhist.el (read-feature): Reimplement.  New optional arg LOADED-P.
	(unload-feature): Update interactive spec accordingly.

	* progmodes/grep.el (grep-program): Remove commentary about zgrep.

2007-04-06  John Paul Wallington  <jpw@pobox.com>

	* subr.el (with-case-table): Use `make-symbol' to avoid variable
	capture.  Restore the table in the same buffer.

	* font-lock.el (lisp-font-lock-keywords-2): Add `with-case-table'.

2007-04-05  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Print entire form.

2007-04-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (breakpoint-disabled): Tweak face (again)
	for low-color displays.

2007-04-05  Glenn Morris  <rgm@gnu.org>

	* play/5x5.el, play/animate.el, play/dissociate.el, play/doctor.el,
	* play/gomoku.el, play/landmark.el, play/tetris.el, play/zone.el:
	Seed random number generator on loading.

	* emacs-lisp/authors.el (top-level): Provide self.

	* play/animate.el (top-level): Provide self.

2007-04-04  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-vars.el (c-special-indent-hook): Amend doc-string
	to mention c-syntactic-indentation.

2007-04-04  Chong Yidong  <cyd@stupidchicken.com>

	* subr.el (with-case-table): New macro.

	* international/mule.el (ascii-case-table): New var.

	* mail/smtpmail.el (smtpmail-via-smtp): Use ascii-case-table when
	downcasing.

2007-04-03  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-minor-mode-map): Simplify.

	* t-mouse.el (t-mouse-make-event-element): Don't use the left edge
	of the window if we're outside it e.g menu-bar.

	* xt-mouse.el (xterm-mouse-event): Don't use the left edge of the
	window if we're outside it e.g menu-bar.

2007-04-03  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-convert-to-babyl-format): Don't try to
	decode base-64 encoded body if its content-type is something other
	than text/* or message/*.

2007-04-03  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (activate-mark-hook): Fix typo in docstring.

2007-04-03  Nick Roberts  <nickrob@snap.net.nz>

	* tmm.el (tmm-c-prompt): Initialize.
	(tmm-menubar): Deal with extended menu-items at top level.
	(tmm-get-keybind): Handle bindings redefined/undefined locally.
	(tmm-prompt): Handle visibility of top level menu-items.

	* progmodes/gud.el (gud-menu-map): Simplify.
	(gud-minor-mode-map): Add tool-bar like bindings to the text mode
	menubar.

2007-04-02  Chong Yidong  <cyd@stupidchicken.com>

	* mail/smtpmail.el (smtpmail-via-smtp): Revert last change.

	* comint.el (comint-send-input): Widen the buffer first.

	* info.el (Info-fontify-maximum-menu-size): Revert to 100000.

2007-04-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp-mode.el (lisp-fill-paragraph): Only obey
	emacs-lisp-docstring-fill-column in emacs-lisp-mode.

	* newcomment.el (comment-search-forward): Discard comment starters
	before point.

2007-04-01  Guanpeng Xu  <herberteuler@hotmail.com>

	* mouse.el (mouse-set-secondary): Update mouse-secondary-overlay.

2007-04-01  Chong Yidong  <cyd@stupidchicken.com>

	* mail/smtpmail.el (smtpmail-via-smtp): Use standard case table
	when downcasing.

	* button.el (previous-button): Rewrite to account for adjacent buttons.

2007-04-01  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el (idlwave-auto-fill):
	Revert paragraph-separate change.

	* progmodes/idlw-shell.el (idlwave-shell-break-in):
	Simplify module calc.
	(idlwave-shell-set-bp-in-module): Compute module.

2007-03-31  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/timer.el (run-at-time): Doc fix.

	* emacs-lisp/warnings.el (display-warning): If we create the
	buffer displaying the warning, disable undo there.

2007-03-31  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-register-file-name-handler)
	(tramp-register-completion-file-name-handler): New defsubst,
	derived from `tramp-register-file-name-handlers'.  The split is
	necessary because Tramp's file name handlers must be registered at
	different startup places.

2007-03-31  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/hideshow.el (turn-off-hideshow): New function.
	(hs-minor-mode): Use it instead of a lambda expression in
	change-major-mode-hook.

2007-03-31  David Kastrup  <dak@gnu.org>

	* woman.el (woman-Cyg-to-Win): Don't convert cons cells
	corresponding to MANPATH_MAP entries.
	(woman-man.conf-path, woman-parse-man.conf): Doc fix.
	(woman-parse-man.conf): Use more discriminating man.conf name.
	(woman-parse-man.conf): Parse MANPATH_MAP entries.
	(woman-manpath): Doc fix and type fix.
	(woman-cached-data): Check for MANPATH_MAP entries.
	(woman-expand-directory-path): Treat MANPATH_MAP entries.

2007-03-31  Stuart Herring  <herring@lanl.gov>

	* emacs-lisp/sregex.el (sregexq): Doc fix.

2007-03-31  Markus Triska  <markus.triska@gmx.at>

	* progmodes/flymake.el (flymake-err-line-patterns): Doc fix.

2007-03-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* info.el (info-tool-bar-map): Use "exit" for Info-exit.
	Move to the right.

2007-03-30  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-forward-to-nth-EOF-}): Fix EOB bug.

2007-03-30  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--insert-new-node): Take additional arg DLL.
	Use it, passed in explicitly, instead of from the dynamic binding.
	(ewoc-create, ewoc-enter-before): Update to use new call sequence.

2007-03-30  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (blink-matching-open): When in minibuffer, don't
	search for a match inside the prompt.

2007-03-30  Nick Roberts  <nickrob@snap.net.nz>

	* tmm.el (tmm-menubar): Select the right menu item with the mouse.
	(tmm-prompt): Don't make the mouse user select the first menu
	item twice.

2007-03-30  Chong Yidong  <cyd@stupidchicken.com>

	* eshell/esh-proc.el (eshell/kill): Tweak regexp to recognize
	SIGUSR1 and SIGUSR2.

2007-03-29  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-internal): When reading file or dir, only override
	minibuffer-local-filename-completion-map, otherwise only override
	minibuffer-local-completion-map.

2007-03-29  Glenn Morris  <rgm@gnu.org>

	* complete.el (partial-completion-mode): Set PC-do-completion-end
	to nil after use.
	(PC-lisp-complete-symbol): Create and use a marker at `end',
	rather than using point-marker.

2007-03-28  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (next-error-highlight): Doc fix.
	(compose-mail): Revert 2007-03-19 change.

2007-03-28  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/edebug.el (edebug-display): Don't go to
	edebug-outside-buffer if it is dead.

2007-03-28  Juanma Barranquero  <lekktu@gmail.com>

	* view.el (view-mode): Fix typos in docstring.

2007-03-28  Stephen Berman  <Stephen.Berman@gmx.net>

	* recentf.el (recentf-save-file): Add a custom :set function.

2007-03-28  Glenn Morris  <rgm@gnu.org>

	* complete.el (PC-do-completion-end): New variable.
	(partial-completion-mode) <choose-completion-string-functions>:
	Use PC-do-completion-end in the non-minibuffer case to replace the
	correct amount of text.
	(PC-do-completion): Set PC-do-completion-end for c-c-s-f.
	(PC-lisp-complete-symbol): Give marker the after-insertion type,
	to deal with improvements inserted after point.

2007-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* button.el (make-text-button): Add explicit `button' property.
	(default-button): Don't put a `button' property on it.

	* progmodes/python.el (python-mode): Skip comments when parsing.

	* vc-arch.el (vc-with-current-file-buffer): New macro.
	(vc-arch-file-source-p): Use it to avoid infloop.

2007-03-28  David Hansen  <david.hansen@gmx.net>  (tiny change)

	* emacs-lisp/lisp.el (lisp-complete-symbol):
	Fix call to get-buffer-window to find windows in other frames.

2007-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* comint.el (comint-proc-query, comint-dynamic-list-completions):
	Fix calls to get-buffer-window to find windows in other frames.
	Reported by David Hansen <david.hansen@gmx.net>.

2007-03-27  Kevin Ryde  <user42@zip.com.au>

	* info.el (Info-display-images-node): On a text-only terminal,
	show the "text" or "alt" parts of the image blobs.

2007-03-27  Glenn Morris  <rgm@gnu.org>

	* complete.el (PC-do-completion): Compute completion-base-size in
	the non-filename case, rather than setting to nil.
	(PC-lisp-complete-end): New variable.
	(PC-lisp-complete-symbol): Use PC-lisp-complete-end to store the
	original end in a series of consecutive invocations.

	* calendar/calendar.el (calendar-mode-hook): Declare it.

	* calendar/diary-lib.el (diary-live-p): Do not check for
	diary-selective-display.

2007-03-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* replace.el (occur-next-error): *Occur* might not be displayed in the
	selected frame.  Reported by David Hansen <david.hansen@gmx.net>.

2007-03-26  Richard Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-large-region):
	Use ispell-call-process-region.

2007-03-26  Johan Bockgård  <bojohan@dd.chalmers.se>

	* emacs-lisp/bytecomp.el (byte-compile-file-form-defmumble):
	Use prin1 instead of princ.

2007-03-25  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (face-set-after-frame-default): Revert 2007-03-10 change.
	Merge in X resources before global face.

	* progmodes/compile.el (compilation-start): Save compilation-directory
	rather than default-directory as local var.
	(compilation-directory): Mark as safe local var.

	* files.el: Don't mark default-directory as a safe local var.

2007-03-25  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-mode.el (c-before-change): Fix BOB bug.
	* progmodes/cc-engine.el: Fix typo.

2007-03-25  Juri Linkov  <juri@jurta.org>

	* compare-w.el (compare-windows): Rename customization group
	`compare-w' to `compare-windows'.
	(compare-windows-whitespace, compare-ignore-whitespace)
	(compare-ignore-case, compare-windows-sync)
	(compare-windows-sync-string-size, compare-windows-recenter)
	(compare-windows-highlight, compare-windows): Change group name in
	the `group' tag from `compare-w' to `compare-windows'.
	(compare-windows-sync): Add option `nil' for no sync.  Doc fix.

2007-03-24  Markus Triska  <markus.triska@gmx.at>

	* expand.el: Change example to always enable abbrev-mode,
	and remove redundant `function'.
	(expand-abbrev-hook): Add autoload cookie.

2007-03-24  Ryan Yeske  <rcyeske@gmail.com>

	* emacs-lisp/testcover.el (testcover-start, testcover-end)
	(testcover-mark-all, testcover-unmark-all): Add prompts to
	interactive specs.

2007-03-24  Jason Rumney  <jasonr@gnu.org>

	* autorevert.el (find-file-hook, auto-revert-tail-mode):
	Use file size in bytes for auto-revert-tail-pos not characters.

2007-03-24  Thien-Thi Nguyen  <ttn@gnu.org>

	* vc-rcs.el (vc-rcs-annotate-command):
	Set text property :vc-annotate-prefix on the annotation text.
	(vc-rcs-annotate-time): Instead of searching for ": ",
	search for end of text propertized with :vc-annotate-prefix.

2007-03-24  Martin Rudalics  <rudalics@gmx.at>

	* whitespace.el (top level): Remove calls putting
	permanent-local nil property since these are no-ops.

	* man.el (Man-support-local-filenames): Assure that
	default-directory exists when doing call-process.

2007-03-23  David Vazquez  <xeos00@gmail.com>  (tiny change)

	* progmodes/m4-mode.el (m4-m4-buffer, m4-m4-region):
	Fix omission bug: Use m4-program-options to construct shell command.

2007-03-23  David Kastrup  <dak@gnu.org>

	* progmodes/cc-mode.el (c-make-emacs-variables-local):
	Use `mapcar' rather than `mapcan' to silence compiler warning.

2007-03-22  Ralf Angeli  <angeli@caeruleus.net>

	* textmodes/reftex.el, textmodes/reftex-vars.el,
	* textmodes/reftex-toc.el, textmodes/reftex-sel.el,
	* textmodes/reftex-ref.el, textmodes/reftex-parse.el,
	* textmodes/reftex-index.el, textmodes/reftex-global.el,
	* textmodes/reftex-dcr.el, textmodes/reftex-cite.el,
	* textmodes/reftex-auc.el: Add maintainer address.

2007-03-22  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-mode, org-table-edit-formulas):
	Make sure that `global-font-lock-mode' does not turn on font-lock
	in these buffers.

2007-03-21  Kim F. Storm  <storm@cua.dk>

	* xt-mouse.el (xt-mouse-epoch): New variable.
	(xterm-mouse-event): Use float-time.

2007-03-21  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Compute a timestamp using
	current-time.

2007-03-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* complete.el (read-file-name-internal): Don't add the final > if the
	completion is not finished (re-application of this patch, which was
	accidentally undone by Eli).

2007-03-21  Chong Yidong  <cyd@stupidchicken.com>

	* emulation/viper.el (viper-non-hook-settings): Handle mouse
	clicks in describe-key and describe-key-briefly advice a little better.

2007-03-21  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-process-filter): Cancel any pending isearch.

2007-03-21  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Increase to 0.15.
	(icalendar--get-unfolded-buffer): Define actual arguments rather
	than just using &rest.  Check replace-in-string is fbound.
	(icalendar-import-buffer): Doc fix.
	(icalendar--convert-ical-to-diary): Set diary-file.
	Check diary-file before inserting final newline.
	(icalendar--add-diary-entry): Return diary-file.

2007-03-21  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (diary-set-maybe-redraw): Autoload it.
	(diary-display-hook): Add custom :set function.

	* calendar/diary-lib.el (diary-header-line-flag): Doc fix.
	Add custom :set function.
	(diary-header-line-format): Doc fix.
	(diary-set-maybe-redraw): New function.
	(number-of-diary-entries): Change :set to use diary-set-maybe-redraw.
	(diary-list-entries): Always run diary-mode.

2007-03-20  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-setup-completion-buf): Make the
	completion buffer read-only.
	(quail-completion): Adjusted for the above change.  Leave the
	modified flag nil.

2007-03-20  David Kastrup  <dak@gnu.org>

	* files.el (magic-mode-alist): Require literal "%!PS" string for
	magic PostScript file detection.

2007-03-20  Richard Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-call-process): New function.
	Defends against bad `default-directory'.
	(ispell-check-version, ispell-find-aspell-dictionaries)
	(ispell-get-aspell-config-value, lookup-words): Call it.
	(ispell-call-process-region): New function.
	(ispell-send-string): Call it.

2007-03-20  Andreas Schwab  <schwab@suse.de>

	* Makefile.in (custom-deps): Depend on $(lisp)/subdirs.el.
	(finder-data): Likewise.
	(autoloads): Likewise.

2007-03-20  Martin Rudalics  <rudalics@gmx.at>

	* files.el (basic-save-buffer): Do not set visited filename when
	the corresponding directory does not exist or the specified
	filename is that of an existing directory.

2007-03-20  Glenn Morris  <rgm@gnu.org>

	* calendar/diary-lib.el (diary-live-p): New function.
	(number-of-diary-entries): Add a :set function to redisplay diary
	when necessary.

2007-03-19  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el (t-mouse-make-event-element): Use timestamp output
	from client program, mev, to compute mouse event.

2007-03-19  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (momentary): Face removed; unused due to reversion of
	2007-01-04 changes by Kevin Rodgers.

	* mouse.el (mouse-drag-track): Remove spurious input-pending-p test.
	Suggested by Johan Bockgård.

2007-03-19  Martin Rudalics  <rudalics@gmx.at>

	* font-lock.el (lisp-font-lock-keywords-1):
	Highlight define-globalized-minor-mode as a keyword.

2007-03-19  Kim F. Storm  <storm@cua.dk>

	* calc/calc-forms.el (math-std-daylight-savings)
	(math-std-daylight-savings-old): Doc fix.

2007-03-19  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/python.el (python-default-template): Doc fix.
	(python-buffer): Fix typo in docstring.

	* isearchb.el (isearchb-follow-char):
	* subr.el (def-edebug-spec): Fix typo in docstring.

2007-03-19  Richard Stallman  <rms@gnu.org>

	* files.el (default-directory): Mark safe.
	(basic-save-buffer-2): Put proper dir name in error message.

	* simple.el (compose-mail): Run switch-function after
	setting up the mail buffer.

	* startup.el (inhibit-splash-screen, initial-major-mode): Doc fixes.

2007-03-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-forms.el (math-parse-date): Fix a regular expression.
	(math-std-daylight-savings-new): Rename from
	`math-std-daylight-savings'.
	(math-std-daylight-savings-old): Rename from old value of
	`math-std-daylight-savings'.
	(math-std-daylight-savings): Use `math-std-daylight-savings-new' or
	`math-std-daylight-savings-old' depending on the year.

2007-03-18  Detlev Zundel  <dzu@gnu.org>

	* emacs-lisp/re-builder.el (reb-update-overlays): Do not mark
	zero-width regexps as invalid but rather at least count them correctly.

2007-03-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/tls.el (open-tls-stream): In handshake-waiting loop,
	don't wait more if there is output available to process.

2007-03-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/compile.el (compilation-find-file): Revert change
	from 2006-07-18 to allow completion of directory names.
	Reported by John Carter <john.carter@tait.co.nz>.

2007-03-18  Kim F. Storm  <storm@cua.dk>

	* subr.el (when, unless): Doc fix.

2007-03-17  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/tls.el (tls-program): Doc fix.

2007-03-17  Denis Bueno  <dbueno@gmail.com>  (tiny change)

	* autorevert.el (auto-revert-tail-handler):
	Call after-revert-hook.

2007-03-17  Ryan Yeske  <rcyeske@gmail.com>

	* simple.el (switch-to-completions): No error if search for \n\n fails.

2007-03-17  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-1):
	Respect `inhibit-line-move-field-capture' property.

2007-03-13  Chong Yidong  <cyd@stupidchicken.com>

	* comint.el (comint-arguments): Mark backslash-escaped chars.
	(comint-delim-arg): Don't treat them as delimiters.

2007-03-12  Kim F. Storm  <storm@cua.dk>
	* ido.el (ido-init-completion-maps): Remap delete-backward-char.

2007-03-12  Lawrence Mitchell  <wence@gmx.li>  (tiny change)

	* tempo.el (tempo-insert): Deal with 'r> if it appears
	specified with a prompt argument.

2007-03-12  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-set-font-lock-defaults):
	Handle narrow table columns correctly.

2007-03-12  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-parse-tag, xml-parse-string, xml-parse-attlist)
	(xml-parse-dtd, xml-parse-elem-type, xml-substitute-special):
	Return to use of the -no-properties variants.  There was
	consensus on emacs-devel that the speed of these variants was
	preferred since we are usually parsing files (from the internet
	or on disk) instead of XML created in Emacs.

	* eshell/esh-mode.el (eshell-handle-ansi-color): New function.
	Add customize option.

2007-03-12  Glenn Morris  <rgm@gnu.org>

	* calc/calc-forms.el (math-std-daylight-savings): Switch to new
	North American rule.  Replace "daylight savings" with "daylight
	saving" in doc.

	* calendar/cal-china.el, cal-dst.el, calendar.el, diary-lib.el:
	* calendar/lunar.el, solar.el: Replace "daylight savings" with
	"daylight saving" in text.

	* woman.el (woman-change-fonts): Tweak previous change by using
	woman-request-regexp rather than "^\\.".

	* startup.el (command-line-1): Make insertion of
	initial-scratch-message not depend on scratch being selected.

2007-03-11  Juri Linkov  <juri@jurta.org>

	* replace.el (match): Use yellow background on light-bg terminals.

2007-03-11  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-warning-prefix):
	Correctly compute line number.

2007-03-11  Guanpeng Xu  <herberteuler@hotmail.com>

	* type-break.el (type-break-get-previous-count):
	Repeat previous change here.

2007-03-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/grep.el (grep-find-ignored-directories):
	Add .git and .bzr to list.

2007-03-11  Andreas Schwab  <schwab@suse.de>

	* diff-mode.el (diff-apply-hunk): Use proper format string for error.

2007-03-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mail/emacsbug.el (report-emacs-bug): Don't hard code the "X" name.

2007-03-10  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (face-set-after-frame-default): Recalculate face
	customizations after applying X resources.

2007-03-10  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-timeout-seconds): New variable.
	(rcirc-keepalive-seconds): Remove variable.
	(rcirc-server-name, rcirc-timeout-timer, rcirc-connecting)
	(rcirc-process, rcirc-user-disconnect): New variables.
	(rcirc-connect): Initialize new variables.
	(rcirc-keepalive): Don't send keepalive pings before connection
	is completed.
	(rcirc-sentinel): Do mark all channels with activity when
	connection is dropped.  Run hook with process buffer local.
	(rcirc-reschedule-timeout, rcirc-delete-process): New functions.
	(rcirc-buffer-process): Return value of rcirc-process if
	rcirc-server-buffer is nil.
	(rcirc-server-name): Return the reported server name.
	(rcirc-update-prompt): Simplify computation of the server name.
	(rcirc-format-response-string): Likewise.
	(rcirc-handler-001): Mark server as connected, record the reported
	server name, and schedule a timeout.
	(rcirc-track-nick): Add a spec for the tty class.
	(rcirc-user-non-nick): Remove function.
	(rcirc-nick-prefix-chars): Add variable.
	(rcirc-user-nick): Use above variable.

2007-03-10  Johan Bockgård  <bojohan@dd.chalmers.se>

	* icomplete.el (icomplete-tidy, icomplete-exhibit):
	Bind deactivate-mark to nil.

2007-03-10  Martin Rudalics  <rudalics@gmx.at>

	* complete.el (PC-do-completion): Bind dirlength to nil to avoid
	that buffer contents get erased during completion.

2007-03-10  Glenn Morris  <rgm@gnu.org>

	* woman.el (woman-change-fonts): Add a hack to deal with
	font-escape followed by "." at start of a line.
	(woman2-IP): Add a hack to deal with consecutive requests.
	(woman2-tagged-paragraph): Extend existing hack to handle "sp".

2007-03-10  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-mode.el (c-before-change): Wrap in save-match-data.

2007-03-09  Richard Stallman  <rms@gnu.org>

	* abbrev.el (abbrev): Add `provide'.

2007-03-09  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/ange-ftp.el (ange-ftp-try-passive-mode): Doc fix.

2007-03-09  Martin Rudalics  <rudalics@gmx.at>

	* complete.el (PC-try-completion): New function.
	(PC-do-completion, read-file-name-internal): Use it instead of
	try-completion.

2007-03-08  Alan Mackenzie  <acm@muc.de>

	Remove stale tokens from `c-found-types' cache.

	* progmodes/cc-mode.el (c-unfind-enclosing-token)
	(c-unfind-coalesced-tokens, c-before-change): New functions.
	(c-maybe-stale-found-type): New variable.

	* progmodes/cc-engine.el (c-partial-ws-p, c-unfind-type)
	(c-trim-found-types): New functions.

2007-03-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-remove-props): Don't mark the buffer modified.
	(debug-ignored-errors): Add entry from smerge-match-conflict.

2007-03-08  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-help.el (idlwave-do-context-help1): Don't visit
	special help topics for keywords.
	(idlwave-help-assistant-command): Include ".exe" for ms-dos
	etc.  Assistant command.

2007-03-08  Chong Yidong  <cyd@stupidchicken.com>

	* replace.el (occur-engine): Move buffer-undo-list binding...
	(occur-1): ...to here.

	* complete.el (PC-bindings): Rebind M-TAB in read-expression-map.

	* simple.el (minibuffer-completing-symbol): New var.
	(eval-expression): Use it.
	(completion-setup-function): Don't bind completion-base-size when
	completing a symbol in the minibuffer.

2007-03-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): Pop up current GUD buffer if user
	tries to start a second session in graphical mode.

2007-03-07  Miles Bader  <miles@gnu.org>

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters):
	Strip text-properties from PROMPT to avoid an error from read-string.

2007-03-07  Kim F. Storm  <storm@cua.dk>

	* complete.el (PC-bindings): Remap lisp-complete-symbol to
	PC-lisp-complete-symbol instead of binding M-TAB in global-map.

2007-03-07  Michaël Cadilhac  <michael@cadilhac.name>

	* complete.el (PC-do-completion): Delete duplicates in the list of
	possible completions.

2007-03-07  Glenn Morris  <rgm@gnu.org>

	* ses.el (ses-mode): Doc fix.

2007-03-06  Kim F. Storm  <storm@cua.dk>

	* isearch.el (isearch-message-prefix): Undo 2007-03-01 change.

2007-03-06  Kenichi Handa  <handa@m17n.org>

	* term/x-win.el (x-select-utf8-or-ctext): Improve the strategy.

2007-03-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (completion-setup-function): Improve last fix so it doesn't
	set it to a relative directory name either.

2007-03-05  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Replace some (defvar VAR) by (defvar VAR nil).

2007-03-05  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/re-builder.el (reb-re-syntax): Fix custom type.

	* files.el (find-file-noselect): No error if file no longer exists.
	Display a message and avoid other questions.

2007-03-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcomplete.el (pcomplete-show-completions): Improve last change, so
	as not to use an invisible window and to create a window if none exist.

	* progmodes/python.el (python-send-command): Restart proc if necessary.
	(python-proc): Simplify.

2007-03-05  David Hansen  <david.hansen@gmx.net>  (tiny change)

	* pcomplete.el (pcomplete-show-completions): Search all frames for
	completions buffer.

2007-03-05  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (customize-save-variable): Clear customized-value
	property (saved values are now put in theme-value property).
	(customize-set-variable): Doc fix.

	* complete.el (PC-do-completion): If completion-ignore-case is
	non-nil, replace field with completion string before exiting.

2007-03-05  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-make-temp-file): New parameter FILENAME.
	Append its extension to the resulting temporary file name.
	(tramp-handle-file-local-copy, tramp-handle-write-region): Apply it.

	* net/tramp-smb.el (tramp-smb-handle-file-local-copy)
	(tramp-smb-handle-write-region): Apply it.

2007-03-05  Alin C. Soare  <alinsoar@voila.fr>  (tiny change)

	* emacs-lisp/lisp-mode.el (calculate-lisp-indent):
	Redo previous change.

2007-03-04  Kevin Rodgers  <kevin.d.rodgers@gmail.com>  (tiny change)

	* diff-mode.el (diff-mode): Doc fix.

2007-03-05  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Set category `l' (latin)
	for more characters.

2007-03-04  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Add alias.

2007-03-04  Glenn Morris  <rgm@gnu.org>

	* progmodes/hideshow.el (hs-minor-mode): Turn mode off and show
	all when switching major mode.
	(hs-minor-mode, hs-c-start-regexp, hs-block-start-regexp)
	(hs-block-start-mdata-select, hs-block-end-regexp)
	(hs-forward-sexp-func, hs-adjust-block-beginning):
	Do not make these variables permanent-local.

2007-03-04  Richard Stallman  <rms@gnu.org>

	* progmodes/cperl-mode.el (cperl-mode):
	Modify cperl-compilation-error-regexp-alist by appending.

	* emacs-lisp/edebug.el (edebug-kill-buffer): New function.
	(edebug-mode): Add the hook.
	(edebug-recursive-edit): Remove the hook on exiting.

	* type-break.el (type-break-get-previous-time):
	Handle end-of-file errors specially
	so they don't get reported wrong in .emacs.

	* startup.el (fancy-splash-text): Clarify text.

	* simple.el (beginning-of-buffer, end-of-buffer):
	Avoid treating plain C-u like numeric arg.

	* simple.el (completion-setup-function): Don't set
	default-directory to nil.

	* shell.el (shell-dirstack-query): Doc fix.

	* mouse.el (mouse-drag-mode-line-1, mouse-drag-vertical-line):
	Don't select the window -- pass it to primitives instead.

	* faces.el (minibuffer-prompt): Use medium blue by default.

2007-03-04  David Kastrup  <dak@gnu.org>

	* jit-lock.el (jit-lock-stealth-time): Change default to nil.
	Preserve 16 as default value for "seconds" when customizing.

2007-03-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-self-insert-command)
	(orgtbl-self-insert-command, org-delete-char)
	(org-delete-backward-char): Set the `flyspell-delayed' property.

2007-03-03  Chong Yidong  <cyd@stupidchicken.com>

	* international/mule.el (find-auto-coding): Don't search for
	line-ending characters past the end of the tail.

2007-03-03  Christopher Allan Webber  <cwebber@dustycloud.org>  (tiny change)

	* play/gamegrid.el (gamegrid-add-score-with-update-game-score-1):
	Jump to the line where new score has been uploaded.

	* play/tetris.el (tetris-move-bottom, tetris-move-left)
	(tetris-move-right, tetris-rotate-prev, tetris-rotate-next):
	Do nothing when the game is paused.

2007-03-03  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-set-tags): Prevent slipping of point
	during completion.

2007-03-01  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* isearch.el (isearch-message-prefix):
	Use minibuffer-prompt-properties.

2007-03-01  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Replace (defvar VAR nil) by (defvar VAR).
	(ps-setup): Print which Emacsen is running ps-print package.

2007-03-01  Stuart Herring  <herring@lanl.gov>

	* files.el (set-auto-mode-0): Use `indirect-function'.
	(hack-one-local-variable): Don't reapply current major mode.

2007-03-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-quote-syntax): Don't bother with
	syntax-ppss-context.
	(python-fill-paragraph): Make sure that fenced-string delimiters that
	stand on their own line stay there.

2007-03-01  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* replace.el (perform-replace): Propertize message.

2007-03-01  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-prepare-agenda-buffers): Also check for
	invisible heading.

2007-02-28  Chong Yidong  <cyd@stupidchicken.com>

	* net/tramp.el (tramp-file-name-handler): Revert last change.

2007-02-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-mouse-until, gdb-mouse-jump):
	Correct doc strings.

2007-02-28  Chong Yidong  <cyd@stupidchicken.com>

	* replace.el (perform-replace): Undo forward-char immediately if
	non-adjacent search fails.

2007-02-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* version.el (emacs-major-version, emacs-minor-version):
	string-to-int -> string-to-number.

2007-02-28  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (where-is): Fail gracefully when not passed a command.

2007-02-28  Stuart Herring  <herring@lanl.gov>

	* find-lisp.el (find-lisp-default-directory-predicate):
	Fix bug: Do symlink check on expanded filename.

2007-02-28  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-set-tags, org-table-get-field): Avoid case
	changes during replacement.
	(org-agenda-mode-map): Add default binding for `org-agenda-archive'.

2007-02-28  Lars Hansen  <larsh@soem.dk>

	* desktop.el: Delete header line listing me as maintainer.

2007-02-28  Glenn Morris  <rgm@gnu.org>

	* tutorial.el (tutorial--describe-nonstandard-key): Tweak text in
	the menus case.

2007-02-28  Chong Yidong  <cyd@stupidchicken.com>

	* net/tramp.el (tramp-file-name-handler): Inhibit modification
	hooks to avoid confusion when combining after-change calls.

2007-02-27  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-encrypt-string): Remove inhibition of gpg-agent,
	now that pgg-gpg-process-region correctly honors passed-in passphrase.
	(allout-distinctive-bullets-string): Add info about bullet conventions.
	(allout-mode): Add info about distinctive vs plain bullets.

2007-02-27  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-archive-subtree): Quote variable name.
	(org-agenda-get-todos): Make sure skip properties are checked correctly.

2007-02-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-bashdb-history, gud-bashdb-marker-filter)
	(gud-bashdb-command-name, bashdb): Remove.
	(gud, gud-menu-map): Remove references to bash/bashdb.

2007-02-26  Andrey Zhdanov  <susuman@hotmail.com>  (tiny change)

	* progmodes/gud.el (gud-pdb-marker-regexp): Add optional <module>
	keyword for Python 2.5.

2007-02-26  Romain Francoise  <romain@orebokech.com>

	* net/net-utils.el (whois-server-tld): Update server for .org.
	(whois-server-list): Add whois.publicinterestregistry.net.
	(whois-guess-server): Fix formatting in docstring.

2007-02-26  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-show-mark): Run hooks and perform command
	remapping for mouse-region-delete-keys.

2007-02-26  Johan Bockgård  <bojohan@dd.chalmers.se>

	* font-core.el (font-lock-mode): Doc fix.

2007-02-25  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-buffer-internal): Set this-command to fallback command.
	Add selected buffer to buffer-name-history.
	(ido-file-internal): Set this-command to fallback command.
	Add file names to file-name-history.

	* emacs-lisp/map-ynp.el (map-y-or-n-p):
	Apply minibuffer-prompt-properties.

2007-02-25  Andreas Schwab  <schwab@suse.de>

	* files.el (hack-one-local-variable-eval-safep): Correct handling
	of edebug-form-spec property value.  Reported by Johan Bockgård.

2007-02-25  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-table-overlay-coordinates)
	(org-table-toggle-coordinate-overlays): New functions.
	(org-table-overlay-coordinates, org-table-coordinate-overlays):
	New variables.
	(org-startup-with-deadline-check): Remove option.
	(org-mode): Remove deadline check on startup.
	(org-table-limit-column-width): Remove option.
	(org-table-formula-numbers-only): Remove option.
	(org-link-style, org-link-format): Remove options.
	(org-select-agenda-window, org-fit-agenda-window): Remove options.
	(org-export-ascii-show-new-buffer)
	(org-export-html-show-new-buffer): Remove options.
	(org-activate-links): Remove camel option.
	(org-file-link-context-use-camel-case): Remove option.
	(org-camel-regexp): Remove variable.
	(org-activate-camels): Remove function.
	(org-store-link): Remove Camel stuff.
	(org-make-org-heading-camel): Remove function.
	(org-open-at-point): Remove camel stuff.
	(org-link-search): Remove camel stuff.
	(org-camel-to-words): Function removed.
	(org-get-agenda-file-buffer): Make sure we prepare the base
	buffers, not any indirect buffers.
	(org-sort-entries): Sort top-level when not on a headline, and no
	active region.
	(org-in-regexp): New function.
	(org-search-not-self): Rename from `org-search-not-link'.
	(org-open-link-marker): New variable.
	(org-open-at-point): Set `org-open-link-marker'.
	(org-print-icalendar-entries): Fixe bug with excluding DONE
	entries from the exported list.
	(org-edit-formula-lisp-indent): New command.
	(orgtbl-to-texinfo, orgtbl-to-html): New functions.
	(orgtbl-to-latex, orgtbl-insert-radio-table)
	(orgtbl-toggle-comment, orgtbl-send-table): New functions.
	(orgtbl-radio-table-templates): New option.
	(org-store-link-props):
	(org-remember-templates): More possibilities to insert info
	into templates.
	(org-remember-apply-template): Make use of the extended
	template capabilities.
	(org-remember-redo-template): New command.
	(org-upgrade-old-links)
	(org-table-modify-formulas, org-table-replace-in-formulas)
	(org-table-find-dataline)
	(org-table-get-vertical-vector): Remove functions.
	(org-table-remove-rectangle-highlight)
	(org-time-stamp-format, org-toggle-log-option)
	(org-table-highlight-rectangle)
	(org-table-iterate, org-table-make-reference):
	(org-translate-time, org-tree-to-indirect-buffer)
	(org-table-field-info, org-table-fix-formulas)
	(org-table-force-dataline, org-table-get-descriptor-line)
	(org-table-get-range)
	(org-skip-comments, org-sort)
	(org-sort-entries, org-sublist, org-table-add-rectangle-overlay)
	(org-table-current-dline, org-table-current-field-formula)
	(org-table-edit-backward-field)
	(org-table-edit-formulas-post-command)
	(org-table-edit-line-down, org-table-edit-line-up)
	(org-agenda-archive)
	(org-agenda-clock-cancel)
	(org-agenda-clock-out, org-agenda-list-stuck-projects)
	(org-agenda-open-link, org-agenda-show-new-time)
	(org-agenda-skip-subtree-when-regexp-matches)
	(org-agenda-tree-to-indirect-buffer, org-agenda-undo)
	(org-at-regexp-p, org-auto-repeat-maybe, org-check-log-option)
	(org-do-sort, org-file-image-p, org-find-overlays)
	(org-find-row-type, org-get-indirect-buffer, org-get-repeat)
	(org-highlight-until-next-command, org-isearch-end)
	(org-match-any-p, org-next-link, org-previous-link):
	(org-remove-subtree-entries-from-agenda, org-replace-escapes)
	(org-rewrite-old-row-references)
	(org-isearch-post-command)
	(org-table-edit-move, org-table-edit-next-field)
	(org-table-edit-scroll, org-table-edit-scroll-down)
	(org-set-frame-title, org-show-reference)
	(org-unhighlight-once, org-verify-change-for-undo): New functions.
	(org-show-variable): Remove command.
	(org-add-log-maybe): New arguments STATE, FINDPOS.
	(org-table-sort-lines): Rewrite from scratch.
	(org-link-search): New argument AVOID-POS.
	(org-print-icalendar-entries): Remove argument CATEGORY.
	(org-run-agenda-series): Remove argument WINDOW.
	(org-next-link, org-previous-link): New commands.
	(org-agenda-date-format): New option.
	(org-table-iterate): New command.
	(org-table-modify-formulas)
	(org-table-replace-in-formulas): Remove functions.
	(org-table-fix-formulas): New function.
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column): Use `org-table-fix-formulas'.
	(org-follow-gnus-link): Patch from Bastien/Leo.
	(org-table-current-field-formula): New function.
	(org-file-image-p): New function.
	(org-agenda-show-new-time): New function.
	(org-agenda-date-later): Call `org-agenda-show-new-time'.
	(org-with-remote-undo): New macro.
	(org-agenda-undo): New command.
	(org-verify-change-for-undo): New function.
	(org-time-stamp-format): New function.
	(org-agenda-get-timestamps): Skip scheduled if DONE and requested
	by user.
	(org-match-any-p): New function.
	(org-make-tags-matcher): Handle regular expressions for tag and
	todo matches.
	(org-read-date): Accept "+N" as input for a date relative to the
	current date.
	(org-remove-subtree-entries-from-agenda): New function.
	(org-agenda-archive, org-agenda-kill):
	Use `org-remove-subtree-entries-from-agenda'.
	(org-do-sort, org-sort-entries): New functions.
	(org-sort): New command.
	(org-table-sort-lines): Use `org-do-sort'.
	(org-fix-decoded-time): New function.
	(org-table-number-regexp): Require 0x... to identify as number
	in tables.
	(org-startup-options): New keywords for note taking.
	(org-upgrade-old-links): Remove function.
	(org-get-repeat): New function.
	(org-show-context): Also show siblings on current level.
	(org-show-siblings): New function.
	(org-isearch-end, org-isearch-post-command): New functions.
	(org-show-siblings): New option.
	(org-show-context): Use `org-show-siblings'.
	(org-table-maybe-recalculate-line): No longer require `calc-eval'
	to be bound, because user may just use elisp.

2007-02-24  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-paste): Handle x-clipboard-yank.
	(cua--init-keymaps): Remap x-clipboard-yank to cua-paste.

2007-02-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* startup.el (command-line): Also check if the abbrev file is readable.

2007-02-24  John Paul Wallington  <jpw@pobox.com>

	* net/tls.el (tls-certtool-program): Fix custom type.

	* mail/feedmail.el (feedmail-message-id-generator)
	(feedmail-date-generator): Fix custom types.

	* mail/rmail.el (rmail-message-filter): Fix custom type.

2007-02-24  Eli Zaretskii  <eliz@gnu.org>

	* startup.el (command-line): If simple.el cannot be found, proceed
	with a warning message.

2007-02-24  Kenichi Handa  <handa@m17n.org>

	* international/utf-8.el (utf-8-pre-write-conversion): Handle the
	case that BEG is a string.

2007-02-24  Chris Moore  <dooglus@gmail.com>

	* pgg-pgp5.el (pgg-pgp5-encrypt-region):
	* pgg-pgp.el (pgg-pgp-encrypt-region):
	* pgg-gpg.el (pgg-gpg-encrypt-region):
	Check pgg-encrypt-for-me if no other recipients.

2007-02-23  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmailedit.el (rmail-cease-edit): Restore the Rmail toolbar.

	* textmodes/sgml-mode.el (sgml-validate): Quote the file name with
	shell-quote-argument.

2007-02-23  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* comint.el (comint-read-input-ring): Use comint-input-ring-size
	from the comint buffer instead of the temporary one.

2007-02-23  David Reitter  <david.reitter@gmail.com>

	* cus-edit.el (custom-save-all): Canonicalize custom-file before
	storing it in recentf-exclude.

2007-02-23  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (fancy-splash-screens): Make cursor-type buffer-local
	in splash screen.

2007-02-22  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-shell.el (idlwave-shell-mode): Clean up pending
	commands, for restart.
	(idlwave-shell-current-module): Fix handling of module name by type.
	(idlwave-shell-break-in): Update type handling.
	(idlwave-shell-bp-get): Encode type in BP structure.
	(idlwave-shell-set-bp): Fix setting condition/count on disabled BPs.
	(idlwave-shell-module-source-query): Query routine info based on type.
	Fix path parsing for non-compiled files.
	(idlwave-shell-module-source-filter): Don't signal error in filter
	if no source found.
	(idlwave-shell-set-bp-in-module): Use fallback source to prevent
	filter race.

2007-02-22  Kim F. Storm  <storm@cua.dk>

	* wid-edit.el (widget-default-create): Undo 2007-02-04 change.
	(editable-field): Document need to put some text before the %v
	escape in :format string.

2007-02-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-svn.el: Remove the code inherited from CVSREAD and `cvs edit'.
	(vc-svn-use-edit): Remove unused config var.
	(vc-svn-update, vc-svn-revert): Checkout is always implicit.

	* outline.el (hide-sublevels): Keep empty last line, if available.

	* buff-menu.el (list-buffers-noselect): Use explicit Unicode code
	rather than the corresponding Unicode char, to make the code
	more readable.

2007-02-19  Juanma Barranquero  <lekktu@gmail.com>

	* speedbar.el (speedbar-frame-mode, speedbar-frame-width)
	(speedbar-show-unknown-files, speedbar-item-info-file-helper)
	(speedbar-item-info-tag-helper): Doc fixes.

2007-02-19  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (locale-language-names):
	Map "eo" to "Esperanto".

	* language/european.el ("Esperanto"): New language environment.

2007-02-17  Sven Joachim  <svenjoac@gmx.de>  (tiny change)

	* simple.el (kill-line): Doc fix.

2007-02-17  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/bindat.el (bindat--unpack-u*): Optimize.
	(bindat--unpack-item, bindat--length-group, bindat--pack-item)
	(bindat--unpack-group, bindat--pack-group):
	Handle vectors with optional element type.

2007-02-17  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-region): Make USE-AGENT nil
	if PASSPHRASE is given.

2007-02-17  Chris Moore  <dooglus@gmail.com>

	* jka-cmpr-hook.el (jka-compr-compression-info-list):
	Recognize backups of bz2 compressed files.

2007-02-17  Eli Zaretskii  <eliz@gnu.org>

	* info-look.el (info-lookup): Bind Info-fontify-maximum-menu-size
	to nil to speed up lookup of the symbol in index nodes.

2007-02-17  Alin C. Soare  <alinsoar@voila.fr>  (tiny change)

	* emacs-lisp/lisp-mode.el (calculate-lisp-indent):
	Add indentation for the constants of Lisp.

2007-02-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* ps-print.el: Use (defvar <foo>) where applicable.
	(ps-print-emacs-type): Remove.
	(ps-x-frame-property, ps-e-frame-parameter): Remove.
	(ps-frame-parameter): Align its call-convention with frame-parameter.
	(ps-begin-job): Adjust calls to it appropriately.
	(ps-setup): Don't print ps-print-emacs-type.
	(ps-e-find-composition, ps-mark-active-p, ps-color-device):
	Define in such a way that it's obvious that it's defined.
	(ps-prsc, ps-c-prsc, ps-s-prsc): Remove.
	(ps-rmail-mode-hook, ps-vm-mode-hook, ps-gnus-summary-setup)
	(ps-jts-ps-setup): Use flavor-neutral syntax instead.

2007-02-15  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-indent-new-comment-line): When splitting
	an empty one-line C-style comment, post-position point properly.

2007-02-15  Chris Moore  <dooglus@gmail.com>

	* isearch.el (isearch-lazy-highlight-space-regexp): New variable.
	(isearch-lazy-highlight-new-loop): Bind it.
	(isearch-lazy-highlight-search): Use it.

	* replace.el (replace-highlight): Bind search-whitespace-regexp to nil.

2007-02-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-extend-region-wholelines):
	Only return non-nil if the region has really been changed.
	Reported by David Hansen <david.hansen@physik.fu-berlin.de>

2007-02-15  Juanma Barranquero  <lekktu@gmail.com>

	* play/5x5.el (5x5-crack-xor-mutate): Doc fix.
	(5x5-draw-grid-end, 5x5-make-xor-with-mutation, 5x5-mode, 5x5-crack)
	(5x5-play-solution, 5x5-y-or-n-p): Fix typos in docstrings.

2007-02-14  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (color-values): Revert changes to docstring from
	2007-01-31 and 2000-09-07.

	* textmodes/ispell.el (ispell-keep-choices-win, ispell-word)
	(ispell-begin-skip-region-regexp): Fix typos in docstrings.
	(ispell-dictionary-alist, ispell-process-line): Doc fixes.
	(ispell-help): Fix typos in docstring and output message.

2007-02-14  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-files-aliases): Add tex and texi aliases.
	(lgrep): Add DIR arg to start grep in specific directory, like rgrep.
	(grep): Fix lgrep reference.

	* disp-table.el (make-glyph-code, glyph-char, glyph-face): New defuns.
	(standard-display-underline): Use make-glyph-code.

	* descr-text.el (describe-char): Use glyph-char and glyph-face.

	* international/latin1-disp.el (latin1-display-char):
	Use make-glyph-code.

2007-02-13  Juanma Barranquero  <lekktu@gmail.com>

	* ehelp.el (with-electric-help, electric-help-exit)
	(electric-help-retain): Doc fixes.

	* emacs-lisp/bytecomp.el (byte-compile-dest-file)
	(byte-compile-file): Doc fixes.

2007-02-13  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Change all uses of
	mac-set-font-panel-visibility to mac-set-font-panel-visible-p.
	(mac-ae-number): Return integer 0 if coerced result is float 0.0.
	(mac-ae-get-url): Call select-frame-set-input-focus.
	(mac-dnd-handle-drag-n-drop-event): Don't call
	select-frame-set-input-focus.

2007-02-13  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Fix documentation of category `a'.

2007-02-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/grep.el (grep): Mention lgrep and rgrep in the docstring.

2007-02-12  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-get-ls-command, tramp-get-file-exists-command)
	(tramp-get-remote-ln): Handle error case.
	Reported by Chris Moore <dooglus@gmail.com>.

2007-02-11  Kim F. Storm  <storm@cua.dk>

	* bindings.el (ctl-x-map): Remove register compatibility bindings
	C-x /, C-x j, C-x x, and C-x g (deprecated since Emacs 19).

2007-02-11  Richard Stallman  <rms@gnu.org>

	* loadhist.el (unload-feature): Handle (t . SYMBOL) entries
	in load history.

	* emacs-lisp/lisp-mode.el (indent-sexp): Clean up termination
	condition -- don't fail to stop at endpos.

2007-02-11  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-get-todos)
	(org-agenda-get-timestamps, org-agenda-get-closed)
	(org-agenda-get-deadlines, org-agenda-get-scheduled)
	(org-agenda-get-blocks, org-format-agenda-item)
	(org-agenda-change-all-lines, org-scan-tags): Rename text property
	from `category' to `org-category'.

2007-02-11  Kenichi Handa  <handa@m17n.org>

	* international/titdic-cnv.el (titdic-convert): Force files be written
	with Unix-like eol format.  Read files under CXTERM-DIC by raw-text.
	(miscdic-convert): Force files be written with Unix-like eol format.

2007-02-11  Juanma Barranquero  <lekktu@gmail.com>

	* files.el (change-major-mode-with-file-name): Fix typo in docstring.

	* calculator.el (calculator-prompt): Doc fix.
	(calculator-mode-map): Fix typo in menu entry.

2007-02-10  Jay Belanger  <belanger@truman.edu>

	* calculator.el (calculator): Do more extensive checking for when
	3 lines should be used for the calculator.

2007-02-10  Eli Zaretskii  <eliz@gnu.org>

	* info-look.el (info-lookup-make-completions):
	Bind Info-fontify-maximum-menu-size to nil to speed up lookup of
	index nodes.

	* info.el (Info-fontify-maximum-menu-size): Document the effect
	of a nil value.
	(Info-fontify-node): Make sure Info-fontify-maximum-menu-size is
	non-nil before using it as size.

2007-02-09  Chong Yidong  <cyd@stupidchicken.com>

	* subr.el (insert-for-yank-1): Prevent read-only properties from
	interfering with text property operations.

	* image-mode.el (image-mode): Revert 2007-01-30 changes.

	* image.el (image-type-auto-detectable): Don't autodetect x[pb]m.
	(image-type-auto-detected-p): Fail if another match is found in
	auto-mode-alist.

	* files.el (magic-mode-alist): Call image-mode instead of
	image-mode-maybe for autodetected images.

2007-02-09  Juanma Barranquero  <lekktu@gmail.com>

	* mail/smtpmail.el (smtpmail-smtp-service, smtpmail-queue-index-file):
	Fix typos in docstrings.
	(smtpmail-local-domain, smtpmail-queue-mail): Doc fixes.

2007-02-09  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/float-sup.el: Remove obsolete comment.

2007-02-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-sanity-check-hunk): Fix last fix.

2007-02-08  Karl Fogel  <kfogel@red-bean.com>

	* simple.el: Revert previous change, at request of RMS:
	(fundamental-mode-hook): Remove.
	(fundamental-mode): Run after-change-major-mode-hooks manually,
	and don't run the now-nonexistent fundamental-mode-hook.

2007-02-08  Karl Fogel  <kfogel@red-bean.com>

	* simple.el (fundamental-mode-hook): Declare new hook.
	(fundamental-mode): Run the new dedicated hook, and don't run
	after-change-major-mode-hooks manually anymore.

2007-02-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-svn.el (vc-svn-merge-news): Understand the new format with two
	added columns of chars.  Remove support for the "no-meta-info" format.
	Prompted by Romain Francoise <romain@orebokech.com>.

2007-02-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-if-arrow): New macro.
	(gdb-mouse-until, gdb-mouse-jump): Use it.

2007-02-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-mouse-until, gdb-mouse-jump): Make them
	work when there is just an assembler buffer (no source buffer).

2007-02-07  Per Cederqvist  <ceder@lysator.liu.se>  (tiny change)

	* diff-mode.el (diff-sanity-check-hunk): Don't reject the hunk
	just because the diff was produced using "-p" (--show-c-function).

2007-02-07  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (frame-set-background-mode): Use `color-values' and
	`display-color-p', not `x-color-values' and `x-display-color-p'.
	(face-valid-attribute-values): Use `defined-colors' instead of
	`x-defined-colors'.

2007-02-07  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: The ps-print commands without face printing should not
	print background color.  Reported by Leo <sdl.web@gmail.com>.
	(ps-print-version): New version 6.7.3.
	(ps-begin-job): New arg.  Fix ps-default-background and
	ps-default-foreground initialization.
	(ps-face-attributes): Fix doc string.
	(ps-face-background, ps-generate-postscript, ps-generate): Fix code.

	* printing.el: Fix ps-print link.

2007-02-06  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (face-set-after-frame-default): Compile attributes to
	be set by frame parameters before merging in X resources.

2007-02-06  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (blink-matching-paren-dont-ignore-comments):
	(blink-matching-paren-on-screen): Doc fixes.

2007-02-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-frames-mode): Truncate lines in stack buffer.

2007-02-05  Juanma Barranquero  <lekktu@gmail.com>

	* loadhist.el (unload-feature): Silently ignore `load-history' entries
	of the form `(defface . SYMBOL)', and treat `(autoload . SYMBOL)'
	entries like `defun'.  Return nil.

2007-02-05  Kim F. Storm  <storm@cua.dk>

	* ido.el: Doc fixes.

2007-02-04  David Kastrup  <dak@gnu.org>

	* play/mpuz.el (mpuz-random-puzzle): Fix potential lockup when
	`mpuz-allow-double-multiplicator' is non-zero, and correct
	calculation of `min'.

2007-02-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-default-create): Insert new text at the
	:from marker _after_ the marker, not before it.

2007-02-04  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-indent-line): Don't erase ^L when a line
	containing it is re-indented.

2007-02-03  Chong Yidong  <cyd@stupidchicken.com>

	* net/newsticker.el (newsticker--insert-image): Update docstring,
	and insert the image directly.
	(newsticker--buffer-redraw): Update docstring.

	* emacs-lisp/easy-mmode.el (define-globalized-minor-mode):
	Rename from define-global-minor-mode.

	* progmodes/cwarn.el (global-cwarn-mode):
	* emacs-lisp/autoload.el (make-autoload):
	* hi-lock.el (global-hi-lock-mode):
	* font-core.el (global-font-lock-mode): All callers changed.

2007-02-03  Eli Zaretskii  <eliz@gnu.org>

	* textmodes/texnfo-upd.el (texinfo-menu-copy-old-description):
	Don't copy @ignore lines into menu descriptions.
	(texinfo-multi-file-update): Goto the @node line before attempting
	to pluck the node name.
	(texinfo-multiple-files-update): Reverse the optional arguments'
	order, as per the doc string and the `interactive' form.

2007-02-03  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el: Use autoload to avoid overriding disabled setting
	applied in .emacs.

2007-02-03  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-engine.el (c-in-knr-argdecl): Slight correction
	for, e.g. "void (*hdone)();" in a k&r list.  (No WS between
	adjacent paren groups).

2007-02-02  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* progmodes/ebnf2ps.el: Doc fixes.
	(ebnf-eps-buffer, ebnf-eps-region, ebnf-syntax-alist): Doc fixes.

2007-02-02  Eli Zaretskii  <eliz@gnu.org>

	* dired-x.el (dired-do-relsymlink): Add reference to
	dired-do-symlink.  Add an autoload cookie.

	* dired-aux.el (dired-do-symlink): Add reference to
	dired-do-relsymlink.

2007-02-02  Doug Maxey  <dwm@enoyolf.org>  (tiny change)

	* mouse.el <left-fringe mouse-2, right-fringe mouse-3>:
	<left-fringe mouse-3>: New bindings.

2007-02-02  Ulf Jasper  <ulf.jasper@web.de>

	* net/newsticker.el (newsticker-version): Change to "1.10".
	(newsticker--set-customvar): Doc string.
	(newsticker-new-item-face): Doc string.
	(newsticker-mode): Initialize `invisibility-spec' with t.
	(newsticker-mode-map):
	Add `newsticker-mark-all-items-at-point-as-read'.
	(newsticker-menu): Add narrow-to-item and narrow-to-feed.
	(newsticker-w3m-show-inline-images): Do not call
	`w3m-remove-image'.
	(newsticker--buffer-after-w3m-insert-image): New advice for
	w3m-insert-image to cache images.
	(newsticker-next-item-same-feed): New.
	(newsticker-mark-all-items-at-point-as-read-and-redraw): New.
	(newsticker-mark-all-items-of-feed-as-read): New.
	(newsticker-mark-all-items-at-point-as-read): Use new functions.
	(newsticker-mark-item-at-point-as-read): Doc string.
	(newsticker-mark-item-at-point-as-read): Use new functions.
	(newsticker--do-mark-item-at-point-as-read): New, extracted from
	`newsticker-mark-item-at-point-as-read'.
	(newsticker-hide-entry): Use (t) instead of t for invisibility.
	(newsticker--sentinel): Yet another xml-parser workaround.
	(newsticker--decode-iso8601-date): Bugfix for datestrings without days.
	(newsticker--buffer-do-insert-text): Fix.
	(newsticker--buffer-insert-enclosure): Fix.  Length might be missing.
	(newsticker--buffer-make-item-completely-visible):
	`switch-to-buffer' not necessary.

2007-02-02  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/ebnf2ps.el (ebnf-eps-buffer, ebnf-eps-region)
	(ebnf-syntax-directory, ebnf-syntax-file, ebnf-syntax-region)
	(ebnf-style-database, ebnf-apply-style, ebnf-reset-style)
	(ebnf-push-style, ebnf-pop-style, ebnf-eps-production-list)
	(ebnf-directory, ebnf-file, ebnf-syntax-alist): Doc fixes.

2007-02-02  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-show-key): Fix an error message.

2007-02-01  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (set-face-underline-p, modify-face): Rename arg
	UNDERLINE-P to UNDERLINE (it is not a flag).

2007-02-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-speedbar-update): Avoid duplication
	when adding gdb-speedbar-update to gdb-input-queue.

2007-02-01  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-show-key): Signal an error if the
	current input method is not using Quail.

2007-02-01  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el (idlwave-xml-create-sysvar-alist):
	Trim leading whitespace in sysvar names.

2007-02-01  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (internal-find-face, internal-get-face): Doc fixes.

2007-01-31  Juanma Barranquero  <lekktu@gmail.com>

	* ido.el (ido-set-common-completion): Use `let', not `let*'.

2007-01-31  Romain Francoise  <romain@orebokech.com>

	* comint.el: Delete extra copy of `comint-copy-old-input' added in
	previous change to this file.

2007-01-31  Jason Rumney  <jasonr@gnu.org>

	* files.el (magic-mode-alist): Use image-mode-maybe rather than
	image-mode.

	* image-mode.el (image-mode-maybe): Prevent magic-mode-alist from
	interfering with attempt to set major mode from modified
	auto-mode-alist.

2007-01-31  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (color-values): Doc fix.
	(face-differs-from-default-p): Don't check :foreground twice.

2007-01-31  J.D. Smith  <jdsmith@as.arizona.edu>

	* comint.el (comint-mode): Prevent non-keyword fontification by default.

2007-01-31  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-store-decode-map-key): Store a
	translated character too.
	(quail-char-equal-p): New function.
	(quail-find-key1): Check character equality by quail-char-equal-p.
	(quail-decode-map-generated): New variable.
	(quail-find-key): Check quail-decode-map-generated and re-generate
	a decode map if necessary.

2007-01-30  Richard Stallman  <rms@gnu.org>

	* tutorial.el (tutorial--detailed-help): Make the list of
	changed keys look nicer.

2007-01-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-delete-1): New function.
	(gdb-var-delete): Use it.
	(gdb-var-update-handler-1): Handle value "invalid" for MI field
	`in_scope'.

2007-01-30  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (get-free-disk-space): Return nil for remote directories.

	* net/ange-ftp.el (ange-ftp-ls): In case of wildcards, use "ls"
	instead of "dir".

2007-01-30  Chong Yidong  <cyd@stupidchicken.com>

	* type-break.el (type-break-catch-up-event): New function.
	(type-break-demo-hanoi, type-break-demo-life)
	(type-break-demo-boring): Use it.

	* image-mode.el (image-mode): Don't automatically view as image.
	(image-toggle-display): Add `disabled' property.

2007-01-29  Juanma Barranquero  <lekktu@gmail.com>

	* isearchb.el (isearchb-iswitchb):
	* ps-print.el (ps-build-face-reference):
	* emacs-lisp/shadow.el (list-load-path-shadows):
	* eshell/esh-cmd.el (eshell-rewrite-for-command):
	* international/mule.el (find-auto-coding):
	* mail/supercite.el (sc-attrib-selection-list):
	* progmodes/cc-defs.el (c-emacs-features):
	* progmodes/cc-vars.el (c-offsets-alist):
	* progmodes/flymake.el
	(flymake-init-create-temp-source-and-master-buffer-copy):
	Fix typos in docstrings (some suggested by Chris Moore).

	* progmodes/vhdl-mode.el (vhdl-components-package-name)
	(vhdl-get-library-unit, vhdl-corresponding-begin)
	(vhdl-skip-case-alternative, vhdl-backward-skip-label)
	(vhdl-align-region-2, vhdl-electric-dash, vhdl-case-word)
	(vhdl-hooked-abbrev, vhdl-hs-forward-sexp-func)
	(vhdl-font-lock-match-item): Fix typos in docstrings.
	(vhdl-get-library-unit, vhdl-get-block-state, vhdl-sort-alist)
	(vhdl-set-offset, vhdl-fix-case-region-1, vhdl-scan-directory-contents)
	(vhdl-speedbar-insert-project-hierarchy):
	Improve argument/docstring consistency.

2007-01-29  Kenichi Handa  <handa@m17n.org>

	* international/titdic-cnv.el (py-converter): Fix previous change.

2007-01-29  Chong Yidong  <cyd@stupidchicken.com>

	* jka-compr.el (jka-compr-partial-uncompress)
	(jka-compr-call-process): Rebind default-directory if it is
	invalid.  Suggested by Chris Moore.

	* comint.el (comint-insert-input): Handle situation where the
	selected buffer is not the clicked buffer.

2007-01-29  Kenichi Handa  <handa@m17n.org>

	* international/ja-dic-cnv.el (skkdic-convert):
	Add byte-compile-disable-print-circle:t at the head.

	* international/titdic-cnv.el (tit-process-header):
	Add byte-compile-disable-print-circle:t at the head.
	(miscdic-convert): Likewise.
	(py-converter): Skip the header comments.

	* emacs-lisp/bytecomp.el (byte-compile-disable-print-circle):
	New variable.
	(byte-compile-output-file-form): Bind print-circle to nil if
	byte-compile-output-file-form is not nil.
	(byte-compile-output-docform): Likewise.

2007-01-28  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-global-keymap, cua--region-keymap):
	Declare earlier to avoid byte compiler warnings.

2007-01-28  Markus Triska  <markus.triska@gmx.at>

	* speedbar.el (speedbar-make-specialized-keymap): Doc fix.

2007-01-28  Chong Yidong  <cyd@stupidchicken.com>

	* play/gamegrid.el (gamegrid-kill-timer): Cancel timer directly.
	(gamegrid-add-score-with-update-game-score-1): Allow local quits
	when calling update-game-score program.  Remove unnecessary
	save-excursion.

	* play/tetris.el (tetris-new-shape): Stop drawing if game is over.

2007-01-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-breakpoint-regexp): Declare earlier to
	avoid compiler warning.
	(gdb-var-update-handler-1): Consider that the MI field `in_scope'
	might have values other than "true" or "false".

2007-01-28  Richard Stallman  <rms@gnu.org>

	* textmodes/fill.el (fill-paragraph-function): Doc fix.
	(fill-paragraph): Bind fill-paragraph-function to t to avoid recursion.

	* emacs-lisp/pp.el (pp-eval-last-sexp): Don't eval here.

	* image.el (image-type-header-regexps): Make GIF regex more specific.

	* tutorial.el (tutorial--default-keys): Check M-DEL, not `M-backspace'.
	Don't check `backspace'.
	(tutorial--find-changed-keys): Look up bindings in a temp buffer
	in Fundamental mode.

	* startup.el (fancy-splash-text, normal-splash-screen):
	Mention C-g.

	* simple.el (eval-expression): Don't use eval-last-sexp-print-value
	when inserting in buffer.

	* vc-arch.el (vc-arch-file-id): Move with-current-buffer
	inside the if.

2007-01-27  Richard Stallman  <rms@gnu.org>

	* obsolete/awk-mode.el (awk-font-lock-keywords): Add "do".

2007-01-27  Guanpeng Xu  <herberteuler@hotmail.com>

	* add-log.el (add-log-current-defun): Skip the semicolon ``;'' for
	enum/union/struct/class definition.
	Revert change to call `forward-sexp' multiple times.

2007-01-27  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables-confirm): Don't keep trying to
	read an event from an empty kbd macro.

2007-01-27  Eli Zaretskii  <eliz@gnu.org>

	* server.el (server-start): Mention LEAVE-DEAD arg in the doc string.

2007-01-27  Ben North  <ben@redfrontdoor.org>

	* outline.el (outline-promote, outline-demote): Doc fix.
	Rename the arg CHILDREN -> WHICH.

2007-01-27  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-do-copy-or-rename-file-out-of-band):
	Set default-directory to a sane value when calling start-process.

2007-01-27  Eli Zaretskii  <eliz@gnu.org>

	* ls-lisp.el (ls-lisp-use-localized-time-format): New defcustom.
	(ls-lisp-format-time-list): Doc fix.  Mention
	ls-lisp-use-localized-time-format.
	(ls-lisp-format-time): Use ls-lisp-format-time-list if
	ls-lisp-use-localized-time-format is non-nil, even if a valid
	locale is defined.

2007-01-27  Juanma Barranquero  <lekktu@gmail.com>

	* jka-compr.el (jka-compr-shell): Doc fix.

	* jka-cmpr-hook.el (jka-compr-compression-info-list): Doc fix.

2007-01-26  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Fix background height.
	(ps-print-version): New version 6.7.2.

2007-01-26  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (finder-data, custom-deps): Depend on
	$(lisp)/loaddefs.el.

2007-01-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* Makefile.in (custom-deps, finder-data): Add dependency to loaddefs.el.

2007-01-24  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-output-file-form)
	(byte-compile-output-docform): Bind `print-circle' to t.

2007-01-24  Kenichi Handa  <handa@m17n.org>

	* international/ja-dic-cnv.el (skkdic-convert): Insert a related
	file name of the original SKK dictionary file.

2007-01-24  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-initial-position): New variable.
	(ido-read-internal): Set it if default item is specified.
	(ido-minibuffer-setup): Position cursor accordingly if set.
	(ido-edit-input): C-e moves to end of input if not already there.
	(ido-magic-backward-char): C-b does like M-b if prev char is /.
	Don't switch to buffer mode if repeating C-b at start of input.
	(ido-toggle-ignore): C-a only toggles ignore at start or end of
	input; else it moves to start of input.
	(ido-kill-buffer-at-head, ido-delete-file-at-head): If cursor is
	not at end of input, delete rest of input, rather than normal op.

2007-01-23  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-keym.el (viper-insert-basic-map):
	Delete binding for S-TAB.

	* ediff-util.el (ediff-clone-buffer-for-region-comparison): Change text
	of message.  Activate mark.
	(ediff-activate-mark): Set transient-mark-mode to t.

	* ediff.el (ediff-regions-wordwise, ediff-regions-linewise): Doc fix.

2007-01-23  Martin Rudalics  <rudalics@gmx.at>

	* help-fns.el (describe-variable): Don't suppress display of
	buffer local value when the value is "large".

2007-01-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-active): Add XEmacs test from ido-minibuffer-setup.
	(ido-initiate-auto-merge, ido-exhibit, ido-minibuffer-setup)
	(ido-tidy): Use ido-active.

2007-01-22  Chris Moore  <christopher.ian.moore@gmail.com>

	* hexl.el (hexl-mode-exit): Add missing quote.

2007-01-22  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-keyboard-modifier-mask-alist): New constant.
	(mac-ae-keyboard-modifiers): New function.
	(mac-handle-toolbar-switch-mode): Use it.
	(mac-dnd-handle-drag-n-drop-event): Likewise.  Set action to `copy'
	if keyboard modifiers on drop contain option key.
	(mac-dnd-drop-data): Add optional argument `action'.
	(special-event-map): Remove binding for M-drag-n-drop.

2007-01-21  Guanpeng Xu  <herberteuler@hotmail.com>

	* add-log.el (add-log-current-defun): Use CC Mode functions to
	find the beginning and end of a defun.

2007-01-21  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-regexp)
	(gdb-var-create-handler): Handle value field in GDB output of
	-var-create.
	(gdb-max-frames): New variable.
	(gdb-stack-buffer, gdb-frames-select): Use it.
	(gdb-info-stack-custom): Help user customize gdb-max-frames,
	if necessary.
	(gdb-get-frame-number): Simplify.

2007-01-21  Glenn Morris  <rgm@gnu.org>

	* net/tramp.el (tramp-perl-encode, tramp-perl-decode):
	Update copyrights.

2007-01-21  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-where-wrt-brace-construct): Correct the
	handling of K&R stuff.

2007-01-21  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-files): Fix customization type.

2007-01-21  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Handle frame parameters (background and/or foreground
	colors) changing dynamically.  Reported by Leo <sdl.web@gmail.com>.
	(ps-print-version): New version 6.7.1.
	(ps-x-frame-property, ps-e-frame-parameter): New aliases.
	(ps-frame-parameter): New fun.
	(ps-default-fg, ps-default-bg): New default value ('frame-parameter).
	Fix doc and customization.
	(ps-begin-job): Get frame parameters (background and/or foreground
	colors).
	(ps-do-despool): Ensure ps-printer-name has a valid value.

2007-01-21  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-debug-log): Rename from gdb-debug-ring.
	(gdb-debug-log-max): Rename from gdb-debug-ring-max.
	(gud-gdba-marker-filter): Make a value of nil for gdb-debug-ring-max
	mean unlimited.

2007-01-20  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-engine.el (c-in-knr-argdecl): Reformulate to do
	much more rigorous analysis of putative K&R regions.

2007-01-20  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-defs.el (c-go-list-forward, c-go-list-backward):
	New functions.

2007-01-20  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-align.el, progmodes/cc-cmds.el,
	* progmodes/cc-defs.el, progmodes/cc-engine.el,
	* progmodes/cc-langs.el, progmodes/cc-styles.el,
	* progmodes/cc-vars.el: Add my name.

2007-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (find-alternate-file): Revert query message to Emacs 21
	version.

2007-01-20  Eric Hanchrow  <offby1@blarg.net>

	* progmodes/cperl-mode.el (cperl-electric-keywords): Document in
	the doc string how to use personal abbrevs without electric keywords.

2007-01-20  Alin C. Soare  <alinsoar@voila.fr>  (tiny change)

	* emacs-lisp/lisp-mode.el (last-sexp-toggle-display):
	Fix cursor position when toggle abbreviated display.

2007-01-20  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el: Update copyright following assignment by
	Alessandro Rubini.

2007-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* type-break.el (type-break-demo-hanoi, type-break-demo-life)
	(type-break-demo-boring): Call read-event instead of read-char.

2007-01-19  Daniel Pfeiffer  <occitan@esperanto.org>  (tiny change)

	* progmodes/compile.el: Add handling for makepplog.

2007-01-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* textmodes/ispell.el (ispell-change-dictionary): Ensure that
	aspell dictionaries are initialized when called non-interactively.

2007-01-19  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-loop): New arg limit.
	Handle case where the first error is at point-min.
	(compilation-next-error): New arg to compilation-loop call.

2007-01-18  Bruno Haible  <bruno@clisp.org>  (tiny change)

	* info.el (Info-default-dirs): Change default info dir to share/info.

	* paths.el (Info-default-directory-list): Ditto.

2007-01-18  Chris Moore  <christopher.ian.moore@gmail.com>

	* hexl.el (hexl-before-revert-hook): New function.
	(hexl-mode): Use it.
	(hexl-after-revert-hook): Just call hexl-mode.
	(hexl-mode-exit): Remove before-revert-hook.

2007-01-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* isearch.el (isearch-no-upper-case-p): Look for [:upper:] as well.

2007-01-16  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/ispell.el (ispell-dictionary-alist-3): Replace "---"
	by "-" in francais7 otherchars entry.
	(ispell-dictionary-alist-5): Replace "." by "[.]" for polish
	otherchars entry.

2007-01-15  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-buffer-file-name): Abbreviate the bookmark
	path.  Rewrite function in `cond' style for readability.

	Suggested by Stephen Eglen <S.J.Eglen{_AT_}damtp.cam.ac.uk>.
	(The path shortening, that is, not the rearrangement.)

2007-01-15  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ae-quit-application): New function.
	(mac-apple-event-map): Bind "quit application" Apple event to it.

2007-01-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-svn.el (vc-svn-parse-status): Trust the filename argument more
	than the program's output.

2007-01-14  Juanma Barranquero  <lekktu@gmail.com>

	* kmacro.el (kmacro-insert-counter, kmacro-set-counter)
	(kmacro-start-macro-or-insert-counter)
	(kmacro-step-edit-prefix-commands): Fix typos in docstrings.
	(kmacro-call-ring-2nd, kmacro-call-ring-2nd-repeat): Doc fixes.

	* longlines.el (longlines-show-hard-newlines):
	* ruler-mode.el (ruler-mode-ruler):
	* emulation/keypad.el (keypad-setup):
	* progmodes/antlr-mode.el (antlr-indent-at-bol-alist):
	Fix typo in docstring.

2007-01-13  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-cmd-rotate-original-options): Add -outfile option.
	Remove redirect character ">".

2007-01-13  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (perform-replace): Remove leftover code.

2007-01-12  Richard Stallman  <rms@gnu.org>

	* replace.el (perform-replace): Don't clear NODENT when computing
	the replacement string.

2007-01-11  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-file-local-copy):
	Set `enable-multibyte-characters' to nil.  Reported by Chris Moore
	<christopher.ian.moore@gmail.com>.

2007-01-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-sanity-check-context-hunk-half)
	(diff-sanity-check-hunk): New functions.
	(diff-find-source-location): Use'em to check the hunks are well-formed.

	* hexl.el (hexlify-buffer, dehexlify-buffer): Don't complain and don't
	activate undo when undo is not active.
	Reported by Chris Moore <christopher.ian.moore@gmail.com>.

2007-01-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* ffap.el (ffap-next-regexp, ffap-machine-p, ffap-newsgroup-regexp)
	(ffap-newsgroup-p, ffap-alist, ffap-string-at-point-mode-alist)
	(ffap-url-at-point): Use char-classes rather than "a-z".

2007-01-10  Juanma Barranquero  <lekktu@gmail.com>

	* ediff-init.el (ediff-autostore-merges):
	* textmodes/fill.el (fill-region): Doc fix.

2007-01-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el (server-ensure-safe-dir): UIDs may be floats.

2007-01-10  Richard Stallman  <rms@gnu.org>

	* battery.el (battery-linux-proc-acpi): Use ignore-errors
	around calls to directory-files.

	* subr.el (momentary-string-display): Use save-excursion.

	* emacs-lisp/pp.el (pp-eval-expression): Once again eval the
	argument, but read it as `X' does.

2007-01-09  Juri Linkov  <juri@jurta.org>

	* info.el (Info-fontify-node): Don't hide node names of index entries.

	* faces.el (momentary): Change :group to basic-faces where all
	basic faces belong to.  Add :version.

2007-01-09  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* tutorial.el (tutorial--display-changes): Show M-x sequence if no
	keybinding is found.
	(tutorial--find-changed-keys): Never treat null keybinding as a
	remapping.

2007-01-09  Martin Rudalics  <rudalics@gmx.at>

	* wdired.el (wdired-xcase-word): Skip non-word read-only characters.

2007-01-09  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el
	(select-safe-coding-system-interactively): Fix message.

2007-01-09  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-process-one-action): Remove `with-timeout'.
	(tramp-process-actions): Add optional parameter TIMEOUT.
	(tramp-open-connection-telnet, tramp-open-connection-rsh)
	(tramp-open-connection-su): Add timeout of 60".

2007-01-09  Richard Stallman  <rms@gnu.org>

	* progmodes/compile.el (compile): Doc fix.

2007-01-09  Markus Triska  <markus.triska@gmx.at>

	* tumme.el (tumme-display-thumb): Doc fix.

2007-01-08  Juanma Barranquero  <lekktu@gmail.com>

	* battery.el (battery-search-for-one-match-in-files):
	* bindings.el (mode-line-minor-mode-help):
	* x-dnd.el (x-dnd-types-alist):
	* calendar/icalendar.el (icalendar-import-buffer):
	* term/mac-win.el (mac-dnd-types-alist): Fix typo in docstring.

	* progmodes/vhdl-mode.el (vhdl-save-caches): Fix typo in error message.

2007-01-07  Chris Moore  <christopher.ian.moore@gmail.com>

	* replace.el (replace-regexp): Fix typo in docstring.

2007-01-07  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-langs.el (c-operators, c-filter-ops):
	Amend doc-string and comments.

2007-01-06  Eli Zaretskii  <eliz@gnu.org>

	* files.el (abbreviate-file-name): Doc fix.

2007-01-06  Markus Triska  <triska@gmx.at>

	* subr.el (split-string): Remove spurious ")" from doc string.

2007-01-05  Takaaki Ota  <Takaaki.Ota@am.sony.com>

	* textmodes/table.el (table--warn-incompatibility):
	Use display-warning instead of momentary-string-display.

2007-01-05  Richard Stallman  <rms@gnu.org>

	* image.el (image-type-header-regexps): Recognize xbm more strictly.

	* simple.el (backward-kill-word): Doc fix.

2007-01-05  Romain Francoise  <romain@orebokech.com>

	* international/mule.el (sgml-html-meta-auto-coding-function):
	Ensure that the buffer contains a HTML document.

2007-01-05  Dan Nicolaescu  <dann@ics.uci.edu>

	* faces.el (momentary): Move here ...
	* subr.el (momentary): ... from here.

2007-01-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-max-children): New customizable variable.
	(gdb-speedbar-expand-node): Ask user for confirmation before expanding
	large structures/arrays.

2007-01-04  Juanma Barranquero  <lekktu@gmail.com>

	* files.el (find-file-noselect-1, set-visited-file-name):
	Allow backup-enable-predicate to be nil.

2007-01-04  Andreas Schwab  <schwab@suse.de>

	* progmodes/ebrowse.el (ebrowse-global-prefix-key): Fix typo in
	last change.

2007-01-03  Richard Stallman  <rms@gnu.org>

	* woman.el (woman-decode-buffer): Clarify error message.

2007-01-03  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-mask-paragraph): Fix yesterday's buggy patch.

2007-01-03  Chris Moore  <christopher.ian.moore@gmail.com>

	* tutorial.el (tutorial--describe-nonstandard-key): Fix typo.

2007-01-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* iswitchb.el (iswitchb-global-map): Use command-remapping if available.

2007-01-02  Juanma Barranquero  <lekktu@gmail.com>

	* emulation/viper.el (viper-custom-file-name, viper-mode):
	Fix typos in docstrings.

	* subr.el (momentary-string-display): After moving point, set POS
	variable to it to avoid later errors once the buffer is modified.
	Doc fix.

2007-01-02  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-cmds.el (c-mask-paragraph): In a block comment,
	check that the "*/" is present before trying to manipulate it.

2007-01-02  Richard Stallman  <rms@gnu.org>

	* wid-edit.el (widget-choose): Avoid ugly error for function keys.

	* progmodes/cfengine.el (cfengine-font-lock-syntactic-keywords):
	Fix format of value.

	* cus-edit.el (customize-unsaved): Rename from customize-customized.
	Change messages accordingly.
	(customize-customized): Now alias.

2007-01-02  Juanma Barranquero  <lekktu@gmail.com>

	* files.el (version-control): Doc fix.

2007-01-01  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-engine.el (c-guess-basic-syntax, case 5N):
	Check the format of c-state-cache is valid for an optimization before
	using it.

	* progmodes/cc-engine.el (c-guess-basic-syntax): New case 5Q "we
	are at a statement within a macro".  Other changes so that only
	the first continuation line in a macro gets the symbol
	`cpp-define-intro', the others getting `statement', or whatever.

	* progmodes/cc-cmds.el (c-context-line-break): When invoked within
	a string, preserve whitespace.  Add a backslash only when also in
	a macro.

	* progmodes/cc-defs.el: Correct typos.

	* progmodes/cc-cmds.el (c-context-line-break): Don't indent the
	new line after an escaped EOL in a string.

	* progmodes/cc-engine.el (c-forward-label): Recognize "foo:" as a
	label when it directly follows "else", "do", ....

	* progmodes/cc-engine.el (c-backward-<>-arglist): Tolerate empty
	angle brackets (as seen in "explicit specializations" of C++
	templates).

	* progmodes/cc-vars.el (c-indentation-style): Mention c-file-style
	in the doc-string.

	* progmodes/cc-cmds.el (c-mask-paragraph): Fix for C comments,
	when the comment ender looks like "=========*/" and is alone on
	its line.

	* progmodes/cc-langs.el, progmodes/cc-engine.el: Correct the
	spelling of c-opt-op-identiTier-prefix, t -> f.  Leave an alias
	for the old name.

	* progmodes/cc-mode.el: Bind C-M-a and C-M-e to
	c-\(beginning\|end\)-of-defun by default.

	* progmodes/cc-align.el (c-lineup-gnu-DEFUN-intro-cont):
	New line-up function, for the DEFUN macro in the Emacs C sources.
	Only used in "gnu" style.

	* progmodes/cc-styles.el (c-style-alist): Use this new function in
	the "gnu" style.

	* progmodes/cc-cmds.el (c-electric-slash): Extend the handling of
	clean-up comment-close-slash also to work when there's a comment
	terminator on the line.
	(c-beginning-of-defun, c-end-of-defun): Refactor and optimize
	these for large arg - only take account of top level {..}, except
	for initial and final adjustments.  M-- C-M-[ae] now go to the
	right defuns when the starting point is between defuns.  They use
	the four new functions:
	(c-in-function-trailer-p, c-where-wrt-brace-construct)
	(c-backward-to-nth-BOF-{, c-forward-to-nth-EOF-}): New functions to
	support c-\(beginning\|end\)-of-defun.

	* progmodes/cc-engine.el (c-forward-label): Analyze ":"
	expressions more rigorously, to exclude bit-field specifiers from
	being classed as labels.
	(c-forward-label): When analyzing a ":" within a macro, be careful
	about using c-forward-syntactic-ws at the macro beginning.
	(c-beginning-of-decl-1): Whilst searching for "=" as evidence of a
	stmt boundary, check for "operator=", etc.

	* progmodes/cc-mode.el (c-postprocess-file-styles):
	Bind inhibit-read-only to t, around the call to
	c-remove-any-local-eval-or-mode-variables, so that it works on a
	RO file.

	* progmodes/cc-defs.el (c-version): Update the version number to
	"5.31.4".

2007-01-01  Richard Stallman  <rms@gnu.org>

	* isearch.el (isearch-done): Use FOUND-POINT or FOUND-START
	only if we restored isearch-window-configuration.

2006-12-31  Romain Francoise  <romain@orebokech.com>

	* net/tramp.el (tramp-default-method): Don't use `symbol-function'.

2006-12-31  Kim F. Storm  <storm@cua.dk>

	* files.el (auto-mode-case-fold): New defcustom.
	(set-auto-mode): If non-nil, perform second case-sensitive pass
	through auto-mode-alist if first pass failed.

2006-12-30  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-global-minor-mode): Doc fix.

2006-12-30  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-encrypt-string): Handle symmetric-key
	passphrase caching but leave keypair caching to pgg.

2006-12-30  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.55.

	* net/tramp.el (tramp-completion-mode): Use `wholenump' instead of
	`integerp'.  `char-equal' could fail else in case of negative
	numbers.  Reported by Toby Speight <T.M.Speight.90@cantab.net>.
	(top): Check for `font-lock-add-keywords' before calling; it
	doesn't exist under XEmacs.
	(tramp-yn-prompt-regexp): Fix regexp.  Add question from plink.
	(tramp-completion-mode): Remove clause (not
	tramp-unified-filenames), because the function is called in other
	context too, where this check results in wrong results in the
	XEmacs case on Windows.
	(tramp-touch): UTC handling is not possible for XEmacs.

2006-12-30  Jan Djärv  <jan.h.d@swipnet.se>

	* scroll-bar.el (previous-scroll-bar-mode): New variable.
	(set-scroll-bar-mode): Set previous-scroll-bar-mode.
	(scroll-bar-mode): Use previous-scroll-bar-mode if set.

	* term/x-win.el: Set scroll bar mode to right if set by X resources.

2006-12-30  Richard Stallman  <rms@gnu.org>

	* files.el (make-backup-file-name-1): Precompute abs name
	but don't lose the relative name.

	* international/mule-cmds.el (select-safe-coding-system-interactively):
	Fix message.

2006-12-30  Kevin Rodgers  <kevin.d.rodgers@gmail.com>  (tiny change)

	* files.el (backup-buffer): Show entire backup file name in msg.

2006-12-30  Juanma Barranquero  <lekktu@gmail.com>

	* image.el (image-type-header-regexps, image-type-from-data)
	(image-type-from-buffer, image-type-from-file-header):
	Revert changes from 2006-12-26.
	(image-type-auto-detectable): New variable.
	(image-type-auto-detected-p): New function.

	* files.el (magic-mode-alist): Detect image files with
	`image-type-auto-detected-p' instead of `image-type-from-buffer'.

2006-12-29  Nick Roberts  <nickrob@snap.net.nz>

	* dired.el (dired-sort-other): Move test for dired-mode...
	(dired-sort-set-modeline): ...to here.

2006-12-29  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* textmodes/fill.el (fill-comment-paragraph): Document 2006-12-24
	change.  Suggested by Stefan Monnier.

2006-12-29  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/bindat.el (bindat--unpack-group, bindat--length-group)
	(bindat--pack-group): Let-bind COUNT during repeat block evaluation.

2006-12-27  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Anchor FSF alias regexp,
	so it doesn't accidentally match an fsf.org mail address.
	(authors-renamed-files-alist): Add tcover-*.el.

2006-12-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-arch.el (vc-arch-find-version): New function.

	* vc-hooks.el (vc-version-backup-file-name): Revision names may be
	composed of arbitrary characters (even /) in some systems.

2006-12-27  Eli Zaretskii  <eliz@gnu.org>

	* international/mule-cmds.el (select-safe-coding-system-interactively):
	Improve the message in the *Warning* buffer.

2006-12-27  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-set-matches-1): Fix last change.  If default item is
	current buffer, it is ok to be first.

2006-12-27  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system-interactively):
	Use face `link' for problematic chars.

2006-12-27  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system-interactively):
	Improve the message in *Warning* buffer.

2006-12-27  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-set-matches-1): Never put current buffer first if
	there are other matches.

2006-12-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gud-watch): Allow duplicate names for watch
	expressions.
	(gdb-var-delete): Handle duplicate names.  Print message for non
	root expressions.
	(gdb-partial-output-name): Start buffer name with a space.
	(gdb-info-breakpoints-custom, gdb-reset): Handle space in above
	buffer name.

2006-12-26  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* mail/footnote.el (Footnote-insert-footnote): Fix the search of the
	last footnote when `footnote-spaced-footnotes' is nil.

2006-12-26  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (custom-browse-sort-alphabetically)
	(custom-buffer-sort-alphabetically)
	(custom-menu-sort-alphabetically): Doc fixes.  Add autoloads.

	* image.el (image-type-header-regexps): Change element format
	to include third item NOT-ALWAYS.
	(image-type-from-data): Handle new format.
	(image-type-from-buffer): Handle new format.  New arg INCLUDE-MAYBES.
	(image-type-from-file-header): Pass t for INCLUDE-MAYBES.

2006-12-26  Guanpeng Xu  <herberteuler@hotmail.com>

	* add-log.el (add-log-current-defun): Call `forward-sexp'
	multiple times to pick a member function name defined as
	part of nested classes/namespaces.

2006-12-26  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* emacs-lisp/easymenu.el (easy-menu-change): New arg MAP to indicate
	which keymap should be used to change menu.  It does not affect any
	existent code.

2006-12-26  Richard Stallman  <rms@gnu.org>

	* textmodes/fill.el (fill-paragraph): Check for a minibuffer
	rather than for being in a minibuffer window.

2006-12-25  Daiki Ueno  <ueno@unixuser.org>

	* pgg-def.el (pgg-passphrase-coding-system): Default to nil instead of
	locale-coding-system.
	* pgg-gpg.el (pgg-gpg-process-region): Encode passphrase with eol-type
	LF.

2006-12-25  Michael R. Mauger  <mmaug@yahoo.com>

	* progmodes/sql.el (sql-mode-abbrev-table): Correct initialization.
	(sql-mode-syntax-table): Disable double quoted strings.
	(sql-mode-font-lock-object-name): Add TYPE and TYPE BODY.

2006-12-25  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* startup.el (fancy-splash-last-input-event): New variable.
	(fancy-splash-special-event-action): New function.
	(fancy-splash-screens): Temporarily bind special events to it.
	Execute command for saved special event before exiting from
	recursive editing.

	* term/mac-win.el (mac-keyboard-translate-char, mac-unread-string):
	New functions.
	(mac-ts-update-active-input-area, mac-ts-unicode-for-key-event):
	Use mac-unread-string.

2006-12-24  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* textmodes/fill.el (fill-comment-paragraph): Prevent the use of
	an optimized comment regexp if `comment-start-skip' uses a ^.
	* bs.el (bs--up): Remove interactive spec.

2006-12-24  Chong Yidong  <cyd@stupidchicken.com>

	* woman.el (woman-decode-buffer): Signal error for alien macro sets.
	Suggested by James Cloos.

2006-12-24  Kevin Ryde  <user42@zip.com.au>

	* calendar/cal-dst.el (calendar-dst-starts): Default to second Sunday
	in March.
	(calendar-dst-ends): Default to first Sunday in November.

2006-12-24  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-encrypt-string): Inhibit use of agent within
	body of let form where encryption happens.  Acknowledge non-use of
	gpg-agent in docstring.
	(allout-toggle-subtree-encryption): Acknowledge non-use of
	gpg-agent in docstring.

2006-12-24  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-add-frequent-value): Alias for custom-add-option.

2006-12-23  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-diff-options): Clarify docstring.
	(ediff-setup-diff-regions): Disallow -u in ediff-diff-options.

	* emulation/viper-cmd.el (viper-post-command-sentinel):
	Protect against errors in hooks.
	(viper-add-newline-at-eob-if-necessary): Add newline only if we
	actually modify buffer; ignore errors if occur.

2006-12-23  Chong Yidong  <cyd@stupidchicken.com>

	* calendar/calendar.el (calendar-mode-map): Switch < and >.
	(calendar-mode-line-format): Use mouse-1 bindings, and tweak
	formatting.

2006-12-23  Richard Stallman  <rms@gnu.org>

	* simple.el (delete-horizontal-space): Doc fix.

2006-12-23  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (bootstrap-clean): Run bootstrap-clean-$(SHELLTYPE)
	explicitly in a recursive Make, not implicitly through prerequisites,
	since the latter is wrong under parallel builds.

2006-12-22  Eli Zaretskii  <eliz@gnu.org>

	* w32-fns.el (convert-standard-filename): Wrap in save-match-data.

2006-12-22  Kevin Rodgers  <kevin.d.rodgers@gmail.com>  (tiny change)

	* progmodes/sh-script.el (sh-make-vars-local): Fix a typo in
	message string.

2006-12-22  Ben North  <ben@redfrontdoor.org>  (tiny change)

	* outline.el (outline-next-visible-heading): Fix the case with a
	header at end-of-file with no final newline.

2006-12-22  Robert Thorpe  <rthorpe@realworldtech.com>  (tiny change)

	* indent.el (tab-always-indent): Doc fix.

2006-12-22  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-fontify-maximum-menu-size): Bump to 1000000.
	(Info-fontify-node): Do fontify indices.

	* tutorial.el (tutorial--detailed-help): Remove unnecessary link
	to the Emacs Lisp reference manual.
	(tutorial--tab-map): Remove.  All callers changed.
	(tutorial--find-changed-keys): New elt QUIET, used to...
	(tutorial--display-changes): ...ensure that warning messages are
	only issued once per changed key.
	(tutorial--remove-remarks): Delete unused code-path.
	(lang-strings): Remove extraneous formatting.
	(tutorial--save-tutorial): Prompt before saving tutorial state.

2006-12-21  Chong Yidong  <cyd@stupidchicken.com>

	* tutorial.el: Remove `cl' requirement.  Clean up whitespace.
	Replace '?\ ' by '?\s' throughout.
	(tutorial-warning-face): Inherit font-lock-warning-face.  Move to
	`help' custom group.
	(tutorial--key-description): New function.
	(tutorial--display-changes): Remove redundant arg.  Scan for all
	key sequences to avoid false matches.  Cleanup.
	(tutorial--saved-dir): Save to a subdirectory in .emacs.d to
	reduce homedir pollution.
	(help-with-tutorial): Call tutorial--display-changes with no arg.

2006-12-21  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map): Bind org-complete also to M-\t.

2006-12-20  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-default-method): We still need to check for
	`executable-find', because it is not bound under Emacs 20.
	(tramp-handle-file-name-completion)
	(tramp-completion-handle-file-name-completion): Handle optional
	parameter PREDICATE.
	(tramp-find-default-method): Add code for default values.

2006-12-20  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-stopped): After attaching to a process
	make gud-go send "continue".

2006-12-19  Juanma Barranquero  <lekktu@gmail.com>

	* image.el (image-type-header-regexps): Be more specific detecting `pbm'
	and `png' files.  Use non-capturing parenthesis for `tiff' regexp.

2006-12-19  Kim F. Storm  <storm@cua.dk>

	* bindings.el: Bind sigusr1 and sigusr2 in special-event-map
	instead of global-map.

	* files.el (magic-mode-alist): Allow matching file type by
	calling a function at bob.  Check for image types by calling
	image-type-from-buffer.  Suggested by Juanma Barranquero.
	(set-auto-mode): Do it.

2006-12-19  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-methods): Introduce new method `scpc'.
	Remove "ControlMaster" option from the other `scp*' methods.
	(tramp-default-method): Check for ssh-agent before setting to `scp'.

2006-12-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode): Show context after isearch.
	(org-show-siblings): New function.
	(org-show-context): Use `org-show-siblings'.

2006-12-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/syntax.el (syntax-ppss-flush-cache, syntax-ppss):
	Use syntax-ppss-toplevel-pos.

2006-12-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-current-line): Make sure that lines are
	counted from beginning of buffer.
	(org-table-copy-region, org-table-paste-rectangle): Make sure that
	lines are counted from beginning of buffer.

2006-12-17  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-build-node-completions): Signal error if tag-table
	marker is not found.

	* pgg-gpg.el (pgg-gpg-use-agent): Default to t.

2006-12-17  Alan Mackenzie  <acm@muc.de>

	* emacs-lisp/lisp.el (beginning-of-defun-raw): Optimize (for
	speed) the case when open-paren-in-column-0-is-defun-start is nil.
	Based on code by Martin Rudalics.

	* progmodes/cc-mode.el (c-basic-common-init): Don't set
	open-paren-in-column-0-is-defun-start to nil any more.

2006-12-17  Richard Stallman  <rms@gnu.org>

	* simple.el (delete-horizontal-space): Use prefix arg.

	* help-fns.el (describe-variable): Improve blank separator lines.

	* files.el (magic-mode-alist): Mark as risky.

	* files.el (make-backup-file-name-1):
	Expand backup-directory explicitly.

2006-12-17  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-default-method): Before setting to "pscp",
	check whether package password.el is loaded, or Pageant is running.

2006-12-17  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Increase to "0.14".
	(icalendar--rris): First try Emacs, then XEmacs.
	(icalendar--convert-ical-to-diary): Doc fix.
	Insert newline at end of target file.

2006-12-17  Kim F. Storm  <storm@cua.dk>

	* outline.el (outline-isearch-open-invisible-function): New defvar.
	(outline-flag-region): Use it if non-nil for isearch-open-invisible
	overlay property instead of outline-isearch-open-invisible.

2006-12-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-completion-help): Build ido-cur-list and ido-matches
	if ido-directory-too-big is set on entry.
	(ido-toggle-ignore, ido-completion-help): Print message while
	reading big directory.

2006-12-15  Richard Stallman  <rms@gnu.org>

	* shell.el (shell): Doc fix.

2006-12-15  Kevin Gallagher  <Kevin.Gallagher@boeing.com>

	* emulation/edt.el (edt-xserver):
	* emulation/edt-mapper.el (edt-xserver): Replace `/' with a `-',
	to fix a problem on Cygwin.

	* emulation/edt.el
	* emulation/edt-mapper.el
	* emulation/edt-lk201.el
	* emulation/edt-pc.el
	* emulation/edt-vt100.el: Update maintainer's email address.

2006-12-15  Simon Marshall  <simon@gnu.org>

	* progmodes/cc-fonts.el (c-font-lock-declarations): Fix previous change.

2006-12-15  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-atsu-font-table): Remove defvar.
	(mac-handle-font-selection): Use mac-atsu-font-face-attributes
	instead of mac-atsu-font-table.
	(fontset-default): Specify argument MAXIMUM in x-list-fonts calls.

2006-12-14  Stephen Leake  <stephen_leake@member.fsf.org>

	* align.el (align-match-tex-pattern): Fix a rare bug which
	hanged Emacs.

2006-12-14  Richard Stallman  <rms@gnu.org>

	* startup.el (use-fancy-splash-screens-p): Use frame-height
	instead of window-height.  Pass frame to image-size.

2006-12-13  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-locale-environment):
	Set default-sendmail-coding-system too.

2006-12-12  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-help.el: Fix copyright notice.

2006-12-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/syntax.el (syntax-ppss-toplevel-pos): New fun.

2006-12-11  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (unread-command-char): Reformat obsolescence info.

2006-12-11  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/cl-macs.el (defstruct): Suppress warnings
	about calls to cl-struct-setf-expander.

2006-12-11  Juanma Barranquero  <lekktu@gmail.com>

	* ediff-merg.el (ediff-show-clashes-only): Doc fix.
	(ediff-combination-pattern): Fix typo in docstring.

	* textmodes/refer.el (refer-find-entry): Doc fix.
	(refer-bib-files-regexp, refer-bib-directory, refer-bib-files)
	(refer-cache-bib-files, refer-find-next-entry, refer-yank-key):
	Fix typos in docstrings.

	* progmodes/idlwave.el (idlwave-library-path): Fix typos in docstring.

2006-12-10  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-init-completion-maps): Remap backward-kill-word
	instead of binding M-backspace.

2006-12-10  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (replace-match-data, replace-match-maybe-edit):
	* calc/calc-aent.el (calc-eval-error):
	* emulation/vi.el (vi-char-argument):
	* progmodes/cc-langs.el (c-at-vsemi-p-fn)
	(c-vsemi-status-unknown-p-fn): Doc fixes.

2006-12-10  Chong Yidong  <cyd@stupidchicken.com>

	* menu-bar.el (menu-bar-showhide-menu, menu-bar-tools-menu)
	(menu-bar-help-menu): Tooltip fixes.  Suggested by Francis Wright.

2006-12-10  Masatake YAMATO  <jet@gyve.org>

	* progmodes/ld-script.el (ld-script-keywords): Fix a typo.

2006-12-09  Chong Yidong  <cyd@stupidchicken.com>

	* mouse-sel.el (mouse-sel-mode): Register mouse-2 as a click type.

	* man.el (Man-xref-button-action): New function.  If the
	`Man-target-string' button property is a function, assume it
	accepts a position argument.
	(Man-abstract-xref-man-page): Use it.
	(Man-default-man-entry): New optional arg POS.

	* wdired.el (wdired-preprocess-symlinks): Make the spaces after
	symlink arrows read-only and non-rear-sticky.

2006-12-09  Martin Rudalics  <rudalics@gmx.at>

	* wdired.el (wdired-change-to-wdired-mode, wdired-finish-edit)
	(wdired-search-and-rename): Simplify code.
	(wdired-preprocess-files, wdired-preprocess-perms): Make
	read-only property of preceding character rear-nonsticky to
	avoid that it can be modified.  Put old-name and old-link
	properties on character preceding name and replace
	put-text-property by add-text-properties.
	(wdired-get-filename, wdired-get-previous-link): Get old-name
	and old-link properties from character preceding name and
	simplify code.
	(wdired-preprocess-perms, wdired-set-bit, wdired-toggle-bit)
	(wdired-perms-to-number): Make local-map property
	rear-nonsticky to avoid that text following permissions may be
	modified.  Use add-text-properties instead of put-text-property
	when changing a permission bit.
	(wdired-change-to-dired-mode): Remove stickiness properties.

2006-12-09  Juanma Barranquero  <lekktu@gmail.com>

	* international/mule-cmds.el (register-input-method): Doc fix.

2006-12-09  Masayuki Ataka  <masayuki.ataka@gmail.com>  (tiny change)

	* cmuscheme.el (scheme-start-file): Use `let*', not `let'.

2006-12-09  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* textmodes/flyspell.el (flyspell-hack-local-variables-hook): New.
	Force buffer local defs evaluation on local variables loading.
	(flyspell-mode-on, flyspell-mode-off): Use it in
	`hack-local-variables-hook'.

2006-12-09  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/find-func.el (find-variable): Doc fix.

	* help-fns.el (variable-at-point): Doc fix.

	* w32-fns.el (w32-append-code-lines): New function.

2006-12-09  Romain Francoise  <romain@orebokech.com>

	* comint.el (comint-insert-input): Delete obsolete comment.

2006-12-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/browse-url.el (browse-url): Set DISPLAY to the one of the
	current frame, in case we're connected to several displays.

2006-12-08  Juanma Barranquero  <lekktu@gmail.com>

	* frame.el (other-frame): Doc fix.
	(set-frame-parameter): Fix typo in docstring.

2006-12-07  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-index): Strip leading colon from topic.

2006-12-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Deal with references
	to pointers.

2006-12-05  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el (idlwave-xml-create-class-method-lists):
	Trim out spurious class inheritance "None" entries.

2006-12-05  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-paste-pop-rotate-temporarily): Doc fix.
	(cua-paste-pop): Rework last change for
	cua-paste-pop-rotate-temporarily, so first M-y and C-y works alike,
	pasting the head of the kill-ring, and prefix arg C-u M-y inserts the
	text inserted by the last M-y command.

2006-12-05  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* cmuscheme.el (run-scheme, scheme-start-file): Search the start
	file in ~/.emacs.d as `init_SCHEMENAME.scm' instead.

	* shell.el (shell): Search the start file in ~/.emacs.d as
	`init_SHELLNAME.sh' instead.

2006-12-05  Glenn Morris  <rgm@gnu.org>

	* progmodes/cperl-mode.el (cperl-mode)
	* progmodes/f90.el (f90-mode-abbrev-table)
	* progmodes/fortran.el (fortran-mode-abbrev-table)
	* progmodes/octave-mod.el (octave-abbrev-table)
	* progmodes/sql.el (sql-mode-abbrev-table): Define abbrevs even
	if abbrev-table is non-nil (saved user abbrevs may have been restored).

	* progmodes/vhdl-mode.el (vhdl-mode-abbrev-table-init): Do not
	clear abbrev table, else saved abbrevs will not be restored.

2006-12-04  Juanma Barranquero  <lekktu@gmail.com>

	* facemenu.el (facemenu-unlisted-faces): Put obsolescence info in
	the call to `make-obsolete-variable', not in the docstring.

2006-12-04  Chong Yidong  <cyd@stupidchicken.com>

	* facemenu.el (facemenu-unlisted-faces): Define as obsolete variable.

2006-12-04  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* progmodes/ebnf-abn.el:
	* progmodes/ebnf-bnf.el:
	* progmodes/ebnf-dtd.el:
	* progmodes/ebnf-ebx.el:
	* progmodes/ebnf-iso.el:
	* progmodes/ebnf-otz.el:
	* progmodes/ebnf-yac.el:
	* progmodes/ebnf2ps.el:
	* delim-col.el:
	* printing.el:
	* ps-bdf.el:
	* ps-mule.el:
	* ps-print.el: Remove 'Time-stamp' comment mark.

	* printing.el (pr-menu-bind): Replace 'easy-menu-change' by
	'easy-menu-add-item' when called in Emacs 21 or higher.

2006-12-04  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-xref.el (ada-check-current): Doc fix.
	(ada-make-body-gnatstub): Doc fix.  Remove redundant `progn'.

2006-12-04  Kim F. Storm  <storm@cua.dk>

	* bindings.el (global-map): Bind [signal t] to ignore, to have
	user signals ignored by default.

2006-12-04  Juanma Barranquero  <lekktu@gmail.com>

	* descr-text.el (describe-char-unicode-data): Use a hidden buffer for
	Unicode data file pointed to by `describe-char-unicodedata-file'.

2006-12-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/sgml-mode.el (sgml-font-lock-keywords-1): Fix pathological
	O(n^2) regexp-search by anchoring the search.

2006-12-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* whitespace.el (whitespace-cleanup-internal): Use current
	argument for recursive call.

2006-12-04  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-methods): Add "ControlPath" and
	"ControlMaster" to scp, scp1 and scp2 methods.  Suggested by
	Andreas Schwab <schwab@suse.de>.
	(tramp-do-copy-or-rename-file-out-of-band)
	(tramp-open-connection-rsh): Compute format spec for ?t.
	(tramp-process-actions): Trace command parameters.

2006-12-04  Nick Roberts  <nickrob@snap.net.nz>

	* simple.el (toggle-truncate-lines): Clarify doc string.

	* progmodes/gdb-ui.el (gdb-var-delete-children): New function.
	(gdb-speedbar-expand-node): Use it.

2006-12-04  Richard Stallman  <rms@gnu.org>

	* progmodes/python.el (python-indent): Add safe-local-variable prop.

	* dired.el (dired-revert): Turn off dired-after-readin-hook
	around call to dired-readin.

	* menu-bar.el (menu-bar-make-toggle): Add "globally"
	to echo area messages.
	<indicate-empty-lines, case-fold-search>:
	Add "globally" to Help string.
	<case-fold-search>: MESSAGE arg need not say "globally".
	(menu-bar-edit-menu <paste-from-menu>): Rename from select-and-paste.

2006-12-03  Liam Healy  <lnp@healy.washington.dc.us>  (tiny change)

	* outline.el (outline-end-of-subtree): Don't leave an empty
	line hidden as we would a real next heading.

2006-12-03  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-ascend): Add an optional argument to preserve
	original position of point when unsuccessful.  Also, fix a
	docstring error.
	(allout-yank-processing): Fix depth shift of multiple-topic so yanks
	work again, using allout-ascend's new option.
	(allout-setup-mode-map): Extract from allout-mode to initialize
	allout-mode-map.  Call it on file load, so the mode docstring
	substitutions work even if allout mode has not yet been invoked.
	(allout-mode): Use new allout-setup-mode-map to track any keybinding
	customizations since the map was last processed.  Also, refine the
	docstring so it's ship-shape for release.
	(allout-default-layout, allout-beginning-of-line-cycles)
	(allout-distinctive-bullets-string, allout-use-mode-specific-leader)
	(allout-encrypt-unencrypted-on-saves, allout-inhibit-auto-fill)
	(allout-version, allout-layout, allout-infer-body-reindent)
	(allout-infer-header-lead-and-primary-bullet, allout-view-change-hook)
	(allout-init, allout-mode, allout-next-heading, allout-chart-subtree)
	(allout-previous-heading, allout-goto-prefix-doublechecked)
	(allout-current-bullet-pos, allout-next-sibling-leap)
	(allout-pre-command-business, allout-encrypted-type-prefix)
	(allout-make-topic-prefix, allout-open-topic, allout-rebullet-heading)
	(allout-rebullet-topic, allout-rebullet-topic-grunt)
	(allout-flag-region, allout-expose-topic, allout-expose-topic)
	(allout-old-expose-topic, allout-listify-exposed)
	(allout-process-exposed, allout-latex-verb-quote)
	(allout-latex-verbatim-quote-curr-line, allout-adjust-file-variable)
	(allout-toggle-current-subtree-encryption)
	(allout-toggle-subtree-encryption, allout-bullet-isearch):
	Remove extraneous open-paren and close paren string escapes.

2006-12-03  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ada-xref.el (is-windows, ada-find-in-src-path): Doc fixes.
	(ada-xref-pos-ring-max, ada-xref-project-files, ada-xref-initialize)
	(ada-prj-default-comp-cmd, ada-quote-cmd, ada-compile-current):
	Fix typos in docstrings.

2006-12-03  Glenn Morris  <rgm@gnu.org>

	* progmodes/cc-align.el
	* progmodes/cc-awk.el
	* progmodes/cc-cmds.el
	* progmodes/cc-compat.el
	* progmodes/cc-defs.el
	* progmodes/cc-engine.el
	* progmodes/cc-langs.el
	* progmodes/cc-menus.el
	* progmodes/cc-mode.el
	* progmodes/cc-styles.el
	* progmodes/cc-vars.el
	* progmodes/vhdl-mode.el: Fix Copyright format.

2006-12-02  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (mouse-drag-track): Suppress automatic hscrolling for
	initial down event.

2006-12-02  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-toggle-set-mark): Doc fix.
	(cua-repeat-replace-region): Make M-v more robust.
	(cua-paste-pop-rotate-temporarily): New defcustom.
	(cua-paste-pop): Use it.
	(cua-auto-mark-last-change): New defcustom.
	(cua-pop-to-last-change): New helper function.
	(cua-set-mark): Use them.

2006-12-01  Nick Roberts  <nickrob@snap.net.nz>

	* menu-bar.el (toggle-case-fold-search): Clarify doc/help string and
	mini-buffer message.

2006-12-01  Juanma Barranquero  <lekktu@gmail.com>

	* descr-text.el (describe-char-unicodedata-file): Fix typo in docstring.

2006-12-01  Ben North  <ben@redfrontdoor.org>

	* paren.el: Fix the highlight overlay extension when the user types a
	sequence of char very fast just before the open parenthesis.

2006-12-01  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-mule.el: Eliminate Emacs 20 compatibility.

	* ps-print.el: Eliminate Emacs 20 & 21 compatibility.
	(ps-print-version): New version 6.7.
	(ps-print-quote): Replace '?\ ' by '?\s'.

2006-11-30  Juanma Barranquero  <lekktu@gmail.com>

	* hexl.el (hexl-goto-address, hexl-forward-char, hexl-forward-short)
	(hexl-forward-word, hexl-previous-line, hexl-beginning-of-1k-page)
	(hexl-end-of-1k-page): Doc fixes.
	(hexl-address-region, hexl-ascii-region, hexl-highlight-line-range):
	Fix typos in docstrings.

2006-11-30  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* ido.el (ido-local-file-exists-p): New.  Tell if a file exists
	locally, i.e. without using file name handlers.
	(ido-read-internal): Allow mono letter host names, avoiding the
	`c:' problem by testing if the file exists locally.
	(ido-complete, ido-make-file-list, ido-exhibit): Ditto.

2006-11-30  Masatake YAMATO  <jet@gyve.org>

	* hexl.el (hl-line-range-function, hl-line-face): Declare variables
	to avoid bytecomp warnings.
	(hexl-mode-old-ruler-function): New variable.
	(hexl-follow-line): Bind `hexl-mode-old-hl-line-range-function'
	and `hl-line-range-function' after `require' hl-line.
	Then bind `hl-line-range-function' and `hl-line-face'.
	Don't require frame.  Don't use `with-no-warnings'.
	(hexl-activate-ruler): Store the original value of
	`ruler-mode-ruler-function' to `hexl-mode-old-ruler-function'.
	(hexl-mode-exit): Restore the original value of
	`ruler-mode-ruler-function'.

2006-11-30  Alin C. Soare  <alinsoar@voila.fr>  (tiny change)

	* hexl.el (hexl-mode-old-hl-line-range-function): New variable.
	(hexl-mode-old-hl-line-face): New variable.
	(hexl-mode, hexl-mode-exit): Fix the highlighting of the current
	line when exit from the hexl-mode.

2006-11-30  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/bytecomp.el (byte-optimize, byte-compile-warnings):
	Doc fixes.

	* international/fontset.el (create-fontset-from-ascii-font)
	(create-fontset-from-fontset-spec, x-compose-font-name): Doc fixes.
	(fontset-name-p): Fix typo in docstring.

	* progmodes/cc-cmds.el (c-indent-exp): Fix typo in docstring.

2006-11-30  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-bdf.el: Fix maintainer email.

	* ps-mule.el: Fix maintainer email.  Define functions for Emacs 20
	compatibility.

	* ps-print.el: Fix maintainer email.  Define functions for Emacs 20 &
	21 compatibility.
	(ps-print-quote): Replace '?\s' by '?\ ' to keep compatibility with
	Emacs 20 & 21.

2006-11-29  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el (idlwave-auto-fill):
	Remove paragraph-start let to prevent auto-fill giving up.

2006-11-28  Juanma Barranquero  <lekktu@gmail.com>

	* vt100-led.el (led-state): Fix typo in previous change.

2006-11-27  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation):
	Fix interactive spec of the functions getting defined to make them
	work as documented.

2006-11-28  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (fancy-splash-screens): Hide initial splash buffer.

2006-11-28  Kim F. Storm  <storm@cua.dk>

	* icomplete.el (icomplete-tidy, icomplete-exhibit): Check that
	icomplete-mode is enabled.

2006-11-28  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (require): Require gnus-sum during compilation
	to avoid problem with a macro call.

2006-11-28  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/authors.el (authors-aliases): Add new alias.

	* progmodes/fortran.el (fortran-font-lock-keywords-4): Add `min'.
	(fortran-window-create-momentarily): Do not need string-to-char.

2006-11-28  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-get-constant):
	Replace incorrect use of assoc-default with a loop.

	* term.el (term-exec-1): Set envvar INSIDE_EMACS.

	* simple.el (next-error-find-buffer): Improve messages.

	* files.el (revert-buffer): Special error message if file
	is now not readable.

	* facemenu.el (facemenu-add-new-face): Improve doc strings of
	constructed commands.

	* comint.el (comint-exec-1): Provide Emacs version and `comint'
	in INSIDE_EMACS.

2006-11-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-mode-map): Add a binding for unified->context.

	* server.el: Remove spurious * in docstrings.
	(server-process-filter): Exit from recursive editing before processing
	a new request.

2006-11-27  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/hideshow.el (hs-already-hidden-p): Move to end of
	line so hidden blocks will be correctly identified.

2006-11-27  Juanma Barranquero  <lekktu@gmail.com>

	* ledit.el (ledit-save-defun, ledit-mode):
	* resume.el (resume-emacs-args-buffer):
	* rot13.el (rot13-display-table, rot13-translate-table, rot13)
	(rot13-string, rot13-region, rot13-other-window, toggle-rot13-mode):
	* vmsproc.el (subprocess-input, start-subprocess, subprocess-command)
	(command-send-input, command-kill-line):
	* vt100-led.el (led-state, led-on): Fix typos in docstrings.

	* autoarg.el (autoarg-kp-mode): Doc fix.

	* emacs-lock.el (toggle-emacs-lock): Doc fix.  Simplify.
	(emacs-lock-check-buffer-lock): Doc fix.  Use `when'.
	(check-emacs-lock): Doc fix.  Simplify.

	* iimage.el (iimage-mode-image-regex-alist): Doc fix.
	(iimage-mode-buffer): Fix typos in docstring.

	* misc.el (zap-up-to-char): Doc fix.

	* time-stamp.el: Fix comment and obsolescence string for old
	functions.  Use `dolist' instead of `while'.

	* userlock.el (ask-user-about-lock-help): Fix typos in output message.

	* disp-table.el (standard-display-8bit, standard-display-default):
	* ebuff-menu.el (electric-buffer-list):
	* ehelp.el (electric-help-command-loop):
	* font-core.el (font-lock-mode):
	* help-macro.el (make-help-screen):
	* help.el (describe-minor-mode-completion-table-for-indicator)
	(lookup-minor-mode-from-indicator):
	* indent.el (tab-to-tab-stop, move-to-tab-stop):
	* info-look.el (info-lookup-guess-custom-symbol):
	* locate.el (locate-main-listing-line-p, locate-mode, locate-do-setup):
	* longlines.el (longlines-wrap-line):
	* macros.el (insert-kbd-macro):
	* menu-bar.el (menu-bar-update-buffers):
	* misc.el (copy-from-above-command):
	* mouse.el (mouse-popup-menubar, mouse-buffer-menu-alist):
	* newcomment.el (comment-indent):
	* novice.el (disabled-command-function):
	* sort.el (sort-fields-syntax-table):
	* subr.el (momentary-string-display):
	* tar-mode.el (tar-header-block-summarize)
	(tar-clear-modification-flags):
	* terminal.el (terminal-cease-edit, te-more-break-unwind, te-newline)
	(te-clear-rest-of-line, te-clear-rest-of-screen, te-clear-screen)
	(te-insert-lines, te-delete-lines, te-delete, te-insert-spaces)
	(te-delete-char, te-down-vertically-or-scroll):
	* time-stamp.el (time-stamp-string-preprocess):
	* tmm.el (tmm-add-one-shortcut): "?\ " -> "?\s".

2006-11-26  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-timer-fn): Revert to old behavior when not
	in GUD mode.

	* progmodes/gud.el (gud-install-speedbar-variables): Remove bindings:
	speedbar-expand-line-descendants, speedbar-contract-line-descendants.

2006-11-26  Jan Djärv  <jan.h.d@swipnet.se>

	* progmodes/cc-vars.el (c-backslash-column): Add . at end of sentence.

2006-11-26  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-mode.el (ada-which-compiler): Fix typo in docstring.
	(ada-compile-goto-error): Adapt to new argument profile of
	compilation-goto-locus in Emacs 22.  Don't check if the various
	compile functions are defined; we already do "(require 'compile)".

2006-11-26  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: Fix commentary.

2006-11-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): Explain how to run in text command mode
	more clearly.  Say in error message that multiple debugging
	requires restarting GDB.

2006-11-25  Juanma Barranquero  <lekktu@gmail.com>

	* international/fontset.el (create-fontset-from-fontset-spec): Doc fix.

2006-11-25  Pavel Kobiakov  <pk_at_work@yahoo.com>

	* progmodes/flymake.el (flymake-posn-at-point-as-event): New function.
	(flymake-popup-menu): Use it instead of posn-at-point.

2006-11-25  Jan Djärv  <jan.h.d@swipnet.se>

	* progmodes/cc-vars.el (c-backslash-column):
	Mention c-backslash-max-column in documentation for c-backslash-column.

2006-11-24  Lars Hansen  <larsh@soem.dk>

	* net/tramp.el (tramp-default-method): Under Windows, change from
	plink to pscp.
	(tramp-copy-failed-regexp, tramp-action-copy-failed): Add.
	(tramp-actions-copy-out-of-band):
	Add pair (tramp-copy-failed-regexp tramp-action-copy-failed).
	(tramp-action-out-of-band): Move "Permission denied" handling to
	tramp-action-copy-failed.
	(tramp-do-copy-or-rename-file-out-of-band): unwind-protect killing of
	process buffer.

2006-11-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pgg-pgp.el (pgg-pgp-process-region): Change `args' from a list of
	strings to a single string.  Quote `errors-file-name'.
	(pgg-pgp-encrypt-region, pgg-pgp-decrypt-region, pgg-pgp-sign-region)
	(pgg-pgp-verify-region, pgg-pgp-insert-key, pgg-pgp-snarf-keys-region):
	Adjust calls.  Use `shell-quote-argument'.

	* international/mule.el (load-with-code-conversion)
	(with-category-table): Use with-current-buffer.
	(after-insert-file-set-coding): Use restore-buffer-modified-p.

2006-11-24  Eli Zaretskii  <eliz@gnu.org>

	* mail/smtpmail.el (smtpmail-send-it):
	Copy buffer-file-coding-system from the mail buffer.  Possibly add a
	MIME header for the message encoding.
	Bind coding-system-for-write around the call to mail-do-fcc.
	Use smtpmail-code-conv-from to encode queued mail messages.

2006-11-24  Juanma Barranquero  <lekktu@gmail.com>

	* tabify.el (tabify-regexp): Doc fix.

	* net/rcirc.el (rcirc-buffer-maximum-lines):
	* progmodes/gud.el (jdb): Fix space/tab mixup in docstrings.

	* play/gomoku.el (gomoku-terminate-game, gomoku-human-takes-back)
	(gomoku-prompt-for-move, gomoku-human-plays, gomoku-offer-a-draw):
	Fix typos in output messages.
	(gomoku-vector-length, gomoku-init-board): Fix typos in docstrings.

2006-11-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* hexl.el (hexl-mode): Don't try to guess the max-address: get it from
	the horse's mouth.
	(hexlify-buffer): Don't re-encode an arg that's already encoded.

2006-11-23  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-exec-process, ediff-same-file-contents):
	Remove condition-case.

2006-11-23  Glenn Morris  <rgm@gnu.org>

	* progmodes/f90.el (f90-comment-indent): Do not move point in
	default case.

2006-11-21  Romain Francoise  <romain@orebokech.com>

	* emacs-lisp/find-func.el (find-library-name): Don't strip ".el"
	from library name (reverts change of 2005-10-25).

2006-11-21  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* tutorial.el (tutorial--default-keys): Add newline and
	delete-backward-char bindings.
	(tutorial--detailed-help): Save excursion when finding keys.
	Correct warning string for M-x FOO case.
	(tutorial--display-changes): Print special keys in tutorial style.
	Tweak search regexp for changed keys.

2006-11-21  Bob Rogers  <rogers-emacs@rgrjr.dyndns.org>  (tiny change)

	* thingatpt.el (thing-at-point-url-at-point): Don't add a
	redundant scheme.

2006-11-21  Diane Murray  <disumu@x3y2z1.net>  (tiny change)

	* thingatpt.el (thing-at-point-uri-schemes): Add schemes that
	are new to the list at IANA.  Also added irc, mms, mmsh.

2006-11-20  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-help.el (idlwave-html-help-location):
	Fail gracefully for missing help packages.
	(idlwave-help-assistant-open-link): Open full links.
	(idlwave-help-assistant-help-with-topic): Direct help link.

	* progmodes/idlwave.el (idlwave-mode):
	Set add-log-current-defun-function.
	(idlwave-current-routine-fullname): Add, to support add-log.
	(idlwave-convert-xml-system-routine-info): Simplify XML parsing
	to reflect improvements to xml-parse-file.
	(idlwave-mode-menu-def): New binding for help-with-topic.

	* progmodes/idlw-shell.el (idlwave-shell-filter-directory):
	Handle extra newlines and spaces.
	(idlwave-shell-mode-map): Add help-with-topic.

2006-11-20  Chong Yidong  <cyd@stupidchicken.com>

	* tutorial.el (tutorial-warning-face): New face.
	(tutorial--detailed-help, tutorial--display-changes): Use it.
	(tutorial--find-changed-keys): Check ESC-prefix binding specially.
	Improve search pattern for occurrences of changed keys.

2006-11-20  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (x-last-cut-buffer-coding): New variable.
	(x-select-text): Set it.
	(x-cut-buffer-or-selection-value): Check also x-last-cut-buffer-coding
	when checking for newness.

2006-11-19  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (posn-image):
	* progmodes/ebnf2ps.el (ebnf-stop-on-error): Fix typos in docstrings.

	* emacs-lisp/regexp-opt.el (regexp-opt): Doc fix.

2006-11-19  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* progmodes/glasses.el (glasses-separate-parentheses-exceptions): New.
	Exceptions to the rule "add a space between an identifier and an
	opening parenthesis".  Defaulted to the `#define' problem of cpp.
	(glasses-parenthesis-exception-p): New.  Check if the region is an
	exception regarding to that.
	(glasses-make-readable): Use it.
	(glasses-convert-to-unreadable): Ditto.  Modify the file also if
	`glasses-convert-on-write-p' and `glasses-separate-parentheses-p' are t.

2006-11-19  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/bytecomp.el (byte-compile-if): Revert last change.

2006-11-19  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-mode.el (ada-make-body): Fix typo.

	* progmodes/ada-xref.el (ada-make-body-gnatstub): Fix typo.
	(ada-xref-initialize): Fix typo.  Use add-hook and remove-hook.

2006-11-18  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/bytecomp.el (byte-compile-maybe-guarded): Check `and'
	conditions for function or variable bindings.

	* comint.el (comint-exec-1): Set EMACS and INSIDE_EMACS to t.

	* progmodes/compile.el (compilation-start): Ditto.

2006-11-18  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (top): cl and custom are always required.

2006-11-18  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (x-cut-buffer-or-selection-value): Decode text from
	cut-buffers with next-selection-coding-system if not nil.

2006-11-17  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-fix-decoded-time): New function.
	(org-display-custom-time): Use `org-fix-decoded-time'.

2006-11-17  Chong Yidong  <cyd@stupidchicken.com>

	* menu-bar.el (menu-bar-games-menu): Remove yow.

2006-11-17  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-scan-tags): Re-align code fixed.
	(org-detach-overlay): Rename from `org-detatch-overlay'.
	(org-table-convert-region): Insert space after column separator.
	(org-agenda-kill): New command.
	(org-metaleft): Call `org-outdent-item' on bullets.
	(org-metaright): Call `org-indent-item' on bullets.
	(org-timestamp-change): Set `org-last-changed-timestamp'.
	(org-current-line): Make sure (bolp) returns correct result.
	(org-agenda-change-all-lines): Make sure TODO are highlighted.

2006-11-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-retrieve-revision): Set buffer-file-coding-system.

2006-11-16  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (global-map): Change 2006-08-16 fix to call
	mouse-yank-at-click explicitly, since mouse events are not carried
	over into keyboard macros.

2006-11-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-internal): Use current buffer's file name as default
	choice for ido-find-alternate-file.  Suggested by Matt Hodges.

2006-11-15  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-doublecheck-at-and-shallower): Clarify docstring.
	(allout-inhibit-aberrance-doublecheck): Rename from
	allout-during-yank-processing.  All callers changed.
	(allout-ascend): Provide for unusual case where some topic after
	the first in file is at lower depth than the first.
	(allout-shift-in): Ensure the offspring of the new containing
	topic are exposed.
	(allout-encrypt-string): Preserve the coding-system of the text,
	according to that of the containing buffer.
	(allout-toggle-subtree-encryption): When the text being encrypted
	requires a different coding system, offer to preserve the coding
	system using a file local var.

2006-11-15  Simon Marshall  <simon@gnu.org>

	* progmodes/cc-fonts.el (c-font-lock-declarators): Use c-at-toplevel-p
	to recognize "T t()" as a function declaration, rather than a
	variable instantiation, iff at the top-level or inside a class
	declaration.  Suggested by Feng Li <fengli@gmail.com>.

2006-11-14  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-xref.el (ada-parse-prj-file):
	Don't delete project buffer; user may want to edit it.
	(ada-xref-set-project-field, ada-xref-current-project-file)
	(ada-xref-current-project, ada-show-current-project)
	(ada-set-main-compile-application): New functions.
	(ada-xref-get-project-field, ada-require-project-file):
	Normalize use of ada-prj-default-project-file.
	(ada-gdb-application, ada-get-ada-file-name, ada-make-body-gnatstub):
	Normalize use of ada-require-project-file.
	(ada-prj-find-prj-file): Improve doc string, comments.

	* progmodes/ada-mode.el (ada-mode-version): Bump version.
	(ada-create-keymap): Add \C-c\C-m 'ada-set-main-compile-application.
	(ada-create-menu): Add ada-set-main-compile-application,
	ada-show-current-main, ada-show-current-project.

2006-11-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (inferior-python-mode-syntax-table): New var.
	(inferior-python-mode): Use it.

2006-11-14  Andreas Schwab  <schwab@suse.de>

	* term/xterm.el (terminal-init-xterm): Add more key bindings.

2006-11-13  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-copy-current-word): C-o copies region if active.

2006-11-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-emph-face): Fix typo in variable name.

2006-11-13  Juanma Barranquero  <lekktu@gmail.com>

	* ediff.el (ediff-revision):
	* files.el (set-visited-file-name):
	* mail/rmailout.el (rmail-output-body-to-file):
	Use `format', not `message', in `y-or-n-p' call.

2006-11-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-metaleft): Call `org-outdent-item' on bullets.
	(org-metaright): Call `org-indent-item' on bullets.
	(org-timestamp-change): Set `org-last-changed-timestamp'.
	(org-current-line): Make sure (bolp) returns correct result.
	(org-agenda-change-all-lines): Make sure highlighting TODO always works.

2006-11-12  Richard Stallman  <rms@gnu.org>

	* language/european.el (turkish-case-conversion-enable)
	(turkish-case-conversion-disable): New functions.
	("Turkish" lang env): Use them.

	* international/characters.el (case table):
	Do nothing special for i and I.

	* subr.el (remove-overlays): Fix last change.

	* cus-edit.el (custom-save-all): Use find-file-visit-truename
	for visiting the custom file.

2006-11-12  Markus Triska  <triska@gmx.at>

	* play/handwrite.el (handwrite): Also process lines not ending
	with newline.  Replace some position-fiddling with different
	logic.  Improve performance.

2006-11-12  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-xref.el (ada-prj-default-check-cmd): New variable,
	replacing deleted variable `ada-check-switch'.
	(ada-project-file-extension): Rename to `ada-prj-file-extension'.
	(ada-xref-project-files): Improve doc string.
	(ada-find-executable): New function.
	(ada-initialize-runtime-library): Use `ada-find-executable'.
	(ada-xref-set-default-prj-values): In compile commands, don't need
	`ada-cd-command'; `compile' does that more portably.
	Use ada-prj-default-check-cmd.
	(ada-parse-prj-file): Don't set 'debug_post_cmd, 'debug_pre_cmd
	properties if not specified in project file.
	(ada-goto-declaration): Display useful message for new error
	'error-file-not-found.
	(ada-get-ada-file-name, ada-find-in-src-path): Signal new error
	'error-file-not-found.
	(ada-get-all-references): Match latest ali syntax.  Signal new
	error 'error-file-not-found.
	(ada-find-in-ali): Match latest ali syntax.
	(ada-make-filename-from-adaname): Handle different semantics of
	gnatkr in GNAT 3.15p vs later.

	* progmodes/ada-stmt.el (ada-func-or-proc-name): Match changes to
	ada-procedure-start-regexp.
	(ada-or-accept, ada-or-delay, ada-or-terminate): Improve doc string.

	* progmodes/ada-mode.el: Replace conditional (require 'ispell)
	with defvar.
	(ada-language-version): Rename ada05 -> ada2005.
	(ada-align-region-separate): Add `eval-when-compile'.
	(ada-name-regexp): Remove unneeded escapes in regexp character
	alternative.
	(ada-compile-goto-error-file-linenr-re): New constant.
	(ada-matching-start-re): Handle additional cases `declare',
	`procedure', `function'.
	(ada-compile-goto-error): Handle "... at line nn".
	(ada-mode): Clearer syntax, comments for ff-special-constructs.
	Delete support for old versions of `align'.
	(ada-search-prev-end-stmt): Handle additional keyword `private'.
	(ada-check-defun-name): Simplify handling of `declare'.
	(ada-goto-matching-start): Handle nested `begin ... end'.
	Handle `declare', `protected', `procedure', `function'.
	(ada-create-menu): Presence of arm95 is not conditional on using
	GNAT compiler.

2006-11-12  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/re-builder.el (reb-mode): Set `blink-matching-paren' to
	nil in the *RE-Builder* buffer (it causes spurious error messages).

	* server.el (server-visit-files): If `minibuffer-auto-raise' has
	been set to t, respect it.

2006-11-11  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-mode.el: Delete `eval-and-compile' around `require'.
	Delete commented out code for old Emacs versions.  Autoloading of
	"ada-xref", "ada-prj" is useful even if compiler is not GNAT.
	(ada-mode-version): Bump version number.
	(ada-95-string-keywords, ada-2005-string-keywords)
	(ada-2005-keywords, ada-name-regexp): New constant.
	(ada-language-version, ada-procedure-start-regexp, ada-mode)
	(ada-font-lock-keywords): Add support for Ada 2005 keywords.
	(ada-package-start-regexp): Support private packages, include package
	name (for ada-set-point-accordingly).
	(ada-next-procedure, ada-previous-procedure)
	(ada-which-function-are-we-in): Match changes to
	ada-procedure-start-regexp.
	(ada-make-body): Make non-interactive; not a user function.
	(ada-make-subprogram-body): Improve doc string.

2006-11-11  Romain Francoise  <romain@orebokech.com>

	* progmodes/cperl-mode.el (cperl-mode): Before adding to it, make
	`compilation-error-regexp-alist' buffer-local, since we changed
	`compilation-error-regexp-alist-alist' locally.

2006-11-11  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-visit-files): Bind `minibuffer-auto-raise'
	to the value of `server-raise-frame'.

2006-11-11  Glenn Morris  <rgm@gnu.org>

	* ido.el (ido-enable-prefix)
	* ses.el (ses-call-printer-return)
	* net/tramp.el (tramp-unified-filenames)
	* progmodes/cc-align.el (c-lineup-string-cont)
	* progmodes/compile.el (compilation-directory-matcher)
	* progmodes/ebnf2ps.el (ebnf-stop-on-error)
	* progmodes/vhdl-mode.el (vhdl-reset-active-high)
	(vhdl-clock-rising-edge)
	* textmodes/org.el (org-export-with-timestamps)
	(org-export-remove-timestamps-from-toc)
	(org-export-with-tags): Improve previous doc fixes.

2006-11-11  Richard Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-mode-map):
	Bind C-c $ instead of M-RET.

2006-11-10  Simon Marshall  <simon@gnu.org>

	* progmodes/cc-fonts.el (c-font-lock-declarations): Don't overwrite
	fontification for "case" and "default" keywords.

2006-11-10  Andreas Schwab  <schwab@suse.de>

	* calendar/cal-dst.el (calendar-dst-check-each-year-flag):
	Avoid starting sentence with "nil".

2006-11-10  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-raise-frame): New option.
	(server-switch-buffer): Use it.

2006-11-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-many-windows): Start doc string
	with a capital.

2006-11-10  Carsten Dominik  <carsten.dominik@gmail.com>

	* textmodes/org.el (org-show-hierarchy-above)
	(org-show-following-heading): Fix typo in default value.
	(org-scan-tags): Make the search case-sensitive.
	(org-tags-sparse-tree): Don't overrule
	`org-show-following-heading' and `org-show-hierarchy-above'.
	(org-reveal): New command.
	(org-show-context): Rename from `org-show-hierarchy-above'.
	(org-fast-tag-selection-single-key): New option.
	(org-fast-tag-show-exit, org-set-current-tags-overlay): New functions.
	(org-tags-overlay): New variable.
	(org-agenda-todo-ignore-deadlines): New option.
	("session"): Add circular data structure `org-mark-ring' to
	exceptions list in session.el.
	(org-agenda-window-setup, org-agenda-restore-windows-after-quit):
	New options.
	(org-agenda-quit): Use `org-agenda-restore-windows-after-quit'.
	(org-prepare-agenda, org-agenda-quit): Use `org-agenda-window-setup'.
	(org-pre-agenda-window-conf, org-blank-before-new-entry): New vars.
	(org-finalize-agenda): Activate bracket links in agenda.
	(org-at-timestamp-p, org-at-date-range-p): Additional argument
	INACTIVE-OK.
	(org-show-hierarchy-above, org-show-following-heading):
	List values allowed for fine-tuned configuration.
	(org-show-hierarchy-above): New argument CONTEXT, use the
	fine-tuned settings in `org-show-hierarchy-above' and
	`org-show-following-heading'.
	(org-display-custom-time): New function.
	(org-toggle-time-stamp-overlays, org-insert-time-stamp): New function.
	(org-display-custom-times, org-time-stamp-custom-formats):
	(org-maybe-intangible): New macro.
	(org-activate-bracket-links, org-hide-wide-columns):
	Use `org-maybe-intangible'.
	(org-open-file): Use `shell-quote-argument'.
	(org-display-internal-link-with-indirect-buffer): New option.
	(org-file-remote-p): Get regexp from list.
	(org-link-expand-abbrev): New function.
	(org-link-abbrev-alist): New option.
	(org-open-at-point, org-cleaned-string-for-export):
	Call `org-link-expand-abbrev'.
	(org-timeline, org-agenda-list, org-todo-list)
	(org-tags-view): Remove the KEEP-MODES argument.
	(org-finalize-agenda-hook): New hook.
	(org-get-alist-option): New function.
	(org-follow-timestamp-link): New function.
	(org-open-at-point): Call `org-follow-timestamp-link'.
	(org-log-note-marker, org-log-note-purpose)
	(org-log-note-window-configuration): New variables.
	(org-add-log-maybe, org-add-log-note, org-store-log-note): New funs.
	(org-log-note-headings): New option.
	(org-dblock-write:clocktable): Bug fix, removed infinite loop.
	(org-store-link): Support for dired-mode.
	(org-open-file): Substitute environment variables into filename.
	(org-last): New defsubst.
	(org-agenda-re-align-tags): New function.
	(org-agenda-align-tags-to-column): New option.
	(org-agenda-timeline): Group removed.
	(org-prepare-agenda, org-prepare-agenda-buffers)
	(org-run-agenda-series, org-timeline, org-agenda-list)
	(org-todo-list, org-tags-view): Call `org-agenda-prepare' and set
	the text property indicating the agenda type.
	(org-agenda-post-command-hook): Get agenda type from text property
	at point.
	(org-agenda): Handle command sets.  Set `org-agenda-last-arguments'
	and obey `org-agenda-overriding-arguments'.
	(org-agenda-overriding-arguments, org-agenda-last-arguments): New vars.
	(org-agenda-goto-today, org-agenda-later, org-agenda-earlier)
	(org-agenda-week-view, org-agenda-day-view):
	Use `org-agenda-overriding-arguments' to make updating work with
	multi-block agendas.
	(org-agenda-prefix-format): Allow different formats for the
	different agenda entry types.
	(org-timeline-prefix-format): Option removed, use
	`org-agenda-prefix-format' instead.
	(org-prepare-agenda): New function.
	(org-select-timeline-window): Option removed, use
	`org-select-agenda-window' instead.
	(org-respect-restriction): Variable removed.
	(org-cmp-tag): New function.
	(org-agenda-sorting-strategy, org-entries-lessp):
	Implement sorting by last tag.
	(org-complete): Better completion in in-buffer option lines.
	(org-in-item-p): New function.
	(org-org-menu): Add entries for checkboxes.
	(org-cycle): Extra grouping in outline-regexp, because it is used
	in a search with "^" prepended.
	(org-provide-checkbox-statistics): New option.
	(org-set-font-lock-defaults): Highlight checkbox statistics.
	(org-update-checkbox-count-maybe)
	(org-get-checkbox-statistics-face): New functions.
	(org-update-checkbox-count): New command.
	(org-insert-item, org-toggle-checkbox):
	Call `org-update-checkbox-count-maybe'.
	(org-export-as-html): XEmacs compatibility for coding system.
	(org-force-cycle-archived): New command.
	(org-cycle-hide-archived-subtrees): Display message when ARCHIVE
	overrules cycling.
	(org-fix-position-after-promote): If the line contains only a todo
	keyword, add a final space.
	(org-promote-subtree, org-demote-subtree):
	Call `org-fix-position-after-promote'.

2006-11-10  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-dst.el: Do not assume DST starts/ends on the same
	date in every year.
	(calendar-dst-check-each-year-flag): New customizable variable.
	(calendar-dst-find-data): New function, extracted from
	calendar-current-time-zone.
	(calendar-current-time-zone): Use calendar-dst-find-data.
	(calendar-dst-transition-cache): New variable.
	(calendar-dst-find-startend, calendar-dst-starts)
	(calendar-dst-ends): New functions.
	(calendar-daylight-savings-starts)
	(calendar-daylight-savings-ends): Change value to use
	calendar-dst-starts, calendar-dst-ends; respectively.

	* progmodes/f90.el (f90-indent-region): Bind case-fold-search to t.

	* ido.el (ido-enable-prefix)
	* ses.el (ses-call-printer-return)
	* net/tramp.el (tramp-unified-filenames)
	* progmodes/cc-align.el (c-lineup-string-cont)
	* progmodes/compile.el (compilation-directory-matcher)
	* progmodes/ebnf2ps.el (ebnf-stop-on-error)
	* progmodes/gdb-ui.el (gdb-many-windows)
	* progmodes/vhdl-mode.el (vhdl-reset-active-high)
	(vhdl-clock-rising-edge)
	* textmodes/org.el (org-export-with-timestamps)
	(org-export-remove-timestamps-from-toc, org-export-with-tags)
	(org-read-date): Doc fix (Nil -> nil).

2006-11-10  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (x-select-text, x-cut-buffer-or-selection-value):
	Encode/decode text to/from cut buffers to/from iso-latin-1 only.

2006-11-10  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs--window-for-buffer): Remove.
	(bs--show-with-configuration): Use `get-window-with-predicate'
	instead of `bs--window-for-buffer'.

2006-11-10  Kenichi Handa  <handa@m17n.org>

	* files.el (revert-buffer): Fix previous change.

2006-11-09  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs--redisplay): Fix typo in docstring.
	(bs--window-config-coming-from): Make frame-local.
	(bs--restore-window-config): New function.
	(bs-kill, bs-select, bs-select-other-window)
	(bs-select-other-frame): Use it.
	(bs--window-for-buffer): Return as soon as a matching buffer is found.
	(bs--show-with-configuration): Save the window configuration as a
	frame local var, and only if *buffer-selection* is not already
	visible on this frame.

2006-11-08  Chong Yidong  <cyd@stupidchicken.com>

	* vc-svn.el (vc-svn-admin-directory): New var.
	(vc-svn-registered, vc-svn-responsible-p)
	(vc-svn-repository-hostname): Use it.
	Suggested by arit93@yahoo.com.

2006-11-08  Juanma Barranquero  <lekktu@gmail.com>

	* ldefs-boot.el: Regenerate.

2006-11-08  Alan Mackenzie  <acm@muc.de>

	* emacs-lisp/lisp.el (beginning-of-defun-raw): Code up the
	case (eq open-paren-in-column-0-is-defun-start nil) by searching
	for least nested open-paren.

2006-11-08  Romain Francoise  <romain@orebokech.com>

	* subr.el (remove-overlays): Fix typo in last change.

2006-11-08  Richard Stallman  <rms@gnu.org>

	* subr.el (remove-overlays): Call overlay-recenter.

2006-11-08  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* printing.el (pr-alist-custom-set, pr-ps-utility-custom-set)
	(pr-ps-name-custom-set, pr-txt-name-custom-set): Return back the old
	behavior.
	(pr-menu-bind): Act on global-map instead of menu-bar-file-menu
	directly.

2006-11-08  Juanma Barranquero  <lekktu@gmail.com>

	* ido.el (ido-ignore-extensions, ido-show-dot-for-dired)
	(ido-max-dir-file-cache, ido-decorations)
	(ido-rewrite-file-prompt-functions, ido-use-mycompletion-depth)
	(ido-magic-backward-char, ido-enter-dired)
	(ido-enter-insert-buffer, ido-enter-insert-file, ido-dired)
	(ido-list-directory, ido-first-match, ido-only-match)
	(ido-subdir, ido-indicator): Fix typos in docstrings.
	(ido-buffer-internal, ido-completion-help): Fix typos in messages.
	(ido-read-internal): Fix typo in error message.

2006-11-08  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-default-coding-systems):
	Always set default-file-name-coding-system to utf-8 for Mac Darwin.

2006-11-08  Juanma Barranquero  <lekktu@gmail.com>

	* makefile.w32-in (setwins): Remove.
	(WINS_ALMOST): New macro.
	(WINS): Use it.
	(autoloads): Don't extract autoloads from files in obsolete/.

2006-11-07  Chong Yidong  <cyd@stupidchicken.com>

	* whitespace.el (whitespace-buffer): Call remove-overlays after
	overlay-recenter for performance.  Suggested by Martin Rudalics.

2006-11-07  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-default-method): scp is the default method.

2006-11-07  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-start): Save also the Emacs pid in the server file.

2006-11-07  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-cite.el (reftex-pop-to-bibtex-entry): Preserve
	point when displaying a bibtex cross reference in the echo area.

2006-11-06  Juanma Barranquero  <lekktu@gmail.com>

	* international/mule.el (make-char): Fix typo in docstring.
	(load-with-code-conversion, charsetp): Doc fixes.

	* international/ja-dic-cnv.el (skkdic-convert):
	* cus-edit.el (hook): Fix typo in docstring.

2006-11-06  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-mode-map): Move defvar above code using it.
	(custom-mode-link-map): New variable.
	(custom-group-link, custom-manual): Use follow-link.

2006-11-06  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el: Fix typo in name of author of bibtex.el,
	"Mark Shapiro" -> "Marc Shapiro".  Update his email address.

2006-11-06  Richard Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-correct-word-before-point):
	New function broken out of flyspell-correct-word.
	(flyspell-mode-map): Bind it to M-RET.
	(flyspell-correct-word): Call it.

	* textmodes/fill.el (fill-minibuffer-function): New function.
	(fill-paragraph): Bind fill-paragraph-function to
	fill-minibuffer-function.

	* ruler-mode.el (ruler-mode-map): Add bindings for up-events
	so that they aren't undefined.

	* dired.el (dired-readin): Locally bind file-name-coding-system.

	* bindings.el: Shorten and clarify usual mode line mouse help string.

	* Makefile.in (autoloads): Don't include `obsolete'.

2006-11-06  Chong Yidong  <cyd@stupidchicken.com>

	* printing.el (pr-alist-custom-set, pr-ps-utility-custom-set)
	(pr-ps-name-custom-set, pr-txt-name-custom-set): Don't update the
	Printing menu if it's not initialized.
	(pr-menu-bind): Act on menu-bar-file-menu directly.

2006-11-06  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (view-emacs-news): Fix typo in error message.

	* menu-bar.el (menu-bar-update-buffers): Fix typo in menu entry.

	* shadowfile.el (shadow-define-regexp-group)
	(shadow-literal-groups, shadow-insert-var): Doc fixes.
	(shadow-read-files): Fix typo in message.
	(shadow-inhibit-overload, shadow-find, shadow-suffix)
	(shadow-site-match, shadow-write-todo-file, shadow-insert-var)
	(shadow-suffix, shadow-site-match, shadow-expand-file-name)
	(shadow-file-match): Fix typos in docstrings.

	* terminal.el (terminal-emulator): Fix typo in message.

	* emacs-lisp/authors.el (authors-fixed-entries): Fix typo.

	* emacs-lisp/lselect.el (x-kill-primary-selection)
	(x-delete-primary-selection, x-copy-primary-selection):
	Fix typos in error messages.

	* emulation/edt-mapper.el: Fix typo in interactive message.

	* mail/emacsbug.el (report-emacs-bug): Fix typos in output message.

	* textmodes/ispell.el (ispell, ispell-local-dictionary-alist)
	(ispell-help): Fix typos in docstrings.
	(ispell-help): Fix typo in output message.

	* allout.el (allout-adjust-file-variable)
	(allout-passphrase-verifier-string)
	(allout-passphrase-hint-string)
	(allout-toggle-current-subtree-encryption):
	* apropos.el (apropos-synonyms):
	* cus-edit.el (hook):
	* emacs-lock.el (emacs-lock-from-exiting):
	* follow.el (follow-avoid-tail-recenter-p):
	* hexl.el (hexl-mode):
	* mouse-copy.el (mouse-copy-work-around-drag-bug):
	* mouse.el (mouse-set-font):
	* resume.el (resume-emacs-args-file):
	* rfn-eshadow.el (file-name-shadow-tty-properties):
	* t-mouse.el (t-mouse-process, t-mouse-mode):
	* emacs-lisp/cust-print.el (custom-print-install)
	(custom-print-uninstall, custom-format):
	* emacs-lisp/shadow.el (list-load-path-shadows):
	* emulation/tpu-edt.el (tpu-help-text)
	(tpu-save-all-buffers-kill-emacs, tpu-emacs-replace)
	(tpu-reset-control-keys):
	* emulation/vip.el (vip-emacs-local-map)
	(vip-change-mode-to-emacs):
	* emulation/viper.el (viper-mode, viper-set-hooks)
	(viper-major-mode-modifier-list):
	* emulation/viper-init.el (viper-emacs-state-cursor-color):
	* emulation/viper-keym.el (viper-emacs-kbd-map)
	(viper-toggle-key):
	* mail/feedmail.el (feedmail-queue-reminder)
	(feedmail-queue-reminder-alist, feedmail-confirm-outgoing)
	(feedmail-confirm-outgoing-timeout, feedmail-nuke-bcc)
	(feedmail-nuke-resent-bcc, feedmail-fill-to-cc-fill-column)
	(feedmail-sender-line, feedmail-force-binary-write)
	(feedmail-from-line, feedmail-deduce-envelope-from)
	(feedmail-x-mailer-line, feedmail-message-id-generator)
	(feedmail-date-generator, feedmail-fiddle-plex-user-list)
	(feedmail-enable-spray, feedmail-spray-this-address)
	(feedmail-spray-address-fiddle-plex-list, feedmail-enable-queue)
	(feedmail-queue-runner-confirm-global)
	(feedmail-ask-before-queue-prompt)
	(feedmail-ask-before-queue-reprompt)
	(feedmail-prompt-before-queue-standard-alist)
	(feedmail-prompt-before-queue-user-alist)
	(feedmail-prompt-before-queue-help-supplement)
	(feedmail-queue-use-send-time-for-message-id)
	(feedmail-queue-default-file-slug, feedmail-queue-fqm-suffix)
	(feedmail-mail-send-hook-splitter, feedmail-mail-send-hook)
	(feedmail-mail-send-hook-queued)
	(feedmail-confirm-addresses-hook-example)
	(feedmail-last-chance-hook, feedmail-before-fcc-hook)
	(feedmail-queue-runner-mode-setter)
	(feedmail-queue-alternative-mail-header-separator)
	(feedmail-queue-runner-message-sender)
	(feedmail-buffer-eating-function, feedmail-binmail-template)
	(feedmail-run-the-queue-no-prompts)
	(feedmail-run-the-queue-global-prompt)
	(feedmail-queue-subject-slug-maker, feedmail-fiddle-header)
	(feedmail-envelope-deducer, feedmail-fiddle-date)
	(feedmail-default-message-id-generator)
	(feedmail-fiddle-message-id, feedmail-fiddle-x-mailer)
	(feedmail-fiddle-spray-address, feedmail-deduce-address-list):
	* mail/vms-pmail.el (vms-pmail-save-and-exit, vms-pmail-abort)
	(vms-pmail-setup):
	* play/dunnet.el (dun-help):
	* play/handwrite.el (handwrite):
	* play/hanoi.el (hanoi-unix-64):
	* progmodes/idlwave.el (idlwave-rescan-asynchronously):
	* textmodes/enriched.el (fixed):
	* textmodes/org.el (org-file-apps)
	(org-emphasis-regexp-components, org-emphasis-alist):
	* textmodes/texinfmt.el (batch-texinfo-format):
	Fix typos in docstrings.

2006-11-05  Juanma Barranquero  <lekktu@gmail.com>

	* loadhist.el (read-feature): Don't complete features not loaded
	from a file (which make `unload-feature' to fail).

2006-11-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* add-log.el (add-log-time-zone-rule): Mark as safe-local-variable.

2006-11-05  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (command-line-1): Kill emacs if the last frame is
	deleted while evaluating the command-line arguments.

2006-11-05  Richard Stallman  <rms@gnu.org>

	* startup.el (init-file-had-error): Add doc string.
	(fancy-splash-text, fancy-splash-head, fancy-splash-tail):
	Use fixed-width font for keyboard key descriptions.

	* cus-edit.el (custom-save-all): Error if saving in .emacs
	and it had an error when loaded.

	* dired-aux.el (dired-copy-file-recursive): Catch errors
	from recursive copies in the loop, around the recursive call.

2006-11-05  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* battery.el (battery-linux-proc-acpi): Search an ac_adapter in
	`/proc/acpi/ac_adapter/*'.  Ditto for the thermometers in
	`/proc/acpi/thermal_zone/*'.
	(battery-search-for-one-match-in-files): New.  Search a regexp in
	the content of some files.

2006-11-05  Martin Rudalics  <rudalics@gmx.at>

	* window.el (mouse-autoselect-window-now): Remove variable.
	(mouse-autoselect-window-state): New variable.
	(mouse-autoselect-window-start, mouse-autoselect-window-cancel)
	(mouse-autoselect-window-select, handle-select-window):
	Rewritten to make mouse-autoselect-window-timer a one-shot timer.
	Suspend delayed autoselection during menu or popup dialog.

	* info-look.el (info-lookup-guess-custom-symbol): New function
	for retrieving symbol at point in custom buffers.
	(top level) <info-lookup-maybe-add-help>: Add backquote and
	comma to ignored characters in regexps of help specifications
	for emacs-lisp-mode and lisp-interaction-mode.  This permits
	looking up symbols in `...' and after a comma.  Add help
	specifications for custom-mode and help-mode.

2006-11-04  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-redecode-body): New optional argument RAW.
	Don't encode body if RAW is non-nil, or if the old encoding is
	identical to the new encoding, or if the body contains only
	eight-bit-* characters.

2006-11-04  Yoni Rabkin Katzenell  <yoni-r@actcom.com>  (tiny change)

	* faces.el (faces-sample-overlay, describe-face): Revert last changes.
	(faces-sample-overlay): Remove variable.
	(describe-face): Insert sample text in the face being described.

2006-11-04  Martin Rudalics  <rudalics@gmx.at>

	* whitespace.el (whitespace-indent-regexp): Make this match any
	multiples of eight spaces near the beginning of a line.
	(whitespace-buffer): Use `remove-overlays' instead of
	`whitespace-unhighlight-the-space' and `overlay-recenter' to
	speed up overlay handling.
	(whitespace-buffer-leading, whitespace-buffer-trailing):
	Make these functions highlight the text removed by
	`whitespace-buffer-leading-cleanup' and
	`whitespace-buffer-trailing-cleanup' respectively.
	(whitespace-buffer-search): Use `with-local-quit'.
	Move `format' out of loop to speed up scanning larger buffers.
	(whitespace-unhighlight-the-space): Remove `remove-hook' since
	that function is never added to a hook.
	(whitespace-spacetab-regexp, whitespace-ateol-regexp)
	(whitespace-buffer-leading-cleanup)
	(whitespace-refresh-rescan-list): Fix docstrings.

2006-11-03  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-during-yank-processing): Cue for inhibiting
	aberrance processing during yanks.
	(allout-doublecheck-at-and-shallower): Reduce the limit to reduce
	the amount of yanked topics that can be aberrant.
	(allout-do-doublecheck): Encapsulate this multiply-used recipe in
	a function, and supplement with inhibition of doublechecking
	during yanks.
	(allout-beginning-of-line, allout-next-heading)
	(allout-previous-heading, allout-goto-prefix-doublechecked)
	(allout-back-to-current-heading, allout-next-visible-heading)
	(allout-next-sibling): Use new allout-do-doublecheck function.
	(allout-next-sibling): Ensure we made progress when returning
	other than nil.
	(allout-rebullet-heading): Preserve text property annotations
	indicating the text was hidden, if it was.
	(allout-kill-line): Remove any added was-hidden annotations.
	(allout-kill-topic): Remove any added was-hidden annotations.
	(allout-annotate-hidden): Inhibit adding was-hidden text
	properties to the undo list.
	(allout-deannotate-hidden): New function to remove was-hidden
	annotation.
	(allout-hide-by-annotation): Use new allout-deannotate-hidden.
	(allout-remove-exposure-annotation): Replace by
	allout-deannotate-hidden.
	(allout-yank-processing): Signal that yank processing is happening
	with allout-during-yank-processing.  Also, wrap
	allout-unprotected's closer to the text changes, for easier
	debugging.  We need to inhibit-field-text-motion explicitly, in
	lieu of the encompassing allout-unprotected.
	(outlineify-sticky): Adjust criteria for triggering new outline
	decorations to presence or absence of any topics, not just a topic
	at the beginning of the buffer.

2006-11-03  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs--show-all, bs--redisplay):
	* cus-edit.el (custom-unlispify-menu-entries)
	(custom-unlispify-tag-names, custom-prompt-variable):
	* expand.el (expand-pos):
	* speedbar.el (speedbar-generic-list-tag-p):
	* wid-edit.el (widget-image-enable):
	* emacs-lisp/checkdoc.el (checkdoc-rogue-space-check-engine):
	* emacs-lisp/find-func.el (find-function-noselect)
	(find-function, find-variable-noselect, find-variable)
	(find-definition-noselect, find-face-definition):
	* mail/rmail-spam-filter.el (rsf-scanning-messages-now):
	* net/eudc-vars.el (eudc-expansion-overwrites-query):
	* progmodes/ada-xref.el (ada-find-in-ali):
	* textmodes/flyspell.el (flyspell-check-tex-math-command):
	* textmodes/org.el (org-copy-subtree):
	* textmodes/table.el (table--row-column-insertion-point-p):
	Use "non-nil" in docstrings.

2006-11-03  Mark Davies  <mark@mcs.vuw.ac.nz>

	* sort.el (sort-columns): Set the field separator to tab; on
	NetBSD, sort complains if "\n" is used as field separator.

2006-11-03  NIIMI Satoshi  <sa2c@sa2c.net>

	* emacs-lisp/pp.el (pp-eval-last-sexp): Evaluate target sexp.

2006-11-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el (server-auth-key): Remove.  Replace by a process-property.
	(server-start): Don't remove the file of the previous process, but
	instead clear out the place for the new file.
	(server-start): Set the :auth-key property.
	(server-process-filter): Use the :auth-key property.

2006-11-02  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map): No longer copy
	`outline-mode-map' explicitly - this is already done by
	`define-derived-mode'.

2006-11-02  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-visit-files): Use `when'.
	(server-process-filter): When authentication fails, send error
	message to client.  Wrap `process-send-region' in `ignore-errors'
	instead of `condition-case', and remove misleading comment.

2006-11-01  Juri Linkov  <juri@jurta.org>

	* simple.el (yank): Doc fix.

2006-11-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el: Try and fit within 80 columns.
	(server-start): Make the auth file unreadable by other users.

2006-10-31  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* battery.el (battery-linux-proc-acpi): Prevent range error when
	`full-capacity' is 0.

2006-10-31  Yoni Rabkin Katzenell  <yoni-r@actcom.com>  (tiny change)

	* faces.el (faces-sample-overlay): New defvar.
	(faces-sample-overlay): New function to show face sample text.
	(describe-face): Use it.

2006-10-31  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-stmt.el: Change maintainer, apply
	whitespace-cleanup, checkdoc.
	(ada-func-or-proc-name): Add doc string.

	* progmodes/ada-prj.el (ada-prj-new): Change maintainer, apply
	whitespace-cleanup, checkdoc.  Minor improvements to many doc
	strings and comments.
	(ada-prj-display-page): Change buffer name to more accurately
	reflect function.

	* progmodes/ada-xref.el: Change maintainer, apply
	whitespace-cleanup, checkdoc.  Minor improvements to many doc
	strings and comments.  Don't look for `gvd' or `ddd' debuggers.
	(ada-compile-current): Don't add newlines to commands.

2006-10-31  Juanma Barranquero  <lekktu@gmail.com>

	* server.el: Add support for TCP sockets.
	(server-use-tcp, server-host, server-auth-dir): New options.
	(server-auth-key): New variable.
	(server-ensure-safe-dir): Create nonexistent parent dirs.
	Ignore Unix-style file modes on Windows.
	(server-start): Create a TCP or Unix socket according to the value
	of `server-use-tcp'.  For TCP sockets, create the id/auth file in
	`server-auth-dir' directory.
	(server-process-filter): Delete process if authentication
	fails (which never happens for Unix sockets).

2006-10-30  David Kastrup  <dak@gnu.org>

	* subr.el (add-to-list): Don't continue checking if a match has
	been found.

2006-10-30  Chong Yidong  <cyd@stupidchicken.com>

	* tutorial.el: Move defvars to avoid bytecomp warnings.
	(tutorial--find-changed-keys): Check if viper-current-state is
	bound before using it.
	(help-with-tutorial): Check if viper-tutorial is defined before
	using it.

2006-10-30  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* help-fns.el (help-with-tutorial): Move to tutorial.el.

	* tutorial.el: New file.
	(help-with-tutorial): Move here from help-fns.el.  Add help for
	rebound keys.  Fix resume of tutorial.
	(tutorial--describe-nonstandard-key, tutorial--sort-keys)
	(tutorial--find-changed-keys, tutorial--display-changes)
	(tutorial--saved-dir, tutorial--saved-file)
	(tutorial--save-tutorial): New functions to support the changes in
	help-with-tutorial.

2006-10-30  Kenichi Handa  <handa@m17n.org>

	* files.el (revert-buffer): If a unibyte buffer is being reverted
	with a coding system for multibyte, set buffer multibyte before
	calling insert-file-contents.

2006-10-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el (server-select-display): Use a dummy buffer to detect when
	the frame is later used.
	(server-select-display): New function.
	(server-process-filter): Use it to detect unused temp frames.

2006-10-29  Stephen Leake  <stephen_leake@stephe-leake.org>

	* progmodes/ada-mode.el: Change maintainer, apply
	whitespace-clean, checkdoc.  Minor improvements to many doc strings.
	(ada-mode-version): New function.
	(ada-create-menu): Menu operations are available for all supported
	compilers.

2006-10-29  Lars Hansen  <larsh@soem.dk>

	* net/tramp.el (with-parsed-tramp-file-name): Correct debug spec.
	Highlight as keyword.
	(tramp-do-copy-or-rename-file): Correct data for 'file-already-exists.
	Don't call tramp-method-out-of-band-p for local files.
	(tramp-touch): Quote file name.

2006-10-28  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (cal-html-cursor-month)
	(cal-html-cursor-year): Add autoloads for this new package.
	(calendar-mode-map): Bind cal-html-cursor-month, cal-html-cursor-year.

2006-10-28  Anna M. Bigatti  <bigatti@dima.unige.it>

	* calendar/cal-html.el: New file.

2006-10-28  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/authors.el (authors-aliases): Update.

2006-10-27  Chong Yidong  <cyd@stupidchicken.com>

	* version.el (emacs-version): Bump version number to 22.0.90.

2006-10-26  John W. Eaton  <jwe@octave.org>

	* progmodes/octave-inf.el (inferior-octave-has-built-in-variables):
	New defvar.
	(inferior-octave-resync-dirs): Check to see whether Octave has
	built-in variables and set inferior-octave-has-built-in-variables.
	Check inferior-octave-has-built-in-variables to decide whether to
	send commands that set built-in variables or call functions to
	change Octave's behavior.
	Send "disp (pwd ())" to Octave instead of just "pwd".
	(inferior-octave-startup): Send "more off" to Octave instead of
	"page_screen_output = 0".

2006-10-26  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/cl-indent.el (lisp-indent-259): Indent nil's in the
	pattern normally.

2006-10-26  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-mode-menu): Remove bindings for global
	minor modes (line/column number) as they are on the menubar.

2006-10-25  Juanma Barranquero  <lekktu@gmail.com>

	* term/w32-win.el (x-handle-name-switch): Doc fix.
	(w32-standard-fontset-spec): Fix typo in docstring.

	* midnight.el (midnight-buffer-display-time): Doc fix.
	(clean-buffer-list-kill-never-buffer-names): Add "*server*".

2006-10-23  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-prefix-arg-com): Define gg as G0.

	* emulation/viper-ex.el (ex-read): Quote file argument.

	* ediff-diff.el (ediff-same-file-contents): Expand file names.

	* ediff-mult.el (ediff-append-custom-diff): Quote shell file arguments.

2006-10-22  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/flyspell.el (flyspell-check-region-doublons):
	Fix last fix.

2006-10-23  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-mode-menu): List global minor modes
	before local ones.

2006-10-23  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-list): Optimize if compare-fn is `eq' or `eql'.
	(sit-for): If last command was a prefix arg, add the read-ahead
	event to unread-command-events as (t . EVENT) so it will be added
	to this-command-keys by read-key-sequence.

2006-10-22  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/flyspell.el (flyspell-word): Skip past all previous
	whitespace when checking doublons.
	(flyspell-check-region-doublons): Fix doublon regexp.
	(flyspell-highlight-incorrect-region): Highlight doublons using
	flyspell-duplicate face.

	* progmodes/cperl-mode.el (cperl-invalid-face): Fix defcustom.

2006-10-22  John Wiegley  <johnw@newartisans.com>

	* progmodes/python.el (python-use-skeletons): python-mode was
	auto-inserting templates (for those with abbrev-mode on), not only
	by default -- *but without a configuration variable to disable
	it*.  This rendered python-mode completely useless for me, so I
	have added `python-use-skeletons', which is now off by default.

2006-10-22  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/cperl-mode.el (cperl-mode): Don't assume
	font-lock-multiline is auto-local (it's not).
	(cperl-windowed-init): Ensure that cperl-font-lock-multiline is
	initialized before calling cperl-init-faces.

2006-10-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-stack-custom): Don't try to give
	gdb-stack-position a value when there is no fringe.

	* bindings.el (mode-line-mode-menu): Disable auto-revert-tail-mode
	indicator if not visiting a file.

2006-10-20  David Kastrup  <dak@gnu.org>

	* window.el (kill-buffer-and-window): Fix a bug where an aborted
	operation would still cause some window to collapse later.

2006-10-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-switch-backend): Try to be more careful with unwanted
	side-effect due to mixing various backends's file properties.

	* vc-svn.el (vc-svn-parse-status): Remove unused arg `localp'.
	Add arg `filename' instead.  Don't set vc-backend if `filename' is set.
	Return `filename's status if applicable.  Update callers.

2006-10-19  Kenichi Handa  <handa@m17n.org>

	* international/kkc.el (kkc-region): When a key sequence is not
	defined, append (this-single-command-raw-keys) to
	unread-input-method-events.

2006-10-19  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ada-mode.el (ada-in-string-p): Doc fix.

2006-10-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* version.el (emacs-version): Use mac-carbon-version-string.

	* term/macterm.el (res-geometry): Apply 2006-10-18 change for x-win.el.

2006-10-19  Jan Djärv  <jan.h.d@swipnet.se>

	* select.el (ccl-check-utf-8, string-utf-8-p): New functions (by
	Kenichi Handa).
	(xselect-convert-to-string): Decline requests for UTF8_STRING if
	the selection is not UTF-8.

2006-10-18  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ada-mode.el (ada-83-string-keywords)
	(ada-last-which-function-line ada-no-auto-case, ada-indent-region)
	(ada-which-compiler, ada-align-modes, ada-adjust-case-buffer)
	(ada-looking-at-semi-private, ada-get-body-name):
	Fix typos in docstrings.
	(ada-create-case-exception, ada-create-case-exception-substring):
	Fix typos in error messages.
	(ada-goto-matching-end, ada-narrow-to-defun): Doc fixes.

2006-10-18  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (res-geometry): Don't set geometry from Xresources
	to default-frame-alist if default-frame-alist already contains
	width/height.

2006-10-18  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/pp.el (pp-eval-expression): Use `X' to read value.
	Non-interactive arg is the value, not the expression.

	* simple.el (read-expression-map): Just set it, no defvar.

	* subr.el (insert-for-yank-1): If last inserted char has
	properties, mark them as rear-nonsticky.

	* recentf.el (recentf-mode): Doc fix.

	* facemenu.el (facemenu-add-new-face): Defend against symbol
	that isn't a face name.

	* dired-aux.el (dired-do-copy): Doc fix.

2006-10-18  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-1): Ignore fields when moving to the
	beginning of line to avoid getting point stuck.

2006-10-18  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/flyspell.el (flyspell-word-search-backward):
	Set inhibit-point-motion-hooks to avoid looping due to intangible
	text.

2006-10-16  Richard Stallman  <rms@gnu.org>

	* help-fns.el (describe-function-1): Special case optimization
	for self-insert-command.

2006-10-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-reread-directory): Work in `dir' mode too.

2006-10-15  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/table.el: Require 'regexp-opt.

2006-10-15  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* progmodes/flymake.el (flymake-get-project-include-dirs-imp):
	Use shell-quote-argument.

	* shell.el (explicit-bash-args): Likewise.

	* progmodes/ada-xref.el (ada-find-in-src-path): Likewise.
	Use grep -E rather than egrep.

2006-10-15  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* ido.el (ido-exhibit): Allow `-', `_', and trailing `$' in user id.

2006-10-15  Kim F. Storm  <storm@cua.dk>

	* filesets.el (filesets-run-cmd--repl-fn): Use shell-quote-argument.

2006-10-14  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* filesets.el (filesets-cmd-shell-command): Quote buffer-file-name
	to protect whitespace and metacharacters from the shell.

2006-10-13  Giorgos Keramidas  <keramida@ceid.upatras.gr>  (tiny change)

	* apropos.el (apropos-pattern-quoted): Fix a typo in a doc string.

2006-10-13  Eli Zaretskii  <eliz@gnu.org>

	* subr.el (start-process-shell-command): Doc fix.

2006-10-13  Andrea Russo  <rastandy@salug.it>  (tiny change)

	* info-look.el <maxima-mode, inferior-maxima-mode>: Allow [0-9] in
	the regexp for Maxima symbols.

2006-10-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-ignore-dir-regexp): Make it into a defcustom.
	(vc-find-root): Don't walk higher up than ~.

2006-10-12  Chong Yidong  <cyd@stupidchicken.com>

	* international/utf-8.el (utf-translate-cjk-load-tables):
	Avoid clobbering last-coding-system-used during load.

2006-10-12  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-global.el (reftex-create-tags-file):
	Quote file arguments.

2006-10-12  Richard Stallman  <rms@gnu.org>

	* files.el (file-name-history): Add defvar.
	(save-some-buffers-action-alist): Improve description strings.

2006-10-12  Andreas Schwab  <schwab@suse.de>

	* files.el (auto-mode-alist): Match change log file name also with
	a dash before a numeric extension.

2006-10-11  Ilya Zakharevich  <ilyaz@cpan.org>

	* progmodes/cperl-mode.el: Merge from upstream, upto version 5.22.
	After 5.0:
	(cperl-add-tags-recurse-noxs-fullpath): New function (for -batch mode).

	After 5.1: Major edit.  Summary of most visible changes:

	- Multiple <<HERE per line allowed.
	- Handles multiline subroutine declaration headers (with comments).
	  (The exception is `cperl-etags' - but it is not used in the rest
	  of the mode.)
	- Fontifies multiline my/our declarations (even with comments,
	  and with legacy `font-lock').
	- Major speedup of syntaxification, both immediate and postponed
	  (3.5x to 15x [for different CPUs and versions of Emacs] on the
	  huge real-life document I tested).
	- New bindings, edits to imenu.
	- "_" is made into word-char during fontification/syntaxification;
	  some attempts to recognize non-word "_" during other operations too.
	- Detect bug in Emacs with `looking-at' inside `narrow' and bulk out.
	- autoload some more perldoc-related stuff
	- New convenience features: ISpell POD/HEREDOCs, narrow-to-HEREDOC.
	- Attempt to incorporate XEmacs edits which reached me.

	Fine-grained changelog:
	(cperl-hook-after-change): New configuration variable.
	(cperl-vc-sccs-header): Likewise.
	(cperl-vc-sccs-header): Likewise.
	(cperl-vc-header-alist): Default via two preceding variables.
	(cperl-invalid-face): Remove double quoting under XEmacs
		(still needed under 21.2).
	(cperl-tips): Update URLs for resources.
	(cperl-problems): Likewise.
	(cperl-praise): Mention new features.
	New C-c key bindings: for `cperl-find-bad-style',
	`cperl-pod-spell', `cperl-here-doc-spell', `cperl-narrow-to-here-doc',
	`cperl-perdoc', and `cperl-perldoc-at-point'.
	CPerl Mode menu changes: "Fix style by spaces", "Imenu on Perl Info"
	moved, new submenu of Tools with Ispell entries and narrowing.
	(cperl-after-sub-regexp): New defsubst.
	(cperl-imenu--function-name-regexp-perl): Use `cperl-after-sub-regexp'.
		Allows heads up to head4.
		Allow "package;".
	(defun-prompt-regexp): Use `cperl-after-sub-regexp'.
	(paren-backwards-message): ??? Something for XEmacs???
	(cperl-mode): Never auto-switch abbrev-mode off.
		Try to allow '_' be non-word char.
		Do not use `font-lock-unfontify-region-function' on XEmacs.
		Reset syntax cache on mode start.
		Support multiline facification (even on legacy `font-lock').
	(cperl-facemenu-add-face-function): ??? Some contributed code ???
	(cperl-after-change-function): Since `font-lock' and `lazy-lock'
		refuse to inform us whether the fontification is due to lazy
		calling or due to edit to a buffer, install our own hook
		(controlled by `cperl-hook-after-change').
	(cperl-electric-pod): =cut may have been recognized as start.
	(cperl-block-p): Move, updated for attributes.
	(cperl-calculate-indent): Try to allow '_' be non-word char
		Support subs with attributes.
	(cperl-where-am-i): Quiet (?) a warning.
	(cperl-cached-syntax-table): New function.
	(cperl-forward-re): Use `cperl-cached-syntax-table'.
	(cperl-unwind-to-safe): Recognize `syntax-type' property
		changing in a middle of line.
	(cperl-find-sub-attrs): New function.
	(cperl-find-pods-heres): Allow many <<EOP per line.
		Allow subs with attributes.
		Major speedups (3.5x..15x on a real-life test file nph-proxy.pl).
		Recognize "extproc " (OS/2) case-folded and only at start.
		/x on s///x with empty replacement was not recognized.
		Better comments.
	(cperl-after-block-p): Remarks on diff with `cperl-block-p'.
		Allow subs with attributes, labels.
		Do not confuse "else::foo" with "else".
		Minor optimizations...
	(cperl-after-expr-p): Try to allow '_' be non-word char.
	(cperl-fill-paragraph): Try to detect a major bug in Emacs
	        with `looking-at' inside `narrow' and bulk out if found.
	(cperl-imenu--create-perl-index): Updates for new
	        `cperl-imenu--function-name-regexp-perl'.
	(cperl-outline-level): Likewise.
	(cperl-init-faces): Allow multiline subroutine headers
	        and my/our declarations, and ones with comments.
		Allow subroutine attributes.
	(cperl-imenu-on-info): Better docstring.
	(cperl-etags): Rudimentary support for attributes.
		Support for packages and "package;".
	(cperl-add-tags-recurse-noxs): Better (?) docstring.
	(cperl-add-tags-recurse-noxs-fullpath): Likewise.
	(cperl-tags-hier-init): Misprint for `fboundp' fixed.
	(cperl-not-bad-style-regexp): Try to allow '_' be non-word char.
	(cperl-perldoc): Add autoload.
	(cperl-perldoc-at-point): Likewise.
	(cperl-here-doc-spell): New function.
	(cperl-pod-spell): Likewise.
	(cperl-map-pods-heres): Likewise.
	(cperl-get-here-doc-region): Likewise.
	(cperl-font-lock-fontify-region-function): Likewise (backward
		compatibility for legacy `font-lock').
	(cperl-font-lock-unfontify-region-function): Fix style.
	(cperl-fontify-syntaxically): Recognize and optimize away deferred
		calls with no-change.  Governed by `cperl-hook-after-change'.
	(cperl-fontify-update): Recognize that syntaxification region
		can be larger than fontification one.
		XXXX we leave `cperl-postpone' property, so this is quadratic...
	(cperl-fontify-update-bad): Temporary placeholder until
	        it is clear how to implement `cperl-fontify-update'.
	(cperl-time-fontification): New function.
	(attrib-group): New text attribute.
	(multiline): New value: `syntax-type' text attribute.

	After 5.2:
	(cperl-emulate-lazy-lock): New function.
	(cperl-fontify-syntaxically): Would skip large regions.
	Add `cperl-time-fontification', `cperl-emulate-lazy-lock' to menu.
	Some globals were declared, but uninitialized.

	After 5.3, 5.4:
	(cperl-facemenu-add-face-function): Add docs, fix U<>.
	Copyright message updated.
	(cperl-init-faces): Work around a bug in `font-lock'.  May slow
			facification down a bit.
		Misprint for my|our|local for old `font-lock'
			"our" was not fontified same as "my|local".
		Highlight variables after "my" etc even in
			a middle of an expression.
		Do not facify multiple variables after my etc
			unless parentheses are present.

	After 5.5, 5.6
	(cperl-fontify-syntaxically): after-change hook could reset.
	(cperl-syntax-done-to) to a middle of line; unwind to BOL.

	After 5.7:
	(cperl-init-faces): Allow highlighting of local ($/).
	(cperl-problems-old-emaxen): New variable (for the use of DOCSTRING).
	(cperl-problems): Remove fixed problems.
	(cperl-find-pods-heres): Recognize #-comments in m##x too.
		Recognize charclasses (unless delimiter is \).
	(cperl-fontify-syntaxically): Unwinding to safe was done in wrong order.
	(cperl-regexp-scan): Update docs.
	(cperl-beautify-regexp-piece): Use information got from regexp scan.

	After 5.8:
	Major user visible changes:
	Recognition and fontification of character classes in RExen.
	Variable indentation of RExen according to groups.

	(cperl-find-pods-heres): Recognize POSIX classes in REx charclasses.
		Fontify REx charclasses in variable-name face.
		Fontify POSIX charclasses in "type" face.
		Fontify unmatched "]" in function-name face.
		Mark first-char of HERE-doc as `front-sticky'.
		Reset `front-sticky' property when needed.
	(cperl-calculate-indent): Indents //x -RExen according to parens level.
	(cperl-to-comment-or-eol): Recognize ends of `syntax-type' constructs.
	(cperl-backward-to-noncomment): Recognize stringy `syntax-type'
		constructs.  Support `narrow'ed buffers.
	(cperl-praise): Remove a reservation.
	(cperl-make-indent): New function.
	(cperl-indent-for-comment): Use `cperl-make-indent'.
	(cperl-indent-line): Likewise.
	(cperl-lineup): Likewise.
	(cperl-beautify-regexp-piece): Likewise.
	(cperl-contract-level): Likewise.
	(cperl-toggle-set-debug-unwind): New function.
		New menu entry for this.
	(fill-paragraph-function): Use when `boundp'.
	(cperl-calculate-indent): Take into account groups when indenting RExen.
	(cperl-to-comment-or-eol): Recognize # which end a string.
	(cperl-modify-syntax-type): Make only syntax-table property non-sticky.
	(cperl-fill-paragraph): Return t: needed for `fill-paragraph-function'.
	(cperl-fontify-syntaxically): More clear debugging message.
	(cperl-pod2man-build-command): Check (XEmacs) `Man-filter-list'.
	(cperl-init-faces): More complicated highlight even on XEmacs (new).
	Merge cosmetic changes from XEmacs.

	After 5.9:
	(cperl-1+): Move to before the first use.
	(cperl-1-): Likewise.

	After 5.10:

	This code may lock Emacs hard!!!  Use at your own risk!

	(cperl-font-locking): New internal variable.
	(cperl-beginning-of-property): New function.
	(cperl-calculate-indent): Use `cperl-beginning-of-property'
	instead of `previous-single-property-change'.
	(cperl-unwind-to-safe): Likewise.
	(cperl-after-expr-p): Likewise.
	(cperl-get-here-doc-region): Likewise.
	(cperl-font-lock-fontify-region-function): Likewise.
	(cperl-to-comment-or-eol): Do not call `cperl-update-syntaxification'
			recursively.
		Bound `next-single-property-change' via `point-max'.
	(cperl-unwind-to-safe): Bound likewise.
	(cperl-font-lock-fontify-region-function): Likewise.
	(cperl-find-pods-heres): Mark as recursive for `cperl-to-comment-or-eol'
		Initialization of `cperl-font-lock-multiline-start' could be
		missed if the "main" fontification did not run due to the
		keyword being already fontified.
	(cperl-pod-spell): Return t from do-one-chunk function.
	(cperl-map-pods-heres): Stop when the worker returns nil.
		Call `cperl-update-syntaxification'.
	(cperl-get-here-doc-region): Call `cperl-update-syntaxification'.
	(cperl-get-here-doc-delim): Remove unused function.

	After 5.11:

	The possible lockup of Emacs (introduced in 5.10) fixed.

	(cperl-unwind-to-safe): `cperl-beginning-of-property' won't return nil.
	(cperl-syntaxify-for-menu): New customization variable.
	(cperl-select-this-pod-or-here-doc): New function.
	(cperl-get-here-doc-region): Extra argument.
		Do not adjust pos by 1.

	New menu entries
		(Perl/Tools): Selection of current POD or HERE-DOC section.
		(Debugging CPerl:) backtrace on fontification.

	After 5.12:
	(cperl-cached-syntax-table): Use `car-safe'.
	(cperl-forward-re): Remove spurious argument SET-ST.
		Add documentation.
	(cperl-forward-group-in-re): New function.
	(cperl-find-pods-heres): Find and highlight (?{}) blocks in RExen
	(XXXX Temporary (?) hack is to syntax-mark them as comment).

	After 5.13:
	(cperl-string-syntax-table): Make { and } not-grouping
	  (Sometimes they ARE grouping in RExen, but matching them would only
	   confuse in many situations when they are not)
	(beginning-of-buffer): Replace two occurrences with goto-char...
	(cperl-calculate-indent): `char-after' could be nil...
	(cperl-find-pods-heres): REx can start after "[" too.
		Highlight (??{}) in RExen too.
	(cperl-maybe-white-and-comment-rex): New constant.
	(cperl-white-and-comment-rex): Likewise.
		XXXX Not very efficient, but hard to make
		better while keeping 1 group.

	After 5.13:
	(cperl-find-pods-heres): $foo << identifier() is not a HERE-DOC.
		Likewise for 1 << identifier.

	After 5.14:
	(cperl-find-pods-heres): Different logic for $foo .= <<EOF etc.
		Error-less condition-case could fail.
	(cperl-font-lock-fontify-region-function): Likewise.
	(cperl-init-faces): Likewise.

	After 5.15:
	(cperl-find-pods-heres): Support property REx-part2.
	(cperl-calculate-indent): Likewise.
		Don't special-case REx with non-empty 1st line.
	(cperl-find-pods-heres): In RExen, highlight non-literal backslashes.
		Invert highlighting of charclasses:
			now the envelope is highlighted.
		Highlight many others 0-length builtins.
	(cperl-praise): Mention indenting and highlight in RExen.

	After 5.15:
	(cperl-find-pods-heres): Highlight capturing parens in REx.

	After 5.16:
	(cperl-find-pods-heres): Highlight '|' for alternation
	Initialize `font-lock-warning-face' if not present.
	(cperl-find-pods-heres): Use `font-lock-warning-face' instead of
			 `font-lock-function-name-face'.
	(cperl-look-at-leading-count): Likewise.
	(cperl-find-pods-heres): Localize `font-lock-variable-name-face',
			`font-lock-keyword-face' (needed for
			batch processing), etc...
		Use `font-lock-builtin-face' for builtin in REx
			Now `font-lock-variable-name-face'
			is used for interpolated variables
		Use "talking aliases" for faces inside REx
		Highlight parts of REx (except in charclasses)
			according to the syntax and/or semantic
		Syntax-mark a {}-part of (?{}) as "comment"
			(it was the ()-part)
		Better logic to distinguish what is what in REx
	(cperl-tips-faces): Document REx highlighting.
	(cperl-praise): Mention REx syntax highlight etc.

	After 5.17:
	(cperl-find-sub-attrs): Would not always manage to print error message.
	(cperl-find-pods-heres): Localize `font-lock-constant-face'.

	After 5.18:
	(cperl-find-pods-heres): Misprint in REx for parsing REx.
		Very minor optimization.
		`my-cperl-REx-modifiers-face' got quoted.
		Recognize "print $foo <<END" as HERE-doc.
		Put `REx-interpolated' text attribute if needed.
	(cperl-invert-if-unless-modifiers): New function.
	(cperl-backward-to-start-of-expr): Likewise.
	(cperl-forward-to-end-of-expr): Likewise.
	(cperl-invert-if-unless): Works in "the opposite way" too.
		Cursor position on return is on the switch-word.
		Indents comments better.
	(REx-interpolated): New text attribute.
	(cperl-next-interpolated-REx): New function.
	(cperl-next-interpolated-REx-0): Likewise.
	(cperl-next-interpolated-REx-1): Likewise.
	"\C-c\C-x", "\C-c\C-y", "\C-c\C-v": New keybinding for these functions.
	Perl/Regexp menu: 3 new entries for `cperl-next-interpolated-REx'.
	(cperl-praise): Mention finded interpolated RExen.

	After 5.19:
	(cperl-init-faces): Highlight %$foo, @$foo too.
	(cperl-short-docs): Better docs for system, exec.
	(cperl-find-pods-heres): Better detect << after print {FH} <<EOF etc.
		Would not find HERE-doc ended by EOF without NL.
	(cperl-short-docs): Correct not-doubled \-escapes.
	start block: Put some `defvar' for stuff gone from XEmacs.

	After 5.20:
	initial comment: Extend copyright, fix email address.
	(cperl-indent-comment-at-column-0): New customization variable.
	(cperl-comment-indent): Indentation after $#a would increase by 1.
	(cperl-mode): Make `defun-prompt-regexp' grok BEGIN/END etc.
	(cperl-find-pods-heres): Mark CODE of s///e as `syntax-type' `multiline'.
	(cperl-at-end-of-expr): Would fail if @BAR=12 follows after ";".
	(cperl-init-faces): If `cperl-highlight-variables-indiscriminately'
			highlight $ in $foo too (UNTESTED).
	(cperl-set-style): Docstring missed some available styles.
	toplevel: Menubar/Perl/Indent-Styles had FSF, now K&R.
		Change "Current" to "Memorize Current".
	(cperl-indent-wrt-brace): New customization variable; the default is
		as for pre-5.2 version.
	(cperl-styles-entries): Keep `cperl-extra-newline-before-brace-multiline'.
	(cperl-style-alist): Likewise.
	(cperl-fix-line-spacing): Support `cperl-merge-trailing-else' being nil,
		and `cperl-extra-newline-before-brace' etc
		being t.
	(cperl-indent-exp): Plans B and C to find continuation blocks even
		if `cperl-extra-newline-before-brace' is t.

	After 5.21:
	Improve some docstrings concerning indentation.
	(cperl-indent-rules-alist): New variable.
	(cperl-sniff-for-indent): New function name
		(separated from `cperl-calculate-indent').
	(cperl-calculate-indent): Separate the sniffer and the indenter;
		uses `cperl-sniff-for-indent' now.
	(cperl-comment-indent): Test for `cperl-indent-comment-at-column-0'
		was inverted;
		Support `comment-column' = 0.

2006-10-11  Martin Rudalics  <rudalics@gmx.at>

	* dnd.el (dnd-handle-one-url): Fix typo in doc-string.
	* help-at-pt.el (scan-buf-move-to-region): Likewise.
	* longlines.el (longlines-window-change-function): Likewise.
	* simple.el (undo-ask-before-discard): Likewise.
	* wid-edit.el (widget-field-prompt-internal)
	(widget-documentation-link-p): Likewise.

2006-10-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-get-kw): | is not among the allowed chars
	for a keyword.

2006-10-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* newcomment.el (comment-valid-prefix-p): Make the check
	more thorough.  From an idea by Martin Rudalics <rudalics@gmx.at>.
	(comment-indent-new-line): Adjust call.

2006-10-09  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-back-to-current-heading): Base on lower-level
	routines to get proper disqualification of aberrant topics.

2006-10-09  Richard Stallman  <rms@gnu.org>

	* textmodes/two-column.el (2C-two-columns): Doc fix.

2006-10-09  Kim F. Storm  <storm@cua.dk>

	* shell.el (explicit-csh-args, explicit-bash-args): Add comment
	about implicit use.

2006-10-08  Richard Stallman  <rms@gnu.org>

	* textmodes/two-column.el (2C-two-columns): Doc fix.

2006-10-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el: Mark `buffer-read-only' as safe-local-variable.

2006-10-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-speedbar-expand-node):
	Burp if GUD buffer has been killed.

2006-10-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* completion.el (add-completions-from-c-buffer):
	Don't presume an error's second element is a string.
	Use looking-at rather than buffer-substring + member.

2006-10-07  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-redecode-body): If the old encoding is
	`undecided', call find-coding-systems-region to find a proper
	non-trivial encoding.
	(rmail-mime-charset-pattern): Allow a TAB between "Content-Type"
	and "text/plain".

2006-10-07  Kevin Ryde  <user42@zip.com.au>

	* textmodes/reftex-vars.el (defgroup reftex): Update home page
	url-link.

	* strokes.el (defgroup strokes): Remove invalid url-link.

2006-10-07  Magnus Henoch  <mange@freemail.hu>

	* autoinsert.el (auto-insert-alist): Doc fix.

2006-10-07  Johan Bockgård  <bojohan@dd.chalmers.se>

	* mouse-sel.el (mouse-insert-selection-internal):
	Use insert-for-yank, so that yank handlers are run.

2006-10-07  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-extension-aux): Fix comparison.

2006-10-06  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-wide-find-dirs-or-files): Use shell-quote-argument.

2006-10-05  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/advice.el (ad-remove-advice, ad-parse-arglist)
	(ad-make-mapped-call): Use `let', not `let*'.

2006-10-05  Chong Yidong  <cyd@stupidchicken.com>

	* international/mule-cmds.el (coding-system-change-eol-conversion):
	Ensure the coding system is initialized before calling
	coding-system-eol-type.

2006-10-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-rm-props, org-activate-plain-links)
	(org-activate-angle-links, org-activate-dates)
	(org-activate-target-links, org-activate-camels)
	(org-activate-tags): Add `rear-nonsticky' text property to avoid
	textproperty keymaps from being active beyond the end of a line.
	(org-unfontify-region): Also remove `rear-nonsticky' property.

2006-10-04  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (next): Table fixed.

2006-10-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-prev-thing): Remove (forward-char 1) now
	that it's been made unnecessary by removing narrowing.

2006-10-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-prev-thing): Massage to untangle the
	control flow a bit, simplify another bit, and add comments.

2006-10-03  David Kastrup  <dak@gnu.org>

	* help.el (describe-mode): For clicks on mode-line, use "@"
	interactive argument to get the major mode of the click instead of
	the current buffer.

	* isearch.el (isearch-mouse-2): Use new semantics of `key-binding'
	in order to better redirect mouse-2 clicks.  Also allow default
	bindings to apply.

2006-10-03  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/cl.el (pushnew-internal): Remove defvar.
	(pushnew): Fix last change.

2006-10-03  Denis Stünkel  <dstuenkel@googlemail.com>  (tiny change)

	* ibuf-ext.el (eval, view-and-eval) <define-ibuffer-op>:
	Use the interactive spec of `eval-expression'.

2006-10-02  Michael Welsh Duggan  <md5i@cs.cmu.edu>

	* progmodes/sh-script.el (sh-prev-thing): Fix last change.

2006-10-02  MIYOSHI Masanori  <miyoshi@meadowy.org>  (tiny change)

	* mail/smtpmail.el (smtpmail-try-auth-methods): Fix typo in
	2006-09-28 commit.

2006-10-02  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (iso-8859-6): Table fixed.

2006-10-01  Chris Moore  <christopher.ian.moore@gmail.com>

	* dired.el (dired-build-subdir-alist): Fix previous change.

2006-10-01  Johan Bockgård  <bojohan@dd.chalmers.se>

	* simple.el (undo-elt-crosses-region): Fix the inequalities.

2006-10-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/find-func.el (find-function-regexp): Don't match
	"define-button-type".

	* pcvs.el (cvs-update-header): Fix handling of extra newlines so that
	they don't keep accumulating.

2006-10-01  Bob Rogers  <rogers-emacs@rgrjr.dyndns.org>  (tiny change)

	* ffap.el (ffap-rfc-path): Change the address of the RFC
	repository to ftp.rfc-editor.org, as ds.internic.net seems to be gone.

2006-10-01  Stephen Berman  <Stephen.Berman@gmx.net>

	* allout.el (allout-expose-topic): Rectify implementation of "+"
	spec, so that bodies are not exposed with headlines.

2006-10-01  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-current-depth): Do aberrant check only at or
	below doublecheck depth.
	(allout-chart-subtree): Make it explicit that LEVELS being nil
	means unlimited depth.  Drop undocumented support for LEVELS value
	t meaning unlimited depth.  (This is consistent with
	allout-chart-to-reveal, but contrary to allout-show-children,
	which needs to use nil to default to depth of 1.)
	(allout-goto-prefix-doublechecked): Wrap long docstring line.
	(allout-chart-to-reveal): Be explicit in docstring about meaning
	of nil LEVELS, and drop support for LEVELS value t.
	(allout-show-children): Translate the level spec used by this
	routine to that used by allout-chart-subtree and
	allout-chart-to-reveal.
	(allout-show-to-offshoot): Retry once when stuck, after opening
	subtree - improvements in discontinuity handling likely will
	enable progress.

2006-09-30  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-button-click-moves-point): New variable.
	(widget-button-click): If widget-button-click-moves-point is
	non-nil, set point after performing the button action.

	* cus-edit.el (custom-mode): Set widget-button-click-moves-point.

2006-09-30  Martin Rudalics  <rudalics@gmx.at>

	* files.el (find-file-existing): Modify to not allow wildcards.

2006-09-30  Johan Bockgård  <bojohan@dd.chalmers.se>

	* simple.el (undo-more): When undo information for the region is
	exhausted, say "No further undo information FOR REGION".

2006-09-30  Michael Welsh Duggan  <md5i@cs.cmu.edu>

	* progmodes/sh-script.el (sh-prev-thing):
	Take `sh-leading-keywords' into account.

2006-09-29  Glenn Morris  <rgm@gnu.org>

	* custom.el (defcustom): Doc fix.

	* calendar/calendar.el (european-calendar-style):
	Call european-calendar or american-calendar as needed when set.
	(diary-view-entries, list-calendar-holidays): Move autoloads
	before use.

2006-09-29  Juri Linkov  <juri@jurta.org>

	* progmodes/cperl-mode.el (cperl-after-expr-p): Don't move point
	to nil if there is no previous property change.

2006-09-29  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* cus-edit.el (custom-save-all): Switch to emacs-lisp mode before
	saving anything to be sure that `forward-sexp' behaves correctly.

2006-09-29  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-finish): Ignore field boundaries if the
	initial and final points have the same `field' property.

2006-09-29  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-internal): Only bind minibuffer-completing-file-name
	to t while calling ido-read-internal.

2006-09-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-file-remote-p): Get regexp from list.
	(org-archive-subtree): Remove erroneous `]' from character list.

2006-09-28  Jonathan Yavner  <jyavner@member.fsf.org>

	* ses.el (ses-in-print-area, ses-goto-data, ses-load)
	(ses-reconstruct-all): Make undo of "insert row" work by keeping
	markers for data-area and parameters-area.

2006-09-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/make-mode.el (makefile-mode): Don't disable jit-lock.

	* font-lock.el (font-lock-after-change-function): Refontify next line
	as well if end is at BOL.
	(font-lock-extend-jit-lock-region-after-change): Be more careful to
	only extend the region as much as needed.

2006-09-28  Richard Stallman  <rms@gnu.org>

	* comint.el (comint-mode): Bind font-lock-defaults non-nil.

	* subr.el (insert-for-yank-1): Handle `font-lock-face' specially.

	* international/mule.el (after-insert-file-set-coding):
	If VISIT, don't let set-buffer-multibyte make undo info.

2006-09-28  Osamu Yamane  <yamane@green.ocn.ne.jp>  (tiny change)

	* mail/smtpmail.el (smtpmail-try-auth-methods): Do not break long
	lines in base64-encoded authentication response.

2006-09-26  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* progmodes/ebnf2ps.el: Doc fix.  Implement arrow spacing and scaling.
	(ebnf-version): New version 4.3.
	(ebnf-arrow-extra-width, ebnf-arrow-scale): New options.
	(ebnf-prologue): Adjust PostScript programming.
	(ebnf-begin-file, ebnf-insert-ebnf-prologue, ebnf-terminal-dimension1)
	(ebnf-repeat-dimension, ebnf-except-dimension): Adjust code.

2006-09-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* jit-lock.el (jit-lock-force-redisplay): Rename from
	jit-lock-fontify-again, and undo the mistaken change I've just done.

	* jit-lock.el (jit-lock-fontify-now): Don't fontify the empty text.
	(jit-lock-fontify-again): Don't refontify text that's not displayed.

2006-09-26  Kenichi Handa  <handa@m17n.org>

	* startup.el (display-splash-screen): Allow a prefix argument.

2006-09-25  Jason Rumney  <jasonr@gnu.org>

	* subr.el (shell-quote-argument): Use DOS logic for Windows
	shells with DOS semantics.

2006-09-24  Richard Stallman  <rms@gnu.org>

	* progmodes/compile.el (compilation-goto-locus-delete-o): New fn.
	(compilation-goto-locus): Use compilation-goto-locus-delete-o
	to delete the overlay.  Put it on pre-command-hook.

	* emacs-lisp/timer.el (timer-max-repeats): Doc fix.

	* startup.el (fancy-splash-screens, normal-splash-screen):
	Call the splash buffer *About GNU Emacs*.

	* simple.el (next-error-highlight, next-error-highlight-no-select):
	Default to 0.5.
	(yank-excluded-properties): Add `fontified'.

	* font-lock.el (font-lock-compile-keywords): Allow value of
	syntax-begin-function to enable paren-column-0 highlighting.

2006-09-24  Chris Moore  <christopher.ian.moore@gmail.com>

	* dired.el (dired-build-subdir-alist): When file ends in colon,
	don't exit the loop, just disregard that file.

2006-09-24  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-finish): Handle corner case for fields in
	continued lines.
	(line-move-1): Remove flawed test for that case.

2006-09-24  Ken Manheimer  <ken.manheimer@gmail.com>

	* icomplete.el (icomplete-simple-completing-p): Use the correct
	name for the new variable, `icomplete-with-completion-tables'.
	(file local variables): Remove superfluous setting.

2006-09-23  Jeff Miller  <jmiller@cablespeed.com>  (tiny change)

	* calendar/appt.el (appt-check): Fix typo for appointments just
	after midnight.

2006-09-23  Chong Yidong  <cyd@stupidchicken.com>

	* help.el (describe-key-briefly, describe-key): Don't expect an
	extra up event if a down-event is generated by a popup menu.

2006-09-23  Michal Nazarewicz  <mnazarewicz@gmail.com>  (tiny change)

	* textmodes/ispell.el (ispell-change-dictionary): Don't check the
	local dictionary when changing the global dictionary.

2006-09-23  Ken Manheimer  <ken.manheimer@gmail.com>

	* icomplete.el (icomplete-with-completion-tables): List of
	specialized completion tables with which icomplete should
	operate.  Include the new `internal-complete-buffer', so icomplete
	works with interactive buffer-selection.
	(icomplete-simple-completing-p): Add acceptance of specialized
	completion tables listed in icomplete-with-completion-tables.

2006-09-23  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* frame.el (focus-follows-mouse): Set default to nil on Mac.

	* startup.el (command-line): Use `custom-reevaluate-setting' for
	`focus-follows-mouse'.

2006-09-22  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (custom-buffer-create-internal): In `emacs -q',
	explain why Save is not available.

2006-09-22  Juanma Barranquero  <lekktu@gmail.com>

	* woman.el (woman0-so): Use `let*', not `let'.
	(woman-horizontal-line): Remove unbalanced parenthesis.

2006-09-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* woman.el: Make sure all the end-of-region markers we use have
	a non-nil insertion-type.
	(woman0-so): Move things around so we can use copy-marker.
	(woman0-roff-buffer, woman2-process-escapes-to-eol, woman2-roff-buffer):
	Adjust marker type.
	(woman2-process-escapes): Check marker type.
	(woman-horizontal-line): Dispense with the use of a marker.

2006-09-22  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el: Add Greek letters to math-variable-table
	property of tex.

2006-09-22  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (save-some-buffers-action-alist): Display diff in view-mode.

2006-09-22  Masatake YAMATO  <jet@gyve.org>

	* add-log.el (add-log-current-defun): Use `forward-sexp'
	instead of `forward-word' to pick c++::symbol.
	Reported by Guanpeng Xu <herberteuler@hotmail.com>.

2006-09-22  Kenichi Handa  <handa@m17n.org>

	* bindings.el: Fix setting self-insert-command for multibyte
	characters in global-map.

2006-09-21  David Kastrup  <dak@gnu.org>

	* mouse.el (mouse-posn-property): Fix typo for `event-start' in
	doc string.

2006-09-21  Kenichi Handa  <handa@m17n.org>

	* language/european.el ("Latin-1"): Add windows-1252 to
	coding-priority.
	("German"): Likewise.

2006-09-21  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/cl-macs.el (member*): Use memql instead of complex code.
	Suggested by Miles Bader.

	* emacs-lisp/cl.el (pushnew): Rework 2006-09-10 change.  Use memql
	instead of add-to-list in the simple case.

2006-09-20  Kenichi Handa  <handa@m17n.org>

	* isearch.el (isearch-process-search-char): Cancel the previous change.
	(isearch-search-string): New function.
	(isearch-search): Use isearch-search-string.
	(isearch-lazy-highlight-search): Likewise.

2006-09-20  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* lpr.el (lpr-page-header-switches): Insert `*' at beginning of doc
	string to become an option.

2006-09-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (find-buffer-visiting): Don't get fooled by a nil inode.

2006-09-20  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-partial): Call pos-visible-in-window-p with
	position t instead of trying both window-end and window-end - 1.

2006-09-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-scan-tags): Find end of subtrees also in
	hidden trees.

2006-09-20  David Kastrup  <dak@gnu.org>

	* mouse.el (mouse-posn-property): Improve doc string.
	(mouse-on-link-p): Change buffers for function calls on links.

	* menu-bar.el (clipboard-yank): Bomb out in interactive use if
	buffer is read-only.

2006-09-20  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-unprotected): Let inhibit-read-only only when
	buffer-read-only isn't set.
	(allout-annotate-hidden): Enable topic annotation during copies even
	when the buffer is read-only, eg for topic copies.  Ensure that the loop
	advances, even when the span extends beyond the deletion region.
	(allout-toggle-subtree-encryption): Use allout-structure-added-hook
	rather than allout-exposure-changed-hook, as a stronger assertion.
	(allout-keybindings-list): Add bindings for
	allout-copy-line-as-kill and allout-copy-topic-as-kill.
	(allout-copy-line-as-kill, allout-copy-topic-as-kill):
	Copy wrappers for allout-kill-line and allout-kill-topic.
	(allout-listify-exposed): Position correctly to accumulate lines.

2006-09-19  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-1): Escape field boundaries occurring
	exactly at point.  Update goal column if constrained to a field.
	(line-move-finish): Escape field boundaries occurring exactly at point.

2006-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-on-link-p): Tentatively fix last change.
	(mouse-drag-vertical-line): Remove unused var `wconfig'.

2006-09-19  Kim F. Storm  <storm@cua.dk>

	* help.el (describe-key-briefly, describe-key): Simplify printing
	of descriptions by using format and %S.  Fix "is undefined"
	messages to say "at that spot" for mouse events.

	* simple.el (line-move-partial): Optimize.  Try window-line-height
	before posn-at-point to get vpos of current line.

2006-09-18  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper.el: Bump up version/date of update to reflect the
	substantial changes done in August 2006.

	* emulation/viper-cmd.el (viper-next-line-at-bol): Make sure button-at,
	push-button are defined.

	* ediff-util.el (ediff-add-to-history): New function.

	* ediff.el: Use ediff-add-to-history instead of add-to-history.

2006-09-18  Wolfgang Jenkner  <wjenkner@inode.at>  (tiny change)

	* textmodes/conf-mode.el (conf-space-mode): Doc fix.
	Delete duplicate make-local-variable form.
	(conf-space-keywords): Add autoload cookie.
	Fix typo (`keywords', not `keyword').

2006-09-18  Jan Djärv  <jan.h.d@swipnet.se>

	* cus-start.el (all): Rename x-gtk-show-chooser-help-text to
	x-gtk-file-dialog-help-text.  Rename x-use-old-gtk-file-dialog
	to x-gtk-use-old-file-dialog.

2006-09-18  Richard Stallman  <rms@gnu.org>

	* wid-edit.el (widget-button-click): Handle non-mouse-motion events
	that might come in during mouse tracking.

2006-09-18  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-partial): Rework 2006-09-15 change to use
	new window-line-height function.  Further optimize by not calling
	pos-visible-in-window-p for window-end when window-line-height
	returns useful information.

2006-09-16  Richard Stallman  <rms@gnu.org>

	* textmodes/conf-mode.el (conf-mode-map): Use conf-space-keywords cmd.
	(conf-space-mode): Don't handle prefix arg.
	Delete conf-space-keywords-override code.
	Use add-hook.
	(conf-space-keywords): New command.
	(conf-space-mode-internal): Be careful with imenu-generic-expression.
	Delete conf-space-keywords-override code.
	(conf-space-keywords-alist): Doc fix.
	(conf-space-font-lock-keywords): Doc fix.
	(conf-space-keywords-override): Var deleted.

2006-09-16  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (fancy-splash-screens): Don't switch to the scratch
	buffer; it may not be the next buffer.

2006-09-16  Romain Francoise  <romain@orebokech.com>

	* saveplace.el (load-save-place-alist-from-file): Use expanded name
	in both messages.

2006-09-16  Slawomir Nowaczyk  <slawomir.nowaczyk.847@student.lu.se>

	* progmodes/python.el (python-preoutput-filter):
	Fix arg order to string-match.

2006-09-16  Richard Stallman  <rms@gnu.org>

	* obsolete/fast-lock.el (fast-lock-cache-data): Provide 2nd arg to
	font-lock-compile-keywords.

	* font-lock.el (font-lock-compile-keywords): Rename optional arg
	to SYNTACTIC-KEYWORDS and reverse the sense.  All callers changed.

2006-09-16  Jan Djärv  <jan.h.d@swipnet.se>

	* cus-start.el (all): Add x-gtk-show-chooser-help-text.

	* select.el (xselect-convert-to-string): If UTF8_STRING is requested
	and the data doesn't look like UTF8, send STRING instead.

2006-09-16  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-check-region-doublons):
	New function to detect duplicated words.
	(flyspell-large-region): Use it.

2006-09-16  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-to-column): Revert 2006-08-03 change.

2006-09-16  Eli Zaretskii  <eliz@gnu.org>

	* help.el (describe-prefix-bindings): Use let, not let*.

2006-09-16  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-regexp, allout-line-boundary-regexp)
	(allout-bob-regexp): Correct grouping and boundaries to fix
	backwards traversal.
	(allout-depth-specific-regexp, allout-depth-one-regexp):
	New versions that exploit \\{M\\} regexp syntax, to avoid geometric or
	worse time in allout-ascend.
	(allout-doublecheck-at-and-shallower): Identify depth threshold
	below which topics are checked for and disqualified by containment
	discontinuities.
	(allout-hotspot-key-handler): Correctly handle multiple-key
	strokes.  Remove some unused variables.
	(allout-mode-leaders): Clarify that mode-specific comment-start
	will be used.
	(set-allout-regexp): Correctly regexp-quote allout regexps to
	properly accept alternative header-leads and primary bullets with
	regexp-specific characters (eg, C "/*", mathematica "(*").
	Include new regular expressions among those configured.
	(allout-infer-header-lead-and-primary-bullet):
	Rename allout-infer-header-lead.
	(allout-recent-depth): Manifest as a variable as well as a function.
	(allout-prefix-data): Simplify into an inline instead of a macro,
	assuming current match data rather than being explicitly passed
	it.  Establish allout-recent-depth value as well as
	allout-recent-prefix-beginning and allout-recent-prefix-end.
	(allout-aberrant-container-p): True when an item's immediate
	offspring discontinuously contained.  Useful for disqualifying
	unintended topic prefixes, likely at low depths.
	(allout-goto-prefix-doublechecked): Elaborate version of
	allout-goto-prefix which disqualifies aberrant pseudo-items.
	(allout-pre-next-prefix): Layer on top of lower-level routines, to
	get disqualification of aberrant containers.
	(allout-end-of-prefix, allout-end-of-subtree): Disqualify aberrant
	containers.
	(allout-beginning-of-current-entry): Position at start of buffer
	when in container (depth 0) entry.
	(nullify-allout-prefix-data): Invalidate allout-recent-* prefix data.
	(allout-current-bullet): Strip text properties.
	(allout-get-prefix-bullet): Use right match groups.
	(allout-beginning-of-line, allout-next-heading):
	Disqualify aberrant containers.
	(allout-previous-heading): Disqualify aberrant containers, and
	change to regular (rather than inline) function, to allow
	self-recursion.
	(allout-get-invisibility-overlay): Increment so progress is made
	when the first overlay is not the sought one.
	(allout-end-of-prefix): Disqualify aberrant containers.
	(allout-end-of-line): Cycle something like allout-beginning-of-line.
	(allout-mode): Make allout-old-style-prefixes (ie, enabling use with
	outline.el outlines) functional again.  Change the primary bullet
	along with the header-lead - level 1 new-style bullets now work.
	Engage allout-before-change-handler in mainline Emacs, not just
	XEmacs, to do undo handling.
	(allout-before-change-handler): Expose undo changes occurring in
	hidden regions.  Use allout-get-invisibility-overlay instead of
	reimplementing it inline.
	(allout-chart-subtree): Use start rather than end of prefix in
	charts.  Use allout-recent-depth variable.
	(allout-chart-siblings): Disqualify aberrant topics.
	(allout-beginning-of-current-entry): Position correctly.
	(allout-ascend): Use new allout-depth-specific-regexp and
	allout-depth-one-regexp for linear instead of O(N^2) or worse
	behavior.
	(allout-ascend-to-depth): Depend on allout-ascend, rather than
	reimplementing an algorithm.
	(allout-up-current-level): Depend on allout-ascend, rather than
	reimplementing an algorithm.  Return to start-point if we fail.
	(allout-descend-to-depth): Use allout-recent-depth variable
	instead of function.
	(allout-next-sibling): On traversal of numerous intervening
	topics, resort to economical allout-next-sibling-leap.
	(allout-next-sibling-leap): Specialized version of
	allout-next-sibling that uses allout-ascend cleverly, to depend on
	a regexp search to leap large numbers of contained topics, rather
	than arbitrarily many one-by-one traversals.
	(allout-next-visible-heading): Disqualify aberrant topics.
	(allout-previous-visible-heading): Position consistently when
	interactive.
	(allout-forward-current-level): Base on allout-previous-sibling
	rather than (differently) reimplementing the algorithm.  Remove some
	unused variables.
	(allout-solicit-alternate-bullet): Present default choice stripped
	of text properties.
	(allout-rebullet-heading): Use bullet stripped of text properties.
	Register changes using allout-exposure-change-hook.
	Disregard aberrant topics.
	(allout-shift-in): With universal-argument, make topic a peer of
	its former offspring.  Simplify the code by separating out
	allout-shift-out functionality.
	(allout-shift-out): With universal-argument, make offspring peers
	of their former container, and its siblings.  Implement the
	functionality here, rather than inappropriately muddling the
	implementation of allout-shift-in.
	(allout-rebullet-topic): Respect additional argument for new
	parent-child separation function.
	(allout-yank-processing): Use allout-ascend directly.
	(allout-show-entry): Disqualify aberrant topics.
	(allout-show-children): Handle discontinuous children gracefully,
	extending the depth being revealed to expose them and posting a
	message indicating the situation.
	(allout-show-to-offshoot): Remove obsolete and incorrect comment.
	Leave cursor in correct position.
	(allout-hide-current-subtree): Use allout-ascend directly.
	Disqualify aberrant topics.
	(allout-kill-line, allout-kill-topic): Preserve exposure layout in
	a way that the yanks can restore it, as used to happen.
	(allout-yank-processing): Restore exposure layout as recorded by
	allout-kill-*, as used to happen.
	(allout-annotate-hidden, allout-hide-by-annotation): New routines
	for preserving and restoring exposure layout across kills.
	(allout-toggle-subtree-encryption): Run allout-exposure-change-hook.
	(allout-encrypt-string): Strip text properties.
	Rearranged order and outline-headings for some of the
	miscellaneous functions.
	(allout-resolve-xref): No need to quote the error name in the
	condition-case handler section.
	(allout-flatten): Classic recursive (and recursively intensive,
	without tail-recursion) list-flattener, needed by allout-shift-out
	when confronted with discontinuous children.

2006-09-16  Jason Rumney  <jasonr@gnu.org>

	* dnd.el (dnd-open-remote-file-function): Use dnd-open-local-file
	on ms-windows.
	(dnd-open-unc-file): Remove.
	(dnd-open-local-file): Mention in doc string that it also handles
	remote files if the system natively supports unc file-names.

2006-09-15  Kim F. Storm  <storm@cua.dk>

	* help.el (describe-key): Handle C-h k in *Help* buffer; collect
	all necessary information about the event before erasing *Help*.

	* simple.el (line-move-partial): Use window-line-visibility to
	quickly check whether last line is partially visible, and only do
	the hard (and slow) part in that case.

2006-09-15  Jay Belanger  <belanger@truman.edu>

	* COPYING: Replace "Library Public License" by "Lesser Public
	License" throughout.

2006-09-15  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (x-menu-bar-open): New function for F10.

2006-09-15  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Disallow filenames containing " -" to avoid confusion with libtool
	compilation messages.  Suggested by Stefan Monnier.

2006-09-15  David Kastrup  <dak@gnu.org>

	* mouse-sel.el (mouse-sel-follow-link-p): Use event position
	instead of buffer position for `mouse-on-link-p'.

	* mouse.el (mouse-posn-property): New function looking up the
	properties at a click position in overlays and text properties in
	either buffer or strings.
	(mouse-on-link-p): Use `mouse-posn-property' to streamline lookup
	of both `follow-link' as well as `mouse-face' properties.
	(mouse-drag-track): Check `mouse-on-link-p' on event position, not
	buffer position.

	* help.el (describe-key-briefly): When reading a down-event on
	mode lines or scroll bar, swallow the following up event, too.
	Use the new mouse sensitivity of `key-binding' for lookup.
	(describe-key): The same here.

2006-09-15  Juanma Barranquero  <lekktu@gmail.com>

	* play/life.el (life-patterns): Add a few more interesting patterns.
	(life-setup): Force `show-trailing-whitespace' to nil.

2006-09-14  Richard Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-text): Change text to improve alignment.
	(fancy-splash-screens): Don't set non-standard tab width.
	Bind cursor-type temporarily, and make it easy to patch to
	preserve the splash buffer.
	(normal-splash-screen, fancy-splash-tail): Spell out "Meta-x".
	(fancy-splash-screens): Display echo-area message explicitly.
	Don't set fancy-splash-help-echo.

	* simple.el (line-number-mode): Group mode-line instead of
	editing-basics.
	(column-number-mode, size-indication-mode): Likewise.

	* faces.el (mode-line-faces): Group mode-line instead of modeline.

	* time.el (display-time): Group mode-line instead of modeline.

	* cus-edit.el (mode-line): Rename from modeline.  All uses changed.

2006-09-14  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (fancy-splash-text): Move editing instructions to
	fancy-splash-head.
	(fancy-splash-head): Issue editing instructions.
	(fancy-splash-screens): Fixup whitespace.

2006-09-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* bindings.el (mode-line-buffer-identification-keymap):
	Remove duplicate line.

2006-09-14  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* ido.el (ido-ignore-item-p): Allow any kind of functions in
	ignore lists.

2006-09-14  Kim F. Storm  <storm@cua.dk>

	* jit-lock.el (jit-lock-fontify-again): New function.
	(jit-lock-fontify-now): Use it instead of lambda form.

2006-09-13  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-word, flyspell-correct-word)
	(flyspell-auto-correct-word): Make ispell-filter local to these
	functions.  Check that ispell-filter has new stuff before calling
	ispell-parse-output.

2006-09-13  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-partial): Optimize.

2006-09-13  Richard Stallman  <rms@gnu.org>

	* thingatpt.el (thing-at-point-bounds-of-url-at-point):
	Delete spurious backquote.

2006-09-07  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-print): Fix last change.

2006-09-12  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-dispatch): Remove unnecessary `sit-for'.

2006-09-07  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-scroll-show-maximum-output): Rename from
	rcirc-show-maximum-output.
	(rcirc-mode): Remove window-scroll-function hook.
	(rcirc-scroll-to-bottom): Remove function.
	(rcirc-print): Recenter so point stays at the bottom of the window
	if point was already there.

2006-09-12  Paul Eggert  <eggert@cs.ucla.edu>

	* comint.el (comint-exec-1): Set EMACS to the full name of Emacs,
	not to "t".
	* progmodes/compile.el (compilation-start): Likewise.
	* progmodes/idlwave.el (idlwave-rescan-asynchronously):
	Don't use expand-file-name on invocation-directory, since this
	might mishandle special characters in invocation-directory.

2006-09-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-defs.el: Remove * in defcustom's docstrings.

2006-09-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/compile.el (compilation-directory-properties):
	Doc fix for help-echo.

2006-09-12  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-read): Add comment.

2006-09-12  Kim F. Storm  <storm@cua.dk>

	* simple.el (next-error-highlight, next-error-highlight-no-select):
	Fix spelling error.

	* subr.el (sit-for): Rework to use input-pending-p and cond.
	Return nil input is pending on entry also for SECONDS <= 0.
	(while-no-input): Use input-pending-p instead of sit-for.

2006-09-11  Richard Stallman  <rms@gnu.org>

	* simple.el (next-error-highlight, next-error-highlight-no-select):
	Fix custom type and doc strings.

2006-09-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-apply-hunk-to-backup-file): New var.
	(diff-apply-hunk): Use it to ask for confirmation.

2006-09-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* emacs-lisp/cl.el (pushnew): Add missing `,'.

2006-09-11  David Kastrup  <dak@gnu.org>

	* help.el (string-key-binding, describe-key-briefly)
	(describe-key): Remove `string-key-binding' and its callers since
	`key-binding' already caters for the proper lookup now.

2006-09-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cfengine.el (cfengine-font-lock-syntactic-keywords): Newvar.
	(cfengine-mode): Use it.  Fix \ syntax to be like /.

	* bindings.el (mode-line-buffer-identification-keymap):
	Move initialization into declaration.

2006-09-10  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-edit-input, ido-complete, ido-take-first-match)
	(ido-push-dir-first, ido-kill-buffer-at-head, ido-exhibit)
	(ido-delete-file-at-head): Pass head of ido-matches through ido-name
	in case of merged directories.  Reported by Michaël Cadilhac.

2006-09-10  Richard Stallman  <rms@gnu.org>

	* dired-aux.el: Handle errors in recursive copy usefully.
	(dired-create-files-failures): New variable.
	(dired-copy-file): Remove condition-case.
	(dired-copy-file-recursive): Check for errors on all file
	operations, and add them to dired-create-files-failures.
	Check file file-date-error here too.
	(dired-create-files): Check dired-create-files-failures
	and report those errors too.

	* emacs-lisp/cl.el (pushnew): Use add-to-list when convenient.

	* subr.el (add-to-list): New argument COMPARE-FN.

2006-09-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* filecache.el (file-cache-add-directory)
	(file-cache-add-directory-list, file-cache-add-file)
	(file-cache-add-directory-using-find)
	(file-cache-add-directory-using-locate)
	(file-cache-add-directory-recursively): Add autoloads.

2006-09-09  Richard Stallman  <rms@gnu.org>

	* textmodes/conf-mode.el (conf-space-mode):
	Use hack-local-variables-hook instead of calling hack-local-variables.
	(conf-space-keywords-override): New variable.
	(conf-space-mode-internal): New subroutine.  Reinit Font Lock mode.
	(conf-space-mode): Always make conf-space-keywords and
	conf-space-keywords-override local.
	Call conf-space-mode-internal directly as well as via hook.

2006-09-09  Slawomir Nowaczyk  <slawomir.nowaczyk.847@student.lu.se>  (tiny change)

	* progmodes/python.el (python-font-lock-keywords): Add `self' and other
	quasi-keywords.

2006-09-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el: Quieten the compiler about hippie-expand vars.
	(python-send-string): Be slightly more careful about adding \n.

	* startup.el (normal-splash-screen): Don't display the buffer if we'll
	kill it right away anyway.

2006-09-09  Eli Zaretskii  <eliz@gnu.org>

	* international/codepage.el (cp850-decode-table): Fix a few codes.
	(cp858-decode-table): New variable.

2006-09-09  Toby Allsopp  <Toby.Allsopp@navman.com>  (tiny change)

	* net/ldap.el (ldap-search-internal): Doc fix.

2006-09-09  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* play/life.el (life-display-generation): Test for input manually if
	`sleeptime' is negative or null.

	* lpr.el (lpr-page-header-switches): Page title switch is one of them.
	(print-region-1): Substitute `%s' with the page title.

2006-09-09  Matt Hodges  <MPHodges@member.fsf.org>

	* locate.el (locate-current-search): New variable.
	(locate): Set buffer local value.  Use current buffer if it is
	in Locate mode.
	(locate-mode): Disable undo here.
	(locate-do-setup): Use locate-current-filter from buffer to be killed.
	(locate-update): Use locate-current-search and locate-current-filter.

2006-09-08  David Kastrup  <dak@gnu.org>

	* desktop.el (desktop-read): When loading a desktop, disable
	saving it while the load progresses, and switch off a pending lazy
	load by calling `desktop-lazy-abort'.

2006-08-27  Martin Rudalics  <rudalics@gmx.at>

	* window.el (mouse-autoselect-window-timer)
	(mouse-autoselect-window-position)
	(mouse-autoselect-window-window)
	(mouse-autoselect-window-now): New vars.
	(mouse-autoselect-window-cancel)
	(mouse-autoselect-window-select)
	(mouse-autoselect-window-start): New functions.
	(handle-select-window): Call `mouse-autoselect-window-start' when
	delayed window autoselection is enabled.

	* cus-start.el (mouse-autoselect-window): Handle delayed window
	autoselection.

	* emacs-lisp/eldoc.el: Add `handle-select-window' to the set of
	commands after which it is allowed to print in the echo area.

2006-09-08  Richard Stallman  <rms@gnu.org>

	* textmodes/fill.el (adaptive-fill-regexp): Don't match `(1)' or `1.'

	* mail/rmail.el (rmail-get-new-mail): Say whether all msgs are spam.
	(rmail-convert-to-babyl-format): Don't record undo, leave list empty.

	* emacs-lisp/timer.el (timer-create, timer-activate): Doc fixes.
	(cancel-timer-internal): Add doc string.
	(cancel-function-timers): Doc fix.
	(with-timeout-handler, timer-event-last*): Add doc strings.

	* emacs-lisp/bindat.el (bindat-unpack): Doc fix.

	* files.el (risky-local-variable-p): Match ...-bindat-spec.

	* dired.el (dired-log-summary): Add doc string.

	* cus-edit.el (custom-menu-create): Bind deactivate-mark here.
	(custom-group-menu-create): Not here.

2006-09-08  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-dblock-write:clocktable): Avoid infinite loop.

2006-09-08  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (show-hide-font-panel): New HI command ID symbol.
	(mac-apple-event-map): Define its handler.

2006-09-07  Toby Allsopp  <Toby.Allsopp@navman.com>  (tiny change)

	* net/ldap.el (ldap-search-internal): Handle `auth' key.

2006-09-07  Magnus Henoch  <mange@freemail.hu>

	* net/rcirc.el (rcirc-activity-string): Don't quote value in case
	clause.

2006-09-07  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* info.el (Info-index): Bind completion-ignore-case.

2006-09-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/prolog.el (inferior-prolog-flavor): New var left out of
	previous commit.
	(inferior-prolog-guess-flavor): New fun left out of previous commit.
	(prolog-consult-region-and-go): Don't hard code "*prolog*" and don't
	burp in dedicated windows.
	(inferior-prolog-self-insert-command): New command.
	(inferior-prolog-mode-map): Use it.

2006-09-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* international/latexenc.el (latex-inputenc-coding-alist): Add cp858.

	* international/code-pages.el: Add cp858.

2006-09-07  Jan Djärv  <jan.h.d@swipnet.se>

	* dnd.el: Fix bootstrapping.

2006-09-07  Jan Djärv  <jan.h.d@swipnet.se>

	* dnd.el (dnd-protocol-alist): Add what url-handler-mode can handle.
	(dnd-open-remote-url): New function.
	(dnd-open-remote-file-function): Set to dnd-open-remote-url if
	not windows-nt.

2006-09-07  Jason Rumney  <jasonr@gnu.org>

	* dnd.el (dnd-open-remote-file-function): New variable.
	(dnd-open-unc-file): New function.
	(dnd-open-file): Call dnd-open-remote-file-function if set.

2006-09-06  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-region): Encode passphrase with
	pgg-passphrase-coding-system rather than locale-coding-system.
	* pgg-def.el (pgg-passphrase-coding-system): New user option.

2006-09-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/prolog.el: Remove * in docstrings.
	(prolog-program-name): Add SWI prolog.
	(prolog-mode-menu): New menu.
	(prolog-mode): Set comment-add.
	(prolog-indent-line): Simplify.  Use indent-line-to.
	(inferior-prolog-buffer): New var.
	(inferior-prolog-run, inferior-prolog-process): New funs.
	(run-prolog, switch-to-prolog): Rewrite, using them.
	(prolog-consult-region): Use inferior-prolog-buffer.
	(inferior-prolog-load-file): New function.
	(prolog-mode-map): Add bindings for load-file and switch-to-prolog.

	* textmodes/fill.el (fill-single-word-nobreak-p): Allow breaking before
	last word, if it's not the end of the paragraph.

	* files.el (abbreviate-file-name): Don't mistakenly match newlines in
	file name.

2006-09-06  Ralf Angeli  <angeli@caeruleus.net>

	* frame.el (display-mm-dimensions-alist): New defcustom.
	(display-mm-height, display-mm-width): Use it.

2006-09-06  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-starttls-credentials): Doc fix.

2006-09-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-list-children-regexp)
	(gdb-var-list-children-regexp-1): Tweak regexps to catch full
	string values.

2006-09-06  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-partial): New function to do vscrolling for
	partially visible images / tall lines.  Rewrite based on code
	previously in line-move.  Simplify backwards vscrolling.
	(line-move): Use it.  Simplify.

2006-09-05  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler-1): Rewrite.

2006-09-05  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Process the `gcc-include' after the `gnu' rule.

2006-09-05  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-visit-buffer): Use buffer name if buffer arg is a buffer.

2006-09-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg.el (pgg-clear-string): Alias to clear-string for backward
	compatibility.

	* pgg-gpg.el (pgg-gpg-process-region): Avoid display blinking with
	inhibit-redisplay; encode passphrase with locale-coding-system.

2006-09-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add more C-M- bindings.

2006-09-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-list-children-regexp)
	(gdb-var-list-children-regexp): Make type field optional.

	* progmodes/gud.el (gud-speedbar-buttons): Allow for no type
	e.g public, protected in C++.

2006-09-04  John Paul Wallington  <jpw@pobox.com>

	* simple.el (completion-show-help): New defcustom.
	(completion-setup-function): Heed it.

2006-09-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add C-M- bindings.

2006-09-04  Richard Stallman  <rms@gnu.org>

	* mail/rmail-spam-filter.el (rsf-scanning-messages-now): Doc fix.
	(rsf-min-region-to-spam-list): Doc fix.
	(rsf-add-content-type-field): Doc fix.

	* simple.el (kill-region): Explicitly test there is a region.

2006-09-04  Chong Yidong  <cyd@stupidchicken.com>

	* mail/feedmail.el (feedmail-buffer-to-sendmail): Look for
	sendmail in several common directories.

	* mail/sendmail.el (sendmail-program): Moved here from paths.el.

	* paths.el (sendmail-program): Removed.

2006-09-04  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-region): Revert two patches from Satyaki
	Das.  http://article.gmane.org/gmane.emacs.gnus.general/49947
	http://article.gmane.org/gmane.emacs.gnus.general/50457

2006-09-03  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-group-menu-create): Avoid deactivating the
	mark after running the menu filter.

2006-09-03  Juri Linkov  <juri@jurta.org>

	* international/quail.el (quail-defrule-internal): Add a check
	if a key is a vector.

2006-09-02  Juri Linkov  <juri@jurta.org>

	* man.el (Man-topic-history): New variable.
	(man): Use it.

	* woman.el (woman-topic-history): Change defvar to defvaralias
	for symbol `Man-topic-history'.

	* shell.el (shell-filter-ctrl-a-ctrl-b): Check if
	`comint-last-output-start' is a marker by using `markerp' and
	check if it has a position by using `marker-position', and use
	this position for `goto-char'.

	* international/quail.el (quail-defrule-internal): Add missing
	`error' call for null key.

2006-09-02  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-keywords): New variable.
	(rcirc-bright-nicks, rcirc-dim-nicks): New variables.
	(rcirc-bright-nick-regexp, rcirc-dim-nick-regexp): Remove
	variables.
	(rcirc-responses-no-activity): New function.
	(rcirc-handler-generic): Check for responses in above.
	(rcirc-process-command): Add ?: character to arguments of raw
	server commands.
	(rcirc-format-response-string): Use `rcirc-bright-nicks' and
	`rcirc-dim-nicks'.
	(rcirc-gray-toggle): Remove unused variable.
	(rcirc-print): Remove some tracking logic, which is moved into
	markup functions.
	(rcirc-activity-types): Was `rcirc-activity-type', now a list of
	types.
	(rcirc-activity-string): Look for 'keyword in activity-types.
	(rcirc-window-configuration-change): Don't erase overlay-arrow
	unnecessarily.
	(rcirc-add-or-remove): New function.
	(rcirc-cmd-ignore): Use it.
	(rcirc-message-leader): Remove unused function.
	(rcicr-cmd-bright, rcirc-cmd-dim, rcirc-cmd-keyword): New commands.
	(rcirc-add-face): New function.
	(rcirc-facify): Use rcirc-add-face.
	(rcirc-url-regexp): Add parens.
	(rcirc-map-regexp): Remove function.
	(rcirc-mangle-regexp): Remove function.
	(rcirc-markup-text-functions): New variable.
	(rcirc-markup-text): New function (replaces `rcirc-mangle-text').
	(rcirc-markup-body-text, rcirc-markup-attributes)
	(rcirc-markup-my-nick, rcirc-markup-urls, rcirc-markup-keywords)
	(rcirc-markup-bright-nicks): New markup handler functions.
	(rcirc-nick-in-message-full-line): New face.
	(rcirc-track-nick): Rename from `rcirc-mode-line-nick'.
	(rcirc-track-keyword, rcirc-url, rcirc-keyword): New faces.

2006-09-02  Martin Rudalics  <rudalics@gmx.at>

	* cus-start.el (hscroll-margin, hscroll-step)
	(mode-line-in-non-selected-windows, mouse-autoselect-window)
	(x-use-underline-position-properties): Change version to "22.1"
	since they will appear there for the first time.

2006-09-01  Chong Yidong  <cyd@stupidchicken.com>

	* imenu.el (imenu-update-menubar): Use buffer-chars-modified-tick.

2006-08-31  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (custom-save-variables): Slight cleanup.
	(Custom-no-edit): Renamed from custom-no-edit.
	(Custom-newline): Renamed from custom-newline.
	(custom-mode-map): Use new names.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Reference manual
	about customization, rather than M-x customize, in the doc string
	made for the defcustom.

	* emacs-lisp/trace.el (trace-function-background): Doc fix.

2006-08-31  Romain Francoise  <romain@orebokech.com>

	* dired-x.el (dired-guess-shell-alist-default): Update.

2006-08-31  Michael Mauger  <mmaug@yahoo.com>

	* custom.el (custom-theme-set-variables): Autoload packages before
	sorting the variables.

2006-08-30  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-special-read-and-insert-char):
	Convert events to chars if XEmacs.
	(viper-after-change-undo-hook): Check if undo-in-progress is bound.

2006-08-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-eldoc-function): Re-enable quit while
	waiting for process.

2006-08-30  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-string-to-utxt): If adjustment for MacJapanese
	results in ASCII-only string, encode original one directly.

2006-08-29  Romain Francoise  <romain@orebokech.com>

	* startup.el (normal-splash-screen, fancy-splash-screens):
	Make buffer read-only and arrange to enter view mode if necessary.

2006-08-29  Chong Yidong  <cyd@stupidchicken.com>

	* hl-line.el (hl-line): New face.
	(hl-line-face): Use it.

	* image-mode.el (image-mode): Fix last fix.
	Suggested by Kim F. Storm.

2006-08-29  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.54.

	* net/tramp.el (tramp-convert-file-attributes): Call `eql' instead
	of `=', because `tramp-get-remote-gid' might not always return an
	integer when expected.
	(tramp-register-file-name-handlers): `partial-completion-mode' is
	unknown to XEmacs.
	(tramp-time-diff): Don't use `floor', it might fail for large
	differences.
	(tramp-handle-make-auto-save-file-name): For Emacs 21, set
	`tramp-auto-save-directory' if unset in order to guarantee unique
	auto-save file names.

2006-08-28  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-mode): Display image as text on a terminal.

2006-08-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-send-command): Simplify.
	(run-python): Don't generate a new buffer unless `new' was specified.
	Make sure we send `import emacs' to the proper process.

	* progmodes/python.el (python-send-command): Don't wait for the command
	to terminate.  Don't fiddle with compilation-parsing-end.

2006-08-28  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/checkdoc.el (checkdoc-file-comments-engine):
	Insert commentary after first line summary.

	* woman.el (woman-follow): New function, based on `man-follow'.
	(woman-mode-map): Use it.

	* ibuffer.el (ibuffer-do-sort-by-recency): Perform full update
	since ibuffer-do-sort-by-recency does not define a sorter.

2006-08-28  Kim F. Storm  <storm@cua.dk>

	* find-dired.el (find-dired): Use shell-quote-argument to properly
	escape ( and ) args.  Also use it on {} and ; args in default
	value of find-ls-option string.
	(find-grep-dired): Use shell-quote-argument on {} and ; args.

2006-08-27  Michael Olson  <mwolson@gnu.org>

	* emacs-lisp/tq.el: Small grammar fix in comments.
	(tq-enqueue): Check for existence of queue rather than the
	head queue item's question, which was a no-op.
	(tq-filter, tq-process-buffer): Make sure the process buffer
	exists before making it the current buffer.

2006-08-27  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-apple-event-map): Rename hicommand to hi-command.
	(mac-dnd-drop-data): Apply 2006-08-22 change for x-dnd-drop-data.
	(special-event-map): Apply 2006-08-16 change for x-win.el.

2006-08-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-send-receive): Wait in the
	process's buffer so as to check the right buffer-local variables.

2006-08-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/checkdoc.el: Remove * in defcustoms.
	(defgroup checkdoc): Move to beginning.

	* progmodes/python.el (python-preoutput-skip-next-prompt): New var.
	(python-preoutput-continuation): Remove.
	(python-preoutput-filter): Simplify correspondingly.
	Remove handling of _emacs_ok.  Make sure we skip _emacs_out's prompts.
	Loop around to catch embedded _emacs_out output.
	(run-python): Send the import&print command on a single line.
	(python-send-command): Send command&print on a single line.
	(python-send-string): Only add double \n if needed.
	(python-send-receive): Loop until the result comes.
	(python-mode-running): Defvar it.
	(python-setup-brm): Remove unused var `menu'.
	Only bind py-mode-map and `features' around brm-init.
	(python-calculate-indentation): Remove unused var `point'.
	(python-beginning-of-defun): Remove unused var `def-line'.

2006-08-25  Richard Stallman  <rms@gnu.org>

	* kmacro.el (kmacro-repeat-on-last-key): Doc fix.

2006-08-25  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper.el (viper-set-hooks): Use frame bindings for
	viper-vi-state-cursor-color.
	(viper-non-hook-settings): Don't set default
	mode-line-buffer-identification.

	* emulation/viper-util.el (viper-set-cursor-color-according-to-state):
	New fun.
	(viper-set-cursor-color-according-to-state)
	(viper-get-saved-cursor-color-in-replace-mode)
	(viper-get-saved-cursor-color-in-insert-mode): Make conditional on
	viper-emacs-state-cursor-color.

	* emulation/viper-cmd.el (viper-envelop-ESC-key): Bug fix.
	(viper-undo): Use point if undo-beg-posn is nil.
	(viper-insert-state-post-command-sentinel, viper-change-state-to-emacs)
	(viper-after-change-undo-hook): Don't use
	viper-emacs-state-cursor-color by default.
	(viper-undo): More sensible positioning after undo.

	* emulation/viper-ex.el (ex-splice-args-in-1-letr-cmd): Get rid of caddr.
	(viper-emacs-state-cursor-color): Default to nil, since this feature
	doesn't work well yet.

	* ediff-mult.el (ediff-intersect-directories)
	(ediff-get-directory-files-under-revision, ediff-dir-diff-copy-file):
	always expand filenames.

2006-08-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* tumme.el: Remove * in defcustoms's docstrings.

2006-08-24  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/timer.el (timer-set-idle-time, run-with-idle-timer):
	Accept internal time format for SECS arg.
	(timer-relative-time): Doc fix.

	* jit-lock.el: "Stealth fontification by requeuing timers" patch,
	adapted from Martin Rudalics.
	(jit-lock-stealth-repeat-timer, jit-lock-stealth-buffers): New vars.
	(jit-lock-mode): Create jit-lock-stealth-repeat-timer.
	(jit-lock-stealth-fontify): Reschedule as a idle timer instead of
	using sit-for.

2006-08-24  Francesc Rocher  <francesc.rocher@gmail.com>

	* cus-start.el (all): Add `overline-margin' and
	`x-underline-at-descent-line'.

2006-08-24  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-find-use-xargs): Use explicit value `exec'
	to mean "use find -exec"; nil now unambiguously means auto-detect.
	(grep-compute-defaults): Set grep-find-use-xargs to `exec' if not `gnu'.
	Use shell-quote-argument to build grep-find-command and
	grep-find-template.
	(rgrep): Use shell-quote-argument to properly quote arguments to find.
	Reported by Tom Seddon.

2006-08-23  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (fancy-splash-head): Give instructions for dismissing
	the splash screen for default startup too.
	(display-startup-echo-area-message, fancy-splash-screens)
	(use-fancy-splash-screens-p): New arg hide-on-input.  If nil, show
	all splash text at once and keep the splash buffer around.
	(command-line-1): Give display-startup-echo-area-message a t arg.

2006-08-23  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-follow-gnus-link): Make sure the dedicated
	gnus frame is selected.

2006-08-23  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-starting): Reset gdb-signalled to nil.

2006-08-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-set-matches-1): Fix full matching for subdirs.
	Add suffix matching for subdirs.

2006-08-22  Jorgen Schaefer  <forcer@forcix.cx>  (tiny change)

	* x-dnd.el (x-dnd-drop-data): Don't call goto-char if
	mouse-yank-at-point is non-nil.

2006-08-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-frame-memory-buffer): Make frame
	a bit wider and remove fringes to fit initial output on line.

2006-08-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el (blink-cursor-end): Only ignore the error we care about.
	(blink-cursor-mode): Use blink-cursor-end to simplify the code.

2006-08-21  Richard Stallman  <rms@gnu.org>

	* whitespace.el (whitespace-cleanup): Doc fix.

2006-08-20  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-show-maximum-output): New var.
	(rcirc-buffer-process): If no buffer argument is supplied, use
	current-buffer.
	(rcirc-complete-nick): Complete to the last completed nick first.
	(rcirc-mode): Preserve the value of `rcirc-urls' across
	connections.  Setup scroll function.
	(rcirc-scroll-to-bottom): New function.
	(rcirc-print): Use nick syntax around regexp work.
	Notice dim-nicks speaking only if they say our nick.
	(rcirc-update-activity-string): Do not show the modeline indicator
	if there are no live rcirc processes.
	(rcirc-cmd-ignore): Ignore case.
	(rcirc-browse-url-at-point): Fix off-by-one error.

2006-08-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el: Remove * in defcustom docstrings.
	(run-python, python-proc, python-try-complete): Use derived-mode-p.
	(python-mode): Set tab-width and indent-tabs-mode.

2006-08-20  Dave Love  <fx@gnu.org>

	* progmodes/python.el: Update to Dave Love's latest version.
	(python-font-lock-keywords, python-mode): Don't use
	font-lock-syntax-table, but match symbol elements explicitly instead.
	(python-mode-map): Add help, and a few more key bindings.
	(python-skip-comments/blanks): Move out of comments as well.
	(python-continuation-line-p): Behave better with unbalanced parens.
	(python-blank-line-p): New fun.
	(python-open-block-statement-p): Don't use a heuristic.
	(python-outdent-p): Better handle blocks-in-the-same-line.
	(python-calculate-indentation): Misc improvements.
	(python-comment-indent): Remove.
	(python-block-pairs): New var.
	(python-first-word): New fun.
	(python-indentation-levels): Handle more common cases.
	(python-indent-line-1): Add `leave' argument.
	(python-indent-region): New fun.
	(python-skip-out): New fun.
	(python-beginning-of-statement, python-end-of-statement): Use it.
	(python-next-statement): Return correct count even at eob.
	(python-end-of-block): Fix paren-typo.
	(python-imenu-create-index): Add module variables.
	(run-python): Add `new' arg.
	Check we're at a prompt before returning.
	(python-send-command): Move to end of buffer.
	Wait for prompt to return.
	(python-set-proc): New fun.
	(python-imports): New var.
	(python-describe-symbol): Use it.  Adjust to new interface of `ehelp'.
	(python-eldoc-function): Try to move out of arg list.
	(python-outline-level): Offset by 1.
	(python-find-imports): New fun.
	(python-symbol-completions): Use python-imports.
	(python-module-path, ffap-alist): Add support for ffap.
	(python-skeletons, python-mode-abbrev-table, def-python-skeleton)
	(python-insert-*, python-default-template, python-expand-template):
	Add templates/skeletons.
	(python-setup-brm): Support for Bicycle Repair Man.
	(python-abbrev-syntax-table): New var.
	(python-abbrev-pc-hook, python-pea-hook): New funs.

2006-08-20  Chong Yidong  <cyd@stupidchicken.com>

	* frame.el (blink-cursor-start): Set timer first.
	(blink-cursor-end): Ignore timer canceling errors.
	Suggested by Ken Manheimer.

2006-08-20  Juanma Barranquero  <lekktu@gmail.com>

	* newcomment.el (comment-box): Call `comment-normalize-vars'.
	Add autoload cookie.

2006-08-20  Richard Stallman  <rms@gnu.org>

	* simple.el (line-number-at-pos): Doc fix.

	* emacs-lisp/timer.el (run-with-idle-timer): Pass t to
	timer-activate-when-idle, so timer can run before Emacs becomes
	non-idle again.

2006-08-18  Yoni Rabkin Katzenell  <yoni-r@actcom.com>  (tiny change)

	* whitespace.el (whitespace-cleanup-internal): New optional arg
	REGION-ONLY.  If it's non-nil, modify the message to the user
	accordingly.
	(whitespace-cleanup-region): Call whitespace-cleanup-internal with
	a non-nil argument.

2006-08-18  Gustav Hållberg  <gustav@gmail.com>  (tiny change)

	* rect.el (spaces-string): Simplify and add doc string.

2006-08-17  Romain Francoise  <romain@orebokech.com>

	* progmodes/gdb-ui.el (gdb-edit-locals-value): Balance parens.

2006-08-17  Richard Stallman  <rms@gnu.org>

	* compare-w.el (compare-windows): lambda's take an arg and pass
	it to compare-windows-skip-whitespace.

2006-08-17  Martin Rudalics  <rudalics@gmx.at>

	* jit-lock.el (jit-lock-fontify-now): Protect the modified status of
	the right buffer.

2006-08-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-parse.el (cvs-parse-table): Accept the new `...' format for
	removed files.

2006-08-17  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-locals-watch-map)
	(gdb-locals-watch-map-1): Suppress keymap first.
	(gdb-edit-locals-map-1): New variable.
	(gdb-edit-locals-value): New function.
	(gdb-stack-list-locals-handler): Use them.

2006-08-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (global-map): Allow yanking with mouse-2 at a spot whose
	cursor would normally be drawn in the fringe.

	* font-lock.el (font-lock-extend-region-wholelines): Fix up typo.
	Reported by Martin Rudalics <rudalics@gmx.at>.

2006-08-16  Richard Stallman  <rms@gnu.org>

	* term/x-win.el (x-clipboard-yank): Specify * in interactive spec.
	(special-event-map): Process drag-n-drop events this way.

	* simple.el (move-beginning-of-line): Test whether fields
	would prevent motion back to line's first visible character.
	If so, stop where the fields would stop the motion.

	* newcomment.el (comment-indent): Fully update INDENT
	before checking to see if it will change the text.

	* cus-edit.el (custom-newline): New function.
	(custom-mode-map): Bind newline to custom-newline.

	* compare-w.el (compare-windows): Factor compare-ignore-whitespace
	into ignore-whitespace.
	Check each buffer for its skip-function.
	Handle compare-windows-skip-whitespace special-case test
	by returning t from default skip function.

2006-08-15  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-clock-special-range)
	(org-clock-update-time-maybe): New functions.
	(org-stamp-time-of-day-regexp): Allow weekday to be of word chars,
	not only a-z.
	(org-agenda-get-blocks): Allow multiple blocks per headline.
	(org-timestamp-change): Call `org-clock-update-time-maybe'.
	(org-export-html-title-format)
	(org-export-html-toplevel-hlevel): New options.
	(org-export-language-setup): Add support for Czech.
	(org-mode, org-insert-todo-heading, org-find-visible)
	(org-find-invisible, org-invisible-p, org-invisible-p2)
	(org-back-to-heading, org-on-heading-p, org-up-heading-all)
	(org-show-subtree, org-show-entry, org-make-options-regexp):
	Remove compatibility support for old outline-mode.
	(org-check-occur-regexp): Function removed.
	(org-on-heading-p, org-back-to-heading): Made defalias.
	(org-set-local): New defsubst.
	(org-set-regexps-and-options, org-mode)
	(org-set-font-lock-defaults, org-edit-agenda-file-list)
	(org-timeline, org-agenda-list, org-todo-list, org-tags-view)
	(org-remember-apply-template, org-table-edit-field)
	(org-table-edit-formulas, orgtbl-mode, org-export-as-ascii)
	(org-set-autofill-regexps): Use `org-set-local'.
	(org-table-eval-formula): Fix bug with parsing of display flags.

2006-08-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-stack-custom): Indicate selected
	frame with fringe arrow.  Suggested by Simon Marshall
	<simon.marshall@misys.com>.
	(gdb-stack-position): New variable.
	(gdb-starting, gdb-exited): Reset gdb-stack-position to nil.
	(gdb-frames-mode): Set gdb-stack-position to nil.
	Add to overlay-arrow-variable-list.
	(gdb-reset): Delete gdb-stack-position from above list.

2006-08-14  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el (menu-bar-edit-menu): Disable paste if buffer is
	read only.

2006-08-13  Romain Francoise  <romain@orebokech.com>

	* cus-theme.el (customize-create-theme)
	(custom-theme-visit-theme): End `y-or-n-p' prompt with a space.

	* filesets.el (filesets-add-buffer): Ditto.

	* pcvs.el (cvs-change-cvsroot): Ditto.

2006-08-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-frame-separate-io-buffer)
	(gdb-use-separate-io-buffer, menu): Avoid using `inferior' in text.
	(gdb-memory-mode, gdb-locals-watch-map): Don't quote lambda
	expressions.
	(gdb-info-breakpoints-custom): Use gdb-breakpoint-regexp.
	Only search till end of line.
	Add face to function names in case of no filename.
	Add face to variable names of watchpoints.

2006-08-12  Robert Thorpe  <rthorpe@realworldtech.com>  (tiny change)

	* cus-start.el <indent-tabs-mode>: Move to the `indent'
	customization group.

2006-08-12  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-prior-bindings, allout-added-bindings):
	Remove, after long deprecation.
	(allout-beginning-of-line-cycles, allout-end-of-line-cycles):
	Add customization vars controlling allout-beginning-of-line and
	allout-end-of-line conveniences.
	(allout-header-prefix, allout-use-mode-specific-leader)
	(allout-use-mode-specific-leader, allout-mode-leaders):
	Revise docstrings.
	(allout-infer-header-lead): Change to be an alias for
	allout-infer-header-lead-and-primary-bullet.
	(allout-infer-header-lead-and-primary-bullet): New version of
	allout-infer-header-lead which assigns the primary bullet to the
	same as the header lead, when its being changed.
	(allout-infer-body-reindent): Apply regexp-quote instead of
	unconditionally prepending "\\", so that all literal
	allout-header-prefix and allout-primary-bullet strings are
	properly handled.
	(allout-add-resumptions): Add optional qualifier for extending or
	appending to existing values, rather than replacing them.
	(allout-view-change-hook): Clarify docstring.
	(allout-exposure-change-hook): Take explicit arguments, via
	run-hook-with-args.
	(allout-structure-added-hook)
	(allout-structure-deleted-hook)
	(allout-structure-shifted-hook): New hooks analogous to
	allout-exposure-change-hook for other kinds of structural outline
	edits.
	(allout-encryption-plaintext-sanitization-regexps): New encryption
	customization variable, by which cooperating modes can provide
	massage of the plaintext without actually being passed it.
	(allout-encryption-ciphertext-rejection-regexps)
	(allout-encryption-ciphertext-rejection-ceiling): New encryption
	customization variables, by which cooperating modes can prohibit
	rare but possible ciphertext patterns from fouling their
	operation, with actually being passed the ciphertext.
	(allout-mode): Run activation and deactivation hooks after the
	minor-mode variable has been toggled, to clarify the mode
	disposition.  The new encryption ciphertext rejection variable is
	used to ensure that the ciphertext does not contain text that
	would be recognized as outline structural elements by allout.
	Substitute allout-beginning-of-line and allout-end-of-line for
	conventional beginning-of-line and end-of-line bindings.
	If allout-old-style-prefixes is non-nil, don't nullify it on mode
	activation!
	(allout-beginning-of-line): Respect `allout-beginning-of-line-cycles'.
	(allout-end-of-line): Respect `allout-end-of-line-cycles'.
	(allout-chart-subtree): Implement new mode, charting only the
	visible items in the subtree, when new 'visible' parameter is non-nil.
	(allout-end-of-subtree): Properly handle the last item in the buffer.
	(allout-pre-command-business, allout-command-counter):
	Increment an advertised counter so that cooperating enhancements can
	track revisions of items.
	(allout-open-topic): Run allout-structure-added-hook with suitable
	arguments.
	(allout-shift-in): Run allout-structure-shifted-hook with suitable
	arguments.
	(allout-shift-out): Fix doubling for negative args and ensure call
	of allout-structure-shifted-hook by solely using allout-shift-in.
	(allout-kill-line, allout-kill-topic):
	Run allout-structure-deleted-hook with suitable arguments.
	(allout-yank-processing): Run allout-structure-added-hook with
	proper arguments.
	(allout-yank): Enclose activity in allout-unprotected.
	(allout-flag-region): Run allout-exposure-change-hook with
	suitable arguments, instead of making the callee infer the arguments.
	(allout-encrypt-string):
	Support allout-encryption-plaintext-sanitization-regexps,
	allout-encryption-ciphertext-rejection-regexps, and
	allout-encryption-ciphertext-rejection-ceiling.  Indicate correct
	en/de cryption mode in symmetric encryption failure message.
	(allout-obtain-passphrase): Use copy-sequence to get a distinct
	copy of the passphrase, and don't zero it or we'll corrupt the
	stashed copy.
	(allout-create-encryption-passphrase-verifier)
	(allout-verify-passphrase): Respect the new signature for
	allout-encrypt-string.
	(allout-get-configvar-values): Convenience for getting a
	configuration variable value and handling its absence gracefully.

2006-08-11  Romain Francoise  <romain@orebokech.com>

	* obsolete/zone-mode.el: Delete.

2006-08-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/dns-mode.el (dns-mode): Use before-save-hook.

2006-08-11  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/bindat.el (bindat-ip-to-string):
	Use `format-network-address' if possible.

2006-08-11  Jan Djärv  <jan.h.d@swipnet.se>

	* x-dnd.el (x-dnd-init-frame): Call x-register-dnd-atom.

2006-08-10  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/edebug.el (edebug-recursive-edit): Don't save and
	restore unread-command-events here.
	(edebug-display): Do it here, to detect sit-for interruptions.

2006-08-10  Romain Francoise  <romain@orebokech.com>

	* textmodes/dns-mode.el: Alias `zone-mode' to `dns-mode'.
	(dns-mode-soa-auto-increment-serial): New user option.
	(dns-mode-soa-maybe-increment-serial): New function.
	(dns-mode): Add the latter to `write-contents-functions'.

	* obsolete/zone-mode.el: Move to obsolete/ from net/.
	Delete autoload cookies.

2006-08-10  John Wiegley  <johnw@newartisans.com>

	* eshell/em-glob.el (eshell-glob-chars-list)
	(eshell-glob-translate-alist): Add support for [^g] in character globs.

2006-08-10  Richard Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-add-face): Pass frame to facemenu-active-faces.
	(facemenu-set-face): Doc fix.
	(facemenu-listed-faces): Doc fix.

2006-08-09  Chong Yidong  <cyd@stupidchicken.com>

	* avoid.el (mouse-avoidance-animating-pointer): New var.
	(mouse-avoidance-nudge-mouse): Use it.
	(mouse-avoidance-banish): Rename from mouse-avoidance-banish-hook.
	(mouse-avoidance-exile): Rename from mouse-avoidance-exile-hook.
	(mouse-avoidance-fancy): Rename from mouse-avoidance-fancy-hook.
	Don't activate if currently animating.  All callers changed.

2006-08-09  John Wiegley  <johnw@newartisans.com>

	* calendar/timeclock.el (timeclock-use-elapsed): Added a new
	variable, which causes timeclock to report elapsed time worked,
	instead of just work remaining.

2006-08-09  Kenichi Handa  <handa@m17n.org>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Fix for the case that the 2nd element of arg-list is a cons.

2006-08-08  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-fontify-node): Handle preceding `in' for note
	reference hiding rules.

2006-08-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-quoted-subshell): Make sure we don't
	mistake a closing " for an opening one.

2006-08-07  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add more key bindings.

2006-08-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* complete.el (PC-do-completion): Filter out completions matching
	completion-ignored-extensions before checking whether there are
	multiple completions.
	Don't use `list' unnecessarily when building completion tables.

2006-08-06  Richard Stallman  <rms@gnu.org>

	* help.el (describe-mode): Make minor mode list more concise.

2006-08-05  Chong Yidong  <cyd@stupidchicken.com>

	* bindings.el: Give mode-line-format, mode-line-modes, and
	mode-line-position `standard-value' properties.

2006-08-05  Eli Zaretskii  <eliz@gnu.org>

	* buff-menu.el (list-buffers-noselect): For Info buffers, use
	"(file)node" instead of the file name.

2006-08-05  Richard Stallman  <rms@gnu.org>

	* faces.el (escape-glyph): Doc fix.

2006-08-04  Kenichi Handa  <handa@m17n.org>

	* international/mule-diag.el (describe-font): Improve docstring
	and error message.  Use frame-parameter (not frame-parameters).

2006-08-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/gud.el (gdb-script-font-lock-syntactic-keywords):
	Correctly mark the end-of-docstring char.

2006-08-03  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-to-column): Constrain move-to-column to
	current field.

2006-08-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-beg, font-lock-end)
	(font-lock-extend-region-functions): New vars.
	(font-lock-extend-region-multiline)
	(font-lock-extend-region-wholelines): New functions.
	(font-lock-default-fontify-region): Use them.
	(font-lock-extend-jit-lock-region-after-change): Only round up
	if font-lock-default-fontify-region will do it as well.

	* font-lock.el (font-lock-extend-after-change-region-function):
	Rename from font-lock-extend-region-function.
	(font-lock-extend-region): Remove by inlining at call sites.
	(font-lock-after-change-function): Don't needlessly round up to a whole
	number of lines.
	(font-lock-extend-jit-lock-region-after-change): Be more careful about
	the boundary conditions and the interactions between the various ways
	to extend the region.

2006-08-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* jit-lock.el (jit-lock-fontify-now): Preserve the buffer's
	modification status when forcing the second redisplay.

2006-08-03  Kim F. Storm  <storm@cua.dk>

	* edmacro.el (edmacro-fix-menu-commands): Ignore switch-frame.

2006-08-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-util.el (cvs-get-buffer-create): Obey `noreuse' even if `name'
	doesn't look like a file name.

	* complete.el (PC-expand-many-files): Avoid signaling an error when
	the current directory doesn't exist.  Reported by Michaël Cadilhac.

2006-08-02  Andreas Schwab  <schwab@suse.de>

	* bindings.el (mode-line-format): Simplify reference to vc-mode.

2006-08-02  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (map): Make mode-line-buffer-identification-keymap
	before defining propertized-buffer-identification.

2006-08-01  Richard Stallman  <rms@gnu.org>

	* bindings.el (mode-line-format): Adjust spacing around vc-mode.

2006-08-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-find-source-frame): Make nil the
	default value.
	(gdb-find-source-frame): New function.
	(menu): Add to menu bar.

2006-08-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-core.el (font-lock-extend-region-function)
	(font-lock-extend-region): Move to font-lock.el.

	* font-lock.el (font-lock-extend-region-function)
	(font-lock-extend-region): Move from font-core.el.  Simplify.

	* jit-lock.el (jit-lock-fontify-now): Cause a second redisplay
	if needed.
	(jit-lock-start, jit-lock-end): New dynamic scoped vars.
	(jit-lock-after-change-extend-region-functions): New hook.
	(jit-lock-after-change): Use it instead of hard-coding font-lock code.

	* font-lock.el (font-lock-extend-jit-lock-region-after-change): New fun.
	(font-lock-turn-on-thing-lock): Use it.

	* longlines.el (longlines-show-region): Make it work on read-only
	buffers as well.

2006-08-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-hollow): Check for gud-last-last-frame.

2006-07-31  Richard Stallman  <rms@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-speedbar-display-directory)
	(vhdl-speedbar-display-projects): Update old obsolete
	speedbar variable names.

2006-07-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-find-source-frame): New option.
	(gdb-stopped): Use it.

	* t-mouse.el (t-mouse-mode): Use set-process-query-on-exit-flag.

2006-07-29  Chong Yidong  <cyd@stupidchicken.com>

	* loadhist.el (unload-feature): Handle new `(t . SYMBOL)' format
	for load-history elements.

2006-07-29  Eli Zaretskii  <eliz@gnu.org>

	* files.el (convert-standard-filename): For Cygwin, replace
	characters not allowed in Windows file names.
	(make-auto-save-file-name): Add Cygwin to the list of systems
	where the auto-save file name needs to be run through
	convert-standard-filename.

2006-07-29  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* window.el (bw-get-tree): Don't integerp subtree if it's nil.

2006-07-28  Richard Stallman  <rms@gnu.org>

	* bindings.el (mode-line-frame-identification)
	(propertized-buffer-identification): Centralize the code
	to initialize the variable.

	* progmodes/grep.el (grep-default-command): Catch errors from
	wildcard-to-regexp.

2006-07-29  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-tag-default): New function.
	(grep-default-command, grep-read-regexp): Use it.
	(grep-read-files): Use car of grep-files-history or grep-files-aliases
	as default if nothing else applies.

2006-07-28  Bill Atkins  <atkinw@rpi.edu>  (tiny change)

	* wdired.el (wdired-change-to-wdired-mode, wdired-change-to-dired-mode):
	Throw error if buffer is not in Dired and Wdired mode, respectively.

2006-07-28  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-no-edit): Revert 2006-07-27 change, so that
	self-insert-command keys don't activate buttons.
	(custom-mode-map): Just don't bind "\C-m" to `custom-no-edit'.

2006-07-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom): Use different
	faces for enable character.

2006-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* Makefile.in (recompile): Update comment to reflect change
	on 2004-04-21.

2006-07-27  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (customize-package-emacs-version-alist): Doc fix.
	(customize-package-emacs-version): Change msg when pkg has no entry.
	(custom-no-edit): On a button, do like widget-button-press.

2006-07-27  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Fix bindings for C-tab,
	S-tab and C-S-tab.

2006-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/which-func.el (which-function): Fix documentation/
	comment typo.

2006-07-26  Richard Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-word): If we replace the word,
	move point to the end.  Insert before deleting.

2006-07-26  Chong Yidong  <cyd@stupidchicken.com>

	* subr.el (sit-for): Use new SECONDS arg of read-event instead of
	a timer.

2006-07-26  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-backward-image): Add prefix argument.  Add error
	when at first image.
	(tumme-forward-image): Add prefix argument.  Add error when at last
	image.

2006-07-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* tabify.el (tabify-regexp): Use more specific regexps.
	(tabify): Avoid modifying the buffer unnecessarily.

2006-07-25  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-track-original-file): Add `buffer-live-p' check.
	(tumme-format-properties-string): Handle empty `buf'.
	(tumme-get-comment): Change variable names inside `let'.
	Add missing `let' variable that cause font-lock problems.
	(tumme-write-comments): Change variable names inside `let'.
	Add missing `let' variable that cause font-lock problems.
	(tumme-forward-image): Rename from `tumme-forward-char'.
	(tumme-backward-image): Rename from `tumme-backward-char'.

2006-07-25  Masatake YAMATO  <jet@gyve.org>

	* progmodes/ld-script.el (ld-script-keywords)
	(ld-script-font-lock-keywords, ld-script-builtins): Update keywords
	and add comments.

2006-07-25  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-existing-buffers)
	(gdb-resync, gdb-prompt, gdb-starting, gdb-exited, gdb-stopped)
	(gdb-set-gud-minor-mode-existing-buffers-1): Use different faces
	for status indicator.

2006-07-24  Richard Stallman  <rms@gnu.org>

	* xml.el (xml-parse-file): Clean up, and use with-temp-buffer.

	* subr.el (dolist, dotimes): Use interned symbols for locals.
	(--dotimes-limit--, --dolist-tail--): New defvars.
	(looking-back): Doc fix.

	* replace.el (replace-match-string-symbols): Handle dotted lists.

2006-07-24  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-write-tags): Add.
	(tumme-write-comments): Add.
	(tumme-tag-files): Change to use `tumme-write-tags'.
	(tumme-tag-thumbnail): Change to use `tumme-write-tags'.
	(tumme-dired-comment-files): Change to use `tumme-write-comments'.
	(tumme-save-information-from-widgets): Change to use
	`tumme-write-comments' and `tumme-write-tags'.
	(tumme-comment-thumbnail): Change to use `tumme-write-comments'.
	(tumme-write-tag): Remove.
	(tumme-write-comment): Remove.
	(tumme-display-previous-thumbnail-original): Remove empty line.
	(tumme-widget-list): Add punctuation.

2006-07-24  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-line-up): Add an extra check for end of buffer.

2006-07-24  Daiki Ueno  <ueno@unixuser.org>

	* pgg-def.el (pgg-truncate-key-identifier): Truncate the key ID to 8
	letters from the end.  Thanks to "David Smith" <davidsmith@acm.org>
	and andreas@altroot.de (Andreas Vögele).

2006-07-23  Thien-Thi Nguyen  <ttn@gnu.org>

	* mouse.el (mouse-on-link-p): Doc fix.

2006-07-23  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	Handle "C-h f `".

2006-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* ibuffer.el (ibuffer-formats): Use left alignment for the mode
	column.

2006-07-22  Matt Hodges  <MPHodges@member.fsf.org>

	* textmodes/table.el: Add move-beginning-of-line and
	move-end-of-line to Point Motion Only Group.

2006-07-22  Eric Hanchrow  <offby1@blarg.net>

	* progmodes/delphi.el (delphi-fill-comment): Use save-restriction.

2006-07-22  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* startup.el (user-mail-address): Initialize from the `EMAIL'
	environment variable first.  Document this.
	(command-line): Ditto.

2006-07-22  Nick Roberts  <nickrob@snap.net.nz>

	* help-mode.el (help-function-def, help-variable-def)
	(help-face-def): Print a message in the minibuffer.

2006-07-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Fix key bindings
	syntax.  Bind S-return, C-M-., C-TAB, S-TAB and C-S-TAB.

2006-07-21  Eli Zaretskii  <eliz@gnu.org>

	* dos-w32.el (find-buffer-file-type-coding-system): Support calls
	where `(nth 1 command)' is a cons cell.  Doc fix.

	* textmodes/po.el (po-find-charset): Doc fix.

2006-07-21  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-unprotected, allout-e-o-prefix-p)
	(allout-beginning-of-current-line, allout-end-of-current-line)
	(allout-next-visible-heading, allout-open-topic)
	(allout-kill-topic, allout-yank-processing, allout-resolve-xref)
	(allout-flag-current-subtree, allout-show-to-offshoot)
	(allout-hide-current-entry, allout-show-current-branches)
	(allout-hide-region-body, allout-old-expose-topic)
	(allout-listify-exposed, allout-latex-verbatim-quote-curr-line)
	(allout-mark-topic, allout-adjust-file-variable): Enclose scopes
	containing `beginning-of-line' and `end-of-line' with
	`inhibit-field-text-motion' t.

2006-07-21  Eli Zaretskii  <eliz@gnu.org>

	* frame.el (focus-follows-mouse): Document that it doesn't have
	any effect on MS-Windows.

2006-07-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-quoted-subshell): Further fix last change.

2006-07-20  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-previous-alg-entry): Remove variable.

	* calc/calc-aent.el (calc-alg-entry-history, calc-quick-calc-history):
	New variables.
	(calc-alg-entry): Use `calc-alg-entry-history'.
	(calc-do-quick-calc): Use `calc-quick-calc-history'.
	Remove reference to `calc-previous-alg-entry'.
	(calcAlg-edit, calcAlg-enter): Remove reference to
	`calc-previous-alg-entry'.
	(calcAlg-previous): Use `previous-history-element' instead of
	`calc-previous-alg-entry'.
	(calc-do-alg-entry): Use history when calling `read-from-minibuffer'.
	Change keybinding for `calcAlg-plus-minus', add keybindings for
	`previous-history-element' and `next-history-element'.

	* calc/calc-rewr.el (calc-match): Remove reference to
	`calc-previous-alg-entry'.

	* calc/calc-sel.el (calc-selection-history): New variable.
	(calc-enter-selection, calc-sel-mult-both-sides)
	(calc-sel-add-both-sides): Use `calc-selection-history'.

	* calc/calc-map.el (calc-get-operator-history): New variable.
	(calc-get-operator): Use `calc-get-operator-history'.

	* calc/calcalg3.el (calc-curve-fit-history): New variable.
	(calc-curve-fit): Use `calc-curve-fit-history'.

2006-07-20  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system): Fix the
	way of deciding eol-type of the coding system.

2006-07-20  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-langs.el (c-emacs-variable-inits): New variable.
	(c-lang-setvar): New macro.
	(c-make-init-lang-vars-fun): Use the initialization forms in
	c-emacs-variable-inits in addition to those in c-lang-variable-inits.
	(comment-start, comment-end, comment-start-skip): Change these from
	c-lang-defvar's to c-lang-setvar's.

	* progmodes/cc-mode.el (c-make-emacs-variables-local): New macro,
	which calls make-local-variable on the elements of
	c-emacs-variable-inits.
	(c-init-language-vars-for): Call this new macro.

2006-07-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/compile.el (compilation-error-regexp-alist-alist) <gnu>:
	Try to rule out false positives due to time stamps.
	(compilation-mode-font-lock-keywords): Remove rules made redundant
	because of the above change.  Add `segmentation fault' to the known and
	highlighted compilation termination messages.

2006-07-19  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-find-ignored-directories):
	Add .svn and _darcs to list.

2006-07-19  Mathias Dahl  <mathias.dahl@gmail.com>

	* dired.el (dired-mode-map): Add key binding `C-te' for
	`tumme-dired-edit-comment-and-tags'.

	* tumme.el (tumme-display-thumbnail-original-image): Make sure
	image display buffer is displayed before call to
	`tumme-display-image'.
	(tumme-dired-display-image): Make sure image display buffer is
	displayed before call to `tumme-display-image'.
	(tumme-mouse-display-image): Make sure image display buffer is
	displayed before call to `tumme-display-image'.
	(tumme-widget-list): Add.
	(tumme-dired-edit-comment-and-tags): Add.
	(tumme-save-information-from-widgets): Add.

2006-07-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-quoted-subshell): Fix last change.

2006-07-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-font-lock-keywords-1):
	Revert inadvertently installed patch hunk.

	* progmodes/compile.el (compilation-find-file): Handle the
	cases where the user selects a non-existent file.

2006-07-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* bindings.el (minibuffer-local-map): Rebind TAB so it inserts a \t.

2006-07-17  Chong Yidong  <cyd@stupidchicken.com>

	* subr.el (sit-for): Just sleep-for if noninteractive.

2006-07-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (make-autoload): Use new arg.

	* custom.el (custom-autoload): Add `noset' argument.
	(custom-push-theme): Don't autoload the variable, let callers do it.
	(custom-theme-set-variables): Autoload the variable if necessary.

	* cus-edit.el (custom-variable-state-set): If the variable was
	originally set outside custom, but to the same value as the default,
	consider it to be standard.

	* Makefile.in (mh-loaddefs.el): Finish setting up the default empty
	file *before* telling Emacs to add the autoloads, in case it fails.

	* progmodes/sh-script.el (sh-quoted-subshell): Don't match escaped `.
	Use `cond', push', and `dolist'.

2006-07-17  Richard Stallman  <rms@gnu.org>

	* image-mode.el (tar-superior-buffer, archive-superior-buffer):
	Add defvars to silence warnings.

2006-07-17  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Don't highlight "Compiling file" messages as error.

	* dired-aux.el (dired-compress-file): Confirm again if gzipped
	file already exists.

2006-07-16  Thien-Thi Nguyen  <ttn@gnu.org>

	* find-file.el (ff-special-constructs): Doc fix.  Also, for C/C++
	entry, don't assign to free var; simply return the extracted filename.
	(ff-treat-as-special): Incorporate common preamble from callers.
	(ff-other-file-name, ff-find-the-other-file):
	Update call to ff-treat-as-special.

	* progmodes/ada-mode.el (ada-mode): Rewrite ff-special-constructs init.

2006-07-16  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-get-comment): Fix bug.

2006-07-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el: Remove spurious * in docstrings.

2006-07-14  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-run-unit-tests-on-load): Rectify docstring
	grammar.
	(allout-beginning-of-current-line): Beware beginning of buffer.
	Also, a comment is simplified.
	(allout-hotspot-key-handler): Only set allout-post-goto-bullet
	when appropriate.  (This fix enables use for other than
	bullet-hotspot operation.)
	(allout-hide-current-subtree): While escalating to sibling-close,
	make sure to situate on a topic.

2006-07-14  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-delete-selection)
	(cua-toggle-set-mark): New defcustoms.
	(cua-rectangle-modifier-key): Add `alt' modifier.
	(cua-replace-region): Don't delete if cua-delete-selection is nil.
	(cua-set-mark): Don't clear mark if cua-toggle-set-mark is nil.
	Suggested by Klaus Zeitler <kzeitler@lucent.com>.

	* emulation/cua-rect.el (cua-help-for-rectangle): Add `alt' modifier.

2006-07-14  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Require 'cl during byte-compilation/interactive load,
	for the `assert' macro.
	(allout-mode-deactivate-hook): New hook, run when allout mode
	deactivates.
	(allout-developer): New allout customization subgroup.
	(allout-run-unit-tests-on-load): New allout-developer
	customization variable, when true allout unit tests are run towards
	end of file load/eval.
	(allout-inhibit-auto-fill): Disable auto-fill activity even during
	auto-fill-mode.
	(allout-resumptions): Remove, to be replaced by...
	(allout-add-resumptions): Register variable settings to be
	reinstated by `allout-do-resumptions'.  The settings are made
	buffer-local, but the locality/globality of the suspended setting
	is restored on resumption.
	(allout-do-resumptions): Reinstate all settings suspended using
	`allout-add-resumptions'.
	(allout-test-resumptions): Unit tests (and intermediate variables)
	for resumptions.
	(allout-tests-globally-unbound, allout-tests-globally-true)
	(allout-tests-locally-true): Intermediate variables for
	resumptions unit tests.
	(allout-overlay-preparations): Replaces `allout-set-overlay-category'.
	(allout-exposure-category): Replaces 'allout-overlay-category variable.
	(allout-mode): Use `allout-add-resumptions' and `allout-do-resumptions'
	instead of retired `allout-resumptions'.  For hook functions, use
	`local' parameter so hook settings are created and removed as
	buffer-local settings.  Revise (resumptions) setting
	auto-fill-function so it is set only if already active.  The
	related fill-function settings are all made in either case, so
	that activating auto-fill-mode activity will have the custom
	allout-mode behaviors (hanging indent on topics, if configured for it).
	Remove all allout-exposure-category overlays on mode deactivation.
	(allout-hotspot-key-handler): New function extracted from
	`allout-pre-command-business', so the functionality can be used
	for other purposes, eg as a binding in an overlay.
	(allout-pre-command-business): Use new `allout-hotspot-key-handler'.
	(allout-auto-fill): Respect new `allout-inhibit-auto-fill'
	customization variable.
	(allout-run-unit-tests): Run the (currently quite small)
	repertoire of unit tests.  Called just before the provide iff user
	has customized `allout-run-unit-tests-on-load' non-nil.

2006-07-14  Károly Lőrentey  <lorentey@elte.hu>

	* emacs-lisp/authors.el (authors-aliases): Update.

2006-07-14  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-display-buffer): Check for
	gdb-source-window.  Add dedicated argument.
	(gdb-display-separate-io-buffer, gdb-append-to-inferior-io)
	(gdb-display-breakpoints-buffer, gdb-display-stack-buffer)
	(gdb-display-threads-buffer, gdb-display-memory-buffer)
	(gdb-display-locals-buffer): Use it.

	* progmodes/gud.el (gud-display-line): Use gdb-display-buffer.
	Set gdb-source-window.

2006-07-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (make-autoload): Remove special handling of
	minor modes, redundant with the custom-autoload line above.

2006-07-12  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-post-command-function): Handle open-line too.

2006-07-12  Richard Stallman  <rms@gnu.org>

	* progmodes/grep.el (grep-last-buffer): Doc fix.

	* info.el (Info-try-follow-nearest-node): Doc fix.

	* emacs-lisp/edebug.el (edebug-instrument-function):
	Err if find-function-noselect gives no position.

	* emacs-lisp/find-func.el (find-function-search-for-symbol):
	If can't find definition, return nil for position.
	(find-function-do-it): Handle new return value
	of find-definition-noselect.
	(find-definition-noselect, find-variable-noselect): Doc fix.
	(find-function-noselect): Doc fix.

	* help-mode.el (help-variable-def): Handle find-variable-noselect
	returning no position.
	(help-function-def): Likewise for find-function-search-for-symbol.
	(help-face-def): Likewise.

	* help-fns.el (describe-variable): Handle find-variable-noselect
	returning no position.

	* files.el (locate-file-completion): Avoid duplicates in result.

	* cus-edit.el (custom-no-edit): New command.
	(custom-mode-map): Remap to custom-no-edit instead of
	using suppress-keymap.

2006-07-12  Nick Roberts  <nickrob@snap.net.nz>

	* tumme.el (tumme-create-thumb, tumme-thumbnail-display-external)
	(tumme-display-image, tumme-rotate-thumbnail, tumme-rotate-original)
	(tumme-set-exif-data, tumme-get-exif-data): Use shell-command-switch.

	* thumbs.el (thumbs-call-convert): Use shell-command-switch.

2006-07-11  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-copy-current-file-name): Use buffer-name if
	buffer-file-name is nil.

2006-07-11  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (undo-ask-before-discard): Set to nil.

	* vc.el (vc-exec-after): Don't delete process manually.
	(vc-print-log): Run log-view-mode in process sentinel inside
	inhibit-read-only.  Don't shrink window due to timing issues.

	* progmodes/ebrowse.el (ebrowse-display-member-buffer):
	Avoid using with-output-to-temp-buffer, which clobbers local vars.

2006-07-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Fix ambiguity introduced by last change.
	(compilation-find-file): Move save-excursion to where it may
	make sense.  Fix a left over `find-file'.

2006-07-11  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-format-separate-node):
	Insert a string before point, which fits documentation, not after.
	(texinfo-multitable-item): In a multitable row, insert any
	additional needed @tabs and spaces.

2006-07-11  Nick Roberts  <nickrob@snap.net.nz>

	* tumme.el (tumme-create-thumb, tumme-thumbnail-display-external)
	(tumme-display-image, tumme-rotate-thumbnail, tumme-rotate-original)
	(tumme-set-exif-data, tumme-get-exif-data): Use call-process
	instead of shell-command.
	(tumme-create-thumbnail-buffer, tumme-create-display-image-buffer)
	(tumme-display-thumbs, tumme-modify-mark-on-thumb-original-file)
	(tumme-display-image, tumme-get-exif-data): Use with-current-buffer.
	(tumme-display-properties-format, tumme-dired-insert-marked-thumbs)
	(tumme-thumbnail-set-image-description, tumme-gallery-generate)
	(tumme-rotate-original, tumme-get-exif-file-name): Fit to 80 columns.

2006-07-11  Kim F. Storm  <storm@cua.dk>

	* subr.el (sit-for): Doc fix.  Specify normal arg list using fn-form.
	Remove special case for seconds < 0.  Use (redisplay t) instead.

2006-07-10  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/cc-awk.el (c-awk-escaped-nls*): Use eval-and-compile to
	avoid compilation error.

	* subr.el (sit-for): New function.

	* play/hanoi.el (hanoi-sit-for): Check sit-for return value.

2006-07-10  Richard Stallman  <rms@gnu.org>

	* ldefs-boot.el (edebug): Update page.

2006-07-10  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-ignored-files): Ignore changes
	to FOR-RELEASE and TODO.

2006-07-10  Romain Francoise  <romain@orebokech.com>

	* emacs-lisp/authors.el (authors-aliases): Update.

2006-07-10  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-awk.el, cc-defs.el, cc-fonts.el, cc-langs.el:
	* cc-mode.el: Changes to eradicate eval-after-load.

2006-07-09  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/helper.el (Helper-help-scroller): Don't signal error
	on non-char events.

2006-07-09  Romain Francoise  <romain@orebokech.com>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Don't highlight start/end markers as compilation messages.

	* isearch.el (isearch-yank-line): Let-bind `inhibit-field-text-motion'
	to t.

2006-07-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/fill.el (fill-region-as-paragraph): Refine last change.

2006-07-08  Richard Stallman  <rms@gnu.org>

	* term/x-win.el (x-handle-display): Add doc string.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Doc fix.

	* subr.el (def-edebug-spec): Move here.
	* emacs-lisp/edebug.el (def-edebug-spec): Move to subr.el.

	* imenu.el (imenu-choose-buffer-index): Doc fix.

2006-07-08  Romain Francoise  <romain@orebokech.com>

	* term/x-win.el (x-display-name): Fix typo.

2006-07-08  Eli Zaretskii  <eliz@gnu.org>

	* hexl.el (hexl-find-file): Doc fix.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Doc fix.

2006-07-07  Chong Yidong  <cyd@stupidchicken.com>

	* term/x-win.el (x-display-name): Doc fix.

2006-07-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/fill.el (fill-delete-prefix): Don't ignore excessively
	long prefixes.
	(fill-region-as-paragraph): Don't round up to a whole line.
	(fill-comment-paragraph): Don't include the code-before-the-comment
	when calling fill-region-as-paragraph.

	* international/mule.el (make-char): Remove redundancy.

	* emacs-lisp/bytecomp.el (byte-compile-form): The `byte-compile'
	property may contain an anonymous function rather than a symbol.

	* pcvs-defs.el (cvs-temp-buffer-name): Fix non-hiddenness.

	* progmodes/compile.el (compilation-error-regexp-alist-alist) <gnu>:
	Use shy regexp.  Fix incorrect backref to potentially unmatched group.

	* dirtrack.el (dirtrack-default-directory-function): Remove.
	(dirtrack-directory-function): Use file-name-as-directory.
	(dirtrack-windows-directory-function): Simplify.
	(dirtrack-forward-slash, dirtrack-backward-slash)
	(dirtrack-replace-slash): Remove.
	(dirtrack-toggle): Adjust comint-preoutput-filter-functions as well.
	(dirtrack): Fix wrong parenthesizing; use match-string.

	* progmodes/octave-inf.el: Remove spurious * in docstrings.
	(inferior-octave-mode): Only change the buffer-local value of
	comint-dynamic-complete-functions.
	(inferior-octave-mode-map, inferior-octave-mode-syntax-table):
	Move the initialization to the declaration.
	(inferior-octave-complete): Remove unused var `filter'.

	* shell.el (shell-mode): Only change the buffer-local value of
	comint-dynamic-complete-functions.

2006-07-07  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-get-todos): Skip subtree also if
	entry is skipped because it has been scheduled.
	(org-prepare-agenda-buffers): Don't mark buffers as modified when
	changing `:org-archived' and `:org-comment' properties.

2006-07-06  Chong Yidong  <cyd@stupidchicken.com>

	* server.el (server-select-display): Don't make the temp frame
	minibuffer-only, in case it's not a temp frame.
	(server-process-filter): Don't delete the temp frame if it's the
	only one we have on that display.

	* files.el (find-alternate-file): Doc fix.

2006-07-05  Richard Stallman  <rms@gnu.org>

	* files.el (abbreviate-file-name): Add save-match-data.

2006-07-03  Richard Stallman  <rms@gnu.org>

	* faces.el (read-face-name): Doc fix.

2006-07-05  Chong Yidong  <cyd@stupidchicken.com>

	* net/goto-addr.el (goto-address): Mark as safe for local evals.

2006-07-05  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-internal): Fix prev change.

2006-07-05  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-map): Use eval-buffer.
	* play/dunnet.el (dun-load-d, dun-eval): Likewise.

2006-07-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* thingatpt.el (symbol-at-point): Don't use `form-at-point' which
	fails if the symbol contains chars like ( or '.
	(bounds-of-thing-at-point): Remove unused vars `end' and `beg'.
	(thing-at-point-bounds-of-url-at-point): Remove unused vars `url' and
	`short'.

2006-07-04  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-info): If LANG-ENV is
	the current one, don't call set-language-environment, but call one
	of set-language-environment-XXX to make INFO effective now.
	(set-language-environment): Call set-language-environment-XXX
	functions instead of doing the various setups directly.
	(set-language-environment-coding-systems): Delete argument eol-type.
	(set-language-environment-input-method)
	(set-language-environment-nonascii-translation)
	(set-language-environment-charset)
	(set-language-environment-fontset)
	(set-language-environment-unibyte): New functions.

2006-07-03  Luc Teirlinck  <teirllm@auburn.edu>

	* locate.el (locate-update-when-revert): New option.
	(locate-update-path): New option (suggested by Michael Albinus).
	(locate-prompt-for-command): Whitespace change.
	(locate-update): No longer offer to update the locate database by
	default.  Implement the two new options.

2006-07-04  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el: Move comment about track-mouse...

	* progmodes/gud.el: ...to here.

2006-07-03  Chong Yidong  <cyd@stupidchicken.com>

	* facemenu.el (facemenu-listed-faces): New var.
	(facemenu-unlisted-faces): Variable deleted.
	(facemenu-add-new-face): Use facemenu-listed-faces.

	* emulation/viper-init.el, calendar/calendar.el:
	* progmodes/make-mode.el: Delete calls to facemenu-unlisted-faces.

2006-07-03  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode): Remove no invalid settings for
	calc embedded mode.
	(org-mode-p): New defsubst.
	(org-save-all-org-buffers): New function.
	(org-first-headline-recenter): Enclose outline-regexp in group
	delimiters.
	(org-set-tags): Keep single space after stars.

2006-07-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (set-window-text-height): Only set window-min-height to
	1 if that's the requested size.

	* diff-mode.el (diff-find-file-name): Obey cvs-pcl-cvs-dirchange-re.
	(diff-unified->context, diff-context->unified)
	(diff-reverse-direction): Make sure the end marker stays at the end.
	(diff-mode): Add the keymap table at the end of docstring.
	Use lexical-let rather than constructing a closure manually.

	* files.el (find-file-noselect-1): Remove unused var assignment.
	(hack-local-variables-confirm): Print lists of strings as lists of
	strings rather than lists of symbols.
	(abbreviate-file-name, hack-local-variables-prop-line):
	Use match-string.
	(hack-one-local-variable): Move `make-local-variable' nearer its use.
	(recover-session-finish): Use line-end-position.

2006-07-02  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-shell-command): Preserve current-buffer.

2006-07-02  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-macroassign-regex):
	Accept preceding keyword.
	(makefile-gmake-statements): Reorganize, now that makepp has
	"override" and also handle forgotten "override define".
	(makefile-makepp-statements): Add new "global", "override export"
	and "override global".

2006-06-30  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ada-mode.el (ada-which-compiler, ada-mode-menu)
	(ada-compile-mouse-goto-error, ada-deactivate-properties)
	(ada-no-auto-case): Fix typos in docstrings.

2006-06-30  Nick Roberts  <nickrob@snap.net.nz>

	* info.el (Info-find-node-2): Search for makeinfo version more
	carefully.

2006-06-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-prepare-agenda-buffers):
	Use `invisible-OK' argument for `org-end-of-subtree'.
	(org-export-cleanup-toc-line): Rename from `org-html-cleanup-toc-line'.
	(org-beginning-of-item): Fix bug in regular expression for white line.
	(org-export-as-html): Enforce space after bullet in plain list items.
	(org-set-autofill-regexps): Require space after plain list bullet
	for paragraph-start.
	(org-ts-regexp3): New constant.
	(org-at-timestamp-p): New optional argument ALSO-INACTIVE.
	(org-timestamp-up-day, org-timestamp-down-day)
	(org-timestamp-change): Work with inactive timestamps.
	(org-ts-regexp1): Don't allow brackets in time stamps.

2006-06-29  Nick Roberts  <nickrob@snap.net.nz>

	* help-mode.el (help-xref-symbol-regexp): Add property as a keyword
	for ignoring links.

	* faces.el (read-face-name): Use it.

2006-06-28  Juri Linkov  <juri@jurta.org>

	* buff-menu.el (list-buffers-noselect): Compare Info file
	with the string "dir" to detect Info directory.

	* complete.el (partial-completion-mode): In lambda for
	`choose-completion-string-functions' use full function signature
	with 4 args, and move point to the end of the minibuffer only if arg
	`mini-p' is non-nil.

2006-06-28  John Paul Wallington  <jpw@pobox.com>

	* ibuffer.el (ibuffer-mode): Doc fix.

2006-06-28  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-context): New contexts :item-bullet,
	:latex-fragment, :latex-preview.
	(org-overlays-at, org-overlay-start, org-overlay-end):
	New compatibility functions.
	(org-inside-LaTeX-fragment-p): More accurate matching, using the
	exact regexp that will be used during export.
	(org-latex-regexps): New variable.
	(org-cdlatex-mode): Improve advice for `texmathp'.
	(turn-on-org-cdlatex): New function.

2006-06-28  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-handle-font-selection): Change keys of
	mac-atsu-font-table from strings to numbers.
	(mac-ts-caret-position): Use also when cursor-type is nil.
	(mac-ts-update-active-input-area): Add Mac OS Classic support.
	Relax condition for using overlay strings.
	Use mac-ts-caret-position face when cursor-type is nil.

2006-06-26  Kim F. Storm  <storm@cua.dk>

	* help.el (view-emacs-news): Declare `res' in the right let* form.

2006-06-25  Michael Albinus  <michael.albinus@gmx.de>

	* net/rcompile.el (remote-compile): Replace ange-ftp based
	implementation by Tramp functions.
	Suggested by Marc Abramowitz <msabramo@gmail.com>.

	* net/tramp.el (tramp-unload-tramp): Provide a doc string.

2006-06-24  Yoshinori Koseki  <kose@meadowy.org>

	* international/fontset.el (setup-default-fontset): Fix a typo in
	the "Oriya-Akruti" registry name.

2006-06-23  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-full-file-name): New function.
	(desktop-kill, desktop-save, desktop-remove, desktop-read)
	(desktop-revert): Use it.
	(desktop-clear, desktop-save, desktop-remove): Add autoload cookie.
	(desktop-after-read-hook): Add option list-buffers.
	(desktop-locals-to-save): Add tab-width.
	(desktop-save-mode, desktop-no-desktop-file-hook, desktop-save-hook):
	Fix docstring.

2006-06-23  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-cdlatex-mode-map)
	(org-cdlatex-texmathp-advice-is-done): New variables.
	(org-cdlatex-mode): New minor mode.
	(org-inside-LaTeX-fragment-p, org-try-cdlatex-tab): New functions.
	(org-cdlatex-underscore-caret, org-cdlatex-math-modify): New commands.
	(org-export-with-archived-trees): New option.
	(org-open-file): Remove the call to `convert-standard-filename'.
	(org-archive-tag, org-agenda-skip-archived-trees)
	(org-cycle-open-archived-trees)
	(org-sparse-tree-open-archived-trees): New options.
	(org-cycle-hide-archived-subtrees, org-hide-archived-subtrees)
	(org-toggle-tag, org-prepare-agenda-buffers, org-agenda-skip):
	New functions.
	(org-agenda-toggle-archive-tag, org-toggle-archive-tag): New commands.
	(org-agenda-mode-map): Add binding of `org-agenda-toggle-archive-tag'.
	(org-mode-map): Add binding for `org-toggle-archive-tag'.
	(org-timeline, org-agenda-list, org-todo-list, org-tags-view):
	Call `org-prepare-agenda-buffers'.
	(org-occur, org-scan-tags): Call `org-hide-archived-subtrees'.
	(org-file-apps, org-file-apps-defaults-gnu)
	(org-file-apps-defaults-macosx, org-file-apps-defaults-windowsnt):
	Handle remote files by forcing them to be opened in Emacs.

2006-06-23  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-diff-knows-L): New variable.
	(vc-diff-internal): Use it to handle "diff" programs that don't
	understand -L.  This works automatically, no user action is necessary.

2006-06-23  Daniel Brockman  <daniel@brockman.se>

	* net/rcirc.el (rcirc-default-user-full-name): Default to
	`rcirc-default-user-name' instead of `rcirc-user-name' (which no
	longer exists).
	(rcirc-process-list): Check `buffer-live-p' before attempting to
	switch to a buffer.

2006-06-23  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-mode): Fix initialization of coding systems
	based on rcirc-coding-system-alist.

2006-06-23  Martin Rudalics  <rudalics@gmx.at>

	* cus-edit.el (customize-apropos): A better error message.
	(top level) <debug-ignored-errors>: Extend and update the list of
	ignored error messages.

2006-06-23  Michael Ernst  <mernst@alum.mit.edu>

	* complete.el (PC-do-completion): Retain capitalization of user
	input, when possible, even if completion-ignore-case is set.

2006-06-23  Eli Zaretskii  <eliz@gnu.org>

	* generic-x.el (bat-generic-mode): Support .cmd files.

	* dos-w32.el (top level): Use find-file-not-found-functions
	instead of the obsolete find-file-not-found-hooks.

2006-06-22  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-mode-font-lock-keywords): Correct regexps
	to recognize mode name containing submodes, such as Grep/lw.

2006-06-21  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Check for move-end-of-line instead of
	end-of-line when setting temporary-goal-column.

2006-06-21  Miles Bader  <miles@gnu.org>

	* play/cookie1.el (cookie): Work properly when there's only one entry.

2006-06-21  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-exited): Ensure overlay arrow gets killed.
	(gdb-frame-handler): Generalize frame regexp for templates.

2006-06-20  Glenn Morris  <rgm@gnu.org>

	* calendar/appt.el (appt-display-format): Default value must be
	one of the customize options.

2006-06-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Update key availability info.
	Bind C-return.

	* term.el (term-delete-lines, term-insert-lines): Clarify comments.

2006-06-20  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables): Run `hack-local-variables-hook'
	whether or not a local variables list is defined.

	* msb.el (msb): Move `sit-for' hack here to handle both
	"mouse-down and drag" and "mouse-up and select" situations.
	(mouse-select-buffer): Move `sit-for' hack to `msb'.

2006-06-20  Kenichi Handa  <handa@m17n.org>

	* international/characters.el (word-combining-categories):
	Add entries for 2-byte Han characters.

2006-06-19  Richard Stallman  <rms@gnu.org>

	* bindings.el (mode-line-format): Save some mode line space.

	* files.el (find-file-noselect): Improve the question wording.
	(basic-save-buffer-2): Mask UMASK against 666.

	* mouse.el (mouse-drag-vertical-line-rightward-window): New function.
	(mouse-drag-vertical-line): Call it.

	* cus-edit.el (customize-option, customize-option-other-window):
	Error if SYMBOL is nil.

2006-06-19  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Require noutline, also on XEmacs.
	(org-end-of-subtree): Return point.
	(org-dblock-start-re, org-dblock-end-re): New constants.
	(org-create-dblock, org-prepare-dblock, org-map-dblocks)
	(org-dblock-update, org-update-dblock, org-beginning-of-dblock)
	(org-update-all-dblocks, org-find-dblock): New functions.
	(org-collect-clock-time-entries): New function.
	(org-html-handle-time-stamps): Never export CLOCK timeranges.
	(org-fixup-indentation): Modify to deal correctly with lines
	starting with TAB.  Only one argument DIFF now.
	(org-demote, org-promote): Call `org-fixup-indentation' with just
	one argument, DIFF.
	(org-mode): Don't mark buffer as modified when aligning tables.
	(org-clock-sum): Don't mark buffer modified when adding time sum
	properties.
	(org-export-as-html): Add support for a link validation function.
	(org-archive-all-done): New function.
	(org-archive-subtree): New prefix argument.  When set, archive all
	done subtrees in this buffer.
	(org-remove-clock-overlays)
	(org-remove-occur-highlights): Use `org-inhibit-highlight-removal'.
	(org-inhibit-highlight-removal): New variable, for dynamic scoping.
	(org-put-clock-overlay): Don't swallow last headline character
	when displaying overlay.
	(org-store-link): Link to `image-mode' with just the file name.

2006-06-18  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-special-read-and-insert-char):
	Use read-key-sequence.
	(viper-after-change-undo-hook): Misc enhancements.
	(viper-after-change-undo-hook): New hook.
	(viper-undo): Use viper-after-change-undo-hook.
	(viper-add-newline-at-eob-if-necessary): Widen before making changes.
	(viper-next-line-at-bol): If point is on a widget or a button, simulate
	clicking on that widget/button.

	* emulation/viper.el (viper-mode): Allow a separate cursor color
	in Emacs state.

	* ediff-diff.el (ediff-test-patch-utility): Catch errors.
	(ediff-actual-diff-options, ediff-actual-diff3-options): New variables.
	(ediff-set-actual-diff-options): New function.
	(ediff-reset-diff-options, ediff-toggle-ignore-case):
	Use ediff-set-actual-diff-options.
	(ediff-extract-diffs): Catch errors.
	(ediff-whitespace): Add non-breakable space.
	(ediff-same-file-contents): Catch errors.

	* ediff-mult.el (ediff-collect-custom-diffs):
	Save coding-system-for-read.

	* ediff-vers.el (ediff-keep-tmp-versions): New variable.
	(ediff-vc-internal, ediff-vc-merge-internal):
	Use ediff-delete-version-file.
	(ediff-delete-version-file): New function.

	* ediff-wind.el (ediff-control-frame-parameters): Set frame fringes.

	* ediff.el (ediff-directories, ediff-directory-revisions)
	(ediff-merge-directories, ediff-merge-directories-with-ancestor)
	(ediff-directories-internal, ediff-merge-directory-revisions)
	(ediff-merge-directory-revisions-with-ancestor)
	(ediff-directories3): Use read-directory-name.

2006-06-18  Ralf Angeli  <angeli@caeruleus.net>

	* textmodes/tex-mode.el (tex-font-lock-match-suscript):
	Remove superfluous part of regexp for brace matching which is handled
	by `scan-lists' call.

2006-06-16  Richard Stallman  <rms@gnu.org>

	* obsolete/options.el (list-options): Put "obsolete" msg in buffer.

	* files.el (basic-save-buffer-2): For a new precious file,
	use the default modes in the return value.

	* facemenu.el (facemenu-color-alist): Doc fix.

	* cus-edit.el (custom-guess-name-alist): Recognize `-flag'.

2006-06-16  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* cus-start.el (all): Add mac-ts-script-language-on-focus.

	* term/mac-win.el (mac-text-encoding-ascii): New constant.
	(mac-utxt-to-string): Use it.
	(mac-ts-update-active-input-area): Use mac-ae-number.

2006-06-15  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-handle-scroll, term-delete-lines)
	(term-insert-lines): Fix off by one errors.

2006-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* net/tramp.el (tramp-touch): Use UTC to express time.

2006-06-15  Chong Yidong  <cyd@stupidchicken.com>

	* mail/sendmail.el (mail-send): Search explicitly for
	mail-header-separator when checking for corrupted header lines.

2006-06-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-same-frame): New option.
	(gud-old-arrow, gdb-frame-begin, gdb-printing): New variables.
	(gdb-init-1): Initialize them.
	(gdb-starting): Reset gdb-printing.
	(gdb-starting): Save value of gud-overlay-arrow-position.
	(gdb-frame-begin): Set gdb-frame-begin, gdb-printing.
	(gdb-stopped): Don't look for source if calling procedure e.g "p a ()".
	Use gdb-*-gdb-buffer conditionally on gdb-same-frame.
	(gdb-frame-gdb-buffer): Keep menu bar, tool bar for GUD buffer.

2006-06-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-retrieve-revision): Use decode-coding-inserted-region.

2006-06-13  Martin J. Reed  <mjreed@essex.ac.uk>  (tiny change)

	* net/ldap.el (ldap-ldapsearch-args): Default to SASL search.
	(ldap-search-internal): Keep error messages, and a regexp fix.

2006-06-12  Thien-Thi Nguyen  <ttn@gnu.org>

	* files.el (hack-local-variables-confirm):
	Display string value using its printed representation.

2006-06-11  Chong Yidong  <cyd@stupidchicken.com>

	* server.el (server-edit): No-op if no server buffers exist.

2006-06-11  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/page-ext.el (pages-directory-for-addresses):
	Including `pages-directory-address-mode' in the function results
	in the message "Buffer in which pages were found is deleted".

2006-06-10  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-mode-map): Add bindings for
	clocking functions.

	(org-agenda-clock-in, org-check-running-clock)
	(org-clock-out-if-current, org-remove-clock-overlays)
	(org-put-clock-overlay): New functions.
	(org-clock-marker, org-clock-file-total-minutes)
	(org-clock-overlays): New variables.
	(org-clock-display, org-clock-sum, org-clock-cancel)
	(org-clock-out, org-clock-in): New commands.
	(org-export): New function.
	(org-emph-re): New constant.
	(org-set-emph-re, org-do-emphasis-faces): New functions.
	(org-emphasis-regexp-components, org-emphasis-alist): New options.
	(org-set-font-lock-defaults): Call `org-do-emphasis-faces'.
	(org-export-html-convert-emphasize): Use the configurable emphasis.
	(org-cleaned-string-for-export): Make multiline emphasis visible
	to the exporter.  New optional argument PARAMETERS.
	(org-export-as-html): Specify :emph-multiline parameter to
	`org-cleaned-string-for-export'.

2006-06-10  Richard Stallman  <rms@gnu.org>

	* help.el (help-for-help-internal): Clean up help text.

2006-06-10  Andreas Schwab  <schwab@suse.de>

	* language/ethio-util.el (ethio-fidel-to-java-buffer): Fix quoting
	in doc string.

	* progmodes/cperl-mode.el (cperl-short-docs): Likewise.

2006-06-09  Karl Chen  <quarl@cs.berkeley.edu>

	* progmodes/make-mode.el (makefile-fill-paragraph): Don't remove
	spaces after the comment start.

2006-06-09  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* play/pong.el (pong-init-buffer):
	Fill buffer with spaces instead of ^A.

	* textmodes/ispell.el (ispell-kill-ispell): If ispell has been
	launched asynchronously, delete its process instead of being cool.
	(ispell-async-processp): Check for `delete-process' existence
	instead of `kill-process' one for consistency.

2006-06-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-existing-buffers-1)
	(gdb-prompt, gdb-set-gud-minor-mode-existing-buffers): Show status
	in mode line at startup.

2006-06-08  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-take-first-match, ido-push-dir-first): New commands.
	(ido-init-completion-maps): Bind them to M-SPC and M-v.
	(ido-copy-current-file-name): Repeating C-w inserts whole file name.
	(ido-file-internal): Pass full file name to write-file.
	(ido-read-internal): Only pop stack elements automatically if they
	actually match an existing directory or file name.

2006-06-07  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (find-auto-coding): Don't handle the short
	name `char-trans'.

	* files.el (hack-local-variables-prop-line)
	(hack-local-variables): Cancel the previous change.

2006-06-06  Jesper Harder  <harder@phys.au.dk>

	* ediff-diff.el (ediff-test-utility): Protect against file-error.

2006-06-06  Chong Yidong  <cyd@stupidchicken.com>

	* diff-mode.el (diff-mode): Set buffer-read-only to t when
	diff-default-read-only is non-nil.
	(diff-hunk-kill, diff-file-kill, diff-split-hunk)
	(diff-refine-hunk): Set inhibit-read-only to t.

	* diff.el (diff-sentinel, diff): Set inhibit-read-only to t when
	modifying the *Diff* buffer.
	(diff-process-filter): New filter function for diff process that
	sets inhibit-read-only to t when modifying the *Diff* buffer.

2006-06-06  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-archive-subtree): Use end-of-subtree as
	insertion point and control the number of empty lines.
	(org-paste-subtree): Limit the number of empty lines at the end of
	the inserted tree.
	(org-agenda): Use buffer name of current file for narrowing.
	(org-export-as-xml): Command removed.
	(org-export-xml-type): Option removed.
	(org-mode-map): Call `org-export-as-xoxo' directly.
	(org-get-indentation): New optional argument LINE.
	(org-fix-indentation, org-remove-tabs): New functions.
	(org-export-as-ascii, org-ascii-level-start): Determine and apply
	correct indentation for headlines that are converted to items.
	(org-skip-comments): Remove table lines that contain narrowing
	cookies but no other non-empty fields.
	(org-set-tags): Allow groups of mutually exclusive tags.
	(org-cmp-time): Sort 24:21 before items without time.
	(org-get-time-of-day): Fix the interpretation of 12pm and 12am.
	(org-open-at-point): Require double colon also for numbers.

2006-06-06  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-default-file-method, ido-default-buffer-method):
	Make choice values consistent with corresponding command names.
	(ido-visit-buffer): Update accordingly.  Default to selected-window.

2006-06-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-running): Fix doc string.
	(gud-menu-map): Use :visible instead fo :enable for debugger test.
	(gud-tooltip-modes): Add python-mode.
	(gud-tooltip-print-command): Add pdb.  Remove perldb.

2006-06-05  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (bootstrap, $(lisp)/mh-e/mh-loaddefs.el):
	Quote $(EMACS).

2006-06-05  Richard Stallman  <rms@gnu.org>

	* faces.el (defined-colors): Doc fix.

2006-06-05  Thien-Thi Nguyen  <ttn@gnu.org>

	* vc.el (vc-process-filter): Inhibit undo info collection around
	call to insert.
	(vc-setup-buffer): Likewise for call to erase-buffer.
	(vc-do-command): Likewise for call to process-file.

2006-06-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Use a conditional help echo
	for gud-go.
	(gud-common-init): Other debuggers may trigger error.

2006-06-05  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (find-auto-coding):
	Handle enable-character-translation in file header.

2006-06-04  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Add mode aliases.
	(authors-fixed-entries): Fix spelling.
	(authors-canonical-file-name): Don't report error for wildcards.

	* help.el (view-emacs-news): Rewrite to support new NEWS,
	NEWS.major, and NEWS.1-17 file naming.  Add more intelligence,
	e.g. version 10 matches 1.10, and don't be confused by version 1.1
	being a prefix of 1.12 (etc).  A numeric prefix arg also works.

2006-06-03  Vivek Dasmohapatra  <vivek@etla.org>

	* progmodes/sh-script.el (sh-quoted-exec): New face for quoted
	exec constructs like `foo bar`.
	(sh-quoted-subshell): New helper function to search for a possibly
	nested subshell (like `` or $()) within a "" quoted string.
	(sh-font-lock-keywords-var): Add sh-quoted-exec for Bash.
	(sh-apply-quoted-subshell): Flag quote characters inside a
	subshell, which is itself already in a quoted region, as
	punctuation, since this is the closest to what they actually are.
	(sh-font-lock-syntactic-keywords): Add sh-quoted-subshell and
	sh-apply-quoted-subshell.
	(sh-font-lock-syntactic-face-function): Apply the new face for
	text inside `` instead of the old font-lock-string-face.

2006-06-03  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ts-active-input-overlay): Add defvar.
	(mac-ae-number, mac-ae-frame, mac-ae-script-language)
	(mac-bytes-to-text-range, mac-ae-text-range-array)
	(mac-ts-update-active-input-buf, mac-split-string-by-property-change)
	(mac-replace-untranslated-utf-8-chars, mac-ts-update-active-input-area)
	(mac-ts-unicode-for-key-event): New functions.
	(mac-handle-toolbar-switch-mode): Use mac-ae-frame.
	(mac-handle-font-selection): Use mac-ae-number.
	(mac-ts-active-input-buf, mac-ts-update-active-input-area-seqno):
	New variables.
	(mac-ts-caret-position, mac-ts-raw-text, mac-ts-selected-raw-text)
	(mac-ts-converted-text, mac-ts-selected-converted-text)
	(mac-ts-block-fill-text, mac-ts-outline-text)
	(mac-ts-selected-text, mac-ts-no-hilite): New faces.
	(mac-ts-hilite-style-faces): New constant.
	(mac-apple-event-map): Bind text input events.
	(mac-dispatch-apple-event): Use command-execute instead of
	call-interactively.
	(global-map): Don't bind mac-apple-event.
	(special-event-map): Bind mac-apple-event.

2006-06-02  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (EMACS): Remove quotes from the Emacs executable
	file name.
	(emacs): Enclose the value of $(EMACS) in quotes.

2006-06-02  Juri Linkov  <juri@jurta.org>

	* international/mule.el (sgml-html-meta-auto-coding-function):
	Remove the condition `(search-forward "<html" size t)'.
	Replace `\"' with `[\"']?' in `re-search-forward'.

2006-06-02  Kenichi Handa  <handa@m17n.org>

	* files.el (hack-local-variables-prop-line): Ignore `char-trans'
	as well as `coding'.
	(hack-local-variables): Likewise.

	* international/mule.el (enable-character-translation):
	Put permanent-local and safe-local-variable properties.
	(find-auto-coding): Handle char-trans: tag.

2006-06-02  Juri Linkov  <juri@jurta.org>

	* international/mule.el (sgml-html-meta-auto-coding-function):
	Limit the search by the end of the HTML header (if any).

2006-06-01  Richard Stallman  <rms@gnu.org>

	* subr.el (with-current-buffer): Doc fix.

2006-06-02  Masatake YAMATO  <jet@gyve.org>

	* progmodes/compile.el (compilation-error-regexp-alist-alist::gcov-*):
	Almost rewrite.  Underlines over all lines of gcov output are too
	uncomfortable to read.  Suggested by Dan Nicolaescu.

2006-06-01  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp-mode): Doc fixes.

	* shell.el (shell-mode): Use shell-mode-map in docstring.

	* comint.el (comint-send-input): Do not add help-echo and
	mouse-face to input if `comint-use-prompt-regexp' is non-nil.

2006-06-01  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el: Change x-menu-bar-start to menu-bar-open.

2006-06-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-look-up-stack): New variable.
	(gdb-stopped, gdb-info-stack-custom): If there is no source info
	look up the stack and pop up GUD buffer if necessary.
	(gdb-frames-select): Remove redundant call to gud-display-frame.
	(gdb-info-threads-custom): Keep point at start of buffer.
	(gdb-find-file-hook): Make it work for pre-GDB 6.4.

2006-05-31  Juri Linkov  <juri@jurta.org>

	* replace.el (query-replace-read-from, query-replace-read-to):
	Bind `history-add-new-input' to nil.  Call `add-to-history'.

2006-05-31  Takaaki Ota  <Takaaki.Ota@am.sony.com>

	* textmodes/table.el: Convert all HTML tags to lower case for
	XHTML compatibility.

2006-05-31  Masatake YAMATO  <jet@gyve.org>

	* progmodes/compile.el:
	(compilation-error-regexp-alist-alist::gcov-called-line):
	Don't put face on `-' lines in gcov file.  Suggested by Dan Nicolaescu.

2006-05-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-query-cmdline, gud-common-init):
	Revert inadvertent changes made with last commit.

2006-05-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* textmodes/flyspell.el (turn-on-flyspell, turn-off-flyspell):
	New functions.

	* textmodes/text-mode.el (text-mode-hook): Use turn-on-flyspell.

2006-05-30  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-highlight-todo): Make sure regexp
	only matches in the right place.
	(org-upcoming-deadline): New face.
	(org-agenda-get-deadlines): Use new face `org-upcoming-deadline'.
	(org-export-ascii-underline): Rename constant `org-ascii-underline'
	and make it an option.
	(org-export-ascii-bullets): New option.
	(org-export-as-html): Many changes to emit valid XHTML.
	(org-par-open): New variable.
	(org-open-par, org-close-par-maybe, org-close-li-maybe): New functions.
	(org-html-do-expand, org-section-number): Fix case in `replace-match'.
	(org-timeline): Pass `org-timeline-show-empty-dates' to
	`org-get-all-dates'.  Interpret empty dates returned by
	`org-get-all-dates'.
	(org-get-all-dates): New argument EMPTY.  Add dates without
	entries to the list, mark large ranges of empty dates.
	(org-point-in-group, org-context): New functions.

2006-05-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-stop-subjob): Make it work in all buffers.

	* progmodes/gdb-ui.el: Move gdb-mouse-toggle-breakpoint-* to
	C-mouse-1.  Move gdb-mouse-until to mouse-3, gdb-mouse-jump
	to C-mouse-3 (for 2 button mice).
	(gdb-send): Do the right thing for C-d.

	* speedbar.el (speedbar-detach): Delete.
	(speedbar-easymenu-definition-trailer): Remove speedbar-detach as
	it breaks things.
	(speedbar-reconfigure-keymaps): Always add extra items to pop up menu.

2006-05-30  Daniel Pfeiffer  <occitan@esperanto.org>

	* files.el (auto-mode-alist): Add makepp suffix and optional mk on
	Makeppfile.

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Add makepp diagnostic.

2006-05-29  Richard Stallman  <rms@gnu.org>

	* window.el (fit-window-to-buffer): Doc fix.

	* help.el (temp-buffer-max-height): Doc fix.

	* subr.el (with-current-buffer): Doc fix.

2006-05-29  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el: Bind F10 to menu-bar-start if available.

2006-05-28  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-if-xemacs, term-ifnot-xemacs): Delete, replace
	uses with a simple test.
	(term-set-escape-char, term-mode, term-check-kill-echo-list)
	(term-send-raw-string, term-send-raw, term-mouse-paste)
	(term-char-mode, term-line-mode, term-exec, term-sentinel)
	(term-handle-exit, term-read-input-ring)
	(term-previous-matching-input-string)
	(term-previous-matching-input-string-position)
	(term-previous-matching-input-from-input)
	(term-replace-by-expanded-history, term-send-input)
	(term-skip-prompt, term-bol, term-send-invisible)
	(term-kill-input, term-delchar-or-maybe-eof)
	(term-backward-matching-input, term-check-source)
	(term-proc-query, term-emulate-terminal)
	(term-handle-colors-array, term-process-pager, term-pager-line)
	(term-pager-bob, term-unwrap-line, term-word)
	(term-dynamic-complete-filename)
	(term-dynamic-complete-as-filename)
	(term-dynamic-simple-complete): Replace one arm ifs with whens or
	unlesses.

2006-05-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (hack-one-local-variable-eval-safep): Don't burp if used
	during bootstrapping.

	* emacs-lisp/ewoc.el (ewoc--current-dll): Remove.
	Basically undo the change of 2006-05-26: use extra arguments instead of
	dynamic scoping.
	(ewoc-locate): Remove unused var `footer'.

2006-05-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/ewoc.el (ewoc--insert-new-node): Use ewoc--refresh-node.

	* emacs-lisp/autoload.el (no-update-autoloads): Declare.
	(generate-file-autoloads): Obey it.  Return whether autoloads were
	added at point or not.
	(update-file-autoloads): Use this new return value.
	Remove redundant test for the presence of an autoload cookie.

	* emacs-lisp/autoload.el (autoload-find-file): New fun.
	This one calls hack-local-variables.
	(generate-file-autoloads, update-file-autoloads): Use it.

	* textmodes/bibtex.el (bibtex-autokey-name-case-convert-function)
	(bibtex-sort-entry-class): Add safe-local-variable predicate.
	(bibtex-sort-entry-class-alist): Don't set the global value.
	(bibtex-init-sort-entry-class-alist): New fun.
	(bibtex-sort-buffer, bibtex-prepare-new-entry): Call it to compute
	bibtex-init-sort-entry-class-alist from the buffer-local value (if any)
	of bibtex-init-sort-entry-class.

2006-05-28  Richard Stallman  <rms@gnu.org>

	* subr.el (load-history-regexp): If FILE is relative, insist
	entire last name component must match it.
	(load-history-filename-element, load-history-regexp): Doc fixes.

2006-05-29  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/bindat.el (bindat-idx, bindat-raw): Rename dynamic vars
	`pos' and `raw-data' for clarity, as eval forms may access these.

2006-05-28  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/bindat.el (bindat--unpack-u8): Use aref also for strings.

2006-05-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/make-mode.el (makefile-browser-map)
	(makefile-mode-syntax-table): Move initialization inside declaration.
	(makefile-fill-paragraph): Use the default comment-filling code.

2006-05-28  Chong Yidong  <cyd@stupidchicken.com>

	* replace.el (query-replace-defaults): New variable.
	(query-replace-read-from): Use `query-replace-defaults' for
	default value, instead of history list.
	(query-replace-read-to): Update `query-replace-defaults'.

2006-05-27  Chong Yidong  <cyd@stupidchicken.com>

	* msb.el (mouse-select-buffer): Minor fix to make popup menu work
	with no X toolkit.

2006-05-28  Nick Roberts  <nickrob@snap.net.nz>

	* tumme.el (tumme-show-all-from-dir-max-files): Fix typo.
	(tumme-show-all-from-dir): Add autoload.

2006-05-27  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el: Change a lot of `(if .. (progn ..)' to `(when ..)'.
	(tumme-remove-tag): Fix bug.

2006-05-27  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--create): No longer take HEADER and
	FOOTER args.  Update unique caller.
	(ewoc-delete): Compute last node once before looping.
	(ewoc--node-branch): Merge into unique caller.
	(ewoc--node): Don't define constructor make-ewoc--node for this
	structure.
	(ewoc): Add member `hf-pp' to this structure.
	(ewoc--wrap): New func.
	(ewoc-create): Take additional arg NOSEP.  If nil, wrap node and
	header/footer pretty-printers.  Save header/footer pretty-printer.
	(ewoc-set-hf): Use ewoc's header/footer pretty-printer.

	* pcvs.el (cvs-make-cvs-buffer): Specify NOSEP to `ewoc-create'.

2006-05-27  Mathias Dahl  <mathias.dahl@gmail.com>

	* dired.el (dired-mode-map): Change `tumme-tag-remove' to
	`tumme-delete-tag'.  Rename `Remove Image Tag' to `Delete Image
	Tag'.  Change "Compare directories..." to "Change Directories...".
	Move tumme commands to Operate, Regexp and Immediate menus.
	Change "Add Comment" to "Add Image Comment".  Change "Add Image
	Tag" to "Add Image Tags".

	* tumme.el (tumme-delete-tag): Rename from `tumme-tag-remove'.
	(tumme-setup-dired-keybindings): Change `tumme-add-remove' to
	`tumme-delete-tag'.

2006-05-26  Luc Teirlinck  <teirllm@auburn.edu>

	* shell.el (shell-mode): Call shell-dirtrack-mode after
	list-buffers-directory is made a local variable, to avoid setting
	the default value.

2006-05-26  Kevin Ryde  <user42@zip.com.au>

	* info.el (Info-index-next): Use where-is-internal to report
	actual binding of Info-index-next, rather than hard-coded `,'.

2006-05-26  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-apropos-menu): Move "Find Key in Manual"
	and "Find Command in Manual" to here.

	* buff-menu.el (list-buffers-noselect): For Info buffers, use
	Info-current-file as the file name.

2006-05-26  Jonathan Yavner  <jyavner@member.fsf.org>

	* ses.el (defadvice undo-more): Delete this defadvice.  The undo
	overrides will now be done a different way.
	(ses-set-parameter): Reapply this function for undo.
	(ses-set-header-row): Reconstruct header row during undo.
	(ses-widen): New function.
	(ses-goto-data, ses-reconstruct-all): Use new function.
	(ses-command-hook): Widen buffer during undo, before unupdating
	the cells.
	(ses-insert-row, ses-delete-row): Widen buffer during undo.
	(ses-load, ses-header-row): Permit empty (zero-row) spreadsheets.
	(ses-read-cell): Avoid stupid warning for RET RET on a cell whose
	formula hasn't been executed yet.

2006-05-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* comint.el (comint-kill-whole-line): Rename arg to count.
	Fix doc string.

2006-05-26  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (backup-buffer-copy): Remove deleted MUSTBENEW argument
	to copy-file.

2006-05-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* simple.el (toggle-truncate-lines): Make arg optional for
	backward compatibility.

2006-05-26  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--current-dll): New var.
	(ewoc--node-next, ewoc--node-prev, ewoc--node-nth): Don't take
	DLL arg.  Instead, use ewoc--current-dll.  Update all callers.
	(ewoc--set-buffer-bind-dll-let*): Bind ewoc--current-dll, not `dll'.
	(ewoc--adjust): Use ewoc--current-dll.
	(ewoc-next, ewoc-prev, ewoc-nth): Bind ewoc--current-dll.

2006-05-26  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-next-item, org-previous-item): Emit more
	compact error message.
	(org-tags-view): Refresh category table in each file.
	(org-table-justify-field-maybe): Remove superfluous arguments to
	`format'.
	(org-export-as-html): Insert "<p>" before postamble.
	(org-paste-subtree, org-kill-is-subtree-p): Check for empty kill ring.

2006-05-26  Kenichi Handa  <handa@m17n.org>

	* textmodes/po.el (po-find-charset): Pay attention to the case
	FILENAME is a cons (NAME . BUFFER).
	(po-find-file-coding-system-guts): Likewise.

	* arc-mode.el (archive-set-buffer-as-visiting-file):
	Call find-operation-coding-system with (FILENAME . BUFFER).

	* tar-mode.el (tar-extract): Call find-operation-coding-system
	with (FILENAME . BUFFER).

	* international/mule.el (decode-coding-inserted-region):
	Call find-operation-coding-system with (FILENAME . BUFFER).

2006-05-25  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-toggle-display): Use buffer contents to
	generate image for a remote file.

2006-05-25  Juri Linkov  <juri@jurta.org>

	* replace.el (query-replace-read-from, query-replace-read-to):
	Remove 8th arg KEEP-ALL in read-from-minibuffer.

2006-05-25  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-cleanup): Change to cleanup
	region if one is active.
	* whitespace.el (whitespace-cleanup-internal): New internal method.

2006-05-25  Mathias Dahl  <mathias.dahl@gmail.com>

	* dired.el (dired-mode-map): Add help-echo strings to tumme
	commands.  Bind `tumme-dired-display-image' to C-t i.

	* tumme.el (tumme-display-image): Change documentation string slightly.
	(tumme-dired-display-image): Add call to `display-buffer'.

2006-05-25  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/bindat.el (bindat-unpack, bindat-pack):
	Signal error if RAW-DATA is a multibyte string.

2006-05-24  Richard Stallman  <rms@gnu.org>

	* subr.el (with-local-quit): When handling `quit' signal,
	make a chance for quit-flag to cause a quit.

	* emacs-lisp/advice.el (ad-enable-advice, ad-activate)
	(ad-disable-advice): Add autoloads.

	* subr.el (read-passwd): Copy PROMPT before changing its properties.

2006-05-25  Mathias Dahl  <mathias.dahl@gmail.com>

	* dired.el (dired-mode-map): Change menu items for tumme as per
	suggestions in emacs-devel.

2006-05-25  Nick Roberts  <nickrob@snap.net.nz>

	* dired.el (dired-mode-map): Fix breakage.

2006-05-25  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-display-dired-image): Rename to...
	(tumme-dired-display-image): ...this.
	(tumme-track-movement): Change default value to t.
	(tumme-display-thumbs): Add new optional parameter DO-NOT-POP,
	used from `tumme-next-line-and-display' and similar commands.

	* dired.el (dired-mode-map): Add Thumbnail submenu under the
	Immediate menu.  Add some tumme commands there.

2006-05-24  Luc Teirlinck  <teirllm@auburn.edu>

	* loadup.el ("jka-cmpr-hook"): Load it before it is needed.

2006-05-24  Chong Yidong  <cyd@mit.edu>

	* menu-bar.el, international/mule-cmds.el: Remove tooltips for
	menu entries that open submenus.

2006-05-24  Alan Mackenzie  <acm@muc.de>

	* startup.el (command-line): For names of preloaded files, don't
	append ".elc" (now done in Fload), and call file-truename on the
	lisp directory.

	* subr.el (eval-after-load): Fix the doc-string.  Allow FILE to
	match ANY loaded file with the right name, not just those in
	load-path.  Put a regexp matching the file name into
	after-load-alist, rather than the name itself.

	* subr.el (load-history-regexp, load-history-filename-element)
	(do-after-load-evaluation): New functions.

	* international/mule.el (load-with-code-conversion): Do the
	eval-after-load stuff by calling do-after-load-evaluation.

2006-05-25  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-sentinel): Condition on GUD buffer if it
	has not been killed.

2006-05-24  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Set idle timer to clean up expired Apple events.
	(mac-ae-get-url): Redispatch Apple event on unknown scheme.
	(mac-dispatch-apple-event): Resume Apple event if it is suspended.
	Optionally set error message in reply.

2006-05-24  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-open-at-point): Use renamed variable
	`org-confirm-shell-link-function'.
	(org-confirm-shell-link-function): Rename from
	`org-confirm-shell-links'.
	(org-export-directory): New function.
	(org-export-as-ascii, org-export-as-html, org-export-as-xoxo)
	(org-export-icalendar): Use `org-export-directory'.
	(org-indent-item): Keep cursor position.
	(org-link-file-path-type): New option.
	(org-export-as-html): Fix bug with plain lists starting in
	column 0.
	(org-export-as-html): Remove deadline formatting, this happens
	now already in `org-html-handle-time-stamps'.
	(org-export-html-style): Deadline class removed.
	(org-insert-labeled-timestamps-at-point): New option.
	(org-cycle, org-occur, org-scan-tags): Use `org-overview' instead
	of `hide-sublevels 1', in case the first headline is not level 1.
	(org-overview, org-content): New function.
	(org-cycle-global-status, org-cycle-subtree-status): Make these
	variables buffer-local.
	(org-global-cycle): New command.
	(org-shifttab): Use `org-global-cycle'.
	(org-insert-heading, org-insert-item): Go to end of new
	headline/item after creating it.
	(org-export-visible): Rename from `org-export-copy-visible'.
	Now creates a temporary org-file and applies an exporting command
	to it.
	(org-table-eval-formula): Support for lisp forms.
	(org-agenda-todo-ignore-scheduled): New option.
	(org-agenda-get-todos): Use new option
	`org-agenda-todo-ignore-scheduled'.
	(org-export-html-inline-images): New value `maybe'.
	(org-export-as-html): Inlining of images dependent on link description.
	(org-archive-subtree): Check for end-of-buffer before trying
	`kill-line'.
	(org-agenda-follow-mode): New option.
	(org-export-with-tags, org-export-with-timestamps): New options.
	(org-html-handle-time-stamps): New function.
	(org-keyword-time-regexp): New variable.
	(org-agenda-get-todos): Use `org-agenda-todo-list-sublevels'.
	(org-agenda-todo-list-sublevels): New option.
	(org-html-level-start): When TITLE is nil, just close all levels.
	(org-parse-key-lines, org-parse-export-options): Remove functions,
	replaced by `org-infile-export-plist'.
	(org-combine-plists, org-infile-export-plist)
	(org-default-export-plist): New functions.
	(org-export-html-preamble, org-export-html-postamble)
	(org-export-html-auto-preamble, org-export-html-auto-postamble):
	New variables.
	(org-export-publishing-directory): New option.
	(org-export-as-html, org-export-as-ascii): Use the new property
	lists for settings.
	(org-export-copy-visible, org-export-as-xoxo):
	Respect `org-export-publishing-directory'.
	(org-link-search, org-store-link, org-file-apps): Support for
	links to BibTeX database entries..
	(org-get-current-options, org-set-regexps-and-options):
	Implement logging as a startup option.
	(org-store-link): Make sure context string is never empty.
	(org-insert-link): Use relative path when possible.
	(org-at-item-checklet-p): New function.
	(org-shifttab, org-shiftmetaleft, org-shiftmetaright)
	(org-shiftmetaup, org-shiftmetadown, org-metaleft)
	(org-metaright, org-metaup, org-metadown, org-shiftup)
	(org-shiftdown, org-shiftright, org-shiftleft)
	(org-ctrl-c-ctrl-c, org-cycle, org-return, org-meta-return):
	Dispatch using `call-interactively'.
	(org-call-with-arg): New defsubst.
	(org-tag-alist, org-use-fast-tag-selection): New options.
	(org-complete): Use `org-tag-alist'.
	(org-fast-tag-insert, org-fast-tag-selection): New functions.
	(org-next-item, org-previous-item): New commands.
	(org-beginning-of-item, org-end-of-item): Add (interactive) to
	make command.
	(org-shiftup, org-shiftdown): Accommodate the item-navigation commands.

2006-05-23  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-delete): New function.
	(ewoc-filter): Use `ewoc-delete'.

	* emacs-lisp/bindat.el (bindat-pack): Doc fix.

2006-05-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/bibtex.el (bibtex-format-entry, bibtex-clean-entry):
	Signal more user-friendly error messages.

	* complete.el (PC-do-completion): Undo the addition of implicit
	wildcards if they did not lead to finding any match.
	(read-file-name-internal): Don't add the final > if the completion is
	not finished.

2006-05-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* textmodes/bibtex.el (bibtex-maintain-sorted-entries):
	Quote safe-local-variable predicate.

2006-05-22  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-set-data): New function.

2006-05-21  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-maintain-sorted-entries): Mark as safe.

	* progmodes/make-mode.el (makefile-special-targets-list)
	(makefile-macro-table, makefile-target-table): Mark as risky.
	(makefile-query-one-target-method): Make this the alias for the
	following variable.
	(makefile-query-one-target-method-function): Make this the real name.

	* textmodes/artist.el (artist-text-renderer): Make this the alias
	for the following variable.
	(artist-text-renderer-function): Make this the real name.

	* textmodes/flyspell.el (flyspell-generic-check-word-p): Make this
	the alias for the following variable.
	(flyspell-generic-check-word-predicate): Make this the real name.

	* textmodes/ispell.el (ispell-format-word): Make this the alias
	for the following variable.
	(ispell-format-word-function): Make this the real name.
	(ispell-message-text-end): Mark as risky.

	* skeleton.el (skeleton-transformation, skeleton-filter)
	(skeleton-pair-filter): Make these the aliases for the following
	variables.
	(skeleton-transformation-function, skeleton-filter-function)
	(skeleton-pair-filter-function): Make these the real names.

	* progmodes/sh-script.el (sh-mode): Use skeleton-filter-function
	and skeleton-pair-filter-function.

	* textmodes/sgml-mode.el (sgml-transformation): Make this the
	alias for the following variable.
	(sgml-transformation-function): Make this the real name.
	(sgml-tag-alist): Mark as risky.

2006-05-21  Richard Stallman  <rms@gnu.org>

	* simple.el (kill-region): Interactively, pass point, then mark.

2006-05-22  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-create): Add autoload cookie.

2006-05-21  Romain Francoise  <romain@orebokech.com>

	* dired-x.el (dired-mode-map): Don't bind M-g.

2006-05-20  Richard Stallman  <rms@gnu.org>

	* dired.el (dired-mode-map): Put dired-goto-file on j, not M-g.
	(dired-goto-file): Doc fix.

2006-05-21  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Mention customizing cua-mode as alternative
	way to enable built-in cua-mode if user loads older CUA-mode package.

	* ido.el (ido-read-file-name): Bind ido-show-dot-for-dired to nil
	if default-filename is specified.

2006-05-20  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-manuals-menu) <info-apropos>: New menu item.

	* info.el (info-apropos): Make sure current-file and current-node
	have non-nil values.  Speed up by using add-to-list instead of
	manual consing.

2006-05-20  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* progmodes/make-mode.el (makefile-mode): Doc fix.

2006-05-20  Eli Zaretskii  <eliz@gnu.org>

	* dired-aux.el (dired-do-shell-command): Doc fix.

2006-05-20  Kevin Ryde  <user42@zip.com.au>

	* info-xref.el (info-xref-check-all-custom): Skip :tag part of
	``(custom-manual :tag "Foo" "(foo)Node")''.

2006-05-20  Karl Chen  <quarl@cs.berkeley.edu>

	* progmodes/cc-vars.el (c-backslash-column): Mark as safe if its
	value is an integer.

2006-05-20  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-mime-charset-pattern): Add "?:" before
	"format".
	(rmail-convert-to-babyl-format): Undo the change from 2006-04-19.

2006-05-20  Martin Rudalics  <rudalics@gmx.at>

	* progmodes/hideif.el (show-ifdef-block): Fix bug where parts of
	a hidden block remained hidden if `hide-ifdef-lines' is non-nil.

2006-05-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/gud.el (gdb-script-font-lock-keywords): Use a stricter
	regexp for keywords.

2006-05-20  Masayuki FUJII  <boochang@m4.kcn.ne.jp>  (tiny change)

	* dnd.el (dnd-get-local-file-name): Specify LITERAL in
	replace-regexp-in-string.

	* term/w32-win.el (w32-drag-n-drop): Substitute '/' for '\',
	encode, and escape file name on conversion to URL.

2006-05-20  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* dnd.el (dnd-handle-one-url): Change 3rd arg ARG to URL.
	Don't unescape URL.
	(dnd-get-local-file-name): Unescape URL on conversion to file name.

	* x-dnd.el (x-dnd-handle-file-name): Encode and escape file names
	on conversion to URLs.

	* net/browse-url.el (browse-url-file-url): Encode file name on
	conversion to URL.

	* term/mac-win.el (mac-ae-open-documents): Escape file name on
	conversion to URL.

2006-05-19  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/cc-styles.el (c-style-alist): Doc fix.

2006-05-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-bytes-to-digits): Remove function.
	(mac-handle-toolbar-switch-mode): Use coercion instead of it.

2006-05-19  Glenn Morris  <rgm@gnu.org>

	* calendar/diary-lib.el (diary-bahai-date)
	(list-bahai-diary-entries, mark-bahai-diary-entries)
	(mark-bahai-calendar-date-pattern): Not interactive.
	(add-to-diary-list): New optional arg LITERAL.  Doc fix.
	(diary-entries-list): Change format of 4th element in each entry.
	(diary-list-entries): Use add-to-diary-list.
	(diary-goto-entry): Handle the case where the buffer visiting the
	diary has been killed.
	(fancy-diary-display): Add 'locator to button rather than 'marker.
	Only generate temp-face when there are marks to apply.
	(list-sexp-diary-entries): Pass literal to add-to-diary-list.
	(diary-fancy-date-pattern): New variable.
	(diary-time-regexp): Doc fix.
	(diary-anniversary, diary-time): New faces.
	(fancy-diary-font-lock-keywords): Use diary-fancy-date-pattern and
	diary-time-regexp.  Add font-lock-multiline property where needed.
	Use new faces diary-anniversary and diary-time.
	(diary-fancy-font-lock-fontify-region-function): New function, to
	handle multiline font-lock pattern in fancy diary.
	(fancy-diary-display-mode): Set font-lock-fontify-region-function.
	(diary-font-lock-keywords): Tweak time regexp.  Use new face
	diary-time.

2006-05-19  Alexander Shopov  <ash@contact.bg>  (tiny change)

	* international/code-pages.el (mik): Table corrected.

2006-05-18  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-find): Don't check grep-find-command
	before running command (breaks non-interactive usage).

2006-05-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--adjust): New func.
	(ewoc--insert-new-node): Don't insert trailing newline.
	Instead, adjust successor nodes's start markers.
	(ewoc--refresh-node): Delete all text from current node's start
	marker to the next one's; adjust successor nodes's start markers.
	(ewoc--create): Doc fixes.
	(ewoc--refresh): Don't insert newline.
	(ewoc--set-hf): Use `ewoc--set-buffer-bind-dll-let*'.
	* pcvs.el (cvs-make-cvs-buffer):
	Specify extra newline for ewoc's header and footer.
	(cvs-update-header): Update initial header recognition.
	Append newline to final header and footer values.
	* pcvs-info.el (cvs-fileinfo-pp): Insert trailing newline.

2006-05-17  Richard Stallman  <rms@gnu.org>

	* files.el (file-name-extension): Doc fix.

2006-05-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* shell.el (shell-dirtrack-mode): Make it into a proper minor mode, so
	we can explicitly enable/disable rather than toggle.
	(shell-mode): Use it.
	(shell-cd): Don't try to reproduce what `cd' does.

2006-05-17  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-internal): Use only nondirectory part of
	default item.

2006-05-17  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-data): Add docstring.
	(ewoc-nth): Doc fix.

	(ewoc-map, ewoc-invalidate): Compute PP before looping.

2006-05-16  Eli Zaretskii  <eliz@gnu.org>

	* international/mule.el (auto-coding-alist): Add .lha to files
	read with no-conversion.

	* files.el (auto-mode-alist): Add .lha files to archive file
	extensions.

	* arc-mode.el (archive-arc-summarize, archive-lzh-summarize):
	Convert csize to integer when computing offsets within the
	compressed archive file.

2006-05-16  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-history): Add KEEP-ALL arg and align functionality
	with read-from-minibuffer.

2006-05-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* emacs-lisp/bytecomp.el (byte-compile-warnings-safe-p): New function.
	(byte-compile-warnings): Fix safe-local-variable property.

2006-05-16  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-show-bodies, allout-old-style-prefixes)
	(allout-stylish-prefixes, allout-numbered-bullet)
	(allout-file-xref-bullet, allout-use-hanging-indents): Use simple
	predicates to qualify `safe-local-variable' property, when
	available, else use equivalent lambda.
	(allout-current-topic-collapsed-p): Do the right thing regarding
	trailing blank lines.

2006-05-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el (server-start): Only create a directory if needed.
	(server-edit, server-unload-hook): server-start => server-mode.
	(kill-emacs-hook): Cleanup upon exit.

2006-05-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* hexl.el (hexlify-buffer): Encode process arguments manually.

2006-05-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-tips): Add missing argument to
	call to gdb-tooltip-print.

2006-05-15  Romain Francoise  <romain@orebokech.com>

	* dired-x.el (dired-guess-shell-gnutar): On GNU and GNU/Linux
	systems, default to "tar" since those systems probably have GNU tar.

2006-05-14  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-missing-file-warning): Fix docstring.
	(desktop-restore-file-buffer): Correct question asked on missing file.

2006-05-14  Kim F. Storm  <storm@cua.dk>

	* progmodes/cc-subword.el (c-forward-subword, c-backward-subword):
	Add CUA move property.

2006-05-13  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-push-theme): Load the variable before checking
	its `standard-value'.

2006-05-13  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-save): Use with-temp-buffer.

2006-05-12  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-menu.el (calendar-mode-map, calendar-mouse-3-map):
	* calendar/calendar.el (calendar-mode-map):
	* calendar/diary-lib.el (include-other-diary-files, diary-mail-entries):
	* calendar/appt.el (appt-check, appt-make-list): Refer to
	diary-view-entries, diary-list-entries, diary-show-all-entries
	rather than obsolete aliases.

2006-05-12  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (line-move-finish): Avoid calling point motion hooks
	while processing intangibility.

2006-05-12  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Fix typo.

2006-05-12  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (allout-view-change-hook): Mark as being deprecated,
	to be replaced by `allout-exposure-change-hook'.
	(allout-exposure-change-hook): New, replacing
	`allout-view-change-hook'.
	(allout-flag-region): Run new hook `allout-exposure-change-hook',
	in addition to `allout-view-change-hook'.
	(allout-show-bodies, allout-old-style-prefixes)
	(allout-stylish-prefixes, allout-use-hanging-indents): Quote the
	lambda forms to prevent their showing up in variable help
	presentations as inscrutable byte-compiled code.
	(allout-numbered-bullet, allout-file-xref-bullet, allout-layout):
	Use string-or-null-p to qualify safe-local-variable values.
	(allout-reindent-bodies): Use memq to qualify matches against
	valid safe-local-variable values.  Also, quote the lambda as above.
	(allout-use-mode-specific-leader): Add missing candidate-value
	symbols, use memq, and quote the lambda.
	(allout-overlay-interior-modification-handler): Remove unused
	variables `msg' and 'opened'.
	(allout-hidden-p): Constrain invisibility consideration to allout's
	invisibility spec, disregarding invisibility for other reasons.

2006-05-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el (version-control): Correct safe values.

2006-05-12  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-refresh): Compute PP once before looping.

	(ewoc--node-enter-before, ewoc--create-node): Delete funcs.
	(ewoc--insert-new-node): New func.
	Update callers of deleted funcs to use it, instead.

2006-05-11  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (diary-show-all-entries): Do not refer to
	obsolete alias `show-all-diary-entries'.
	(make-diary-entry): Not interactive.
	(cal-tex-cursor-month, cal-tex-cursor-month-landscape)
	(cal-tex-cursor-day, cal-tex-cursor-week, cal-tex-cursor-week2)
	(cal-tex-cursor-week-iso, cal-tex-cursor-week-monday)
	(cal-tex-cursor-filofax-2week, cal-tex-cursor-filofax-week)
	(cal-tex-cursor-year-landscape, cal-tex-cursor-filofax-year)
	(cal-tex-cursor-filofax-daily, cal-tex-cursor-year): Interactive.

2006-05-11  Johan Bockgård  <bojohan@dd.chalmers.se>

	* calendar/calendar.el (calendar-french-date-string)
	(calendar-mayan-date-string, calendar-chinese-date-string)
	(calendar-astro-date-string, calendar-iso-date-string)
	(calendar-islamic-date-string, calendar-bahai-date-string)
	(calendar-hebrew-date-string, calendar-coptic-date-string)
	(calendar-ethiopic-date-string, calendar-persian-date-string):
	These functions are not interactive.

2006-05-11  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el: Balance parentheses.

2006-05-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el, newcomment.el, outline.el, simple.el,
	* emacs-lisp/bytecomp.el, progmodes/cc-compat.el,
	* progmodes/cc-vars.el, progmodes/compile.el:
	Move `safe-local-variable' declarations to the respective files.

	* help-fns.el (describe-variable): Don't print safe-var if it is
	byte-code.  Improve wording as suggested by Luc Teirlinck.

2006-05-11  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-reset): Update speedbar if necessary.
	(gdb-var-evaluate-expression-handler, gdb-var-update-handler):
	Use a token for pending-triggers to ensure gdb-var-update
	gets called once per user input again for pre-GDB 6.4.
	(gdb-var-delete): Match on more complex expressions.
	(gdb-var-list-children-handler, gdb-var-create-handler):
	Use a token for consistency.

2006-05-11  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-read-date, org-goto-calendar)
	(org-agenda-goto-calendar):
	Bind `view-calendar-holidays-initially' to nil.

2006-05-11  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--refresh-node): No longer save-excursion.
	Update all callers to do it there, instead.

2006-05-10  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (calendar-basic-setup): Set day to 1 in
	prefix arg case, to avoid view-diary-entries-initially error.
	Reported by Stephen Berman <Stephen.Berman at gmx.net>.
	(calendar-date-is-legal-p): Handle dates with no day part.

2006-05-11  Nick Roberts  <nickrob@snap.net.nz>

	* comint.el (comint-insert-input): Just make it when
	comint-use-prompt regexp is nil (default) and with the mouse.
	(comint-copy-old-input): Reinstate from 2004-06-23.
	(comint-mode-map): Bind C-c C-m to it.

2006-05-10  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlw-shell.el (idlwave-shell-move-or-history):
	Remove spurious move to point-max (new comint behavior fixes).

	* progmodes/idlwave.el (idlwave-push-mark): Removed obsolete
	compatibility function (Emacs 18/19).
	(idlwave-is-continuation-line): Always return point at start of
	previous non-blank continuation line.
	(keyword-parameters): Fix continued comment font-lock matcher.
	(idlwave-font-lock-fontify-region): Written, use as
	font-lock-fontify-region-function, to fix continued keyword
	fontification issues.

2006-05-10  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-font-panel-mode): Doc fix.
	(mac-service-selection, mac-service-open-file)
	(mac-service-open-selection, mac-service-mail-selection)
	(mac-service-mail-to, mac-service-insert-text): Rename from
	mac-services-*.  All uses changed.
	(mac-apple-event-map): Rename event symbol `services' to `service'.

2006-05-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--dll-create, ewoc--node-delete)
	(ewoc--node-enter-first, ewoc--node-enter-last)
	(ewoc--delete-node-internal): Merge funcs into unique callers.

2006-05-09  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/crm.el (completing-read-multiple): Properly handle
	return value of read-from-minibuffer for empty input.

2006-05-09  Miles Bader  <miles@gnu.org>

	* comint.el (comint-insert-input): Remove redundant calls to setq
	and goto-char.

2006-05-10  Nick Roberts  <nickrob@snap.net.nz>

	* comint.el (comint-insert-input): Make it work when
	comint-use-prompt-regexp is t.

2006-05-10  Miles Bader  <miles@gnu.org>

	* subr.el (field-at-pos): New function.

	* comint.el (comint-insert-input): Use it.

2006-05-09  Juri Linkov  <juri@jurta.org>

	* battery.el (battery-linux-proc-acpi): Also try
	`/proc/acpi/thermal_zone/THR2/temperature'.

	* files.el <safe-local-variable>: Remove `eval' and `let' binding
	for now unused lambda `string-or-null'.

	* add-log.el (change-log-default-name): Put `string-or-null-p'
	instead of lambda on `safe-local-variable' property.

	* diff-mode.el (diff-context->unified): Use `region-beginning' and
	`region-end' instead of `mark' and `point'.
	(diff-unified->context, diff-reverse-direction, diff-fixup-modifs):
	Operate on region in Transient Mark mode when the mark is active.
	Use `region-beginning' and `region-end' instead of `mark' and
	`point'.
	(diff-hunk-text, diff-goto-source): Doc fix.

	* startup.el (fancy-splash-screens, normal-splash-screen): Use
	face `mode-line-buffer-id' for mode-line buffer face instead of
	hard-coded `(:weight bold)'.

	* arc-mode.el (archive-set-buffer-as-visiting-file): Bind
	buffer-undo-list to t (undo-ask is reproducible by visiting
	nested archives).

2006-05-09  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (rgrep): Set default directory of *grep*
	buffer if we start M-x rgrep in the *grep* buffer and choose
	a different base directory.

2006-05-09  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-register-file-name-handlers): Enable Tramp
	completion also when ido is loaded.

2006-05-09  Masatake YAMATO  <jet@gyve.org>

	* font-lock.el (cpp-font-lock-keywords-source-directives): Added
	"warning" and "import".
	(cpp-font-lock-keywords): Added "warning".

2006-05-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add more key bindings.

2006-05-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mwheel.el (mwheel-scroll): Make sure that when scrolling multiple
	pages at a time, if we signal the end, we should indeed reach that end.

2006-05-08  David Reitter  <david.reitter@gmail.com>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Only preserve messages
	output during execution of the body.

2006-05-08  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (lgrep, rgrep): Doc fixes.

2006-05-08  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc--set-buffer-bind-dll-let*):
	Use with-current-buffer.

2006-05-07  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-history): Remove keep-dups arg.

	* kmacro.el (kmacro-push-ring): Let-bind history-delete-duplicates
	to nil around call to add-to-history.

2006-05-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/syntax.el (syntax-ppss): Flush the cache before rather
	than after a buffer modification.

2006-05-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler): Move speedbar
	call to...
	(gud-watch): ...here so speedbar is raised for already watched
	expressions.
	(gdb-speedbar-refresh): Delete function.
	(gdb-speedbar-update, gdb-speedbar-timer-fn): New functions.
	Use speedbar-timer-fn instead of speedbar-refresh (reverting
	earlier change).
	(gdb-var-evaluate-expression-handler)
	(gdb-var-list-children-handler-1, gdb-var-update-handler-1): Use it.

	* speedbar.el (speedbar-timer-fn): Remove save-window-excursion.
	Update localized contents for all buffers except ignored modes.

2006-05-07  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-utxt-to-string): Use `eq' instead of `='.
	(mac-atsu-font-table, mac-font-panel-mode): Add defvars.
	(mac-bytes-to-digits, mac-handle-toolbar-switch-mode)
	(mac-handle-font-panel-closed, mac-handle-font-selection):
	New functions.
	(mac-font-panel-mode): New minor mode.
	(mac-apple-event-map): Add bindings for toolbar toggle button and
	font panel.
	(menu-bar-showhide-menu): Add mac-font-panel-mode.

2006-05-07  John Paul Wallington  <jpw@pobox.com>

	* ibuffer.el (ibuffer-compressed-file-name-regexp):
	Avoid `regexp-opt'; simplify regexp for readability.

2006-05-06  Eli Zaretskii  <eliz@gnu.org>

	* ldefs-boot.el (dired-do-redisplay, dired-maybe-insert-subdir):
	* files.el (buffer-stale-function):
	* dired-aux.el (dired-do-redisplay, dired-maybe-insert-subdir):
	* autorevert.el (global-auto-revert-non-file-buffers): Point Info
	links to the main manual, not to emacs-xtra.

2006-05-06  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-utxt-to-string): Don't make adjustment for
	MacJapanese if text is ASCII-only.

2006-05-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-goto-breakpoint): Use or instead of
	unless so nil isn't returned.
	(gdb-setup-windows, gdb-restore-windows): Reset gdb-source-window.

2006-05-06  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-history): New function.

	* ediff.el (ediff-files, ediff-files3, ediff-merge-files)
	(ediff-merge-files-with-ancestor):
	* env.el (setenv):
	* isearch.el (isearch-update-ring):
	* server.el (server-visit-files):
	* progmodes/grep.el (lgrep, rgrep):
	* progmodes/vhdl-mode.el (vhdl-generate-makefile-1):
	* progmodes/xscheme.el (xscheme-insert-expression):
	Use add-to-history.

	* kmacro.el (kmacro-push-ring): Use add-to-history.
	(kmacro-ring-length): Remove unused defun.
	(kmacro-start-macro): Use kmacro-push-ring.

2006-05-06  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el (ewoc-create, ewoc-set-hf): Use `insert'
	directly instead of a lambda expression that calls it.

2006-05-06  Kim F. Storm  <storm@cua.dk>

	* avoid.el (mouse-avoidance-point-position): Use posn-at-point
	instead of compute-motion.

2006-05-05  Dan Nicolaescu  <dann@ics.uci.edu>

	* ibuffer.el (ibuffer-compressed-file-name-regexp): Undo previous
	change.

2006-05-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* startup.el (command-line-1): Refer to "Pure Storage" on
	pure-space-overflow.

2006-05-05  Martin Rudalics  <rudalics@gmx.at>

	* emacs-lisp/re-builder.el (reb-update-overlays): Cycle through
	provided faces once they all have been used up.

2006-05-05  Eli Zaretskii  <eliz@gnu.org>

	* startup.el (normal-splash-screen, fancy-splash-screens-1): Add a
	reference to the Lisp manual to the warning about pure space
	overflow.

2006-05-05  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* textmodes/ispell.el (ispell-buffer-local-dict): Add a `no-reload'
	argument to avoid the call to `ispell-internal-change-dictionary'
	when not needed.
	(ispell-change-dictionary): Use this argument and call
	`ispell-internal-change-dictionary' after the possible change
	to `ispell-local-dictionary'.
	(ispell-internal-change-dictionary): Check for a change in
	personal dictionary use too.

2006-05-05  Eli Zaretskii  <eliz@gnu.org>

	* startup.el (command-line): On MS-Windows, probe "~", not
	"~USER", for warning about non-existent home directory.

	* arc-mode.el (archive-l-e): New optional argument `float' means
	generate a float value.
	(archive-arc-summarize, archive-lzh-summarize)
	(archive-zip-summarize, archive-zoo-summarize): Invoke archive-l-e
	with 3rd argument non-nil when file's size is being computed.
	Format the file sizes with %8.0f instead of %8d.

2006-05-05  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* cus-start.el (all): Add mac-dnd-known-types.

	* term/mac-win.el (mac-utxt-to-string, mac-string-to-utxt)
	(mac-TEXT-to-string, mac-string-to-TEXT, mac-furl-to-string)
	(mac-TIFF-to-string): New functions.
	(x-get-selection, x-selection-value)
	(mac-select-convert-to-string): Use them.
	(mac-text-encoding-mac-japanese-basic-variant): New constant.
	(mac-dnd-types-alist): New customization variable.
	(mac-dnd-handle-furl, mac-dnd-handle-hfs, mac-dnd-insert-utxt)
	(mac-dnd-insert-TEXT, mac-dnd-insert-TIFF, mac-dnd-drop-data)
	(mac-dnd-handle-drag-n-drop-event): New functions.
	(mac-drag-n-drop): Remove function.
	(global-map): Bind drag-n-drop and M-drag-n-drop to
	mac-dnd-handle-drag-n-drop-event.

2006-05-04  Karl Chen  <quarl@NOSPAM.quarl.org>

	* progmodes/perl-mode.el (perl-beginning-of-function):
	Skip anonymous subs.

2006-05-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* ibuffer.el (ibuffer-compressed-file-name-regexp): Avoid loading
	regexp-opt at run time.

	* term.el (term-handle-ansi-escape): Fix off by one error.

2006-05-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-force-update): Delete variable...
	(gdb-init-1, gdb-post-prompt): ...and references to it.
	(gdb-frame-handler): Strip directory name from filename if present.

	* progmodes/gud.el (gdb-force-update): Delete defvar.
	(gud-speedbar-buttons): ...and references to it.  Use window-start
	to try to keep position in watch expression.

2006-05-03  Richard Stallman  <rms@gnu.org>

	* simple.el (next-history-element, previous-history-element): Doc fix.

	* isearch.el (isearch-update-ring): Doc fix.

2006-05-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* isearch.el (isearch-update-ring): Take history-delete-duplicates
	into consideration.  Replace one arm ifs with whens.

2006-05-03  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gud-watch): Let user select an expression.
	(menu): Fix typo.

2006-05-02  Miles Bader  <miles@gnu.org>

	* replace.el (occur-engine): Bind `inhibit-field-text-motion' to t.

2006-05-02  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-override-minor-modes-map)
	(calc-override-minor-modes): New variables.
	(calc-do-embedded): Make sure that Calc keystrokes aren't
	overwritten by minor modes.

2006-05-02  Chong Yidong  <cyd@mit.edu>

	* msb.el (msb): If EVENT is a down event, read and discard the up event.

2006-05-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* startup.el (command-line-1): Refer to Lisp manual when
	pure-space-overflow occurs.

	* files.el (byte-compile-dynamic, byte-compile-dynamic-docstrings)
	(byte-compile-warnings, find-file-visit-truename, indent-tabs-mode)
	(left-margin, no-byte-compile, no-update-autoloads, truncate-lines)
	(version-control): Don't use `t' for safe-local-variable declarations.

2006-05-01  Richard Stallman  <rms@gnu.org>

	* diff-mode.el (diff-mode-shared-map): Don't bind M-W, M-U, M-C,
	M-r, M-R, M-A, M-SPC or M-DEL.
	(diff-mode-map): diff-refine-hunk now on C-c C-w.
	(diff-mode-map): Bind C-c C-e, C-c C-n, C-c C-r, C-c C-u.

	* help-mode.el (help-mode): view-exit-action calls delete-window
	only when it is safe and possible.

	* simple.el (undo-outer-limit-truncate): Put quotes around buffer name
	in messages.

	* emacs-lisp/warnings.el (display-warning, lwarn): Doc fixes.

	* tool-bar.el (tool-bar-setup): Put Help and Preferences items
	in the default tool-bar-map.

2006-05-01  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-completion-file-name-handler-alist)
	(tramp-run-real-handler, tramp-completion-run-real-handler)
	(tramp-completion-handle-file-name-all-completions)
	(tramp-completion-handle-file-name-completion): Autoload them.
	(tramp-completion-handle-file-exists-p)
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-handle-expand-file-name): Remove them.
	(tramp-handle-file-name-directory): Return the real directory name.
	Returning "/" only doesn't need to be necessary any longer.
	(tramp-file-name-handler): Make special attention when in hostname
	completion mode.
	(tramp-completion-file-name-handler): Revert patch from 2006-04-28.
	(tramp-register-file-name-handlers):
	Register `tramp-completion-file-name-handler' only when
	`partial-completion-mode' is enabled.
	(tramp-completion-handle-file-name-all-completions):
	Delete directory part from results.
	(tramp-get-completion-methods, tramp-get-completion-user-host):
	Discard deleting "/", it doesn't work after the change of
	`tramp-handle-file-name-directory' above.

2006-05-01  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (grep-expand-template): Use save-match-data
	and symbol-value.

2006-05-01  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ae-open-documents, mac-drag-n-drop):
	Use select-frame-set-input-focus instead of raise-frame.
	(global-map): Bind M-drag-n-drop to mac-drag-n-drop.

2006-05-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-def): Add %c case.
	(gud-speedbar-buttons): Don't bind case-fold-search unnecessarily.
	(gud-format-command): Make match case sensitive.  Match on %F.

2006-04-30  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-tex.el (cal-tex-preamble-extra): New variable.
	(cal-tex-preamble): Use cal-tex-preamble-extra.
	(cal-tex-list-diary-entries): Refer to `diary-list-entries' rather
	than alias `list-diary-entries'.

2006-04-29  Dan Nicolaescu  <dann@ics.uci.edu>

	* help-fns.el (describe-variable): Add info about safe local variables.

2006-04-29  Richard Stallman  <rms@gnu.org>

	* bindings.el (mode-line-format): help-echo doc fixes.

	* net/tramp.el (tramp-file-name-handler-alist): Delete
	expand-file-name and other operations that can cause spurious loading.

2006-04-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (safe-local-variable-p): Remove support for the special
	value t.

	* textmodes/paragraphs.el (sentence-end-without-space):
	Fix safety predicate.
	(sentence-end-double-space, sentence-end-without-period)
	(paragraph-ignore-fill-prefix):
	* textmodes/fill.el (colon-double-space):
	* abbrev.el (abbrev-mode): Tighten the safety predicate.

	* subr.el (booleanp): New fun.

	* textmodes/reftex-vars.el (reftex-guess-label-type):
	Tighten the safety predicate.

2006-04-28  Kim F. Storm  <storm@cua.dk>

	* progmodes/grep.el (defgroup grep): Doc fix.
	(grep-auto-highlight): Remove.
	(grep-template): New defcustom.
	(grep-find-template): Rename from grep-tree-template.
	(grep-files-aliases): Rename from grep-tree-files-aliases.
	Remove "all" alias, add "l" alias.
	(grep-tree-ignore-case, grep-tree-ignore-CVS-directories): Remove.
	(grep-find-ignored-directories): New defcustom to replace
	grep-tree-ignore-CVS-directories, to facilitate ignoring
	subdirectories for multiple version control systems.
	(grep-mode-map): Add Recursive grep item to GREP menu.
	(grep-regexp-history, grep-files-history): New defvars.
	(grep-probe): New helper function.
	(grep-compute-defaults): Use it to simplify code.
	Adapt to name changes.
	Use `.' as base in grep-find-template rather than <D>.
	(grep): Remove superfluous highlight-regexp arg.  Fix doc.
	Call grep-compute-defaults unconditionally.
	(grep-expand-keywords): New defconst.
	(grep-expand-template): Rename from grep-expand-command-macros.
	Simplify via grep-expand-keywords.  Look at case-fold-search instead
	of grep-tree-ignore-case to add -i option.
	Bind case-fold-search to nil while matching keywords.
	(grep-tree-last-regexp, grep-tree-last-files): Remove.
	(grep-read-regexp, grep-read-files): New helper functions.
	(rgrep): Rename from grep-tree.  Rework to use proper histories.
	Adapt to changes in defcustoms and functions above.
	(lgrep): New command, as grep, but using same interactive UI as rgrep.

2006-04-28  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-completion-file-name-handler):
	Disable Tramp's functionality while loading Tramp itself.
	(tramp-register-file-name-handlers): That's a defsubst now.
	Code from `tramp-repair-jka-compr' moved here.  Apply it via
	`after-init-hook'.
	(tramp-repair-jka-compr): Remove.

2006-04-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-make-info): Use `math-read-expr' to
	read expression when `math-read-big-expr' doesn't work.

2006-04-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* startup.el (command-line-1): Display warning when
	pure-space-overflow is non-nil.

2006-04-26  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-user-optional-fields): Mark as
	risky.

2006-04-26  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-url): New optional arg no-browse.
	Return the URL or nil if none can be generated.

2006-04-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-comint-buffer): Move forward to stop
	byte compiler warnings.
	(gud-basic-call, gud-find-expr): Let user select an expression
	for printing.  Print expression as well as value in GUD buffer.

2006-04-17  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Remove local autoload declaration for
	pgg-gpg-symmetric-key-p, since that's now done in pgg-gpg.el.
	(allout-show-bodies, allout-header-prefix, allout-primary-bullet)
	(allout-plain-bullets-string, allout-distinctive-bullets-string)
	(allout-use-mode-specific-leader, allout-old-style-prefixes)
	(allout-stylish-prefixes, allout-numbered-bullet)
	(allout-file-xref-bullet, allout-presentation-padding)
	(allout-use-hanging-indents, allout-reindent-bodies): Mark as
	safe-local-variable with suitable value spec, and add autoload
	cookie for loaddefs inclusion.  We now use an explicit spec everywhere.
	(move-beginning-of-line, move-end-of-line): Repair so these compat
	functions now actually resituate the point, when appropriate.

2006-04-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-subword.el (c-subword-mode-map): Use command remapping.

	* add-log.el (add-log-iso8601-time-zone): Make parameter optional.
	(add-log-iso8601-time-string): Fix call to format-time-string.

2006-04-26  Kim F. Storm  <storm@cua.dk>

	* subr.el (posn-string, posn-image, posn-object): Doc fix.

2006-04-26  Masatake YAMATO  <jet@gyve.org>

	* progmodes/asm-mode.el (asm-mode, asm-mode-syntax-table):
	Add support for "//" style comments.  Remove `b' flag
	from ?* in `asm-mode-syntax-table'.

2006-04-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* follow.el: Use (featurep 'xemacs) everywhere.
	(follow-mode): Use define-minor-mode.
	(follow-mode-map): Move initialization into the declaration.
	Use command remapping.
	(follow-emacs-version-xemacs-p): Remove.
	(follow-submit-feedback): Remove.

	* allout.el (allout-layout, allout-passphrase-verifier-string)
	(allout-passphrase-hint-string): Tighten up a bit the safety predicate.

	* textmodes/reftex-vars.el (reftex-vref-is-default)
	(reftex-fref-is-default, reftex-guess-label-type):
	Tighten up a bit the safety predicate.

	* textmodes/paragraphs.el (sentence-end-double-space)
	(sentence-end-without-period, sentence-end-without-space)
	(page-delimiter, paragraph-ignore-fill-prefix):
	Tighten up a bit the safety predicate.

	* textmodes/fill.el (colon-double-space): Tighten up the safety pred.

	* progmodes/python.el (python-continuation-line-p)
	(python-beginning-of-statement): syntax-ppss may return
	a negative depth.
	(python-mode): Don't forcefully enable font-lock.

	* time-stamp.el (time-stamp-start, time-stamp-end)
	(time-stamp-inserts-lines): Tighten up a bit the safety predicate.

	* add-log.el: Remove spurious * in docstrings.
	(add-log-time-zone-rule): Rename from change-log-time-zone-rule.
	(add-change-log-entry): Use it here, since it's not specific
	to iso8601.
	(add-log-iso8601-time-string): Don't use it here any more.
	(change-log-indent-text, change-log-indent): Rename from add-log-*.

	* abbrev.el (abbrev-mode): Tighten up a bit the safety predicate.

2006-04-25  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-print): Revert last change with ignored nicks.
	(rcirc-toggle-low-priority): Doc fix.
	(rcirc-handler-NOTICE): Remove beginning of line anchor in
	ChanServ regexp.
	(rcirc-startup-channels-alist): Connect to #rcirc by default, not
	#emacs.
	(rcirc-bright-nick-regexp, rcirc-dim-nick-regexp): Add variables.
	(rcirc-decode-coding-system): Use utf-8 as the default.
	(rcirc-multiline-minor-mode): Set the fill-column.
	(rcirc-format-response-string): Display bright and dim nicks.
	(rcirc-browse-url): Update interactive spec to fill ARG.
	(rcirc-bright-nick, rcirc-dim-nick): Add faces.
	(rcirc-print): Ignore dim-nick messages wrt modeline-activity.

2006-04-24  J.D. Smith  <jdsmith@as.arizona.edu>

	* textmodes/bibtex.el (bibtex-find-entry): Don't demand matching
	case for @Article, etc.

2006-04-23  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-register-file-name-handlers): New defun.
	Added with autoload cookie.
	(tramp-unload-file-name-handlers): Rename from
	`tramp-unload-file-name-handler-alist'.

2006-04-23  Romain Francoise  <romain@orebokech.com>

	* comint.el (comint-match-partial-filename): Doc fix.

2006-04-21  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-menu.el (calendar-mode-map): Refer to
	`diary-view-entries' rather than alias `view-diary-entries'.
	* calendar/diary-lib.el (view-other-diary-entries): Ditto.

2006-04-21  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/antlr-mode.el (antlr-default):
	* cus-edit.el (custom-documentation):
	* faces.el (scroll-bar, border, cursor, mouse): Avoid nil spec
	in defface.

2006-04-21  Kim F. Storm  <storm@cua.dk>

	* image.el (image-type): New defun split out of create-image.
	(create-image): Use it.

2006-04-21  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map): Catch conflict with old allout.el.
	(org-open-at-point): Remove the "...done" message to keep output
	in the echo area visible.
	(org-export-as-xoxo): Fix call to `indent-region'.

2006-04-21  Kevin Ryde  <user42@zip.com.au>

	* international/mule.el (keyboard-coding-system): defcustom
	info-link fixes: "Specify Coding" has been split, keyboard now in
	"Terminal Coding", and "Single-Byte Character Support" is now
	"Unibyte Mode".

2006-04-21  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-data-list-register-values-handler):
	Use font-lock-warning-face for any errors e.g. no stack.
	(gdb-stack-list-locals-handler): Display any errors e.g. no stack.

2006-04-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/sh-script.el (sh-shell): Mark as safe.

	* newcomment.el (comment-start, comment-start-skip)
	(comment-end-skip, comment-end): Mark as safe.

2006-04-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-deadline-announce): Face removed.
	(org-level-faces, org-n-levels): Convert to constant.
	(org-compatible-face): New function.
	(org-hide, org-level-1, org-level-2, org-level-3, org-level-4)
	(org-level-5, org-level-6, org-level-7, org-level-8)
	(org-special-keyword, org-warning, org-headline-done, org-link)
	(org-date, org-tag, org-todo, org-done, org-table, org-formula)
	(org-scheduled-today, org-scheduled-previously, org-time-grid):
	Face definition revised for better color tty support.
	(org-bold-re, org-italic-re, org-underline-re): New constants.
	(org-set-font-lock-defaults): Use the new constants.
	(org-agenda-highlight-todo): New function.
	(org-agenda-todo): Fix bug with point at end of line.
	(org-agenda-change-all-lines, org-finalize-agenda-entries):
	Fontify TODO keywords.
	(org-insert-link): Preserve relative path in ../ links.
	(org-export-as-html): Convert links pointing to .org files into
	links that will work between the exported HTML files.
	(org-todo-list): Fix bug when arg=0.
	(org-insert-heading): More fine-tuning.

2006-04-19  Romain Francoise  <romain@orebokech.com>

	* mail/rmail.el (rmail-convert-to-babyl-format): Use second group
	from `rmail-mime-charset-pattern'.

2006-04-18  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/python.el (python-mode): Fix typo.

2006-04-18  J.D. Smith  <jdsmith@as.arizona.edu>

	* comint.el (comint-previous-input): Don't clobber input line
	when moving off either end of the input history ring.
	(comint-delete-input): New function, used by
	`comint-previous-input' and others.
	(comint-previous-matching-input):
	Use `coming-delete-input'.  Save the partial input if leaving the
	edit line.  Goto point-max before deleting input to avoid
	partial input fragments hanging around.
	(comint-restore-input): New function, used by `comint-previous-input'.

2006-04-18  Luc Teirlinck  <teirllm@auburn.edu>

	* imenu.el (imenu--index-alist): Balance parentheses.

2006-04-18  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/python.el (python-mode): Add support for hs-minor-mode.

2006-04-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* abbrev.el (read-abbrev-file): Use abbrev-file-name if optional
	file is nil.

2006-04-18  Richard Stallman  <rms@gnu.org>

	* tooltip.el (tooltip-mode, tooltip-use-echo-area): Doc fixes.

	* imenu.el (imenu-create-index-function, imenu--index-alist)
	(imenu--last-menubar-index-alist, imenu--make-index-alist)
	(imenu-default-create-index-function, imenu--generic-function):
	Doc fixes.

	* image-mode.el (image-toggle-display): Handle tar and arc subfiles.

	* help-mode.el (help-mode): Set view-exit-action to delete window.

	* env.el (setenv): Get rid of arg UNSET.  Interactive unsetting
	now works by passing nil as arg.

	* apropos.el (apropos-print): Don't do where-is on self-insert-command.

	* abbrev.el (edit-abbrevs-redefine): Temporarily widen.
	(read-abbrev-file): Provide default when reading filename.

	* files.el (enable-local-variables): Allow :all as value.
	(hack-local-variables): Implement that value.
	(safe-local-variable-values, safe-local-eval-forms)
	(enable-local-variables): Mark as risky.
	(find-file-visit-truename, kept-old-versions): Mark safe.

	* time-stamp.el (time-stamp-format, time-stamp-line-limit)
	(time-stamp-start, time-stamp-end, time-stamp-inserts-lines)
	(time-stamp-count, time-stamp-pattern): Add safe-local-variable prop.

2006-04-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/tcl.el (tcl-send-string, tcl-send-region):
	Use forward-line so as to get to BOL even in the presence of fields.
	(tcl-eval-region): Strip surrounding space to avoid multiple prompts
	in return.
	(inferior-tcl): Tell tclsh to work in interactive mode.

	* complete.el (partial-completion-mode):
	Use 'choose-completion-string-functions to make sure that
	choose-completion fills the minibuffer properly.

	* complete.el (PC-old-read-file-name-internal): Remove.
	(PC-read-include-file-name-internal): Remove.  Turn it into an advice
	of read-file-name-internal.
	(partial-completion-mode): Enable/disable this advice.

2006-04-18  Juanma Barranquero  <lekktu@gmail.com>

	* net/tramp.el (tramp-completion-file-name-handler): Revert change
	of 2006-04-17.

2006-04-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-insert-heading): Insert heading before
	current if at beginning of line.
	(org-todo, org-date): New faces.
	(org-table-align): Make sure tooltip window contains full text.
	(org-no-properties): New defsubst.
	(org-set-font-lock-defaults): Use new faces.

2006-04-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-item-info): Display frame address
	for root variables.

	* progmodes/gdb-ui.el (gdb-pc-address): Rename from gdb-frame-address.
	(gdb-frame-address): Re-use to identify frame for watch expression.
	(gdb-var-list, gdb-var-create-handler): Add frame address for root
	variables.
	(gdb-init-1, gdb-source, gdb-post-prompt)
	(gdb-assembler-custom, gdb-invalidate-assembler): Use gdb-pc-address.
	(gdb-frame-handler): Get gdb-frame-address.

2006-04-17  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.53.

	* net/tramp.el (tramp-completion-mode): ?\t has event-modifier
	'control.  Reported by Matthias Förste <slashdevslashnull@gmx.net>.
	(tramp-completion-file-name-handler): Add autoload cookie for
	adding to `file-name-handler-alist'.

	* net/tramp-smb.el (tramp-smb-wait-for-output): Wait always for
	the prompt.  If it returns earlier (when detecting an error
	message), the rest of the output will merge accidentally with the
	output of the next command.  Reported by M Jared Finder
	<jared@hpalace.com>.

2006-04-17  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* textmodes/tex-mode.el (tex-font-lock-match-suscript): New function.
	(tex-font-lock-keywords-3): Use it.

2006-04-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* newcomment.el (comment-add): New function.
	(comment-region-default, comment-dwim): Use it.

2006-04-15  Michael Olson  <mwolson@gnu.org>

	* emacs-lisp/tq.el: Improve comments.
	(tq-queue-head-question): New accessor function.
	(tq-queue-head-regexp, tq-queue-head-closure, tq-queue-head-fn):
	Update for modified queue structure.
	(tq-queue-add): Accept `question' argument.
	(tq-queue-pop): If a question is pending, send it.
	(tq-enqueue): Accept new optional argument `delay-question'.
	If this is non-nil, and at least one other question is pending a
	response, queue the question rather than sending it immediately.

2006-04-15  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* calendar/appt.el (appt-add): Check whether an appointment is
	already present in appt-time-msg-list.  Simplify code.

2006-04-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-langs.el (c-mode-menu):
	Don't presume c-subword-mode is bound.

2006-04-13  Bill Wohler  <wohler@newt.com>

	* cus-edit.el (customize-package-emacs-version-alist): Update docstring.
	(customize-package-emacs-version): Use cdr instead of cadr now
	that alists use dotted pairs.

	* custom.el (defcustom): Fix docstring for :package-version.

2006-04-13  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-display-shell-command-buffer): New defvar.
	(tramp-handle-shell-command): Display output buffer only when
	`tramp-display-shell-command-buffer' is true.
	(tramp-handle-process-file): Set `tramp-display-shell-command-buffer'.

2006-04-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-set-autofill-regexps): Set only the local
	values of `adaptive-fill-regexp' and `adaptive-fill-function'.

2006-04-13  Romain Francoise  <romain@orebokech.com>

	* pcvs-parse.el (cvs-parse-table): Use `with-temp-buffer' to avoid
	leaving temporary .cvsignore buffers behind.

2006-04-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-set-regexps-and-options)
	(org-get-current-options): Better names for the startup folding
	options.

2006-04-13  Thien-Thi Nguyen  <ttn@gnu.org>

	* vc.el (vc-annotate): Arrange for point to end up at the same
	line number as in the original, but only when using a new buffer.

2006-04-12  Stuart Herring  <herring@lanl.gov>  (tiny change)

	* files.el (hack-one-local-variable-eval-safep):
	Recognize `edebug-form-spec' for `put', but only if it passes
	`edebug-basic-spec'.  Generalize `put' handling.

	* emacs-lisp/edebug.el (edebug-basic-spec): New function for
	vetting file-local form specs.

	* allout.el (allout-layout): Autoload its `safe-local-variable'
	property.

2006-04-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-ctrl-c-ctrl-c): Improve documentation string.
	(org-agenda-mouse-1-follows-link)
	(org-mouse-1-follows-link): New options.
	(org-format-agenda-item): Fix bug if TAGS is nil.
	(org-agenda-get-scheduled): Quote `priority' symbol in plist.

2006-04-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-existing-buffers):
	GDB 6.1+ gives full filename for "info sources" so use
	file-name-nondirectory.

2006-04-12  Romain Francoise  <romain@orebokech.com>

	* subr.el (read-passwd): Bind `message-log-max' to nil.

2006-04-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/perl-mode.el (perl-indent-new-calculate):
	Recompute parse-start after jumping backward by a whole sexp.

2006-04-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-ensure-vc-buffer): Only change current-buffer, not the
	window configuration.
	(vc-annotate-display-select): Select the buffer so that current-buffer
	(and selected-window) is the output buffer at the end of vc-annotate.

2006-04-11  J.D. Smith  <jdsmith@as.arizona.edu>

	* vc.el (vc-annotate-color-map): Add custom TTY color map for
	8-color terminals, to use all of the colors in a sensible order.
	256-color terminals work well with the standard map.
	(vc-annotate-lines): Only strip the first color character if it
	is "#", to allow for terminal-style named colors.
	(vc-annotate-warp-version): Pass buf to `goto-line' to ensure
	the correct buffer is scrolled.

2006-04-11  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-file):
	Bind enable-local-variables to :safe, and make normal-mode obey it.

	* files.el (enable-local-variables): Allow value :safe.
	(normal-mode): Doc fix.
	(hack-local-variables): Implement enable-local-variables = :safe.
	(hack-local-variables-confirm): Don't prevent quitting.

2006-04-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* loadhist.el (unload-feature): A bit of sanity check of
	load-history entries.  Cancel timer-vars before unbinding them.

	* hexl.el (hexl-isearch-search-function): Fix regexp-building code to
	quote special chars, and make the trick work on the hex part of the
	buffer as well.
	(hexl-mode, hexl-save-buffer, hexl-mode-exit)
	(hexl-maybe-dehexlify-buffer): Use restore-buffer-modified-p.

	* startup.el (normal-splash-screen): Fix last change so we don't wait
	2 minutes if we don't show the splash screen.

2006-04-11  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-export-plain-list-max-depth)
	(org-table-spaces-around-separators)
	(org-radio-targets, org-activate-camels)
	(org-table-spaces-around-invisible-separators): Options removed.
	(org-time-stamp-rounding-minutes, org-remember-templates)
	(org-ellipsis, org-activate-links, org-descriptive-links):
	New options.
	(org-remember-apply-template, org-current-time)
	(org-finish-edit-table-field)
	(org-link-unescape, org-link-escape)
	(org-string-width, org-table-clean-line, org-html-do-expand)
	(org-edit-agenda-file-list, org-store-new-agenda-file-list)
	(org-read-agenda-file-list): New functions.
	(org-table-edit-field)
	(org-table-create-or-convert-from-region): New commands.
	(org-table-toggle-vline-visibility): Command removed.
	(org-table-convert-region): Made a command.
	(orgtbl-delete-backward-char, orgtbl-delete-char): Remove commands.
	Replace with the normal org- functions.
	(org-self-insert-command): Don't trigger realign unnecessarily
	when blanking a field that is not full.
	(org-mode): `Set buffer-invisibility-spec' for links.
	(org-activate-links2): Hide link part and only show descriptive
	part of the link.
	(org-insert-link): Modify for new linking system.
	(org-store-link): Store description separately, for use by
	`org-insert-link'.
	(org-table-align): Use `org-string-width'.
	(defgroup): Completely new group structure for custom variables.
	(org-agenda-files): Option: Single file name allowed.  Function:
	Optional argument unrestricted means ignore any restrictions.
	(org-install-agenda-files-menu): Find a buffer in Org-mode before
	trying to modify the menu.  Use generalized access to
	`org-agenda-files'.
	(org-agenda-list, org-todo-list, org-cycle-agenda-files)
	(org-agenda-file-to-front, org-remove-file, org-diary)
	(org-tags-view, org-export-icalendar-all-agenda-files)
	(org-export-icalendar-combine-agenda-files): Use generalized
	access to `org-agenda-files'.
	(org-remember-handler): Correctly preserve heading if present.
	(org-table-insert-row, org-table-insert-hline): Deal with
	invisible characters.

2006-04-10  J.D. Smith  <jdsmith@as.arizona.edu>

	* vc.el (vc-annotate-display-mode): Made default 'fullscale.
	(vc-annotate-color-map): New 18 element constant
	value/saturation, rotating hue colormap, from red->blue.
	(vc-annotate-mode-menu): "Default" -> "By Color Map Range".
	(vc-annotate-display-select): Switch to annotate-mode elsewhere.
	(vc-annotate): To avoid killing the required local variables,
	set them before the end of `with-output-to-temp-buffer', and
	after first switching to annotate-mode.
	(vc-annotate-warp-version): Add buffer argument in goto-line to
	ensure annotation, not source, is scrolled.

2006-04-10  Bill Wohler  <wohler@newt.com>

	* custom.el (defcustom, custom-handle-keyword):
	Add :package-version keyword.
	(custom-add-package-version): New function.  Sets value of new
	property 'custom-package-version from :package-version keyword.
	(defcustom): Create Common Keywords section in docstring.
	(defface, defgroup): Replace definitions of a select few keywords
	with a reference to the Common Keywords in defcustom.
	(defcustom, defface, defgroup): Replace reference to Customization
	chapter in manual with hyperlink.

	* cus-edit.el (customize-package-emacs-version-alist): New variable.
	(customize-changed-options): Add check for custom-package-version.
	(customize-package-emacs-version): New function to look up Emacs
	version corresponding to the given package version.

	* emacs-lisp/find-func.el (find-function-regexp): Allow dashes in
	defun name, in similar fashion to find-variable-regexp.

2006-04-10  Eli Zaretskii  <eliz@gnu.org>

	* international/mule-cmds.el (set-locale-environment): Fix last
	change for when the locale's preferences don't specify any encoding.

2006-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/find-func.el (find-function-search-for-symbol): Fix regexp
	so the defined var/fun doesn't need to be quoted.

2006-04-10  Richard Stallman  <rms@gnu.org>

	* finder.el (finder-mode-map): Add n and p bindings.

2006-04-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-init-1): Re-initialize gdb-main-file to nil.
	(gdb-get-version): Make it work for pre "interpreter mi" (GDB 5.3?).
	(gdb-setup-windows): Put something in source window if we can't find
	the source file.
	(gdb-frame-handler): Make it work again with just assembly.
	(gdb-data-list-register-values-handler): Make it work when there is
	no stack.

2006-04-09  Richard Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-mime-charset-pattern): Ignore format and delsp
	specs while looking for charset.

	* textmodes/picture.el (picture-mode-exit): Run picture-mode-exit-hook.

	* play/landmark.el (lm-font-lock-face-O, lm-font-lock-face-X):
	Make them faces.
	(lm-font-lock-keywords): Update appropriately.

2006-04-10  Kim F. Storm  <storm@cua.dk>

	* simple.el (filter-buffer-substring): Add NOPROPS arg, so
	it can also replace buffer-substring-no-properties.

	* emulation/cua-base.el (cua-delete-region, cua-paste)
	(cua-repeat-replace-region): Use filter-buffer-substring.

	* emulation/cua-gmrk.el (cua-copy-region-to-global-mark)
	(cua-cut-region-to-global-mark): Likewise.

	* emulation/cua-rect.el (cua--extract-rectangle)
	(cua-incr-rectangle, cua--rectangle-aux-replace): Likewise.

2006-04-09  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-entry-update): New optional arg
	entry-type.  Add field delimiters to numerical fields if they are
	not present.

2006-04-09  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-find-text-internal): Add new element
	string-const to return value.
	(bibtex-remove-delimiters): Use it.

2006-04-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/bytecomp.el (byte-compile-form): Don't call
	cl-byte-compile-compiler-macro unless it exists.

2006-04-08  Eli Zaretskii  <eliz@gnu.org>

	* files.el (hack-local-variables-confirm) <offer-save>:
	Clarify message text.  Suggested by Ralf Angeli.

2006-04-08  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* rect.el (kill-rectangle): Don't barf if `kill-read-only-ok' is set.
	(delete-extract-rectangle-line): Use `filter-buffer-substring'
	instead of `buffer-substring' and `delete-region'.  (Most of the
	code actually copied from `kill-region'.)

2006-04-08  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-default-server): Rename from rcirc-server.
	(rcirc-default-port): Rename from rcirc-port.
	(rcirc-default-nick): Rename from rcirc-nick.
	(rcirc-default-user-name): Rename from rcirc-user-name.
	(rcirc-default-user-full-name): Rename from rcirc-user-full-name.
	(rcirc-low-priority-flag): New variable.
	(rcirc-decode-coding-system): New defcustom.
	(rcirc-encode-coding-system): New defcustom.
	(rcirc-coding-system-alist): New defcustom.
	(rcirc-multiline-major-mode): New defcustom.
	(rcirc-nick): New internal variable.
	(rcirc-process): Remove variable.
	(rcirc-server-buffer): New variable.
	(rcirc): Update to use rcirc-default-* variables above.
	(rcirc-connect): Do not add window-configuration-hook-here.
	(rcirc-server): New internal variable.
	(rcirc-connect): Do not send keepalive pings if
	rcirc-keepalive-seconds is nil.
	(with-rcirc-server-buffer): New macro.
	(rcirc-send-string): Encode with rcirc-encode-coding-system.
	(rcirc-server-name): Rename from rcirc-server.
	(rcirc-buffer-process): New function.
	(rcirc-buffer-nick): New function.
	(rcirc-buffer-target): Remove function.
	(set-rcirc-decode-coding-system, set-rcirc-encode-coding-system):
	New commands.
	(rcirc-mode-map): Change binding of C-c C-l to
	rcirc-toggle-low-priority.
	(rcirc-mode): Initialize coding system based on
	rcirc-coding-system-alist.  New change-major-mode-hook to part the
	channel on a mode change.  Make kill-buffer-hook buffer-local.
	(rcirc-change-major-mode-hook): New function.
	(rcirc-clean-up-buffer): Rename from rcirc-kill-buffer-hook-1.
	(rcirc-last-post-time): New variable.
	(rcirc-process-message): Store the last time user posted a message
	to this target.
	(rcirc-multiline-minor-mode): New mode.
	(rcirc-multiline-minor-mode-map): New mode map.
	(rcirc-edit-multiline): Put multiline-edit buffer in
	rcirc-multiline-major-mode along with rcirc-multiline-minor-mode.
	(rcirc-print): Ignore any line starting with an ignored nick.
	(rcirc-print): Decode using rcirc-decode-coding-system.
	(rcirc-track-minor-mode): Update global-mode-string when disabling
	this mode.
	(minor-mode-alist): Add LowPri indicator.
	(rcirc-toggle-low-priority): New function.
	(rcirc-last-non-irc-buffer): Prefix arg now no means switch to
	next lowpriority buffer with activity.
	(rcirc-record-activity): Sort buffers in rcirc-activity by the
	last time the user posted a message in to the target.
	(rcirc-update-activity-string): New formatting for low priority
	buffers.
	(rcirc-split-activity): New function.
	(rcirc-handler-PART, rcirc-handler-KICK)
	(rcirc-handler-PART-or-KICK): Kick responses are printed properly.
	(rcirc-nick-away-alist): New variable.
	(rcirc-handler-301): New handler.  Away messages are printed once
	per change.

2006-04-08  Eli Zaretskii  <eliz@gnu.org>

	* info.el (Info-follow-nearest-node): Doc fix.

	* international/mule-cmds.el (set-locale-environment): Make sure
	the coding-system preferred by the locale's language has the same
	EOL conversion type as the original buffer-file-coding-system.
	(locale-language-names): Add a few MS Windows language codes.

2006-04-07  Richard Stallman  <rms@gnu.org>

	* simple.el (eval-expression): Doc fix.

	* emacs-lisp/lisp-mode.el (eval-print-last-sexp, eval-last-sexp)
	(eval-defun): Doc fixes.

2006-04-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* pgg-gpg.el: Revert to revision 1.8 to allow the use of gpg-agent.

2006-04-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-init-2): Set current filename using
	GDB list command without argument for greater generality.

2006-04-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* subr.el (string-or-null-p): New function.

	* textmodes/paragraphs.el (sentence-end): Use string-or-null-p.

	* textmodes/ispell.el (ispell-local-dictionary): Use string-or-null-p.

	* files.el: Update comment about safe-local-variable declarations.

2006-04-06  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el: Updated to IDLWAVE version 6.0.
	See idlwave.org.

	* progmodes/idlw-shell.el: Updated to IDLWAVE version 6.0.
	See idlwave.org.  Includes code to obsolete idlw-rinfo.el.

	* progmodes/idlw-help.el: Updated to IDLWAVE version 6.0.
	See idlwave.org.

	* progmodes/idlw-complete-structtag.el: Updated to IDLWAVE
	version 6.0 (minimal changes).  See idlwave.org.

	* progmodes/idlw-toolbar.el: Updated to IDLWAVE version
	6.0 (minimal changes).  See idlwave.org.

	* progmodes/idlw-rinfo.el: File obsoleted and removed.

2006-04-06  Romain Francoise  <romain@orebokech.com>

	* pgg-gpg.el: Sync back with Gnus 5.10, reverting changes that add
	symmetric encryption features and a new asynchronous interface to
	GnuPG.  This new version is version 1.4, plus whitespace changes.

2006-04-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el: Move some `safe-local-variable' declarations to the
	respective files.

	* textmodes/ispell.el (ispell-check-comments)
	(ispell-local-dictionary): Mark as safe.

	* abbrev.el (abbrev-mode): Mark as safe.

	* add-log.el (change-log-default-name): Mark as safe.

	* textmodes/reftex-vars.el (reftex-vref-is-default)
	(reftex-fref-is-default, reftex-level-indent)
	(reftex-guess-label-type): Mark as safe.

	* textmodes/fill.el (colon-double-space): Mark as safe.

	* textmodes/paragraphs.el (paragraph-start, paragraph-separate)
	(sentence-end-double-space, sentence-end-without-period)
	(sentence-end-without-space, sentence-end, sentence-end-base)
	(page-delimiter, paragraph-ignore-fill-prefix): Mark as safe.

2006-04-06  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Remove ido-ignore-unc-host-regexps from
	the :set-after list.
	(ido-downcase-unc-hosts): New user option.  Default on.
	(ido-ignore-unc-host-regexps): Don't reset ido-unc-hosts-cache
	when it is set, as regexps are now applied on the fly.
	(ido-unc-hosts): Keep all known hosts in ido-unc-hosts-cache.
	Make C-a DTRT--filter hosts through ido-ignore-unc-host-regexps
	on the fly, but only when ido-process-ignore-lists is set.
	Do case insensitive filtering if ido-downcase-unc-hosts is set.
	Only downcase names if ido-downcase-unc-hosts is set.

2006-04-06  Juanma Barranquero  <lekktu@gmail.com>

	* ido.el (ido-unc-hosts-cache): Fix typo in docstring.

	* woman.el (WoMan-xref-man-page): Fix call to `substring'.

2006-04-05  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Set after ido-unc-hosts and
	ido-ignore-unc-host-regexps.
	(ido-save-history): Save ido-unc-hosts-cache.
	(ido-load-history): Load ido-unc-hosts-cache.
	(ido-reread-directory): Refresh unc hosts cache in // dir.

	* startup.el (fancy-splash-screens): Set emulation-mode-map-alists
	to nil while displaying slash screen.

2006-04-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region, pgg-gpg-sign-region):
	Wait for BEGIN_SIGNING too, new in GnuPG 1.4.3.

2006-04-05  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Setup cases of Latin, Greek, and
	Cyrillic characters in CJK charsets.

2006-03-29  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-start-process): Don't bind
	default-enable-multibyte-characters.  This reverts the change from
	revision 6.17 which is no longer necessary because the passphrase
	is sent separately now.  GnuPG messages are unreadable under
	multibyte locales with default-enable-multibyte-characters set to nil.

2006-04-04  Andreas Schwab  <schwab@suse.de>

	* files.el: Mark `left-margin', `byte-compile-dynamic-docstrings'
	and `byte-compile-warnings' as `safe-local-variable'.

2006-04-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* man.el (Man-mode-map): Restore the \r binding.
	(Man-abstract-xref-man-page): If Man-target-string is a function,
	call it.
	(Man-highlight-references): Use Man-default-man-entry to get the
	target.  Deal with xrefs too.
	(Man-highlight-references0): Don't call the target function.

	* woman.el (WoMan-xref-man-page): Strip the section number, woman
	cannot deal with it.

2006-04-04  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Clean up process buffers every time gpg processes
	complete.

2006-04-04  Kenichi Handa  <handa@m17n.org>

	* sort.el (sort-build-lists): Don't bind inhibit-field-text-motion
	here.
	(sort-lines, sort-numeric-fields, sort-fields, sort-columns):
	Temporarily bind inhibit-field-text-motion to t.

2006-04-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* startup.el (normal-splash-screen): Only set mode-line-format in the
	splash buffer, so as not to interfere when debugging the code.
	Ignore errors when switching buffer.

2006-04-03  Romain Francoise  <romain@orebokech.com>

	* dired.el (dired-dnd-protocol-alist): Fix typo.

2006-04-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* savehist.el (savehist): Add :version.
	(savehist-ignored-variables): New variable.
	(savehist-minibuffer-hook): Don't save variables listed in
	`savehist-ignored-variables'.

	* dired.el (dired-dnd-protocol-alist): Mention that change does
	only apply to new buffers in doc string.

2006-04-03  Lennart Borgman  <lennart.borgman.073@student.lu.se>  (tiny change)

	* recentf.el (recentf-open-files-item): Include newline in button
	field, so opening a file will work, when the point is at the end
	of the file name.  Allow, for example, to [i]search a file by
	extension and just push RET to open it.

2006-04-03  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-filter)
	(pgg-gpg-wait-for-completion): Check if buffer is alive.

	* pgg-gpg.el (pgg-gpg-process-sentinel): Don't remove GNUPG:
	lines, temporary fix.

2006-04-02  Dan Nicolaescu  <dann@ics.uci.edu>

	* ibuf-macs.el (define-ibuffer-column): Document the new parameter.

2006-04-02  Richard Stallman  <rms@gnu.org>

	* progmodes/compile.el (compilation-message-face): Make it defcustom.

2006-04-02  Dan Nicolaescu  <dann@ics.uci.edu>

	* ibuf-macs.el (define-ibuffer-column): Add a new key:
	header-mouse-map.

	* ibuffer.el (ibuffer-name-header-map, ibuffer-size-header-map)
	(ibuffer-mode-header-map): New keymaps.
	(ibuffer-update-title-and-summary): Enable mouse face highlighting
	and keybindings for column headers.
	(name, size, mode) <define-ibuffer-column>: Add a header-mouse-map
	property.

2006-04-02  Drew Adams  <drew.adams@oracle.com>

	* speedbar.el (speedbar-after-create-hook): Doc fix.

2006-04-02  Michael Ernst  <mernst@alum.mit.edu>

	* shell.el (shell-directory-tracker)
	(shell-dynamic-complete-command): Doc fixes.

2006-04-01  Matt Hodges  <MPHodges@member.fsf.org>

	* pcomplete.el (pcomplete-show-completions): Recognize TAB on text
	terminals.

2006-04-01  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-unc-hosts-cache): New defvar.
	(ido-unc-hosts): If value of defcustom is a function, call it to
	get list of UNC hosts.  Add function-item choices to specify
	ido-unc-hosts-net-view or user function.
	(ido-ignore-unc-host-regexps): New defcustom.
	(ido-unc-hosts-net-view, ido-unc-hosts): New functions.
	(ido-is-unc-root, ido-is-unc-host, ido-file-name-all-completions)
	(ido-exhibit): Call ido-unc-hosts to get list of UNC hosts.

2006-03-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-util.el (cvs-insert-strings): Fix bug with strings longer than
	wwidth.

2006-03-31  Juanma Barranquero  <lekktu@gmail.com>

	* ido.el (ido-cache-unc-host-shares-time, ido-report-no-match)
	(ido-max-work-file-list, ido-switch-buffer)
	(ido-read-file-name-as-directory-commands):
	Fix typos in docstrings.

2006-03-30  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-system-coding-system): Define and use after
	Mac-specific coding systems are ready.

2006-03-27  Romain Francoise  <romain@orebokech.com>

	* net/rcirc.el (rcirc-connect): Add autoload cookie.

	* ldefs-boot.el: Update.

2006-03-27  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Invoke gpg asynchronous, to avoid querying for
	passphrases when it is not needed.
	(pgg-gpg-use-agent): Add, to hard code that pgg shouldn't wait for
	passphrase stuff from gpg, should only be necessary when you use
	gpg with a smartcard.

2006-03-27  Nick Roberts  <nickrob@snap.net.nz>

	* comint.el (comint-dynamic-list-completions): Allow user to
	select *Completions* buffer.

2006-03-27  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-get-level-face): Fix bug with level counting.

2006-03-26  Andreas Schwab  <schwab@suse.de>

	* progmodes/gud.el (gdb): Only complain about multiple debugging
	when the gdb process is still running.

2006-03-25  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (tool-bar-map): Defvar it.
	(rmail-tool-bar-map): Tool-bar buttons for Rmail.
	(rmail-perm-variables): Make rmail-tool-bar-map a local variable.

2006-03-25  Sven Joachim  <svenjoac@gmx.de>  (tiny change)

	* help.el (print-help-return-message): Suggest to use
	display-buffer instead of switch-to-buffer-other-window to restore
	the previous window without selecting it.

2006-03-25  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* frame.el (select-frame-by-name): Call x-focus-frame also when
	window-system is mac.

	* term/mac-win.el: Adjust Courier font specifications in
	x-fixed-font-alist.
	(mac-select-convert-to-string): Use utf-16be-mac or utf-16le-mac
	when directly encoding to UTF-16 in native byte order, no BOM.

2006-03-25  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-rectangle-mark-key): New defcustom.
	(cua--init-keymaps): Use it instead of fixed C-return.
	(cua-mode): Set after it.

	* emulation/cua-rect.el (cua--init-rectangles):
	Use cua-rectangle-mark-key instead of fixed C-return.

2006-03-25  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdba): Revert 2006-03-10 change for case of
	"run" in .gdbinit.
	(gdb-var-create-regexp): Remove "^done" prefix for gdb-mi.el.

2006-03-24  Romain Francoise  <romain@orebokech.com>

	* files.el (ctl-x-5-map): Really bind C-x 5 C-o to
	`display-buffer-other-frame'.

2006-03-24  Kim F. Storm  <storm@cua.dk>

	* apropos.el (apropos-synonyms): Add selection => region.

2006-03-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-regexp)
	(gdb-var-list-children-regexp, gdb-var-update-regexp)
	(gdb-var-list-children-regexp-1, gdb-var-update-regexp-1)
	(gdb-data-list-register-values-regexp)
	(gdb-stack-list-locals-regexp, gdb-stack-list-locals-handler):
	Future proof against new fields being added to MI output.
	(gdb-send): Don't treat backslashes for program input as
	continuations.
	(gdb-assembler-handler): Don't use window-start for this handler.
	(gdb-frame-handler): Don't change to hollow arrow if overlay
	arrow doesn't move to new frame.

2006-03-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-continuation): Declare earlier to
	prevent compiler warnings.
	(gdb-stopped): Check for gud-last-last-frame (case: signal).
	(breakpoint-disabled): Make lighter for contrast with overlay arrow.
	(gdb-assembler-custom): Use hollow-right-triangle for assembler
	buffer too.

2006-03-23  Reiner Steib  <reinersteib+gmane@imap.cc>

	* pgg-gpg.el (pgg-gpg-update-agent): Check for
	make-network-process, so we can use the same code in Gnus v5-10
	too and have this file fully synchronized with that release.

2006-03-23  Romain Francoise  <romain@orebokech.com>

	* ibuf-ext.el (ibuffer-read-filter-group-name):
	Use `ibuffer-generate-filter-groups' to make completion list match
	the filter groups that are really displayed in the Ibuffer buffer.
	(ibuffer-generate-filter-groups): Add new args noempty, nodefault.

2006-03-23  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (sort-coding-systems): Describe that
	the argument is modified in docstring.

2006-03-22  Sascha Wilde  <wilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-use-agent): Disable by default.
	(pgg-gpg-update-agent): New function.
	(pgg-gpg-use-agent-p): New function.
	(pgg-gpg-process-region, pgg-gpg-encrypt-region)
	(pgg-gpg-encrypt-symmetric-region, pgg-gpg-decrypt-region)
	(pgg-gpg-sign-region): Use it.

2006-03-21  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-face-set): Call custom-push-theme before
	face-spec set so that `changed' theme is correctly saved.
	(custom-face-reset-standard): Reset to recalculated face rather
	than defface spec.

	* custom.el (custom-push-theme): Only save `changed' theme if the
	current face does not match the defface specs.

2006-03-21  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el: Ideas below based on patch from Sascha Wilde
	<wilde@sha-bang.de>.
	(pgg-gpg-use-agent): New variable.
	(pgg-gpg-process-region): Use it.
	(pgg-gpg-encrypt-region): Likewise.
	(pgg-gpg-encrypt-symmetric-region): Likewise.
	(pgg-gpg-decrypt-region): Likewise.
	(pgg-gpg-sign-region): Likewise.
	(pgg-gpg-possibly-cache-passphrase): Don't cache a nil password.

2006-03-21  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-open-at-point): Fix bug in wiki-style
	bracket links.

2006-03-21  Kim F. Storm  <storm@cua.dk>

	* progmodes/gdb-ui.el (gdb-reset): Set buffer local value of
	fringe-indicator-alist instead of modifying global value.
	(gdb-frame-handler): Likewise.

2006-03-21  Nick Roberts  <nickrob@snap.net.nz>

	* diff-mode.el (diff-function): Make it inherit from diff-header
	instead of diff-context.

	* progmodes/gdb-ui.el (hollow-right-triangle): Define as fringe
	bitmap.
	(gdb-info-stack-custom): Rename from gdb-info-frames-custom and
	change names in macro above for consistency.
	(gdb-frame-handler): Use hollow-right-triangle for all selected
	frames which except the innermost (where execution has stopped).
	(gdb-reset): Reset buffer-local values of overlay-arrow.

2006-03-20  Richard Stallman  <rms@gnu.org>

	* simple.el (set-mark-command): Doc fix.

	* files.el (display-buffer-other-frame): New command.
	(ctl-x-4-map): Bind C-x 5 C-o to it.

2006-03-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* jit-lock.el (jit-lock-function): Check for the actual defer-timer
	rather than just defer-time, in case defer-time has been changed but
	the timer isn't running yet.
	(jit-lock-deferred-fontify): Correspondingly let-bind defer-timer.

2006-03-19  Luc Teirlinck  <teirllm@auburn.edu>

	* help-mode.el (help-follow-symbol): New function.
	Essentially identical to the old `help-follow', but do not let
	`push-button' do the work when on an xref.
	(help-mode-map): Bind `help-follow-symbol' to "C-c C-c".

2006-03-19  Richard Stallman  <rms@gnu.org>

	* help-mode.el (help-xref-symbol-regexp): Make no xref for symbol
	preceded by the word `program'.
	(help-follow-mouse, help-follow): Throw error if not on xref.
	Delete no longer used args.

2006-03-20  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-stopped): Even when there is no source
	annotation ensure gud-overlay-arrow-position is redisplayed.

2006-03-19  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-include-OPTkey)
	(bibtex-entry-field-alist, bibtex-generate-url-list): Mark as risky.
	(bibtex-autokey-name-case-convert)
	(bibtex-autokey-titleword-case-convert): Make these the aliases
	for the following two variables.
	(bibtex-autokey-name-case-convert-function)
	(bibtex-autokey-titleword-case-convert-function): Make these the
	real names.
	(bibtex-font-lock-keywords): Make bibtex-font-lock-url and
	bibtex-font-lock-crossref sublists.
	(bibtex-mode): Revert 2005-12-30 change (which made
	completion-ignore-case buffer-local).
	(bibtex-url): Simplify.

2006-03-19  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--highlight-rectangle): Set overlay
	cursor property value to 2 (to align with C level change).

2006-03-19  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Shorten first line in
	docstring.

2006-03-18  Richard Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-reply-regexp): Undo previous change.

2006-03-18  Ben North  <ben@redfrontdoor.org>  (tiny change)

	* isearch.el (isearch-other-meta-char): Handle user bindings for
	shifted control characters.

2006-03-18  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el (ispell-skip-region-alist): Add "_+" to the
	part that matches email addresses, file names, etc.

2006-03-18  Eli Zaretskii  <eliz@gnu.org>

	* term/w32-win.el (mouse-set-font):
	Mention w32-list-proportional-fonts in the doc string.

2006-03-18  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-cache-ftp-work-directory-time): Doc fix.
	(ido-unc-hosts): New user option to explicitly define list of know
	UNC-style hosts for completion.
	(ido-cache-unc-host-shares-time): New user option.
	(ido-is-unc-root, ido-is-unc-host, ido-cache-unc-valid):
	New helper functions for UNC file-name support.
	(ido-may-cache-directory): Check for UNC host.  Simplify.
	(ido-wash-history): Clean out old UNC hosts.
	(ido-nonreadable-directory-p): UNC hosts are always readable.
	(ido-directory-too-big-p): UNC hosts are never too big.
	(ido-set-current-directory): Handle UNC root path.
	(ido-file-name-all-completions): Complete UNC host names from
	ido-unc-hosts list.  Cache UNC host shares.
	(ido-make-file-list-1): Don't filter UNC root.
	(ido-exhibit): Check for // in root directory, and switch to UNC
	mode by setting ido-current-directory to //.

2006-03-17  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-changed-options): Mention explicit
	version number as default in prompt.

2006-03-17  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Minor docstring fix.

2006-03-17  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-read-date): Include subgroup 5 into
	replacement text.
	(org-popup-calendar-for-date-prompt): Fix customization type.

2006-03-17  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gud-watch): Provide completion.
	(gdb-continuation): New variable.
	(gdb-send): Deal with continuation lines.

	* progmodes/gud.el (gud-gdb-complete-command)
	(gud-gdb-run-command-fetch-lines): Adapt for use with watch
	expressions.
	(gud-tooltip-mode): Use buffer-local value.

2006-03-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-edit-input): Use selected match, if any.

2006-03-16  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Prefer user's images in
	image-load-path.

2006-03-16  Martin Rudalics  <rudalics@gmx.at>

	* mouse.el (mouse-drag-vertical-line): Use window-inside-edges
	when checking for attempt to drag leftmost or rightmost scrollbar.

2006-03-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-inferior-status): New variable.
	(gdb-force-mode-line-update): New function.
	(gdb-resync, gdb-starting, gdb-signal, gdb-exited, gdb-stopped)
	(gdb-exited): Use them.
	(gdb-signal): New function.
	(gdb-annotation-rules): Provide a rule for it.

2006-03-16  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (auto-coding-regexp-alist): Add entries
	for Unicode BOM.

	* sort.el (sort-build-lists): Temporarily bind
	inhibit-field-text-motion to t.

2006-03-15  Luc Teirlinck  <teirllm@auburn.edu>

	* locate.el (locate-command, locate-make-command-line)
	(locate-fcodes-file, locate-update-command)
	(locate-prompt-for-command, locate, locate-with-filter)
	(locate-get-file-positions): Doc fixes.
	(locate-buffer-name, locate-header-face): Remove leading `*' in
	defcustom.
	(locate-filter-output): Use `keep-lines' instead of its alias
	`delete-non-matching-lines'.
	(locate-get-filename, locate-get-dirname): Add introductory comment.
	(locate-find-directory-other-window): Give appropriate error
	message if used outside main listing.

2006-03-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-lines-before): Delete variable, subsumed by
	the new extend-region feature.
	(font-lock-after-change-function): Update correspondingly.
	* jit-lock.el (jit-lock-after-change): Update correspondingly.
	* progmodes/grep.el (font-lock-lines-before): Don't disable.

2006-03-15  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Fix example by not
	recommending that one binds image-load-path.  Just defvar it to
	placate compiler and only use it if previously defined.

2006-03-15  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-insert-centered): Use `string-width' to
	make underlining work for wide characters.
	(org-goto-map, org-agenda-mode-map, org-mode-map): Explicitly bind
	TAB to `org-cycle', to make sure that no binding in
	`outline-mode-map' can supersede it.

2006-03-14  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Increment version to 2.2.1 in file commentary.

	(allout-version): Increment to 2.2.1.

	(allout-default-layout): New customization variable, used when the
	file lacks a specific allout-layout.  Uses allout-layout-type for
	recursively nested definition.

	(allout-layout-type): Widget defining allout layouts, necessary for
	self-recursive definition.

	(allout-mode): Incorporate allout-default-layout as fallback for
	allout-layout.

	(allout-layout): Mark as 'safe-local-variable', and refer mention
	fallback to `allout-default-layout' in absence of a specified value.
	(allout-passphrase-verifier-string)
	(allout-passphrase-hint-string): Mark as 'safe-local-variable'.

	(allout-file-passphrase-verifier-string): Obsolete variable, removed.

	(allout-get-encryption-passphrase-verifier): Use correct name of
	passphrase verifier in docstring.

2006-03-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-list): Change order of first two
	elements.
	(gdb-find-watch-expression): Make it work for arrays too.
	Follow change to gdb-var-list.
	(gud-watch): Allow the user to enter variable name with a prefix
	arg.  Create keybindings.
	(gdb-var-create-handler, gdb-var-evaluate-expression-handler)
	(gdb-var-list-children-handler, gdb-var-update-handler)
	(gdb-var-delete, gdb-edit-value, gdb-speedbar-expand-node)
	(gdb-var-list-children-handler-1, gdb-var-update-handler-1):
	Follow change to gdb-var-list.
	(gdb-starting): Don't show the overlay arrows when program is running.

	* progmodes/gud.el (gud-speedbar-buttons): Follow change to
	gdb-var-list.

2006-03-14  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Pass value of path
	rather than symbol.  Always return list of directories.
	Guarantee that image directory comes first.

2006-03-14  Alan Mackenzie  <acm@muc.de>

	* font-core.el (font-lock-extend-region\(-function\)?.):
	New function/variable.

	* font-lock.el (font-lock-after-change-function):
	Call font-lock-extend-region.  Obey font-lock-lines-before.
	(font-lock-default-fontify-region): Remove reference to
	font-lock-lines-before.

	* jit-lock.el (jit-lock-after-change):
	Call font-lock-extend-region.  Obey font-lock-lines-before.

2006-03-14  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-themes-load-path)
	(tree-widget-themes-directory, tree-widget-theme): Doc fix.

2006-03-13  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc) <defgroup>: Add link to manual.
	(rcirc-print): Mark the start of text at the end of the prompt.
	(rcirc-track-minor-mode): Add autoload cookie.
	(rcirc-update-activity-string): Add space to front of mode-line
	indicator.

2006-03-13  Miles Bader  <miles@gnu.org>

	* net/rcirc.el (rcirc-nick-abbrevs): Remove variable.
	(rcirc-abbrev-nick): Remove function.
	(rcirc-format-response-string): Don't call `rcirc-abbrev-nick'.

2006-03-13  David Ponce  <david@dponce.com>

	* tree-widget.el: Handle themes across all occurrences of the main
	themes sub-directory found in tree-widget-themes-load-path.
	(tree-widget-themes-directory, tree-widget-theme): Doc fix.
	(tree-widget--locate-sub-directory): Return all occurrences.
	(tree-widget-themes-path): New function.
	Replace tree-widget-themes-directory, and return a list of directories.
	(tree-widget-set-parent-theme)
	(tree-widget-lookup-image): Use it.

2006-03-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-link-search): Avoid self-matching of
	links, allow target text to be distributed over several lines.
	(org-search-not-link): New function.
	(org-set-regexps-and-options, org-get-current-options):
	New startup options.
	(org-export-as-html): Take odd-level setting from local variable.
	(org-fontify-emphasized-text): New option.
	(org-set-font-lock-defaults): Include emphasized text.
	(org-follow-mhe-link): Allow folder-only links, fix folder name.
	(org-font-lock): Customize group renamed from `org-faces'.

2006-03-13  John Paul Wallington  <jpw@pobox.com>

	* ibuf-ext.el (ibuffer-never-show-predicates): Add `require'
	keyword; require `ibuf-ext' feature.  Thanks to Zhang Wei.

2006-03-12  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Delete :version keyword for members of the
	fringe group, since the entire group is new in 22.1.

2006-03-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-stack-list-locals-handler): Add local
	map if value is hexadecimal (an address).
	(gud-watch): Only search roots for existing watch expressions.
	(gdb-speedbar-refresh): Bind speedbar-shown-directories to nil to
	prevent caching problems with speedbar-update-directory-contents.

2006-03-12  Juri Linkov  <juri@jurta.org>

	* battery.el (battery-linux-proc-acpi): Check `capacity' for non-nil
	before comparing with `low' and `warn'.

	* info.el (Info-dir-remove-duplicates): Move point to the
	beginning of the current line after deleting the entries from
	redundant heading.  Use marker for `limit' and compare it with
	point before calling `re-search-forward'.

2006-03-11  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (yank): Fix typo in docstring.

2006-03-11  Ryan Yeske  <rcyeske@gmail.com>

	* mail/rmailsum.el (rmail-summary-next-msg): Skip deleted
	messages, where "D" is the 6th character.

2006-03-11  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (yank): Fix last change.

2006-03-11  David Ponce  <david@dponce.com>

	* textmodes/ispell.el (ispell-find-aspell-dictionaries): Add aliases
	before merging elements from the standard ispell-dictionary-alist.
	(ispell-aspell-add-aliases): Add aliases to the passed dictionary
	alist, and return the new alist.

2006-03-11  Richard Stallman  <rms@gnu.org>

	* mail/rmail.el (rmail-ignored-headers): Discard DomainKey-Signature.

	* eshell/eshell.el (eshell-prefer-to-shell): Variable deleted;
	the way it is implemented is too unclean.

	* simple.el (kill-region, yank): Doc fix.

	* battery.el (battery-echo-area-format): Doc fix.
	(battery-mode-line-format): Likewise.
	(battery-linux-proc-apm, battery-linux-proc-acpi): Likewise.
	(battery-linux-proc-acpi): Ignore batteries that say "charged".

2006-03-11  Kurt Hornik  <Kurt.Hornik@wu-wien.ac.at>

	* progmodes/octave-mod.el (octave-indent-for-comment):
	Behave according to do string.

2006-03-11  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el (ispell-menu-map-needed) [ispell-message]:
	Be visible only if major mode is Mail Mode.

	* textmodes/flyspell.el (flyspell-external-point-words)
	(flyspell-process-localwords): Fix last changes.

2006-03-11  Eli Zaretskii  <eliz@gnu.org>

	* calendar/holidays.el (list-holidays): Doc fix.

	* international/mule.el (auto-coding-alist): Add .odt
	(OpenOffice's open document) files.

	* files.el (auto-mode-alist): Add .odt (OpenOffice's open
	document) files.  Mention in the doc string the need to sync with
	auto-coding-alist.

2006-03-10  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables-confirm): Don't prompt for ! if
	enable-local-variables is set to always query, or there is no
	savable variable.

2006-03-10  Bill Wohler  <wohler@newt.com>

	* image.el (image-load-path-for-library): Merge at least three
	functions from Gnus and MH-E into this one function that can now
	be shared.

2006-03-11  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-remove-text-properties): Rename from
	gdb-remove-mouse-face and remove help-echo too.
	(gdb-enqueue-input): Correct conditional clause.

2006-03-10  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (calendar-holidays): Doc fix.
	* calendar/holidays.el (list-holidays): Doc fix.

2006-03-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdba): Don't call gdb-init-1 explicitly as
	it gets called in gdb-prompt anyway.
	(gdb-use-separate-io-buffer): Only restore window arrangement for
	gdb-many-windows.
	(gdb-enqueue-input): Make it harder to send GDB input when program
	is running.
	(gdb-buffer-list): New variable.
	(gdb-remove-mouse-face): New function.
	(gdb-starting): Use it when GDB input won't get sent.

2006-03-08  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (view-lossage): Remove trailing whitespace before
	inserting "\n".

2006-03-07  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (hack-local-variables-confirm):
	Set coding-system-for-read to nil before writing to .emacs.

	* arc-mode.el (archive-extract): Check if an existing buffer name
	comes from a different archive.

	* help.el (describe-key-briefly): If KEY is a down event, read and
	discard the up event.

2006-03-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Allow pointers to
	be edited and use font-lock-warning-face for any changes.

	* progmodes/gdb-ui.el (gdb-edit-value-handler): New function.
	(gdb-edit-value): Use it to report any errors.

2006-03-07  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (describe-key): Remove leftover test code.

2006-03-07  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Move defvars out of eval-when-compile.
	Use buffer-file-name variable.
	(org-agenda-file-to-end, org-agenda-file-to-front): Remove unused
	arg `file'.
	(org-level-faces): Remove startup dependency.
	(org-cycle, org-map-tree, org-scan-tags)
	(org-remember-handler): Don't call `outline-level' directly.
	(org-mhe-search-all-folders): New option.
	(org-mhe-get-message-folder-from-index)
	(org-mhe-get-message-folder): Fix indexing search.
	(org-format-agenda-item): Handle nil TAGS argument.
	(org-cleaned-string-for-export, org-activate-target-links)
	(org-make-target-link-regexp): Deal with empty radio target list.
	(org-tag): New face.
	(org-get-level-face): New function.
	(org-set-font-lock-defaults): Simplify setup for headlines.
	(org-complete): Pass common substring to `display-completion-list'.

2006-03-06  David Ponce  <david@dponce.com>

	* tree-widget.el: Update Commentary header.
	(tree-widget-theme-name): Ignore parent themes.
	(tree-widget-set-parent-theme): New function.
	(tree-widget-set-theme): Use it.
	(tree-widget-set-image-properties): Move definition.  Does nothing
	if image properties have already been set.
	(tree-widget-image-properties): Move definition.  Receive an image
	name.  Set the :pointer property.
	(tree-widget-lookup-image): Doc fix.  Search in parent themes.
	Don't set the :pointer image property.
	(tree-widget-convert-widget): New function.  Handle :dynargs
	compatibility here.
	(tree-widget): Use it to :convert-widget.  Add the :expander-p
	predicate to control when the :expander function is entered.
	Thanks to Ken Manheimer <ken.manheimer@gmail.com> for the idea.
	(tree-widget-value-create): Handle :expander-p.  widget-apply
	:expander.
	(tree-widget-expander-p): New function.  Default value of the
	:expander-p property.

2006-03-06  Chong Yidong  <cyd@stupidchicken.com>

	* help.el (describe-key): Properly handle the return value of
	read-key-sequence when grabbing an up-event.  Cleanup mouse-1
	remaps.  Handle string and vector `follow-link' values.

2006-03-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* complete.el (PC-expand-many-files): Try be more careful when parsing
	the shell's output.

2006-03-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* outline.el (hide-sublevels): Provide better interactive default.

2006-03-06  Kenichi Handa  <handa@m17n.org>

	* international/fontset.el (create-fontset-from-fontset-spec):
	Fix regexp for paring FONTSET-SPEC (allow spaces after `:').

2006-03-05  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/gud.el (gud-jdb-marker-filter): Quote `[' with two
	backslashes instead of one in regexp.
	(gud-tooltip-dereference): Add missing optional argument.

2006-03-04  John Paul Wallington  <jpw@pobox.com>

	* wdired.el (toplevel): Require `cl' at compile-time.

2006-03-04  Andreas Schwab  <schwab@suse.de>

	* server.el (server-process-filter): Handle errors during
	evaluation of the argument.

2006-03-03  John Paul Wallington  <jpw@pobox.com>

	* t-mouse.el (t-mouse-drag-start, t-mouse-swap-alt-keys): Doc fix;
	escape parentheses at beginning of line.
	(t-mouse-tty, t-mouse-make-event): Doc fix; use imperative.
	(t-mouse-mode): Remove period from end of error message.

2006-03-03  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-process-localwords):
	Be case-sensitive.

2006-03-03  Martin Rudalics  <rudalics@gmx.at>

	* cus-edit.el (custom-quote): Remove function, since it has been
	moved to custom.el.

	* font-lock.el (lisp-font-lock-keywords-2)
	* emacs-lisp/rx.el (rx-check-any, rx-check-not)
	* generic-x.el (reg-generic-mode): Quote "]"s in regexps when
	they have no special meaning.

	* midnight.el (clean-buffer-list): Handle case where base-buffer of
	indirect buffer gets killed before indirect buffer.  Use dolist.

2006-03-03  Ken Manheimer  <ken.manheimer@gmail.com>

	* emacs-lisp/edebug.el (edebug-display): Use `edebug-sit-for-seconds'
	value instead of a literal constant (1) on more pauses.

2006-03-03  Slawomir Nowaczyk  <slawomir.nowaczyk.847@student.lu.se>  (tiny change)

	* textmodes/flyspell.el (flyspell-external-point-words):
	Be case-sensitive.

2006-03-03  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-url-regexp): Match entire url when it starts
	with "www".

2006-03-03  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Restablish intermediate missing comment header to
	preserve outline structure.
	(allout-beginning-of-current-entry): Skip invisible text.
	(allout-open-topic): Fix opening a topic at end-of-buffer.
	(allout-minor-mode): Move nearer to allout-mode function.

2006-03-02  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-paste-subtree): Remove (debug) form.

2006-03-02  Nick Roberts  <nickrob@snap.net.nz>

	* dframe.el (dframe-frame-mode): Don't burp when menu-bar-lines
	is nil.

	* progmodes/gud.el (gud-speedbar-menu-items):
	Use buffer-local-value and add missing :visible keyword.

	* progmodes/gdb-ui.el (gdb-speedbar-refresh): Quieten speedbar-refresh.

2006-03-01  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-index.el (reftex-index-map): `follow-mouse'
	must be `follow-link'.

	* textmodes/reftex-toc.el (reftex-toc-map): Likewise.

	* textmodes/org.el (org-export-as-html): Fix bugs in HTML
	formatting: No nested anchors.
	(org-all-targets): Fix bug with XEmacs compatibility.
	(org-read-date): Add (require 'parse-time).
	(org-set-tags): Fix bug with extra inserted space.
	(org-export-html-style): Define a style class for targets.
	(org-agenda-keymap, org-mouse-map): Add a binding for `follow-link'.
	(org-hide-leading-stars): New option.
	(org-hide): New face.
	(org-set-font-lock-defaults): Allow to hide leading stars.
	(org-get-legal-level, org-tr-level): New functions.
	(org-odd-levels-only): New option.
	(org-level-faces, org-paste-subtree, org-convert-to-odd-levels)
	(org-demote, org-promote): Deal with double-star levels.
	(org-convert-to-odd-levels): New command.

2006-03-01  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-update-localized-contents): Try to
	preserve window-start.
	(speedbar-update-directory-contents): Try to preserve window-start
	and window-point.
	(speedbar-update-special-contents): Don't move back to start of window.

	* progmodes/gdb-ui.el (gdb-speedbar-refresh): Rename from
	gdb-speedbar-timer-fn.  Use speedbar-refresh instead of
	speedbar-timer-fn.
	(gdb-var-update-handler, gdb-var-update-handler-1): Use it.
	(gdb-speedbar-expand-node): Use speedbar-delete-subblock
	instead of gdb-speedbar-timer-fn.

2006-02-28  Jay Belanger  <belanger@truman.edu>

	* calc/calccomp.el (math-compose-tex-matrix): Add a latex option.
	(math-compose-expr): Use latex option when calling
	`math-compose-tex-matrix' for latex mode.

2006-02-28  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el: Re-instate comments about developing for speedbar
	[this is what info and gdb-ui use even if better methods exist now].

	* t-mouse.el: New file.
	(t-mouse-tty): Use with-temp-buffer.  Add more terminal types.
	(t-mouse-lispy-buffer-posn-from-coords): Remove.
	(t-mouse-make-event-element): Use posn-at-x-y instead.
	(t-mouse-make-event): Deal with Fedora Core 3.
	(t-mouse-make-event): Don't sink the `stupid text mode menubar'.
	(t-mouse-mouse-position-function): New function.  Use it instead
	of advising mouse-position.
	(t-mouse-mode): New minor mode.
	(t-mouse-stop, t-mouse-run): Remove.  Use t-mouse-mode instead.

2006-02-27  Glenn Morris  <rgm@gnu.org>

	* calendar/calendar.el (calendar-holidays): Doc fix.

2006-02-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-source-window): New variable.
	Re-introduce the concept of a source window.
	(gdb-get-buffer-create): Rename from gdb-get-create-buffer for
	consistency with get-buffer-create.
	(def-gdb-auto-update-handler, gdb-info-locals-handler)
	(gdb-data-list-register-values-handler)
	(gdb-stack-list-locals-handler): Try to preserve window-start as
	well as window-point.
	(gdb-display-source-buffer): New function (old concept).
	(gdb-goto-breakpoint): Use it.

	* progmodes/gud.el (gud-display-line): Use gdb-display-source-buffer
	for gdb-ui/gdb-mi (old concept).

2006-02-27  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-index.el (reftex-index-map): Add `follow-mouse'
	binding.

	* textmodes/reftex-toc.el (reftex-toc-map): Add `follow-mouse' binding.

	* textmodes/reftex-sel.el (reftex-select-label-map)
	(reftex-select-bib-map): Add `follow-mouse' binding.

2006-02-26  Luc Teirlinck  <teirllm@auburn.edu>

	* jka-cmpr-hook.el (jka-compr-compression-info-list)
	(jka-compr-mode-alist-additions, jka-compr-load-suffixes):
	Give :set functions to provide automatic updating.
	Update docstring.  Give compiler defvars early in the file
	and move the defcustoms to a later spot where all called functions
	are defined.
	(jka-compr-file-name-handler-entry): Doc fix.
	(jka-compr-compression-info-list--internal)
	(jka-compr-mode-alist-additions--internal)
	(jka-compr-load-suffixes--internal): New variables.
	(jka-compr-install): Set the three above variables.
	Update `load-file-rep-suffixes' instead of `load-suffixes'.
	(jka-compr-update, jka-compr-set): New functions.
	(auto-compression-mode): Doc fix.

	* jka-compr.el (jka-compr-uninstall): Replace `mapcar' with `mapc'.
	Update `load-file-rep-suffixes' instead of `load-suffixes'.
	Use jka-compr-compression-info-list--internal,
	jka-compr-mode-alist-additions--internal and
	jka-compr-load-suffixes--internal.

	* files.el (load-library):
	* loadhist.el (file-loadhist-lookup):
	* startup.el (command-line):
	* subr.el (locate-library):
	* emacs-lisp/autoload.el (update-directory-autoloads):
	* emacs-lisp/find-func.el (find-library-suffixes):
	Use `get-load-suffixes' instead of `load-suffixes'.

	* subr.el (locate-library):
	* emacs-lisp/find-func.el (find-library-name):
	Use `load-file-rep-suffixes' instead of '("").

2006-02-26  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-save-history, ido-load-history): Simplify.
	Don't use find-file-noselect to avoid interference from other modes.

2006-02-25  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/sh-script.el (sh-mode): Fix bug: Arrange
	to use the default shell if filename is not available.
	Reported by Giorgos Keramidas.

2006-02-25  John Williams  <jrw@pobox.com>  (tiny change)

	* progmodes/etags.el (tags-completion-table): Do completion from
	all the tables in the current list, as documented in the manual.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* CC Mode Update to 5.31.3.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el (c-postprocess-file-styles):
	Bind inhibit-read-only to t, around the call to
	c-remove-any-local-eval-or-mode-variables, so that it works on a
	RO file.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-awk.el: Correct a typo.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, cc-mode.el: Rename c-hungry-backspace to
	c-hungry-delete-backwards, at the request of RMS.  Leave the old
	name as an alias.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el: Correct a typo.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-defs.el: Update the version number to 5.31.3.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-brace): Fix clean-up
	brace-else-brace (error due to mbeg, mend being undefined).

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el: File Local variables: Solve the problem
	where both `mode' and c-file-offsets are specified: `mode' will
	overwrite c-f-o's settings:
	(c-remove-any-local-eval-or-mode-variables): New function.
	(c-postprocess-file-styles): Call the above new function, within
	c-tentative-buffer-change, to splat `mode' and `eval' before the
	second hack-local-variables.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el:
	[Supersedes patch to cc-engine.el V 1.45]
	(c-after-change): Protect the match data with save-match-data.
	It was getting corrupted by c-after-change-check-<>-operators.

	* progmodes/cc-defs.el: [Supersedes patch V1.38]:
	(top level): Check for a buggy font-lock-compile-keywords ONLY in
	XEmacs.  GNU Emacs 22 now has a check which would throw an error here.

	* progmodes/cc-awk.el (c-awk-after-change): Protect the match data
	with save-match-data.  It was being corrupted when Font Lock was
	not enabled.

2006-02-24  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-langs.el (c-mode-menu): Add menu items for Electric
	Mode and Subword Mode.

	* progmodes/cc-engine.el (c-beginning-of-statement-1): Distinguish
	real labels ("case 1:" or "foo:") from non-labels ("public:").
	(c-forward-objc-directive): Replace c-forward-token-2 with crude
	coding; c-f-t-2 doesn't move over a token at EOB.

	* progmodes/cc-defs.el (c-version): Update version number to 5.31.2.

	* progmodes/cc-cmds.el, cc-mode.el, cc-engine.el
	(c-update-modeline): Concatenate the minor mode indicators
	directly onto mode-name, removing c-submode-indicators.
	Sometimes, c-s-i got separated from the mode name on the mode line.

	* progmodes/cc-cmds.el (c-electric-brace, c-electric-semi&comma)
	(c-electric-colon): Correct doc-strings: "/ln" -> "/la".

2006-02-24  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-langs.el (c-make-init-lang-vars-fun): Improve the
	error message when there's an evaluation error to show whether
	it's loaded from source or not.
	(c-filter-ops): Make it available at runtime too to work when
	`c-make-init-lang-vars-fun' needs to evaluate from source.

2006-02-24  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (help): Revert last part of 2006-02-23 change (deletion
	of the `provide' call).

2006-02-23  Juri Linkov  <juri@jurta.org>

	* compare-w.el (compare-windows-highlight): Add new value
	`persistent' and change :type from `boolean' to `choice'.
	(compare-windows-overlays1, compare-windows-overlays2):
	New internal variables.
	(compare-windows-highlight): If compare-windows-highlight is
	`persistent', add current overlays to compare-windows-overlays[12]
	instead of adding compare-windows-dehighlight to pre-command-hook.
	(compare-windows-dehighlight): Delete all overlays from
	compare-windows-overlays[12].

	* info.el (Info-search): Don't bind search-spaces-regexp to
	Info-search-whitespace-regexp in non-regexp isearch mode.

2006-02-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (describe-mode): Pass `mode-name' to format-mode-line.

2006-02-23  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/org.el (org-xemacs-p)
	(org-export-html-show-new-buffer, org-table-may-need-update)
	(org-insert-item, org-mhe-get-message-real-folder)
	(org-mhe-get-message-folder-from-index)
	(org-mhe-get-message-folder, org-mhe-get-message-num)
	(org-mhe-get-header, org-make-org-heading-search-string)
	(org-make-org-heading-camel, org-table-sort-lines)
	(org-format-org-table-html, org-format-table-table-html):
	Fix typos in docstrings.

2006-02-23  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-cleaned-string-for-export)
	(org-solidify-link-text): New function.
	(org-add-hook): Use `add-local-hook' instead of `make-local-hook' for
	XEmacs, just to silence the compiler.
	(org-export-as-ascii, org-export-as-html-and-open):
	Use `org-cleaned-string-for-export' and create internal links.
	(org-follow-mhe-link): Require mh-e, use folder.

2006-02-23  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Use shadow face properly.

	* progmodes/gdb-ui.el (gdb-debug-ring-max): Rename from
	gdb-debug-log-length.
	(gdb-debug-ring): Rename from gdb-debug-log-ring.  Don't make
	it a real ring but...
	(gud-gdba-marker-filter): ...make it work like mark-ring.
	(gdb-enable-debug): Rename from gdb-enable-debug-log.
	(gdb-mouse-jump): New function.  Add bindings.

2006-02-23  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-signalled): New variable and function.
	(gdb-debug-log-ring): Rename from gdb-debug-log and make a ring.
	(gdb-send, gdb-send-item, gud-gdba-marker-filter): Use it.
	(gdb-debug-log-length): Customize it's length.
	(gud-watch, gdb-var-create-handler): Display function::var format
	but don't use to create variable object.
	(gdb-var-create-handler): Use message-box in place of message.
	(gdb-stopped): Call gdb-exited if signaled.

2006-02-22  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-locate-file): Remove duplicate function.

	* textmodes/reftex-vars.el (reftex-try-all-extensions): New option.

	* textmodes/reftex.el (reftex-locate-file): Search all extensions
	if `reftex-try-all-extensions' is set.

	* textmodes/reftex-dcr.el (reftex-view-crossref): New argument to
	fail silently when there is no valid argument at point.
	(reftex-view-crossref-when-idle): Call `reftex-view-crossref' with
	`fail-silently' argument.  From a patch by David Reiter.

	* textmodes/org.el (org-mark-ring-push, org-mark-ring-goto):
	New commands.
	(org-mark-ring): New variable.
	(org-mark-ring-length): New option.
	(org-open-at-point, org-goto, org-open-file): Push old position
	onto the mark ring.
	(org-add-hook): New function.
	(org-export-table-remove-special-lines): New option.
	(org-skip-comments, org-format-org-table-html): Respect new
	option `org-export-table-remove-special-lines'.
	(org-open-file): Allow special command configuration for
	directory link.
	(org-file-apps): Fix bugs in customize type, added setting
	for directories.
	(org-activate-tags, org-format-agenda-item, org-complete)
	(org-get-tags-at, org-scan-tags, org-make-tags-matcher)
	(org-get-tags, org-get-buffer-tags, org-open-at-point)
	(org-link-search, org-make-org-heading-search-string)
	(org-make-org-heading-camel): Allow @ and 0-9 as tags characters.
	(org-radio-targets, org-file-link-context-use-camel-case)
	(org-activate-camels): New options.
	(org-update-radio-target-regexp, org-all-targets)
	(org-make-target-link-regexp, org-activate-target-links):
	New functions.
	(org-make-org-heading-search-string): New function.
	(org-store-link, org-insert-link): Use new option
	`org-file-link-context-use-camel-case'.
	(org-activate-camels): Use new option `org-activate-camels'.
	(org-link-regexp): Add mhe prefix.
	(org-open-at-point, org-store-link): Support for mhe links.
	(org-mhe-get-message-real-folder, org-mhe-get-message-folder)
	(org-mhe-get-message-folder-from-index, org-mhe-get-message-num)
	(org-mhe-get-header, org-follow-mhe-link): New functions.
	(org-remove-angle-brackets, org-add-angle-brackets):
	New functions.
	(org-bracket-link-regexp): New constant.
	(org-read-date): Fix bug that was rejecting all typed dates.
	(org-link-search): Make hierarchy above visible after a match.
	(org-follow-bbdb-link): Inhibit electric mode for BBDB.
	(org-store-link): Fix bug with link creation when cursor is in
	an empty line.
	(org-open-at-point): Fix bug with matching a link.
	Fixed buggy argument sequence in call to `org-view-tags'.
	(org-compile-prefix-format): Set `org-prefix-has-tag'.
	(org-prefix-has-tag): New variable.
	(org-format-agenda-item): Remove tags from headline
	if appropriate.
	(org-agenda-remove-tags-when-in-prefix): New option.

2006-02-21  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-setup-diff-regions, ediff-setup-diff-regions3):
	Fix the regular expressions.

2006-02-21  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-mode): Set shell type based on file name
	if there's no other specific basis.

	* emacs-lisp/unsafep.el (unsafep): Don't treat &rest or &optional
	as variables at all.
	(unsafep-variable): Rename arg; doc fix.

	* abbrevlist.el (list-one-abbrev-table): Add autoload.

	* calendar/appt.el (diary-selective-display): Add defvar.

	* sort.el (sort-columns): Use Posix arg syntax for `sort'.

	* isearch.el (search-whitespace-regexp): Fix custom type.

	* help.el (describe-key-briefly): Compute interactive args
	in same was as before previous change.

	* files.el (enable-local-variables): Doc fix.

2006-02-21  Kim F. Storm  <storm@cua.dk>

	* fringe.el: Cleanup as file is now pre-loaded.
	(fringe-bitmaps): Initialize unconditionally.
	(fringe-mode, set-fringe-style): Remove autoload cookies.

2006-02-21  Giorgos Keramidas  <keramida@ceid.upatras.gr>  (tiny change)

	* fringe.el (fringe-bitmaps): Rename `horisontal-bar' to
	`horizontal-bar'.
	(fringe-cursor-alist): Use `horizontal-bar'.

2006-02-20  Kim F. Storm  <storm@cua.dk>

	* fringe.el (fringe-bitmaps): Update to new bitmap names.
	(fringe-indicator-alist, fringe-cursor-alist): Initialize.

	* loadup.el: Load "fringe" on window systems.

2006-02-20  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Use shadow face for all
	out of scope components.

	* progmodes/gdb-ui.el (gdb-speedbar-auto-raise): Don't enable by
	default.

2006-02-20  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (customize-mark-to-save, customize-mark-as-set):
	Load the symbol first.

2006-02-20  Juanma Barranquero  <lekktu@gmail.com>

	* buff-menu.el (list-buffers-noselect): Turn also "\n" into a
	stretch spec so it doesn't display as "^J" on the header line
	when `Buffer-menu-use-header-line' is t.

2006-02-20  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-make-button): Keep text properties
	of string arguments if desired.

	* progmodes/gud.el (gud-speedbar-buttons): Fontify watch
	expressions.

	* progmodes/gdb-ui.el (gdb-speedbar-expand-node): Force update
	of speedbar.

2006-02-19  Ryan Yeske  <rcyeske@gmail.com>

	* ffap.el (ffap-read-file-or-url): Bind `completion-ignore-case'
	to value of `read-file-name-completion-ignore-case'.

2006-02-19  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (customize-mark-as-set): Push to `user' theme.

	* cus-edit.el (custom-save-variables): Allow unthemed values.
	(customize-set-variable): Push setting to `user' theme.

2006-02-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el: Don't require font-lock as it's now
	automatically loaded.
	(gud-speedbar-buttons): Replace gdb-var-changed with
	gdb-force-update.

	* progmodes/gdb-ui.el (gdb-force-update): Rename from
	gdb-var-changed.
	(gdb-post-prompt): Use it.
	(gdb-var-create-handler, gdb-var-evaluate-expression-handler)
	(gdb-var-update-handler, gdb-var-delete)
	(gdb-speedbar-expand-node, gdb-var-list-children-handler-1)
	(gdb-var-update-handler-1): Don't set gdb-var-changed, just set
	gdb-force-update in gdb-post-prompt.
	(gdb-reset): Clear watch expressions from speedbar when quitting.

2006-02-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-insert-state-post-command-sentinel)
	(viper-change-state-to-vi, viper-change-state-to-emacs):
	Make aware of cursor coloring in the Emacs state.
	(viper-special-read-and-insert-char): Use read-char-exclusive.
	(viper-minibuffer-trim-tail): Workaround for fields in minibuffer.

	* emulation/viper-init.el (viper-emacs-state-cursor-color):
	New variable.

	* emulation/viper-util.el (viper-save-cursor-color)
	(viper-get-saved-cursor-color-in-replace-mode)
	(viper-get-saved-cursor-color-in-insert-mode)
	(viper-restore-cursor-color): Make aware of the cursor color
	in Emacs state.
	(viper-get-saved-cursor-color-in-emacs-mode): New function.

	* ediff-diff.el (ediff-ignore-case, ediff-ignore-case-option)
	(ediff-ignore-case-option3, ediff-actual-diff-options)
	(ediff-actual-diff3-options): New variables to control case sensitivity.
	(ediff-make-diff2-buffer, ediff-setup-fine-diff-regions)
	(ediff-setup-diff-regions3): Make aware of case-sensitivity.
	(ediff-toggle-ignore-case): New function.
	(ediff-extract-diffs, ediff-extract-diffs3): Preserve point in buffers.

	* ediff-help.el (ediff-long-help-message-narrow2)
	(ediff-long-help-message-compare2, ediff-long-help-message-compare3)
	(ediff-long-help-message-word-mode): Add ignore-case command.
	(ediff-help-for-quick-help): Add ignore-case command.

	* ediff-merg.el: Move provide to the end.

	* ediff-ptch.el: Move provide to the end.

	* ediff-wind.el: Move provide to the end.

	* ediff-mult.el: Move provide to the end.
	(ediff-set-meta-overlay): Enable follow-link.

	* ediff.el: Move provide to the end.
	Break recursive load cycle in eval-when-compile.
	(ediff-patch-buffer): Better heuristics.

	* ediff-util.el: Move provide to the end.
	Break recursive load cycle in eval-when-compile.
	(ediff-setup-keymap): Add binding for #c.  Replace some defsubsts with
	defuns.
	(ediff-submit-report): Pass the values of ediff-diff3-program,
	ediff-diff3-options.

2006-02-19  Juanma Barranquero  <lekktu@gmail.com>

	* help-fns.el (help-do-arg-highlight): Recognize also ARG- followed by
	the opening bracket of the following bracketing pairs: {}, [], (), <>,
	`' (for example, in the docstring of `windmove-default-keybindings').

2006-02-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Update properly for
	shadow face.  Don't provide binding to edit variable when it is
	out of scope.

	* progmodes/gdb-ui.el (gdb-var-evaluate-expression-handler)
	(gdb-var-update-handler): Detect out of scope variables with pre
	GDB 6.4 too.
	(gdb-post-prompt): Revert change from 2006-02-17 (force update).
	Reset status of variable objects to nil in update handlers.
	(gdb-var-update-handler-1): Detect when a variable object comes
	in scope.  setcar on var changes gdb-var-list directly.

2006-02-17  Juri Linkov  <juri@jurta.org>

	* ffap.el (ffap) <defface>: Add explicit face declaration.
	(ffap-highlight): Use face `ffap' directly instead of checking
	for its existence.

	* icomplete.el (icomplete-get-keys): Use `t' for the second arg
	`visible-ok' of `other-buffer' to find the right original buffer.

	* info.el (Info-search): Skip `Local Variables' node.

2006-02-17  Juri Linkov  <juri@jurta.org>

	* info.el (Info-find-file): Check for symbols `apropos', `history',
	`toc' in the input filename, and return these symbols as is.
	(Info-find-node-2): Set Info-current-file to symbols `apropos',
	`history', `toc' instead of strings.
	(Info-set-mode-line): For non-string Info-current-file use the
	symbol's name inside **.
	(Info-isearch-push-state): Add quote before Info-current-file and
	Info-current-node.
	(Info-isearch-pop-state): Use `equal' instead of `string='.
	(Info-extract-pointer, Info-following-node-name): Use
	`match-string-no-properties' instead of `match-string'.
	(Info-up): Check `old-file' for `stringp'.
	(Info-history): Use `equal' instead of `string-equal'.
	Check `file' for `stringp'.
	(Info-history): Use symbol `history' instead of string as first arg
	of `Info-find-node'.
	(Info-toc): Check `Info-current-file' for `stringp'.  Use symbol
	`toc' instead of string.
	(Info-extract-menu-node-name): Use `buffer-substring-no-properties'
	instead of `buffer-substring', and `match-string-no-properties'
	instead of `match-string'.
	(Info-index-nodes): Check for symbols `apropos', `history', `toc'
	instead of strings.
	(info-apropos): Use `Info-find-node' instead of `Info-goto-node'.
	Use symbol `apropos' instead of string.
	(Info-copy-current-node-name): Check `Info-current-file' for
	`stringp' and construct a command with `Info-find-node' from it.
	(Info-fontify-node): Use `match-string-no-properties' instead of
	`match-string' and check file names for `stringp'.
	(Info-desktop-buffer-misc-data): Check for symbols `apropos',
	`history', `toc' instead of strings.

2006-02-17  Chong Yidong  <cyd@stupidchicken.com>

	* files.el: Rearrange functions and variables in the file local
	variables section.

2006-02-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el: Add truncate-lines, ispell-check-comments and
	ispell-local-dictionary as safe local variables.

2006-02-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons): Use shadow face for
	out of scope variables.
	(gud-speedbar-buttons): Use unless.

	* progmodes/gdb-ui.el (gdb-var-list): Update doc string.
	(gdb-init-1, gdb-var-changed): Set gdb-var-changed to t initially.
	(gdb-show-changed-values): Also use for out of scope variables.
	(gdb-var-update-handler-1): Note if variable goes out of scope.

2006-02-17  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-connect): Make all arguments optional, and
	default to global variable values for unsupplied args.
	(rcirc-get-buffer-create): Fix bug with setting the target.
	(rcirc-any-buffer): Rename from rcirc-get-any-buffer, and include
	test for rcirc-always-use-server-buffer-flag here.
	(rcirc-response-formats): Add %N, which is a facified nick.  %n
	uses the default face.  Change the ACTION format string.  If the
	"nick" is the server, don't print anything for that field.
	Comment fixes.
	(rcirc-target-buffer): Don't test
	rcirc-always-use-server-buffer-flag here.
	(rcirc-print): Squeeze extra spaces out of the text before message.
	(rcirc-put-nick-channel): Strip potential "@" char from nick
	before adding them to nick table.
	(rcirc-url-regexp): Improve to match address like "foo.com".

2006-02-17  Eli Zaretskii  <eliz@gnu.org>

	* allout.el (allout-hidden-p): Move this defsubst before
	allout-overlay-interior-modification-handler, where it is first
	used.

2006-02-17  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Use allout invisible-text overlays instead of
	selective display for concealed text.  Also, lots of general
	cleanup, and improved compatibility code.

	(allout-version): Incremented, corrected, revised, and refined
	module commentary.

	(provide 'allout): Moved to the bottom, added a require of overlay.

	(allout-encrypt-unencrypted-on-saves): Defaults to t instead of
	`except-current'.
	(allout-write-file-hook-handler): Minimize delay.
	(count-trailing-whitespace-region): New function so
	auto-encryption of current topic can resituate cursor exactly.
	PGP/GPG encryption trims trailing whitespace from lines, which
	must be accounted for across encryption then decryption.

	(allout-command-prefix): Now defaults to "\C-c<space>" rather than
	just plain "\C-c", to avoid intruding on user's keybinding space.

	(allout-toggle-current-subtree-encryption): Pass along fetch-pass
	parameter, so user request to provide a new password is done.

	(allout-outside-normal-auto-fill-function, allout-auto-fill):
	Refined mechanism for auto-filling behavior while in allout mode.

	(allout-mode): Explicitly specify the mode map in the docstring.
	Clarify provision for various write-file hook var names.
	Adjusted for invisible-text overlays instead of selective-display.

	(allout-depth): Really return 0 if not within any topic.  This
	rectifies `allout-beginning-of-level' and sequence numbering
	errors that occur when cutting and pasting numbered topics.
	Changed from a in-line subst to a regular function, as well.

	(allout-pre-next-prefix): Renamed from allout-pre-next-preface.

	(allout-end-of-subtree, allout-end-of-subtree)
	(allout-end-of-entry, allout-end-of-current-heading)
	(allout-next-visible-heading, allout-open-topic, allout-show-entry)
	(allout-show-children, allout-show-to-offshoot)
	(allout-hide-current-entry, allout-show-current-entry): Rectified
	handling of trailing blank lines between items.

	(allout-line-boundary-regexp, set-allout-regexp, allout-depth)
	(allout-current-depth, allout-unprotected, allout-hidden-p)
	(allout-on-current-heading-p, allout-listify-exposed)
	(allout-chart-subtree, allout-goto-prefix)
	(allout-back-to-current-heading, allout-get-body-text)
	(allout-snug-back, allout-flag-current-subtree, allout-show-all)
	(allout-hide-region-body, allout-toggle-subtree-encryption)
	(allout-encrypt-string, allout-encrypted-key-info)
	(allout-next-topic-pending-encryption, allout-encrypt-decrypted)
	(allout-file-vars-section-data): Adjusted for use with
	invisible-text overlays instead of selective-display.

	(allout-kill-line, allout-kill-topic, allout-yank-processing):
	Reworked for use with invisible text overlays.

	(allout-current-topic-collapsed-p): New function.

	(allout-hide-current-subtree): Use allout-current-topic-collapsed-p
	to know when to close the containing topic.

	(allout-pre-command-business, allout-post-command-business):
	Simplify undo-batching and dynamic isearch exposure.

	(allout-set-overlay-category): New for invisible-text overlays.
	Sets properties of allout-overlay-category, used by
	allout-flag-region to set invisible-text overlay properties.
	(allout-get-invisibility-overlay): Get the first qualifying
	invisibility overlay, so we can find the extent of it.
	(allout-back-to-visible-text): Get to just before the beginnining
	of the current invisibility overlay, if any.

	(allout-overlay-insert-in-front-handler)
	(allout-overlay-interior-modification-handler)
	(allout-before-change-handler, allout-isearch-end-handler): New
	functions to handle extraordinary actions affecting concealed
	text.

	(allout-flag-region): Use overlays instead of selective-display
	for invisible text - by inheritance from the properties of
	allout-overlay-category in mainline Emacs, and applied
	property-by-property in XEmacs, some recent versions of which
	don't inherit the properties from the category.  Provisions to
	respond to concealed-text edits simplified drastically.

	(allout-isearch-rectification, allout-isearch-was-font-lock)
	(allout-isearch-expose, allout-enwrap-isearch)
	(allout-isearch-abort, allout-pre-was-isearching)
	(allout-isearch-prior-pos, allout-isearch-did-quit)
	(allout-isearch-dynamic-expose)
	(allout-hide-current-entry-completely): Functions deleted.

	(allout-undo-aggregation): Explicit undo aggregation no longer
	necessary due to transition away from selective-display.

	(set-allout-regexp, allout-up-current-level)
	(allout-next-visible-heading, allout-forward-current-level)
	(allout-open-topic, allout-reindent-body, allout-rebullet-topic)
	(allout-kill-line, allout-yank-processing, allout-show-children)
	(allout-expose-topic, allout-old-expose-topic)
	(allout-listify-exposed, allout-insert-latex-header)
	(allout-toggle-subtree-encryption, allout-encrypt-string)
	(remove-from-invisibility-spec, allout-hide-current-subtree):
	Ditched unused variables.

2006-02-17  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el (ispell-change-dictionary): Call
	ispell-buffer-local-dict instead of
	ispell-accept-buffer-local-defs.
	(ispell-local-dictionary-alist): Accept as valid any coding-system
	supported by Emacs.
	(ispell-dictionary-alist-3): Esperanto dictionary's coding system
	changed to iso-8859-3.

2006-02-17  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-frame-width): Make an inline function
	instead of a macro.  Use frame-width.
	(speedbar-try-completion, speedbar-update-contents)
	(speedbar-timer-fn): Use consp.
	(speedbar-update-localized-contents): Try to preserve point.

	* progmodes/gdb-ui.el (gdba, gdb-var-list): Improve doc strings.
	(menu): Re-order menu items.
	(gdb-var-update-regexp, gdb-var-update-regexp-1): Match "in_scope"
	field.
	(gdb-var-update-handler-1): Use it for GDB 6.4+.
	(gdb-post-prompt): Speed things by not forcing update.

2006-02-16  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-button-click): For mouse-1, cancel button
	press and perform default action if we get a mouse movement event.

2006-02-16  Juanma Barranquero  <lekktu@gmail.com>

	* calendar/icalendar.el (icalendar--get-event-property)
	(icalendar--get-event-property-attributes): Fix typos in
	docstrings.

	* progmodes/flymake.el (flymake-fix-file-name): Fix typo in
	docstring.

2006-02-15  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs-mode): Use `buffer-disable-undo'.
	(bs--get-file-name): Simplify.
	(bs-show-in-buffer): Mark the buffer as not modified.

2006-02-14  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-keymap): Bind down-mouse-1 to
	widget-button-click.

	* cus-edit.el (custom-mode-map): Remove mouse-1 binding.
	(custom-mode): Update docstring.

	* cus-theme.el (custom-new-theme-mode-map): Remove mouse-1
	binding.

	* files.el (hack-local-variables-confirm): Allow scrolling if the
	file variable list is too long.  Kill temp buffer after use.

2006-02-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): Improve doc string.
	(gdb-script-font-lock-keywords): Expand allowed character set.

	* progmodes/gdb-ui.el (gdb-use-separate-io-buffer)
	(gdb-display-separate-io-buffer, gdb-frame-separate-io-buffer)
	(gdb-separate-io-interrupt, gdb-separate-io-quit)
	(gdb-separate-io-stop, gdb-separate-io-eof):
	Rename from gdb-inferior-* to gdb-separate-*.
	(gdb-set-gud-minor-mode-existing-buffers-1): Improve doc string.

2006-02-14  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-check-known-scalarp): Make sure
	expression is a symbol before checking that it is bound.

	* calc/calcalg2.el (math-integrate-by-parts): Do a more careful
	test to see if equation can be solved.

2006-02-14  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-button-click): Use :pressed-face property
	for overlay face, if it exists.

	* cus-edit.el (custom-manual, custom-add-see-also)
	(custom-add-parent-links, custom-group-link): Add :pressed-face
	property to links.

	* files.el (hack-local-variables): Remove ignored variables before
	checking if any variables need setting.

2006-02-14  Jan Djärv  <jan.h.d@swipnet.se>

	* cus-start.el (all): Add x-gtk-whole-detached-tool-bar.

2006-02-14  Juanma Barranquero  <lekktu@gmail.com>

	* help.el (where-is): Fix message for remapped commands.

	* mwheel.el (mouse-wheel-click-event, mouse-wheel-mode):
	Fix typos in docstrings.

2006-02-13  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (safe-local-variable-values): New option.
	(hack-local-variables-prop-line): Return a list of variable-value
	pairs if MODE-ONLY is non-nil.
	(hack-local-variables): Construct list of variable-value pairs,
	and apply or reject them in one go.  Ask for confirmation if
	variables are not known safe.
	(hack-local-variables-confirm): Complete rewrite.  Support
	`safe-local-variable-values'.
	(enable-local-variables): Update docstring to reflect new
	behavior.
	(ignored-local-variables): Ignore ignored-local-variables and
	safe-local-variable-values.
	(safe-local-variable-p): New function.
	(risky-local-variable-p): `safe-local-variable' property check
	moved to safe-local-variable-p.
	(hack-one-local-variable): Checks moved to hack-local-variables.

	(byte-compile-dynamic, c-basic-offset, c-file-style)
	(c-indent-level, comment-column, fill-column, fill-prefix)
	(indent-tabs-mode, kept-new-versions, no-byte-compile)
	(no-update-autoloads, outline-regexp, page-delimiter)
	(paragraph-start, paragraph-separate, sentence-end)
	(sentence-end-double-space tab-width, version-control):
	Add `safe-local-variable' property.

	* find-lisp.el: Delete nonexistent `autocompile' file variable.

	* icomplete.el, play/landmark.el: Change nonexistent
	`outline-layout' file variable to `allout-layout'.

2006-02-14  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gud-watch, gdb-invalidate-registers-1)
	(gdb-get-changed-registers): Test value of gud-minor-mode relative
	to gud-comint-buffer.
	(gdb-speedbar-expand-node, gdb-locals-mode): Use functions in
	gdb-ui.el for gdb-mi.el.
	(gdb-post-prompt, gdb-get-changed-registers): Move test for
	registers buffer to gdb-get-changed-registers.
	(gdb-breakpoint-regexp): New regexp.  Allow toggling and
	deletion of catchpoints (throw and catch).
	(gdb-toggle-breakpoint, gdb-delete-breakpoint)
	(gdb-goto-breakpoint): Use it for both gdb-ui and gdb-mi.
	(gdb-find-file-hook, gdb-set-gud-minor-mode-existing-buffers-1)
	(gdb-var-list-children-1, gdb-info-breakpoints-custom)
	(gdb-var-update-1, gdb-invalidate-locals-1): Use also for gdb-mi.

2006-02-13  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-check-known-matrixp): Make sure
	expression is a symbol before checking that it is bound.

2006-02-13  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-mode-line-1): Use mouse-drag-move-window-bottom
	for the minibuffer too, but not if resize-mini-windows will interfere.

	* help.el (describe-key-briefly, describe-key): Do all arg-reading
	inside `interactive' spec.
	(describe-key-briefly-internal, describe-key-internal):
	Functions merged back into their callers.

2006-02-13  Martin Rudalics  <rudalics@gmx.at>

	* info.el (info-xref-visited): Inherit from info-xref too.
	(Info-set-mode-line): Replace occurrences of `%' by `%%'
	when propertizing Info-current-file and Info-current-node.

2006-02-13  Juri Linkov  <juri@jurta.org>

	* tumme.el (tumme-thumbnail-storage): Fix docstring.
	(tumme-thumb-name): Fix per-directory format.

2006-02-13  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (substitute-key-definition): Doc fix (hide internal arg).

2006-02-12  Miles Bader  <miles@gnu.org>

	* net/rcirc.el (rcirc-format-response-string): Fix small bugs.

2006-02-13  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el: Remove history section.  If someone needs it, it can
	always be found in CVS.

2006-02-12  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-thumbnail-storage): Update docstring.  Add info
	about the Thumbnail Managing Standard option.

2006-02-12  Richard M. Stallman  <rms@gnu.org>

	* subr.el (substitute-key-definition): Doc fix.

	* simple.el (blink-matching-paren-dont-ignore-comments): Doc fix.

	* files.el (magic-mode-alist): Don't use `\\s ' in regexps.

	* info.el (Info-mode): Doc fix.

	* progmodes/ebrowse.el (ebrowse-global-prefix-key): Change to C-c C-m.

2006-02-12  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-remote-path): Add "/usr/xpg4/bin" on top,
	because on Solaris a POSIX compatible "id" is needed.  Reported by
	Magnus Henoch <mange@freemail.hu>.

2006-02-12  Juri Linkov  <juri@jurta.org>

	* tumme.el: Remove todo item about Thumbnail Managing Standard.
	(tumme) <defgroup>: Change :group to `multimedia'.
	(tumme-thumbnail-storage): Add choice `standard' for Thumbnail
	Managing Standard.
	(tumme-cmd-create-thumbnail-options): Use %w and %h instead of %s.
	Fix docstring.
	(tumme-cmd-create-temp-image-options): Use %w and %h instead of %x
	and %y.  Fix docstring.
	(tumme-cmd-pngnq-program, tumme-cmd-pngcrush-program)
	(tumme-cmd-create-standard-thumbnail-command): New user options.
	(tumme-thumb-size): Set default to 128 if tumme-thumbnail-storage
	is `standard'.  Fix docstring.
	(tumme-thumb-width, tumme-thumb-height): New user options.
	(tumme-external-viewer): Try to find various viewers.
	(tumme-get-thumbnail-image): Use `create-image' instead of
	constructing the `image' structure.
	(tumme-insert-thumbnail): Use `png' if tumme-thumbnail-storage is
	`standard'.
	(tumme-thumb-name): Add file name generation for standard storage.
	Simplify code for other storages.
	(tumme-thumb-name): Use width %w and height %h instead of size %s.
	Add modification time %m and thumbnail-nq8 %q.
	Use `tumme-cmd-create-standard-thumbnail-command' if
	tumme-thumbnail-storage is `standard'.
	(tumme-dired-insert-marked-thumbs): New autoload command.
	(tumme-dired-after-readin-hook): New function.
	(tumme-line-up-dynamic): Use `tumme-thumb-width' instead of
	`tumme-thumb-size'.
	(tumme-display-image): Replace size-x %x and size-y %y with
	width %w and height %h.

	* dired.el (dired-mode-map): Bind `\C-t\C-t' to
	`tumme-dired-insert-marked-thumbs'.

2006-02-12  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-write-tag): Fix small bug (file name did not
	include path).
	(tumme-mark-tagged-files): Fix bug in regexp used to find rows
	matching tag.

2006-02-12  Miles Bader  <miles@gnu.org>

	* net/rcirc.el (rcirc-nick-abbrevs, rcirc-response-formats):
	New variables.
	(rcirc-abbrev-nick): New function.
	(rcirc-format-response-string): Rewrite to use the formats in
	`rcirc-response-formats' and expand escape sequences therein.
	A text-property `rcirc-text' is added over the actual response
	text to make easy to find inside the returned string.
	(rcirc-print): When filling, just look for the `rcirc-text'
	text-property to find the appropriate fill prefix, instead of
	using hardwired patterns.

2006-02-11  Mathias Dahl  <brakjoller@hotmail.com>

	* tumme.el: Enhance some docstrings.  Add todo item about Thumbnail
	Managing Standard.

2006-02-11  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-buffer-internal): Set mark for ido-insert-buffer.
	Don't use insert-buffer; do insert-buffer-substring directly.
	(ido-file-internal): Set mark for ido-insert-file.  Use insert-file-1.

2006-02-11  Martin Rudalics  <rudalics@gmx.at>

	* files.el (revert-buffer, recover-file): Replace buffer-read-only
	with inhibit-read-only.  Suggested by Stefan Monnier.
	(revert-buffer): Let insert-file-contents discard
	buffer-undo-list.  Simplify code.
	(find-file, find-file-existing, revert-buffer): Doc-string fixes.

2006-02-11  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-select-yank): Add a doc string.

	* help.el (describe-key-briefly): Now a wrapper for
	describe-key-briefly-internal.  Bind enable-disabled-menus-and-buttons
	to t.  Populate yank-menu if empty.
	(describe-key-briefly-internal): Renamed from describe-key-briefly.
	(describe-key): Now a wrapper for describe-key-internal.  Bind
	enable-disabled-menus-and-buttons to t.  Populate yank-menu if empty.
	(describe-key-internal): Renamed from describe-key.

2006-02-11  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/glasses.el (glasses-separator): Doc fix.
	(glasses-original-separator): New defcustom.
	(glasses-make-readable, glasses-convert-to-unreadable): Use it.

2006-02-11  Martin Rudalics  <rudalics@gmx.at>

	* mwheel.el (mouse-wheel-up-event): Doc fix.

2006-02-11  Mathias Dahl  <brakjoller@hotmail.com>

	* tumme.el (tumme-dir): Change default value to "~/.emacs.d/tumme/".
	(tumme-dir): New function.  Copied from thumbs.el.

2006-02-10  Juanma Barranquero  <lekktu@gmail.com>

	* desktop.el (desktop-outvar): Fix typo.
	(desktop-save-buffer-p): Doc fix.

	* subr.el (substitute-key-definition): Fix typo.

2006-02-10  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* frame.el (select-frame-set-input-focus): Call x-focus-frame also
	when window-system is mac.

	* term/mac-win.el (fontset-standard): Rename from "fontset-mac".

2006-02-10  Kim F. Storm  <storm@cua.dk>

	* subr.el (substitute-key-definition-key): Pass t for NOERROR to
	indirect-function instead of using condition-case.

2006-02-10  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el (tumme-copy-with-exif-file-name): Try to make docstring
	less `colloquial'...

2006-02-09  Mathias Dahl  <mathias.dahl@gmail.com>

	* tumme.el: Add a couple of todo items.

2006-02-09  Lars Hansen  <larsh@soem.dk>

	* hilit-chg.el: Add highlight-changes-mode to desktop-locals-to-save.
	(highlight-changes-mode): Don't change desktop-locals-to-save.

2006-02-09  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-toggle-display): Clear image cache if using
	filename.

2006-02-09  Masatake YAMATO  <jet@gyve.org>

	* dired-x.el (dired-guess-shell-alist-default): Add .man as
	a `dired-man' target.

	* progmodes/autoconf.el (autoconf-font-lock-keywords): Check start
	boundary of symbols.

2006-02-08  Peter Doornbosch  <peter.doornbosch@luminis.nl>  (tiny change)

	* vc-svn.el (vc-svn-print-log): Show recent commits as well.

2006-02-09  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (hilit-chg-update-all-buffers): Use `mapc' instead of
	`mapcar'; return nil.

2006-02-08  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (mouse-drag-track): Don't change window if we rebind to
	some other event.

2006-02-08  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-startup-channels-alist):
	Add irc.freenode.net and #emacs as defaults.
	(rcirc-ignore-all-activity-flag): Remove variable.
	(rcirc-authinfo): New variable.
	(rcirc-authinfo-filename): Remove variable.
	(rcirc-always-use-server-buffer-flag): New flag.
	(rcirc): M-x rcirc will automatically connect without prompting.
	C-u M-x rcirc will prompt.  Use rcirc-connect to create a
	connection in lisp.
	(rcirc-process-server-response-1): Remove everything but the nick
	portion of the sender so it doesn't need to be done everywhere
	else.  Update related code.
	(global-map): Remove global keybindings.
	(rcirc-get-buffer-create): Make sure rcirc-topic is set.
	(rcirc-send-input): Split into several functions.
	(rcirc-process-input-line, rcirc-process-message)
	(rcirc-process-command): New functions.
	(rcirc-target-buffer): New function to determine where to route
	messages.
	(rcirc-user-nick): Save match data.
	(rcirc-toggle-ignore-buffer-activity)
	(rcirc-update-activity-string): Remove global ignore functionality,
	which can be done now by toggling rcirc-track-minor-mode.
	(rcirc-track-minor-mode-map): New keymap.
	(rcirc-track-minor-mode): New minor-mode.
	(ignore): Make the ignore output nicer.  Always print it when
	adding or removing nicks.
	(rcirc-url-regexp): Improve.
	(rcirc-mangle-text): Remove properties before using text in the
	modeline.
	(rcirc-authenticate): Authentication data comes from
	rcirc-authinfo, not the file pointed to by rcirc-authinfo-file.
	(rcirc-server-prefix): Inherit from rcirc-server.

2006-02-08  Mathias Megyei  <Mathias.Megyei@micronas.com>  (tiny change)

	* Makefile.in (compile): Append "|| true" to the end of the `find'
	command, like compile-always does.

2006-02-08  Sam Steingold  <sds@gnu.org>

	* net/tramp.el (tramp-maybe-open-connection): Do not wait for
	output from a dead connection.

2006-02-07  Mathias Dahl  <brakjoller@hotmail.com>

	* dired.el (dired-mode-map): Add more bindings for tumme.

2006-02-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* wdired.el (wdired-mode-map): Use remap.
	(wdired-get-filename): Massage.
	(wdired-perm-mode-map): Don't copy bindings from wdired-mode-map.
	(wdired-preprocess-perms, wdired-set-bit, wdired-toggle-bit): Use the
	`keymap' property rather than `local-map'.

2006-02-07  Mathias Dahl  <brakjoller@hotmail.com>

	* tumme.el (tumme-get-thumbnail-image): New utility function.
	Suggested by from Chong Yidong.
	(tumme-dired-with-window-configuration): Rename from
	`tumme-dired'.  Add code to save window configuration.
	(tumme-restore-window-configuration): New command to restore the
	window configuration that `tumme-dired-with-window-configuration'
	saves before it changes the window configuration.
	(tumme-show-all-from-dir): New command to display thumbnails for
	all files in a directory entered by the user, like M-x thumbs.
	(tumme-display-thumbs): Call `pop-to-buffer' after all thumbnails
	have been created.
	(tumme-display-thumbnail-original-image): Call `display-buffer'.
	(obsolete-tumme-display-thumbnail-original-image-and-buffer):
	Remove obsolete test function.

2006-02-07  Juanma Barranquero  <lekktu@gmail.com>

	* vc.el (small-temporary-file-directory): Remove defvar; there's
	a defcustom for it in files.el.

	* tumme.el (tumme-get-thumbnail-image): Add missing arg to `error'.
	Fix typo in message.
	(tumme-gallery-generate): Fix typo in `error' message.
	(tumme-display-window-height-correction)
	(tumme-display-window-width-correction, tumme-line-up-dynamic)
	(tumme-line-up-interactive): Doc fixes.
	(tumme-cmd-rotate-original-options, tumme-display-properties-format)
	(tumme-restore-window-configuration, tumme-format-properties-string)
	(tumme-create-thumbs, tumme-display-previous-thumbnail-original):
	Fix typos in docstrings.

2006-02-07  Chris Moore  <christopher.ian.moore@gmail.com>

	* wdired.el (wdired-get-filename): Fix bug: Don't re-normalize OLD.

2006-02-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-mode): Remove autoload cookie.
	User should use hook if desired.

	* progmodes/gdb-ui.el (gdb-post-prompt): Regenerate breakpoints
	buffer if necessary.
	(gdb-delete-frame-or-window): New function.
	(gdb-breakpoints-mode-map): Bind "q" to it.

2006-02-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/nroff-mode.el: Clean up name space.
	(nroff-mode-syntax-table): Remove spurious `1' in the syntax of \n.
	(nroff-mode): Obey the global setting of nroff-electric-mode.
	(nroff-electric-mode): Use define-minor-mode and derived-mode-p.

	* calendar/calendar.el (calendar-increment-month): Typo in last change.

2006-02-06  Thien-Thi Nguyen  <ttn@gnu.org>

	* vc-svn.el (vc-svn-previous-version, vc-svn-next-version): New funcs.

2006-02-06  Lars Hansen  <larsh@soem.dk>

	* generic-x.el (etc-fstab-generic-mode): Add file system types
	cifs and usbdevfs.  Allow special chars in file names.

2006-02-05  Jay Belanger  <belanger@truman.edu>

	Update copyright notices of the files in lisp/calc.

2006-02-05  Romain Francoise  <romain@orebokech.com>

	Update copyright notices of all files in the lisp/play directory.

2006-02-04  Luc Teirlinck  <teirllm@auburn.edu>

	* ldefs-boot.el: Regenerate.

	* emacs-lisp/find-func.el (find-definition-noselect): Minor doc fix.

2006-02-05  Kim F. Storm  <storm@cua.dk>

	* files.el (magic-mode-regexp-match-limit): New defvar.
	(set-auto-mode): Use it to limit magic-mode-alist matching.

2006-02-04  Eli Zaretskii  <eliz@gnu.org>

	* info.el (Info-index, Info-mode): Improve the description of the
	`i' command.

	* ldefs-boot.el: Regenerate.

2006-02-03  Werner Lemberg  <wl@gnu.org>

	* textmodes/nroff-mode.el (nroff-font-lock-keywords): Don't be
	greedy to find the closing bracket in \*[...] and similar
	expressions.  This is a first rough fix -- many additional
	refinements are necessary to make nroff mode really usable with groff.

2006-02-03  Jens Petersen  <petersen@redhat.com>  (tiny change)

	* international/mule-cmds.el (set-locale-environment):
	Add "/usr/share/X11/locale/locale.alias" to search list for xorg-x11
	libX11.

2006-02-03  Joe Wells  <jbw@macs.hw.ac.uk>  (tiny change)

	* arc-mode.el (archive-maybe-copy): Fix the way directories in the
	archive are created in archive-tmpdir.

2006-02-02  John Paul Wallington  <jpw@pobox.com>

	* ibuffer.el (ibuffer-compressed-file-name-regexp): New defcustom.
	(ibuffer-fontification-alist): Use it.
	(ibuffer-mode-map): Bind `ibuffer-mark-compressed-file-buffers'
	to "* z" and the Ibuffer Mark menu.

	* ibuf-ext.el (ibuffer-mark-compressed-file-buffers): New command.

2006-02-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/table.el (*table--cell-describe-mode)
	(*table--cell-describe-bindings): Undo last change since
	print-help-return-message is not obsoleted by anything at all.

2006-02-02  Luc Teirlinck  <teirllm@auburn.edu>

	* emulation/cua-base.el (cua-mode): Doc fix.

2006-02-02  Juanma Barranquero  <lekktu@gmail.com>

	* dframe.el (dframe-handle-make-frame-visible)
	(dframe-handle-iconify-frame, dframe-get-focus)
	(dframe-select-attached-frame, dframe-power-click)
	(dframe-frame-mode): Fix typos in docstrings.

	* ezimage.el (ezimage-mail, ezimage-object-out-of-date)
	(ezimage-insert-image-button-maybe, ezimage-insert-over-text):
	Fix typos in docstrings.

	* hi-lock.el (hi-lock-mode, hi-lock-line-face-buffer)
	(hi-lock-face-buffer, hi-lock-font-lock-hook)
	(hi-lock-archaic-interface-message-used)
	(hi-lock-file-patterns-range): Fix typos in docstrings.

	* savehist.el (savehist-loaded, savehist-load, savehist-install)
	(savehist-autosave, savehist-trim-history): Fix typos in docstrings.

	* mail/mailclient.el (mailclient-place-body-on-clipboard-flag):
	Fix typo in docstring.

	* net/newsticker.el (newsticker--decode-iso8601-date)
	(newsticker--set-customvar, newsticker--buffer-insert-item)
	(newsticker--do-run-auto-mark-filter)
	(newsticker--parse-generic-feed): Doc fixes.
	(newsticker--retrieval-timer-list, newsticker-url-list)
	(newsticker-hide-immortal-items-in-echo-area)
	(newsticker-hide-obsolete-items-in-echo-area)
	(newsticker-new-item-face, newsticker--enclosure)
	(newsticker-buffer-update, newsticker-w3m-show-inline-images)
	(newsticker--parse-atom-0.3, newsticker--parse-rss-1.0)
	(newsticker--parse-generic-feed, newsticker--cache-contains)
	(newsticker--stat-num-items, newsticker-download-enclosures):
	Fix typos in docstrings.

	* net/rcirc.el (rcirc-debug): Doc fix.
	(rcirc-fill-column, rcirc-receive-message-hooks)
	(rcirc-browse-url-map, rcirc-read-only-flag, rcirc-prompt)
	(rcirc-mode, rcirc-generate-new-buffer-name)
	(rcirc-startup-channels, rcirc-ignore-update-automatic)
	(rcirc-cmd-ignore, rcirc-browse-url, rcirc-url-regexp):
	Fix typos in docstrings.
	(rcirc-print): "?\ " -> "?\s".
	(rcirc-cmd-join): Improve argument/docstring consistency.

2006-02-01  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-parse-region): Move save-excursion and set-buffer up
	before narrow-to-region.

2006-02-01  Richard M. Stallman  <rms@gnu.org>

	* simple.el (move-beginning-of-line): Scan properly for invis change.

	* replace.el (multi-occur-in-matching-buffers): Fix prev change.

2006-02-01  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-convert-file-attributes): Set file's gid
	change bit only when id-format is 'integer.  Reported by Matt
	Hodges <M.P.Hodges@rl.ac.uk>.

2006-02-01  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (highlight-changes-initial-state)
	(highlight-changes-global-initial-state): Doc fixes.
	(highlight-changes-global-modes, global-highlight-changes):
	Fix typos in docstrings.

2006-02-01  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-mode): Mention that CUA enables
	transient-mark-mode in doc string.

2006-01-31  Richard M. Stallman  <rms@gnu.org>

	* replace.el (multi-occur): Doc fix.
	(multi-occur-in-matching-buffers): Rename from
	multi-occur-by-filename-regexp.  Prefix arg says match
	buffer names instead of file names.

2006-01-31  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el: Allow non-default values of `bs-header-lines-length'.
	(bs--running-in-xemacs): Remove (not needed anymore).
	(bs--set-window-height): Simplify by using `fit-window-to-buffer'
	instead of `shrink-window', thus avoiding having to compute the
	height of the window.
	(bs--up): Wrap around even when there's no header.
	(bs--down): Use `forward-line' instead of `next-line'.

2006-01-30  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-toggle-display): Use file name if possible,
	instead of unnecessarily allocating a (possibly huge) lisp string.

2006-01-30  John Paul Wallington  <jpw@pobox.com>

	* subr.el (toplevel): Define `cl-assertion-failed' condition here
	because the `assert' macro signals it at runtime.

	* emacs-lisp/cl.el (toplevel): Remove definition of
	`cl-assertion-failed' condition.

2006-01-30  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-marked-list): Make buffer-local and
	permanent-local.
	(thumbs-insert-thumb): Make help-echo non-sticky.
	(thumbs-file-alist): Use eolp as check for (non)-image.

2006-01-30  Juanma Barranquero  <lekktu@gmail.com>

	* ediff-mult.el (ediff-meta-buffer-keymap-setup-hook)
	(ediff-before-session-group-setup-hooks)
	(ediff-default-filtering-regexp, ediff-meta-mark-equal-files):
	Fix typos in docstrings.

	* window.el (bw-dir, bw-eqdir, balance-windows)
	(split-window-keep-point): Fix typos in docstrings.

	* textmodes/org.el (org-allow-space-in-links, org-closed-string)
	(org-quote-string, org-calendar-to-agenda-key)
	(org-agenda-sorting-strategy, org-agenda-use-time-grid)
	(org-show-following-heading, org-tags-column)
	(org-use-tag-inheritance, org, org-allow-space-in-links)
	(org-usenet-links-prefer-google, org-file-apps-defaults-gnu)
	(org-enable-table-editor, org-calc-default-modes)
	(org-table-allow-automatic-line-recalculation)
	(org-export-html-style, org-export-with-fixed-width)
	(org-export-with-sub-superscripts, org-special-keyword)
	(org-formula, org-time-grid, org-table-may-need-update)
	(org-mode, org-goto-ret, org-goto-left, org-goto-right)
	(org-goto-quit, org-get-indentation, org-end-of-item)
	(org-move-item-down, org-move-item-up)
	(org-renumber-ordered-list, org-todo, org-log-done, org-occur)
	(org-remove-occur-highlights, org-read-date, org-goto-calendar)
	(org-agenda, org-agenda-day-view, org-agenda-previous-date-line)
	(org-agenda-log-mode, org-agenda-toggle-diary)
	(org-agenda-toggle-time-grid, org-agenda-cleanup-fancy-diary)
	(org-agenda-file-to-end, org-agenda-no-heading-message)
	(org-agenda-get-closed, org-format-agenda-item)
	(org-cmp-priority, org-cmp-category, org-cmp-time)
	(org-agenda-change-all-lines, org-agenda-diary-entry)
	(org-scan-tags, org-after-todo-state-change-hook, org-tags-view)
	(org-link-search, org-camel-to-words, org-open-file)
	(org-remember-handler, org-table-convert-region)
	(org-table-move-row-down, org-table-move-row-up)
	(org-table-copy-region, org-table-wrap-region)
	(org-table-toggle-vline-visibility)
	(org-table-get-vertical-vector, org-table-modify-formulas)
	(org-table-get-specials, org-recalc-commands)
	(org-table-rotate-recalc-marks, org-table-eval-formula)
	(orgtbl-make-binding, org-in-invisibility-spec-p, org-cycle)
	(org-level-color-stars-only, org-insert-heading):
	Fix typos in docstrings.
	(last-arg): Add defvar.

	* makefile.w32-in (WINS): Add erc.
	(MH_E_SRC): Update (copied from lisp/Makefile.in).

2006-01-29  Bill Wohler  <wohler@newt.com>

	* Makefile.in (MH_E_SRC): Add mh-compat.el, mh-folder.el,
	mh-letter.el, mh-limit.el, mh-scan.el, mh-show.el, mh-thread.el,
	mh-tool-bar.el, mh-xface.el.  Remove mh-customize.el, mh-init.el.
	(mh-autoloads): Don't use comments on otherwise empty lines.

2006-01-29  Edward O'Connor  <ted@oconnor.cx>

	* emulation/viper.el (viper-major-mode-modifier-list):
	Add insert-state and vi-state entries for erc-mode.
	(viper-go-away, viper-set-hooks): Add and remove
	viper-comint-mode-hook from erc-mode-hook as appropriate.

	* emulation/viper.el (viper-insert-state-mode-list): Add erc-mode.

2006-01-29  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs--format-aux): Implement `middle' alignment as
	described in the docstring for `bs-attributes-list'.
	(bs--get-name): Simplify.  Don't pad the buffer name.

2006-01-27  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el (ispell-find-aspell-dictionaries): If no
	English aspell dictionary is installed, use the first entry of
	ispell-dictionary-alist-1.

2006-01-27  Kevin Rodgers  <ihs_4664@yahoo.com>  (tiny change)

	* textmodes/flyspell.el (flyspell-incorrect, flyspell-duplicate):
	Doc fix.

2006-01-27  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test
	for `process-file', in order to let it work for older Emacsen too.

2006-01-27  Eli Zaretskii  <eliz@gnu.org>

	* international/latexenc.el: Add a suitable `coding:' tag.
	(latexenc-find-file-coding-system): Undo last change.

2006-01-27  Arne Jørgensen  <arne@arnested.dk>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Make sure latexenc-main-file is a regular file and is readable.

2006-01-27  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-fetch-master-state, vc-rcs-consult-headers):
	Pass FILE to vc-user-login-name.

	* vc-sccs.el (vc-sccs-state): Pass FILE to vc-user-login-name.

2006-01-27  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-do-thumbs-insertion): Suppress message when
	there are no more images to display.
	(thumbs-mark, thumbs-unmark): Revert change so that they move to
	the next image.

2006-01-26  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-mode): Doc: Use advertised-widget-backward.

	* wid-edit.el (advertised-widget-backward): New alias.
	(widget-keymap): Use advertised-widget-backward for S-TAB.

	* tumme.el: Correct the keywords.
	(tumme-dir-max-size): Use defvar.
	(tumme-setup-dired-keybindings, tumme-dired): Add autoload cookie.

	* simple.el (move-beginning-of-line): Take account of fields.
	(clone-indirect-buffer-other-window): Take args like
	clone-indirect-buffer, and work like it.

	* help-fns.el (describe-function): Don't pass `nil' as default.

	* files.el (risky-local-variable-p): Follow var aliases.

	* subr.el (lazy-completion-table): Doc fix.

	* mail/rmailsum.el (rmail-make-summary-line-1): Don't set
	global binding of `line'.

2006-01-25  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-user-login-name): Rewritten to handle access via
	Tramp.

	* vc.el (vc-default-dired-state-info): Pass FILE to
	vc-user-login-name.
	(vc-default-update-changelog): Don't use vc-user-login-name, we
	don't need it here.

	* net/tramp-vc.el (vc-user-login-name): Comment out defadvice, it is
	no longer necessary.

2006-01-25  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (decode-char): Avoid the overhead of
	calling utf-lookup-subst-table-for-decode if
	utf-translate-cjk-mode is nil.
	(encode-char): Avoid the overhead of calling
	utf-lookup-subst-table-for-encode if utf-translate-cjk-mode is
	nil.

2006-01-22  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (make-subsidiary-coding-system): Reset
	`coding-system-define-form' property of subsidiaries to nil.
	Avoid duplicated entry in coding-system-alist.
	(make-coding-system): Avoid duplicated entry in
	coding-system-alist.
	(define-coding-system-alias): Likewise.

2006-01-24  Luc Teirlinck  <teirllm@auburn.edu>

	* completion.el: Minor fixes in introductory comment.
	(completion-def-wrapper): Fix alist.

2006-01-25  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-new-image-size): New function.
	(thumbs-increment-image-size-element)
	(thumbs-decrement-image-size-element, thumbs-increment-image-size)
	(thumbs-decrement-image-size): Delete.
	(thumbs-resize-image-1): Rename from thumbs-resize-image.  Keep old
	temp files and use to resize.
	(thumbs-resize-image): Rename from thumbs-resize-image-interactive.
	Use increment argument to enlarge/shrink.  Preserve point.
	(thumbs-shrink-image): Rename from thumbs-resize-image-size-down.
	(thumbs-enlarge-image): Rename from thumbs-resize-image-size-up.
	(thumbs-show-thumbs-list): Set thumbs-buffer to current-buffer.
	(thumbs-mark, thumbs-unmark): Preserve point.
	(thumbs-modify-image): Keep old temp files and use to modify.
	Cleanup old temp files at load time.  Preserve point.
	(thumbs-view-image-mode-map): Use new command names.

2006-01-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-minor-wrap): First rev is the one at point.

	* calendar/cal-menu.el: Avoid macros from calendar.el so as to break
	the nastiest part of the cyclic dependency.
	(cal-menu-update): Use dotimes and calendar-increment-month.

	* calendar/calendar.el: Remove unnecessary leading stars in docstrings.
	(calendar-week-start-day): Add an :initializer.
	(calendar-mode-map): Use suppress-keymap, and command remapping.
	(describe-calendar-mode): Setup xref-stack info for the back button.
	(calendar-star-date): Insert before delete.
	(calendar-set-mode-line): Add file-modified info if applicable.
	(calendar-increment-month): New function.

2006-01-24  Tobias C. Rittweiler  <tcr@freebits.de>  (tiny change)

	* font-lock.el (lisp-font-lock-keywords-2):
	Recognize "& keywords" only at word boundaries.

2006-01-24  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-extra-images): New variable.  Make it buffer-local
	and permanent-local.
	(thumbs-max-image-number): New variable.
	(thumbs-do-thumbs-insertion): Use them.
	(thumbs-per-line): Change default to 4.
	(thumbs-marked-list): Rename from thumbs-markedL.
	(thumbs-cleanup-thumbsdir, thumbs-delete-images)
	(thumbs-rename-images): Use -list instead of L for internal variables.
	(thumbs-call-convert): Use call-process instead of shell-command.
	(thumbs-insert-thumb): Add filename as help-echo to each image.
	(thumbs-show-from-dir): Rename from thumbs-show-all-from-dir.
	Give dir to thumbs-show-thumbs-list.
	(thumbs-show-thumbs-list): Set default-directory to that of images.
	(thumbs-dired-show): Rename from thumbs-dired-show-all.
	(thumbs-display-thumbs-buffer, thumbs-show-more-images): New functions.
	(thumbs-mode-map): Bind "+" to thumbs-show-more-images.
	(thumbs-view-image-mode-map): Bind "^" to thumbs-display-thumbs-buffer.

2006-01-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* ses.el (ses-read-cell): Provide a default value.

2006-01-23  Juanma Barranquero  <lekktu@gmail.com>

	* term/w32-win.el (image-library-alist): Add additional names for
	GIF library.

2006-01-23  Arne Jørgensen  <arne@arnested.dk>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Add file-regular-p check.

2006-01-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (clone-buffer): Don't show the new buffer in the same
	window.

2006-01-23  Juri Linkov  <juri@jurta.org>

	* faces.el (link, link-visited): New faces based on default values
	of `info-xref' and `info-xref-visited'.

	* info.el (info-xref): Inherit from `link'.
	(info-xref-visited): Inherit from `link-visited'.

	* cus-edit.el (custom-buffer-create-internal): Use widget type
	`custom-manual' instead of `info-link' and don't set properties
	`button-face' and `mouse-face' explicitly.
	(custom-browse-group-tag, custom-browse-variable-tag)
	(custom-browse-face-tag): Inherit from widget class
	`custom-group-link' instead of `push-button'.
	(custom-button-unraised): Inherit from `underline' face.
	(custom-link): Inherit from `link' face.  Fix doc and group.
	(custom-add-parent-links, custom-group-value-create): Don't set
	properties `button-face' and `mouse-face' explicitly for
	`custom-group-link' widget.
	(custom-group-link): Add properties `button-face' and `mouse-face'
	to widget definition.
	(custom-field-keymap): New variable.  Put `custom-field-keymap' to
	editable-field's :keymap property.
	(custom-mode): Fix docstring: substitute keybindings for
	`widget-forward' and `widget-backward' from `widget-keymap',
	`widget-complete' from `custom-field-keymap', replace old
	`Custom-move-and-invoke' with `widget-move-and-invoke'.  Untabify.

	* desktop.el (desktop-load-file): Check for `fboundp' before
	calling `symbol-function'.

	* simple.el (clone-buffer, clone-indirect-buffer)
	(clone-indirect-buffer-other-window): Use `read-buffer' instead of
	`read-string'.  Fix prompts.

	* play/doctor.el (doctor-mode-map): Rename from `doc-mode-map'.

2006-01-23  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-file-alist): Avoid creating duplicate entries.

2006-01-22  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (inhibit-splash-screen, initial-scratch-message):
	Doc fixes.

2006-01-22  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.52.

	* net/tramp.el, net/tramp-ftp.el, net/tramp-util.el,
	* net/tramp-vc.el: Add code for unloading Tramp.  See comment before
	`tramp-unload-tramp' for checklist.

	* net/tramp.el: Require `timer-funcs' instead of `timer' if in
	XEmacs.  Contributed by Steve Youngs <steve@sxemacs.org>.
	(tramp-unload-file-name-handler-alist)
	(tramp-unload-tramp): New defuns.
	(tramp-advice-PC-expand-many-files): New defadvice.
	(tramp-save-PC-expand-many-files, tramp-setup-complete): Defuns
	removed.
	(tramp-handle-expand-file-name): Remove double slash.
	(tramp-handle-file-attributes-with-ls): Return t as 9th attribute.
	It doesn't matter, because it will be converted later on.
	(tramp-handle-file-ownership-preserved-p): Rewritten.  The old
	implementation was just heuristic.
	(tramp-post-connection): Set uid and gid properties.
	(tramp-convert-file-attributes): Set file's gid change bit.
	(tramp-get-remote-uid, tramp-get-remote-gid): New defuns.
	(tramp-handle-expand-file-name): Use "~root" for tilde expansion
	in case of su(do)? methods.  The home directory of the local user
	will be taken else.
	(tramp-open-connection-telnet)
	(tramp-open-connection-rsh, tramp-open-connection-su)
	(tramp-open-connection-multi): Set PS1 to "$ ".  Otherwise, a
	local shell prompt could hurt.  Reported by Romain Francoise
	<romain@orebokech.com>.
	(tramp-let-maybe): Add `edebug-form-spec' property.
	(tramp-handle-expand-file-name): Bind `default-directory' locally
	to "/" in order to avoid problems with UNC shares or Cygwin
	mounts.
	(tramp-md5-function): Fix typo in error message.

	* net/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

	* net/tramp-util.el (top): Apply `ignore' instead of `identity'
	for byte-compiler pacification.

2006-01-22  Andre Spiegel  <spiegel@gnu.org>

	* vc-rcs.el (vc-rcs-state-heuristic): Use file-attributes with
	ID-FORMAT `string'.  This allows us to get rid of
	`vc-user-login-name UID'.

	* vc-sccs.el (vc-sccs-state-heuristic): Likewise.

2006-01-22  John Paul Wallington  <jpw@pobox.com>

	* hl-line.el (hl-line-highlight, hl-line-move): Doc fixes.

2006-01-21  Martin Rudalics  <rudalics@gmx.at>

	* emacs-lisp/find-func.el (find-definition-noselect)
	(find-variable-noselect): Search variables in C source code too.
	(find-function-C-source, find-function-noselect, find-function)
	(find-function-other-frame, find-variable-noselect, find-variable)
	(find-variable-other-frame, find-variable-at-point):
	Fix docstrings.

2006-01-21  Francesco Potortì  <pot@gnu.org>

	* mail/rmailout.el (rmail-output): Don't use content-type if it is nil.

2006-01-21  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-emacs-popup, flypell-xemacs-popup):
	Default to disabling the "Save affix" question.

2006-01-21  Marien Zwart  <marienz@gentoo.org>  (tiny change)

	* progmodes/python.el (python-mode) <eldoc-mode-hook>: Pass nil as
	the first arg to run-python.

2006-01-21  Eli Zaretskii  <eliz@gnu.org>

	* startup.el (command-line-1): Handle --no-desktop if desktop.el
	is not loaded.

2006-01-20  Jay Belanger  <belanger@truman.edu>

	* calc/calcalg2.el (calc-sum-rec): Fix the sum when the lower
	limit is 0.

	* calc/calc-arith.el (math-add-symb-fancy): Check the length of
	the correct variable.

2006-01-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-open-at-point): Fixed bug with matching a
	link.  Fixed buggy argument sequence in call to `org-view-tags'.
	(org-compile-prefix-format): Set `org-prefix-has-tag'.
	(org-prefix-has-tag): New variable.
	(org-format-agenda-item): Remove tags from headline if
	appropriate.
	(org-agenda-remove-tags-when-in-prefix): New option.
	(org-get-tags-at): New function.

2006-01-20  Nick Roberts  <nickrob@snap.net.nz>

	* thumbs.el (thumbs-buffer): New variable.  Make it buffer local.
	(thumbs-find-image): Move image name and number from buffer name
	to mode name.  Set thumbs-buffer.  Preserve point so that large
	images remain visible.
	(thumbs-file-alist): Construct list in thumbs-buffer and reverse
	order.
	(thumbs-show-image-num): Get image from thumbs-file-alist.  Set
	mode name.
	(thumbs-next-image, thumbs-previous-image): Make them work.

2006-01-19  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-buffer-create-internal): State in the text above
	the whole buffer buttons that they do not operate on hidden items.
	(custom-face-menu): Use `custom-face-save' instead of
	`custom-face-save-command'.
	(custom-face-save-command): Make it an alias for `custom-face-save'
	and declare it obsolete.
	(custom-face-save): Doc fix.

	* dired.el (dired-no-confirm): Add quote.
	(dired-subdir-alist-pre-R): Add quote in
	`make-variable-buffer-local' form and remove unbalanced parenthesis.

2006-01-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/table.el (table-mode-indicator): Typo in last change.

2006-01-19  Richard M. Stallman  <rms@gnu.org>

	* outline.el (hide-leaves): Don't call outline-end-of-heading.
	Fixes bug reported in Nov 2005.

	* isearch.el (isearch-forward): Doc fix.

	* dired.el (dired-move-to-filename-regexp): Define as alias.
	(dired-no-confirm): Use defcustom.
	(dired-subdir-alist-pre-R): Put defvar at top level.

	* battery.el (battery-linux-proc-acpi): Handle "last full capacity".

	* textmodes/bibtex.el (bibtex-strings, bibtex-reference-keys):
	Mark as risky.

	* simple.el (set-mark-command): Doc fix.
	(clone-indirect-buffer-other-window):
	Read arg like clone-indirect-buffer.
	(move-beginning-of-line): Skip invisible newlines.

2006-01-19  Masatake YAMATO  <jet@gyve.org>

	* progmodes/cpp.el (cpp-edit-load): Make the order of
	listed conditions in a base C code buffer and its associate
	CPP Edit buffer the same.

2006-01-19  Kenichi Handa  <handa@m17n.org>

	* mail/rmail.el (rmail-enable-mime): Docstring fixed.
	(rmail-mime-feature): Likewise.
	(rmail-require-mime-maybe): Use display-warning to show a warning
	message.

	* international/mule.el (auto-coding-regexp-alist-lookup): New fun.
	(find-auto-coding): Use auto-coding-regexp-alist-lookup.

2006-01-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* array.el: Move defvars out of eval-when-compile.
	(array-make-template): Replace undeclared global var with a local one.
	(array-mode): Inline initialization functions.
	(array-init-local-variables, array-init-max-row)
	(array-init-max-column, array-init-columns-per-line)
	(array-init-field-width, array-init-rows-numbered)
	(array-init-line-length, array-init-lines-per-row): Remove.

	* play/doctor.el: Move defvars out of eval-when-compile.  Use dolist.
	(doc-mode-map): Define explicitly.
	(doctor-txtype): Use mapc.

	* textmodes/table.el: Move defvars out of eval-when-compile.
	Remove harmful code meant to avoid byte-compiler warnings.
	(table-fixed-mode-indicator): Remove.  Use a more complex mode-line
	specification that checks table-fixed-width-mode directly.
	(table-recognize-region, table-recognize-cell):
	Use restore-buffer-modified-p.
	(table-fixed-width-mode): Remove code that refreshes
	table-fixed-mode-indicator.
	(*table--cell-describe-bindings, *table--cell-describe-mode):
	Avoid obsolete name print-help-return-message.
	(table--test-cell-list): Don't use replace-regexp from elisp.
	(table--point-entered-cell-function, table--point-left-cell-function):
	Don't set table-fixed-mode-indicator, use force-mode-line-update.

	* textmodes/org.el: Move defvars out of eval-when-compile.  Move code
	that was after the end of file.  Use buffer-file-name variable.
	(org-timestamp-change): Use with-current-buffer.
	(org-todo-list): Don't unnecessarily define a new buffer-local var.
	(org-agenda-file-to-end, org-agenda-file-to-front): Remove unused arg
	`file'.

	* progmodes/fortran.el: Move defvars out of eval-when-compile.
	(fortran-break-line): Remove unused var `opoint'.
	(fortran-abbrev-start): Obey help-event-list.

2006-01-18  Jesper Harder  <harder@phys.au.dk>

	* mail/smtpmail.el (smtpmail-send-it): Use insert-buffer-substring.

2006-01-18  Masatake YAMATO  <jet@gyve.org>

	* progmodes/make-mode.el (makefile-imake-mode): New mode
	derived from makefile-mode.
	(makefile-imake-mode-syntax-table): New syntax table
	derived from makefile-mode-syntax-table.
	(makefile-mode): Write about makefile-imake-mode in doc string.
	(makefile-mode-map): Bind "\C-c\C-m\C-i" to makefile-imake-mode.
	(makefile-imake-font-lock-keywords): New font lock keywords.

	* files.el (auto-mode-alist): Add Imakefile.

2006-01-17  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (ispell-kill-ispell-hook): Add to the hook when
	loading the file rather than when turning on flyspell-mode.

2006-01-16  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-rogue): Minor doc fix.

2006-01-17  Juri Linkov  <juri@jurta.org>

	* dired-aux.el (dired-diff): Use dired-dwim-target-directory
	instead of the file at the mark as default if the file at the mark
	is the same as the file at point or if dired-dwim-target-directory
	is not the same as the current directory and the mark is not active.

	* log-view.el (log-view-minor-wrap): Use the same logic to get
	revisions as `log-view-diff'.

	* info.el (Info-revert-find-node): Check for Info-current-file
	before preserving new-history.

	* man.el (Man-heading-regexp): Add `/'.

	* textmodes/sgml-mode.el: Add `coding: iso-2022-7bit' cookie.
	(html-mode): Set `sentence-end-base' instead of `sentence-end'.

2006-01-16  Juri Linkov  <juri@jurta.org>

	* faces.el (mode-line-faces): New defgroup.
	(mode-line-highlight): Move definition after new defgroup.
	(mode-line, mode-line-inactive, mode-line-highlight):
	Replace :group `modeline' with `mode-line-faces'.
	(mode-line-buffer-id): New face.
	(modeline-buffer-id): New face alias.
	(vertical-border): Remove :group `modeline'.

	* bindings.el (propertized-buffer-identification): Use face
	`mode-line-buffer-id' instead of `Buffer-menu-buffer'.
	(mode-line-next-buffer, mode-line-previous-buffer): New functions.
	(mode-line-buffer-identification-keymap): For mouse-1 replace
	`mode-line-unbury-buffer' with `mode-line-previous-buffer'.
	Replace `mode-line-bury-buffer' with `mode-line-next-buffer' for
	mouse-3.

	* buff-menu.el (buffer-menu-buffer) <defface>: Renamed from
	Buffer-menu-buffer.  Doc fix.
	(Buffer-menu-buffer): Face alias to buffer-menu-buffer.
	(list-buffers-noselect): Use `buffer-menu-buffer' face instead of
	`Buffer-menu-buffer'.

	* info.el (Info-mode-line-node-keymap): New defvar.
	(Info-set-mode-line): Use `stringp' to check Info-current-file.
	Propertize Info-current-node with `mode-line-buffer-id' and
	`mode-line-highlight' faces and `Info-mode-line-node-keymap'.

	* time.el (display-time-mail-face): Replace :group `faces' with
	`mode-line-faces'.

2006-01-16  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el: Add autoload cookies for cp125[0345678].

	* language/european.el (cp1252): New alias for windows-1252.

	* international/mule.el (autoload-coding-system): Prepare for EOL
	variants.

2006-01-15  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-raw-map): Add mapping for insert.
	(term-send-insert): New.
	(term-mode): Make variables local here instead of doing it in
	`term-emulate-terminal'.
	(term-emulate-terminal): Delete incorrect optimization for cr+lf.
	Scroll reverse needs to take into account the scroll region.
	Saving and restoring the cursor should save the color attributes too.
	(term-reset-terminal): Reset the scroll region.
	(term-handle-ansi-escape): Cursor up and down should take into
	account the scroll region.
	(term-set-scroll-region): Rename from `term-scroll-region'.
	Move to 0,0 after setting the region.
	(term-handle-scroll): Handle scroll up.
	(term-down): Fix off by one error.
	(term-delete-lines): Do not delete outside the scroll region.
	(term-insert-lines): Take into account the scroll region.

2006-01-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/ispell.el (ispell-internal-change-dictionary)
	(ispell-change-dictionary): Undo most of last change of 2006-01-13.
	(start, end): Move declaration outside of eval-when-compile.

	* textmodes/flyspell.el (flyspell-kill-ispell-hook): New fun.
	(flyspell-mode-on): Use it.

	* textmodes/ispell.el (ispell-kill-ispell): Run new hook
	ispell-kill-ispell-hook.

2006-01-14  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (Custom-set, Custom-save, Custom-reset-current)
	(Custom-reset-saved): Do not ask for confirmation in single option
	buffers.

2006-01-13  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (lisp-font-lock-keywords-1): Minor rearrangement.

2006-01-13  Romain Francoise  <romain@orebokech.com>

	* add-log.el (add-change-log-entry, change-log-merge):
	Conditionally use `hard-newline'.

2006-01-13  Martin Rudalics  <rudalics@gmx.at>

	* wid-edit.el (widget-field-end): If the overlay is no longer
	associated with a buffer, behave as if the overlay didn't exist.

	* cus-edit.el (custom-add-see-also, custom-add-parent-links):
	Make sure the links use the `custom-link' face.

2006-01-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/ld-script.el (auto-mode-alist): Use \' rather than $.
	(ld-script-mode): Don't set indent-line-function since we don't
	have one.

2006-01-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-open-file): Use mailcap for selecting an
	application.
	(org-file-apps-defaults-gnu): Use mailcap as the default for
	selecting an application on a UNIX system.
	(org-agenda-show-tags): New command.
	(org-table-insert-hline): Keep cursor in current table line.
	(org-table-convert): Offset effect of modifying
	`org-table-insert-hline'.
	(org-format-agenda-item): New optional argument TAG.
	(org-compile-prefix-format): Handle %T format for the tag.
	(org-expand-wide-chars): New function.
	(org-table-insert-row, org-table-insert-hline):
	Use `org-expand-wide-chars'.
	(org-open-file): Fix bug in program launch.
	(org-get-time-of-day): Fix bug with times before 1am.
	(org-agenda-menu): Add tags commands.

2006-01-13  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/ispell.el (ispell-init-process): Include the used
	dictionary in ispell process start message.
	(ispell-internal-change-dictionary): When flyspell-mode is active
	and dictionary is changed, make sure ispell process is restarted
	and flyspell word cache cleared out for the current buffer.
	(ispell-change-dictionary): Make sure flyspell word cache is
	cleared out in all buffers with active flyspell mode when
	dictionary is globally changed.
	Call ispell-internal-change-dictionary after dictionary change.

2006-01-13  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/bytecomp.el (batch-byte-recompile-directory): Doc fix.

	* makefile.w32-in (MH_E_SRC): Synchronize with Makefile.in.
	(pre-mh-loaddefs.el-SH, pre-mh-loaddefs.el-CMD): Update Copyright
	years.  Fix small differences wrt Makefile.in.
	(recompile): Use --eval '(batch-byte-recompile-directory 0)', like
	Makefile.in does.

2006-01-12  Bill Wohler  <wohler@newt.com>

	* Makefile.in (MH_E_SRC): Replace mh-index.el and mh-pick.el with
	mh-search.el.

2006-01-12  Masatake YAMATO  <jet@gyve.org>

	* progmodes/ld-script.el: Update copyright year.

2006-01-12  Chong Yidong  <cyd@stupidchicken.com>

	* cus-theme.el (custom-theme-add-variable, custom-theme-add-face):
	Don't add widget if setting undefined.

2006-01-12  John Paul Wallington  <jpw@pobox.com>

	* help-fns.el (describe-variable): Remove newlines from void
	variable output.

2006-01-13  Nick Roberts  <nickrob@snap.net.nz>

	* wdired.el (wdired-mode-map): Add help echo for
	wdired-abort-changes.

	* man.el (Man-file-name-regexp): Adjust for a list of files.

2006-01-12  Masatake YAMATO  <jet@gyve.org>

	* progmodes/ld-script.el (auto-mode-alist): Support
	suffix conventions used in netbsd and eCos.

2006-01-11  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-reset-menu, custom-buffer-create-internal)
	(custom-variable-menu, custom-face-menu, custom-group-menu)
	(Custom-mode-menu): Change names of menu items.  (As discussed on
	emacs-devel.)
	(custom-face-menu): Add "Undo Edits" item.

	* startup.el (init-file-user): defcustom -> defvar.

	* tooltip.el (tooltip-mode): Doc fix.

2006-01-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-post-command): window-buffer signals an error on
	dead windows rather than returning nil.
	(reveal-open-new-overlays): An overlay might die while we open others.

2006-01-11  Bill Wohler  <wohler@newt.com>

	* cus-dep.el (generated-custom-dependencies-file): Fix typo and
	phrasing in docstring.

	* Makefile.in (MH_E_SRC): Rename from MH-E-SRC since the dashes
	can give some systems gas.  Add new file mh-buffers.el.

2006-01-06  Masatake YAMATO  <jet@gyve.org>

	* font-lock.el (cpp-font-lock-keywords): Font lock keywords for
	C preprocessor forward ported from GNU Emacs 21.2.

	* progmodes/asm-mode.el (asm-font-lock-keywords):
	Use `cpp-font-lock-keywords'.

	* progmodes/ld-script.el (ld-script-font-lock-keywords): Ditto.

	* progmodes/ld-script.el (auto-mode-alist): Use \\> instead
	of $ for "\\.ld[s]?".

2006-01-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/tcl.el (tcl-indent-command): Use indent-for-tab-command.
	(tcl-indent-line): Return `noindent' if inside a string.

	* progmodes/flymake.el (flymake-split-string): Remove more than one
	empty string at beg/end of the result.
	(flymake-find-buildfile, flymake-find-possible-master-files):
	Use expand-file-name.
	(flymake-fix-file-name): Don't replace \ with / and don't remove ./
	since expand-file-name does it for us.  Use directory-file-name.
	(flymake-ler-get-full-file, flymake-ler-get-file, flymake-ler-get-line)
	(flymake-ler-get-type, flymake-ler-get-text)
	(flymake-ler-make-ler): Remove.  Replace by defstruct.  Update callers.
	(flymake-current-line-no): Remove spurious interactive spec.
	(flymake-delete-temp-directory): Remove unused var `slash-pos'.
	(flymake-check-include): Remove arg inc-path merged into inc-name.
	(flymake-check-patch-master-file-buffer): Fit in 80 columns.
	Arg regexp-list replaced by a simple regexp.
	(flymake-master-make-header-init, flymake-master-tex-init):
	Correspondingly replace regexp-list with a regexp.  Fix regexp.

2006-01-10  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-try-auth-methods): Add comment
	describing AUTH PLAIN fix.

2006-01-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* mail/emacsbug.el (report-emacs-bug-text-prompt): Delete var.
	(report-emacs-bug): Don't record initial prompt text.
	Instead, add text properties to prompting text.
	(report-emacs-bug-hook): Delete prompting text.

2006-01-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-find-buildfile): Remove invariant arg
	`dirs'.  Adjust callers.

2006-01-09  John Paul Wallington  <jpw@gnu.org>

	* cus-edit.el (custom-comment) <defface>: Add TTY definitions.

2006-01-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-open-new-overlays): New extracted fun.
	(reveal-close-old-overlays): Idem.  Check overlays's liveness before
	using them.  Simplify the code.
	(reveal-post-command): Use them.  Fix up obsolete windows in
	reveal-open-spots.

	* progmodes/flymake.el: Use `require' rather than autoload for
	XEmacs's overlays.
	(flymake-get-common-file-prefix, flymake-build-relative-filename):
	Delete.  Use file-relative-name instead.
	(flymake-get-syntax-check-program-args, flymake-perl-init):
	Simplify the resulting code.

	* log-view.el (log-view-file-re, log-view-message-re): Add support
	for DaRCS output.

2006-01-09  Alex Schroeder  <alex@gnu.org>

	* mail/rmail.el (rmail-reply-regexp): Also ignore mailing list
	identifiers sometimes added in square brackets at the beginning of
	subject lines.

2006-01-07  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (Custom-set, Custom-save): Doc fix.
	(Custom-reset-current, Custom-reset-saved): Change question text.
	(Custom-reset-standard): Likewise.
	(custom-variable-reset-saved): Doc fix.

2006-01-07  Eli Zaretskii  <eliz@gnu.org>

	* startup.el (init-file-user): Doc fix.

2006-01-07  Alex Schroeder  <alex@gnu.org>

	* mail/rmail.el (rmail-current-subject): New function.
	(rmail-current-subject-regexp): New function.
	(rmail-next-same-subject): Use it.

	* mail/rmailsum.el (rmail-summary-by-topic):
	Use rmail-current-subject and rmail-current-subject-regexp.
	(rmail-summary-next-same-subject): Ditto.

	* net/rcirc.el (rcirc-send-input): No longer check whether the
	process is open, since not all commands need an open process.
	(rcirc-send-string): Check whether the process is open before
	sending anything.
	(rcirc-ignore-list): New option.
	(rcirc-ignore-list-automatic): New variable.
	(rcirc-print): Take rcirc-ignore-list into account.
	(rcirc-cmd-ignore): New command.
	(rcirc-ignore-update-automatic): New function.
	(rcirc-handler-PART, rcirc-handler-QUIT): Use it to maintain the
	list if ignored nicks.
	(rcirc-handler-NICK): Ditto, and also ignore the new nick.

2006-01-06  David Reitter  <david.reitter@gmail.com>

	* mail/emacsbug.el (report-emacs-bug): Let explanations correctly
	reflect the address to which the report will be sent.

2006-01-06  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/ld-script.el (auto-mode-alist): Recognize linker
	scripts whose file-name extensions are "\.x[bdsru]?[cn]?$".

2006-01-01  Michael Ernst  <mernst@alum.mit.edu>  (tiny changes)

	* textmodes/tildify.el: Fix typos (misspellings) in the commentary.

	* emacs-lisp/find-func.el (find-definition-noselect): Fix typo in
	the doc string: "functoin" => "function".
	* ldefs-boot.el: Likewise.

	* textmodes/bibtex.el (bibtex-validate-globally): Fix typo in a
	message text: "Duplicat" => "Duplicate".

2006-01-06  Sven Joachim  <svenjoac@gmx.de>  (tiny change)

	* files.el (basic-save-buffer-2): If backing-up failed, reset
	buffer-backed-up to nil.

2006-01-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb-script-skip-to-head)
	(gdb-script-calculate-indentation): Indent for breakpoint command
	lists also.

2006-01-05  Bill Wohler  <wohler@newt.com>

	* Makefile.in (compile-always): Add mh-autoloads dependency.
	(bootstrap): Remove mh-autoloads dependency, as compile dependency
	provides it.
	(updates): Remove mh-autoloads dependency, since it probably has
	already run recently (via recompile).

2006-01-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/flyspell.el (flyspell-accept-buffer-local-defs): Add an
	argument `force' to disable the flyspell-last-buffer optimization.
	(flyspell-mode-on): Use it.

	* progmodes/flymake.el (flymake-get-cleanup-function): Default to
	flymake-simple-cleanup.
	(flymake-allowed-file-name-masks): Use this new default.
	All the functions are now called in the right buffer rather than
	passing the buffer as argument.
	(flymake-process-sentinel): Switch to buffer before calling cleanup.
	(flymake-parse-err-lines): Remove redundant buffer arg.
	(flymake-get-program-dir): Comment out unused function.
	(flymake-start-syntax-check, flymake-start-syntax-check-process):
	Remove redundant buffer argument.
	(flymake-get-real-file-name, flymake-simple-java-cleanup)
	(flymake-simple-cleanup, flymake-master-cleanup): Remove buffer arg.

2006-01-05  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-find-node): Don't record previous node if have none.
	(info): Go to directory only if history is empty.

	* simple.el (mark): Doc fix.

2006-01-05  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ae-parameter): Don't coerce data if it is
	already of desired type.
	(mac-ae-list): Coerce parameter to "list" type.
	(mac-dispatch-apple-event): Replace cadr part of event with a
	dummy position so that event-start returns it.

2006-01-05  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-end-of-subtree): New function.
	(org-cycle, org-subtree-end-visible-p, org-scan-tags):
	Use `org-end-of-subtree'.
	(org-agenda, org-agenda-convert-date): Protect calls to
	`fit-window-to-buffer'.
	(org-tags-view): Force matching of sublevels when doing a
	todo-only search.  Define the correct redo command, including the
	arguments.
	(org-agenda-redo): Display message.
	(org-check-for-org-mode): New function.
	(org-agenda-type): New variable.
	(org-timeline, org-agenda-list, org-todo-list, org-tags-view):
	Set `org-agenda-type'.
	(org-agenda-check-type): New function.
	(org-agenda-goto-today, org-agenda-later, org-agenda-earlier)
	(org-agenda-week-view, org-agenda-day-view)
	(org-agenda-next-date-line, org-agenda-previous-date-line)
	(org-agenda-log-mode, org-agenda-toggle-diary)
	(org-agenda-toggle-time-grid, org-agenda-date-later)
	(org-agenda-date-prompt, org-agenda-diary-entry)
	(org-agenda-execute-calendar-command, org-agenda-goto-calendar)
	(org-agenda-convert-date, org-agenda-menu):
	Use `org-agenda-check-type'.
	(org-make-overlay, org-delete-overlay)
	(org-detatch-overlay, org-move-overlay, org-overlay-put):
	New compatibility functions.
	(org-calendar-select-mouse): New command.

2006-01-04  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (Custom-reset-current, Custom-reset-saved)
	(Custom-reset-standard): Fix y-or-n-p messages.
	(custom-link): New face for links.
	(custom-buffer-create-internal, custom-manual): Use it.
	(custom-face-save): Push to theme-face before setting face spec.

	* wid-edit.el (widget-default-mouse-face-get): New function.
	(widget-specify-button): Handle mouse-face like button-face.

	* custom.el (load-theme): Clear old theme settings if reloading.

2006-01-03  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-buffer-create-internal): Move whole buffer
	"Erase Customization" button back to same position it occupies in
	the individual State menus.

2006-01-04  Kim F. Storm  <storm@cua.dk>

	* wid-edit.el (key-sequence): Rework widget to read key binding
	using `kbd' syntax.  Use C-q to insert literal key, event, or code.
	(widget-key-sequence-default-value): Default value for empty sequence.
	(widget-key-sequence-map): New map for reading key binding.  Bind C-q.
	(widget-key-sequence-read-event): New command for C-q.
	(widget-key-sequence-validate, widget-key-sequence-value-to-internal)
	(widget-key-sequence-value-to-external): New functions.

2006-01-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-create-temp-with-folder-structure):
	Use expand-file-name.
	(flymake-delete-temp-directory): Use expand-file-name,
	file-name-directory, and directory-file-name.
	(flymake-strrchr): Delete.
	(flymake-start-syntax-check): Don't pass the redundant buffer argument
	to the init-f function.
	(flymake-save-buffer-in-file, flymake-init-create-temp-buffer-copy)
	(flymake-init-find-buildfile-dir)
	(flymake-init-create-temp-source-and-master-buffer-copy)
	(flymake-simple-make-init-impl, flymake-simple-make-init)
	(flymake-master-make-init, flymake-master-make-header-init)
	(flymake-simple-make-java-init, flymake-simple-ant-java-init)
	(flymake-perl-init, flymake-simple-tex-init, flymake-master-tex-init)
	(flymake-xml-init): Remove corresponding redundant buffer argument.
	(flymake-allowed-file-name-masks): Remove last elems that are equal to
	the default anyway.  Clean up regexps.

	* progmodes/flymake.el (flymake-temp-source-file-name)
	(flymake-master-file-name, flymake-temp-master-file-name)
	(flymake-base-dir): New buffer-local vars.
	(flymake-buffer-data, flymake-get-buffer-value)
	(flymake-set-buffer-value): Replace those hash-tables by the new
	buffer-local vars.  Update callers.

	* progmodes/flymake.el (flymake-check-start-time)
	(flymake-check-was-interrupted, flymake-err-info, flymake-is-running)
	(flymake-last-change-time, flymake-new-err-info, flymake-timer):
	Move definition, so we can remove redundant earlier declaration.
	(flymake-replace-regexp-in-string, flymake-split-string)
	(flymake-get-temp-dir): Use defalias.
	(flymake-popup-menu): Remove `pos' argument.  Use posn-at-point.
	(flymake-xemacs-window-edges): Remove unused function.
	(flymake-get-point-pixel-pos): Move.
	(flymake-pid-to-names, flymake-reg-names)
	(flymake-get-source-buffer-name, flymake-unreg-names): Remove.
	Replace by a simple list flymake-processes and by process-buffer.
	Update callers.  Other than simplify the code, it uses buffers rather
	than buffer-names so it doesn't get confused by uniquify.
	(flymake-buffer-data): The global value should just be nil.

	* emacs-lisp/bytecomp.el (byte-compile-file-form-defalias):
	Optimize the body of a defalias like any other code.

	* font-lock.el (font-lock-fontify-buffer, font-lock-fontify-region):
	Make sure we've setup font-lock's vars.  It may influence which
	function we then call.
	(font-lock-default-fontify-buffer): Don't bother calling set-defaults
	here since it's too late anyway.

2006-01-03  Romain Francoise  <romain@orebokech.com>

	* startup.el (fancy-splash-tail, normal-splash-screen):
	Update copyright year.

2006-01-02  J.D. Smith  <jdsmith@as.arizona.edu>

	* mouse.el (mouse-drag-track): Rename, from
	`mouse-drag-region-1'.  Includes optional argument required to
	enable post-drag event processing (e.g. delete region keys).
	Can be used without this argument to track a mouse region and operate
	on it as soon as the drag completes.
	(mouse-drag-region): Use `mouse-drag-track'.

2006-01-02  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-guess-name-alist, custom-guess-doc-alist):
	Move to `custom-buffer' group.

	* cus-theme.el: Rewrite the Custom New Theme Mode interface.
	(custom-new-theme-mode-map, custom-theme-insert-variable-marker)
	(custom-theme-insert-face-marker, custom-theme-variable-menu)
	(custom-theme-face-menu): New variables.
	(custom-theme-add-variable, custom-theme-variable-action)
	(custom-variable-reset-theme, custom-theme-delete-variable)
	(custom-face-reset-theme, custom-theme-face-action)
	(custom-theme-delete-face, custom-theme-merge-theme)
	(custom-theme-add-face, custom-theme-visit-theme): New functions.

2006-01-01  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el: Move Custom Themes commentary to start of theme code.
	(custom-known-themes): Rename `standard' theme to `changed'.
	(custom-push-theme): Caller no longer specifies what theme to use
	when doing `reset'---the setting is simply removed from the theme.
	Delete MODE from `theme-value' and `theme-settings' properties.
	(custom-declare-theme): Ignore &rest args since we don't use them.

	(custom-loaded-themes): Delete variable.
	(custom-theme-load-themes, custom-theme-loaded-p)
	(custom-theme-value): Delete functions.

	(custom-declare-theme): Signal error on invalid theme names.
	(provide-theme): custom-loaded-themes was deleted.
	(load-theme): Load the file unconditionally.
	(enable-theme): Call `load-theme' if theme is undefined.
	(custom-enabled-themes): Only update value for successful loads.
	(disable-theme): Complete from enabled themes when interactive.
	(custom-variable-theme-value): Calculate theme value directly.

	(custom-theme-reset-variables, custom-reset-variables): Mark as
	XEmacs compatibility functions.  We don't actually use these.

	* cus-edit.el (custom-variable-state-set):
	Use custom-variable-theme-value instead of custom-theme-value.
	(custom-face-state-set): Rename `standard' theme to `changed'.
	(custom-save-variables, custom-save-faces): Delete unneeded
	references to custom-reset-variables.
	(custom-save-resets): Delete function.
	(custom-save-variables, custom-save-faces): MODE argument deleted.
	(custom-save-variables, custom-save-faces): Ignore theme values.

	* cus-face.el (custom-theme-reset-faces): Mark as XEmacs
	compatibility function.

2006-01-01  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (Custom-set, Custom-save): Ask for confirmation.
	(Custom-reset-current, Custom-reset-saved): Likewise.
	(Custom-reset-standard): Show message if aborted.
	(custom-mode): Doc fix, describing those commands.

	* mouse.el (mouse-drag-region-1): When following link via mouse-2,
	put on event-kind property.

2005-12-31  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (provide-theme): Ban `user' theme name.
	(custom-enabling-themes): New variable.
	(enable-theme): Don't enable user if custom-enabling-themes is t.
	(custom-enabled-themes): Make it a defcustom.
	(custom-theme-recalc-face): No-op if face is undefined.

	* cus-edit.el (custom-button-mouse): New variable.
	(custom-button-mouse): New face.
	(custom-raised-buttons, custom-mode): Use it.

	* cus-theme.el (custom-new-theme-mode): Use custom-button-mouse.

2005-12-31  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/gud.el (gud-display-line): Support hl-line in the
	source buffer.

2005-12-31  Lennart Borgman  <lennart.borgman.073@student.lu.se>  (tiny change)

	* mouse.el (mouse-drag-window-above): Verify that the found window
	overlaps with the given window in the horizontal dimension.

2005-12-31  Eli Zaretskii  <eliz@gnu.org>

	* Makefile.in (cvs-update): New target.

	* makefile.w32-in (cvs-update): Ditto.

2005-12-30  Chong Yidong  <cyd@stupidchicken.com>

	* cus-theme.el (custom-new-theme-mode): Use cus-edit faces.
	(custom-new-theme-mode-map): New variable.

2005-12-30  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-load-themes): Function deleted.

	* cus-edit.el (custom-save-loaded-themes): Function deleted.
	(custom-save-variables): Don't delete or add custom-load-themes call.

2005-12-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* cus-start.el: Add `visible-cursor'.

	* progmodes/flymake.el (flymake-copy-buffer-to-temp-buffer): Simplify.
	(flymake-parse-output-and-residual): Remove `source-buffer' argument.
	(flymake-process-filter): Switch to buffer before calling it instead.
	(flymake-post-syntax-check, flymake-highlight-err-lines)
	(flymake-delete-own-overlays, flymake-parse-err-lines)
	(flymake-start-syntax-check, flymake-start-syntax-check-process)
	(flymake-count-lines, flymake-parse-residual):
	Remove constant buffer argument.
	(flymake-start-syntax-check-for-current-buffer): Remove.
	Update callers to use flymake-start-syntax-check instead.
	(flymake-display-err-menu-for-current-line):
	Remove unused var `mouse-pos'.
	(flymake-restore-formatting): Comment out unused function.
	(flymake-report-status, flymake-report-fatal-status): Remove buffer
	argument, use current-buffer instead.  Update callers.

2005-12-30  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-mode): Make completion-ignore-case
	buffer-local because choose-completion-delete-max-match requires
	that we set completion-ignore-case (i.e., binding via let is not
	sufficient).
	(bibtex-complete): Always set completion-ignore-case and
	choose-completion-string-functions.  The latter is needed because
	choose-completion-string-functions keeps its value if we quit the
	*Completions* buffer without requesting a completion.

2005-12-30  Andreas Schwab  <schwab@suse.de>

	* progmodes/cc-defs.el: Ignore errors from font-lock-compile-keywords.

2005-12-30  Eli Zaretskii  <eliz@gnu.org>

	* jit-lock.el (jit-lock-chunk-size): Doc fix.

2005-12-30  Juri Linkov  <juri@jurta.org>

	* locate.el (locate-fcodes-file, locate-header-face)
	* progmodes/delphi.el (delphi-other-face)
	* progmodes/glasses.el (glasses-face): Add tag "None" to const nil.

	* paren.el (show-paren-match, show-paren-mismatch): Use existing
	group `paren-showing-faces'.

	* net/goto-addr.el (goto-address-highlight-keymap): Fix docstring.
	(goto-address): Fix docstring.

	* net/webjump.el (webjump-sample-sites): Update URLs.

	* textmodes/fill.el (fill-single-word-nobreak-p): Use `sentence-end'.

	* subr.el (cancel-change-group): Add listp around pending-undo-list.

2005-12-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-compile-keywords): Signal an error when
	font-lock-set-defaults hasn't been called.

2005-12-29  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (noreturn, 1value): Doc fixes.

2005-12-29  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-text-in-field-bounds): Handle case
	that assoc-string returns nil.

2005-12-29  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-entry-type-whitespace)
	(bibtex-entry-type-str, bibtex-empty-field-re)
	(bibtex-search-backward-string, bibtex-preamble-prefix)
	(bibtex-search-entry, bibtex-enclosing-entry-maybe-empty-head): Remove.
	(bibtex-any-valid-entry-type): New variable.
	(bibtex-parse-field-name): Simplify.
	(bibtex-parse-string, bibtex-search-forward-string): New arg empty-key.
	(bibtex-preamble-prefix): Include left delimiter.
	(bibtex-search-forward-field, bibtex-search-backward-field):
	Allow unbounded search past entry boundaries (required by bibtex-pop).
	(bibtex-text-in-field-bounds): Use push.
	(bibtex-text-in-field): Do not use bibtex-narrow-to-entry.
	(bibtex-parse-preamble, bibtex-valid-entry)
	(bibtex-beginning-first-field): New functions.
	(bibtex-skip-to-valid-entry): Use bibtex-valid-entry.  Fix regexp.
	(bibtex-map-entries): Fix docstring.
	(bibtex-flash-head): New arg prompt.  Simplify.
	(bibtex-enclosing-field): Include code of bibtex-inside-field.
	(bibtex-insert-kill): Simplify.  Always insert text past the
	current field or entry.
	(bibtex-format-entry): Use bibtex-parse-field.
	(bibtex-pop): Use bibtex-beginning-of-entry and
	bibtex-end-of-entry to initiate the search.  Insert empty field if
	we found ourselves.
	(bibtex-print-help-message): New args field and comma.
	Handle entry keys.
	(bibtex-make-field): Use bibtex-beginning-of-entry.
	(bibtex-end-of-entry): Use bibtex-valid-entry.  Recognize any
	invalid entry.
	(bibtex-validate): Use bibtex-valid-entry and bibtex-parse-string.
	Handle preambles.  Simplify code for thorough test.
	(bibtex-next-field, bibtex-find-text, bibtex-find-text-internal):
	New arg comma.  Handle entry heads.
	(bibtex-remove-OPT-or-ALT, bibtex-remove-delimiters)
	(bibtex-kill-field, bibtex-copy-field-as-kil, bibtex-empty-field):
	New arg comma.
	(bibtex-kill-entry): Use bibtex-any-entry-maybe-empty-head.
	(bibtex-fill-field): Simplify.
	(bibtex-fill-entry): Use bibtex-beginning-first-field and
	bibtex-parse-field.
	(bibtex-convert-alien): Do not wait before calling bibtex-validate.
	(bibtex-complete): Use bibtex-parse-preamble.

2005-12-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-tooltip-print, gdb-tooltip-print-1):
	Display name of expression instead of convenience variable.
	(gdb-post-prompt): Only call gdb-get-changed-registers if needed.

	* progmodes/gud.el (gud-tooltip-dereference): Rename from
	toggle-gud-tooltip-dereference.
	(gud-tooltip-print-command): Move concatenation of "*" to expr to...
	(gud-tooltip-tips): ...here when dereferencing.

2005-12-28  Bill Wohler  <wohler@newt.com>

	* simple.el (mh-e-user-agent): Move to mh-e/mh-comp.el and autoload.

2005-12-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-annotate-display): Replace optional arg `color-map' with
	compulsory arg `ratio'.  Inline body of vc-annotate-time-span.
	(vc-annotate-display-autoscale): Adjust call.
	(vc-annotate-display-default): Adjust call.  Make arg compulsory.
	Fix interactive spec.
	(vc-annotate-time-span): Remove.
	(vc-annotate-oldest-in-map): Rename from vc-annotate-car-last-cons.
	(vc-annotate-mode-menu, vc-annotate-display-autoscale)
	(vc-annotate-display-select): Use new name.

	* vc.el (vc-annotate-mode-map): Remove obsolete binding.
	(vc-annotate-mode-menu): Remove left-over redundant declaration.
	Correct the construction of span entries.  Simplify.
	(vc-annotate-display-select): Fix the nil case.
	(vc-annotate): Remove obsolete (and now broken) code.
	(vc-annotate-extract-revision-at-line): Remove obsolete code.
	(vc-annotate-time-span): Remove unused arg `quantize'.  Simplify.

2005-12-28  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (lazy-completion-table): Correct typo in docstring.

	* startup.el (command-line): Use `custom-reevaluate-setting' for
	`send-mail-function'.

	* mail/sendmail.el (send-mail-function): Autoload the standard-value.

2005-12-05  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* mail/smtpmail.el (smtpmail-try-auth-methods):
	Send credentials together with "AUTH PLAIN" command.

2005-12-27  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-region-1): When remapping mouse-1 to
	mouse-2, go back to previously selected window, so it's selected
	when mouse-2 command runs.

2005-12-27  Juri Linkov  <juri@jurta.org>

	* descr-text.el (describe-text-sexp): Use square brackets for
	button [Show] to distinguish it from the property value `show'.
	(describe-property-list): Use `insert-text-button' with
	`help-face' type instead of putting face in quotes, because button
	is not created automatically for a list of faces.
	(describe-text-properties-1): Put button-type value in quotes to
	distinguish from plain text "button".
	(describe-char): Display code point values in hex.  Don't use
	`symbol-name' for `current-input-method' because it is a string.
	Use `insert-text-button' with `help-face' type instead of putting
	hardcoded face in quotes, because button is not created automatically.

2005-12-27  Richard M. Stallman  <rms@gnu.org>

	* progmodes/glasses.el (glasses-face): More specific custom type.

	* files.el (set-visited-file-name): Doc fix.

	* textmodes/flyspell.el (flyspell-external-point-words):
	Use local var buffer-scan-pos to advance scan for next misspelling.
	Advance it only after we find the misspelling.

2005-12-27  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-external-point-words):
	New criteria for finding the misspelling in the buffer.

2005-12-27  Nick Roberts  <nickrob@snap.net.nz>

	* help-mode.el (help-insert-string): Set help-xref-stack-item
	rather than call help-setup-xref.

	* descr-text.el (describe-char): Revert previous changes for
	optional buffer argument.

2005-12-27  Juri Linkov  <juri@jurta.org>

	* help-mode.el (help-insert-string): New function.  Save buffer
	contents in cases where it is impossible to recompute the old contents.

	* descr-text.el (describe-char): Set help-xref-stack-item
	explicitly after buffer has been generated.

2005-12-27  Jan Djärv  <jan.h.d@swipnet.se>

	* cus-start.el (all): Add x-gtk-show-hidden-files.

2005-12-26  Richard M. Stallman  <rms@gnu.org>

	* replace.el (perform-replace): Calculate match-again
	before skipping read-only matches.

	* paren.el (paren-showing-faces): New group.
	(show-paren-match, show-paren-mismatch): Move to that group.

	* button.el (button): Put into group `basic-faces'.

	* progmodes/make-mode.el: Remove faces from group `faces'.

	* apropos.el (apropos, apropos-value): Doc fix.
	(apropos-documentation): Doc fix.

2005-12-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (lazy-completion-table): Remove argument `args'.

	* textmodes/bibtex.el (bibtex-strings, bibtex-reference-keys):
	Don't use the `args' argument of lazy-completion-table.

2005-12-26  Nick Roberts  <nickrob@snap.net.nz>

	* descr-text.el (describe-char): Add optional argument for buffer.
	Set buffer appropriately.  Call help-setup-xref.
	Suggested by Stefan Monnier.

2005-12-26  Juri Linkov  <juri@jurta.org>

	* descr-text.el: Require `help-fns' at runtime.  Don't require
	`button' for byte compilation.
	(describe-text-widget): Add `help-echo' for first button.
	Use `help-info' for second.
	(describe-property-list): Use `help-argument-name' instead of `italic'.
	(describe-text-category): Add prompt to interactive spec.
	Call `help-setup-xref'.
	(describe-char): Use `help-character-set'.  Add `help-echo' for
	code point.  Use `help-input-method'.  Remove superfluous insert.

2005-12-25  Richard M. Stallman  <rms@gnu.org>

	* progmodes/cc-defs.el (c-emacs-features): Do parse-partial-sexp
	at point, in case of narrowing.

	* progmodes/delphi.el (delphi-other-face): Allow nil in type.

	* locate.el (locate-header-face): Allow nil in type.

	* progmodes/cpp.el (cpp-face-none-list): Use cpp-face instead of face.

2005-12-25  Romain Francoise  <romain@orebokech.com>

	* battery.el (battery-linux-proc-acpi): Also try
	`/proc/acpi/thermal_zone/THM0/temperature'.

2005-12-24  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-push-theme): Fix docstring.

	* cus-edit.el (custom-variable-set, custom-variable-save)
	(custom-variable-save): Custom-quote widget values.
	(customize-save-variable): Fix custom-push-theme call.

2005-12-24  Eli Zaretskii  <eliz@gnu.org>

	* w32-fns.el (w32-batch-update-autoloads): New function.

	* makefile.w32-in (autoloads, $(lisp)/mh-e/mh-loaddefs.el):
	Use w32-batch-update-autoloads, and don't setq generated-autoload-file
	from the command line.

2005-12-23  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-push-theme): Clarify docstring.  VALUE nil for
	reset means to remove setting from theme entirely.  Don't keep
	expanding theme-settings list; delete old entries if necessary.

	* cus-edit.el (custom-buffer-create-internal): Move "Erase
	customization" button one line up.
	(custom-themed): New face.
	(custom-magic-alist): New value, THEMED, for theme settings.
	(custom-variable-state-set, custom-face-state-set):
	Check theme-value instead of saved-value.
	(custom-variable-reset-standard, custom-face-reset-standard):
	Remove theme setting entirely.  Recalculate new values.
	(custom-variable-set, custom-variable-set)
	(custom-variable-reset-saved, custom-variable-reset-backup)
	(custom-face-set, custom-face-reset-saved): Update `user' theme.
	(custom-variable-save): Fix typos.

2005-12-23  Juri Linkov  <juri@jurta.org>

	* emacs-lisp/edebug.el (edebug-all-defs, edebug-all-forms):
	Add autoload cookies.
	(edebug-outside-d-c-i-n-s-w): New variable.
	(edebug-display, edebug-outside-excursion): Use it to save the
	original value of default-cursor-in-non-selected-windows.
	Set default-cursor-in-non-selected-windows to t while Edebug
	is active.
	(edebug-mode, edebug-eval-mode): Doc fix.

	* mouse.el (mouse-choose-completion): Replace `buffer-substring'
	with `buffer-substring-no-properties' to remove common substring
	highlighting.

	* info.el (info-other-window, info): Rename function argument
	`file' to `file-or-node'.
	(Info-complete-menu-item): Use local variable `complete-nodes' to
	keep the global value of `Info-complete-nodes' unchanged for
	subsequent completions.
	(info-tool-bar-map): Put `Info-index' icon just before `Info-search'.

	* simple.el (get-next-valid-buffer, last-buffer)
	(next-error-buffer-p, next-error-find-buffer)
	(minibuffer-history-sexp-flag): Doc fix.

	* savehist.el (savehist-mode-hook): Add `:group'.

	* log-view.el: Call autoload for vc-find-version.
	(log-view-current-file): Adjust subgroup numbers.
	(log-view-current-tag): Add `length'.

2005-12-23  Richard M. Stallman  <rms@gnu.org>

	* vc.el (vc-annotate-car-last-cons): Defn moved up.

2005-12-23  Juri Linkov  <juri@jurta.org>

	* hi-lock.el (hi-lock-archaic-interface-message-used)
	(hi-lock-archaic-interface-deduce, hi-lock-mode): Doc fix.
	(hi-lock-mode): Display "Hi" in the mode line only when
	hi-lock-interactive-patterns or hi-lock-file-patterns is non-nil.
	(hi-lock-write-interactive-patterns):
	Use hi-lock-file-patterns-prefix instead of hard-coded "Hi-lock".
	(hi-lock-set-pattern, hi-lock-set-file-patterns)
	(hi-lock-font-lock-hook): Set 3rd arg `how' of
	font-lock-add-keywords to t.

2005-12-23  David Koppelman  <koppel@ece.lsu.edu>

	* hi-lock.el (hi-lock-highlight-range): New variable.
	(hi-lock-mode, hi-lock-unface-buffer): Call font-lock-fontify-buffer
	only if font-lock-fontified is non-nil.  Remove overlays.
	(hi-lock-set-pattern): Call font-lock-fontify-buffer if
	font-lock-fontified is non-nil, otherwise use overlays (instead of
	text properties).
	(hi-lock-string-serialize-hash, hi-lock-string-serialize-serial):
	New variables.
	(hi-lock-string-serialize): New function.

2005-12-23  Jan Djärv  <jan.h.d@swipnet.se>

	* menu-bar.el (menu-find-file-existing): New function.
	(menu-bar-file-menu): Use menu-find-file-existing for Open.

	* tool-bar.el (tool-bar-setup): Open changed to menu-find-file-existing.

2005-12-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el: Remove unnecessary leading * in docstrings.
	(vc-annotate-mode-map): Move initialization into declaration.
	(vc-static-header-alist): Nitpick on the regexp.
	(vc-default-init-version): New fun.
	(vc-register): Use it.
	(vc-insert-headers): Use dolist.
	(vc-annotate-get-backend): Remove unused function.
	(vc-annotate-add-menu): Remove.  Build the menu directly at toplevel.
	(vc-annotate-mode): Remove corresponding call.
	(vc-annotate-car-last-cons): Simplify.
	(vc-annotate-buffers): Remove var.
	(vc-annotate-backend): Make it buffer-local.
	(vc-annotate): Move the interaction to the interactive spec.
	Add a `buf' argument.
	(vc-annotate-warp-version): Use this new `buf' argument to avoid
	killing&creating a vc-annotate buffer, which is very disruptive when
	the buffers are shown in dedicated frames.

2005-12-23  Nick Roberts  <nickrob@snap.net.nz>

	* descr-text.el: Add FSF as maintainer.
	(describe-text-mode, describe-text-mode-map)
	(describe-text-mode-hook, describe-text-done): Delete.  Use normal
	help-mode.
	(describe-text-widget, describe-text-sexp)
	(describe-property-list, describe-text-category)
	(describe-text-properties, describe-text-properties-1)
	(describe-char): Use help buttons instead of widgets.
	(describe-char-unicodedata-file): Make URL link in doc string.

2005-12-22  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-variable-prompt): Say "variable" in prompt.
	(custom-buffer-create-internal): Reword the top-of-buffer help intro.
	Don't include buttons that write a file when there's no file.
	(custom-variable-menu, custom-face-menu, custom-group-menu):
	Don't include commands that write a file when there's no file.
	(customize-browse): Reword the top-of-buffer help intro.
	(custom-buffer-create-internal): Fix previous change.
	(customize-changed-options-previous-release): Prev release is 21.1.
	(customize-changed-options): Doc fix.
	(customize-changed): New alias.
	(custom-reset-menu, custom-magic-alist, Custom-mode-menu):
	Say "standard values".
	(Custom-reset-standard): Doc fix.
	(custom-face-reset-standard): Doc fix.

2005-12-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-default-fontify-buffer): Try and set-defaults
	even if font-lock-mode is non-nil since it may be t without having
	turned on font-lock-mode-internal.
	(font-lock-choose-keywords): Minor optimization.
	(font-lock-add-keywords, font-lock-remove-keywords)
	(font-lock-set-defaults): Don't call make-local-variable on a variable
	that we know to already be local.

2005-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* emacs-lisp/lisp.el (lisp-complete-symbol): Don't print progress
	messages if in the minibuffer.

2005-12-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/flyspell.el (flyspell-check-word-p): Don't quote - in a RE.
	(tex-mode-flyspell-verify, flyspell-get-word)
	(flyspell-external-point-words): Don't use point-min/max uselessly.

	* emacs-lisp/lisp.el (lisp-complete-symbol): Mostly undo the change
	by Kevin Rodgers.  Instead, just hide the completions buffer if we
	don't need to show it.

2005-12-21  Luc Teirlinck  <teirllm@auburn.edu>

	* wid-edit.el (file, directory): Doc fixes for the `define-widget's.

2005-12-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp.el (lisp-complete-symbol): Don't call
	delete-windows-on with a nonexistent buffer.

2005-12-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-modes, gud-tooltip-display):
	Delete defcustom variable :tag names.

2005-12-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-file-re, log-view-message-re): Use shy groups.
	(log-view-font-lock-keywords): Adjust subgroup numbers.
	(log-view-current-tag): Don't hard code the number of subgroups.

2005-12-20  Juri Linkov  <juri@jurta.org>

	* tooltip.el (tooltip): Move defgroup before define-minor-mode.
	(tooltip-x-offset, tooltip-y-offset): Doc fix.

	* menu-bar.el (menu-bar-menu-frame-live-and-visible-p)
	(menu-bar-non-minibuffer-window-p): Instead of checking
	display-multi-frame-p, use selected-frame when menu-updating-frame
	is nil.

2005-12-20  Stuart Herring  <herring@lanl.gov>  (tiny change)

	* align.el (align-rules-list): Use [ \t] instead of \s-
	for column separators in text mode.

2005-12-20  Nick Roberts  <nickrob@snap.net.nz>

	* help-mode.el (help-customize-variable, help-customize-face):
	Don't pop help-xref-stack as help-follow no longer pushes
	anything on to it.

2005-12-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-custom-commands): New option.
	(org-agenda): Offer custom commands on splash screen.
	(org-make-tags-matcher): Parser for Boolean logic added.
	(org-agenda-set-tags): New command.
	(org-agenda-menu, org-agenda-mode-map): Add `org-agenda-set-tags'.
	(org-set-tags): Efficiency improvements.
	(org-auto-align-tags): New option.
	(org-todo, org-demote, org-promote): Realign tags.
	(org-tags-completion-function): Use also "&" and "|" as separators.
	(org-org-menu): Agenda commands simplified.

2005-12-19  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-apropos, customize-apropos-options):
	Docstring changes.

	* font-lock.el (font-lock): Add tags to the links in the defgroup.

2005-12-19  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Wrap while widened.
	(longlines-decode-region, longlines-encode-region): Compute max
	just once.

2005-12-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* cus-edit.el (mac): New group.

	* cus-start.el (all): Add user options in macterm.c.  Add test for
	Mac-related built-ins.  Fix test for GTK-related built-ins.

	* term/mac-win.el (mac-handle-language-change)
	(mac-ae-open-documents, mac-ae-get-url, mac-services-open-file)
	(mac-services-open-selection, mac-services-mail-selection)
	(mac-services-mail-to, mac-services-insert-text)
	(mac-dispatch-apple-event): Add docstrings.
	(x-get-selection, mac-select-convert-to-string): Select coding
	system from `utf-16be' and `utf-16le' using `byteorder'.

2005-12-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (lazy-completion-table): Don't be fooled if the var holds
	a "list" (lambda ...) rather than a real completion list.

	* emacs-lisp/cl-extra.el (cl-macroexpand-all): Fix code-walk for
	lexical-let when encountering ((lambda (...) ...) ...).

2005-12-17  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/sh-script.el (sh-mode):
	* language/ethio-util.el (ethio-fidel-to-sera-mail-or-marker):
	* textmodes/picture.el (picture-mode): Update docstrings.

2005-12-17  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (autoloads, custom-deps): Warn that parts of
	commands enclosed in $(ARGQUOTE)s should not be split between two
	lines, as that will break with GNU Make >3.80, when sh.exe is used
	and arg quoting is with '..'.
	(autoloads): Don't break the quoted --eval expression between
	several lines.

2005-12-17  Chong Yidong  <cyd@stupidchicken.com>

	* emacs-lisp/edebug.el (edebug-safe-prin1-to-string):
	Capture error from printing circular structures.

2005-12-17  Martin Rudalics  <rudalics@gmx.at>

	* wid-edit.el (widget-checkbox-action): Clear undo info.

2005-12-16  Bill Wohler  <wohler@newt.com>

	* menu-bar.el (kill-this-buffer): Set a good example by using menu
	bar, not menubar in comment.

2005-12-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-engine.el (c-after-change-check-<>-operators):
	After-change-functions should not clobber the match data.

2005-12-16  Juri Linkov  <juri@jurta.org>

	* simple.el (choose-completion): Use `buffer-substring-no-properties'
	instead of `buffer-substring'.
	(completion-common-substring): Doc fix.
	(completion-setup-function): Use minibuffer-completion-contents
	instead of minibuffer-contents.  Don't set common-string-length
	initially.  Remove special handling of partial-completion-mode.
	Move computation of completion-base-size into one cond.
	Call completion-base-size-function in mainbuf.  In computation of
	completion-base-size for file name completion don't move point to
	the end of the minibuffer.  Move computation of common-string-length
	into one cond.  Start putting faces only when common-string-length>=0.
	Add condition to put completions-common-part when
	common-string-length>0.

	* complete.el (PC-do-completion): Remove `(equal (point) beg)' to
	place point at the first different character in the minibuffer
	even if this position is at the beginning of the minibuffer.

	* info.el (Info-read-node-name-1): In completion-base-size-function's
	lambda return 1 if common-substring or minibuffer-completion-contents
	starts with (, and 0 otherwise.

	* emacs-lisp/crm.el (crm-minibuffer-completion-help):
	Use `crm-current-element' for second arg of `display-completion-list'.

2005-12-16  Klaus Zeitler  <kzeitler@lucent.com>

	* files.el (set-auto-mode): Look for an interpreter specified on
	the first line also if search for mode specification succeeded,
	but the mode is not known.

2005-12-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-tags-match-list-sublevels): New option.
	(org-open-at-point): Implement tag searches as links.
	(org-fit-agenda-window, org-get-buffer-tags, org-get-tags)
	(org-make-tags-matcher, org-scan-tags, org-activate-tags): New funs.
	(org-tags-sparse-tree, org-tags-view, org-set-tags)
	(org-agenda-dispatch): New commands.
	(org-use-tag-inheritance, org-tags-column): New options.
	(org-tab-follows-link, org-return-follows-link): New options.
	(org-tags): New customize group.
	(org-start-icalendar-file): Get local time zone.
	(org-tags-completion-function): New function.
	(org-set-font-lock-defaults): Make sure links will also be
	highlighted inside headlines.

2005-12-16  Mark Plaksin  <happy@usg.edu>  (tiny change)

	* term.el (term-emulate-terminal):
	Let term-handle-ansi-terminal-messages override what Bash says about
	its current directory.

2005-12-16  Károly Lőrentey  <lorentey@elte.hu>

	* bindings.el (last-buffer): Move to simple.el.
	* simple.el (last-buffer): Move here.
	(get-next-valid-buffer): New function.
	(next-buffer): Use frame-local buffer list, maintain buried buffer list.
	(prev-buffer): Ditto.  Rename to `previous-buffer'.

	* menu-bar.el (menu-bar-update-buffers): Update uses of `prev-buffer'.
	* bindings.el (global-map): Ditto.

2005-12-15  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el: Introductory comment change.
	(custom-magic-alist): Change message string for the `rogue' state.

2005-12-15  Richard M. Stallman  <rms@gnu.org>

	* tooltip.el: Delete defcustom variable :tag names.

	* complete.el (partial-completion-mode): Doc fix.

	* textmodes/flyspell.el (flyspell-external-point-words):
	Use save-excursion to ensure we don't move backward in the
	search loop, not even one character.
	(flyspell-delete-all-overlays): Use remove-overlays directly.

	* textmodes/ispell.el (ispell-current-personal-dictionary): New var.
	(ispell-start-process): Set that variable.
	Clear ispell-buffer-local-name.
	(ispell-internal-change-dictionary):
	Set ispell-current-dictionary after killing process.
	(ispell-buffer-local-dict):
	Don't set spell-personal-dictionary after killing process.
	(ispell-buffer-local-words): Don't clear out ispell-buffer-local-name.
	(ispell-tex-skip-alists, ispell-html-skip-alists)
	(ispell-skip-region-alist): Mark as risky.

	* net/newsticker.el (newsticker--retrieval-timer-list)
	(newsticker--display-timer, newsticker-running-p)
	(newsticker-ticker-running-p): Definitions moved up.

2005-12-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-many-windows): Echo new state in minibuffer.

2005-12-15  David Ponce  <david@dponce.com>

	* recentf.el (recentf-dialog-goto-first): Fix missing error condition.
	(recentf-edit-list, recentf-open-files): Signal an error when
	there is no recent file.

2005-12-14  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* textmodes/texinfmt.el (texinfo-format-region): Set buffer to
	read-only except for texinfo-format-region evaluation.

2005-12-14  Richard M. Stallman  <rms@gnu.org>

	* vc.el (vc-default-previous-version, vc-default-next-version)
	(vc-do-command): Doc fixes.

2005-12-14  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-expand-strings)
	(bibtex-autokey-expand-string, bibtex-name-part)
	(bibtex-entry-type-whitespace, bibtex-entry-type-str)
	(bibtex-any-entry-maybe-empty-head, bibtex-string-type)
	(bibtex-preamble-prefix, bibtex-string-empty-key): New variables.
	(bibtex-entry-type, bibtex-entry-head): Match only valid entries.
	(bibtex-entry-postfix, bibtex-known-entry-type-re)
	(bibtex-valid-entry-re, bibtex-any-valid-entry-re)
	(bibtex-valid-entry-whitespace-re, bibtex-empty-field-re)
	(bibtex-field-name-for-parsing, bibtex-remove-delimiters-string)
	(bibtex-beginning-of-last-entry): Remove.
	(bibtex-parse-field-name): Use bibtex-field-name.  Issue error
	message if comma is missing but buffer is read-only.
	(bibtex-parse-field-text): Handle whitespaces at the end of field
	text.  Return 3-element list with beginning and end of field text
	and end of field.
	(bibtex-end-of-text-in-field, bibtex-end-of-field): Change accordingly.
	(bibtex-parse-field): Remove arg name.  Use bibtex-field-name.
	(bibtex-search-forward-field, bibtex-search-backward-field):
	Search always delimited by limits of entry.  Use more efficient
	search algorithms.
	(bibtex-name-in-field): Use bibtex-start-of-name-in-field and
	bibtex-end-of-name-in-field.
	(bibtex-text-in-field-bounds): Handle BibTeX strings when
	extracting the content of a field.
	(bibtex-text-in-field): Use search limits.
	(bibtex-parse-string-prefix): Handle empty string keys based on
	bibtex-string-empty-key.
	(bibtex-parse-string): Fix docstring.
	(bibtex-text-in-string): Use bibtex-text-in-field-bounds.
	(bibtex-preamble-prefix, bibtex-strings): New functions.
	(bibtex-skip-to-valid-entry): Include preceding whitespace in
	BibTeX entries (consistent with other BibTeX functions).
	(bibtex-map-entries): Use bibtex-skip-to-valid-entry.
	(bibtex-search-entry): Fix docstring.  Simplify.
	(bibtex-flash-head, bibtex-complete-string-cleanup)
	(bibtex-count-entries, bibtex-sort-buffer): Simplify.
	(bibtex-beginning-of-first-entry): Use bibtex-skip-to-valid-entry.
	(bibtex-parse-entry): New optional arg content.
	(bibtex-format-entry, bibtex-autofill-entry, bibtex-url): Use it.
	Use bibtex-text-in-field-bounds.
	(bibtex-print-help-message): Handle BibTeX strings and preambles.
	(bibtex-end-of-entry): Use bibtex-preamble-prefix and
	bibtex-parse-string-postfix.
	(bibtex-find-text-internal): New function.
	(bibtex-remove-delimiters): Use it.
	(bibtex-find-text): Use it.  New optional arg help.
	(bibtex-complete): Handle BibTeX string and preamble entries.
	(bibtex-Preamble): Fix order of closing delimiters.

2005-12-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-default-revert): New fun.

	* vc-mcvs.el (vc-mcvs-revert): Fix call to vc-default-revert.

2005-12-14  Romain Francoise  <romain@orebokech.com>

	* font-lock.el (font-lock-keywords-alist): Rename `append' to `how'.
	(font-lock-add-keywords, font-lock-update-removed-keyword-alist):
	(font-lock-remove-keywords): Likewise.

2005-12-14  Juri Linkov  <juri@jurta.org>

	* log-view.el (log-view-diff): Doc fix.

	* isearch.el (isearch-query-replace): Use (mark) instead of
	isearch-opoint if mark is active in transient-mark-mode.

2005-12-14  Aaron S. Hawley  <Aaron.Hawley@uvm.edu>

	* isearch.el (isearch-query-replace): Check for isearch-other-end.

2005-12-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* progmodes/cpp.el (cpp-face): New widget.
	(cpp-known-face, cpp-unknown-face, cpp-edit-list): Use it.

2005-12-14  Juri Linkov  <juri@jurta.org>

	* help-macro.el (make-help-screen): Bind `inhibit-read-only' to t
	around `erase-buffer' and `insert'.

	* descr-text.el (describe-text-properties): Replace buffer name
	"*Help-2*" with "*Help*<2>".
	(describe-char): Add functions print-help-return-message,
	toggle-read-only.  Use help-setup-xref with nil to not store
	describe-char in help-xref-stack.  Use help-make-xrefs to
	make [back] button.

	* desktop.el (desktop-minor-mode-table): Add vc-dired-mode with nil.

	* wdired.el (wdired-old-point): New internal variable.
	(wdired-change-to-wdired-mode): Set it buffer-locally.
	(wdired-abort-changes): Restore point after aborting changes.

2005-12-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-do-command): Add a new value t for okstatus.

	* vc-svn.el (vc-svn-registered): Use it to avoid popping up a spurious
	frame in case of errors.

2005-12-13  Jan Djärv  <jan.h.d@swipnet.se>

	* menu-bar.el (menu-bar-showhide-fringe-menu): Move "On the Right"
	so it comes after "On the Left" in the menu.

2005-12-12  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-apropos, customize-apropos-options)
	(customize-apropos-faces, customize-apropos-groups): Doc fixes.

2005-12-12  Bill Wohler  <wohler@newt.com>

	* vc-svn.el (vc-svn-registered): Fix problem of visiting
	non-writable Subversion-controlled files by saving window
	configuration before calling vc-do-command.  vc-do-command calls
	pop-to-buffer on error which is unexpected during registration.

2005-12-12  Jay Belanger  <belanger@truman.edu>

	* calc/README: Update the summary of changes.

2005-12-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* descr-text.el (describe-char): Rework last fix to solve the problem
	is the same way it's solved for everything else in that function
	(i.e. by extracting the info before setting up the *Help* buffer).

2005-12-12  Kim F. Storm  <storm@cua.dk>

	* subr.el (version-regexp-alist): Allow space as separator before
	non-numeric part, e.g. "1.0 alpha".
	(version-to-list): Interpret .X.Y version as 0.X.Y version.

2005-12-12  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda, org-timeline, org-todo):
	Implement Logging and the keep-modes setting.
	(org-get-category): Make sure a string is returned.
	(org-log-done): New function.
	(org-log-done, org-closed-string): New options.

2005-12-12  Jan Djärv  <jan.h.d@swipnet.se>

	* tooltip.el (tooltip-y-offset): Change default to 20.

2005-12-12  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-vertical-line): Use adjust-window-trailing-edge.

	* frame.el (display-hourglass): Doc fix.

	* help.el (help-for-help-internal): Simplify entry for `a'.

	* info.el (Info-on-current-buffer): Doc fix.
	(info-insert-file-contents): Don't test (featurep 'jka-compr).

	* startup.el (inhibit-splash-screen): Make this the real name.
	(inhibit-startup-message): Make this the alias.
	(command-line): Find only simple.el, and use its directory
	to fill in other preloaded files' names.
	(command-line): Deactivate the mark if deactivate-mark is set.

	* international/mule.el (load-with-code-conversion):
	Bind deactivate-mark.

	* progmodes/compile.el (compilation-error-regexp-alist): Doc fix.

2005-12-11  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-apropos): Avoid listing an option more
	than once under different aliases.  No longer list user options
	that are not defined with defcustom (unless a prefix arg is given).
	Doc fix.
	(customize-apropos-options): Doc fix.

2005-12-11  Juri Linkov  <juri@jurta.org>

	* frame.el (set-background-color, set-foreground-color)
	(set-cursor-color, set-mouse-color, set-border-color):
	Add explicit prompts to read colors by `facemenu-read-color'.
	(show-trailing-whitespace, blink-cursor-delay)
	(blink-cursor-interval, display-hourglass, hourglass-delay):
	Remove tags.
	(display-hourglass, hourglass-delay): Doc fix.
	(cursor-in-non-selected-windows): Capitalize words in tag.

	* faces.el (frame-background-mode): Replace `choice-item' keywords
	with `const' to not make [default] button.  Change default value tag
	from `default' to `automatic'.  Doc fix.
	(trailing-whitespace) <defface>: Change group `whitespace' to
	`whitespace-faces'.

2005-12-11  Richard M. Stallman  <rms@gnu.org>

	* buff-menu.el (Buffer-menu-sort-column): Not a user variable.

2005-12-11  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Create keymap for mac-apple-event-map.

2005-12-11  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-mode): Move to start of file so that it
	appears at top of customize buffer.

	* progmodes/gud.el (gud-tooltip-modes, gud-tooltip-display):
	Add the gud groupname.
	(gud-tooltip-mode): Add the tooltip groupname.
	(gud-tooltip-echo-area): Add the gud groupname.  Remove tag to
	avoid conflict with tooltip-use-echo-area.

2005-12-10  Romain Francoise  <romain@orebokech.com>

	* help.el (help-for-help-internal): Add `r' in doc string.

2005-12-10  Johan Bockgård  <bojohan@dd.chalmers.se>

	* align.el (align-regexp, align-highlight-rule):
	Use region-beginning and region-end instead of point and mark, so that
	repetition (with `repeat-complex-command') recomputes the region
	bounds.

2005-12-10  Lennart Borgman  <lennart.borgman.073@student.lu.se>

	* window.el (bw-get-tree, bw-get-tree-1, bw-find-tree-sub)
	(bw-find-tree-sub-1, bw-l, bw-t, bw-r, bw-b, bw-dir, bw-eqdir)
	(bw-refresh-edges, bw-adjust-window, bw-balance-sub): New functions.
	(balance-windows): Rewrite using the above new functions.

2005-12-10  David Koppelman  <koppel@ece.lsu.edu>

	* hi-lock.el (hi-lock-mode): Rename from hi-lock-buffer-mode;
	react if global-hi-lock-mode seems intended.
	(global-hi-lock-mode): Renamed from hi-lock-mode.
	(hi-lock-archaic-interface-message-used)
	(hi-lock-archaic-interface-deduce): New variables.
	(turn-on-hi-lock-if-enabled, hi-lock-line-face-buffer)
	(hi-lock-face-buffer, hi-lock-face-phrase-buffer)
	(hi-lock-find-patterns, hi-lock-font-lock-hook):
	Replace hi-lock-buffer-mode with hi-lock-mode.

2005-12-10  Kevin Rodgers  <ihs_4664@yahoo.com>  (tiny change)

	* emacs-lisp/lisp.el (lisp-complete-symbol): Regenerate the
	completion list, even after a partial completion has been
	inserted in the current buffer.  If there are more than 1
	completion, redisplay the *Completions* buffer; if the
	completion is unique, delete the *Completions* window.

2005-12-10  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-next-same-subject): Handle multiple "Re: "
	strings and long subject lines that were broken into multiple
	lines at arbitrary places.  Handle subjects that have "Re: " in
	the middle.

2005-12-10  John W. Eaton  <jwe@octave.org>

	* progmodes/octave-mod.el (octave-electric-space): Don't indent
	comments or strings if octave-auto-indent is nil.

2005-12-10  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Require url when compiling.
	Call mac-process-deferred-apple-events after loading init files.
	(mac-apple-event-map): New defvar.  Define event handlers in it.
	(core-event, internet-event): New Apple event class symbols.
	(open-application, reopen-application, open-documents)
	(print-documents, open-contents, quit-application)
	(application-died, show-preferences, autosave-now, get-url):
	New Apple event ID symbols.
	(about): New HICommand ID symbol.
	(mac-event-spec, mac-event-ae): New macros.
	(mac-ae-parameter, mac-ae-list, mac-bytes-to-integer)
	(mac-ae-selection-range, mac-ae-text-for-search)
	(mac-ae-open-documents, mac-ae-text, mac-ae-get-url): New functions.
	(mac-application-menu-map): Remove keymap.  Handlers for HICommand
	and Services menu events are now defined in mac-apple-event-map.
	(mac-drag-n-drop): Remove selection range handling.

2005-12-10  Kenichi Handa  <handa@m17n.org>

	* simple.el (zap-to-char):
	* isearch.el (isearch-process-search-char): Translate CHAR by
	translation-table-for-input.

2005-12-09  Chong Yidong  <cyd@stupidchicken.com>

	* foldout.el (foldout-exit-fold): Properly hide subtree.

2005-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* files.el (save-buffer):
	* international/ucs-tables.el (ucs-set-table-for-input):
	* mail/mail-extr.el (mail-extract-address-components):
	* mail/sendmail.el (mail-mode): Reformat doc string.

2005-12-09  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-highlight): Change main overlay priority
	from 1 to 1001.  Simplify.
	(isearch-lazy-highlight-update): Change lazy overlay priority
	from 0 to 1000.

	* replace.el (replace-highlight): Change overlay priority from
	1 to 1001.

	* textmodes/ispell.el (ispell-highlight-spelling-error-overlay):
	Change overlay priority from 1 to 1001.  Reuse existing overlay.

	* compare-w.el (compare-windows-highlight): Change overlay
	priority from 1 to 1000.

	* menu-bar.el (menu-bar-edit-menu): Add listp around
	pending-undo-list to disable menu item "undo" when pending
	undo list is empty.

	* locate.el (locate): Disable undo in *Locate* buffer.

2005-12-09  Kim F. Storm  <storm@cua.dk>

	* mail/smtpmail.el (smtpmail-via-smtp): Disable undo in SMTP buffer.

2005-12-09  David Ponce  <david@dponce.com>

	* recentf.el: Improvement of the menu code.
	(recentf-enabled-p): Move before first use.  Use `kill-emacs-hook'
	instead of menu hook.
	(recentf-show-menu, recentf-hide-menu): New functions.
	(recentf-menu-customization-changed, recentf-mode): Use them.
	(recentf-menu-action, recentf-max-menu-items)
	(recentf-menu-open-all-flag, recentf-menu-append-commands-flag)
	(recentf-arrange-by-rule-others)
	(recentf-arrange-by-rules-min-items)
	(recentf-arrange-by-rule-subfilter): Don't use
	`recentf-menu-customization-changed'.
	(recentf-arrange-rules): Likewise.  Accept functions to compute
	sub-menu titles.
	(recentf-menu-filter): Likewise.  Doc fix.
	(recentf-menu-value-shortcut): Doc fix.
	(recentf-dump-variable): Quote atom value.
	(recentf-make-menu-items): Update to use it as a menu filter.
	(recentf-match-rule): New function.
	(recentf-arrange-by-rule): Use it.
	(recentf-indirect-mode-rule): New function.
	(recentf-build-mode-rules): Use it.
	(recentf-dir-rule): New function.
	(recentf-arrange-by-dir): Use it.
	(recentf-filter-changer-current): Rename from
	`recentf-filter-changer-state'.  All references updated.
	(recentf-filter-changer-alist): Update filter names.
	(recentf-filter-changer-select): New function.
	(recentf-filter-changer): Use it.  Make a sub-menu from filters
	available in `recentf-filter-changer-alist'.
	(recentf-data-cache, recentf-clear-data)
	(recentf-update-menu): Remove.  All references updated.
	(recentf-match-rule-p, recentf-build-dir-rules)
	(recentf-filter-changer-goto-next)
	(recentf-filter-changer-get-current)
	(recentf-filter-changer-get-next): Remove.

2005-12-08  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-buffer-create-internal): Relabel the whole
	buffer "Reset" button to "Reset to Current" for consistency with
	the State buttons.

2005-12-08  John Paul Wallington  <jpw@pobox.com>

	* ibuf-ext.el (define-ibuffer-filter filename):
	If `dired-directory' is a list then really use its car.

2005-12-08  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--rectangle-aux-replace):
	Fix indentation of text on right side of replaced rectangle.

2005-12-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-buttons, gud-tooltip-tips):
	No need to check gud-comint-buffer is bound.
	(gdb): Prevent multiple debugging when first session uses gdba.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	CC Mode update to 5.31.

	* progmodes/cc-subword.el: Add a dummy `c-subword-mode' for
	Emacsen which lack `define-minor-mode'.  (Currently Emacs <21.
	We might do this function properly in the future).

	* progmodes/cc-cmds.el, cc-defs.el, cc-styles.el, cc-vars.el:
	New macros c-sentence-end and c-default-value-sentence end, to cope
	with Emacs 22's new function `sentence-end'.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-show-syntactic-information): Solve the
	compat issue using `c-put-overlay' and `c-delete-overlay'.

	* progmodes/cc-defs.el (c-put-overlay, c-delete-overlay):
	New compat macros to handle overlays/extents.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-fix.el: Add definitions of the macros push and pop
	(for GNU Emacs 20.4).

	* progmodes/cc-defs.el
	(i): Load cc-fix.elc for `push' and `pop' (for GNU Emacs 20.4).

	* progmodes/cc-cmds.el (c-show-syntactic-information): Change the
	highlighting mechanism so it will work in XEmacs too.

	* progmodes/cc-defs.el: Insert c-int-to-char.

	* progmodes/cc-langs.el (c-nonsymbol-token-char-list): Insert a
	call to the new macro c-int-to-char.  This solves XEmacs's
	regarding characters as different from integers.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el (c-make-syntactic-matcher):
	New internal helper.

	(c-cpp-matchers, c-basic-matchers-before): Use the `eval'
	construct to make the indirect face lookup work in XEmacs.

	(c-cpp-matchers): Append the negation char face to the existing
	fontification, so that the cpp face doesn't disappear.
	Use `c-make-syntactic-matcher' to avoid negation chars in comments
	and strings.

	* progmodes/cc-fonts.el (c-negation-char-face-name): New variable
	to map to `font-lock-negation-char-face' in emacsen where it exists.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el: Bind c-subword-mode to C-c C-w.

	* progmodes/cc-subword.el, cc-cmds.el, cc-mode.el:
	Rename "c-subword-move-mode" as "c-subword-mode".

	* progmodes/cc-mode.el: Added tty suitable bindings for C-c
	<delete> and C-c C-<delete>.  (To the c-hungry- delete functions).

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el: Added autoload directive for
	`c-subword-move-mode' for use in older emacsen.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el:
	(i): Insert a binding for C-c C-backspace into
	c-bind-special-erase-keys which works in TTYs.
	(ii): Make sure that when file styles are used, any explicitly
	given style variables take priority over those in the style.
	Do this by calling `hack-local-variables' a second time.

	* progmodes/cc-vars.el: Add language specific customization
	widgets for AWK to c-doc-comment-style, c-require-final-newline
	and c-default-style.  Add a defcustom for awk-mode-hook.
	Give c-syntactic-element and c-syntactic-context doc-strings by
	directly setting their `variable-documentation' property.
	This allows Emacs 22.1 to read these with C-h v.

	* progmodes/cc-awk.el: Apply a tidy-up patch (from Stefan Monnier).

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el, cc-vars.el
	(gtkdoc-font-lock-doc-comments, gtkdoc-font-lock-doc-protection)
	(gtkdoc-font-lock-keywords): GtkDoc patterns contributed by
	Masatake YAMATO.

	(c-doc-comment-style): Made GtkDoc default in C mode.

	* progmodes/cc-mode.el: Fixed key bindings for C-c C-<backspace>
	and C-c C-<delete>.

	(c-bind-special-erase-keys): New function for use on
	`normal-erase-is-backspace-hook' to bind C-c C-<delete> correctly.

	* progmodes/cc-cmds.el (c-hungry-delete): New function to fix
	<delete> key behavior in XEmacs according to `delete-forward-p'.
	C.f. `c-electric-delete'.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-mode.el: Give c-hungry-backspace and
	c-hungry-delete-forward permanent key bindings.

	* progmodes/cc-cmds.el (c-electric-semi&comma):
	Bind c-syntactic-context for calls to "criteria functions", for
	consistency with other calls to user functions.

	* progmodes/cc-cmds.el (c-indent-command): Expunge use of
	`current-prefix-arg', since this might be the prefix arg to a
	command which calls c-indent-command as a function.  Change the
	interactive spec from "p" to "P".

	* progmodes/cc-styles.el: Amend the doc-string of c-set-style, in
	response to a report from Joseph Kiniry <kiniry@acm.org> that it
	was difficult to understand.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-on-identifier): Fix bug when at the
	first char of an identifier.

	* progmodes/cc-engine.el (c-on-identifier): Handle the "operator
	+" syntax in C++.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-mask-paragraph): Correct, so that
	auto-fill doesn't split a c-comment's last word from a hanging
	"*/" when a space is typed between them after fill-column.

	* progmodes/cc-defs.el: New macro c-delete-and-extract-region.

	* progmodes/cc-styles.el (c-set-style)
	(c-setup-paragraph-variables): Abort the command if we're not in a
	CC Mode buffer.

	* progmodes/cc-align.el (c-lineup-C-comments): Correct indentation
	with blank comment-prefix, and a blank line as the comment's
	second line.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el (c-cpp-matchers, c-basic-matchers-before):
	Incorporate the patterns added in the Emacs development branch
	for the new Emacs 22 face `font-lock-negation-char-face'.

	* progmodes/cc-fonts.el (c-invalid-face-name): Use "red1" instead
	of "red" since it stands out better in xterms and DOS terminals.

	* progmodes/cc-engine.el (c-literal-faces):
	Add `font-lock-comment-delimiter-face' which is new in Emacs 22.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: Make C-c C-a (`c-toggle-auto-newline')
	forcibly enable c-electric-flag.

	* progmodes/cc-vars.el, cc-cmds.el: New clean-up
	`comment-close-slash' on c-electric-slash: if enabled, typing `/' just
	after the comment-prefix of a C-style comment will close that comment.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el (c-basic-matchers-before)
	(c-complex-decl-matchers): Fix the "not-arrow-prefix" regexp used
	in Pike.

	* progmodes/cc-langs.el (c-other-op-syntax-tokens): Only C++ has
	digraphs.

	* progmodes/cc-fonts.el, cc-langs.el, cc-engine.el
	(c-cpp-message-directives, c-cpp-include-directives)
	(c-opt-cpp-macro-define, c-opt-cpp-macro-define-start)
	(c-cpp-expr-directives): Introduce new language constants to
	control cpp syntax in a cleaner way.

	(c-cpp-expr-functions): Rename from c-cpp-defined-fns.

	(c-cpp-matchers, c-forward-to-cpp-define-body): Use them.

	* progmodes/cc-langs.el, cc-fonts.el (c-string-escaped-newlines)
	(c-multiline-string-start-char): New language constants and
	variables to specify how newlines in string literals work.

	(c-font-lock-invalid-string): Use them.

	* progmodes/cc-cmds.el (c-try-one-liner): Robustness fix if an
	unbalanced close brace is entered.  Optimization by avoiding going
	back over arbitrarily large blocks.  Removed hints that this
	function only would be relevant/useful in AWK.

	(c-electric-brace): Indent syntactically after the cleanups since
	lineup functions might do it differently then.

	* progmodes/cc-engine.el, cc-langs.el
	(c-opt-op-identifier-prefix): New language constant and variable.

	(c-just-after-func-arglist-p, c-after-special-operator-id)
	(c-search-decl-header-end, c-inside-bracelist-p): Use it.

	* progmodes/cc-align.el, cc-engine.el
	(c-after-special-operator-id): New helper to handle C++ operator
	identifiers.

	(c-lineup-topmost-intro-cont, c-just-after-func-arglist-p)
	(c-guess-basic-syntax): Handle C++ operator identifiers in
	declarations.

	* progmodes/cc-langs.el (c-assignment-operators): Add the
	trigraph version of ^= too.

	* progmodes/cc-langs.el (c-assignment-operators): Add the
	trigraph version of |= in C++.

	* progmodes/cc-fonts.el (c-font-lock-declarators):
	Handle `c-decl-hangon-kwds' after the identifier name.

	* progmodes/cc-engine.el (c-guess-basic-syntax): When deciding
	whether an arglist is "nonempty", ignore a comment after the open
	paren if it isn't followed by a non-comment token on the same line.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Case 4:
	Enable heuristics below the point to cope with classes inside special
	brace lists in Pike.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: Amend c-point-syntax to handle macros.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-guess.el (cc-guess-install): New function to
	install an already guessed style in another buffer.

	* progmodes/cc-defs.el (c-tentative-buffer-changes): No longer
	sets `inhibit-read-only' - `c-save-buffer-state' should be used
	anyway if the change always is undone.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	Implement togglable electricity:

	* progmodes/cc-defs.el: Enhance c-save-buffer-state's doc-string,
	saying when it should be used.

	* progmodes/cc-engine.el: Add the new buffer-local variable,
	c-electric-flag.

	* progmodes/cc-langs.el: Change the name of c-toggle-auto-state to
	c-toggle-auto-newline.

	* progmodes/cc-mode.el: Rename c-toggle-auto-state to
	c-toggle-auto-newline.  Remove the binding for
	c-toggle-auto-hungry-state.  Add the binding C-c C-l for the new
	c-toggle-electric-state.

	* progmodes/cc-vars.el: Make c-syntactic-indentation buffer local.

	* progmodes/cc-cmds.el: Add `c-bytecomp-defun's for
	c-\(forward\|backward\)-subword.
	(c-update-modeline): Add the new modeline flag `l' for
	`c-electric-flag'.  Make the auto-newline flag `a' dependent on `l'.
	(c-toggle-auto-state): Rename it to `c-toggle-auto-newline'.
	Make the old name an alias of the new name.
	(c-toggle-electric-state): New function.
	(c-electric-\(pound\|brace\|slash\|star\|semi&comma\|colon\|lt-gt\|paren\|continued-statement\)):
	Adapt these functions to do electric things only when
	c-electric-flag is non-nil.
	(c-point-syntax, c-brace-newlines, c-try-oneliner): Extract these
	new functions from c-electric-brace.
	(c-point-syntax): Add a check for "virtual semicolons" in AWK
	mode, so that the tentative extra newline doesn't change the
	syntax of the following brace.
	(c-electric-brace): Restructure by extracting the above functions.
	Tidy up the coding somewhat.
	(c-electric-semi&comma, c-electric-colon, c-electric-paren):
	restructure a bit.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-show-syntactic-information): Show the
	anchor position(s) using faces.  Thanks to Masatake YAMATO for the idea.

	* progmodes/cc-mode.el, cc-cmds.el, cc-defs.el, cc-engine.el
	(c-submode-indicators): Change name from `c-auto-hungry-string'
	since it's now used to track another submode.

	(c-update-modeline): Convert to function and extended to check
	`c-subword-move-mode'.

	(c-forward-into-nomenclature, c-backward-into-nomenclature):
	Convert to compat aliases for `c-forward-subword' and
	`c-backward-subword'.

	* progmodes/cc-subword.el: New functions and minor mode to handle
	SillyCapsedStyleIndentifiers, contributed by Masatake YAMATO:

	(c-forward-subword, c-backward-subword, c-mark-subword)
	(c-kill-subword, c-backward-kill-subword, c-transpose-subwords)
	(c-capitalize-subword, c-downcase-subword, c-upcase-subword):
	Functions corresponding to the standard word handling functions.

	(c-subword-move-mode): Minor mode that replaces all the standard
	word handling functions with their subword equivalences.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-vars.el (c-cleanup-list): Insert a customization
	entry for one-liner-defun.

	* progmodes/cc-defs.el: Give c-tentative-buffer-changes its own
	name in its def-edebug-spec.

	* progmodes/cc-cmds.el (c-electric-brace): Make the
	one-liner-defun clean-up work with empty-defun-braces.  o-l-d now
	compacts space before a comment, if this will make things fit on
	one line.

	Introduce an "awk" style, mainly for auto-newline and clean-ups.

	* progmodes/cc-align.el: New function c-snug-1line-defun-close.

	* progmodes/cc-cmds.el: In c-electric-brace, add code for new
	clean-up one-liner-defun.

	* progmodes/cc-styles.el: Add the new "awk" style.

	* progmodes/cc-vars.el: Add description of one-liner-defun to
	c-cleanup-list's doc-string.  New user options,
	c-max-one-liner-length.  In c-default-style, set the default style
	for AWK to "awk".

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el (c-forward-label): Fix fontification of
	macros inside labels.

	* progmodes/cc-engine.el (c-looking-at-bos): Obsolete in favor of
	`c-at-statement-start-p' and `c-at-expression-start-p'.

	* progmodes/cc-defs.el (c-tnt-chng-record-state): Don't signal an
	error if the mark isn't set.

	* progmodes/cc-engine.el (c-guess-continued-construct)
	(c-guess-basic-syntax): Use `c-forward-decl-or-cast-1' to more
	accurately detect functions inside functions.

	* progmodes/cc-engine.el (c-at-expression-start-p): New function
	like `c-at-statement-start-p' that additionally recognizes commas
	and expression parentheses as delimiters.

	* progmodes/cc-engine.el (c-looking-at-inexpr-block): Add flag
	to avoid heuristics that doesn't work for unclosed blocks.
	(c-at-statement-start-p): New function.

	* progmodes/cc-engine.el, cc-fonts.el: Fixes in handling of
	Objective-C directives, e.g. directives spanning lines should work
	reasonably well now.

	(c-put-c-type-property, c-clear-c-type-property): New helpers.

	(c-forward-objc-directive): New function to move over any ObjC
	directive.

	(c-just-after-func-arglist-p, c-guess-basic-syntax)
	(c-basic-matchers-before): Use it.

	(c-font-lock-objc-iip-decl): Remove.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Some improvement
	in the template arglist recognition.

	* progmodes/cc-styles.el (c-style-alist): Fix several
	inconsistencies in the Whitesmith style.

	* progmodes/cc-align.el (c-lineup-after-whitesmith-blocks):
	New lineup function to get lines after Whitesmith style blocks
	correctly indented.

	(c-lineup-whitesmith-in-block): Back out the compensation for
	opening parens since it's done using `add' lists in the style
	definition instead.  Don't use the anchor position since it varies
	too much between the syntactic symbols. :P

	* progmodes/cc-vars.el (c-valid-offset): Update.

	* progmodes/cc-engine.el (c-evaluate-offset): Extend to handle
	lists where the offsets are combined according to several
	different methods: `first', `min', `max', and `add'.
	Report offset evaluation errors with `c-benign-error' so that some kind
	of reindentation still is done.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Anchor `arglist-intro' the same way as `arglist-cont-nonempty' and
	`arglist-close'.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fix similar
	situations for `arglist-cont-nonempty' and `arglist-close'.

	* progmodes/cc-langs.el (c-opt-identifier-concat-key-depth): New const.

	* progmodes/cc-defs.el: Use `cc-bytecomp-fboundp' and
	cc-bytecomp-boundp' in a number of places.

	* progmodes/cc-engine.el (c-beginning-of-statement-1): Fix a
	macro related issue.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-awk.el: Change the terminology of regexps: A char
	list is now [asdf], a char class [:alpha:].
	Include code for char classes.
	Set c-awk-NL-prop on lines ending in open strings.  (Bug fix.)
	Add character classes (e.g. "[:alpha:]") into AWK Mode's regexps.

	Remove (nearly all of) the cruft associated with AWK Mode's former
	concept of "virtual semicolons":

	Adapt c-beginning-of-statement, c-end-of-statement (together with
	subfunctions) to use the new notion of "virtual semicolon" in
	place of the old awkward special handling for AWK.  There remains
	much cruft in cc-awk.el, cc-cmds.el and cc-engine.el to clear out.
	* progmodes/cc-cmds.el:
	(c-ascertain-adjacent-literal): In the backwards direction, now
	recognizes AWK regexp delimiters as string delimiters.
	(c-after-statement-terminator-p): Adapt for virtual semicolons;
	check more rigorously for "end of macro".
	(c-back-over-illiterals, c-forward-over-illiterals): Adapt for
	virtual semicolons.
	(c-beginning-of-statement): Adapt for virtual semicolons; Separate
	out the code for forward movement into ...
	(c-end-of-statement): Now contains the code for forward movement,
	adapted for virtual semicolons.

	* progmodes/cc-engine.el:
	(c-ws*-string-limit-regexp): New regexp.
	(c-forward-single-comment, c-backward-single-comment): Comment out
	the (now redundant) "special" AWK stuff.

	* progmodes/cc-styles.el, cc-vars.el: Change the settings of
	c-string-par-start, c-string-par-separate to be more like Text
	Mode than Fundamental Mode.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el (c-font-lock-declarations): Always narrow
	to the fontified region so that fontification doesn't occur
	outside it (could happen e.g. when fontifying a line with an
	unfinished declaration).

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-awk.el: Move regexps for analyzing AWK code to near the
	start of the file.  ^L now separate sections of the file.
	(c-awk-non-eol-esc-pair-re, c-awk-blank-or-comment-line-re)
	(c-awk-one-line-possibly-open-string-re)
	(c-awk-regexp-one-line-possibly-open-char-class-re)
	(c-awk-one-line-possibly-open-regexp-re)
	(c-awk-one-line-non-syn-ws*-re): New defconsts.
	(c-awk-at-vsemi-p, c-awk-vsemi-status-unknown-p): New functions.

	Amend the concept of "virtual semicolons" (in the indentation
	engine) for languages like AWK, such that they are now
	conceptually attached to end of the last token of a statement, not
	the end of the line.  (In AWK Mode, however, the pertinent text
	property is still physically set on the EOL.)  Remove the specific
	tests for awk-mode, thus facilitating the introduction of other
	language modes where EOLs can end statements.
	(Note: The functionality in cc-cmds.el, specifically
	c-beginning/end-of-statement has yet to be amended.)

	* progmodes/cc-defs.el (c-at-vsemi-p, c-vsemi-status-unknown-p):
	New macros.

	* progmodes/cc-langs.el: Added `#' into AWK Mode's value of
	c-stmt-delim-chars.  New c-lang-defvars: c-at-vsemi-p-fn,
	c-vsemi-status-unknown-p-fn (in a new page).

	* progmodes/cc-engine.el: In c-beginning-of-statement-1,
	c-crosses-statement-barrier-p, c-guess-basic-syntax, replace
	numerous awkward forms like
	(if (c-major-mode-is 'awk-mode) (c-awk-prev-line-incomplete-p))
	with (c-at-vsemi-p).  Fix a few typos.  In c-guess-basic-syntax, new
	variable before-ws-ip, the place just after char-before-ip appears.

	* progmodes/cc-mode.el: Fix what's almost a semantic ambiguity in
	a comment.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el (c-electric-brace): Clean up using
	`c-tentative-buffer-changes'.

	* progmodes/cc-defs.el (c-region-is-active-p): Simplify and
	convert to macro to choose between Emacs and XEmacs at compile time.

	(c-set-region-active): New set counterpart to `c-region-is-active-p'.

	(c-tentative-buffer-changes): New macro to handle temporary buffer
	changes in a convenient way.

	(c-tnt-chng-record-state, c-tnt-chng-cleanup): Internal helpers
	for `c-tentative-buffer-changes'.

	* progmodes/cc-engine.el (c-looking-at-inexpr-block): Tighten up
	the checks for paren sexps between the point and the keyword, to
	avoid some false alarms.

	* progmodes/cc-engine.el, cc-langs.el (c-looking-at-inexpr-block):
	Fixed a situation where an error could be thrown for unbalanced
	parens.  Changed to make use of c-keyword-member' to avoid some
	repeated regexp matches.

	(c-opt-lambda-key, c-opt-inexpr-block-key, c-opt-inexpr-class-key):
	These language variable are no longer necessary.

	(c-block-stmt-kwds): New language constant used by
	c-looking-at-inexpr-block'.

	(c-guess-basic-syntax): Remove an optional check that looked at
	the existence of the now removed language variables.

	* progmodes/cc-engine.el (c-fdoc-shift-type-backward)
	(c-forward-decl-or-cast-1): Fix invalid recognition of C++ style
	object instantiation expressions as declarations in some contexts.
	This bug only affected languages where the declarator can't be
	enclosed in parentheses.

	* progmodes/cc-styles.el (c-style-alist): Fix the GNU style to
	insert newlines before and after substatement braces.

	* progmodes/cc-engine.el: Improved the heuristics for recognizing
	function declaration headers and the handling of C++ style member
	init lists.

	(c-just-after-func-arglist-p): Rewritten to use
	`c-forward-decl-or-cast-1'.  Now behaves a bit differently too.

	(c-beginning-of-member-init-list): Remove since it isn't used anymore.

	(c-guess-basic-syntax): Adapt case 5B for the new
	`c-just-after-func-arglist-p'.  Merge cases 5B.1 and 5B.3.
	Remove cases 5D.1 and 5D.2 since they aren't trigged anymore (case 5B.1
	covers all cases now).

	* progmodes/cc-defs.el (c-point): Add `bosws' and `eosws'.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, cc-styles.el, cc-vars.el: New variables
	c-string-par-start/separate c-sentence-end-with-esc-eol,
	initialized in c-setup-paragraph-variables, used in string
	scanning subroutines of c-beginning-of-statement.

	* progmodes/cc-cmds.el (c-electric-brace): Don't delete a comment
	which precedes the newly inserted `{'.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, cc-langs.el: Rewrote the recognition
	function for declaration level blocks.  It should now cope with
	templates better and also be a lot more comprehensible.

	(c-looking-at-decl-block): The new function.

	(c-search-uplist-for-classkey): The old one.  It's now a wrapper
	for compatibility.

	(c-add-class-syntax, c-guess-continued-construct)
	(c-guess-basic-syntax): Adapt for `c-looking-at-decl-block'.

	(c-decl-block-key): Change to tell apart ambiguous and
	unambiguous keywords.  Pike specials are now handled directly in
	the code instead.

	(c-block-prefix-disallowed-chars, c-block-prefix-charset):
	New language constants and variables to make the backward skip in
	`c-looking-at-decl-block' as tight as possible.

	(c-nonsymbol-token-char-list): New language constant.

	* progmodes/cc-engine.el (c-backward-<>-arglist): New function to
	find balanced template arglists backwards.

	* progmodes/cc-defs.el (c-make-bare-char-alt): New helper for
	making char classes for `c-syntactic-skip-backward'.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Simplify case
	16D - can't be a class-close at that point.

	* progmodes/cc-engine.el (c-guess-basic-syntax)
	(c-add-class-syntax): Don't narrow out the enclosing declaration
	level.  This makes everything a lot easier, and it was actually
	only four small places that needed it to work.  Some places that
	previously did `widen' are removed now, which has the effect that
	`c-guess-basic-syntax' never will look at things outside the
	current narrowing now.  The anchor position for `topmost-intro'
	is affected by this, but it was so bogus it was basically useless
	before, and now it's equally bogus but in a slightly different way.

	(c-narrow-out-enclosing-class): Gone.

	(c-most-enclosing-brace, c-least-enclosing-brace): Don't filter to
	the narrowed region.

	(c-least-enclosing-brace): Remove silly optional argument.

	* progmodes/cc-engine.el (c-beginning-of-decl-1): Fix bug where
	the point could be left directly after an open paren when finding
	the beginning of the first decl in the block.

	* progmodes/cc-engine.el, cc-fonts.el (c-forward-keyword-clause):
	Specify which submatch to use.

	* progmodes/cc-langs.el (c-symbol-start): Include `@' in ObjC.

	(c-decl-start-re): No longer any need for special treatment of
	ObjC due to the above.

	(c-other-block-decl-kwds): Handle "extern" in ObjC too since it
	presumably follows C in that regard.

	* progmodes/cc-langs.el (c-identifier-ops, c-after-id-concat-ops):
	New language constants to specify operator tokens inside
	identifiers in a more high level way.

	(c-opt-identifier-prefix-key): New internal language constant.

	(c-opt-identifier-concat-key, c-opt-after-id-concat-key)
	(c-identifier-start, c-identifier-key): Now completely calculated
	from other constants.

	(c-identifier-last-sym-match): Decommission since it's no longer used.

	(c-operators): Use `c-identifier-ops'.  Document `postfix-if-paren'.

	* progmodes/cc-engine.el (c-forward-name): Remove the
	optimization when c-identifier-key is equal to c-symbol-key since
	it doesn't work in byte compiled files.  Don't record empty
	regions as identifiers.

	* progmodes/cc-langs.el (c-filter-ops): New helper function to
	simplify access to `c-operators' and its likes.

	(c-operator-list, c-all-op-syntax-tokens)
	(c-nonsymbol-token-regexp, c-<>-multichar-token-regexp)
	(c-<-op-cont-regexp, c->-op-cont-regexp, c-expr-kwds)
	(c-primary-expr-regexp, c-cast-parens): Use it.

	* progmodes/cc-defs.el (c-lang-const): Fixes to allow use without
	an explicit language in functions.

	* progmodes/cc-defs.el (c-make-keywords-re): Add an appendable
	variant of adornment.

	* progmodes/cc-langs.el (c-any-class-key): Remove unused language
	variable.

	(c-type-decl-prefix-key): Remove some now unnecessary cruft from
	the Pike value.

	* progmodes/cc-engine.el (c-on-identifier)
	(c-simple-skip-symbol-backward): Small fix for handling "-"
	correctly in `skip-chars-backward'.  Affected the operator lfun
	syntax in Pike.

	* progmodes/cc-langs.el (c-make-init-lang-vars-fun): Disable the
	diagnostic message about precompiled language vars not being used.

	* progmodes/cc-langs.el (c-paren-nontype-kwds): The GCC keyword
	"__attribute__" is followed by a parenthesis.

	(c-type-start-kwds, c-prefix-spec-kwds, c-prefix-spec-kwds-re)
	(c-specifier-key, c-not-decl-init-keywords): Some cleanup using new
	language constants `c-type-start-kwds' and `c-prefix-spec-kwds'.

	* progmodes/cc-fonts.el, cc-langs.el, cc-engine.el:
	Internal cleanups to properly detect the declared identifiers in
	various declarations.

	(c-decl-start-kwds): New language constant to recognize
	declarations that can start anywhere.  Used for class declarations
	in Pike.

	(c-specifier-key, c-not-decl-init-keywords)
	(c-decl-prefix-or-start-re, c-find-decl-prefix-search)
	(c-find-decl-spots): Implement `c-decl-start-kwds'.

	(c-other-decl-kwds, c-postfix-decl-spec-kwds, c-decl-hangon-kwds)
	(c-decl-hangon-key, c-forward-decl-or-cast-1): Separate the
	handling of the compiler specific extension keywords into a new
	language constant `c-decl-hangon-kwds' that defines keyword
	clauses to be ignored in declarations.

	(c-forward-id-comma-list, c-forward-keyword-clause): Don't skip
	past unrecognized tokens when handling `c-colon-type-list-kwds'.
	Necessary to stop at the declared identifier in e.g. IDL valuetype
	declarations.

	(c-typedef-decl-kwds, c-typeless-decl-kwds, c-type-list-kwds)
	(c-prefix-spec-kwds-re, c-postfix-spec-kwds)
	(c-after-suffixed-type-decl-key, c-opt-postfix-decl-spec-key)
	(c-forward-decl-or-cast-1): Recognize the declared identifier in
	class and enum declarations as such and not as part of the type.

	(c-forward-decl-or-cast-1, c-forward-label): Relax the
	interpretation of PRECEDING-TOKEN-END when there's no preceding token.

	(c-forward-decl-or-cast-1): Don't disregard sure signs of
	declarations when there's some syntax error later on.

	(c-complex-decl-matchers): Did away with a reference to
	`c-specifier-key'.

	* progmodes/cc-engine.el (c-maybe-labelp): Provide no default
	value - this variable is always dynamically bound.

	* progmodes/cc-engine.el, cc-fonts.el, cc-langs.el, cc-menus.el
	* cc-mode.el, cc-styles.el, cc-vars.el, cc-align.el, cc-awk.el
	* cc-cmds.el, cc-defs.el: Change the policy for marking up
	functions that might do hidden buffer changes: All such internal
	functions are now marked instead of those that don't.

	(c-beginning-of-macro, c-end-of-macro, c-(forward|backward)-comments)
	(c-(forward|backward)-single-comment, c-parse-state, c-on-identifier)
	(c-(fast-|slow-|)in-literal, c-literal-limits, c-collect-line-comments)
	(c-literal-type): Allow these functions to make hidden buffer changes,
	so that they are free to use text property caching later on.

	(c-electric-backspace, c-electric-delete-forward, c-electric-pound)
	(c-electric-brace, c-electric-slash, c-electric-star)
	(c-electric-semi&comma, c-electric-colon, c-electric-lt-gt)
	(c-electric-paren, c-electric-continued-statement, c-indent-command)
	(c-indent-region, c-mask-paragraph, c-indent-new-comment-line)
	(c-context-line-break): Add `c-save-buffer-state' calls to comply
	with the changed semantics of the functions above.

	* progmodes/cc-engine.el (c-beginning-of-statement-1): Fix a bug
	when macros occur in obscure places.  Optimized the sexp movement
	a bit.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	Enhancements for c-beginning-of-statement to work in AWK Mode:

	* progmodes/cc-awk.el: Supersede c-awk-NL-prop value `;'
	(completed statement) with `}' (statement completed by closing
	brace or semicolon) and `$' (statement completed by EOL).

	(c-awk-virtual-semicolon-ends-prev-line-p)
	(c-awk-virtual-semicolon-ends-line-p)
	(c-awk-skip-semantic-ws-forward, c-awk-skip-semantic-ws-backward)
	(c-awk-at-statement-end-p): New functions.

	* progmodes/cc-cmds.el: Simplify the structure of functions
	c-forward-over-illiterals, c-back-over-illiterals.  Enhance these
	two functions and c-beginning-of-statement to handle AWK Mode.

	* progmodes/cc-engine.el: Enhance c-forward-single-comment,
	c-backward-single-comment for AWK mode.  Attempt to clarify their
	doc-strings.

	* progmodes/cc-mode.el: Put M-a and M-e into awk-mode-map.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, cc-fonts.el, cc-langs.el: Cleaned up the
	label handling.  Labels are now recognized in a uniform and more
	robust way, regardless of context.  Text properties are put on all
	labels to recognize the following declarations better.
	Multiword labels are handled both in indentation and fontification for
	the benefit of language extensions like Qt.  For consistency, keywords
	in labels are now fontified with the label face instead.
	That also applies to "case" and "default".

	(c-beginning-of-statement-1): Fix some bugs in the label
	handling.  Disregard `c-nonlabel-token-key' in labels that begin
	with `c-label-kwds'.

	(c-find-decl-spots): Support that the callback adds more
	`c-decl-end' spots to find.

	(c-forward-decl-or-cast-1): Don't treat a list of plain
	identifiers followed by a colon as a declaration.

	(c-forward-label): New function to recognize labels.

	(c-guess-basic-syntax): Replace uses of `c-label-key' with
	`c-forward-label'.  Moved the label recognition cases (14 and 15)
	earlier since they aren't so context sensitive now.  Handle labels
	on the top level gracefully.  Moved access label recognition to
	the generic label case (CASE 15) - removed CASE 5E.

	(c-font-lock-declarations): Add recognition of labels in the
	same round since we need to handle labels in parallel with other
	declarations to recognize both accurately.  It should also improve
	speed.

	(c-simple-decl-matchers, c-basic-matchers-after):
	Move `c-font-lock-labels' so that it only is used on decoration level 2
	since `c-font-lock-declarations' handles it otherwise.

	(c-complex-decl-matchers): Remove the simplistic recognition of
	access labels.

	(c-decl-prefix-re): Remove the kludges that was necessary to cope
	with labels earlier.

	(c-decl-start-re): New language variable to make
	`c-font-lock-declarations' stop for the special protection labels
	in Objective-C that start with `@'.

	(c-label-key): Remove since it's no longer used.

	(c-recognize-colon-labels, c-label-prefix-re): New language
	constants to support recognition of generic colon-terminated labels.

	(c-type-decl-end-used): `c-decl-end' is now used whenever there
	are colon terminated labels.

	* progmodes/cc-align.el (c-lineup-arglist): Fix bug when the
	first argument starts with a special brace list.

	* progmodes/cc-engine.el, cc-fonts.el (c-forward-decl-or-cast-1)
	(c-font-lock-declarations): Break out the declaration and cast
	recognition from `c-font-lock-declarations' to a new function, so
	that it can be used in the indentation engine.

	* progmodes/cc-engine.el (c-find-decl-spots): Fix bug in backing
	up to the start of the literal.  Fixed bug with the point on the
	wrong side of the search limit that could happen when the start
	position is inside a literal.

	* progmodes/cc-engine.el (c-parse-state)
	(c-invalidate-state-cache): Modify the use of `c-state-cache-end'
	so that it's kept a little bit back to increase the hit rate.

	(c-parse-state): Change the macro handling and fixed some
	glitches.  Macro context is checked more often than necessary now,
	but otoh less garbage conses are generated.

	* progmodes/cc-engine.el (c-parse-state)
	(c-invalidate-state-cache): Cache the last position where
	`c-state-cache' applies.  This can speed up refontification quite
	a bit in blocks where there are many non-brace parens before the point.

	(c-state-cache-end): New variable for this.

	(c-guess-basic-syntax, c-debug-parse-state): Adapt for the new
	cache variable.

	* progmodes/cc-engine.el (c-find-decl-spots): Take more care to
	get close initial continue positions when the start position is
	inside a literal or macro.  Do not call the callback for spots
	before the start position (which can happen e.g. for `c-decl-end'
	spots inside comments).  Optimize better in special cases when the
	region is a single line inside a literal or macro (typically when
	the current line is refontified).

	* progmodes/cc-engine.el (c-guess-basic-syntax): Simplify calls
	to `c-add-stmt-syntax' - there's no need to explicitly whack off
	entries from the paren state.

	* progmodes/cc-engine.el (c-add-stmt-syntax): Narrow down the
	special case for "else if" clauses.

	* progmodes/cc-engine.el (c-looking-at-inexpr-block)
	(c-add-stmt-syntax): Use `c-recognize-paren-inexpr-blocks'.

	* progmodes/cc-langs.el (c-recognize-paren-inexpr-blocks):
	New language variable to recognize the gcc extension with statement
	blocks inside expressions.

	* progmodes/cc-engine.el (c-add-stmt-syntax): Restructure to make
	it somewhat more comprehensible.  The argument AT-BLOCK-START is
	no longer used and hence removed.

	(c-guess-continued-construct, c-guess-basic-syntax): Update calls
	to `c-add-stmt-syntax'.

	* progmodes/cc-engine.el (c-backward-to-decl-anchor):
	Use `c-beginning-of-statement-1' instead of duplicating parts of it.
	This fixes bogus label recognition.

	* progmodes/cc-engine.el (c-add-type, c-check-type)
	(c-forward-name, c-forward-type): Improve storage of template
	types in `c-found-types' so that they can be recognized better.

	(c-syntactic-content): Add option to skip past nested parens.

	* progmodes/cc-engine.el (c-forward-name):
	Set `c-last-identifier-range' all the time.  It's less work that way.
	Handle that there might not be an identifier to store in
	`c-last-identifier-range'.

	(c-forward-type): Handle that `c-last-identifier-range' might be
	nil from `c-forward-name'.

	* progmodes/cc-defs.el (c-safe-scan-lists)
	(c-(go-)?(up|down)-list-(forward|backward)): Add limit arguments.

	* progmodes/cc-defs.el (c-save-buffer-state): Use `unwind-protect'
	to work even if the form fails.

	* progmodes/cc-engine.el (c-parse-state): Speedup when moving far
	down in a large file in one go.

	(c-get-fallback-start-pos): New helper function for `c-parse-state'.

	* progmodes/cc-align.el (c-lineup-assignments): New lineup
	function which is like `c-lineup-math' but returns nil instead of
	`c-basic-offset' when it doesn't match.

	(c-lineup-math): Change to use `c-lineup-assignments'.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: Fix some bugs in subfunctions of
	c-beginning-of-statement.  New subfunctions
	c-in-comment-line-prefix-p, c-narrow-to-comment-innards.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-fonts.el, cc-langs.el: Use `c-simple-ws' instead of
	hardcoded char classes wherever possible.  Changed a couple of
	places to use skip by syntax instead of skip by char class.

	* progmodes/cc-langs.el (c-unterminated-block-comment-regexp):
	Fix a bug in the regexp that caused extreme backtracking.

	* progmodes/cc-langs.el (c-block-comment-starter)
	(c-block-comment-ender): New language constants to specify in a
	single place how block comments look.

	(c-comment-start-regexp, c-block-comment-start-regexp)
	(comment-start, comment-end, comment-start-skip)
	(c-syntactic-ws-start, c-syntactic-ws-end, c-nonwhite-syntactic-ws)
	(c-syntactic-ws, c-nonempty-syntactic-ws)
	(c-single-line-syntactic-ws, c-syntactic-eol): Now built from
	`c-line-comment-starter', `c-block-comment-starter' and
	`c-block-comment-ender'.

	(c-block-comment-regexp, c-unterminated-block-comment-regexp):
	New language constants to break up things a bit.

	(c-simple-ws): New language constant for simple whitespace.

	* progmodes/cc-defs.el (c-concat-separated): New convenience function.

	* progmodes/cc-defs.el (c-make-keywords-re): Add kludge for bug
	in `regexp-opt' in Emacs 20 and XEmacs when strings contain
	newlines.  Allow and ignore nil elements in the list.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: Comment out a (n almost certainly
	superfluous) check, (eq here (point-max)) in c-beginning-of-statement.

	* progmodes/cc-cmds.el: Tidy up the comments in
	c-beginning-of-statement and subfunctions.

	* progmodes/cc-awk.el: Replace calls to put-text-property to the
	more flexible c-put-char-property and c-clear-char-properties.
	Add the author's email address.

	* progmodes/cc-langs.el (c-block-comment-start-regexp): New variable.

	* progmodes/cc-cmds.el: Fix bug with M-e, when point is inside the
	closing "*/" of a block comment.

	* progmodes/cc-cmds.el: Tidy c-beginning-of-sentence (and
	subfunctions) so that it works at BOB and EOB.

	* progmodes/cc-cmds.el, cc-vars.el: More updating of
	c-beginning-of-statement, including new variable
	c-block-comment-start-regexp.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-langs.el (c-known-type-key): Optimize simple
	symbols from `*-font-lock-extra-types' so that there's no need to
	use `regexp-opt' on those lists.

	* progmodes/cc-langs.el (c-type-decl-suffix-key): Fix when
	`c-type-modifier-kwds' is empty.

	* progmodes/cc-fonts.el (c-font-lock-invalid-string): Fix when
	there are several strings on the same line.

	* progmodes/cc-engine.el (c-literal-limits): Remove the
	compatibility function for older emacsen.  `c-literal-limits-fast'
	has now taken the place of this function.

	* progmodes/cc-vars.el (c-emacs-features): Remove compatibility
	with older emacsen: We now require `pps-extended-state'.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el: New function c-beginning-of-sentence,
	which obviates the need to hack sentence-end.  This now handles
	escaped newlines in strings correctly.  Correct minor bugs in
	c-move-over-sentence and in c-beginning-of-statement.

	* progmodes/cc-cmds.el (c-beginning-of-statement (and
	subfunctions)): Adapt c-\(back\|forward\)-over-illiterals such
	that movement over macros and code are rigorously separated from
	each other.  Correct a few incidental bugs.

	* progmodes/cc-cmds.el: Restructure c-beginning-of-statement:
	Improve its doc-string.  Improve the handling of certain specific cases.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-engine.el, cc-fonts.el, cc-langs.el
	(c-guess-basic-syntax): Change the way class-level labels are
	recognized; they can now contain essentially any symbols.

	(c-opt-extra-label-key): New language variable to cope with the
	special protection label syntax in Objective-C.

	(c-opt-access-key): Remove; this is now handled better by
	`c-nonlabel-token-key' and `c-opt-extra-label-key'.

	(c-complex-decl-matchers): Update to handle that
	`c-opt-access-key' no longer exists.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Make use of the
	improved label recognition in `c-beginning-of-statement-1'.

	* progmodes/cc-engine.el (c-beginning-of-member-init-list):
	Recognize bitfields better.

	* progmodes/cc-engine.el (c-beginning-of-inheritance-list):
	Remove some cruft and fixed a bug that could cause it to go to a
	position further down.

	* progmodes/cc-langs.el, cc-engine.el
	(c-beginning-of-statement-1): Improve detection of labels in
	declaration contexts.

	(c-beginning-of-decl-1): Use it.

	(c-nonlabel-token-key): New language constant and variable needed
	by `c-beginning-of-statement-1'.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fix bug that
	manifested itself due to the correction in `c-forward-sexp'.

	* progmodes/cc-defs.el (c-forward-sexp, c-backward-sexp):
	Make these behave as documented when used at the buffer limits.

	* progmodes/cc-mode.el, cc-engine.el, cc-langs.el
	(c-type-decl-end-used): Made this a language variable.

	* progmodes/cc-mode.el (c-after-change): Widen the buffer to work
	correctly when `combine-after-change-calls' is used together with
	temporary narrowings.

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	Report labels correctly when the start point is immediately after the
	colon.

	* progmodes/cc-defs.el (c-parse-sexp-lookup-properties):
	Remove since it isn't used anymore.

	* progmodes/cc-cmds.el (c-electric-lt-gt): Detect and mark angle
	bracket arglists such as template parens in C++.

	* progmodes/cc-engine.el (c-syntactic-skip-backward): Fix a bug
	in the last check-in.  Some optimization.

	* progmodes/cc-engine.el (c-syntactic-skip-backward): Fix bug
	where it could stop at the same level in a preceding sexp when
	PAREN-LEVEL is set.

	* progmodes/cc-mode.el (c-basic-common-init): Turn on syntax-table
	text property lookup only when it's needed.

	* progmodes/cc-langs.el, cc-engine.el, cc-fonts.el, cc-mode.el:
	Change the policy for paren marked angle brackets to be more
	persistent; once marked they remain marked even when they're found
	to be unbalanced in the searched region.  This should keep the
	paren syntax around even when individual lines are refontified in
	multiline template arglists.

	(c-parse-and-markup-<>-arglists): New dynamically bound variable
	to control markup so that incorrect angle bracket arglists aren't
	marked in contexts where the correct value for
	`c-disallow-comma-in-<>-arglists' isn't known.

	(c-forward-<>-arglist, c-forward-<>-arglist-recur): The reparse
	argument has become `c-parse-and-markup-<>-arglists'.

	(c-remove-<>-arglist-properties): Remove - no longer used.

	(c-after-change-check-<>-operators): New function used on
	`after-change-functions' to avoid that "<" and ">" characters that
	are part of longer operators have paren syntax.

	(c-<>-multichar-token-regexp): New language variable used by
	`c-after-change-check-<>-operators'.

	(c-after-change): Call `c-after-change-check-<>-operators'.

	(c-font-lock-<>-arglists): Use the context properties set by
	`c-font-lock-declarations' to set `c-disallow-comma-in-<>-arglists'
	correctly to avoid doing invalid markup.

	(c-font-lock-declarations): Remove code that undoes the invalid
	markup done by `c-font-lock-<>-arglists'.

	(c-complex-decl-matchers): `c-font-lock-<>-arglists' now runs
	after `c-font-lock-declarations'.

	* progmodes/cc-engine.el (c-syntactic-skip-backward):
	Add paren-level feature.

	(c-guess-basic-syntax): Improve the anchor position for
	`template-args-cont' in nested template arglists.  There's still
	much to be desired in this area, though.

2005-12-08  Alan Mackenzie  <bug-cc-mode@gnu.org>

	* progmodes/cc-cmds.el, cc-engine.el, cc-langs.el, cc-vars.el:
	Make the "Text Filling and Line Breaking" commands work for AWK buffers.

2005-12-08  Martin Stjernholm  <bug-cc-mode@gnu.org>

	* progmodes/cc-defs.el, cc-engine.el (c-mode-is-new-awk-p):
	Removed; (c-major-mode-is 'awk-mode) can be used instead now.

	* progmodes/cc-mode.el: Always set up AWK mode since emacsen where
	it doesn't work no longer are supported.

	* progmodes/cc-mode.el, cc-styles.el, cc-vars.el, cc-defs.el
	* cc-engine.el, cc-fonts.el, cc-langs.el, cc-cmds.el: CC Mode now
	requires support for the syntax-table' text property, which rules
	out Emacs 19 and XEmacs < 21.4.  Removed various compatibility
	cruft associated with those versions.

	* progmodes/cc-defs.el, cc-fix.el: CC Mode now requires support
	for the `syntax-table' text property, which rules out Emacs 19 and
	XEmacs < 21.4.  Removed various compatibility cruft associated
	with those versions.

	* progmodes/cc-vars.el (c-emacs-features): CC Mode now requires
	support for the `syntax-table' text property.

	* progmodes/cc-fonts.el (c-nonbreakable-space-face): Remove the
	variable and use an extra quoted face name instead.  All the
	emacsen flavors handle that correctly.

	* progmodes/cc-fonts.el (c-font-lock-complex-decl-prepare)
	(c-font-lock-declarators, c-font-lock-declarations)
	(c-complex-decl-matchers, c-basic-matchers-after): Use a text
	property to mark the items in declarator lists to handle
	refontification inside multiline declarations better.

	* progmodes/cc-fonts.el (c-font-lock-declarations): Recognize a
	construct like "a * b = c;" as a declaration.

2005-12-08  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-use-hyper-key): Replace by ...
	(cua-rectangle-modifier-key): ... this.  New defcustom.  Can now
	select either meta, hyper, or super modifier for rectangle commands.
	(cua--rectangle-modifier-key): New defvar.
	(cua--M/H-key): Use it.  Remove special case for `space'.
	(cua--init-keymaps): Initialize it from cua-rectangle-modifier-key
	on X, to meta otherwise.  Always bind C-return to toggle
	rectangle.  Pass ?\s instead of `space' to cua--M/H-key.

	* emulation/cua-rect.el (cua-help-for-rectangle):
	Use cua--rectangle-modifier-key.  Handle super modifier too.
	(cua--init-rectangles): Always bind C-return to toggle rectangle.
	Pass ?\s instead of `space' to cua--M/H-key and cua--rect-M/H-key.

	* ido.el: Move Acknowledgements and History after Commentary.
	Minor changes to Commentary.

	* emulation/cua-base.el (cua--select-keymaps): Enable repeat
	keymap if cua--prefix-override-timer is `shift'.
	(cua--shift-control-prefix): New function; emulate "type prefix
	key twice" functionality to handle shifted prefix key override.
	(cua--shift-control-c-prefix, cua--shift-control-x-prefix):
	New commands.
	(cua--init-keymaps): Bind them to S-C-c and S-C-x.

2005-12-08  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-insert-heading): Try to do items before
	headings.
	(org-agenda-mode): Quote `org-agenda-mode-hook'.
	(org-insert-item): New function.
	(org-renumber-ordered-list): Don't skip to higher level lists.

2005-12-08  Juri Linkov  <juri@jurta.org>

	* info.el (Info-mode-map): Bind M-TAB to `Info-prev-reference'.

	* button.el (button-buffer-map): Bind M-TAB to `backward-button'.

	* wid-edit.el (widget-keymap): Bind M-TAB to `widget-backward'.

	* pcvs.el (defun-cvs-mode): Put `definition-name' property on
	the constructed function name fun-1.

	* cus-edit.el (custom-add-parent-links): Filter out custom-group-link,
	because such links don't lead to parent documentation.

2005-12-08  Kenichi Handa  <handa@m17n.org>

	* descr-text.el (describe-char): Use *Help-2* buffer if the
	current buffer is *Help*.  Call describe-text-properties while
	setting the original buffer.

2005-12-07  Bill Wohler  <wohler@newt.com>

	* files.el (auto-mode-alist): Remove mh-letter-mode.  Unnecessary,
	and causes problems with non-MH users (such as Gnus users).

2005-12-08  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-find-file-unhook): Delete variable.
	(gdb-set-gud-minor-mode, gdb-set-gud-minor-mode): Delete functions.
	(gdb-set-gud-minor-mode-existing-buffers, gdb-init-2): Use GDB
	command "info sources".  Move calls to GDB command "list".
	(gdb-find-file-hook): Just use gdb-source-file-list.
	(gdb-source-file-regexp): Use regexp for pre-GDB 6.4.
	(gdb-source-file-regexp-1): New regexp for GDB 6.4+ only.
	(gdb-set-gud-minor-mode-existing-buffers-1): Use it.
	(gdb-data-list-register-values-handler): Use correct trigger name.

2005-12-07  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-completion-map): Rename from ido-mode-map.
	(ido-common-completion-map, ido-file-completion-map)
	(ido-file-dir-completion-map, ido-buffer-completion-map):
	Rename from ido-mode-....-map.
	(ido-init-completion-maps): Rename from ido-init-mode-maps.
	(ido-setup-completion-map): Rename from ido-define-mode-map.
	(ido-read-internal): Bind minibuffer-local-filename-completion-map
	to ido-completion-map.

2005-12-07  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el
	(set-display-table-and-terminal-coding-system): If the coding
	system specified in `unibyte-display' property is different from
	the arg coding-system, don't setup standard-display-table.

2005-12-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/edebug.el (edebug-skip-whitespace): read1:lread.c says
	that comments end at \n, regardless of selective-display.

2005-12-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-error-regexp, gdb-first-post-prompt)
	(gdb-version): New variables.
	(gdb-source-file-list, gdb-register-names)
	(gdb-changed-registers): New variables for use with GDB 6.4+.
	(gdb-ann3): Replace with...
	(gdb-init-1, gdb-init-2): ...two new functions.
	(gdba, gdb-prompt): Call gdb-init-1.
	(gdb-get-version): New function.  Call gdb-init-2 from here.
	(gud-watch): Make it work with mouse events too.
	(gdb-post-prompt): Don't add to queue until GDB version is known.
	(gdb-speedbar-expand-node, gdb-post-prompt, gdb-registers-mode)
	(gdb-locals-mode): Use gdb-version.
	(gdb-memory-format-map, gdb-memory-unit-map)
	(gdb-locals-watch-map): Rename from gdb-*-*-keymap.
	(gdb-locals-font-lock-keywords-1)
	(gdb-locals-font-lock-keywords-2): New variables.
	(gdb-find-file-hook): Make it work with GDB 6.4+ too.
	(gdb-set-gud-minor-mode-existing-buffers-1)
	(gdb-var-list-children-1, gdb-var-list-children-handler-1)
	(gdb-var-update-1, gdb-var-update-handler-1)
	(gdb-data-list-register-values-handler)
	(gdb-data-list-register-values-custom)
	(gdb-get-changed-registers, gdb-get-changed-registers-handler)
	(gdb-stack-list-locals-handler, gdb-get-register-names):
	New functions for use with GDB 6.4+.
	(gdb-locals-watch-map-1): New variable for use with GDB 6.4+.
	(gdb-source-file-regexp, gdb-var-list-children-regexp-1)
	(gdb-var-update-regexp-1, gdb-data-list-register-values-regexp)
	(gdb-stack-list-locals-regexp)
	(gdb-data-list-register-names-regexp): New regexps for use with
	GDB 6.4+.

2005-12-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-defs.el (c-emacs-features): Don't assume point-min==1.

2005-12-06  Nozomu Ando  <nand@mac.com>

	* mail/smtpmail.el (smtpmail-try-auth-methods): Make password
	prompts work for AUTH PLAIN.  Also reported by Steve Allan
	<seallan@verizon.net>.

2005-12-06  Károly Lőrentey  <lorentey@elte.hu>

	* frame.el (set-frame-parameter): Add doc string.

2005-12-06  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-occur-highlights): New variable.
	(org-highlight-new-match, org-remove-occur-highlights): New functions.
	(org-highlight-sparse-tree-matches): New option.
	(org-do-occur): New function.
	(org-get-heading): Make it work also at beginning of line.
	(org-category-table): New variable.
	(org-get-category-table, org-get-category)
	(org-camel-to-words, org-link-search): New functions.
	(org-select-this-todo-keyword): New variable.
	(org-todo-list): New command.
	(org-shiftright, org-shiftleft): New commands.
	(org-agenda-todo): Add prefix argument.
	(org-show-hierarchy-above): New option.
	(org-show-todo-tree): Numerical prefix creates tree for specific
	TODO keyword.
	(org-outline-level): New function, to assign a level to plain
	lists items.
	(org-cycle-include-plain-lists): New option.
	(org-mode): Use `org-outline-level' as value of `outline-level'.
	(org-cycle): Temporarily switch `outline-regexp' if
	`org-cycle-include-plain-lists' is non-nil.
	(org-start-icalendar-file): Fix format bug.
	(org-agenda-get-day-entries): Create category table.
	(org-agenda-get-todos, org-agenda-get-timestamps)
	(org-agenda-get-deadlines, org-agenda-get-scheduled)
	(org-agenda-get-blocks): Use `org-get-category'.
	(org-context-in-file-links): Rename from
	`org-line-numbers-in-file-links'.

2005-12-06  Romain Francoise  <romain@orebokech.com>

	* window.el (balance-windows): Delete extraneous third arg in call
	to `enlarge-window'.

2005-12-06  Kenichi Handa  <handa@m17n.org>

	* international/kinsoku.el (kinsoku-longer): Check eolp, not eobp.

2005-12-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler)
	(gdb-var-evaluate-expression-handler, gdb-frame-handler)
	(gdb-var-list-children-handler, gdb-var-update-handler):
	Current buffer is already gdb-partial-output-buffer, don't
	make it current again.

2005-12-05  Luc Teirlinck  <teirllm@auburn.edu>

	* buff-menu.el (Buffer-menu-use-frame-buffer-list): New user option.
	(list-buffers-noselect): Use it.

2005-12-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mail/sendmail.el: Remove unnecessary leading-star in docstrings.
	(mail-yank-ignored-headers): Use regexp-opt.
	(mail-mode-map): Move initialization into declaration.
	(mail-sent-via): Remove unused shadowed var `to-line'.
	(mail-mailer-swallows-blank-line): Use with-temp-buffer.
	(mail-bury, sendmail-send-it, mail-do-fcc): Use with-current-buffer.
	(mail-do-fcc): Use dolist and push.
	(mail-mode-fill-paragraph): Pass the arg to fill-region-as-paragraph.
	(mail-yank-ignored-headers): Don't autoload.

2005-12-05  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-info-internal): New fun.
	(set-language-info): Call set-language-info-internal to update
	language-info-alist.  If LANG-ENV is the current one, call
	set-language-environment to make INFO effective now.
	(set-language-info-alist): Likewise.
	(locale-language-names): With locale "en", use English
	lang. env. but set the default codings to iso-8859-1.

2005-12-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-use-inferior-io-buffer)
	(gdb-speedbar-auto-raise): Echo new state in minibuffer.
	(gdb-var-create-handler, gdb-assembler-custom): Use search-forward
	for plain strings.
	(gdb-frames-mode): Remove redundant call to font-lock-mode.
	(gdb-all-registers): Rename from toggle-gdb-all-registers.
	Create registers buffer if necessary.  Echo new state in minibuffer.
	(gdb-registers-mode-map, gdb-registers-mode): Use gdb-all-registers.

2005-12-03  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-fontify-node): Match external links using
	non-directory part of filename.

2005-12-04  Juri Linkov  <juri@jurta.org>

	* font-core.el (global-font-lock-mode): Use define-global-minor-mode
	instead of easy-mmode-define-global-mode.  Add `:group font-lock'.
	(font-lock-mode): Replace `:group font-lock' with `nil nil nil'
	because there is no customization option for it.

	* font-lock.el (lisp-font-lock-keywords-1):
	Add define-global-minor-mode.

	* emacs-lisp/autoload.el (make-autoload): Add define-global-minor-mode.

	* emacs-lisp/derived.el (define-derived-mode): Put `definition-name'
	properties on the constructed variable names.

	* emacs-lisp/easy-mmode.el (easy-mmode-define-navigation):
	Put `definition-name' properties on the constructed function names
	next-sym and prev-sym.

	* emacs-lisp/find-func.el (find-function-regexp):
	Add define-global-minor-mode.  Replace `easy-mmode-define-global-mode'
	with `easy-mmode-define-[a-z-]+'.  Add easy-menu-define.
	(find-variable-regexp): Add easy-mmode-defmap, easy-mmode-defsyntax
	and easy-menu-define.

	* emacs-lisp/lisp-mode.el: Put `doc-string-elt' property on
	easy-mmode-define-global-mode and define-global-minor-mode.
	(lisp-imenu-generic-expression): Add define-global-minor-mode.

	* progmodes/cwarn.el (global-cwarn-mode): Use define-global-minor-mode
	instead of easy-mmode-define-global-mode.

	* progmodes/idlw-shell.el (idlwave-shell-electric-debug-mode):
	Use define-minor-mode instead of easy-mmode-define-minor-mode.

	* cus-edit.el (customize-group, customize-group-other-window):
	Filter out autoloaded options from the group completion list by
	using heuristics that autoloaded groups don't have `custom-autoload'
	property on their symbols (they have only `custom-loads').

	* simple.el (completion-setup-function): Put completions-common-part
	face on complete completion string too (i.e. completion string
	without completions-first-difference face).

	* man.el (Man-section-regexp): Add 0-9 to support "3X11" sections.

2005-12-03  Eli Zaretskii  <eliz@gnu.org>

	* view.el (view-mode): Doc fix.

	* disp-table.el (standard-display-european): Add to the warning
	message a reference to the doc string.

	* play/yow.el (apropos-zippy): Call print-help-return-message,
	similar to other Help and Apropos commands.

	* help.el (print-help-return-message): If pop-up-frames is
	non-nil, set up help-return-method to delete the help window and,
	possibly, its frame as well, and don't display message about
	scrolling the help window.  Doc fix.
	(help-return-method): Doc fix.

2005-12-03  Martin Rudalics  <rudalics@gmx.at>

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression): Fix bug
	whereby names of length one or names starting with a
	symbol-constituent character would not be returned.

2005-12-03  Johan Bockgård  <bojohan@dd.chalmers.se>

	* subr.el (atomic-change-group): Add edebug and indentation spec.

2005-12-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* completion.el (save-completions-file-name): Fix typo in last change.

2005-12-02  Jan Djärv  <jan.h.d@swipnet.se>

	* info.el: Move back/forward history to the beginning of the tool bar.

2005-12-02  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el (eval-when-compile): Remove unnecessary load of cl.
	Add fset of allout-real-isearch-abort during compile to fix
	byte-compilation warnings.
	(allout-mode-p): Move definition of this macro above all uses, or
	byte compilation in barren Emacs (eg, during Emacs build) will
	lack the definition.
	(allout-mode): Move this variable above any uses, or byte
	compilation will fail.
	(allout-resolve-xref): Remove use of personal file-reference function.
	(allout-toggle-current-subtree-encryption): Do the current (ie,
	visible containing) topic, rather than nearest around point.  Doc fix.
	(allout-toggle-subtree-encryption): New function, workhorse that
	works on nearest topic containing point.
	(allout-encrypt-string): Signal requirement for newer version of pgg.
	(allout-resumptions): Doc fix.

2005-12-02  Eli Zaretskii  <eliz@gnu.org>

	* international/latexenc.el (latex-inputenc-coding-alist): Doc fix.

2005-12-02  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-external-point-words):
	Consider a misspelling as found in the string search if: (a) misspelling
	and found string lengths match, or (b) misspelling is found as
	element in a boundary-chars separated longer string, or (c)
	ispell-program-name is really ispell and misspelling is found as
	part of a TeX string.  After successful match move beginning of
	search region to end of match.  Warn about not found misspellings
	once the process is done.
	(flyspell-large-region): Do not set ispell-parser to tex if in TeX mode.

2005-12-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Put gud-finish back on the
	tool bar (removed inadvertently).

2005-12-02  Juri Linkov  <juri@jurta.org>

	* log-view.el (log-view-diff): Clarify doc string.

2005-12-01  Bill Wohler  <wohler@newt.com>

	* Makefile.in (mh-loaddefs.el): Reinsert Change Log as its absence
	triggers lm-verify errors.

2005-12-01  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (transient-mark-mode, line-number-mode)
	(column-number-mode, size-indication-mode): Remove `:require nil'.

2005-12-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-ann3): Bind mouse-2 to gdb-mouse-until
	in the margin also.
	(gdb-breakpoints-mode-map): Use D instead of d for
	gdb-delete-breakpoint.
	(gdb-get-frame-number): Require a number to match on.
	(gdb-threads-mode-map): Add follow-link binding.

2005-11-30  Jason Rumney  <jasonr@gnu.org>

	* isearch.el (isearch-mode-map): Avoid exiting search on
	language-change event.

2005-11-30  Romain Francoise  <romain@orebokech.com>

	* speedbar.el (speedbar-default-position): New defcustom.
	(speedbar-frame-reposition-smartly): Use it.

	* dframe.el (dframe-reposition-frame-emacs): Fix position
	computation for `left' location.
	Update copyright year.

2005-11-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (help-map): Move initialization into declaration.

	* emacs-lisp/autoload.el (make-autoload): Handle defgroup specially.

	* help-fns.el (help-argument-name): Don't autoload.
	It's useless and triggers a bug in cus-dep.el causing ldefs-boot
	to be re-loaded when customizing the `help' group.

2005-11-30  John Paul Wallington  <jpw@gnu.org>

	* help-fns.el (describe-function-1): Fill arglist output.

2005-11-30  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--rectangle-overlays): Make permanent-local.
	(cua--rectangle-post-command): Cleanup overlays and deactivate mark
	after revert-buffer (or anything else which kills all local variables).

	* apropos.el (apropos-parse-pattern): Doc fix.
	Set apropos-regexp directly, rather than expecting callers to do so.
	(apropos-command, apropos, apropos-value, apropos-documentation):
	Simplify calls to apropos-parse-pattern.

2005-11-29  Chong Yidong  <cyd@stupidchicken.com>

	* hi-lock.el (hi-lock-line-face-buffer, hi-lock-face-buffer)
	(hi-lock-face-phrase-buffer): Use hi-yellow face.
	(hi-lock-write-interactive-patterns): Use comment-region.

	* longlines.el (longlines-mode): Add mail-setup-hook.

	* mail/mailheader.el, mail/sendmail.el: Revert 2005-11-17 changes.

	* simple.el (sendmail-user-agent-compose, next-line):
	Conditionally use hard-newline.

2005-11-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* international/latexenc.el (latex-inputenc-coding-alist):
	Reword doc string.

2005-11-29  Chong Yidong  <cyd@stupidchicken.com>

	* help.el (describe-key-briefly, describe-key): Recognize default
	bindings.

2005-11-29  Romain Francoise  <romain@orebokech.com>

	* view.el (view-inhibit-help-message): New defcustom.
	(view-mode-enter): Use it.

2005-11-29  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-wind.el (ediff-setup-control-frame, ediff-make-wide-display):
	Preserve user position.

2005-11-28  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el: Throw error if facemenu is not loaded to prevent
	accidental change of loading order in loadup.el.  (Suggested by RMS.)

	* loadup.el: Add comment explaining why facemenu must be loaded
	before font-lock.

2005-11-28  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el: Change global keybinding for calc-dispatch to "\C-x*".
	(calc-dispatch-map): Add more keys for `calc-same-interface'.

	* calc/calc-misc.el (calc-dispatch-help): Update docstring.

	* calc/calc-embed.el (calc-do-embedded): Update help message.

	* calc/calc-prog.el (calc-user-define-invokation): Update help message.

2005-11-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-edit.el (log-edit-insert-cvs-rcstemplate): Ignore stderr.

	* emacs-lisp/elp.el (elp-not-profilable): Replace interactive-p with
	called-interactively-p.
	(elp-profilable-p): Rename from elp-not-profilable-p.
	Invert result and take into account macros and autoloaded functions.
	(elp-instrument-function): Update call.
	(elp-instrument-package): Update call.  Add completion.
	(elp-pack-number): Use match-string.
	(elp-results-jump-to-definition-by-mouse): Merge into
	elp-results-jump-to-definition and then remove.
	(elp-output-insert-symname): Make help echo text single-line.

	* replace.el (query-replace-map): Move initialization into declaration.
	(occur-engine): Use with-current-buffer.
	(occur-mode-goto-occurrence): Make it work for mouse-clicks as well.
	(occur-mode-mouse-goto): Replace with an alias.

2005-11-28  Juri Linkov  <juri@jurta.org>

	* simple.el (quoted-insert): Let-bind input-method-function to nil.

	* term/w32-win.el: Bind [S-tab] to [backtab].

	* info.el (Info-fontify-node): Set 2nd arg `noerror' of
	`Info-find-file' to t.

	* replace.el (occur-mode-mouse-goto): Pop, don't switch.
	(occur-mode-goto-occurrence): Let-bind same-window-buffer-names
	and same-window-regexps.
	(occur-next-error): Don't move point for arg 0.

2005-11-28  Chong Yidong  <cyd@stupidchicken.com>

	* replace.el (occur-mode-goto-occurrence): Pop, don't switch.

2005-11-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-edit.el (log-edit-changelog-use-first): New var.
	(log-edit-changelog-ours-p): Use it.
	(log-edit-insert-changelog): Set it with new arg `use-first'.
	(log-edit-insert-cvs-rcstemplate, log-edit-insert-filenames): New funs.
	(log-edit-hook): Add them to the list of suggested options.

	* textmodes/flyspell.el (flyspell-last-buffer): New var.
	(flyspell-accept-buffer-local-defs): Use it to avoid doing silly
	redundant work.
	(flyspell-mode-on): Use add-hook for after-change-functions.
	(flyspell-mode-off): Use remove-hook for after-change-functions.
	(flyspell-changes): Make it buffer-local.
	(flyspell-after-change-function): Make it non-interactive.  Use push.
	(flyspell-post-command-hook): Check input-pending-p while processing
	the potentially long list of buffer changes.

2005-11-28  Károly Lőrentey  <lorentey@elte.hu>

	* buff-menu.el (list-buffers-noselect): Display the selected
	frame's buffer list, not the global one.

2005-11-28  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Set last-input-event so
	that (list last-input-event) works as in interactive spec.

2005-11-27  Luc Teirlinck  <teirllm@auburn.edu>

	* loadup.el ("facemenu"): Load facemenu before font-lock, because
	`facemenu-keymap' needs to be defined when font-lock is loaded.
	Otherwise, `M-o M-o' is not bound to `font-lock-fontify-block'.

2005-11-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* completion.el: Remove useless leading * in defcustom docstrings.
	(save-completions-file-name): Use ~/.emacs.d if available.
	(completion-standard-syntax-table): Rename from
	cmpl-standard-syntax-table and fold initialization into declaration,
	thus removing cmpl-make-standard-completion-syntax-table.
	(completion-lisp-syntax-table, completion-c-syntax-table)
	(completion-fortran-syntax-table, completion-c-def-syntax-table): Idem.
	(cmpl-saved-syntax, cmpl-saved-point): Remove.
	(symbol-under-point, symbol-before-point)
	(symbol-under-or-before-point, symbol-before-point-for-complete)
	(add-completions-from-c-buffer): Use with-syntax-table.
	(make-completion): Don't return a list of completion entries.
	Update callers.
	(cmpl-prefix-entry-head, cmpl-prefix-entry-tail): Use defalias.
	(completion-initialize): Rename from initialize-completions.
	(completion-find-file-hook): Rename from cmpl-find-file-hook.
	(kill-emacs-save-completions): Collect stats here.
	(save-completions-to-file, load-completions-from-file):
	Use with-current-buffer.
	(completion-def-wrapper): Rename from def-completion-wrapper.  Make it
	into a function.  Move all calls to toplevel.
	(completion-lisp-mode-hook): New fun.
	(completion-c-mode-hook, completion-setup-fortran-mode):
	Set the syntax-table here.  Use local-set-key.
	(completion-saved-bindings): New var.
	(dynamic-completion-mode): Make it into a proper minor mode.
	(load-completions-from-file): Remove unused var `num-uses'.

	* emacs-lisp/cl-macs.el (defstruct): Don't define the default
	constructor if it is explicitly overridden.

	* complete.el (PC-completion-as-file-name-predicate):
	Use minibuffer-completing-file-name.
	(partial-completion-mode): Use find-file-not-found-functions.
	(PC-lisp-complete-symbol): Use with-syntax-table.
	(PC-look-for-include-file): Remove dead setq.
	(PC-look-for-include-file, PC-expand-many-files, PC-do-completion)
	(PC-complete): Use with-current-buffer.

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords): \ doesn't
	escape single quotes.

2005-11-27  Luc Teirlinck  <teirllm@auburn.edu>

	* dabbrev.el (dabbrev-completion): Simplify code, by getting rid
	of `if' whose condition always returned nil.  Doc fix.

	* buff-menu.el (Buffer-menu-revert-function): Make the selected
	window's buffer the current buffer around the call to
	`list-buffers-noselect'.  This is necessary to mark that buffer
	with a `.' in the Buffer Menu when called from Lisp, for instance
	by Auto Revert Mode.

2005-11-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-stopped): Detect child process when
	attaching to it.
	(gdb-pre-prompt): Make sure gdb-error is reset.

	* progmodes/gud.el (gud-gdb-marker-filter): When GDB is invoked
	with a child process, detect it.
	(gud-speedbar-buttons): Match regexp more carefully.

2005-11-27  Richard M. Stallman  <rms@gnu.org>

	* mouse.el (mouse-drag-move-window-bottom):
	Use adjust-window-trailing-edge.

2005-11-27  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (blink-matching-open): Ignore
	`blink-matching-paren-on-screen' if `show-paren-mode' is enabled.
	(blink-matching-paren-on-screen): Update docstring.

	* paren.el (show-paren-mode): No longer change
	`blink-matching-paren-on-screen'.

2005-11-27  John Paul Wallington  <jpw@pobox.com>

	* progmodes/gdb-ui.el (gdb-goto-breakpoint, gdb-frames-select)
	(gdb-threads-select, gdb-edit-register-value):
	Use `posn-set-point' instead of `mouse-set-point' because the
	latter is not fbound when configured without X.

2005-11-27  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--highlight-rectangle): Preserve
	existing face when partially highlighting a TAB in a rectangle.

2005-11-26  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode-map): Doc fix.
	(ido-mode-common-map, ido-mode-file-map)
	(ido-mode-file-dir-map, ido-mode-buffer-map): New keymaps.
	(ido-define-mode-map): Rewrite.  Select one of the new maps as
	parent for ido-mode-map instead of building from scratch.
	(ido-init-mode-maps): New defun to initialize new maps.
	(ido-mode): Call it.
	(ido-switch-buffer): Doc fix -- use \<ido-mode-buffer-map>.
	(ido-find-file): Doc fix -- use \<ido-mode-file-map>.

2005-11-26  John Paul Wallington  <jpw@pobox.com>

	* arc-mode.el (archive-extract): Use `posn-set-point' instead of
	`mouse-set-point' because the latter is not fbound when configured
	without X.

2005-11-26  Thien-Thi Nguyen  <ttn@gnu.org>

	* files.el (file-relative-name): Doc fix.

2005-11-26  Kurt Hornik  <Kurt.Hornik@wu-wien.ac.at>

	* progmodes/octave-inf.el (inferior-octave-startup): Force a
	non-empty string for secondary prompt PS2.

2005-11-25  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/compile.el (compilation-setup): Fix last change.

2005-11-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom)
	(gdb-mouse-toggle-breakpoint-margin)
	(gdb-mouse-toggle-breakpoint-fringe, gdb-threads-select):
	Add gdb-server-prefix to keep out of command history.
	(gdb-edit-register-value): New function.
	(gdb-registers-mode-map): Bind mouse-2 and RET to it.
	(gdb-info-registers-custom): Use above map.

2005-11-25  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (enable-theme): Signal error if argument is not a
	theme.  Don't recalculate a face if it's not loaded yet.

	* cus-face.el (custom-theme-set-faces): Don't change saved-face if
	the `user' theme is in effect.

	* info.el (Info-on-current-buffer): Record actual filename in
	Info-current-file, instead of t, or a fake filename if a non-file
	buffer.  Make autoload.
	(Info-find-node, Info-revert-find-node): No need to check for
	Info-current-file nil.
	(Info-set-mode-line, Info-up, Info-copy-current-node-name):
	Info-current-file is now never `t'.
	(Info-fontify-node): Many simplifications due to Info-current-file
	always being valid.  Use Info-find-file to find node filename.

2005-11-25  David Kastrup  <dak@gnu.org>

	* longlines.el (longlines-wrap-line): Reorder wrapping to "insert
	new character, then delete" in order to preserve markers.

2005-11-25  David Ponce  <david@dponce.com>

	* recentf.el (recentf-arrange-by-rule): Handle a special
	`auto-mode-alist'-like "strip suffix" rule.
	(recentf-build-mode-rules): Handle second level auto-mode entries.

2005-11-25  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-keym.el (viper-ESC-key): Use different values
	in terminal and window modes.

	* emulation/viper.el (viper-emacs-state-mode-list): Delete mail-mode,
	add jde-javadoc-checker-report-mode.

	* ediff-wind.el (ediff-make-wide-display): Slight simplification.

	* ediff.el (ediff-date): Change the date of last update.

2005-11-24  Chong Yidong  <cyd@stupidchicken.com>

	* hi-lock.el (hi-lock-buffer-mode): Renamed from `hi-lock-mode'.
	Use define-minor-mode, and make it a local mode.  Turn on font-lock.
	(hi-lock-mode): New global minor mode.
	(turn-on-hi-lock-if-enabled): New function.
	(hi-lock-line-face-buffer, hi-lock-face-buffer, hi-lock-set-pattern):
	Change arguments to regexp and face instead of a font-lock pattern.
	Directly set face property, instead of refontifying.
	(hi-lock-font-lock-hook): Check if font-lock is being turned on.
	(hi-lock-find-patterns): Use line-number-at-pos.

	(hi-lock-face-phrase-buffer): Call hi-lock-buffer-mode.  Use new
	arguments for hi-lock-set-pattern.
	(hi-lock-unface-buffer, hi-lock-set-file-patterns):
	Call font-lock-fontify-buffer.
	(hi-lock-find-file-hook, hi-lock-current-line)
	(hi-lock-refontify, hi-lock-set-patterns): Delete unused functions.

	(hi-lock-font-lock-hook): Turn off hi-lock when font lock is
	turned off.

	* progmodes/compile.el (compilation-setup): Don't fiddle with
	font-lock-defaults.

2005-11-25  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler)
	(gdb-var-list-children-handler): Find values for all variable
	objects.  gud-speedbar-buttons decides whether to display them.

2005-11-24  Romain Francoise  <romain@orebokech.com>

	* info.el (Info-speedbar-fetch-file-nodes): Prefix temporary
	buffer name with a space.

2005-11-24  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-export-plain-list-max-depth): Rename from
	`org-export-local-list-max-depth'.  Change default value to 3.
	(org-auto-renumber-ordered-lists)
	(org-plain-list-ordered-item-terminator): New options.
	(org-at-item-p, org-beginning-of-item, org-end-of-item)
	(org-get-indentation, org-get-string-indentation)
	(org-maybe-renumber-ordered-list, org-renumber-ordered-list):
	New functions.
	(org-move-item-down, org-move-item-up): New commands.
	(org-export-as-html): New classes for CSS support.  Bug fix in
	regular expression detecting fixed-width regions.  Respect
	`org-local-list-ordered-item-terminator'.
	(org-set-autofill-regexps, org-adaptive-fill-function): "1)" is
	also a list item.
	(org-metaup, org-metadown, org-shiftmetaup, org-shiftmetadown):
	New item moving functions.

2005-11-24  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-repeat): With empty search ring set
	`isearch-error' to the error string instead of signaling error
	with the function `error'.

2005-11-24  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Make modifier `ctrl' an alias for `control'.

2005-11-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-speedbar-auto-raise): New function
	and variable.
	(gdb-var-create-handler, gdb-var-list-children-handler):
	Don't match on "char **...".
	(gdb-var-update-handler): Find values for all variable objects.
	(gdb-info-frames-custom): Identify frames by leading "#".

	* progmodes/gud.el (gud-speedbar-menu-items): Add
	gdb-speedbar-auto-raise as radio button.
	(gud-speedbar-buttons): Raise speedbar if requested.
	Don't match on "char **...".
	(gud-speedbar-buttons): Add (pointer) value for non-leaves.
	Make it editable.

2005-11-23  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-fontify-node): Handle the case where
	Info-current-file is t.

2005-11-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (blink-matching-open): Fix off-by-one in last change.

2005-11-23  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Don't change default directory.

2005-11-22  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (Custom-reset-standard): Make it handle Custom group
	buffers correctly.  (It used to throw an error in such buffers.)
	Make it ask for confirmation in group buffers and other Custom
	buffers containing more than one customization item.

2005-11-22  John Paul Wallington  <jpw@gnu.org>

	* net/goto-addr.el (goto-address-fontify): Put `follow-link'
	property on mail and url overlays.
	(goto-address-at-point): Use `posn-set-point' instead of
	`mouse-set-point' because the latter is not fbound when configured
	without X.

2005-11-22  Lars Hansen  <larsh@soem.dk>

	* ls-lisp.el (ls-lisp-parse-symlink): Delete.
	(ls-lisp-classify, ls-lisp-format): Delete call to
	ls-lisp-parse-symlink.
	(ls-lisp-handle-switches): Handle symlinks to directories as
	directories when ls-lisp-dirs-first in non-nil.

2005-11-21  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Make sure that loaddefs.el is handled
	correctly in load-history.

2005-11-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-locals-watch-keymap): New local map.
	(gdb-struct-string, gdb-array-string): New constants.
	(gdb-info-locals-handler): Use them.
	(gdb-reset): Reset gdb-var-list to nil.

2005-11-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-font-lock-paren): Handle continued lines
	in patterns.

2005-11-21  Juri Linkov  <juri@jurta.org>

	* custom.el (defcustom): Update link types in docstring.

2005-11-20  Martin Rudalics  <rudalics@gmx.at>

	* custom.el (defgroup): Add doc-string-elt info.

	* widget.el (define-widget): Don't use declare for the doc-string-elt.

2005-11-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* newcomment.el (comment-enter-backward): Fix last fix.

	* simple.el (blink-matching-open):
	* paren.el (show-paren-function): Allow new paren-class info.

2005-11-20  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el: Revert 2005-11-17 change.  :ignore-defface is now
	handled automagically.

2005-11-20  Andreas Schwab  <schwab@suse.de>

	* descr-text.el (describe-char): When copying overlays put them
	over the full char description instead of just the first character
	of it.

2005-11-20  Juri Linkov  <juri@jurta.org>

	* simple.el (what-cursor-position):
	* descr-text.el (describe-char): Use Lisp-readable syntax
	for octal and hex.  Reorder decimal, octal and hex values.
	Remove excess whitespace in the output.  Use `=' in `column='
	like in `point=' and `Hscroll='.

	* international/mule-cmds.el (encoded-string-description):
	Use Lisp-readable syntax for hex.

2005-11-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* newcomment.el (comment-enter-backward): Handle the case where the
	comment is closed by EOB.

2005-11-19  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-before-revert-hook)
	(longlines-after-revert-hook): New functions.
	(longlines-mode): Turn off longlines temporarily when reverting.
	Add a message-setup-hook.
	(longlines-decode-buffer): New function.
	(longlines-wrap-line): Preserve marker positions.

2005-11-19  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/shadow.el: Handle compressed files.

2005-11-19  Romain Francoise  <romain@orebokech.com>

	* net/browse-url.el (browse-url-default-browser): Signal an error
	if no usable browser can be found, rather than try to load w3.

2005-11-16  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-mangle-text): Add bold face property without
	replacing existing properties.
	(rcirc-my-nick, rcirc-other-nick, rcirc-server)
	(rcirc-nick-in-message, rcirc-prompt): Use min-colors and remove
	tty specs.
	(rcirc-server-prefix, rcirc-server): New faces.
	(rcirc-url-regexp): Generate with rx macro.
	(rcirc-last-server-message-time): New variable.
	(rcirc-filter): Record time of last message.
	(rcirc-keepalive): Kill processes that did not send a message
	since the last ping.
	(rcirc-mode): Give rcirc-topic a local binding here.

2005-11-19  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* subr.el (read-passwd): Fontify the prompt as we do with other
	prompts.

2005-11-19  Ryan Yeske  <rcyeske@gmail.com>

	* ffap.el (ffap-menu-rescan): Use inhibit-read-only instead of
	binding buffer-read-only to nil.

2005-11-19  Eli Zaretskii  <eliz@gnu.org>

	* complete.el (partial-completion-mode):
	Mention completion-auto-help in the doc string.

	* man.el (Man-highlight-references): Doc fix.  Reformat code in a
	more Lisp-ish way.

2005-11-19  Slawomir Nowaczyk  <slawomir.nowaczyk.847@student.lu.se>  (tiny change)

	* ls-lisp.el (ls-lisp-format-file-size): Format file size with 9
	digits, not 8, to avoid misalignment for files larger than 100MB.

2005-11-19  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-describe-menu) <list-keybindings>:
	Mention "keyboard shortcuts" in the help text.

2005-11-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* startup.el (fancy-splash-default-action): Discard only
	mouse-down and succeeding mouse-up events in the splash screen
	window so that drag-n-drop event can be processed.

2005-11-18  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Add hacks for mail-mode and
	message-mode.

2005-11-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-table-sort-lines): New command.
	(org-tbl-menu): Add entry for `org-table-sort-lines'.
	(org-add-file): Command removed, use `org-agenda-file-to-front'
	instead.
	(org-export-icalendar): Use `org-icalendar-combined-name'.
	(org-cycle-agenda-files, org-agenda-file-to-end)
	(org-agenda-file-to-front): New commands.
	(org-table-tab-jumps-over-hlines, org-export-html-style):
	New options.
	(org-table-next-field): Use `org-table-tab-jumps-over-hlines'.
	(org-at-table.el-p, org-set-autofill-regexps, org-html-protect):
	New functions.
	(org-fill-paragraph): Call `org-table-align' in tables.
	(org-mode): Call `org-set-autofill-regexps'.
	(org-export-as-html): Support for local handformatted lists.
	Modified to produce valid HTML 4.0.  Use `org-export-html-style'.
	(org-export-local-list-max-depth): New option.
	(org-html-expand): Use `org-html-protect'.

2005-11-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-install-speedbar-variables): Bind gud-pp
	to "p".
	(gdb): Move definition of gud-pp to...

	* progmodes/gdb-ui.el (gdb-ann3): ...here.  Make it work in the
	speedbar.
	(gdb-find-watch-expression): New function.

2005-11-17  Chong Yidong  <cyd@stupidchicken.com>

	* faces.el (face-attribute, set-face-attribute): Mention existence
	of `:ignore-defface' setting in docstring.

2005-11-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (completion-setup-function): Fix last change.

2005-11-17  John Paul Wallington  <jpw@pobox.com>

	* ibuf-ext.el (ibuffer-interactive-filter-by-mode):
	Use `posn-set-point' instead of `mouse-set-point' because the
	latter is not fbound when configured without X.

	* comint.el (comint-insert-input): Likewise.

2005-11-17  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (hard-newline): New variable.
	(sendmail-user-agent-compose, next-line): Use it.

	* mail/sendmail.el (mail-setup, mail-send, mail-insert-from-field)
	(sendmail-send-it, mail-do-fcc, mail-cc, mail-bcc, mail-fcc)
	(mail-mail-reply-to, mail-mail-followup-to)
	(mail-position-on-field, mail-signature, mail-yank-original)
	(mail-attach-file): Likewise.

	* mail/mailheader.el (mail-header-format)
	(mail-header-format-function): Likewise.

	* add-log.el (add-change-log-entry, change-log-merge): Likewise.

2005-11-17  Juri Linkov  <juri@jurta.org>

	* font-lock.el (font-lock-faces): Rename this defgroup from
	`font-lock-highlighting-faces'.
	(font-lock-comment-face, font-lock-comment-delimiter-face)
	(font-lock-string-face, font-lock-doc-face)
	(font-lock-keyword-face, font-lock-builtin-face)
	(font-lock-function-name-face, font-lock-variable-name-face)
	(font-lock-type-face, font-lock-constant-face)
	(font-lock-warning-face, font-lock-negation-char-face)
	(font-lock-preprocessor-face)
	(font-lock-regexp-grouping-backslash)
	(font-lock-regexp-grouping-construct): Rename :group from
	`font-lock-highlighting-faces' to `font-lock-faces'.

	* cus-edit.el (lisp, c, tex):
	* progmodes/ada-mode.el (ada):
	* progmodes/asm-mode.el (asm):
	* progmodes/cperl-mode.el (cperl-faces):
	* progmodes/cpp.el (cpp):
	* progmodes/dcl-mode.el (dcl):
	* progmodes/f90.el (f90):
	* progmodes/fortran.el (fortran):
	* progmodes/icon.el (icon):
	* progmodes/idlwave.el (idlwave-misc):
	* progmodes/m4-mode.el (m4):
	* progmodes/make-mode.el (makefile):
	* progmodes/meta-mode.el (meta-font):
	* progmodes/modula2.el (modula2):
	* progmodes/octave-mod.el (octave):
	* progmodes/pascal.el (pascal):
	* progmodes/perl-mode.el (perl):
	* progmodes/prolog.el (prolog):
	* progmodes/ps-mode.el (PostScript-edit):
	* progmodes/scheme.el (scheme):
	* progmodes/sh-script.el (sh-script):
	* progmodes/simula.el (simula):
	* progmodes/tcl.el (tcl):
	* textmodes/nroff-mode.el (nroff):
	* textmodes/reftex-vars.el (reftex-fontification-configurations):
	* textmodes/sgml-mode.el (sgml):
	* textmodes/texinfo.el (texinfo):
	Add :link (custom-group-link font-lock-faces) to defgroup.

	* hi-lock.el (hi-lock): Rename this defgroup from
	`hi-lock-interactive-text-highlighting'.  Change parent group from
	`faces' to `font-lock'.  Add link to the manual.
	(hi-lock-mode, hi-lock-file-patterns-range)
	(hi-lock-exclude-modes, hi-lock-faces): Rename :group from
	`hi-lock-interactive-text-highlighting' to `hi-lock'.
	(hi-lock-faces): Add :group `faces'.

	* cus-edit.el (custom-variable-prompt): Clarify the code.

	* faces.el (face-read-string): Set the default value arg of
	completing-read.

2005-11-16  Luc Teirlinck  <teirllm@auburn.edu>

	* rfn-eshadow.el (file-name-shadow-properties)
	(file-name-shadow-tty-properties, file-name-shadow-mode):
	Remove autoloads, because the file is now preloaded.

2005-11-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* printing.el (easy-menu-intern): Don't define.
	(pr-get-symbol): Use easy-menu-intern only if defined.

	* simple.el (blink-matching-open): Simplify a bit.
	(completion-setup-function): Fix the case of partial-completion-mode
	when the minibuffer's contents start with "-".
	Obey completion-base-size-function even when
	minibuffer-completing-file-name is non-nil.

2005-11-16  Richard M. Stallman  <rms@gnu.org>

	* net/eudcb-ph.el (eudc-ph-open-session):
	Use set-process-query-on-exit-flag.

	* mail/smtpmail.el (smtpmail-send-it): Use insert-buffer-contents.

	* international/ucs-tables.el (ucs-set-table-for-input):
	Use make-local-variable, not make-variable-buffer-local.

	* emacs-lisp/byte-opt.el (byte-optimize-form-code-walker):
	Improve warning message text.

	* savehist.el (savehist-save-hook): Add :group.

	* menu-bar.el (menu-bar-help-menu):
	Rename Find Extra Packages to External Packages.

	* cus-edit.el (Custom-reset-standard): Verify that
	:custom-standard-value prop exists before calling it.

	* apropos.el (apropos-calc-scores): Use apropos-pattern.

2005-11-16  Martin Rudalics  <rudalics@gmx.at>

	* wid-edit.el (color): Enclose %t in %{...%}.

	* cus-edit.el (face): Enclose %t in %{...%}.

2005-11-16  Hrvoje Niksic  <hniksic@xemacs.org>

	* savehist.el (savehist-mode-hook): Re-add the var.
	(savehist-mode): Use it.

2005-11-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/flyspell.el: Fix commenting convention.
	Remove unnecessary leading * in custom docstrings.
	(flyspell-emacs): Remove unused var.
	(flyspell-delete-region-overlays): Use remove-overlays.
	(flyspell-accept-buffer-local-defs): Use save-current-buffer.
	(flyspell-debug-signal-no-check, flyspell-debug-signal-changed-checked)
	(flyspell-debug-signal-pre-word-checked, flyspell-post-command-hook)
	(flyspell-debug-signal-word-checked): Use with-current-buffer.
	(make-flyspell-overlay): Don't locally reuse a global name.
	(flyspell-highlight-incorrect-region)
	(flyspell-highlight-duplicate-region): Use flyspell-unhighlight-at.
	(flyspell-check-previous-highlighted-word): Use flyspell-overlay-p.
	(flyspell-notify-misspell): Remove unused args `start' and `end'.
	(flyspell-word): Adjust call accordingly.  Use ispell-send-string.
	Wrap calls to accept-process-output inside with-local-quit since it's
	often called from a post-command-hook.
	(flyspell-correct-word, flyspell-auto-correct-word):
	Use ispell-send-string.
	(flyspell-xemacs-popup): Remove unused arg `event'.  Update call.

	* calendar/diary-lib.el (diary-list-entries): Also hide the
	terminating newline.

2005-11-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-use-fonts): Remove the check for
	window-system, to allow fonts on tty.

2005-11-17  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-item-info): New function.
	(gud-install-speedbar-variables): Use it to display data type
	of watch expression as a tooltip in speedbar.

2005-11-15  Luc Teirlinck  <teirllm@auburn.edu>

	* font-core.el (global-font-lock-mode): Add :version keyword,
	because default was changed.

	* jka-cmpr-hook.el (auto-compression-mode): Ditto.

	* startup.el (command-line): Use `custom-reevaluate-setting' for
	`file-name-shadow-mode'.

	* loadup.el: Preload rfn-eshadow.

	* rfn-eshadow.el (file-name-shadow-mode): Set :init-value to t.
	Add :version keyword.
	(file-name-shadow-properties, file-name-shadow-tty-properties)
	(file-name-shadow): Add :version keyword.

	* cus-edit.el (custom-add-parent-links): Fix bug whereby, for
	instance, `(fringe custom-face)' shadowed `(fringe custom-group)'
	in the custom-group property of the symbol frames and the fringe
	group got no link to its parent group frames.
	Doc fix.

2005-11-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-stop-subjob): New function.
	(gud-menu-map, gud-tool-bar-map): Use it.

2005-11-16  Kim F. Storm  <storm@cua.dk>

	* progmodes/gud.el (gud-menu-map): Let [stop] stop program rather
	than kill it.
	(gud-tool-bar-map): Likewise.  Move cont/until/finish buttons
	to a more useful/logical place.

2005-11-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Make visibility of stop and
	go buttons complementary.

2005-11-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* rfn-eshadow.el (rfn-eshadow-regexp): Remove.
	(rfn-eshadow-sifn-equal): New function.
	(rfn-eshadow-update-overlay): Rewrite to use substitute-in-file-name.

2005-11-15  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-util.el (viper-non-word-characters-reformed-vi):
	Quote `-' in string.

	* emulation/viper.el (viper-emacs-state-mode-list): Ensure that
	rcirc-mode buffers come up in Emacs state.

	* ediff-util.el (ediff-make-temp-file): Use proper file-name-handler
	operation.

2005-11-15  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-termcap-format): Fix typos.
	(term-down): Fix the negative argument case.

2005-11-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Remove face-alias left over from change on
	2005-08-15.
	(gdb-ann3): New command gud-go.
	(menu): Accommodate gdb-mi.el.
	(gdb-assembler-custom): Make buffer of selected window current
	so that set-window-point works.

	* progmodes/gud.el (gud-menu-map, gud-tool-bar-map): Re-define
	buttons and include new ones.

2005-11-16  Kim F. Storm  <storm@cua.dk>

	* progmodes/gud.el (gud-tool-bar-item-visible-no-fringe): New function.
	(gud-menu-map): Use it.

2005-11-14  Luc Teirlinck  <teirllm@auburn.edu>

	* jka-cmpr-hook.el (auto-compression-mode): Enable it in a way
	that works correctly for Custom and that does not override a user
	who disables it.

	* help-mode.el (help-make-xrefs, help-xref-on-pp)
	(help-xref-interned, help-follow): Make hyperlinks for variables
	that are unbound, but have a non-nil variable-documentation property.

	* emacs-lisp/derived.el (define-derived-mode): Remove defvar for
	mode hook.  (It conflicted with defcustoms for some mode hooks.)
	Use the `variable-documentation' property to give the mode hook a
	docstring and expand that docstring.

2005-11-14  Hrvoje Niksic  <hniksic@xemacs.org>

	* savehist.el (savehist-mode): Don't bother with
	`custom-set-minor-mode'.
	(savehist-coding-system): Check XEmacs version.
	(history-length): Declare also at run time.
	(savehist-mode): Don't emit a message.  Don't run the minor mode hook.
	Don't set the customize state.
	(savehist-minibuffer-hook): Special case for when
	minibuffer-history-variable is equal to t.

2005-11-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (write-file): Refresh VC status.

	* calendar/diary-lib.el (diary-list-entries, diary-show-all-entries)
	(mark-diary-entries, make-diary-entry): Check default-major-mode rather
	than fundamental-mode to see if the mode was set.

2005-11-14  Romain Francoise  <romain@orebokech.com>

	* dired-x.el: If `vm-visit-folder' doesn't exist, define it as a
	dummy function in `eval-when-compile' to avoid compiler warning.
	Require `man' at compile time.

2005-11-14  Jay Belanger  <belanger@truman.edu>

	* calc/calc-alg.el (calcFunc-write-out-power): Rename it to
	calcFunc-powerexpand.
	(math-write-out-power): Rename it to math-powerexpand; have it
	handle negative exponents.
	(calc-writeoutpower): Rename it to calc-powerexpand.

	* calc/calc-ext.el: Change calcFunc-writeoutpower and
	calc-writeoutpower to calcFunc-powerexpand and calc-powerexpand in
	autoloads.
	Add calcFunc-ldiv to autoloads.

	* calc/calc-arith.el (calcFunc-ldiv): New function.

	* calc/calc.el (calc-left-divide): New function.

2005-11-14  Juri Linkov  <juri@jurta.org>

	* cus-edit.el (custom-variable-prompt): Set the default value arg
	of completing-read.

	* cus-dep.el (custom-make-dependencies): Reverse the list of
	found dependencies.

2005-11-14  Dan Nicolaescu  <dann@ics.uci.edu>

	* menu-bar.el (menu-bar-options-menu): Delete "Syntax
	Highlighting" entry, it is on by default now.
	(menu-bar-options-save): Do not save global-font-lock-mode.

2005-11-13  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-large-region):
	Call flyspell-accept-buffer-local-defs.

2005-11-13  Agustín Martín  <agustin.martin@hispalinux.es>

	* textmodes/flyspell.el (flyspell-notify-misspell):
	Fix misspelling of "Misspelling".
	(flyspell-process-localwords): New function.
	(flyspell-large-region): Call flyspell-process-localwords and
	flyspell-delete-region-overlays.
	(flyspell-delete-region-overlays): New function.
	(flyspell-delete-all-overlays): Call that.

2005-11-13  Richard M. Stallman  <rms@gnu.org>

	* help.el (help-for-help-internal): Improve doc of C-h a.
	(describe-key): Improve prompt; doc fix.

2005-11-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-svn.el (vc-svn-registered): Catch all errors.

	* cus-dep.el (custom-make-dependencies): Typo.

2005-11-13  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-util.el (top): Fix compilation warning.

2005-11-13  Kim F. Storm  <storm@cua.dk>

	* help.el (help-for-help-internal): Fix `a' entry.  Add `d' entry.

2005-11-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Move parentheses (again).
	(gud-speedbar-buttons): Match on "const char *" too.

	* progmodes/gdb-ui.el (gdb-var-create-handler)
	(gdb-var-list-children-handler): Match on "const char *" too.
	(gdb-var-evaluate-expression-handler): Match on empty string.
	(gdb-var-update-handler): Only call
	gdb-var-evaluate-expression-handler when required.

2005-11-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Revert to window-fringes for
	selected window.  This still doesn't work for speedbar.
	(gud-speedbar-buttons): Handle string expressions properly.

	* progmodes/gdb-ui.el (gdb-var-evaluate-expression-handler)
	(gdb-var-create-handler): Handle string expressions properly.
	(gdb-var-list-children-regexp, gdb-var-list-children-handler):
	Handle string expressions properly.  Move "type" field into regexp.

2005-11-12  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-maybe-message): New function to reduce
	code duplication: invokes `message' iff baud-rate is high enough.
	(bookmark-write-file): Use above instead of an inline conditional.
	(bookmark-load): Same.

2005-11-12  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-write-file): Don't visit the destination
	file, just write the data to it using write-region.  This is
	similar to revision 1.32 of saveplace.el, but with an additional
	change to avoid visiting the file in the first place.

2005-11-12  Chong Yidong  <cyd@stupidchicken.com>

	* hi-lock.el (hi-lock-mode): Set the default value of
	font-lock-defaults.

2005-11-11  Luc Teirlinck  <teirllm@auburn.edu>

	* find-lisp.el (find-lisp-find-dired-insert-file): Pass `string'
	arg to `file-attributes'.
	(find-lisp-format): The UID and GID can now be strings.

2005-11-12  Kim F. Storm  <storm@cua.dk>

	* help.el (help-map): Bind C-h d to apropos-documentation.

	* simple.el (what-cursor-position): Print (EOB) instead of (100%)
	when point is at end-of-buffer.

	* apropos.el (apropos-match-face): Doc fix.
	(apropos-sort-by-scores): Add new choice `verbose'.
	(apropos-documentation-sort-by-scores): New defcustom.
	(apropos-pattern): Now contains the pattern entered by the user.
	(apropos-pattern-quoted): New defvar.
	(apropos-regexp): New defvar, containing the regexp corresponding
	to apropos-pattern.
	(apropos-all-words-regexp): Rename from apropos-all-regexp.
	(apropos-read-pattern): New defun.  Use it to read pattern arg in
	interactive calls; returns list of words for a word list, and
	string for a regexp.
	(apropos-parse-pattern): Rename from apropos-rewrite-regexp.  Now
	parses a list of words or regexp as returned by apropos-read-pattern.
	(apropos-calc-scores): Return nil if apropos-regexp doesn't match.
	(apropos-score-doc): Return a very high score if the string
	entered by the user matches literally.
	(apropos-variable): Doc fix.  Use apropos-read-pattern.
	(apropos-command): Doc fix.  Use apropos-read-pattern and
	apropos-parse-pattern.  Call apropos-print with nosubst=t.
	(apropos, apropos-value): Doc fix.  Use apropos-read-pattern and
	apropos-parse-pattern.
	(apropos-documentation): Doc fix.  Use apropos-read-pattern and
	apropos-parse-pattern.  Locally bind apropos-sort-by-scores to
	apropos-documentation-sort-by-scores.  Call apropos-print with
	nosubst=t.
	(apropos-documentation-internal): Pass doc string through
	substitute-key-definition before adding text properties.
	Highlight substring matching literal user input if possible.
	(apropos-documentation-check-doc-file): Remove locals beg and end.
	Fix calculation of score (as added twice).  Pass doc string through
	substitute-key-definition before adding text properties.
	(apropos-documentation-check-elc-file): Pass doc string through
	substitute-key-definition before adding text properties.
	Highlight substring matching literal user input if possible.
	(apropos-print): Add new arg NOSUBST; if set, command and variable
	doc strings have already been passed through substitute-key-definition.
	Add code to handle apropos-accumulator items without score element
	for backwards compatibility (e.g. with woman package).
	Only show scores if apropos-sort-by-scores is `verbose'.

2005-11-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* jka-cmpr-hook.el (jka-compr-install): Use push and dolist.
	Add jka-compr-load-suffixes to load-suffixes.

	* jka-compr.el: Require jka-cmpr-hook.
	(jka-compr-info-compress-message, jka-compr-info-compress-program)
	(jka-compr-info-compress-args, jka-compr-info-uncompress-message)
	(jka-compr-info-uncompress-program, jka-compr-info-uncompress-args)
	(jka-compr-info-can-append, jka-compr-info-strip-extension)
	(jka-compr-info-file-magic-bytes, jka-compr-get-compression-info)
	(jka-compr-info-regexp): Remove.  Provided by jka-cmpr-hook.
	(jka-compr-uninstall): Remove entries from
	jka-compr-added-to-file-coding-system-alist after they are used.
	(jka-compr-error): Remove unused var `curbuf'.
	(jka-compr-file-local-copy): Remove unused var `notfound'.

2005-11-10  Romain Francoise  <romain@orebokech.com>

	* apropos.el (apropos-calc-scores): Use `apropos-pattern'.

2005-11-11  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Move parentheses.
	(gdb): New command gud-pv.

2005-11-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* tar-mode.el: Remove spurious or unnecessary leading stars
	in docstrings.
	(tar-header-block-tokenize): Also obey default-file-name-coding-system.
	(tar-parse-octal-integer-safe): Use mapc.
	(tar-header-block-summarize): Remove unused var `ck'.
	(tar-summarize-buffer): Don't clear the modified-p bit if it wasn't
	cleared before.  Obey default-enable-multibyte-characters.
	Use mapconcat.  Simplify setting of tar-header-offset.
	(tar-mode-map): Move initialization inside declaration.
	(tar-flag-deleted): Use `abs'.
	(tar-expunge-internal): Remove unused var `line'.
	(tar-expunge-internal): Don't hardcode point-min==1.
	(tar-expunge): Widen while doing set-buffer-multibyte.
	(tar-rename-entry): Use file-name-coding-system.
	(tar-alter-one-field): Don't hardcode point-min==1.
	(tar-subfile-save-buffer): string-as-unibyte works on unibyte strings.
	(tar-pad-to-blocksize): Don't hardcode point-min==1.  Clarify the code.

2005-11-10  Masatake YAMATO  <jet@gyve.org>

	* add-log.el (add-log-current-defun): Handle class::method
	notation of c++.  Fix incorrect comment.

2005-11-10  Alan Mackenzie  <acm@muc.de>

	* help-fns.el (describe-variable): Make C-h v work when a variable
	has variable documentation yet is unbound.

2005-11-10  Masatake YAMATO  <jet@gyve.org>

	* man.el (Man-highlight-references): Set an empty
	string to `Man-arguments' if it is nil.
	Suggested by Reiner Steib <Reiner.Steib@gmx.de>.

2005-11-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* Makefile.in (mh-loaddefs.el, loaddefs.el): Better follow the
	commenting conventions.

	* cus-dep.el (custom-make-dependencies): Simplify.
	Better follow the commenting conventions.

2005-11-09  Richard M. Stallman  <rms@gnu.org>

	* apropos.el (apropos-pattern): Rename from apropos-regexp.
	(apropos-orig-pattern): Rename from apropos-orig-regexp.
	All uses changed.
	(apropos-rewrite-regexp): Doc fix.
	(apropos-variable, apropos-command, apropos, apropos-value):
	Change prompt; carry through the argument renaming.

2005-11-09  Luc Teirlinck  <teirllm@auburn.edu>

	* find-lisp.el: Require dired.
	(find-lisp-find-dired-internal): Do not call
	`abbreviate-file-name' on DIR.

2005-11-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): Make gud-pp use user-defined command pp1.

2005-11-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Ensure tool-bar is constant
	when using the speedbar.
	(gdb): New command gud-pp.
	(gud-menu-map, gud-tool-bar-map): Put it on the tool bar.

2005-11-09  Juri Linkov  <juri@jurta.org>

	* replace.el (occur-excluded-properties): New defcustom.
	(occur-1, occur-engine, occur-accumulate-lines): Use it.

2005-11-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-convert-units): Replace any composite
	unit by its definition.

2005-11-08  Lars Hansen  <larsh@soem.dk>

	* emacs-lisp/autoload.el (update-directory-autoloads):
	Add obsolete function alias.

2005-11-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Don't set
	comment-indent-function.
	(lisp-comment-indent): Replace by an alias for comment-indent-default.

	* reveal.el (reveal-post-command): Rework the handling of
	reveal-open-spots, so as to be more reliable.  There were several
	tricky corner cases where an open spot might be lost, or where
	a closed spot might end up on the list of open spots.
	Only reveal text that's ellipsized.

2005-11-07  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-export-as-html): Remove bogus (debug) form.

2005-11-07  John Paul Wallington  <jpw@gnu.org>

	* ibuffer.el (ibuffer): Search iconified frames too when
	getting Ibuffer buffer's window.

2005-11-06  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el (compilation-internal-error-properties):
	save-excursion around the computation of MARKER.

2005-11-06  Piet van Oostrum  <piet@cs.uu.nl>

	* textmodes/flyspell.el (flyspell-external-point-words):
	flyspell-get-word returns a list, not just a string.

2005-11-06  John Paul Wallington  <jpw@pobox.com>

	* ibuffer.el (ibuffer): Search all visible frames when getting
	Ibuffer buffer's window.

2005-11-07  Masatake YAMATO  <jet@gyve.org>

	* man.el (Man-reference-regexp): Accept spaces between
	`Man-name-regexp' and `Man-section-regexp'.
	(Man-apropos-regexp): New variable.
	(Man-abstract-xref-man-page): Use value for `Man-target-string'
	if available.
	(Man-highlight-references, Man-highlight-references0):
	Handle the case when `Man-arguments' includes "-k".
	(Man-highlight-references0): Rename the argument `TARGET-POS' to
	`TARGET'. `TARGET' can be a number, function or nil.

2005-11-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler, gdb-var-delete)
	(gdb-edit-value, gdb-speedbar-expand-node, gdb-get-create-buffer)
	(gdb-breakpoints-mode, gdb-toggle-breakpoint, gdb-delete-breakpoint)
	(gdb-goto-breakpoint, gdb-frames-mode, gdb-registers-mode)
	(gdb-locals-mode, gdb-find-file-hook): Use buffer-local-value.
	(gdb-send-item): Use buffer-local-value and simplify.

2005-11-05  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Use `custom-reevaluate-setting' for
	`global-font-lock-mode'.

	* font-core.el (global-font-lock-mode): Enable `global-font-lock-mode'
	by default, except in batch mode or when the -D option is given.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode): Pass all
	specified keyword args on to `define-minor-mode'.  Update docstring.

2005-11-05  Romain Francoise  <romain@orebokech.com>

	* replace.el (occur-engine): Add marker at end of line, too.

2005-11-04  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-pgp.el (pgg-pgp-encrypt-region, pgg-pgp-decrypt-region)
	(pgg-pgp-encrypt-symmetric-region, pgg-pgp-encrypt-symmetric)
	(pgg-pgp-encrypt, pgg-pgp-decrypt-region, pgg-pgp-decrypt)
	(pgg-pgp-sign-region, pgg-pgp-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.
	(pgg-pgp-decrypt-region, pgg-pgp-sign-region): Use new name for
	pgg-add-passphrase-to-cache function.

	* pgg-pgp5.el (pgg-pgp5-encrypt-region, pgg-pgp5-decrypt-region)
	(pgg-pgp5-encrypt-symmetric-region, pgg-pgp5-encrypt-symmetric)
	(pgg-pgp5-encrypt, pgg-pgp5-decrypt-region, pgg-pgp5-decrypt)
	(pgg-pgp5-sign-region, pgg-pgp5-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.
	(pgg-pgp5-sign-region): Use new name of pgg-add-passphrase-to-cache
	function.

2005-11-04  Dan Nicolaescu  <dann@ics.uci.edu>

	* font-lock.el: Don't deal with font-lock-face-attributes here,
	move the code ...

	* startup.el (command-line): ... here.  Use face-spec-set instead
	of custom-declare-face.

	* faces.el (face-spec-set): Reset the face if spec is not nil.

2005-11-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* newcomment.el (comment-region-internal): Box more tightly in the
	common case where there's no TAB in the boxed text.

2005-11-04  Jan Djärv  <jan.h.d@swipnet.se>

	* info.el (info-tool-bar-map): Use images prev-node, next-node and
	up-node.

2005-11-04  Ulf Jasper  <ulf.jasper@web.de>

	* net/newsticker.el: Commentary updated.  Code formatting changed.
	(newsticker-version): Change to "1.9".
	(newsticker, newsticker-feed): Doc fix.
	(newsticker-url-list): Doc fix.  Add option "Weekly".
	(newsticker-retrieval-interval): Add option "Weekly".
	(newsticker-headline-processing): Doc fix.
	(newsticker-auto-mark-filter): Remove.
	(newsticker-auto-mark-filter-list): New.
	(newsticker-layout, newsticker-sort-method): Doc fix.
	(newsticker-hide-old-items-in-newsticker-buffer)
	(newsticker-heading-format, newsticker-item-format)
	(newsticker-desc-format): Doc fix.
	(newsticker-show-all-rss-elements): Remove.
	(newsticker-show-all-news-elements): New.
	(newsticker-faces, newsticker-ticker): Doc fix.
	(remove-from-invisibility-spec): Code formatting.
	(newsticker--process-ids): New.
	(newsticker-mode): Doc fix.
	(newsticker-mode): Change mode-line-format.
	(newsticker-start): Remove debug output.
	(newsticker-start-ticker): Doc fix.  Add autoload cookie.
	(newsticker-w3m-show-inline-images): Code formatting.
	(newsticker-next-item): Call `force-mode-line-update'.
	(newsticker-previous-item): Call `force-mode-line-update'.
	(newsticker-next-feed): Call `force-mode-line-update'.
	(newsticker-previous-feed): Call `force-mode-line-update'.
	(newsticker-mark-all-items-at-point-as-read): Code formatting.
	(newsticker-show-old-items): Do not show descs.
	(newsticker-hide-entry): Hide too much.
	(newsticker-hide-entry, newsticker-show-entry)
	(newsticker-toggle-auto-narrow-to-feed): Code formatting.
	(newsticker-set-auto-narrow-to-feed): Update buffer immediately.
	(newsticker-toggle-auto-narrow-to-item): Code formatting.
	(newsticker-set-auto-narrow-to-item): Update buffer immediately.
	(newsticker-running-p, newsticker-ticker-running-p): Autoload cookie.
	(newsticker-get-news): Call `force-mode-line-update'.
	Collect process ids.
	(newsticker--sentinel): Change coding system handling.
	Move image retrieval to new functions newsticker--get-logo-url-*.
	Move feed parsing to new functions newsticker--parse-*.
	Update list of process ids.
	(newsticker--get-logo-url-atom-1.0, newsticker--get-logo-url-atom-0.3)
	(newsticker--get-logo-url-rss-2.0, newsticker--get-logo-url-rss-1.0)
	(newsticker--get-logo-url-rss-0.92, newsticker--get-logo-url-rss-0.91)
	(newsticker--parse-atom-0.3, newsticker--parse-atom-1.0)
	(newsticker--parse-rss-0.91, newsticker--parse-rss-0.92)
	(newsticker--parse-rss-1.0, newsticker--parse-rss-2.0)
	(newsticker--parse-generic-feed, newsticker--parse-generic-items): New.
	(newsticker--decode-coding-string): Remove.
	(newsticker--decode-numeric-entities): Check input.  Format code.
	(newsticker--remove-whitespace): Check input.
	(newsticker--do-forget-preformatted): Doc fix.
	(newsticker--decode-rfc822-date): Allow for missing time.
	(newsticker--update-process-ids): New.
	(newsticker--image-sentinel): Change comment.
	(newsticker--image-read): Change error message.
	(newsticker--imenu-goto): Doc fix.  Show headline title.
	(newsticker--buffer-set-uptodate): Call `force-mode-line-update'.
	(newsticker--buffer-do-insert-text): Clean whitespace in
	html-rendered headline title.  Code formatting.
	Call `newsticker--buffer-print-extra-elements'.
	(newsticker--buffer-print-extra-element): Remove.
	(newsticker--buffer-print-extra-elements): New.
	(newsticker--buffer-do-print-extra-element): New.
	(newsticker--buffer-insert-enclosure): Doc fix.  Use MBytes for
	large sizes.
	(newsticker--run-auto-mark-filter)
	(newsticker--do-run-auto-mark-filter):
	Use `newsticker-auto-mark-filter-list'.

2005-11-04  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el: Use split-string OMIT-NULLS argument.
	(rcirc-print): Force redisplay before running hooks.  Do long
	buffer truncation after making new text read-only.  Deal with nil
	text when decoding strings.  If TARGET is nil, use either the
	currently selected buffer, if it is an rcirc buffer and of the
	same process or the process buffer.
	(rcirc-mode): Remove header-line.  Recompute short buffer names.
	Initialize rcirc-buffer-alist here instead of rcirc-get-buffer-create.
	(rcirc-short-buffer-name): Add variable.
	(rcirc-kill-buffer-hook): Recompute short buffer names.
	Remove nick from private channel.
	(rcirc-send-input): Send command text to current-buffer.
	Don't clear overlay arrow here.
	(rcirc-short-buffer-name): Return a short buffer name.
	(rcirc-update-short-buffer-names, rcirc-abbreviate)
	(rcirc-rebuild-tree, rcirc-make-trees): Add functions to generate
	buffer-name abbreviations.
	(rcirc-kill-buffer-hook-1): Split to make debugging easier.
	Do not touch nick-table when killing a parted channel.
	(rcirc-window-configuration-change): Rename from rcirc-update-activity.
	Clear arrow from current buffer if it is now hidden.
	(rcirc-current-buffer): Add variable.
	(rcirc-my-nick, rcirc-other-nick, rcirc-server)
	(rcirc-nick-in-message, rcirc-prompt, rcirc-mode-line-nick):
	Remove -face from names.
	(rcirc-update-activity-string): Print "DND" when globally ignoring
	activity.
	(rcirc-ignore-buffer-activity-flag): Rename from
	rcirc-ignore-channel-activity.
	(rcirc-ignore-all-activity-flag): Doc fix.
	(rcirc-channels): Remove variable.
	(rcirc-kill-buffer-hook):
	(rcirc-get-buffer-create): Add nick to private channel.
	(rcirc-multiline-edit-submit): Remove tabs.
	(rcirc-put-nick-channel, rcirc-channel-nicks): Look up nicks case
	folded.
	(rcirc-remove-nick-channel): Bug fix.
	(rcirc-toggle-ignore-buffer-activity): Rename from
	rcirc-toggle-ignore-channel-activity.
	(rcirc-record-activity): Add buffers to the front of the list.
	(rcirc-update-activity): Remove killed buffers from list.
	(rcirc-process-server-response-1): Remove last argument if it is
	null before calling handler.
	(rcirc): Add "rcirc" defcustom prefix.
	(rcirc-prompt): Simplify default prompt.
	Use custom-initialize-default.
	(rcirc-private-chats): Remove variable.
	(rcirc-prompt): Change initialization.
	(rcirc-version): Remove function.
	(rcirc-id-string): Add constant.
	(rcirc-last-buffer): Remove variable.
	(rcirc-buffer-alist): Add variable.
	(rcirc-connect): Update variable setup.
	(rcirc-sentinel, rcirc-update-prompt): Use `rcirc-buffer-alist'.
	(rcirc-trap-errors-flag): Rename from `rcirc-trap-errors' change
	default.
	(rcirc-handler-generic): Trigger activity.
	(rcirc-send-message): Create the buffer of the target.
	(rcirc-generate-new-buffer-name): Rename from `rcirc-get-buffer-name'.
	(rcirc-get-buffer): Just return nil if there is no matching buffer.
	(rcirc-multiline-edit-cancel): Remove function.
	(rcirc-set-last-buffer): Remove function.
	(rcirc-get-any-buffer): Add function.
	(rcirc-join-channels): Don't print /join text.
	(rcirc-toggle-ignore-channel-activity): Add and update echo area
	messages.
	(rcirc-cmd-ctcp): Use rcirc-send-string to send request.
	(rcirc-handler-NOTICE): Recognize CTCP responses.
	(rcirc-handler-332, rcirc-handler-332): Use a temp buffer for
	constructing TOPIC string for buffers we are not JOINed.
	(rcirc-handler-CTCP-response): Add handler.
	(rcirc-multiline-edit-submit): Restore the window-configuration
	before adjusting point.
	(rcirc): Add customization group.
	(rcirc-server, rcirc-port, rcirc-nick, rcirc-user-name)
	(rcirc-user-full-name, rcirc-startup-channels-alist)
	(rcirc-fill-flag, rcirc-fill-column, rcirc-fill-prefix)
	(rcirc-ignore-all-activity-flag, rcirc-time-format)
	(rcirc-input-ring-size, rcirc-read-only-flag)
	(rcirc-buffer-maximum-lines, rcirc-authinfo-file-name)
	(rcirc-auto-authenticate-flag, rcirc-prompt, rcirc-print-hooks):
	Change defvar to defcustom.
	(rcirc-update-prompt): Add optional ALL arg, which will update
	prompts in all rcirc buffers.  Regexp quote replacement text.
	(rcirc-fill-column): Accept frame-width as a value.
	(rcirc-set-changed): Add function.
	(rcirc-next-active-buffer): Write more meaningful messages.
	(rcirc-faces): Add customization group.
	(rcirc-my-nick-face, rcirc-other-nick-face, rcirc-server-face)
	(rcirc-nick-in-message-face, rcirc-prompt-face)
	(rcirc-mode-line-nick-face): Move into rcirc-faces group.
	(with-rcirc-process-buffer): Move before first usage.
	(rcirc-debug-buffer): Rename from `rcirc-log-buffer'.
	(rcirc-debug-flag): Rename from `rcirc-log-p'.
	(rcirc-debug): Rename from `rcirc-log'.
	(rcirc-format-response-string): Do not print `-' chars for a
	NOTICE with no sender.  Simplify output of server responses.

2005-11-04  Henrik Enberg  <henrik.enberg@telia.com>

	(rcirc-browse-url-map, rcirc-browse-url-at-point)
	(rcirc-browse-url-at-mouse, rcirc-mangle-text):
	Make urls mouse and RET clickable.

2005-11-04  Henrik Enberg  <henrik.enberg@telia.com>

	* mail/rmailout.el (rmail-output-to-rmail-file, rmail-output): Doc fix.

2005-11-04  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-pgp.el (pgg-pgp-encrypt-region, pgg-pgp-decrypt-region)
	(pgg-pgp-encrypt-symmetric-region, pgg-pgp-encrypt-symmetric)
	(pgg-pgp-encrypt, pgg-pgp-decrypt-region, pgg-pgp-decrypt)
	(pgg-pgp-sign-region, pgg-pgp-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.
	(pgg-pgp-decrypt-region, pgg-pgp-sign-region): Use new name for
	pgg-add-passphrase-to-cache function.

	* pgg-pgp5.el (pgg-pgp5-encrypt-region, pgg-pgp5-decrypt-region)
	(pgg-pgp5-encrypt-symmetric-region, pgg-pgp5-encrypt-symmetric)
	(pgg-pgp5-encrypt, pgg-pgp5-decrypt-region, pgg-pgp5-decrypt)
	(pgg-pgp5-sign-region, pgg-pgp5-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.
	(pgg-pgp5-sign-region): Use new name of pgg-add-passphrase-to-cache
	function.

2005-11-04  Edward O'Connor  <hober0@gmail.com>  (tiny change)

	* net/goto-addr.el (goto-address-url-regexp): Remove `data:' URLs
	from goto-address-url-regexp.

2005-11-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-read-date, org-goto-calendar)
	(org-recenter-calendar, org-agenda-goto-calendar):
	Temporarily clear `calendar-move-hook'.

2005-11-04  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-merg.el (ediff-merge-region-is-non-clash):
	Return t, if not merging.

	* ediff-util.el (ediff-previous-difference): Don't skip regions that
	have merge clashes.

2005-11-04  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* mwheel.el (mouse-wheel-down-event, mouse-wheel-up-event):
	Undo previous change.

	* startup.el (command-line): Use `custom-reevaluate-setting' for
	mouse-wheel-down-event and mouse-wheel-up-event.  Don't call
	tty-register-default-colors on Mac.

2005-11-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-buffer-type): Remove duplicate declaration.
	(gdb-buffer-type): Make it automatically buffer local...
	(gdb-get-create-buffer): ...and set it accordingly.
	(gdb-frame-gdb-buffer, gdb-display-gdb-buffer): Make these
	actually work.

2005-11-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* font-lock.el (font-lock-warning-face): Use the more vivid red1,
	not red.

2005-11-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gud-watch): Use save-selected-window in
	case GUD buffer is not visible.
	(gdb-goto-breakpoint): Try to force display in source buffer.
	(gdb-frame-gdb-buffer): Copy other similar functions.
	(gdb-restore-windows): Don't display source if not asked for.
	(gdb-assembler-buffer-name): Don't capitalize.

2005-11-03  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (key-sequence): New widget type.

	* simple.el (set-mark-command-repeat-pop): New variable.
	(set-mark-command): Only interpret plan C-@ after a pop as a pop
	if set-mark-command-repeat-pop is true.

	* info.el (Info-fontify-node): Don't display extra "see" if there
	already is one here.

	* mouse.el: Fix special handling of DEL after dragging a region:
	(mouse-drag-region-1): Treat mouse-set-region like mouse-set-point.
	(mouse-region-delete-keys): Change to defcustom.  Add [backspace].

	* mail/feedmail.el: Use insert-buffer-substring, not insert-buffer.

	* textmodes/ispell.el (ispell-command-loop): Change `i' description
	not to assume it pertains to an affix.

	* textmodes/flyspell.el (flyspell-post-command-hook):
	Bind deactivate-mark to prevent deactivation.

2005-11-03  Lars Hansen  <larsh@soem.dk>

	* dired-x.el: Add menu bindings for dired-do-find-marked-files,
	dired-do-relsymlink, dired-flag-extension, dired-mark-extension,
	dired-mark-omitted, dired-do-relsymlink-regexp, dired-omit-mode.

2005-11-03  Romain Francoise  <romain@orebokech.com>

	* net/eudcb-mab.el: Now part of GNU Emacs.  Update FSF's address.
	Update copyright years.

2005-11-03  Sam Steingold  <sds@gnu.org>

	* mwheel.el (mouse-wheel-down-event, mouse-wheel-up-event):
	Use system-type instead of window-system because window-system is not
	correctly defined during loadup.

2005-11-02  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-syntax-table): Allow xml.el to compile in XEmacs.
	(xml-parse-tag): Join strings separated by a comment properly.

2005-11-02  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/byte-opt.el (byte-optimize-pure-func): Fix last fix.

2005-11-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/byte-opt.el (string-to-syntax): Mark it as pure.
	(byte-optimize-pure-func): Quote the eval'd value.

	* progmodes/perl-mode.el (perl-font-lock-special-syntactic-constructs):
	Rename from perl-font-lock-syntactic-face-function.
	Change the calling convention so it can be used as a font-lock MATCHER.
	Do the parse-partial-sexp loop ourselves.
	(perl-font-lock-syntactic-keywords): Use it.
	(perl-mode): Don't set font-lock-syntactic-face-function any more.

2005-11-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-mouse-until): Make it work in the
	disassembly buffer too.
	(gdb-exited): Remove overlay arrows when execution has finished.
	(gdb-info-frames-custom, gdb-info-threads-custom)
	(gdb-info-registers-custom): Don't add inappropriate text
	properties if inferior is not active.

2005-11-02  Glenn Morris  <rgm@gnu.org>

	* progmodes/fortran.el (fortran-blink-match):
	Use `blink-matching-delay'.

2005-11-02  John Mongan  <jmongan@mccammon.ucsd.edu>  (tiny change)

	* progmodes/f90.el (f90-match-end): Use `blink-matching-delay'.

2005-11-02  Lars Hansen  <larsh@soem.dk>

	* net/tramp.el (tramp-action-out-of-band): Handle scp message
	"Permission denied".

2005-11-01  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-external-point-words):
	Pass nil to flyspell-get-word.

2005-11-02  Kim F. Storm  <storm@cua.dk>

	* menu-bar.el (menu-bar-options-menu): Show "Shift Movement (CUA)"
	item instead of "C-x/C-c/C-v (CUA)" if cua-enable-cua-keys is nil.

2005-11-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/cal-menu.el (date, event): Don't declare as dynamic-var.
	(calendar-mouse-holidays, calendar-mouse-view-diary-entries)
	(calendar-mouse-print-dates): Add optional `event' argument.
	Update interactive-spec.
	(calendar-mouse-cal-tex-menu, cal-tex-mouse-filofax):
	Use `calendar-event-to-date' instead of `event'.

2005-11-02  Masatake YAMATO  <jet@gyve.org>

	* progmodes/ld-script.el (ld-script-builtins):
	Add more words: "DATA_SEGMENT_ALIGN", "DATA_SEGMENT_END",
	"DATA_SEGMENT_RELRO_END", "LENGTH", "ORIGIN", and "SEGMENT_START".
	(auto-mode-alist): Accept .ld, .lds, ld.in and .lds.in.

2005-11-01  Romain Francoise  <romain@orebokech.com>

	* vc-sccs.el: Update copyright year.
	* ezimage.el: Likewise.

2005-11-01  KOBAYASHI Yasuhiro  <kobayays@otsukakj.co.jp>  (tiny change)

	* info.el (Info-fontify-node): Use `string-width' for fontifying
	underlined titles.

2005-11-01  Juri Linkov  <juri@jurta.org>

	* info.el (Info-fontify-node): Downcase node header keywords Node,
	Prev, Next, Up before comparison.
	(Info-history): Insert absolute directory name, and put invisible
	property on it.

2005-11-01  Juri Linkov  <juri@jurta.org>

	* info.el (Info-file-supports-index-cookies): New variable.
	(Info-find-node-2): Check makeinfo version for index cookie support.
	(Info-index-nodes): Search for nodes with index cookies only when
	Info-file-supports-index-cookies is t.  Otherwise, search nodes
	with "Index" in the node name.
	(Info-index-node): Search index cookie in the current node only when
	Info-file-supports-index-cookies is t.  Otherwise, check the word
	"Index" in the node name.
	(Info-find-emacs-command-nodes): Remove code that searches nodes
	with "Index" node name in the top menu.

2005-11-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/scheme.el (scheme-mode-variables): Use the default
	comment-indent-function.

	* faces.el (face-attribute): Handle the case where a face inherits from
	a non-existent face.

	* simple.el (eval-expression-print-format): Use lisp-readable syntax
	for octal and hexa output, and merge the char into the paren.
	(kill-new): Use push.
	(copy-to-buffer): Use with-current-buffer.
	(completion-setup-function): Move code in loop to remove redundancy.
	(minibuffer-local-must-match-map): Don't add bindings that duplicate
	those inherited from minibuffer-local-completion-map.

	* savehist.el (savehist-mode) <defcustom>:
	Use custom-set-minor-mode if available.
	(savehist-mode) <defun>: Run the minor mode hook, set the custom state
	and emit a message if applicable.

2005-11-01  Hrvoje Niksic  <hniksic@xemacs.org>

	* savehist.el: Sync up to version 19.
	(savehist-mode): New minor mode.
	(savehist-file): Use ~/.emacs.d or ~/.xemacs if available.
	(savehist-length): Remove (use history-length instead).
	(savehist-file-modes): Rename from savehist-modes.
	(savehist-save-hook, savehist-loaded): New vars.
	(savehist-load): Use savehist-mode.  Try to smooth up transition from
	old format to new format.
	(savehist-install): Allow savehist-autosave-interval to be nil.
	(savehist-save): Run the new hook.  Be more careful to only trim the
	history variables.
	(savehist-trim-history): New fun.  Replaces savehist-process-for-saving.
	(savehist-printable): Print into a buffer rather than char-by-char.

2005-11-01  John Wiegley  <johnw@newartisans.com>

	* iswitchb.el (iswitchb-define-mode-map): Re-enable the
	toggle-ignore keybinding (C-a).  The author said it had been
	disabled much earlier due to a possible incompatibility, but after
	many months of usage I have encountered no problems (and it is a
	rather useful option, especially for switching to " *temp*").

	* net/eudcb-mab.el (eudc-mab-query-internal): Add backend
	support for OS/X's AddressBook, by calling out to the open source
	program "contacts" (installable through Fink).

	* net/eudc.el (eudc-expand-inline): If the
	`eudc-multiple-match-handling-method' is set to `all', delete the
	query string before inserting the query result.

	* eshell/em-ls.el (eshell-do-ls): Add no-op support for --dired
	flag, to prevent Eshell from using the system ls when
	`eshell-ls-insert-directory' is in used.
	(eshell-ls-insert-directory): Disable font-lock in directory
	buffer so that Eshell's own fontification is seen.  This broke
	recently due to changes in font-lock, so this goes back to version
	21 behavior.

2005-11-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-use-inferior-io-buffer): New function.
	(menu, toggle-gdb-use-inferior-io-buffer): Get rid of defadvice.
	(gdb-many-windows): Doc fix.

2005-10-31  Romain Francoise  <romain@orebokech.com>

	* help-fns.el (describe-simplify-lib-file-name): Add autoload cookie.

2005-10-31  Dan Nicolaescu  <dann@ics.uci.edu>

	* loadup.el: Load emacs-lisp/syntax, font-lock and jit-lock so
	that global-font-lock-mode can be enabled by default.

	* font-lock.el (font-lock-keywords, font-lock-mode-internal)
	(font-lock-add-keywords, font-lock-remove-keywords)
	(font-lock-fontify-buffer): Remove autoload cookies.

	* jit-lock.el (jit-lock-register): Likewise.

	* emacs-lisp/syntax.el (syntax-ppss): Likewise.

2005-10-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-many-windows): Leave window configuration
	intact if there is no gud-comint-buffer.

2005-10-31  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/gud.el (gud-filter): Use comint-update-fence to delete
	old prompt comint-prompt-read-only is t and GDB commands are
	issued from tool bar etc.

2005-10-31  Masatake YAMATO  <jet@gyve.org>

	* vc.el (vc-directory-exclusion-list): Add "{arch}".

2005-10-30  Chong Yidong  <cyd@stupidchicken.com>

	* thumbs.el (thumbs-thumbsdir): Default to ~/.emacs.d/thumbs.
	(thumbs-thumbsdir): Make .emacs.d if it does not exist.

2005-10-30  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-chunksize): Escape parentheses in docstring
	starting at beginning of line.  Fontification is messed up when
	`open-paren-in-column-0-is-defun-start' set to t.
	Reported by John Paul Wallington <jpw@pobox.com>.

2005-10-30  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-send-input): Call `comint-update-fence' when
	`comint-process-echoes' and `comint-prompt-read-only' are both
	non-nil, to avoid leftover read-only newline.

2005-10-30  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-external-point-words):
	Detect when WORD can't be checked properly because
	flyspell-get-word finds just part of it, and move on.

	* textmodes/ispell.el (ispell-dictionary-alist-5): Add . as
	boundarychar for Polish.
	(ispell-dictionary-alist-4): Add . as boundarychar for Italian.
	(ispell-dictionary-alist-3): Add . and @ as boundarychars for French.

2005-10-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-tooltip-print-1): Fix regexp.
	(gdb-registers-font-lock-keywords): Delete.
	(gdb-registers-mode): Don't fontify.
	(gdb-info-registers-custom): Use text properties instead as, in
	future, changed register values will use font-lock-warning-face.
	(gdb-local-font-lock-keywords): Rename to...
	(gdb-locals-font-lock-keywords): ...for consistency.

2005-10-30  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-switch-backend): Better error message if the buffer is
	not visiting a file under version control.

	* vc-cvs.el (vc-cvs-delete-file): Commit the file after removing it.

2005-10-29  Chong Yidong  <cyd@stupidchicken.com>

	* startup.el (command-line): Use ~/.emacs.d/init.el instead of
	~/.emacs.d/.emacs.

2005-10-29  Richard M. Stallman  <rms@gnu.org>

	* replace.el (occur-mode-mouse-goto): Always go to other window.
	(occur-mode-goto-occurrence): Always switch in same window.

	* simple.el (undo): Display message at end, not at start.

	* emacs-lisp/timer.el (timer-activate, timer-activate-when-idle):
	New arg REUSE-CELL.
	(cancel-timer-internal): New function.
	(timer-event-handler): Use cancel-timer-internal,
	and pass the cell it returns to timer-activate...

	* jit-lock.el (jit-lock-function, jit-lock-stealth-fontify)
	(jit-lock-deferred-fontify, jit-lock-context-fontify)
	(jit-lock-after-change): Test memory-full.

2005-10-29  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-gpg.el (pgg-gpg-select-matching-key): Fix: look at the right
	part of the decoded armor to find the key-identifier.
	(pgg-gpg-lookup-key-owner): New function to return the
	human-readable identifier of a key owner.
	(pgg-gpg-lookup-id-from-key-owner): Make it easy to identify the
	key itself.
	(pgg-gpg-decrypt-region): Prompt with the key owner (rather than
	the key value) if we have a key and can match it against a secret
	key.  Also, added a note pointing out fact that the prompt only
	indicates the first matching key.

	* pgg.el (pgg-decrypt): Passing along PASSPHRASE in call to
	pgg-decrypt-region.
	(pgg-pending-timers): A new hash for tracking the passphrase cache
	timers, so that new ones supersede old ones.
	(pgg-add-passphrase-to-cache): Rename from
	`pgg-add-passphrase-cache' to reduce confusion (all callers
	changed).  Modified to cancel old timers when new ones are added.
	(pgg-remove-passphrase-from-cache): Rename from
	`pgg-remove-passphrase-cache' to reduce confusion (all callers
	changed).  Modified to cancel old timers when their keys are
	removed from the cache.
	(pgg-cancel-timer): In Emacs, an alias for cancel-timer; in
	XEmacs, an indirection to delete-itimer.
	(pgg-read-passphrase-from-cache, pgg-read-passphrase):
	Extract pgg-read-passphrase-from-cache from pgg-read-passphrase so
	users can only check cache without risk of prompting.  Correct bug in
	notruncate behavior.
	(pgg-read-passphrase-from-cache, pgg-read-passphrase)
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache):
	Add informative docstrings.
	(pgg-decrypt): Convey provided passphrase in subordinate call to
	pgg-decrypt-region.

	* pgg.el (pgg-encrypt-region, pgg-encrypt-symmetric-region)
	(pgg-encrypt-symmetric, pgg-encrypt, pgg-decrypt-region)
	(pgg-decrypt, pgg-sign-region, pgg-sign): Add optional
	`passphrase' argument, so the passphrase can be managed externally
	and then passed in to the system.

	* pgg.el (pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add optional NOTRUNCATE argument,
	so the passphrase cache can be used reliably with identifiers
	besides a pgp packet's key id.

	* pgg-gpg.el (pgg-pgp-encrypt-region)
	(pgg-pgp-encrypt-symmetric-region, pgg-pgp-encrypt-symmetric)
	(pgg-pgp-encrypt, pgg-pgp-decrypt-region, pgg-pgp-decrypt)
	(pgg-pgp-sign-region, pgg-pgp-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Add optional
	`notruncate' argument, so the passphrase cache can be used
	reliably with identifiers besides a pgp packet's key id.

2005-10-29  Sascha Wilde  <swilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-encrypt-symmetric-region): New function for
	symmetric encryption.
	(pgg-gpg-symmetric-key-p): New function to check for an symmetric
	encrypted session key.
	(pgg-gpg-decrypt-region): When decrypting a symmetric encrypted
	message ask for the passphrase in a proper way.

	* pgg.el (pgg-encrypt-symmetric, pgg-encrypt-symmetric-region):
	New user commands for symmetric encryption.

2005-10-29  Roland Winkler  <roland.winkler@physik.uni-erlangen.de>

	* textmodes/conf-mode.el (conf-assignment-sign)
	(conf-assignment-regexp): Fix docstrings.
	(conf-mode-initialize): New function.
	(conf-mode): Remove optional args.  Use delay-mode-hooks to
	recognize recursive calls.
	(conf-unix-mode, conf-windows-mode, conf-javaprop-mode)
	(conf-space-mode, conf-colon-mode, conf-ppd-mode)
	(conf-xdefaults-mode): Use define-derived-mode and
	conf-mode-initialize.

2005-10-29  Romain Francoise  <romain@orebokech.com>

	* help-fns.el (describe-simplify-lib-file-name): Fix regexp.

2005-10-29  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-gpg.el (pgg-gpg-select-matching-key): Fix: look at the right
	part of the decoded armor to find the key-identifier.
	(pgg-gpg-lookup-key-owner): New function to return the
	human-readable identifier of a key owner.
	(pgg-gpg-lookup-id-from-key-owner): Make it easy to identify the
	key itself.
	(pgg-gpg-decrypt-region): Prompt with the key owner (rather than
	the key value) if we have a key and can match it against a secret
	key.  Also, added a note pointing out fact that the prompt only
	indicates the first matching key.

	* pgg.el (pgg-decrypt): Passing along PASSPHRASE in call to
	pgg-decrypt-region.
	(pgg-pending-timers): A new hash for tracking the passphrase cache
	timers, so that new ones supersede old ones.
	(pgg-add-passphrase-to-cache): Rename from
	`pgg-add-passphrase-cache' to reduce confusion (all callers
	changed).  Modified to cancel old timers when new ones are added.
	(pgg-remove-passphrase-from-cache): Rename from
	`pgg-remove-passphrase-cache' to reduce confusion (all callers
	changed).  Modified to cancel old timers when their keys are
	removed from the cache.
	(pgg-cancel-timer): In Emacs, an alias for cancel-timer; in
	XEmacs, an indirection to delete-itimer.
	(pgg-read-passphrase-from-cache, pgg-read-passphrase):
	Extract pgg-read-passphrase-from-cache from pgg-read-passphrase so
	users can only check cache without risk of prompting.  Correct bug in
	notruncate behavior.
	(pgg-read-passphrase-from-cache, pgg-read-passphrase)
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache):
	Add informative docstrings.
	(pgg-decrypt): Convey provided passphrase in subordinate call to
	pgg-decrypt-region.

2005-10-20  Ken Manheimer  <ken.manheimer+emacs@gmail.com>

	* pgg.el (pgg-encrypt-region, pgg-encrypt-symmetric-region)
	(pgg-encrypt-symmetric, pgg-encrypt, pgg-decrypt-region)
	(pgg-decrypt, pgg-sign-region, pgg-sign): Add optional
	`passphrase' argument, so the passphrase can be managed externally
	and then passed in to the system.

	* pgg.el (pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add optional NOTRUNCATE argument,
	so the passphrase cache can be used reliably with identifiers
	besides a pgp packet's key id.

	* pgg-gpg.el (pgg-pgp-encrypt-region)
	(pgg-pgp-encrypt-symmetric-region, pgg-pgp-encrypt-symmetric)
	(pgg-pgp-encrypt, pgg-pgp-decrypt-region, pgg-pgp-decrypt)
	(pgg-pgp-sign-region, pgg-pgp-sign): Add optional PASSPHRASE
	argument to all these routines, so the passphrase can be managed
	externally and passed in to the system.

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Add optional
	`notruncate' argument, so the passphrase cache can be used
	reliably with identifiers besides a pgp packet's key id.

2005-10-29  Sascha Wilde  <swilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-encrypt-symmetric-region): New function for
	symmetric encryption.
	(pgg-gpg-symmetric-key-p): New function to check for an symmetric
	encrypted session key.
	(pgg-gpg-decrypt-region): When decrypting a symmetric encrypted
	message ask for the passphrase in a proper way.

	* pgg.el (pgg-encrypt-symmetric, pgg-encrypt-symmetric-region):
	New user commands for symmetric encryption.

2005-10-28  Bill Wohler  <wohler@newt.com>

	* help-mode.el (help-url): New button type.  Calls browse-url.
	(help-xref-url-regexp): New regexp to recognize URLs in docstring.
	Similar to Info nodes: URL `url'.
	(help-make-xrefs): Create help-url buttons for
	help-xref-url-regexp matches.

2005-10-29  Nick Roberts  <nickrob@snap.net.nz>

	* tool-bar.el (tool-bar-add-item-from-menu)
	(tool-bar-local-item-from-menu): Fix doc strings.

2005-10-28  Romain Francoise  <romain@orebokech.com>

	* ldefs-boot.el: Update.

	* subr.el (locate-library): Move from help-fns.el.
	* help-fns.el (locate-library): Move to subr.el.

2005-10-28  Richard M. Stallman  <rms@gnu.org>

	* net/tramp.el (tramp-completion-mode): defvar moved up.

	* emacs-lisp/easymenu.el (easy-menu-change): Doc fix.

	* tool-bar.el (tool-bar-mode): Delete autoload cookie.

	* files.el (find-file-noselect): Use %d to format large file size.

	* bindings.el (mode-line-format): Add %e.

	* loadup.el ("facemenu"): Load unconditionally.
	("image", "international/fontset", "dnd", "mwheel", "tool-bar"):
	("x-dnd"): Load, when appropriate.

	* startup.el (command-line): Call before-init-hook earlier.
	Warn about some bad characters in -u user name.

	* textmodes/flyspell.el (flyspell-large-region): Pass -t if Tex file.
	(flyspell-external-point-words): Error if misspelled word is not found.
	Set flyspell-large-region-beg at end of word.

2005-10-28  Andreas Schwab  <schwab@suse.de>

	* view.el (View-revert-buffer-scroll-page-forward):
	Use view-page-size-default.

2005-10-28  Juri Linkov  <juri@jurta.org>

	* international/quail.el (quail-get-current-str): Translate last
	raw character for deterministic input methods.

2005-10-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el: Add functions to autoloads.
	(math-identity-matrix-p, math-ident-row-p): New functions.

	* calc/calc-arith.el (calc-mul-symb-fancy): Add checks for
	multiplication by an identity matrix; don't turn multiplication by
	an inverse matrix into division.
	(math-div-symbol-fancy): Replace division by matrices with
	multiplication by inverse.

	* calc/calc-misc.el (calcFunc-inv): Check for symbolic matrices.

	* calc/calc-alg.el (calcFunc-writeoutpower, math-write-out-power)
	(calc-writeoutpower): New functions.

2005-10-27  Romain Francoise  <romain@orebokech.com>

	* replace.el (occur-engine): Include colon in mouse-face highlight.

	* dired-x.el: Change Maintainer field.

2005-10-26  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Bind after-change-functions to
	nil during initial decoding and final encoding.

2005-10-26  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-emulate-terminal, term-handle-colors-array)
	(term-handle-ansi-escape): Specify the terminfo capabilities
	implemented.

2005-10-26  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-fontify-node): Fix detection of sentence-break
	before *Note.

2005-10-26  Romain Francoise  <romain@orebokech.com>

	* smerge-mode.el: Add `tools' to file keywords.

2005-10-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Only display gud-until icon
	when the fringe is not available.

	* progmodes/gdb-ui.el (def-gdb-auto-updated-buffer)
	(def-gdb-auto-update-trigger): Simplify construction.
	(gdb-locals-buffer): Use def-gdb-auto-update-trigger instead of
	def-gdb-auto-updated-buffer as gdb-info-locals-handler is
	defined explicitly.
	(gdb-assembler-buffer): Use def-gdb-auto-update-handler instead of
	def-gdb-auto-updated-buffer as gdb-invalidate-assembler is
	defined explicitly.
	(gdb-info-locals-custom): Remove as it's a no-op.

2005-10-25  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Remove narrowing before
	performing the initial decoding or final encoding.

2005-10-25  Romain Francoise  <romain@orebokech.com>

	* emacs-lisp/find-func.el (find-library-name): Also strip
	extension if library name ends in .el, to take advantage of
	`find-library-suffixes'.

2005-10-25  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-help-menu): Say which kind of therapist.

2005-10-25  Juri Linkov  <juri@jurta.org>

	* textmodes/texinfo.el (texinfo-mode): Change charset of one
	quotation mark from [mule-unicode-0100-24ff] to [japanese-jisx0208].

2005-10-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* play/blackbox.el (blackbox-mode-map): Move init into declaration.
	(blackbox-redefine-key): Add argument `map'.

	* jit-lock.el (jit-lock-fontify-now): Be careful not to skip multiline
	regions when moving the jit-lock-context-unfontify-pos boundary.

2005-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* net/browse-url.el (browse-url-of-buffer): Add ".html" to filename.

2005-10-25  Masatake YAMATO  <jet@gyve.org>

	* dired-x.el (dired-virtual): Don't use `dired-insert-headerline'.

2005-10-25  Michaël Cadilhac  <michael.cadilhac-@t-lrde.epita.fr>

	* play/blackbox.el (blackbox-redefine-key): New function.
	(blackbox-mode-map): Use it to remap existing bindings for cursor
	motion instead of binding literal keys.

2005-10-25  Glenn Morris  <rgm@gnu.org>

	* calendar/diary-lib.el (diary-list-entries): Prevent infloop when
	diary does not end in a newline.  Do not assume a blank line at
	the start of the diary file.

2005-10-25  Kenichi Handa  <handa@m17n.org>

	* international/quail.el (quail-translate-key): If the input
	method is deterministic and failed to handle the last key, restart
	the key handling loop from an appropriate key.

2005-10-25  Michael Albinus  <michael.albinus@gmx.de>

	* vc.el (vc-dired-mode): Extend comment for binding of
	`directory-listing-before-filename-regexp'.

2005-10-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/texinfo.el (texinfo-mode):
	* textmodes/paragraphs.el (sentence-end-base): Use real chars, so as
	not to unnecessarily expose emacs-mule's internal char codes.

2005-10-25  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-put-breakpoint-icon): Correct help-echo.
	Display hand pointer and help-echo on disabled icon too.
	(gdb-mouse-until): New function.
	(gdb-ann3): Bind it to mouse-2 and drag-mouse-1 in left fringe.

2005-10-24  Chong Yidong  <cyd@stupidchicken.com>

	* menu-bar.el (menu-bar-help-menu): Rename "psychiatrist", in line
	with 2005-10-23 change to doctor.el.

	* finder.el (finder-mode-map): Add follow-link binding.

2005-10-25  Kim F. Storm  <storm@cua.dk>

	* progmodes/gdb-ui.el (gdb-ann3): Bind mouse-3 in left fringe
	to gdb-mouse-toggle-breakpoint-fringe.
	(gdb-mouse-toggle-breakpoint-margin): Rename from
	gdb-mouse-toggle-breakpoint.  Fix doc.
	(gdb-mouse-toggle-breakpoint-fringe): New defun.
	(gdb-put-string): Add optional SPROPS arg.  Add props to string.
	(gdb-put-breakpoint-icon): Add gdb-bptno and gdb-enabled
	string properties also for fringe breakpoint bitmaps.

2005-10-24  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-start-icalendar-file): Fix format form.

2005-10-25  Masatake YAMATO  <jet@gyve.org>

	* simple.el (completion-common-substring):
	Use `completion-common-substring' prior to `completion-base-size'.

2005-10-24  Hrvoje Niksic  <hniksic@xemacs.org>

	* savehist.el: Require CL while compiling.
	(savehist-history-variables): Remove.
	(savehist-save-minibuffer-history, savehist-additional-variables)
	(savehist-minibuffer-history-variables): New vars.
	(savehist-save): Use them.
	(savehist-uninstall, savehist-minibuffer-hook): New funs.
	(savehist-install): New fun, extracted from savehist-load.
	(savehist-load): Use them.

2005-10-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp-mode.el (easy-mmode-define-global-mode): Don't add
	a dummy doc-string-elt property.
	(defalias, defvaralias, define-category): Add a docstring property.

	* image.el (defimage):
	* widget.el (define-widget):
	* custom.el (defface, defcustom): Add `doc-string' declaration.

	* emacs-lisp/advice.el (ad-make-advised-definition): Fix arg-order.
	(defadvice): Add `doc-string' declaration.

	* emacs-lisp/byte-run.el (macro-declaration-function):
	Handle `doc-string' declarations.
	(define-obsolete-function-alias, define-obsolete-variable-alias):
	Add `doc-string' declaration.

2005-10-24  Kenichi Handa  <handa@m17n.org>

	* international/utf-7.el (utf-7): Add autoload cookie.

	* term/x-win.el: Register more Cyrillic characters in x-keysym-table.

2005-10-24  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (autoloads): Use "." instead of $(lisp) in the
	list of directories passed to batch-update-autoloads.  Add "." to
	the list of the echoed directories.

	* pgg-def.el:
	* pgg-gpg.el:
	* pgg-parse.el:
	* pgg-pgp.el:
	* pgg-pgp5.el:
	* pgg.el: Moved here from the gnus subdirectory.

2005-10-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-filter): Bind inhibit-read-only to t
	in case comint-prompt-read-only is set to t.

	* progmodes/gdb-ui.el (gdb-send): Bind inhibit-read-only to t
	in case comint-prompt-read-only is set to t.

2005-10-24  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Increase to 0.13.
	Now a string.
	(icalendar-import-format): Handle CLASS, STATUS, URL.
	Rename `subject' to `summary'.
	(icalendar-import-format-summary): Rename from
	`icalendar-import-format-subject'.
	(icalendar-import-format-url, icalendar-import-format-status)
	(icalendar-import-format-class): New variables.
	(icalendar--rris): Take variable argument list.
	(icalendar--datestring-to-isodate): Remove unnecessary
	calendar-style check when converting dates with explicit month names.
	(icalendar-export-region): Change return type of conversion
	subroutines.  Bury current buffer unless error occurred.
	(icalendar--convert-to-ical)
	(icalendar--parse-summary-and-rest): New functions.
	(icalendar--convert-ordinary-to-ical)
	(icalendar--convert-weekly-to-ical)
	(icalendar--convert-yearly-to-ical)
	(icalendar--convert-block-to-ical)
	(icalendar--convert-cyclic-to-ical)
	(icalendar--convert-anniversary-to-ical): Change return type.
	Strip trailing blanks from subject.
	(icalendar--convert-sexp-to-ical): Change return type.
	Strip trailing blanks from subject.  Handle simple sexp
	entries as generated by icalendar.el.
	(icalendar--convert-float-to-ical)
	(icalendar--convert-date-to-ical): Strip trailing blanks from subject.
	(icalendar-import-file): Doc fix.
	(icalendar--format-ical-event): Handle CLASS, STATUS, URL.
	Correct call to icalendar--rris.
	(icalendar--convert-ical-to-diary): Doc fix.  Rename `subject' to
	`summary'.
	(icalendar--add-diary-entry): Rename `subject' to `summary'.

2005-10-24  Romain Francoise  <romain@orebokech.com>

	* server.el (server-sentinel): Set query-on-exit flag to nil on
	new client processes (it isn't inherited from the server process).

	* replace.el (occur-engine): Rearrange text properties.

2005-10-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debugger-make-xrefs): Don't assume
	case-fold-search is nil.
	(debug-help-follow): Use help-xref-interned directly.

2005-10-23  Chong Yidong  <cyd@stupidchicken.com>

	* thumbs.el (thumbs-image-type): Add .pbm.

2005-10-23  Richard M. Stallman  <rms@gnu.org>

	* faces.el (inhibit-face-set-after-frame-default): New variable.
	(set-face-attribute): Bind it.
	(face-set-after-frame-default): Test it.

	* help-fns.el (describe-simplify-lib-file-name): New function.
	(describe-function-1, describe-variable): Use it.

	* faces.el (describe-face): Use describe-simplify-lib-file-name.

	* tooltip.el (tooltip-x-offset, tooltip-y-offset): Change defaults.
	Eliminate nil as possible value.
	(tooltip-hide-delay): Reduce internal-border-width.

	* menu-bar.el (menu-bar-file-menu) <dired>: Change help-echo string.
	(menu-bar-file-menu) <new-file>: Likewise.

	* simple.el (line-move-finish): Ignore fields computing LINE-END.

	* international/mule.el (load-with-code-conversion):
	Pass full file name to `eval-buffer' unless preloading.

	* textmodes/flyspell.el (flyspell-large-region):
	Call ispell-check-version.

	* textmodes/ispell.el (ispell-local-dictionary-overridden):
	Fix the make-variable-buffer-local call that was supposed
	to be for this variable.
	(ispell-aspell-supports-utf8): Doc fix.
	(ispell-find-aspell-dictionaries): Preserve elements of
	ispell-dictionary-alist for dictionaries that aspell doesn't report.
	(ispell-aspell-find-dictionary): Return nil on error.

	* play/doctor.el (doctor-doc): Don't say "psychiatrist".
	(doctor-symptoms): Likewise.

	* add-log.el (add-log-current-defun): Clean up handling of DEFUNs.

2005-10-23  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-button, custom-button-pressed): New vars.
	(custom-raised-buttons): Add :set spec.
	(custom-button-unraised, custom-button-pressed-unraised):
	New faces, so that custom-raised-buttons actually does something.
	(custom-mode): Use custom-button and custom-button-pressed.

	* wid-edit.el (widget-specify-button): Don't ignore
	widget-mouse-face on graphic terminals.
	(widget-move-and-invoke): Cleanup.

2005-10-23  Thien-Thi Nguyen  <ttn@gnu.org>

	* whitespace.el (whitespace-cleanup): Doc fix.

2005-10-23  Romain Francoise  <romain@orebokech.com>

	* emulation/viper.el (viper-set-hooks): Quote forms passed to
	`eval-after-load' to avoid evaluating their result.

2005-10-23  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (directory-listing-before-filename-regexp):
	New defvar.  Replaces `dired-move-to-filename-regexp' from dired.el.

	* dired.el (dired-move-to-filename-regexp): Remove.
	All occurrences replaced by `directory-listing-before-filename-regexp'.

	* dired-x.el, locate.el, vc.el:
	Replace `dired-move-to-filename-regexp' by
	`directory-listing-before-filename-regexp'.  In vc.el it is
	overwritten locally; maybe this can be handled in files.el too.

	* net/ange-ftp.el (ange-ftp-date-regexp): Remove.  All occurrences
	replaced by `directory-listing-before-filename-regexp'.

2005-10-23  Andreas Schwab  <schwab@suse.de>

	* font-lock.el (lisp-font-lock-keywords-2): Add eval-at-startup
	and eval-next-after-load.

2005-10-23  MIYOSHI Masanori  <miyoshi@meadowy.org>  (tiny change)

	* mouse.el (mouse-drag-region): If the *Messages* buffer doesn't
	exist, create it.

2005-10-23  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Remove autoloads for mailcrypt and crypt++.
	Require pgg, pgg-gpg during compilation.
	(allout-version): Increment version number to 2.1, and use a literal
	rather than RCS Id.
	(allout-default-encryption-scheme): Remove.
	(allout-passphrase-verifier-handling)
	(allout-passphrase-verifier-string)
	(allout-file-passphrase-verifier-string)
	(allout-passphrase-hint-string): Rename -key- to -passphrase-.
	(allout-passphrase-hint-handling): Rename and simplify.
	(allout-init): Use `find-file-hook' if available, otherwise
	`find-file-hooks'.
	(allout-mode): Use `write-file-functions' if available, otherwise
	`local-write-file-hooks' and, instead of making auto-save-hook
	buffer local, make the write-file-hook activity contingent to
	allout-mode.
	(allout-mode): Use key-binding substitution in the docstring.
	(allout-kill-line): Spell-out kill ring data structure mutation
	instead of using byte-compiler-complaint-provoking `pop'.
	(allout-insert-listified): Use `insert' rather than `insert-string'.
	(allout-toggle-current-subtree-encryption): Update docstring, adjust
	to new gpp-based encryption, use new `allout-encrypted-topic-p'.
	(allout-encrypt-string): Totally revamped vis new underlying
	encryption facilities.
	(allout-mc-activate-passwd): Remove.
	(allout-obtain-passphrase): New, more or less replaces
	allout-mc-activate-passwd.
	(allout-encrypted-key-info): More or less replaces
	allout-encrypted-text-type.
	(outlineify-sticky, outlinify-sticky): Add autoload cookie.
	(my-mark-marker): Use `(featurep 'xemacs)'.

2005-10-23  Lars Hansen  <larsh@soem.dk>

	* emacs-lisp/bytecomp.el (byte-compile-lambda): New arg add-lambda.
	(byte-compile-file-form-defmumble, byte-compile-defun)
	(byte-compile-defmacro): Use it.
	(byte-compile-form): Don't call byte-compile-set-symbol-position
	when a byte-compile handler is called.

2005-10-22  Romain Francoise  <romain@orebokech.com>

	* savehist.el (savehist-history-variables): Add `grep-find-history'.

	* subr.el (eval-after-load): Convert library name to an absolute
	file name using locate-library, since load-history no longer has
	library names in it.

2005-10-22  Richard M. Stallman  <rms@gnu.org>

	* files.el (make-temp-file): Move from subr.el.
	* subr.el (make-temp-file): Move to files.el.

	* window.el (get-buffer-window-list): Move from subr.el.
	* subr.el (get-buffer-window-list): Move to window.el.

	* image.el (image-load-path): Use eval-at-startup to initialize.

	* subr.el (eval-at-startup): New macro.

	* subr.el: Much rearrangement of functions and division
	into pages.  No code changes.

2005-10-22  Kenichi Handa  <handa@m17n.org>

	* tar-mode.el (tar-extract): Be sure to call
	find-operation-coding-system if set-auto-coding doesn't find a
	coding system.

2005-10-22  Kim F. Storm  <storm@cua.dk>

	* image.el (image-type-header-regexps): Rename from image-type-regexps.
	Change users.
	(image-type-file-name-regexps): New defconst.
	(image-type-from-data): Simplify loop.
	(image-type-from-buffer): New defun.
	(image-type-from-file-header): Use it instead of image-type-from-data.
	Use image-search-load-path instead of only looking in data-directory.
	(image-type-from-file-name): New defun.
	(image-search-load-path): Change `pathname' to `filename'.
	Make PATH arg optional, default to image-load-path.

2005-10-21  Richard M. Stallman  <rms@gnu.org>

	* textmodes/texinfo.el (texinfo-mode): Set sentence-end-base.

	* textmodes/paragraphs.el (sentence-end-base): New variable.
	(sentence-end): Use sentence-end-base.

2005-10-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-default-fontify-region): Check the multiline
	property independently from the font-lock-multiline variable.

2005-10-21  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/find-func.el (find-library-name): Doc fix.

	* startup.el (command-line): Convert library names
	in `load-history' to absolute file names.

	* subr.el (symbol-file): Doc fix.

	* loadhist.el (file-loadhist-lookup): Call locate-library
	instead of find-library-name.  Don't try converting
	abs file names to library names, since load-history no longer
	has library names in it.
	(file-dependents, file-provides, file-requires): Doc fixes.

2005-10-21  Juri Linkov  <juri@jurta.org>

	* progmodes/etags.el (tags-table-mode): New function.
	(tags-verify-table): Replace initialize-new-tags-table with
	tags-table-mode.

	* desktop.el (desktop-buffers-not-to-save): Remove TAGS from the
	default value.
	(desktop-modes-not-to-save): Add tags-table-mode to the
	default value.

	* info.el (Info-index-next): Add total number of index
	alternatives to the message.

	* textmodes/fill.el (fill-nobreak-p): Fix first two rules to skip
	backward only space (instead of space and period) before looking
	at sentence end.

	* simple.el (set-variable): Use user-variable-p instead of symbolp.
	Add the old variable value as 4th default-value arg of read-string.

2005-10-21  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* cus-face.el (custom-declare-face): Make face from X resources
	also on Mac.

	* disp-table.el (standard-display-g1, standard-display-graphic):
	Refuse to use string glyphs also on Mac.
	(standard-display-european): Don't set terminal coding system also
	on Mac.

	* frame.el (display-screens): Use x-display-screens also on Mac.

2005-10-21  Romain Francoise  <romain@orebokech.com>

	* net/rcirc.el: Now part of GNU Emacs.  Update FSF's address.

2005-10-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-font-lock-syntactic-keywords): Make $@
	and $? into sexps.

	* font-lock.el (font-lock-compile-keywords): Add a help-echo to the
	warning face on open-paren-in-column-0.

	* emacs-lisp/syntax.el (syntax-ppss-flush-cache): Fix corner
	boundary case.  Fix typo.
	Suggested by Martin Rudalics <rudalics@gmx.at>.

2005-10-21  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-combined-agenda-icalendar-file)
	(org-icalendar-include-todo, org-icalendar-combined-name): New options.
	(org-export-icalendar-this-file)
	(org-export-icalendar-all-agenda-files)
	(org-export-icalendar-combine-agenda-files): New commands.
	(org-export-icalendar, org-print-icalendar-entries)
	(org-start-icalendar-file, org-finish-icalendar-file)
	(org-ical-ts-to-string): New functions.
	(org-read-date, org-goto-calendar)
	(org-agenda-goto-calendar): Inhibit displaying diary entries by
	call to `calendar'.
	(orgtbl-setup): Remove the :keys arguments from the menu description.
	(org-after-save-iCalendar-file-hook): New variable.

2005-10-21  Kenichi Handa  <handa@m17n.org>

	* language/vietnamese.el (tcvn-5712): Make it an alias of
	vietnamese-tcvn coding-system.

2005-10-20  Michael Albinus  <michael.albinus@gmx.de>

	* net/ange-ftp.el (ange-ftp-date-regexp): Handle also the case no
	group id is given.

2005-10-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-escaped-line-re): New var.
	(sh-here-doc-open-re, sh-font-lock-close-heredoc): Use it.
	(sh-font-lock-open-heredoc): Try to properly handle heredoc starters
	whose line is either continued or ends with a comment.

2005-10-20  Romain Francoise  <romain@orebokech.com>

	* net/rcirc.el (with-rcirc-process-buffer): Move above its first user.

	* replace.el (occur-engine): Add follow-link property.

	* font-core.el (font-lock-mode): Doc fix.

2005-10-20  Richard M. Stallman  <rms@gnu.org>

	* net/rcirc.el: New file.

2005-10-20  Bryan Henderson  <bryanh@giraffe-data.com>  (tiny change)

	* term.el (term-term-name): Initialize to "eterm-color".

2005-10-20  Ken Manheimer  <ken.manheimer@gmail.com>

	* allout.el: Add autoloads of crypt++ and mailcrypt routines, all
	for encryption functionality.
	Move allout customization subgroup from `editing' to `outlines' group.
	Fix commentary keywords to legitimate ones.
	Update author info (using my current email address, obscurified).
	(allout-encrypt-string, allout-encryption-produce-work-buffer)
	(allout-encrypted-topic-p, allout-encrypted-text-type)
	(allout-mc-activate-passwd, allout-create-encryption-key-verifier)
	(allout-situate-encryption-key-verifier)
	(allout-get-encryption-key-verifier, allout-verify-key)
	(allout-next-topic-pending-encryption)
	(allout-encrypt-decrypted, allout-encrypted-type-prefix): New funcs.
	(outline-topic-encryption-bullet, outline-default-encryption-scheme)
	(outline-key-verifier-handling, outline-key-hint-handling)
	(outline-encrypt-unencrypted-on-saves): New defcustoms.
	(allout-file-key-verifier-string, allout-encryption-scheme)
	(allout-key-verifier-string, allout-key-hint-string)
	(allout-after-save-decrypt): New variables.
	(allout-write-file-hook-handler, allout-auto-save-hook-handler)
	(allout-after-saves-handler): New hook functions.
	(allout-post-command-business): Do allout-after-save-decrypt.
	(allout-enable-file-variable-adjustment): Custom var to enable
	mechanism for adding and adjusting settings of Emacs file variables.
	(allout-adjust-file-variable, allout-file-vars-section-data):
	New functions, implement the mechanism.
	(outlineify-sticky): Use the file vars mechanism.
	(allout-inhibit-protection, allout-during-write-cue)
	(allout-override-protect, allout-before-change-protect): Remove.
	(allout-flag-region, allout-open-topic): Adjust read-only text.
	(allout-open-line-not-read-only): Add to facilitate read-only
	text based protection.
	(allout-kill-line): Revise to adjust read-only text, clue the
	user about the inhibition.
	(allout-unprotected): Use unwind-protect.
	(allout-shift-in, allout-shift-out): Disallow manually shifting a
	topic deeper than the offspring depth of the previous topic -
	avoiding confusing "containment discontinuities".
	(allout-reindent-bodies): Fix retention of body relative hanging
	indent during promotion of collapsed bodies.
	(allout-open-topic): Make it easy to open new topic with same
	bullet as current topic - topic creation functions provided with
	any universal argument provokes now prompt for bullet, defaulting
	to the bullet of the previous topic.
	(allout-plain-bullets-string, allout-distinctive-bullets-string):
	Plain bullet alternates `.' period and `,' comma only.  All other
	bullets are relegated to special status (but customizable).
	(allout-end-of-entry): Rename from allout-end-of-current-entry
	since it actually operates w.r.t. most immediately containing
	entry, visible or not.
	(allout-hide-current-entry, allout-show-current-entry): Use the
	revised version.
	(allout-old-expose-topic): Solidify deprecation.
	(allout-end-of-subtree): Add so we can span concealed as well
	as visible topics.
	(allout-end-of-current-subtree): Use `allout-end-of-subtree'.
	(allout-end-of-current-heading): Tweak to just respect the first line.
	(allout-get-body-text): Add.
	(allout-ascend-to-depth, allout-ascend): Position at end of prefix
	when invoked interactively.
	(allout-up-current-level): Use `interactive-p'.
	(allout-mode, allout-init): Miscellaneous docstring and
	operational refinements, as well as hookups of new encryption stuff.
	(allout-beginning-of-current-entry): Now works as advertised.
	(allout-end-of-current-entry): Remove of superfluous allout-show-entry.
	(allout-isearch-rectification): Refine condition for isearching.
	(allout-isearch-abort, allout-enwrap-isearch)
	(allout-flag-region, my-region-active-p): Relocate some macros.
	(allout-title): Fallback title is (buffer-name), not
	non-existing (current-buffer-name).
	(subst-char-in-string): Define if absent (for some XEmacs versions).

2005-10-20  Jari Aalto  <jari.aalto@cante.net>

	* mail/sendmail.el (mail-setup-hook, mail-aliases)
	(mail-yank-prefix, mail-indentation-spaces, mail-yank-hooks)
	(mail-citation-prefix-regexp, mail-signature-file)
	(mail-default-headers, mail-bury-selects-summary)
	(mail-send-nonascii): Add autoload cookies.

2005-10-20  Emanuele Giaquinta  <emanuele.giaquinta@gmail.com>  (tiny change)

	* frame.el (blink-cursor-mode): Add `mac' to the list of
	window-system's that support blinking cursor.

2005-10-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* textmodes/org.el (org-level-color-stars-only): Fix typo in docstring.

2005-10-20  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in ($(lisp)/mh-e/mh-loaddefs.el):
	Bind find-file-suppress-same-file-warnings to t, to avoid warnings due
	to different drive letter case in D:/foo/bar.el vs d:/foo/bar.el.

2005-10-20  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-is-tramp-root): Simplify regexp matching tramp root.
	(ido-set-current-directory): Don't add / after final @.
	(ido-file-name-all-completions-1): Adapt to fixed tramp completion.
	Explicitly handle ange-ftp completion oddities.
	(ido-make-file-list): Don't rotate list at tramp root to avoid
	triggering tramp file handler for expand-file-name via get-file-buffer.

2005-10-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* savehist.el (savehist-coding-system): Revert to checking XEmacs.

2005-10-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-standard-units): Add units, adjust
	symbols and update values.
	(math-unit-prefixes): Add more prefixes.

2005-10-19  Romain Francoise  <romain@orebokech.com>

	* bookmark.el (bookmark-menu-heading): New face.
	(bookmark-bmenu-list): Use it.
	Don't fiddle with `baud-rate' at top-level.

2005-10-18  Chong Yidong  <cyd@stupidchicken.com>

	* image.el (create-image, find-image): Mention max-image-size in
	docstring.

2005-10-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* savehist.el (savehist-load): Revert to checking XEmacs.

	* textmodes/conf-mode.el: Don't use font-lock-defaults-alist.
	Various docstring and line-width fixups.
	(conf-mode): Use cond.
	Set font-lock-defaults.  Don't set comment-use-syntax.

2005-10-18  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-button-click): New function.
	(tree-widget-button-keymap): Use it.

2005-10-18  Romain Francoise  <romain@orebokech.com>

	* bookmark.el (bookmark-insert-location, bookmark-bmenu-list)
	(bookmark-bmenu-hide-filenames): Add follow-link property.
	Improve help-echo text.

	* ffap.el (find-file-at-point): Doc fix.

2005-10-18  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* mouse.el (mouse-set-region): Don't do sit-for on a mac frame.

2005-10-18  Masatake YAMATO  <jet@gyve.org>

	Install to the CVS repository what I forgot to install in my
	2005-10-16 changes.

	* progmodes/python.el (python-complete-symbol): Pass the common
	prefix substring of completion to `display-completion-list'.

	* textmodes/org.el (org-complete): Ditto.

2005-10-18  Masatake YAMATO  <jet@gyve.org>

	Fix a bug reported by Sven Joachim <sven_joachim@web.de>.

	* woman.el (WoMan-xref-man-page): New button type derived
	from `Man-abstract-xref-man-page'.
	(woman-mode): Pass `WoMan-xref-man-page' to `Man-highlight-references'.

	* man.el (Man-abstract-xref-man-page): New button type.
	(Man-xref-man-page): Make it derived from `Man-abstract-xref-man-page'.
	(Man-highlight-references): Add new optional argument `xref-man-type'.

2005-10-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Correct condition for fringe.

2005-10-17  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (Custom-move-and-invoke): Delete.
	(custom-mode-map): Bind mouse-1 to widget-move-and-invoke.

	* wid-edit.el (widget-move-and-invoke): New function, from
	Custom-move-and-invoke.

2005-10-17  Bill Wohler  <wohler@newt.com>

	Move all remaining images from lisp/toolbar to etc/images, move
	lisp/toolbar/tool-bar to lisp and "delete" lisp/toolbar.  Place
	the low resolution images in their own directory (low-color).

	* toolbar/attach.*, toolbar/cancel.*, toolbar/close.*
	* toolbar/copy.*, toolbar/cut.*, toolbar/diropen.*, toolbar/exit.*
	* toolbar/help.*, toolbar/home.*, toolbar/index.*, toolbar/info.*
	* toolbar/mail.*, toolbar/new.*, toolbar/open.*, toolbar/paste.*
	* toolbar/preferences.*, toolbar/print.*, toolbar/save.*
	* toolbar/saveas.*, toolbar/search.*, toolbar/search-replace.*
	* toolbar/spell.*, toolbar/undo.*: Move to etc/images.

	* toolbar/lc-copy.*: Move to etc/images/low-color/copy.*.
	* toolbar/lc-cut.*: Move to etc/images/low-color/cut.*.
	* toolbar/lc-help.*: Move to etc/images/low-color/help.*.
	* toolbar/lc-home.*: Move to etc/images/low-color/home.*.
	* toolbar/lc-index.*: Move to etc/images/low-color/index.*.
	* toolbar/lc-new.*: Move to etc/images/low-color/new.*.
	* toolbar/lc-open.*: Move to etc/images/low-color/open.*.
	* toolbar/lc-paste.*: Move to etc/images/low-color/paste.*.
	* toolbar/lc-preferences.*: Move to etc/images/low-color/preferences.*.
	* toolbar/lc-print.*: Move to etc/images/low-color/print.*.
	* toolbar/lc-save.*: Move to etc/images/low-color/save.*.
	* toolbar/lc-saveas.*: Move to etc/images/low-color/saveas.*.
	* toolbar/lc-search.*: Move to etc/images/low-color/search.*.
	* toolbar/lc-spell.*: Move to etc/images/low-color/spell.*.
	* toolbar/lc-undo.*: Move to etc/images/low-color/undo.*.

	To conform with convention, replace the underscore (_) in the
	following image names with dash (-) or (/) as appropriate.

	* toolbar/back_arrow.*: Move to etc/images/back-arrow.*.
	* toolbar/fld_open.*: Move to etc/images/fld-open.*.
	* toolbar/fwd_arrow.*: Move to etc/images/fwd-arrow.*.
	* toolbar/jump_to.*: Move to etc/images/jump-to.*.
	* toolbar/left_arrow.*: Move to etc/images/left-arrow.*.
	* toolbar/right_arrow.*: Move to etc/images/right-arrow.*.
	* toolbar/up_arrow.*: Move to etc/images/up-arrow.*.
	* toolbar/lc-back_arrow.*: Move to etc/images/low-color/back-arrow.*.
	* toolbar/lc-fwd_arrow.*: Move to etc/images/low-color/fwd-arrow.*.
	* toolbar/lc-jump_to.*: Move to etc/images/low-color/jump-to.*.
	* toolbar/lc-left_arrow.*: Move to etc/images/low-color/left-arrow.*.
	* toolbar/lc-right_arrow.*: Move to etc/images/low-color/right-arrow.*.
	* toolbar/lc-up_arrow.*: Move to etc/images/low-color/up-arrow.*.
	* toolbar/mail_compose.*: Move to etc/images/mail/compose.*.
	* toolbar/mail_send.*: Move to etc/images/mail/send.*.

	* info.el (info-tool-bar-map): Replace underscores in image names
	with dashes.

	* makefile.w32-in (WINS): Remove toolbar.

	* menu-bar.el: Replace toolbar/tool-bar.el with tool-bar.el in comment.

	* tool-bar.el: Move to lisp from toolbar.  Now that
	toolbar is empty, it should be deleted when folks run "cvs up -P".

2005-10-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-store-into): Get the proper variable name
	to display in message.

2005-10-18  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler): Make watch
	expressions display in speedbar for all buffers when debugging.
	(gdb-speedbar-expand-node): Ensure node contraction is always updated.

	* speedbar.el (speedbar-set-mode-line-format): Indent properly.
	(speedbar-insert-button, speedbar-make-button):
	Use add-text-properties.
	(speedbar-update-localized-contents)
	(speedbar-update-directory-contents)
	(speedbar-update-special-contents): Use dolist.
	(speedbar-buffer-easymenu-definition): Add a menu separator.

2005-10-17  Jason Rumney  <jasonr@gnu.org>

	* makefile.w32-in: Use $(lisp) consistently.
	(pre-mh-loaddefs.el-SH, pre-mh-loaddefs.el-CMD): New targets
	for shell specific generation of mh-autoloads.

2005-10-17  Richard M. Stallman  <rms@gnu.org>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2): Undo prev change.

2005-10-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* jit-lock.el (jit-lock-fontify-now):
	Move jit-lock-context-unfontify-pos to avoid wasted work.

2005-10-17  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-completion-mode): New defvar.  Used in
	`tramp-completion-mode' for checking if we are in completion mode.
	(tramp-completion-handle-file-name-all-completions): Reorder code
	in order to complete for file names only in case there are no
	method/user/host completions.  This is necessary for cooperation
	with ido.  Reported by Kim F. Storm <storm@cua.dk>.

2005-10-16  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-search-forward)
	(longlines-search-backward): Match any number of spaces.

2005-10-16  Thien-Thi Nguyen  <ttn@gnu.org>

	* diff-mode.el (diff-mode): Doc fix.

2005-10-16  David Reitter  <david.reitter@gmail.com>

	* mail/sendmail.el (send-mail-function): Use mailclient-send-it
	as default on darwin and windows systems.

2005-10-16  Sven Joachim  <svenjoac@gmx.de>  (tiny change)

	* arc-mode.el (archive-zip-extract): Doc fix.

2005-10-16  Romain Francoise  <romain@orebokech.com>

	* mouse.el (mouse-1-click-follows-link): Doc fix.

2005-10-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* savehist.el: Don't require CL at runtime.
	(savehist-xemacs): Remove.
	(savehist-coding-system): Use utf-8 if present, regardless of religion.
	(savehist-no-conversion): Use (featurep 'xemacs).
	(savehist-load): Check existence of start-itimer rather than XEmacs.
	Use an idle timer.
	(savehist-process-for-saving): Replace use of CL funs `subseq' and
	`delete-if-not'.

2005-10-16  Hrvoje Niksic  <hniksic@xemacs.org>

	* savehist.el: Newer version.
	(savehist-autosave-interval, savehist-coding-system, savehist-timer)
	(savehist-last-checksum, savehist-no-conversion): New vars.
	(savehist-autosave, savehist-process-for-saving, savehist-printable):
	New functions.
	(savehist-load, savehist-save): Use them.
	(savehist-delimit): Remove.

2005-10-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/compile.el (compilation-goto-locus): Display the
	compilation buffer first and the source buffer second, in case they're
	in overlapping frames.  Don't raise the compilation frame if it was the
	selected window upon entry.  Pass the `other-window' arg to
	pop-to-buffer.

	* info.el (Info-fontify-node): Use dolist.
	Change add-text-properties to put-text-property.

2005-10-16  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-font-lock-url): Catch when point past
	bound of search.

2005-10-16  Masatake YAMATO  <jet@gyve.org>

	* dabbrev.el (dabbrev-completion): Pass the common
	prefix substring of completion to `display-completion-list'.

	* filecache.el (file-cache-minibuffer-complete)
	(file-cache-complete): Ditto.

	* tempo.el (tempo-display-completions): Ditto.

	* wid-edit.el (widget-file-complete, widget-color-complete): Ditto.

	* emacs-lisp/lisp.el (lisp-complete-symbol): Ditto.

	* eshell/em-hist.el (eshell-list-history): Ditto.

	* mail/mailabbrev.el (mail-abbrev-complete-alias): Ditto.

	* mail/mailalias.el (mail-complete): Ditto.

	* progmodes/etags.el (complete-tag): Ditto.

	* progmodes/make-mode.el (makefile-complete): Ditto.

	* progmodes/meta-mode.el (meta-complete-symbol): Ditto.

	* progmodes/octave-mod.el (octave-complete-symbol): Ditto.

	* progmodes/pascal.el (pascal-complete-word)
	(pascal-show-completions): Ditto.

	* textmodes/bibtex.el (bibtex-complete-internal): Ditto.

	* simple.el (completion-common-substring): New variable.
	(completion-setup-function): Use `completion-common-substring'
	to put faces.

2005-10-16  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Apply 2005-10-09 change for term/x-win.el.
	(x-get-selection, mac-select-convert-to-string): Convert from/to
	UTF-16 clipboard data as in native byte order, no BOM.

2005-10-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tool-bar-map): Rename the images
	appropriately (gud/next, gud/nexti, gud/step, gud/stepi).
	(gud-sentinel): Use speedbar-frame to check for speedbar.

2005-10-15  Richard M. Stallman  <rms@gnu.org>

	* savehist.el: New file.

2005-10-14  Karl Chen  <quarl@cs.berkeley.edu>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2):
	Fix bug in \bf fontification.

2005-10-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-edit-log-files): New var.
	(cvs-mode-edit-log): New arg `file'.
	(cvs-edit-log-minor-wrap): Don't set the ignore-marks property.
	Instead force the use of the original file and nothing else.
	(cvs-edit-log-filelist): Don't use the cvs-mode-* function unless
	the cvs-minor-wrap-function is set.
	(cvs-do-edit-log): Obey the vars set in cvs-edit-log-minor-wrap.

2005-10-14  Bill Wohler  <wohler@newt.com>

	* toolbar/gud-break.*: Moved to etc/images/gud/break.*.
	* toolbar/gud-cont.*: Moved to etc/images/gud/cont.*.
	* toolbar/gud-down.*: Moved to etc/images/gud/down.*.
	* toolbar/gud-finish.*: Moved to etc/images/gud/finish.*.
	* toolbar/gud-ni.*: Moved to etc/images/gud/ni.*.
	* toolbar/gud-n.*: Moved to etc/images/gud/n.*.
	* toolbar/gud-print.*: Moved to etc/images/gud/print.*.
	* toolbar/gud-pstar.*: Moved to etc/images/gud/pstar.*.
	* toolbar/gud-remove.*: Moved to etc/images/gud/remove.*.
	* toolbar/gud-run.*: Moved to etc/images/gud/run.*.
	* toolbar/gud-si.*: Moved to etc/images/gud/si.*.
	* toolbar/gud-s.*: Moved to etc/images/gud/s.*.
	* toolbar/gud-until.*: Moved to etc/images/gud/until.*.
	* toolbar/gud-up.*: Moved to etc/images/gud/up.*.
	* toolbar/gud-watch.*: Moved to etc/images/gud/watch.*.

	* progmodes/gud.el (gud-tool-bar-map): Rename the images
	appropriately (for example, gud-break to gud/break).

2005-10-14  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-search-function)
	(longlines-search-forward, longlines-search-backward): New functions.
	(longlines-mode): Set isearch-search-fun-function to
	longlines-search-function.

	* mouse.el (mouse-drag-region-1): Handle the case where a
	double-click event is bound to an arbitrary function.

2005-10-14  David Ponce  <david@dponce.com>

	* recentf.el (recentf-track-opened-file)
	(recentf-track-closed-file, recentf-update-menu)
	(recentf-used-hooks, recentf-enabled-p): Move before dialog stuff.
	(recentf-dialog-mode-map): Map follow-link to RET, so dialogs obey
	mouse-1-click-follows-link.

2005-10-13  Jan Djärv  <jan.h.d@swipnet.se>

	* toolbar/diropen.xpm, toolbar/diropen.pbm: New versions made from
	Gnome file-manager.png.  Suggested by
	Joachim Nilsson <joachim.nilsson@vmlinux.org>.

	* toolbar/README: Add diropen.xpm.

2005-10-13  Bill Wohler  <wohler@newt.com>

	* makefile.w32-in (MH_E_SRC): Rename from MH-E-SRC per NMAKE
	restrictions.  Suggested by David Robinow <drobinow@gmail.com>.

2005-10-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/mixal-mode.el (mixal-operation-codes-alist):
	Don't waste the byte-compiler's time on constant data.

2005-10-13  Kenichi Handa  <handa@m17n.org>

	* international/utf-8.el (utf-8-compose): Display an invalid UTF-8
	byte with `escape-glyph' face.

	* international/fontset.el (ccl-encode-unicode-font):
	Lookup utf-subst-table-for-encode, not ucs-mule-cjk-to-unicode.
	Handle the case that ucs-mule-to-mule-unicode translates a character to
	ASCII (usually for IPA characters).

2005-10-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* info.el (Info-fontify-node): Don't be fooled by a lone "...".
	Don't hide the underline of titles if font-lock-mode is disabled.

2005-10-12  Bill Wohler  <wohler@newt.com>

	* makefile.w32-in (MH-E-SRC): New.  Used by mh-autoloads.
	(mh-autoloads): New.  Builds mh-e/mh-loaddefs.el.  Rebuilds if any
	files in MH-E-SRC have been updated.
	(updates, compile, recompile, bootstrap): Depend on mh-autoloads.

2005-10-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/mixal-mode.el (mixal-operation-codes): Remove.
	(mixal-mode-syntax-table): Add \n as end-comment.
	(mixal-operation-codes-alist): Immediately initialize to full value.
	(mixal-add-operation-code): Remove.
	(mixal-describe-operation-code): Make the arg non-optional.
	Use the interactive spec instead.
	Use mixal-operation-codes-alist rather than mixal-operation-codes.
	(mixal-font-lock-keywords): Don't highlight comments here any more.
	(mixal-font-lock-syntactic-keywords): New var.
	(mixal-mode): Use it.  Fix comment-start-skip.

2005-10-12  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line-x-option-alist): -nb => -nbi.

2005-10-12  Kim F. Storm  <storm@cua.dk>

	* startup.el (fancy-splash-default-action): Discard mouse click in
	the splash screen window, as it has no sensible meaning in the
	next window to be selected.  Fixes error reported by Jan D.

2005-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* desktop.el (desktop-load-file): Do nothing when FUNCTION is nil.

2005-10-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/mixal-mode.el: Sync with version in the GNU MDK project.
	Try to fix up minor layout issues like indentation, line break, etc...
	(mixal-mode-syntax-table): Don't try to specify comment syntax,
	because it doesn't work.
	(mixal-operation-codes): Add some more codes.
	(mixal-font-lock-keywords): Process comments here.
	(mixal-mode): mixasm no longer needs -g option.

2005-10-11  Sven Joachim  <svenjoac@gmx.de>  (tiny change)

	* progmodes/sh-script.el (sh-tmp-file):
	Use mktemp -t.  Finish support for es and rc shells.

2005-10-11  Jay Belanger  <belanger@truman.edu>

	* calc/calcalg2.el (calc-integral): With an argument, compute the
	definite integral.

2005-10-11  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (mouse-drag-region-1): Don't try to catch a
	double-click when doing follow-link (it's overridden anyway).

2005-10-11  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/autoload.el (update-directory-autoloads): Doc fix.
	(autoload-print-form-outbuf): Add docstring.

2005-10-11  Juri Linkov  <juri@jurta.org>

	* info.el (Info-mode-menu): Delete menu item "Edit".
	(Info-mode): Delete description of Info-edit from docstring,
	and rearrange descriptions of Info commands in the order
	they are documented in the Info manual.

2005-10-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/appt.el (appt-check): Use diary-selective-display var.

2005-10-10  Richard M. Stallman  <rms@gnu.org>

	* net/newsticker.el (newsticker-start, newsticker-show-news):
	Add autoload cookies.

2005-10-10  Emanuele Giaquinta  <emanuele.giaquinta@gmail.com>

	* progmodes/sh-script.el (sh-tmp-file): Use mktemp.

2005-10-10  Karl Chen  <quarl@cs.berkeley.edu>

	* jka-cmpr-hook.el (jka-compr-handler): Fix typo in `operations' prop.

2005-10-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-check-known-scalarp)
	(math-check-known-matrixp): Check the values of arguments that are
	variables.
	(math-check-known-square-matrixp): New function.
	(math-known-square-matrixp): Use math-check-known-square-matrixp.
	(math-super-types): Add sqmatrix type.

	* calc/calc-mode.el (calc-matrix-mode, math-get-modes-vec): Change the
	mode name `square' to `sqmatrix'.

	* calc/calc.el (calc-matrix-mode, calc-set-mode-line): Change the
	mode name `square' to `sqmatrix'.

2005-10-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/etags.el (select-tags-table-mode): Don't use
	selective-display.
	(tags-select-tags-table): Pass `button' to the action function.
	(select-tags-table): Place the side-info on button properties rather
	than in hidden text.  Abbreviate file names.
	(select-tags-table-mode-map): Inherit rather than copy button-map.
	(select-tags-table-select): Add `button' argument.
	Get side-info from the button property rather than from hidden text.

2005-10-11  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-install-speedbar-variables): Add more bindings.
	(gud-speedbar-buttons): Preserve point if possible.
	(gud-sentinel): Restore previous speedbar display type.

	* progmodes/gdb-ui.el (gdba): Improve diagram.
	(def-gdb-auto-update-handler, gdb-info-locals-handler)
	(gdb-put-breakpoint-icon, gdb-remove-breakpoint-icons):
	Call get-buffer-window once.

2005-10-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/pascal.el (pascal-mode-map): Move init into declaration.
	(pascal-mode-syntax-table): Make (* *) markers same class as { ... }.
	(pascal-indent-command): Remove unused var `ind'.
	(pascal-indent-case): Remove unused var `oldpos'.
	(pascal-outline-map): Don't inherit from pascal-mode-map anymore,
	since it's now used as a proper minor mode map.
	(pascal-outline): Rename to pascal-outline-mode.
	(pascal-outline-mode): Use define-minor-mode.
	(pascal-outline-mode, pascal-outline-change): Use overlays rather than
	selective-display.

2005-10-10  Andreas Schwab  <schwab@suse.de>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2): Adjust match
	number.  Reported by Karl Chen <quarl@cs.berkeley.edu>.

	* Makefile.in ($(lisp)/mh-e/mh-loaddefs.el): Fix for building
	outside source directory.

2005-10-10  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map): Explicit definition of `C-c
	C-x' as a prefix.
	(orgtbl-mode-map): Full keymap instead of sparse, because all
	`self-insert-command' keys are redefined in this map.
	(org-export-as-html): Specify charset for HTML file, by taking it
	from the coding system.

2005-10-10  Kenichi Handa  <handa@m17n.org>

	* textmodes/flyspell.el (flyspell-check-word-p):
	If unread-command-events is non-empty, don't call sit-for.

2005-10-09  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-syntactic-keywords)
	(font-lock-keywords): Doc fixes.

	* textmodes/flyspell.el (flyspell-external-point-words):
	Simplify logic, and don't try to check for consecutive appearances
	of one incorrect word.

2005-10-10  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-buffer-easymenu-definition): Add menu
	separator.

	* progmodes/gud.el (gud-last-speedbar-buffer): Remove.
	(gud-install-speedbar-variables): Add GUD to speedbar "Displays" list.
	(gud-expansion-speedbar-buttons): New function.
	(gud-speedbar-buttons): Check for gud-comint-buffer.

2005-10-09  Bill Wohler  <wohler@newt.com>

	* Makefile.in (updates): Add mh-loaddefs dependency.

2005-10-09  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el (speedbar-file-key-map): Fix typo.

2005-10-09  Daniel Brockman  <daniel@brockman.se>

	* cus-start.el (line-spacing): Add custom spec.

2005-10-09  Romain Francoise  <romain@orebokech.com>

	* textmodes/ispell.el (ispell-check-version): Fix last change.

2005-10-09  Jan Djärv  <jan.h.d@swipnet.se>

	* term/x-win.el: Remove -i, --icon-type from comment.

	* startup.el (command-line-x-option-alist): Remove options -i,
	-itype, --icon-type, added -nb, --no-bitmap-icon.

2005-10-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-speedbar-menu-items): Use :visible
	instead of :active.

2005-10-08  Eric Hanchrow  <offby1@blarg.net>

	* textmodes/ispell.el (ispell-check-version):
	Ignore hyphen, and all that follows, in aspell's version text.

2005-10-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-known-square-matrixp): New function.
	(math-pow-fancy): Check for matrices before distributing exponent
	across products.

	* calc/calc-keypd.el (calc-do-keypad): Widen keypad window for
	fullscreen keypad.  Suggested by Luc Teirlinck.
	(calc-keypad-show-input): Add space for formatting.

	* calc/calc-mode.el (calc-matrix-mode, math-get-modes-vec):
	Add square matrix option.

	* calc/calc-poly.el (math-expand-term): Check for matrices instead
	of checking calc-matrix-mode when deciding how to expand.

	* calc/calc.el (calc-set-mode-line): Add square matrix option.

2005-10-08  Lars Hansen  <larsh@soem.dk>

	* net/tramp.el (tramp-perl-directory-files-and-attributes):
	Add error handling.
	(tramp-handle-directory-files-and-attributes): Handle perl error msg.

2005-10-08  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.51.

	* net/tramp.el (tramp-handle-set-visited-file-modtime)
	(tramp-handle-insert-file-contents, tramp-handle-write-region):
	Insert special handling for `last-coding-system-used', again
	it still seems to be necessary (unlike stated before).
	Reported by Toshinori Sugita <sugita@d-pad.co.jp>.
	(tramp-password-prompt-regexp): There might be other words before
	trailing ":".  Reported by Kurt Steinkraus <kurt@steinkraus.us>.
	(tramp-chunksize): Improve docstring.
	(tramp-set-auto-save-file-modes): Octal integer code #o600 breaks
	Emacs 20.  Use `tramp-octal-to-decimal' therefore.  Reported by
	Christian Joergensen <bugs@razor.dk>.

2005-10-07  Glenn Morris  <rgm@gnu.org>

	* progmodes/f90.el (f90-keywords-re, f90-mode): Doc fix.
	(f90-font-lock-keywords-2, f90-mode-abbrev-table): Add `double
	precision'.

2005-10-07  Romain Francoise  <romain@orebokech.com>

	* ibuf-ext.el (ibuffer-do-shell-command-pipe)
	(ibuffer-do-shell-command-pipe-replace)
	(ibuffer-do-shell-command-file, ibuffer-do-eval)
	(ibuffer-do-view-and-eval, ibuffer-do-rename-uniquely)
	(ibuffer-do-revert, ibuffer-do-replace-regexp)
	(ibuffer-do-query-replace, ibuffer-do-query-replace-regexp)
	(ibuffer-do-print, ibuffer-filter-by-mode, ibuffer-filter-by-used-mode)
	(ibuffer-filter-by-name, ibuffer-filter-by-filename)
	(ibuffer-filter-by-size-gt, ibuffer-filter-by-size-lt)
	(ibuffer-filter-by-content, ibuffer-filter-by-predicate)
	(ibuffer-do-sort-by-major-mode, ibuffer-do-sort-by-mode-name)
	(ibuffer-do-sort-by-alphabetic, ibuffer-do-sort-by-size):
	Autoload file sans suffix.

	* emulation/cua-base.el (cua-toggle-global-mark): Likewise.

2005-10-07  David Ponce  <david@dponce.com>

	* recentf.el (recentf-menu-open-all-flag): New option.
	(recentf-digit-shortcut-command-name): New function.
	(recentf--shortcuts-keymap): New variable.
	(recentf-menu-shortcuts): New variable.
	(recentf-make-menu-items): Initialize it.  Replace the "More..."
	menu item by "All...", if `recentf-menu-open-all-flag' is non-nil.
	(recentf-menu-value-shortcut): New function.
	(recentf-make-menu-item): Use it.  No more in-lined.
	(recentf-dialog-mode-map): Base on `recentf--shortcuts-keymap'.
	(recentf-open-most-recent-file): Rename from
	`recentf-open-file-with-key'.  Don't depend on key binding.
	(recentf-mode-map): New variable.
	(recentf-mode): Use it.

2005-10-06  Bill Wohler  <wohler@newt.com>

	* mh-e/mh-loaddefs.el: Remove.  Now generated automatically.

	* Makefile.in (AUTOGENEL): Add mh-e/mh-loaddefs.el.
	(MH-E-SRC): New.  Used by mh-autoloads.
	(mh-autoloads): New.  Builds mh-e/mh-loaddefs.el.  Rebuilds if any
	files in MH-E-SRC have been updated.
	(compile, recompile, bootstrap): Depend on mh-autoloads.

2005-10-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Only display un-intuitive
	gud-break and gud-remove icons when the fringe is not available.

	* progmodes/gdb-ui.el (gdb-fringe-width -> gdb-buffer-fringe-width):
	Typo.

2005-10-06  Michaël Cadilhac  <michael.cadilhac-@t-lrde.epita.fr>

	* play/zone.el (zone): Wrap body with save-window-excursion.

2005-10-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/cal-menu.el (calendar-mouse-view-diary-entries):
	Use the new `list-only' arg to diary-list-entries.

	* calendar/diary-lib.el: Use overlays rather than selective-display.
	(diary-selective-display): New var.
	(diary-header-line-format): Use it.
	(diary-list-entries): Add argument `list-only'.
	Put the buffer in diary-mode.  Don't add \^M at beg and end.
	Replace \^M by invisible overlays.
	(diary-unhide-everything): Replace \^M by invisible overlays.
	(print-diary-entries): Look for overlays rather than \^M.
	Add a space to the temp buffer name.
	(diary-show-all-entries, mark-diary-entries, make-diary-entry):
	Put the buffer in diary-mode.
	(list-sexp-diary-entries): Replace \^M by invisible overlays.
	(diary-anniversary): Make the year arg optional.
	(diary-time-regexp): New const.
	(diary-font-lock-keywords): Use it to accept a few more time formats.

	* pcvs.el (cvs-sentinel): Make sure we do re-enable undo.

2005-10-06  Thien-Thi Nguyen  <ttn@gnu.org>

	* textmodes/artist.el (artist-ellipse-mirror-quadrant):
	Fix bug introduced 2005-07-03: Use (car (last ...))
	to faithfully reproduce replaced artist-last.
	(artist-set-arrow-points-for-poly): Likewise.
	Suggested by Johan Bockgård.

2005-10-06  Juanma Barranquero  <lekktu@gmail.com>

	* dframe.el (x-pointer-hand2, x-pointer-top-left-arrow):
	* wid-edit.el (widget):
	* progmodes/gdb-ui.el (gdb-buffer-fringe-width):
	* progmodes/vhdl-mode.el (speedbar-attached-frame): Add defvars.

2005-10-06  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-environment):
	Fix setting up of case-table for unibyte mode.

	* simple.el (what-cursor-position): If the character is displayed
	by some `display' text property, show that.  Don't use
	single-key-description for eight-bit characters in multibyte mode.

2005-10-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-fringe-width): New variable.
	(gdb-ann3): Set it.
	(gdb-put-breakpoint-icon): Don't take fringe-width from speedbar frame.
	(gdb-info-frames-custom): Use inverse-video for first five
	characters of selected frame only.
	(gdb-get-frame-number): Select frame even when point is on frame
	number.

2005-10-06  Masatake YAMATO  <jet@gyve.org>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom):
	Put `font-lock-function-name-face'.
	(gdb-info-frames-custom): Put `font-lock-function-name-face'
	and `font-lock-variable-name-face'.
	(gdb-registers-font-lock-keywords): New font lock keywords definition.
	(gdb-registers-mode): Use `gdb-registers-font-lock-keywords'.
	(gdb-memory-font-lock-keywords): New font lock keywords definition.
	(gdb-memory-mode): Use `gdb-memory-font-lock-keywords'.
	(gdb-local-font-lock-keywords): New font lock keywords definition.
	(gdb-locals-mode): Use `gdb-local-font-lock-keywords'.
	(gdb-threads-font-lock-keywords): New font lock keywords definition.
	(gdb-threads-mode): Use `gdb-threads-font-lock-keywords'.

2005-10-05  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-merg.el (ediff-merge-region-is-non-clash): New defsubst.
	(ediff-merge-region-is-non-clash-to-skip): Previously called
	ediff-merge-region-is-non-clash.

	* ediff-mult.el (ediff-append-custom-diff, ediff-meta-show-patch):
	Use insert-buffer-substring.

	* ediff-ptch.el (ediff-fixup-patch-map): Use better heuristics for
	selecting files to patch.  Also bug fixes.

	* ediff-util.el (ediff-setup): Bug fix.
	(ediff-next-difference): Never skip clashes that differ in white
	space only.

	* ediff-wind.el (ediff-setup-control-frame)
	(ediff-destroy-control-frame): Check the menubar feature.

	* emulation/viper-cmd.el (viper-normalize-minor-mode-map-alist)
	(viper-refresh-mode-line): Use make-local-variable to localize
	some vars instead of make-variable-buffer-local.  Suggested by
	Stefan Monnier.

	* emulation/viper-init.el (viper-make-variable-buffer-local):
	Delete alias.
	(viper-restore-cursor-type, viper-set-insert-cursor-type):
	Use make-local-variable instead of make-variable-buffer-local.
	Suggested by Stefan Monnier.

	* emulation/viper.el (viper-mode): Don't use
	viper-make-variable-buffer-local.
	(viper-comint-mode-hook): Use make-local-variable on
	require-final-newline.
	(viper-non-hook-settings): Don't use make-variable-buffer-local.

2005-10-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/scheme.el (scheme-mode-syntax-table): Mark ; as being
	also the second char of a comment-start sequence.
	(scheme-sexp-comment-syntax-table): New var.
	(lambda, define): Set their scheme-doc-string-elt property.
	(scheme-font-lock-syntactic-face-function): Handle sexp-comments.
	Use lisp-font-lock-syntactic-face-function now that it properly
	handles |...| symbols.
	(scheme-mode-variables): Set lisp-doc-string-elt-property,
	parse-sexp-lookup-properties and font-lock-extra-managed-props.

	* emacs-lisp/lisp-mode.el (lisp-mode-syntax-table): Move the nesting
	bit from # to |.
	(lisp-font-lock-syntactic-face-function): Distinguish |...| symbols.

	* emacs-lisp/lisp-mode.el (lambda): Add its doc-string-elt property.
	(lisp-doc-string-elt-property): New var.
	(lisp-font-lock-syntactic-face-function): Use it.
	Rewrite to recognize docstrings even for forms not at toplevel.

	* progmodes/scheme.el (scheme-mode-syntax-table): Put the nested
	annotation on the | part of #| rather than on the # part.
	(scheme-font-lock-syntactic-face-function): New function, to
	distinguish strings from |...| symbols.
	(scheme-mode-variables): Use it.  Also fix up the font-lock-time
	syntax-table so that #|...|# is properly highlighted.

	* emacs-lisp/lisp-mode.el (lisp-font-lock-syntactic-face-function):
	Don't mark as docstring the 3rd elem of an unknown toplevel form.

2005-10-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* bindings.el (global-map): Resync [home] and [end] bindings with C-a
	and C-e.

	* emacs-lisp/eldoc.el: Move comments into docstrings.
	(eldoc-message-commands): Initialize in its declaration.
	Add move-beginning-of-line and move-end-of-line.
	(eldoc-add-command, eldoc-add-command-completions)
	(eldoc-remove-command, eldoc-remove-command-completions): Simplify.

	* outline.el (outline-mark-subtree): Activate the mark.

	* calendar/appt.el (appt-time-regexp): New var.
	(appt-add, appt-make-list): Use it.
	(appt-convert-time): Clean up.

	* textmodes/tex-mode.el (tex-font-lock-syntactic-face-function):
	Don't set any syntax-table property here.
	(tex-font-lock-verb): New function.  Do it here.
	(tex-font-lock-syntactic-keywords): Use it.

2005-10-04  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-file-complete): Get the widget start point
	the right way.  Default directory to `/' if file has none.

	* x-dnd.el (x-dnd-drop-data): Check for dedicated windows.

	* textmodes/flyspell.el (flyspell-mode-on):
	Call ispell-maybe-find-aspell-dictionaries.

	* textmodes/ispell.el (ispell-word, ispell-region):
	Call ispell-maybe-find-aspell-dictionaries.
	(ispell-accept-buffer-local-defs):
	Don't call ispell-maybe-find-aspell-dictionaries.

2005-10-04  Richard M. Stallman  <rms@gnu.org>

	* iswitchb.el (iswitchb-buffer-ignore): Label it risky.

2005-10-04  Emilio C. Lopes  <eclig@gmx.net>

	* iswitchb.el (iswitchb-ignore-buffername-p): Use `functionp'
	instead of `fboundp' in order to allow for anonymous functions.

2005-10-04  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-next, Info-prev, Info-up): Select info buffer, in
	case the user clicks on the link while another window is selected.
	(Info-speedbar-hierarchy-buttons): Use speedbar-current-frame.

	* dframe.el (dframe-update-keymap): Use mouse-1-click-follows-link
	functionality.
	(dframe-help-echo): Save point in case mouse tracking is off.

2005-10-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/ange-ftp.el (ange-ftp-ls): Fix typo introduced in last change.

2005-10-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-styles.el (c-setup-paragraph-variables): Make sure we do
	not change the global value of those vars.

	* progmodes/cc-mode.el (c-basic-common-init): Remove calls to
	make-local-variable which we do not need any more.

2005-10-03  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el (speedbar-ignored-path-regexp, speedbar-line-path)
	(speedbar-ignored-path-expressions, speedbar-buffers-line-path)
	(speedbar-add-ignored-path-regexp, speedbar-buffers-line-path)
	(speedbar-path-line): Define obsolete aliases.
	(speedbar-line-directory): Doc fix.

	* progmodes/vhdl-mode.el (vhdl-speedbar-initialize)
	(vhdl-speedbar-rescan-hierarchy): Call speedbar-line-directory
	instead of speedbar-line-path.

2005-10-03  Jan Djärv  <jan.h.d@swipnet.se>

	* x-dnd.el (x-dnd-drop-data): Don't set dnd-open-file-other-window
	to nil if dropping on a window.  Handle dropping on a minibuffer window
	like dropping on a non-window part of Emacs.

2005-10-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el: Use with-current-buffer.
	(ange-ftp-insert-directory): Do not follow symlinks any more.

	* textmodes/ispell.el (ispell-find-aspell-dictionaries):
	Remove interactive spec.

2005-10-03  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Use custom-initialize-set.

2005-10-02  Richard M. Stallman  <rms@gnu.org>

	* progmodes/ebnf2ps.el (ebnf-eps-production-list):
	Use insert-buffer-substring.

	* net/tramp.el: Pacify byte compiler warnings in pacification code.
	(tramp-handle-file-local-copy): Use insert-buffer-substring.

2005-10-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-insert-directory): Undo unintended part
	in last change.
	(ange-ftp-insert-directory): Fix up the search for the case where
	`file' is absolute.

2005-10-02  Romain Francoise  <romain@orebokech.com>

	* progmodes/compile.el (compile-goto-error): Delete extra paren.

2005-10-02  Andreas Schwab  <schwab@suse.de>

	* ediff-ptch.el (ediff-fixup-patch-map): Handle file names without
	directory component in the session info.

2005-10-01  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-redirect-subvert-readonly): Doc fix.

	* simple.el (next-error-internal): New function.

	* progmodes/compile.el (compilation-buffer-name): New arg MODE-COMMAND.
	(compilation-start): Pass new arg to compilation-buffer-name.
	(compile-goto-error): Use next-error-internal.

2005-10-01  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el: Remove RCS tag.
	(speedbar-check-read-only): Handle non-existent files.

	* dframe.el, ezimage.el, sb-image.el: Remove RCS tags.

	* info.el (Info-speedbar-hierarchy-buttons)
	(Info-speedbar-goto-node): Call speedbar-select-attached-frame.

2005-10-01  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-valid-entry-whitespace-re):
	Do not match newline.
	(bibtex-realign): Do not use bibtex-valid-entry-whitespace-re.
	(bibtex-summary): Remove unnecessary save-excursion.
	(bibtex-fill-field-bounds): Use fill-region-as-paragraph.

2005-10-01  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add charset info for "iso10646-1".
	Modify default fontset to use ATSUI-compatible fonts for some charsets
	if available.

2005-10-01  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el: Re-apply arch tag.
	(speedbar-version): Rename to version 1.0.  Suggested by Eric
	M. Ludlam.
	Reapply two changes from Emacs CVS' version of speedbar lost
	during the merge:
	(speedbar-use-imenu-flag): Avoid unnecessary use of locate-library.
	(speedbar-frame-parameters): Improve customize type.

2005-09-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-gwp-start): Use with-current-buffer.
	(ange-ftp-file-directory-p): Fix the symlink case.
	(ange-ftp-insert-directory): When listing a single file, get a list of
	the parent buffer and extract the relevant line.  Inspired from a patch
	by Katsumi Yamaoka <yamaoka@jpl.org>.
	(ange-ftp-file-name-sans-versions): Simplify.

2005-09-30  Bill Wohler  <wohler@newt.com>

	Move MH-E image files from toolbar and mail directories into
	etc/images.

	* mail/reply2.*: Move to etc/images/mail/reply*.

	* toolbar/execute.*, toolbar/highlight.*, toolbar/mh-logo.xpm:
	* toolbar/page-down.*, toolbar/show.*, toolbar/widen.*: Move to
	etc/images.

	* toolbar/alias.*, toolbar/refile.*, toolbar/repack.*:
	* toolbar/reply*: Move to etc/images/mail.

	* toolbar/rescan.*: Move and rename to etc/images/refresh.*.

2005-09-30  Eric M. Ludlam  <zappo@gnu.org>

	* speedbar.el: New version 1.0pre3.

	Frame management code (including timer, and mouse click specifics)
	moved to dframe.el:
	(speedbar-attached-frame): Removed.  Use dframe-attached-frame.
	(speedbar-timer): Removed.  Use dframe-timer.
	(speedbar-close-frame): Removed.  Use dframe-close-frame.
	(speedbar-activity-change-focus-flag): Removed.  Use
	dframe-activity-change-focus-flag.
	(speedbar-update-speed, speedbar-navigating-speed): Obsolete.  Use
	dframe-update-speed.

	(speedbar-current-frame): New macro.  Use this instead of the
	variable speedbar-frame.

	(speedbar-use-images, speedbar-expand-image-button-alist)
	(speedbar-insert-image-button-maybe): Moved to sb-image.el.

	(speedbar-find-image-on-load-path): Removed.  Replaced by
	defezimage in ezimage.el.
	(speedbar-expand-image-button-alist): Removed.  Replaced by
	ezimage-expand-image-button-alist in ezimage.el.

	(speedbar-ignored-directory-regexp)
	(speedbar-add-ignored-directory-regexp)
	(speedbar-ignored-directory-expressions)
	(speedbar-line-directory, speedbar-buffers-line-directory)
	(speedbar-directory-line, speedbar-buffers-line-directory):
	Renamed, replacing `path' with `directory'.

	(speedbar-create-directory, speedbar-expand-line-descendants)
	(speedbar-toggle-line-expansion)
	(speedbar-contract-line-descendants): New commands.

	(speedbar-query-confirmation-method, speedbar-select-frame-method)
	(speedbar-use-tool-tips-flag): New options.

	(speedbar-check-read-only, speedbar-require-version)
	(speedbar-insert-separator, speedbar-buffers-tail-notes)
	(speedbar-handle-delete-frame, speedbar-try-completion)
	(speedbar-update-localized-contents): New functions.

	(speedbar-incompatible-version, speedbar-ro-to-do-point)
	(speedbar-object-read-only-indicator): New variables.

	(speedbar-visiting-tag-hook, speedbar-before-visiting-file-hook):
	New hooks.

	(speedbar-separator-face): New face.

	(speedbar-supported-extension-expressions): Add `.g' and `.ma?k'.
	(speedbar-ignored-modes): Add fundamental-mode.
	(speedbar-directory-unshown-regexp): Add . directories.

	(speedbar-key-map): Remove old SPC and DEL page up/down keys.
	(speedbar-file-key-map): Add SPC to toggle node expansion, `[' and
	`]' for full expand/close.
	(speedbar-buffers-key-map): Add SPC to toggle node expansion.

	(speedbar-check-vc): Support hidden files.
	(speedbar-vc-check-dir-p): Use vc-state if available for CVS.
	(speedbar-this-file-in-vc): Use vc-state if available.  If VC
	state is nil, it is not checked out.

	(speedbar-line-text, speedbar-line-token): Support expand buttons
	with no text.
	(speedbar-refresh): Universal argument acts as power-click.
	(speedbar-fetch-dynamic-tags): If a buffer is in Emacs, switch to
	that buffer to get variable values.

	And many other bugfixes.

	* dframe.el, ezimage.el, sb-image.el: New files.

	* sb-dir-minus.xpm, sb-dir-plus.xpm, sb-dir.xpm, sb-mail.xpm:
	* sb-pg-minus.xpm, sb-pg-plus.xpm, sb-pg.xpm, sb-tag-gt.xpm:
	* sb-tag-minus.xpm, sb-tag-plus.xpm, sb-tag-type.xpm:
	* sb-tag-v.xpm, sb-tag.xpm: Remove files.
	New image files installed into etc/images/ezimage.

2005-09-30  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-show-warning): If a character is in
	ps-print-translation-table, don't treat it as non-printable.

2005-09-30  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-themes-load-path): New variable.
	(tree-widget-themes-directory): Doc fix.
	(tree-widget-image-formats) [Emacs]: Doc fix.
	(tree-widget--locate-sub-directory): New function.
	(tree-widget-themes-directory): Use it.

	* recentf.el (recentf-filename-handlers): Rename from
	`recentf-filename-handler'.  Allow a list of functions.
	(recentf-menu-items-for-commands): Fix :help strings.
	(recentf-apply-filename-handlers): New function.
	(recentf-expand-file-name): Use it.
	(recentf-cleanup): Remove duplicates too.

2005-09-29  Juri Linkov  <juri@jurta.org>

	* faces.el: Rearrange face definitions to be in the same order as
	their face descriptions in "(emacs)Standard Faces".

	* isearch.el (isearch, lazy-highlight): Add group `basic-faces'.

	* tooltip.el (tooltip): Add group `basic-faces'.

	* buff-menu.el (Buffer-menu-buffer): Remove group
	`font-lock-highlighting-faces'.

	* progmodes/compile.el (compilation-error, compilation-warning)
	(compilation-info, compilation-line-number, compilation-column-number):
	Change group from `font-lock-highlighting-faces' to `compilation'.

	* progmodes/vhdl-mode.el (vhdl-font-lock-prompt-face)
	(vhdl-font-lock-attribute-face, vhdl-font-lock-enumvalue-face)
	(vhdl-font-lock-function-face, vhdl-font-lock-directive-face)
	(vhdl-font-lock-reserved-words-face)
	(vhdl-font-lock-translate-off-face, syntax-alist): Remove group
	`font-lock-highlighting-faces'.

	* cus-edit.el (custom-buffer-sort-alphabetically): Default to nil.

2005-09-28  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Set CUA move property on additional commands:
	up-list, down-list, backward-up-list, end-of-defun beginning-of-defun,
	forward-sexp, backward-sexp, forward-list, backward-list.

2005-09-28  Romain Francoise  <romain@orebokech.com>

	* comint.el (comint-show-output): Really set point at the
	beginning of the output when not using `comint-use-prompt-regexp'.

2005-09-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el (math-oper-table): Raise the precedence of "/"
	in TeX mode.

2005-09-26  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/org.el (org-table-sum): Fix format string.

	* textmodes/tex-mode.el (tex-insert-quote, latex-indent):
	Quote face names.

2005-09-26  Romain Francoise  <romain@orebokech.com>

	* isearch.el (isearch-forward-regexp): Close doc string.

2005-09-25  Richard M. Stallman  <rms@gnu.org>

	* simple.el (blink-matching-open): Don't no-op when point is BEGV+1.

	* isearch.el (isearch-forward, isearch-forward-regexp): Doc fixes.

	* progmodes/compile.el (compilation-error-properties):
	When getting the file from the previous error message,
	correctly decode the new data format.

	* progmodes/cc-cmds.el (c-electric-paren):
	Call old-blink-paren only for close-paren.

2005-09-24  Andreas Schwab  <schwab@suse.de>

	* term/rxvt.el (rxvt-register-default-colors): Delete redundant
	condition.

2005-09-25  Romain Francoise  <romain@orebokech.com>

	* dired-aux.el (dired-copy-file-recursive):
	* dired.el (dired-delete-file):
	* ediff-mult.el (ediff-dir-diff-copy-file):
	* ediff-util.el (ediff-test-save-region):
	* forms.el (forms-mode):
	* ido.el (ido-file-internal, ido-delete-file-at-head):
	* log-edit.el (log-edit-done):
	* ses.el (ses-yank-resize):
	* play/gomoku.el (gomoku-human-plays, gomoku)
	(gomoku-human-resigns, gomoku-prompt-for-other-game)
	(gomoku-offer-a-draw):
	* play/landmark.el (lm-human-resigns, lm):
	* net/eudcb-ldap.el (eudc-ldap-check-base):
	* play/mpuz.el (mpuz-offer-abort, mpuz-try-letter, mpuz-close-game):
	* progmodes/ebrowse.el (ebrowse-find-pattern):
	* progmodes/idlw-shell.el (idlwave-shell-set-bp-check):
	* textmodes/reftex-index.el (reftex-index-initialize-phrases-buffer):
	End `yes-or-no-p' and `y-or-n-p' prompts with question mark and space.

	* vc.el (vc-delete-file):
	* play/gomoku.el (gomoku-terminate-game, gomoku)
	(gomoku-prompt-for-move, gomoku-human-takes-back):
	* play/landmark.el (lm-human-takes-back, lm-prompt-for-move)
	(lm-start-robot, lm-human-plays): Remove extraneous spaces in messages.

2005-09-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/rxvt.el (rxvt-register-default-colors): Add support for 255
	color rxvt terminals by using the code xterm.el used to use before
	2005-04-09 in order to match the colors used by rxvt.

2005-09-24  Emanuele Giaquinta  <emanuele.giaquinta@gmail.com>  (tiny change)

	* term/rxvt.el (rxvt-register-default-colors): Add support for 88
	colors rxvt-unicode terminals by using the same code as xterm.el.

2005-09-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-append-prop)
	(tex-font-lock-suscript, tex-insert-quote, latex-indent): Adjust to the
	new symbol used for the tex-verbatim face.

2005-09-24  Emilio C. Lopes  <eclig@gmx.net>

	* woman.el (woman-file-name):
	* wid-edit.el (widget-file-prompt-value)
	(widget-coding-system-prompt-value):
	* w32-fns.el (set-w32-system-coding-system):
	* vc.el (vc-version-diff, vc-annotate):
	* textmodes/reftex-auc.el (reftex-arg-cite)
	(reftex-arg-index-tag):
	* textmodes/refer.el (refer-get-bib-files):
	* textmodes/artist.el (artist-figlet-choose-font):
	* terminal.el (terminal-emulator):
	* replace.el (occur-read-primary-args):
	* rect.el (string-rectangle, string-insert-rectangle):
	* ps-print.el (ps-print-preprint):
	* progmodes/pascal.el (pascal-goto-defun):
	* progmodes/etags.el (visit-tags-table, visit-tags-table-buffer):
	* progmodes/compile.el (compilation-find-file):
	* printing.el (pr-interactive-n-up):
	* play/animate.el (animate-birthday-present):
	* net/rcompile.el (remote-compile):
	* man.el (man, Man-goto-section, Man-follow-manual-reference):
	* mail/rmailsum.el (rmail-summary-search-backward)
	(rmail-summary-search):
	* mail/rmailout.el (rmail-output-read-rmail-file-name)
	(rmail-output-read-file-name):
	* mail/rmail.el (rmail-search, rmail-search-backwards):
	* mail/mailabbrev.el (merge-mail-abbrevs, rebuild-mail-abbrevs):
	* locate.el (locate):
	* international/quail.el (quail-show-keyboard-layout):
	* international/mule.el (set-buffer-file-coding-system)
	(revert-buffer-with-coding-system, set-file-name-coding-system)
	(set-terminal-coding-system, set-keyboard-coding-system)
	(set-next-selection-coding-system):
	* international/mule-diag.el (describe-coding-system)
	(describe-font, describe-fontset):
	* international/mule-cmds.el (universal-coding-system-argument)
	(search-unencodable-char, describe-input-method)
	(set-language-environment, describe-language-environment):
	* international/codepage.el (codepage-setup):
	* international/code-pages.el (codepage-setup):
	* info.el (Info-search, Info-follow-reference)
	(Info-search-backward):
	* emacs-lisp/advice.el (ad-read-advised-function)
	(ad-read-advice-class, ad-clear-cache, ad-activate)
	(ad-deactivate, ad-update, ad-unadvise, ad-read-advice-name)
	(ad-enable-advice, ad-disable-advice, ad-remove-advice)
	(ad-read-regexp):
	* ediff-util.el (ediff-toggle-regexp-match):
	* ediff-ptch.el (ediff-prompt-for-patch-file):
	* dired-aux.el (dired-diff):
	* diff.el (diff):
	* cus-edit.el (custom-variable-prompt):
	* calendar/timeclock.el (timeclock-ask-for-project):
	* calc/calcalg3.el (calc-get-fit-variables):
	* calc/calc-store.el (calc-edit-variable)
	(calc-permanent-variable):
	* vc-mcvs.el (vc-mcvs-register):
	* shadowfile.el (shadow-define-literal-group):
	* woman.el (woman-file-name):
	* vc.el (vc-version-diff, vc-merge):
	* textmodes/reftex-index.el (reftex-index-complete-tag):
	* format.el (format-decode-buffer, format-decode-region):
	* emulation/viper-cmd.el (viper-read-string-with-history):
	* emacs-lisp/debug.el (cancel-debug-on-entry):
	* emacs-lisp/checkdoc.el (checkdoc-this-string-valid-engine):
	* ediff.el (ediff-merge-revisions)
	(ediff-merge-revisions-with-ancestor, ediff-revision):
	* completion.el (interactive-completion-string-reader):
	* calc/calc-prog.el (calc-user-define-formula):
	Follow convention for reading with the minibuffer.

2005-09-24  Steven Huwig  <steven_h@acm.org>  (tiny change)

	* progmodes/python.el (python-describe-symbol): Add globals() and
	locals() to the arguments of emacs.ehelp.

2005-09-24  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-maybe-find-aspell-dictionaries):
	New function, code extracted from ispell-valid-dictionary-list.
	(ispell-valid-dictionary-list, ispell-accept-buffer-local-defs):
	Call it.

2005-09-24  Eli Zaretskii  <eliz@gnu.org>

	* subr.el (version-regexp-alist): Extend valid syntax for version
	strings: allow any of the characters -,_,+ to separate the
	alpha/beta/rc part from the version part.  Doc fix.
	(version-to-list): Doc fix.  Bind case-fold-search to t, as advertised.

2005-09-23  David Reitter  <david.reitter@gmail.com>

	* mail/mailclient.el: New file.

2005-09-23  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-highlight-incorrect-region)
	(flyspell-incorrect-hook, flyspell-highlight-duplicate-region):
	Doc fixes.

	* progmodes/cc-mode.el (c-font-lock-init):
	Specify font-lock-lines-before.

2005-09-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-remove-props): Cause re-highlighting of the
	whole conflict.

2005-09-23  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map, orgtbl-mode-map):
	Move keybindings with `C-c C-h' prefix to `C-c C-x' prefix.  Make use
	of `remap' feature when available.  Additional key bindings for
	better tty support.
	(org-mode-restart, org-force-self-insert): New commands.
	(org-time-stamp-inactive): New command.
	(org-remap): New function.
	(org-table-auto-blank-field, org-level-color-stars-only): New options.
	(org-enable-fixed-width-editor): Move to `org-structure'
	customization group.
	(org-self-insert-command, orgtbl-self-insert-command): Modify to
	blank field after field motion commands.

2005-09-23  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-environment):
	Don't check utf-translate-cjk-lang-env is nil or not on deciding if we
	have to call utf-translate-cjk-load-tables.

2005-09-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-move-drag-overlay): Fix last change.

2005-09-22  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Fix previous change.

2005-09-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Fix loading rxvt at run time.

2005-09-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-move-drag-overlay): New function.
	(mouse-drag-region-1): Use it.
	Try to simplify a bit the state handling.  Handle clicks on links
	inside intangible areas.
	(mouse-save-then-kill): Minor simplification.
	(mouse-secondary-overlay): Make it always non-nil instead of
	recreating it each time.
	(mouse-start-secondary, mouse-set-secondary, mouse-drag-secondary)
	(mouse-kill-secondary, mouse-secondary-save-then-kill):
	Simplify accordingly.

2005-09-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/rxvt.el (rxvt-standard-colors): Fix some colors.

2005-09-20  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-ptch.el (ediff-prompt-for-patch-file): More intuitive prompt.
	(ediff-file-name-sans-prefix): Treat nil as an empty string.
	(ediff-fixup-patch-map): Better heuristic for intuiting the file names
	to patch.

	* ediff-util.el: Use insert-buffer-substring.

	* ediff-vers.el (cvs-run-ediff-on-file-descriptor): Bug fix.

	* emulation/viper-cmd.el (viper-change-state): Don't move over the
	field boundaries in the minibuffer.
	(viper-set-minibuffer-style): Add viper-minibuffer-post-command-hook.
	(viper-minibuffer-post-command-hook): New hook.
	(viper-line): Don't move cursor at bolp.

	* emulation/viper-ex.el (ex-pwd, viper-info-on-file): Fix message.

	* emulation/viper-init.el: Add alias to make-variable-buffer-local to
	avoid compiler warnings.

	* emulation/viper-macs.el (ex-map): Better messages.

	* emulation/viper-util.el (viper-beginning-of-field): New function.

	* emulation/viper.el: Replace make-variable-buffer-local with
	viper-make-variable-buffer-local everywhere, to avoid warnings.

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-drag-mode-line-1, mouse-drag-vertical-line):
	Delete unused var `old-selected-window'.
	(mouse-drag-region-1): Delete unused vars `start-frame', `end-of-range'.
	(mouse-drag-secondary): Delete unused var `start-frame'.

2005-09-19  Emanuele Giaquinta  <emanuele.giaquinta@gmail.com>  (tiny change)

	* term/rxvt.el (terminal-init-rxvt): Add entry for [end].

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (mark-visible-calendar-date): Save excursion.
	Re-indent within 80 columns.  Use inhibit-read-only.

2005-09-19  Romain Francoise  <romain@orebokech.com>

	* calendar/diary-lib.el (mark-diary-entries): Revert last change.

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-default-fontify-region): Don't add a line
	unconditionally, since the after-change-function already did it.

2005-09-19  Miles Bader  <miles@gnu.org>

	* net/newsticker.el: Get rid of CVS keyword.

2005-09-19  Johan Bockgård  <bojohan@dd.chalmers.se>

	* dired-aux.el (dired-handle-overwrite): Don't use `format' here.
	The prompt is formatted later.

2005-09-19  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Save the converted
	tree :node widget.

2005-09-19  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/sh-script.el (sh-blink): Fix spurious reference to
	variable `message'.

2005-09-18  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-login-prompt-regexp): Expand regexp in order
	to cover prompts like "login as:".  Reported by Slawomir Nowaczyk
	<slawomir.nowaczyk.847@student.lu.se>.

2005-09-18  Chong Yidong  <cyd@stupidchicken.com>

	* image.el (image-load-path): Use symbol `data-directory' instead
	of its value, for backward compatibility with packages that bind
	it during `find-image'.  Suggested by Katsumi Yamaoka.
	(image-search-load-path): Handle symbols whose values are strings.

2005-09-18  Romain Francoise  <romain@orebokech.com>

	* calendar/diary-lib.el (mark-diary-entries): Rearrange to wrap
	with-current-buffer form in save-excursion.

2005-09-18  Deepak Goel  <deego@gnufans.org>

	* apropos.el (apropos-command): Fix `message' call: first arg
	should be a format spec.  In this and all other cases that appear
	below and elsewhere in the source code, I made a change only when
	two conditions were satisfied: [1] I can think of a possibility
	that the arguments would cause an error, for example, the code in
	question relies on external variables such as filenames.  [2] I
	was sure that the arg to `message' could not have been nil in the code.

	* textmodes/tildify.el (tildify-region): Ditto.

	* textmodes/reftex-index.el (reftex-index-change-entry)
	(reftex-index-phrase-selection-or-word, reftex-query-index-phrase):
	* textmodes/reftex-dcr.el (reftex-echo-ref, reftex-echo-cite):
	* textmodes/org.el (org-complete, org-deadline, org-schedule)
	(org-priority, org-table-sum):
	* textmodes/ispell.el (ispell-check-version, ispell-parse-output):
	* textmodes/flyspell.el (flyspell-mode-on, flyspell-notify-misspell)
	(flyspell-word, flyspell-display-next-corrections):
	* textmodes/bibtex.el (bibtex-print-help-message):
	* textmodes/artist.el (artist-key-set-point-poly):
	* term/mac-win.el (mac-services-insert-text):
	* progmodes/vhdl-mode.el (vhdl-warning, vhdl-print-warnings)
	(vhdl-hooked-abbrev, vhdl-template-insert-fun)
	(vhdl-port-paste-testbench, vhdl-compose-new-component)
	(vhdl-compose-configuration):
	* progmodes/sh-script.el (sh-blink, sh-show-indent)
	(sh-set-indent, sh-learn-line-indent):
	* progmodes/ps-mode.el (ps-mode-target-column):
	* progmodes/idlwave.el (idlwave-make-tags)
	(idlwave-scan-library-catalogs):
	* progmodes/idlw-shell.el (idlwave-shell-parse-stack-and-display):
	* progmodes/gud.el (gud-jdb-analyze-source):
	* progmodes/flymake.el (flymake-log):
	* progmodes/ebnf2ps.el (ebnf-generate-region):
	* progmodes/cmacexp.el (c-macro-expansion):
	* progmodes/ada-xref.el (ada-treat-cmd-string):
	* progmodes/ada-mode.el (ada-create-case-exception-substring)
	(ada-justified-indent-current, ada-batch-reformat):
	* play/zone.el (zone):
	* play/landmark.el (lm-move):
	* play/decipher.el (decipher-show-alphabet):
	* net/newsticker.el (newsticker--display-jump)
	(newsticker--display-scroll):
	* mail/rmail-spam-filter.el (rsf-add-subject-to-spam-list)
	(rsf-add-sender-to-spam-list, rsf-add-region-to-spam-list):
	* mail/feedmail.el (feedmail-dump-message-to-queue):
	* eshell/esh-proc.el (eshell-remove-process-entry):
	* emulation/ws-mode.el (ws-last-error):
	* emulation/viper-macs.el (ex-map-read-args, ex-unmap-read-args)
	(viper-record-kbd-macro):
	* emulation/viper-ex.el (ex-pwd, viper-info-on-file):
	* emacs-lisp/lisp-mnt.el (lm-report-bug):
	* emacs-lisp/find-func.el (find-function-noselect):
	* calendar/timeclock.el (timeclock-status-string)
	(timeclock-workday-remaining-string, timeclock-workday-elapsed-string)
	(timeclock-when-to-leave-string):
	* calendar/icalendar.el (icalendar--convert-ical-to-diary):
	* calc/calc-units.el (calc-enter-units-table):
	* calc/calc-mode.el (calc-mode-record-mode):
	* woman.el (woman-mini-help):
	* wdired.el (wdired-change-to-wdired-mode):
	* vc.el (vc-retrieve-snapshot):
	* strokes.el (strokes-read-stroke, strokes-read-complex-stroke):
	* startup.el (display-startup-echo-area-message):
	* simple.el (set-goal-column):
	* ses.el (ses-command-hook, ses-recalculate-cell):
	* server.el (server-process-filter):
	* printing.el (pr-interface-txt-print, pr-interface-printify)
	(pr-interface-ps):
	* pcvs.el (cvs-help):
	* log-edit.el (log-edit, log-edit-mode-help):
	* iswitchb.el (iswitchb-possible-new-buffer):
	* isearch.el (isearch-edit-string):
	* image-mode.el (image-mode, image-minor-mode):
	* ibuf-macs.el (define-ibuffer-filter):
	* hi-lock.el (hi-lock-find-patterns):
	* files.el (toggle-read-only):
	* ediff-util.el (ediff-copy-diff)
	(ediff-write-merge-buffer-and-maybe-kill):
	* echistory.el (Electric-history-undefined):
	* dnd.el (dnd-insert-text):
	* dired-aux.el (dired-query):
	* desktop.el (desktop-restore-file-buffer, desktop-lazy-create-buffer):
	* bookmark.el (bookmark-bmenu-locate):
	* obsolete/fast-lock.el (@top-level) <with-temp-message macro>:
	Fix `message' calls to ensure first arg is a format string.
	The change was made only when these two conditions were satisfied:
	[1] when there is a possibility that the arguments would cause an error
	for example, if the code in question relies on external variables
	such as filenames, and
	[2] if the arg to `message' could not have been nil in the code.

	* pcomplete.el (pcomplete--help): Fix `message' format spec.
	Not having a %s would be weird, though not technically wrong.

2005-09-18  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-add-charset-info): Doc fix.

2005-09-17  Romain Francoise  <romain@orebokech.com>

	* shell.el (shell-resync-dirs): Handle echoing processes more
	reliably.  Don't insert resync command if `comint-process-echoes'
	is non-nil.

2005-09-17  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-aspell-supports-utf8): New variable.
	(ispell-check-version): Set ispell-aspell-supports-utf8 to t for
	aspell versions >= 0.60.
	(ispell-valid-dictionary-list): Call ispell-find-aspell-dictionaries
	only if ispell-aspell-supports-utf8 is non-nil.

2005-09-17  Johan Bockgård  <bojohan@dd.chalmers.se>

	* progmodes/scheme.el (scheme-mode-variables): Use setq to assign
	buffer-local value to lisp-indent-function.

2005-09-17  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/glasses.el (glasses-make-readable): If
	glasses-separator differs from underscore, put appropriate
	overlays over underscore characters.
	(glasses-convert-to-unreadable): If glasses-separator differs from
	underscore, try to convert glasses-separator characters to
	underscores.

2005-09-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/diary-lib.el (mark-diary-entries): Don't move point.
	Use with-syntax-table and dolist.

2005-09-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-auc.el:
	* textmodes/reftex-cite.el:
	* textmodes/reftex-dcr.el:
	* textmodes/reftex-global.el:
	* textmodes/reftex-parse.el:
	* textmodes/reftex-ref.el:
	* textmodes/reftex-sel.el:
	* textmodes/reftex-toc.el:
	* textmodes/reftex-vars.el:
	* textmodes/reftex.el: Small changes to remove compiler warnings.

	* textmodes/reftex-index.el: Likewise.
	(reftex-query-index-phrase): More efficient use of markers.

2005-09-15  Chong Yidong  <cyd@stupidchicken.com>

	* image.el (image-load-path): New variable.
	(image-search-load-path): New function.
	(find-image): Search for images in `image-load-path'.

2005-09-15  Richard M. Stallman  <rms@gnu.org>

	* follow.el: Change Maintainer field.

2005-09-15  David Ponce  <david@dponce.com>

	* recentf.el (recentf-save-file-modes): New option.
	(recentf-save-list): Use it.

2005-09-15  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-eol-desc, mode-line-coding-system-map)
	(mode-line-mule-info, mode-line-modified): Move bindings from
	mouse-3 to mouse-1.

2005-09-15  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (sendmail-user-agent-compose): Revert last change.

2005-09-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-process-filter): Revert to ^#+$.
	Use with-current-buffer.
	(ange-ftp-gwp-start): Remove unused var `gw-user'.
	(ange-ftp-guess-hash-mark-size): Remove unused var `result'.
	(ange-ftp-insert-directory): Remove unused var `short'.
	(ange-ftp-file-name-sans-versions): Remove unused var `host-type'.

	* pcvs-defs.el (cvs-version): Recognize CVSNT version string.
	(cvs-execute-single-dir): Change default: cvs-1.9 is ancient.

	* calendar/cal-menu.el: Don't require easymenu, since we don't use it.
	(check-calendar-holidays, diary-list-entries): Autoload.
	Otherwise `emacs -q' followed by "mouse-2 -> diary entries" burps.
	(calendar-mouse-holidays, calendar-mouse-view-diary-entries): Simplify.

	* calendar/diary-lib.el (diary-show-all-entries): Fix last change,
	which mistakenly removed a call to display-buffer.

2005-09-14  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/iso-insert.el: Move to obsolete/ from international/.

2005-09-14  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el
	(hs-hide-comments-when-hiding-all): Remove autoload cookie.
	(hs-allow-nesting): New user var.
	(hs-discard-overlays): Skip "internal" overlays if nesting allowed.
	(hs-hide-block-at-point): When nesting allowed,
	if there is already an overlay in place, delete it.
	(hs-safety-is-job-n): Delete func; remove call sites.
	(hs-hide-level-recursive): Don't pre-clean if nesting allowed.
	(hs-overlay-at): New func.
	(hs-already-hidden-p, hs-show-block): Use it.
	(hs-hide-all): Don't pre-clean if nesting allowed.
	(hs-show-all): Temporarily disallow
	nesting around call to `hs-discard-overlays'.

2005-09-14  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (mouse-major-mode-menu): Make `prefix' optional.
	Delete unused local var.

2005-09-13  Juanma Barranquero  <lekktu@gmail.com>

	* help-fns.el (describe-categories): "?\ " -> "?\s".
	(help-do-arg-highlight): Recognize also ARG-n, as in
	`move-to-left-margin' (ARG+n is already recognized).  Simplify.

	* international/codepage.el (dos-unsupported-char-glyph):
	* net/newsticker.el (tool-bar-map, w3-mode-map)
	(w3m-minor-mode-map):
	* progmodes/vhdl-mode.el (conf-alist, conf-entry, conf-key)
	(ent-alist):
	* textmodes/reftex-vars.el (reftex-tables-dirty): Add defvars.

2005-09-13  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-push-theme): Handle the case where a symbol is
	bound but face properties have not yet been assigned.

	* mail/sendmail.el (mail): Use new buffer if `noerase' is `new'.
	Fix behavior if noerase is `t' and there is no mail buffer.

	* simple.el (sendmail-user-agent-compose): Use a new mail buffer
	if `continue' is nil, rather than signal an error.

2005-09-12  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-keywords): Add autoload.

	* help-fns.el (describe-variable): Rearrange to put source link
	in a predictable place.

	* net/newsticker.el: New file.

2005-09-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (calendar-for-loop): Add edebug info.
	(calendar-basic-setup): Use the new nil arg.
	(number-of-diary-entries): Move to diary-lib.el.

	* calendar/diary-lib.el: Use with-current-buffer, match-string.
	(diary-list-entries): Use with-syntax-table and dolist.
	Rename from list-diary-entries.
	Use number-of-diary-entries if `number' is nil.
	(diary, diary-view-entries): Use this new name and new nil arg value.
	(number-of-diary-entries): Move from calendar.el.
	(diary-unhide-everything): New function.
	(include-other-diary-files, fancy-diary-display)
	(diary-show-all-entries, make-diary-entry): Use it.
	(diary-mail-entries): Use buffer-string.
	(mark-diary-entries): Fix long standing paren typo.
	(diary-sexp-entry): Use count-lines.
	(make-diary-entry): Avoid `previous-line'.
	(diary-mode-map): New var.
	(diary-mode): Redraw cal after saving.  Setup header-line.
	(fancy-diary-display-mode): Use local-set-key.

	* startup.el (command-line): Try calling various terminal-init-foo-bar
	functions by stripping hyphenated suffixes from $TERM.

	* files.el (normal-mode): Check boundness of font-lock-keywords.

2005-09-12  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el: Don't decide a file's directory
	until the user actually tries to go there.
	(compilation-next-error-function):
	Pass compilation-find-file the directory from the file-struct.
	(compilation-internal-error-properties): Separate local FILE-STRUCT
	from FILE.  Doc the args better.  Rename arg FMT to FMTS.
	(compilation-find-file): Arg DIR renamed to DIRECTORY.
	Expand it, and if nil, use default-directory.
	(compilation-get-file-structure): Don't mix specified directory
	with default directory.  Put specified directory into
	file-struct.  Don't make the file name absolute.

	* progmodes/compile.el (compilation-error-regexp-alist): Doc fix.
	(compile-command): Add autoload.
	(compilation-disable-input): Add autoload.

2005-09-11  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el: Mention variable `time-stamp-pattern' in doc
	strings of the variables it can override.
	(time-stamp): New (as yet undocumented) time-stamp-format escapes
	%Q and %q, for fully-qualified domain name and unqualified host name.

2005-09-11  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Update list.
	(authors-fixed-entries): Update mldrag.el entry.

2005-09-10  Alan Mackenzie  <acm@muc.de>

	* textmodes/page.el (narrow-to-page): Exclude _entire_ multi-line
	delimiter from the region narrowed to.

2005-09-10  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-check-version): Signal an error if
	aspell version is less than 0.60.

2005-09-10  Pascal Dupuis  <Pascal.Dupuis@esat.kuleuven.be>  (tiny change)

	* progmodes/octave-inf.el (inferior-octave-startup):
	Resync current dir at the end.

2005-09-10  Emilio C. Lopes  <eclig@gmx.net>

	* woman.el (woman-topic-at-point-default):
	Rename to woman-use-topic-at-point-default.
	(woman-topic-at-point): Rename to woman-use-topic-at-point.
	(woman-file-name): Reflect renames above.  Automatically use the
	word at point as topic if woman-use-topic-at-point is non-nil.
	Otherwise offer it as default but don't insert it in the
	minibuffer.  Also use `test-completion' instead of `assoc' as
	suggested by Stefan Monnier.

2005-09-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-directory, vc-update-change-log): Throw an error on
	the attempt to do it over Tramp.  This is not yet supported.

2005-09-10  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-menu-frame-live-and-visible-p)
	(menu-bar-non-minibuffer-window-p): New functions.
	("Split Window", "Save As..."): Use them.
	("Postscript Print Buffer (B+W)", "Postscript Print Buffer")
	("Print Buffer", "Truncate Long Lines in this Buffer"):
	Use menu-bar-menu-frame-live-and-visible-p.
	("Save Buffer", "Insert File", "Open Directory...")
	("Open File...", "Visit New File..."):
	Use menu-bar-non-minibuffer-window-p.
	(kill-this-buffer-enabled-p, dired <menu-enable>):
	Use menu-bar-non-minibuffer-window-p.

2005-09-09  Eli Zaretskii  <eliz@gnu.org>

	* cus-start.el (all): Don't complain about fringe-related
	built-ins if fringes are not supported.  Ditto about
	selection-related built-ins.  Fix the test for GTK-related built-ins.

	* menu-bar.el ("Split Window", "Postscript Print Buffer (B+W)")
	("Postscript Print Buffer", "Print Region", "Save As...")
	("Save", "Insert File...", "Open Directory...")
	("Open File...", "Visit New File..."")
	("Truncate Long Lines in this Buffer"): Don't look at
	menu-updating-frame if this display does not support multiple frames.

2005-09-09  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/sendmail.el (default-sendmail-coding-system): Doc fix.

2005-09-09  Emilio C. Lopes  <eclig@gmx.net>

	* woman.el: Format- and whitespace-related changes.

2005-09-09  Eli Zaretskii  <eliz@gnu.org>

	* woman.el: Fix my email address.

2005-09-08  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-skeleton-pair-default-alist): New var.
	(sh-mode): Locally set skeleton-pair-default-alist.

	* progmodes/make-mode.el (makefile-add-log-defun): Trim the result.

	* progmodes/flymake.el: Require `compile' unconditionally.

	* mail/sendmail.el (send-mail-function): Add Mailclient alternative.

	* woman.el (woman-file-name): Provide a default, not initial input.

	* smerge-mode.el (smerge-resolve): Pass args to smerge-remove-props.

	* font-lock.el (font-lock-support-mode): Doc fix.

	* descr-text.el (describe-property-list): Handle non-symbol prop names.

2005-09-08  Richard M. Stallman  <rms@gnu.org>

	* simple.el (blink-matching-open): Get rid of text props from
	the string shown in echo area.  Don't permanently set point.
	Some rearrangements.

2005-09-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* recentf.el (recentf-filename-handler): Add custom choice
	`abbreviate-file-name'.

	* msb.el (msb--very-many-menus): Fix typo.

	* disp-table.el (standard-display-european): Don't set
	enable-multibyte-characters to nil.

2005-09-08  David Ponce  <david@dponce.com>

	* recentf.el (recentf-show-file-shortcuts-flag): New option.
	(recentf-expand-file-name): Doc fix.
	(recentf-dialog-mode-map): Define digit shortcuts.
	(recentf--files-with-key): New variable.
	(recentf-show-digit-shortcut-filter): New function.
	(recentf-open-files-items): New function.
	(recentf-open-files): Use it.
	(recentf-open-file-with-key): New command.

2005-09-08  Chong Yidong  <cyd@stupidchicken.com>

	* buff-menu.el (Buffer-menu-sort-by-column): New function.
	Suggested by Kim F. Storm.
	(Buffer-menu-sort-button-map): Global keymap for sort buttons.
	(Buffer-menu-make-sort-button): Use global keymap.

2005-09-07  Michael Albinus  <michael.albinus@gmx.de>

	* woman.el (top): Remap `man' command by `woman' in `woman-mode-map'.
	(Man-getpage-in-background-advice): Remove defadvice; it isn't
	necessary any longer with the remapped command.
	(Man-bgproc-sentinel-advice): Remove defadvice which counts
	formatting time only.

	* net/tramp.el (tramp-action-password)
	(tramp-multi-action-password): Compile the password prompt from
	`method', `user' and `host'.  Sometimes it isn't obvious which
	password to enter, for example with remote files offered by
	recentf.el, or with multiple steps.  Suggested by Robert Marshall
	<robert@chezmarshall.freeserve.co.uk>.

2005-09-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/perl-mode.el (perl-font-lock-syntactic-keywords):
	Fix regexp for when "s///" is at the beginning of line.

2005-09-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-poly.el (math-expand-term): Multiply out any powers
	when in matrix mode.

2005-09-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* buff-menu.el (Buffer-menu-make-sort-button): Add docstrings, use
	non-anonymous functions.

2005-09-06  Chong Yidong  <cyd@stupidchicken.com>

	* buff-menu.el (Buffer-menu-make-sort-button): Allow mouse-1 clicks
	when using a header line.  Otherwise, use mouse-1-click-follows-link.

	* mouse.el (mouse-drag-header-line): Do nothing if the header-line
	can't be moved; don't signal an error.

2005-09-05  Chong Yidong  <cyd@stupidchicken.com>

	* cus-theme.el (custom-theme-write-faces): Save the current face
	spec, not the defface spec.

	* custom.el (custom-known-themes): Clarify meaning of "standard".
	(custom-push-theme): Save old values in the standard theme.
	(disable-theme): Correct typo.
	(custom-face-theme-value): Deleted unused function.
	(custom-theme-recalc-face): Rewritten to treat enable/disable properly.

2005-09-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/compile.el (compilation-goto-locus): Take into account
	iconified frames when determining whether the buffer is
	already visible.
	Don't reset window height if the window already existed.

2005-09-04  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (load-theme): Rename from require-theme.
	Add interactive spec.
	(enable-theme): Rename from custom-enable-theme.
	Add interactive spec.
	(disable-theme): Rename from custom-disable-theme.
	Add interactive spec.
	(custom-make-theme-feature): Doc fix.
	(custom-theme-directory): Doc fix.
	(provide-theme): Call enable-theme.

2005-09-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* obsolete/lazy-lock.el (lazy-lock-mode):
	* obsolete/fast-lock.el (fast-lock-mode): Don't try to turn on
	font-lock-mode if it's off.  Print a warning instead.

	* progmodes/compile.el (compilation-start): Ignore errors if the
	process died before we get to send-eof.

	* textmodes/tex-mode.el (tex-send-tex-command, tex-bibtex-file):
	Undo last change.  Enclosing the result in quotes broke things on Unix
	since tex-send-command passes it through shell-quote-argument.
	(tex-send-command): Pass `file' through convert-standard-filename
	when possible.
	(tex-uptodate-p): Handle the case where TeX hasn't put additional
	info in a transcript.

2005-09-02  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add eval-when-compile to
	fix compilation warning.  Reorder the key definitions to group
	together keys emitted by the current version of xterm.

	* progmodes/vhdl-mode.el (vhdl-highlight-faces)
	(vhdl-speedbar-entity-face, vhdl-speedbar-entity-selected-face):
	Reorder predicates to correct min-color usage.

2005-09-01  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Inhibit read-only when encoding.
	Kill local variables when longlines-mode is turned off.

2005-09-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-cmds.el (set-locale-environment): Soothe compiler.

	* obsolete/lazy-lock.el (lazy-lock) <defgroup>: Move from font-lock.el.

	* obsolete/fast-lock.el (fast-lock) <defgroup>: Move from font-lock.el.

	* font-lock.el (fast-lock, lazy-lock) <defgroup>: Remove.
	(font-lock-lines-before): Change default to being inactive.
	(font-lock-default-fontify-region): Obey font-lock-lines-before.
	(font-lock-after-change-function): Don't handle f-l-lines-before here.

2005-08-31  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-make-auto-save-file-name):
	Deactivate temporarily advice if active (not needed for Emacs 22,
	but for backwards compatibility).
	(tramp-exists-file-name-handler): Rewrite.  First implementation
	was too simple.
	(tramp-advice-make-auto-save-file-name):
	Call `tramp-handle-make-auto-save-file-name' (again, just for
	backwards compatibility).

2005-08-31  Reto Zimmermann  <reto@gnu.org>

	* progmodes/vhdl-mode.el
	(vhdl-update-sensitivity-list): Handle multi-dimensional array access.
	(vhdl-end-p): Fix indentation bug "else" after "-- when".
	(vhdl-set-default-project): New function (easier setting of default).
	(vhdl-port-copy): Handle extended identifiers for generics.
	(vhdl-compiler-alist): Better description for error message regexp.
	(vhdl-make): Query for target, use previous as default.
	(vhdl-port-copy): Fix port copy for port names starting with "signal".
	(vhdl-font-lock-keywords-2): Fix fontification for record
	el. assign.
	(vhdl-speedbar-make-subpack-line): Add package body link.
	(vhdl-generate-makefile-1): Not include itself as dependency.
	(vhdl-font-lock-init): Highlight c-preprocessor directives.
	(vhdl-*ward-syntactic-ws): Skip c-preprocessor directives.
	(vhdl-get-syntactic-context): Handle c-preprocessor directives.
	(vhdl-update-sensitivity-list): Start scan at opening parenthesis.
	(vhdl-fixup-whitespace-region): Fix jumping point (infinite loop).
	(vhdl-update-sensitivity-list-buffer): Add string argument for `error'.
	(vhdl-import-project): Add string argument for `error'.
	(vhdl-compose-configuration)
	(vhdl-compose-configuration-architecture): Add configuration
	declaration generation.
	(vhdl-scan-directory-contents): Scan for block/generate hierarchy.
	(vhdl-trailer-re): Add "record" keyword (better indentation).
	(vhdl-fixup-whitespace-region): "[^ \t\"-]+" instead of
	"[^ \t-\"]+".
	(vhdl-font-lock-keywords-2): Not highlight formal parameter after `|'.
	(vhdl-testbench-entity-file-name)
	(vhdl-testbench-architecture-file-name): Allow separate
	customization of testbench file names.
	(vhdl-beginning-of-block): Handle optional subprogram parameter list.
	(vhdl-get-visible-signals): Allow newline within alias declaration.
	(vhdl-update-sensitivity-list): Signal read only on certain attributes.
	(vhdl-fixup-whitespace-region): Fix bug with strings (double quotes).
	(member-ignore-case): Alias for missing function in XEmacs.
	(vhdl-compiler-alist): Add unit-to-file name mapping for Cadence NC.
	(vhdl-update-sensitivity-list): Ignore case on read signals.
	(vhdl-replace-string): Adjust case only for file names.
	(vhdl-update-sensitivity-list): Fix search for read signals.
	(vhdl-update-sensitivity-list): Exclude formal parameters.
	(vhdl-get-visible-signals): Include aliases of signals.
	(vhdl-get-visible-signals): Fix signal name searching.
	(vhdl-port-flatten, vhdl-port-reverse-direction): Better message.
	(vhdl-fixup-whitespace-region): Fix for character
	literals (e.g. `:').

2005-08-31  Juanma Barranquero  <lekktu@gmail.com>

	* ansi-color.el (comint-last-output-start):
	* bs.el (font-lock-verbose):
	* diff-mode.el (add-log-buffer-file-name-function):
	* dired-x.el (vm-folder-directory):
	* faces.el (help-xref-stack-item):
	* files.el (font-lock-keywords):
	* find-lisp.el (dired-buffers, dired-subdir-alist):
	* ido.el (cua-inhibit-cua-keys):
	* log-view.el (cvs-minor-wrap-function):
	* outline.el (font-lock-warning-face):
	* simple.el (compilation-current-error):
	* speedbar.el (ange-ftp-path-format, efs-path-regexp)
	(font-lock-keywords, x-pointer-hand2, x-pointer-top-left-arrow):
	* tooltip.el (comint-prompt-regexp):
	* w32-fns.el (explicit-shell-file-name):
	* term/mac-win.el (mac-charset-info-alist)
	(mac-services-selection, mac-system-script-code):
	* term/tty-colors.el (msdos-color-values):
	* term/w32-win.el (xlfd-regexp-registry-subnum):
	* term/x-win.el (x-keysym-table, x-selection-timeout)
	(x-session-id, x-session-previous-id):
	* textmodes/ispell.el (mail-yank-prefix):
	* textmodes/makeinfo.el (tex-end-of-header, tex-start-of-header):
	* textmodes/org.el (calc-embedded-close-formula)
	(calc-embedded-open-formula)
	(font-lock-unfontify-region-function):
	* textmodes/reftex-global.el (isearch-next-buffer-function)
	(TeX-master):
	* textmodes/reftex.el (font-lock-keywords):
	* textmodes/tex-mode.el (font-lock-comment-face)
	(font-lock-doc-face):
	* textmodes/texinfo.el (outline-heading-alist):
	Add defvars.

	* textmodes/artist.el (x-pointer-crosshair): Add defvar.
	(artist-spray-chars, artist-mode-init, artist-replace-string)
	(artist-select-erase-char, artist-vap-find-endpoints-horiz)
	(artist-vap-find-endpoints-vert, artist-vap-find-endpoints-swne)
	(artist-vap-find-endpoints-nwse): "?\ " -> "?\s".

	* textmodes/conf-mode.el (outline-heading-end-regexp): Add defvar.
	(conf-align-assignments): "?\ " -> "?\s".

	* textmodes/reftex-index.el (TeX-master): Add defvar.
	(reftex-index-phrases-marker): Move up defvar.

	* textmodes/reftex-toc.el (zmacs-regions): Add defvar.
	(reftex-toc-include-labels-indicator)
	(reftex-toc-include-index-indicator)
	(reftex-toc-max-level-indicator): Move up declarations.

	* net/tramp.el (tramp-handle-make-auto-save-file-name): Pass list
	of args to `tramp-run-real-handler', even if it's empty in this case.

2005-08-31  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* dired.el (dired-move-to-filename-regexp): Add date format for
	Mac OS X 10.3 in East Asian locales.

2005-08-31  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (make-auto-save-file-name): Add file name handler call
	if applicable.

	* net/tramp.el (tramp-file-name-handler-alist)
	(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
	(tramp-handle-make-auto-save-file-name): Rename from
	`tramp-make-auto-save-file-name'.
	(tramp-exists-file-name-handler): New defun.
	(tramp-advice-make-auto-save-file-name): Make defadvice only when
	`make-auto-save-file-name' is not a magic file name operation.

2005-08-30  Richard M. Stallman  <rms@gnu.org>

	* files.el (risky-local-variable-p):
	Match `-predicates' and `-commands'.

	* cus-edit.el (custom-buffer-sort-alphabetically): Default to t.
	(custom-save-all): Visit the file if necessary;
	kill the buffer if we created it.
	(custom-save-delete): Don't visit file or kill buffer here.

2005-08-30  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-special-keyword): New face.
	(org-table-copy-down, org-table-eval-formula)
	(org-table-recalculate, org-init-section-numbers):
	Use `string-to-number' instead of `string-to-int'.
	(org-get-location): Use `insert-buffer-substring' instead of
	`insert-buffer'.
	(org-modify-diary-entry-string): New function.
	(org-get-entries-from-diary): Set the hook for `add-to-diary-list'.
	(org-disable-agenda-to-diary): Rename from `org-disable-diary'.
	(org-toggle-fixed-width-section): Use QUOTE keyword if there is no
	active region.
	(org-export-as-html): Handle QUOTE keyword.
	(org-quote-string): New option.
	(org-bookmark-jump-unhide): New function, used for
	`bookmark-after-jump-hook'.
	(org-diary-default-entry): Apply only when not called through
	`org-agenda'.

2005-08-30  Juanma Barranquero  <lekktu@gmail.com>

	* net/eudc.el (mode-popup-menu):
	* play/handwrite.el (ps-printer-name, ps-lpr-command):
	* progmodes/ada-mode.el (compile-auto-highlight)
	(skeleton-further-elements):
	* progmodes/autoconf.el (font-lock-syntactic-keywords):
	* progmodes/cmacexp.el (msdos-shells):
	* progmodes/compile.el (font-lock-extra-managed-props)
	(font-lock-keywords, font-lock-maximum-size)
	(font-lock-support-mode):
	* progmodes/grep.el (font-lock-lines-before):
	* progmodes/idlw-complete-structtag.el (idlwave-completion-help-info):
	* progmodes/mixal-mode.el (compile-command):
	* progmodes/perl-mode.el (font-lock-comment-face)
	(font-lock-doc-face, font-lock-string-face):
	* progmodes/prolog.el (comint-prompt-regexp):
	* progmodes/sh-script.el (font-lock-comment-face)
	(font-lock-set-defaults, font-lock-string-face):
	* progmodes/sql.el (font-lock-keyword-face)
	(font-lock-set-defaults, font-lock-string-face):
	* progmodes/vhdl-mode.el (compilation-file-regexp-alist)
	(itimer-version, lazy-lock-defer-contextually)
	(lazy-lock-defer-on-scrolling, lazy-lock-defer-on-the-fly):
	Add defvars.

	* progmodes/cperl-mode.el (cperl-electric-lbrace)
	(cperl-electric-keyword, cperl-electric-pod)
	(cperl-electric-backspace, cperl-forward-re)
	(cperl-fix-line-spacing, cperl-fill-paragraph): "?\ " -> "?\s".
	(vc-rcs-header, vc-sccs-header): Add defvars.

	* progmodes/fortran.el (fortran-indent-to-column): "?\ " -> "?\s".
	(font-lock-syntactic-keywords, gud-find-expr-function):
	Add defvars.

	* progmodes/gdb-ui.el (tool-bar-map): Add defvar.
	(gdb-frame-parameters): Declare before use.

	* progmodes/gud.el (gdb-active-process, gdb-define-alist)
	(gdb-macro-info, gdb-server-prefix, gdb-show-changed-values)
	(gdb-var-changed, gdb-var-list, tool-bar-map): Add defvars.
	(gud-expr-compound-sep, gud-expr-compound): "?\ " -> "?\s".

	* progmodes/idlw-help.el (browse-url-generic-args): Add defvar.
	(idlwave-help-with-source): Use `insert-buffer-substring', not
	`insert-buffer'.

2005-08-29  Juri Linkov  <juri@jurta.org>

	* outline.el (hide-entry, hide-leaves, outline-toggle-children):
	Put outline-back-to-heading function call inside save-excursion.

2005-08-29  Juanma Barranquero  <lekktu@gmail.com>

	* man.el (Man-init-defvars, Man-translate-references)
	(Man-support-local-filenames, Man-highlight-references):
	* progmodes/sql.el (sql-interactive-mode):
	* shell.el (shell-mode, shell-resync-dirs): Fix typos in docstrings.

	* emacs-lisp/checkdoc.el (compilation-error-regexp-alist)
	(compilation-mode-font-lock-keywords): Add defvars.
	(checkdoc-interactive-loop): "?\ " -> "?\s".

	* emacs-lisp/lisp-mode.el (font-lock-comment-face)
	(font-lock-doc-face, font-lock-string-face)
	(font-lock-keywords-case-fold-search): Add defvars.
	(emacs-lisp-mode-syntax-table): "?\ " -> "?\s".

	* obsolete/sun-fns.el (mouse-select-or-drag-move-point):
	Don't pass X and Y (they are ignored anyway).
	(mouse-set-mark, mouse-select-window, mouse-delete-other-windows)
	(mouse-delete-window): Make arguments optional.

	* obsolete/rnews.el (news-add-news-group): Don't use `end-of-line'.
	(caesar-translate-table, minor-modes, news-buffer-save)
	(news-group-name, news-minor-modes): Add defvars.

	* emacs-lisp/lselect.el (mouse-highlight-priority)
	(x-lost-selection-functions, zmacs-regions):
	* emacs-lisp/pp.el (font-lock-verbose):
	* emacs-lisp/syntax.el (font-lock-beginning-of-syntax-function):
	* emacs-lisp/tcover-ses.el (ses-initial-global-parameters)
	(ses-mode-map):
	* emacs-lisp/tcover-unsafep.el (safe-functions):
	* international/mule-cmds.el (mac-system-coding-system)
	(mac-system-locale):
	* language/ethio-util.el (rmail-current-message)
	(rmail-message-vector):
	* language/thai-util.el (thai-auto-composition-mode):
	* mail/metamail.el (rmail-current-message, rmail-message-vector):
	* mail/mspools.el (rmail-inbox-list, vm-crash-box)
	(vm-folder-directory, vm-init-file, vm-init-file-loaded)
	(vm-primary-inbox, vm-spool-files):
	* mail/rmail.el (deleted-head, font-lock-fontified)
	(mail-abbrev-syntax-table, mail-abbrevs, messages-head)
	(rmail-use-spam-filter, rsf-beep, rsf-sleep-after-message)
	(total-messages):
	* mail/rmail-spam-filter.el (bbdb/mail_auto_create_p)
	(rmail-summary-mode-map):
	* mail/rmailkwd.el (rmail-buffer, rmail-current-message)
	(rmail-last-label, rmail-last-multi-labels)
	(rmail-summary-vector, rmail-total-messages):
	* mail/rmailmsc.el (rmail-current-message, rmail-inbox-list):
	* mail/rmailsum.el (msgnum):
	* mail/uce.el (gnus-original-article-buffer, mail-reply-buffer)
	(rmail-current-message):
	* obsolete/fast-lock.el (font-lock-face-list):
	* obsolete/rnewspost.el (mail-reply-buffer):
	* obsolete/scribe.el (compile-command):
	* obsolete/x-menu.el (x-process-mouse-hook): Add defvars.

2005-08-28  John Paul Wallington  <jpw@gnu.org>

	* ibuf-ext.el (ibuffer-auto-update-changed):
	Use `frame-or-buffer-changed-p' to check whether we need to update.
	(ibuffer-auto-mode): Don't advise `get-buffer-create' and
	`kill-buffer'.  Initialize `ibuffer-auto-buffers-changed'
	as a `frame-or-buffer-changed-p' state vector instead.

2005-08-27  Romain Francoise  <romain@orebokech.com>

	* textmodes/makeinfo.el (makeinfo-compile):
	Use `compilation-start'.  Set `next-error-function' according to
	`disable-errors'.
	(makeinfo-next-error): New function.
	(makeinfo-region): Adjust to new `makeinfo-compile' prototype.
	(makeinfo-buffer): Likewise.

	* progmodes/compile.el (compilation-start): Add autoload cookie.

	* progmodes/antlr-mode.el: Don't autoload `compilation-start'.
	* textmodes/sgml-mode.el: Likewise.
	* progmodes/python.el: Likewise.

2005-08-27  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (blink-matching-paren-distance): Document the meaning
	of nil value, and allow to customize to nil.

	* eshell/esh-ext.el (eshell-windows-shell-file): Look for
	command.com, not command.exe.

2005-08-26  John Wiegley  <johnw@newartisans.com>

	* eshell/esh-cmd.el (eshell-rewrite-named-command): Change the
	code around a bit so that an extraneous nil argument is not added
	to a command when no args are given.

	* eshell/esh-arg.el (eshell-parse-double-quote): If a
	double-quoted argument resolves to nil, return it as an empty
	string rather than as nil.  This made it impossible to pass "" to
	a shell script as a null string argument.

2005-08-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* outline.el (outline-invent-heading): New fun.
	(outline-promote, outline-demote): Use it.
	(outline-move-subtree-down): Remove unused vars `re' and `txt'.
	(outline-end-of-subtree): Remove unused var `opoint'.

2005-08-26  David Reitter  <david.reitter@gmail.com>

	* menu-bar.el (truncate-lines, write-file, print-buffer)
	(ps-print-buffer-faces, ps-print-buffer, split-window):
	Disable menu items when the frame they refer to is invisible, or when
	they refer to a buffer and the minibuffer is selected.

2005-08-26  Pavel Kobiakov  <pk_at_work@yahoo.com>

	* progmodes/flymake.el (flymake-highlight-err-lines):
	Use save-excursion around flymake-highlight-line to preserve point.

2005-08-26  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/octave-mod.el: Change Author and Maintainer address.
	(octave-maintainer-address): Change Kurt's email address.
	* progmodes/octave-inf.el: Change Author and Maintainer address.
	* progmodes/octave-hlp.el: Change Author and Maintainer address.

2005-08-26  Kim F. Storm  <storm@cua.dk>

	* subr.el (version-list-<, version-list-<=, version-list-=):
	Rename from integer-list-*.
	(version-list-not-zero): Likewise.  Fix while loop.
	(version=): Use version-list-= instead of string-equal.

2005-08-26  Richard M. Stallman  <rms@gnu.org>

	* outline.el (outline-promote): Try shortening the heading.
	As last resort, read the heading to use.
	(outline-demote): As last resort, read the heading to use.

2005-08-26  Romain Francoise  <romain@orebokech.com>

	* progmodes/compile.el (compilation-start): Doc fix.

	* progmodes/antlr-mode.el (antlr-default): Fix defface form.
	(antlr-font-lock-additional-keywords): Fix reference to
	`antlr-font-lock-literal-regexp' erroneously changed during the
	mass face rename.
	(antlr-run-tool): Use `compilation-start'.

	* textmodes/sgml-mode.el (sgml-validate): Use `compilation-start'
	instead of the obsolete `compile-internal'.

2005-08-26  Juanma Barranquero  <lekktu@gmail.com>

	* calendar/cal-bahai.el (date, displayed-month, displayed-year)
	(number, original-date):
	* calendar/cal-china.el (date):
	* calendar/cal-coptic.el (date):
	* calendar/cal-french.el (date):
	* calendar/cal-hebrew.el (date, entry, number, original-date):
	* calendar/cal-islam.el (date, number, original-date):
	* calendar/cal-iso.el (date):
	* calendar/cal-julian.el (date):
	* calendar/cal-mayan.el (date):
	* calendar/cal-menu.el (date, event):
	* calendar/cal-persia.el (date):
	* calendar/lunar.el (date):
	* calendar/solar.el (date): Add defvars.

	* emerge.el:
	* ibuffer.el:
	* info-xref.el:
	* obsolete/bg-mouse.el:
	* obsolete/sun-curs.el:
	* obsolete/swedish.el: Move the `defvar's to the top level.

	* smerge-mode.el (smerge-refined-change): Add :group.

2005-08-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-remove-props): Make the args non-optional.
	(smerge-keep-n): Remove props.
	(smerge-keep-base, smerge-keep-other, smerge-keep-mine)
	(smerge-keep-current, smerge-kill-current): Don't remove props anymore
	now that it's done in smerge-keep-n.
	(smerge-refined-change): New face.
	(smerge-refine-chopup-region, smerge-refine-highlight-change)
	(smerge-refine): New funs.
	(smerge-basic-map): Bind smerge-refine.

2005-08-25  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep, grep-mode): Make buffer-local variables
	compilation-process-setup-function and compilation-disable-input
	in grep-mode instead of let-bindings in grep.

	* menu-bar.el (menu-bar-options-menu, menu-bar-options-save):
	Delete "Automatic File De/compression" (auto-compression-mode).

2005-08-25  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/bg-mouse.el: Move to obsolete/ from term/.
	Silence warning about non-existent variable.

2005-08-25  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-describe-menu): Delete "What's New".
	Rename "Describe Key" to "Describe Key or Mouse Operation".

	* mail/mailalias.el (build-mail-aliases): Delete comments
	from the contents before processing them.

	* isearch.el (isearch-edit-string): Erase the Search prompt
	if user enters an empty string and there is no default.

	* comint.el (comint-file-name-prefix): Add autoload.

2005-08-25  Joe Corneli  <jcorneli@math.utexas.edu>

	* subr.el (play-sound): Rearrange to avoid warning.

2005-08-25  Carsten Dominik  <dominik@science.uva.nl>

	* calendar/diary-lib.el (diary-modify-entry-list-string-function):
	New hook.
	(add-to-diary-list): Call `diary-modify-entry-list-string-function'.

2005-08-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Simplify.

	* custom.el (custom-theme-set-variables): Sort minor modes last.

2005-08-24  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* subr.el (version-separator, version-regexp-alist): New vars used by
	version comparison funs.
	(integer-list-<, integer-list-=, integer-list-<=)
	(integer-list-not-zero): New funs for integer list comparison.
	(version-to-list, version=, version<, version<=): New funs for version
	comparison.

2005-08-24  Juanma Barranquero  <lekktu@gmail.com>

	* emerge.el (merge-begin, merge-end, template, A-begin, A-end)
	(B-begin, B-end, diff, diff-vector, valid-diff): Defvar at compile
	time to silence the byte-compiler.

	* ibuffer.el (ibuffer-compile-make-eliding-form)
	(ibuffer-check-formats): Use `with-no-warnings' to hide references
	to `ibuffer-elide-long-columns' (which is defined on ibuffer.el,
	so it's silly to get warnings for it).
	(ibuffer-auto-mode, ibuffer-cached-filter-formats)
	(ibuffer-compiled-filter-formats, ibuffer-filter-format-alist)
	(ibuffer-filter-group-kill-ring, ibuffer-filter-groups)
	(ibuffer-filtering-qualifiers, ibuffer-hidden-filter-groups)
	(ibuffer-inline-columns, ibuffer-show-empty-filter-groups)
	(ibuffer-tmp-hide-regexps, ibuffer-tmp-show-regexps):
	Defvar at compile time.
	(ibuffer-compiled-formats, ibuffer-cached-eliding-string)
	(ibuffer-cached-formats, ibuffer-cached-elide-long-columns):
	Declare them before use.

	* info-xref.el (info-xref-xfile-alist, info-xref-filename-heading)
	(info-xref-good, info-xref-bad): Defvar at compile time.

	* obsolete/mlsupport.el (filter-region, execute-monitor-command):
	Use `let*' instead of `let'.

	* obsolete/sun-curs.el (icon-edit, *mouse-window*, *mouse-x*)
	(*mouse-y*, menu, char): Defvar at compile time.
	(sc::menu): Declare it before use.
	(sc::pack-one-line): Use `let', not `let*'.

	* obsolete/swedish.el (news-inews-hook, news-group-hook-alist)
	(mail-send-hook): Defvar at compile time.

	* term/bg-mouse.el (bg-mouse-x, bg-mouse-y, bg-cursor-window):
	Defvar at compile time.

	* term/sun-mouse.el (current-global-mousemap)
	(current-local-mousemap): Declare them before use.

2005-08-24  Carsten Dominik  <dominik@science.uva.nl>

	* bookmark.el (bookmark-after-jump-hook): New hook.
	(bookmark-jump): Run `bookmark-after-jump-hook'.

2005-08-23  Juri Linkov  <juri@jurta.org>

	* faces.el (minibuffer-prompt): Doc fix.

2005-08-23  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/xscheme.el: Trivial changes to silence warnings.
	(xscheme-previous-mode, xscheme-previous-process-state):
	Add defvars.
	(xscheme-last-input-end, xscheme-process-command-line)
	(xscheme-process-name, xscheme-buffer-name)
	(xscheme-expressions-ring-max, xscheme-expressions-ring)
	(xscheme-expressions-ring-yank-pointer, xscheme-running-p)
	(xscheme-control-g-synchronization-p)
	(xscheme-control-g-disabled-p, xscheme-string-receiver)
	(default-xscheme-runlight, xscheme-runlight)
	(xscheme-runlight-string, xscheme-process-filter-state)
	(xscheme-allow-output-p, xscheme-prompt, xscheme-mode-string):
	Move to beginning of file.
	(scheme-interaction-mode-commands-alist)
	(scheme-interaction-mode-map, scheme-debugger-mode-map):
	Declare them before use.  Note: the initialization code for the
	variables has not been moved because it uses functions that reference
	the variables.
	(xscheme-control-g-message-string, xscheme-process-filter-alist)
	(xscheme-prompt-for-expression-map): Declare them before use.
	(scheme-debugger-mode-commands): "?\ " -> "?\s".

2005-08-23  Ed Swarthout  <ed.swarthout@gmail.com>  (tiny change)

	* hexl.el (hexl-print-current-point-info): Fix simple spelling error.

2005-08-22  Juri Linkov  <juri@jurta.org>

	* faces.el (set-face-underline): Delete this duplicate function
	and make an obsolete alias to set-face-underline-p.
	(set-face-underline-p): Use docstring of set-face-underline.
	(describe-face): Create hyperlink to parent face.

	* info.el (Info-insert-dir): Use save-excursion around
	insert-buffer-substring.
	(Info-isearch-search): Use LITERAL arg of replace-regexp-in-string.
	(Info-escape-percent): Delete function.
	(Info-fontify-node): Replace Info-escape-percent by
	replace-regexp-in-string with REP arg set to lambda that
	duplicates `%' and preserves text properties.

	* progmodes/compile.el (compilation-disable-input): Doc fix.
	(define-compilation-mode): Doc fix and refill.
	(kill-compilation): Use `mode-name' in the error message.
	(compilation-find-file): Use `compilation-error' in the
	read-file-name's prompt.

2005-08-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-basic-map): Bind smerge-combine-with-next.
	(smerge-auto-leave): Make undo re-enable the mode.
	(debug-ignored-errors): Add the user-error of impossible resolution.
	(smerge-resolve): Move things around a bit, in preparation for later.
	(smerge-diff): Don't fail if the buffer has no associated file.
	(ediff-ancestor-buffer, ediff-quit-hook): Quieten byte-compiler.
	(smerge-conflict-overlay): New function.
	(smerge-match-conflict): Don't add text properties here.
	(smerge-find-conflict): Instead, add an overlay here.
	Also check for the case where we're inside a conflict already, so as to
	obviate the need for font-lock-multiline, which is unbearably slow with
	large conflicts and complex font-lock patterns.
	(smerge-remove-props): Remove overlay rather than text-properties.
	(smerge-mode): Don't set font-lock-multiline.
	Remove overlays when turned off.

2005-08-21  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-ignore-item-p): Use save-match-data.
	Bind case-fold-search to ido-case-fold locally.

2005-08-20  Richard M. Stallman  <rms@gnu.org>

	* files.el (normal-mode): If font lock is on, turn it off and on.

	* subr.el (replace-regexp-in-string): Doc fix.

	* startup.el (command-line-1): Don't suppress startup screen
	due to existing processes.

	* progmodes/grep.el (grep): Bind compilation-disable-input to t.

	* progmodes/compile.el (compilation-disable-input): Default to nil.

2005-08-20  Kevin Rodgers  <ihs_4664@yahoo.com>  (tiny change)

	* progmodes/compile.el (compilation-disable-input): New defcustom.
	(compilation-start): If compilation-disable-input is non-nil, send
	EOF to the compilation process.

2005-08-20  Eli Zaretskii  <eliz@gnu.org>

	* textmodes/tex-mode.el (tex-bibtex-file, tex-send-tex-command):
	Run the argument of tex-shell-cd-command through
	convert-standard-filename, to get the correct style of slashes on
	Windows, and enclose the result in quotes, in case the file name
	includes whitespace or other special characters.

2005-08-19  Andreas Schwab  <schwab@suse.de>

	* progmodes/gud.el (gud-kill-buffer-hook): Don't kill unrelated
	process.

2005-08-18  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (minibuffer-prompt-properties): Correct typo.

2005-08-18  Kim F. Storm  <storm@cua.dk>

	* scroll-lock.el: Fix errors due to incorrect line wrapping.

2005-08-18  Richard M. Stallman  <rms@gnu.org>

	* scroll-lock.el: New file.

2005-08-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* dired.el (dired-move-to-end-of-filename):
	Handle fifo as rendered by "ls -lF": Don't include trailing "|".

2005-08-18  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Fix defcustom :set function to disable
	rather than toggle mode when custom value is nil.
	(ido-everywhere): Fix defun doc string.

2005-08-17  Richard M. Stallman  <rms@gnu.org>

	* cus-start.el (minibuffer-prompt-properties): Use "Don't Enter"
	as tag instead of "Inviolable".

2005-08-17  Kim F. Storm  <storm@cua.dk>

	* windmove.el (windmove-coordinates-of-position): Remove.
	(windmove-coordinates-of-window-position): Remove.
	(windmove-reference-loc): Use posn-at-point instead.

	* subr.el (insert-for-yank-1): Doc fix.

	* ido.el (ido-enter-matching-directory): Rename from
	ido-enter-single-matching-directory.  Change `slash' choice to
	`only'.  Add `first' choice.
	(ido-exhibit): Adapt to above changes.

2005-08-16  Luc Teirlinck  <teirllm@auburn.edu>

	* Makefile.in: Expand comment about building loaddefs.el.

2005-08-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (toggle-gdb-use-inferior-io-buffer):
	Comment use of defadvice.

	* progmodes/gud.el (gud-jump): Rework for gdb-ui.

2005-08-15  Dan Nicolaescu  <dann@ics.uci.edu>

	* buff-menu.el, compare-w.el, emacs-lisp/testcover.el,
	* play/gomoku.el, play/mpuz.el, progmodes/flymake.el,
	* progmodes/gdb-ui.el, progmodes/idlw-help.el,
	* progmodes/idlw-shell.el, progmodes/ld-script.el,
	* progmodes/which-func.el, ruler-mode.el, strokes.el,
	* textmodes/sgml-mode.el, textmodes/table.el: Do not use face-alias
	for backward compatibility for faces that did not appear in the
	previous Emacs release.

	* simple.el (next-error-follow-minor-mode): Fix init value and lighter.

2005-08-15  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-delete-region): Return t if
	deleted region was non-empty.
	(cua-replace-region): Inhibit overwrite-mode for
	self-insert-command if replaced region was non-empty.
	(cua--explicit-region-start, cua--status-string): Make them
	buffer-local at top-level...
	(cua-mode): ...rather than when mode is enabled.

2005-08-15  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-emacs-21):
	Set t for Emacs 21, 22, and so on.

2005-08-15  David Ponce  <david@dponce.com>

	* tree-widget.el: Update Commentary header.
	(tree-widget-theme): Doc fix.
	(tree-widget-space-width): New option.
	(tree-widget-image-properties): Look up in the default theme too.
	(tree-widget--cursors): Only for images with arrow pointer shape.
	(tree-widget-lookup-image): Pointer shape is hand by default.
	(tree-widget-icon): Rename generic icon widget from
	`tree-widget-control'.
	(tree-widget-*-icon): Rename from `tree-widget-*-control' and
	derive from `tree-widget-icon'.
	(tree-widget-handle): Improve default look and feel of the text
	representation.
	(tree-widget): Rename :*-control properties to :*-icon properties.
	Add :action and :help-echo properties.
	(tree-widget-after-toggle-functions): Move.
	(tree-widget-close-node, tree-widget-open-node): Remove.
	(tree-widget-before-create-icon-functions): New hook.
	(tree-widget-value-create): Update to allow customization of icons
	and nodes at run-time via that new hook.
	(tree-widget-icon-create, tree-widget-leaf-node-icon-p)
	(tree-widget-icon-action, tree-widget-icon-help-echo)
	(tree-widget-action, tree-widget-help-echo): New functions.

2005-08-15  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-buffer-internal): Use with-no-warnings.
	(ido-make-merged-file-list): Use while-no-input.

2005-08-15  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-mark-duplications-flag): Doc fix.
	(flyspell-large-region): Fix doc and custom type.

2005-08-14  Richard M. Stallman  <rms@gnu.org>

	* files.el (interpreter-mode-alist): Doc fix.

	* mail/rmail.el (rmail-nonignored-headers): New variable.
	(rmail-clear-headers): Use it.
	(rmail-reply): Better handling of mail-followup-to header.

	* progmodes/sh-script.el (sh-font-lock-keywords-var):
	Rename variable from sh-font-lock-keywords.  In the `shell' entry,
	don't try to refer to executable-font-lock-keywords.
	(sh-font-lock-keywords-var-1): Rename from sh-font-lock-keywords-1.
	(sh-font-lock-keywords-var-2): Rename from sh-font-lock-keywords-2.
	(sh-font-lock-keywords): Append executable-font-lock-keywords here.
	(sh-mode): Set comment-start-skip, local-abbrev-table,
	imenu-case-fold-search.
	(sh-set-shell): Don't set them here.
	(sh-feature): Simplify.  Get rid of the eval-a-variable feature.
	Don't cache the results in the original alist; don't ever modify
	that alist.

	* textmodes/flyspell.el (flyspell-mode): Autoload a defvar.

	* textmodes/ispell.el (lookup-words): Cope with case where ARGS is
	empty.

2005-08-15  Andreas Schwab  <schwab@suse.de>

	* desktop.el: Put autoload cookie at risky-local-variable declarations.

	* dired.el, info.el, mail/rmail.el: Revert last change.

2005-08-14  Thien-Thi Nguyen  <ttn@gnu.org>

	* dired.el: Fix dependency bug: Wrap `desktop-buffer-mode-handlers'
	modification in `eval-after-load' form.
	* info.el: Likewise.
	* mail/rmail.el: Likewise.

2005-08-14  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Remove highlighting of "Compilation started".  Highlight only
	the word "finished" in "Compilation finished".  Add highlighting
	of "interrupt", "killed", "terminated" and the exit code.
	(compilation-start): Add newline after header.  Use exactly the
	same time stamp format as the finishing message.
	(compilation-mode-map): Add ellipsis to "Search Files (grep)".

	* progmodes/grep.el (grep-mode-map): Add ellipsis to "Another grep".
	(grep-mode-font-lock-keywords): Don't highlight "Grep started".
	Add highlighting of "interrupt", "killed", "terminated".

	* delsel.el (delete-selection-pre-hook): If overwrite-mode is
	enabled and the current command is self-insert-command, call it
	explicitly with overwrite-mode bound to nil, to not allow it
	to delete the character after the selected region.

2005-08-12  Matt Hodges  <MPHodges@member.fsf.org>

	* emacs-lisp/eldoc.el: Add move-beginning-of-line,
	move-end-of-line, end-of-line, and beginning-of-line to the list
	of commands after which the echo area is updated.

2005-08-12  Eli Zaretskii  <eliz@gnu.org>

	* cus-edit.el (custom-save-all, custom-save-delete):
	Bind recentf-exclude to exclude custom-file.

2005-08-12  Ehud Karni  <ehud@unix.mvs.co.il>

	* mail/rmailsum.el (rmail-summary-end-of-message): New command
	to go to the bottom of the mail message.  Added to
	`rmail-summary-mode-map' with key "/".
	(rmail-summary-show-message): New (internal) function for use by
	both `rmail-summary-beginning/end-of-message'.
	(rmail-summary-beginning-of-message): Change to use
	rmail-summary-show-message.

	* mail/rmail.el (rmail-end-of-message): New command to go to the
	end of the current message.  Added to `rmail-mode-map' with key "/".
	(rmail-beginning-of-message): Fix to work as documented.
	(rmail-mode): Change documentation.

	* progmodes/compile.el (compilation-start): Add the line
	"Compilation started" with compilation start time.
	(compilation-mode-font-lock-keywords): Add `started' to keywords.

2005-08-11  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-options-menu): Standardize capitalization
	of menu items.

2005-08-11  Richard M. Stallman  <rms@gnu.org>

	* simple.el (pop-global-mark): Reverse test of widen-automatically.

	* battery.el (battery-status-function): Don't use ignore-errors.

2005-08-11  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el (generic-font-lock-defaults): Declare with
	define-obsolete-variable-alias.

2005-08-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el: Use \\` and \\' instead of ^ and $ in regexps.
	(ange-ftp-send-cmd): Revert last change, and expand
	the comment explaining the problem.

2005-08-10  Luc Teirlinck  <teirllm@auburn.edu>

	* ldefs-boot.el: Update.

	* menu-bar.el (menu-bar-showhide-menu): Rename "Date, Time and Mail"
	item to "Time, Load and Mail".  Change help echo text.

	* time.el (display-time-use-mail-icon, display-time-format)
	(display-time-string-forms): Shorten first line of docstrings.

2005-08-10  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-buffer-mode-handlers):
	Make non-customizable.  Add autoload cookie.  Change initial value to
	nil; add elements in respective modules instead.  Fix doc string.
	(desktop-load-file): New function.
	(desktop-minor-mode-handlers): New autoloaded variable.
	(desktop-create-buffer): Call minor mode handlers.
	Use desktop-load-file to load major and minor mode modules prior to
	checking for a handler.
	(desktop-save): Don't add nil to desktop-minor-modes for minor
	modes with nil function in desktop-minor-mode-table.  Don't delete
	desktop file before rewriting it.
	(desktop-locals-to-save): Add autoload cookie.  Don't make
	automatically buffer-local.  Add variables column-number-mode,
	size-indication-mode, indent-tabs-mode,
	indicate-buffer-boundaries, indicate-empty-lines and
	show-trailing-whitespace.
	(desktop-clear): Allow desktop-clear-preserve-buffers to contain
	regexps.  Don't use desktop-clear-preserve-buffers-regexp.
	(desktop-clear-preserve-buffers-regexp): Delete.
	(desktop-clear-preserve-buffers): Update initial value and docstring.
	(desktop-save-buffer): Fix doc string.

	* hilit-chg.el: Add handler to desktop-minor-mode-handlers.
	(hilit-chg-desktop-restore): New function.
	(highlight-changes-mode): Add highlight-changes-mode to
	desktop-locals-to-save.

	* dired.el: Add handler to desktop-buffer-mode-handlers.
	(dired-restore-desktop-buffer): Remove autoload cookie.
	(dired-mode): Add autoload cookie.

	* info.el: Add handler to desktop-buffer-mode-handlers.
	(Info-restore-desktop-buffer): Remove autoload cookie.
	(Info-mode): Add autoload cookie.

	* mh-e/mh-e.el: Add handler to desktop-buffer-mode-handlers.
	(mh-restore-desktop-buffer): Remove autoload cookie.
	(mh-folder-mode): Add autoload cookie.

	* mail/rmail.el: Add handler to desktop-buffer-mode-handlers.
	(rmail-restore-desktop-buffer): Remove autoload cookie.

2005-08-11  Masatake YAMATO  <jet@gyve.org>

	* hexl.el (hexl-address-region):
	(hexl-ascii-region, hexl-font-lock-keywords):
	(hexl-highlight-line-range): Use the term "region"
	instead of "area" for consistency with the other symbols
	defined in hexl.el.

2005-08-09  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-options-save): Move `display-time-mode' to
	correct group: it is set with `menu-bar-make-mm-toggle' (pointed
	out by Juri Linkov).  Add `display-battery-mode'.

2005-08-09  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Remove `-text' from face variable names.
	(compilation-error-file-name, compilation-warning-file-name)
	(compilation-info-file-name): Delete faces.
	(compilation-line-number, compilation-column-number):
	Remove face underlining.
	(compilation-message-face): Set to `underline' value by default.
	(compilation-error-face, compilation-warning-face)
	(compilation-info-face): Remove `-file-name' from face names.
	(compilation-error-text-face, compilation-warning-text-face)
	(compilation-info-text-face): Delete face variables.
	(compilation-text-face): Delete function.

	* progmodes/grep.el (grep-regexp-alist): Use `.+?' instead of `[^:\n]+'.
	(grep-mode-font-lock-keywords): Use `.+?' instead of `[^\n-]+'.
	(grep-error-face): Set to `compilation-error' instead of
	`compilation-error-face' (which is redefined to `grep-hit-face' in
	grep buffers).
	(grep-mode-font-lock-keywords): Remove `-text' from face variable
	names.  Use `grep-error-face' instead of `compilation-error-text-face'.

	* dired-aux.el (dired-do-query-replace-regexp):
	Use `query-replace-read-args'.

	* replace.el (query-replace-read-from, query-replace-read-to)
	(query-replace-read-args): Rename arg `string' to `prompt'.

	* menu-bar.el (menu-bar-showhide-menu): Add `showhide-battery'.

2005-08-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* net/ange-ftp.el (ange-ftp-send-cmd): Make it work properly with
	uploading files.
	(ange-ftp-canonize-filename): Handle file names beginning with ~
	correctly.

2005-08-09  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/fill.el (canonically-space-region)
	(fill-context-prefix, fill-french-nobreak-p)
	(fill-delete-newlines, fill-comment-paragraph)
	(justify-current-line): "?\ " -> "?\s".

2005-08-09  Ben North  <ben@redfrontdoor.org>  (tiny change)

	* textmodes/fill.el (fill-nonuniform-paragraphs):
	Improve argument/docstring consistency.

2005-08-09  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-word): More fboundp checks.

	* files.el (find-file-noselect): Don't call set-buffer-major-mode.
	(find-file-noselect-1): Call it here, only if RAWFILE.
	(normal-mode): Always set some major mode.
	(save-some-buffers-action-alist): Change some explanation strings.
	(file-name-non-special): In the `quote' method, use unwind-protect.

2005-08-09  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-find-aspell-dictionaries): New command.
	(ispell-have-aspell-dictionaries): New variable.
	(ispell-aspell-data-dir, ispell-aspell-dict-dir): New variables.
	(ispell-get-aspell-config-value): New function.
	(ispell-aspell-find-dictionary): New function.
	(ispell-aspell-add-aliases): New function.
	(ispell-valid-dictionary-list): Call ispell-find-aspell-dictionaries if
	appropriate.  Don't look for ispell dictionaries if we use aspell.
	(ispell-menu-map): Don't build a submenu of dictionaries.

2005-08-09  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sql.el (sql-interactive-mode-map): Use fboundp.
	(sql-read-passwd): Use read-passwd.

	* progmodes/idlw-toolbar.el (idlwave-toolbar)
	(idlwave-toolbar-is-possible): Add defvars.

	* progmodes/idlw-shell.el (idlwave-xemacs-hack-mouse-track):
	Avoid warnings.

	* progmodes/idlw-rinfo.el (idlwave-system-variables-alist)
	(idlwave-system-class-info, idlwave-executive-commands-alist):
	Use defvar.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Add autoload.

	* mail/supercite.el (sc-ask, sc-no-blank-line-or-header):
	Avoid warnings.

	* mail/rmail.el (rmail-ignored-headers): Don't hide mime-version:
	and content-type: headers.

	* eshell/eshell.el (eshell): Avoid warnings about eshell-mode.

	* emacs-lisp/map-ynp.el (map-y-or-n-p): Reorder the options
	and rename some of them to be more self-explanatory.

	* calendar/calendar.el (calendar-mode-map): Bind < and > usefully.

	* startup.el (command-line-1): Implement -scriptload.

	* replace.el (occur-engine): Initial *Occur* output not undoable.

	* menu-bar.el (menu-bar-file-menu): Rename some menu items
	and improve help strings.

	* isearch.el (isearch-repeat): When changing direction,
	mark search successful.

	* ediff-init.el: Use (featurep 'xemacs).

	* comint.el (send-invisible): Identify buffer, if not selected.

	* align.el: Delete autoload for c-guess-basic-syntax.

2005-08-09  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/refbib.el (r2b-convert-record, r2b-convert-buffer):
	Improve argument/docstring consistency.  Doc fixes.
	(r2b-variables, r2bv-address, r2bv-annote, r2bv-author)
	(r2bv-booktitle, r2bv-date, r2bv-decade, r2bv-editor)
	(r2bv-entry-kind, r2bv-institution, r2bv-journal, r2bv-keywords)
	(r2bv-kn, r2bv-month, r2bv-note, r2bv-number, r2bv-ordering)
	(r2bv-organization, r2bv-pages, r2bv-primary-author)
	(r2bv-publisher, r2bv-school, r2bv-title, r2bv-title-first-word)
	(r2bv-tr, r2bv-type, r2bv-volume, r2bv-where, r2bv-year):
	Defvar at compile time.

2005-08-09  Juri Linkov  <juri@jurta.org>

	* info.el: Replace `info' with upper-case `Info' where appropriate.
	(info-title-1, info-title-2, info-title-3, info-title-4)
	(info-menu-header): Move up face definitions.
	(info-menu-star): Rename from `info-menu-5'.
	(Info-fontify-node): Replace `info-menu-5' with `info-menu-star'.
	(Info-fontify-visited-nodes): Fix docstring.
	(Info-hide-note-references): Fix docstring.
	(Info-up, Info-next-reference, Info-prev-reference): Put cursor on
	menu items in the same way as on cross-references.
	(info-apropos): Fix sorting order and formatting to be like in the
	stand-alone Info browser.  Display error messages for 1 sec.
	(Info-mode-map): Move down `c' key binding.  Bind `^' to `Info-up'.
	(Info-mode-menu): Remove item for `Info-search-case-sensitively'
	from the menu bar.
	(Info-insert-dir): Restore point after calling
	`insert-buffer-substring'.

2005-08-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lmenu.el (lucid-menubar-map, lucid-failing-menubar)
	(recompute-lucid-menubar): Add defvars.

	* mail/sendmail.el (mail-yank-original): Use with-no-warnings.

	* mail/reporter.el (reporter-dump-state): Use insert-buffer-substring.

	* net/net-utils.el (run-dig): Rename from `dig'.

	* play/gametree.el (gametree-mode): Use make-local-variable,
	not make-variable-buffer-local.

	* progmodes/ada-prj.el (ada-prj-display-page): Use with-no-warnings.

	* ansi-color.el (ansi-color-make-extent)
	(ansi-color-set-extent-face): Use fboundp, not functionp.

	* autorevert.el (auto-revert-tail-mode): Use make-local-variable,
	not make-variable-buffer-local.

	* bookmark.el (Info-current-file): Add defvar.
	(bookmark-jump-noselect): Use with-no-warnings.

	* completion.el (c-mode-map, fortran-mode-map): Add defvars.

	* ebuff-menu.el (Helper-return-blurb): Add defvar.

	* ffap.el (gnus-summary-buffer, gnus-article-buffer): Add defvars.

	* find-file.el (ada-procedure-start-regexp)
	(ada-package-start-regexp): Add defvars.

	* info.el (Info-insert-dir): Use insert-buffer-substring.

	* xml.el (xml-att-def-re): Add defvar.

	* icomplete.el (icomplete-exhibit): Adapt to new while-no-input
	calling convention.

	* subr.el (while-no-input): Return t if there is input.

2005-08-08  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Add `overflow-newline-into-fringe'.

2005-08-08  Juanma Barranquero  <lekktu@gmail.com>

	* cmuscheme.el (inferior-scheme-mode-hook, inferior-scheme-mode)
	(scheme-prev-l/c-dir/file): Fix typos in docstrings.

2005-08-08  Emilio C. Lopes  <eclig@gmx.net>

	* cmuscheme.el (scheme-start-file): Replace reference to
	`user-emacs-directory' by "~/.emacs.d/".

2005-08-08  Thien-Thi Nguyen  <ttn@gnu.org>

	* info.el (Info-dir-remove-duplicates): Avoid case folding
	in loop; instead, keep downcased strings for comparison.
	Suggested by Helmut Eller.

2005-08-07  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.50.

	* net/tramp.el: Remove defvar of `last-coding-system-used' in the
	XEmacs case; not necessary anymore.
	(tramp-user-regexp): Allow "@" as part of user name.
	(tramp-handle-set-visited-file-modtime)
	(tramp-handle-insert-file-contents)
	(tramp-handle-write-region): No special handling for
	`last-coding-system-used', because this is done in
	`tramp-accept-process-output' now.
	(tramp-accept-process-output): New defun.
	(tramp-process-one-action, tramp-process-one-multi-action)
	(tramp-wait-for-regexp, tramp-wait-for-output)
	(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
	Howells <dhowells@redhat.com>.
	(clear-visited-file-modtime): Defadvice removed.  The check for
	unset buffer's modtime does not need to be based on
	`tramp-buffer-file-attributes'.  Suggested by RMS.
	(tramp-message): Insert "\n" if not being at beginning of line.
	(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
	sequence with same logic.
	(tramp-completion-handle-expand-file-name): Discard call of
	`tramp-drop-volume-letter'.  It is not necessary, and there have
	been problems with (expand-file-name "~/.netrc" "/") in ange-ftp.
	Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
	(tramp-do-copy-or-rename-file-out-of-band): Transfer message
	should always be visible.
	(tramp-handle-insert-directory, tramp-setup-complete)
	(tramp-set-process-query-on-exit-flag)
	(tramp-append-tramp-buffers): Pacify byte-compiler.
	(tramp-bug): Delete non-existing variables from list.
	Apply `tramp-load-report-modules' as pre-hook.
	Mask `tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
	`shell-prompt-pattern' because of non-7bit characters.
	Reported by Sebastian Luque <sluque@mun.ca>.
	(tramp-reporter-dump-variable, tramp-load-report-modules): New defuns.
	(tramp-match-string-list): Remove function.
	(tramp-wait-for-regexp): Remove call of that function.
	Suggested by Kim F. Storm <storm@cua.dk>.
	(tramp-set-auto-save-file-modes): Use octal integer code #o600
	instead of octal character code ?\600.  The latter resulted in a
	syntax error with XEmacs.

	* net/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
	XEmacs case; not necessary anymore.
	(tramp-smb-handle-write-region): No special handling for
	`last-coding-system-used', because this is done in
	`tramp-accept-process-output' now.
	(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.

2005-08-06  Luc Teirlinck  <teirllm@auburn.edu>

	* wid-edit.el (widget-choice-value-create):
	Unconditionally respect user choice.  Set :explicit-choice back to nil
	when no longer needed.
	(widget-choice-action): Unconditionally respect user choice.
	Eliminate :explicit-choice-value.

	* fringe.el (set-fringe-indicators-1, fringe-indicators): Delete.

	* menu-bar.el (menu-bar-options-save): Replace `fringe-indicators'
	with `indicate-empty-lines' and `indicate-buffer-boundaries'.
	(menu-bar-showhide-fringe-menu): Add new item "Empty line indicators"
	running new function `toggle-indicate-empty-lines'.
	Rename "Customize" item to "Customize fringe".
	Rename "Indicators" item to "Buffer boundaries" and change help echo.
	(menu-bar-showhide-fringe-ind-menu): Change several help echos.
	Add `menu-bar-showhide-fringe-ind-customize' as "Other (customize)".
	Delete "Empty lines only" item.
	(menu-bar-showhide-fringe-ind-customize): New function.
	(menu-bar-showhide-fringe-ind-mixed)
	(menu-bar-showhide-fringe-ind-box)
	(menu-bar-showhide-fringe-ind-right)
	(menu-bar-showhide-fringe-ind-left)
	(menu-bar-showhide-fringe-ind-none): Use `indicate-buffer-boundaries'
	instead of `fringe-indicators'.

2005-08-06  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper.el (viper-emacs-state-mode-list):
	Add recentf-dialog-mode.  Change the date of last update.

2005-08-06  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-harness-minor-mode, viper-exec-delete)
	(viper-exec-yank, viper-put-back): Don't display modification msg
	if in the minibuffer.

	* emulation/viper-init.el (viper-replace-overlay-cursor-color)
	(viper-insert-state-cursor-color, viper-vi-state-cursor-color):
	Make variables frame local.

	* emulation/viper-util.el (viper-append-filter-alist):
	Use append instead of nconc.

	* emulation/viper.el (viper-vi-state-mode-list)
	(viper-emacs-state-mode-list): Move help-mode and
	completion-list-mode from the first list to the second.
	(viper-mode): Docstring.
	(viper-go-away, viper-non-hook-settings): Don't localize
	minor-mode-alist in newer Emacsen.  Add advice to
	set-cursor-color.  Don't bind "\C-c\\".

2005-08-06  Emilio C. Lopes  <eclig@gmx.net>

	* cmuscheme.el (scheme-trace-command, scheme-untrace-command)
	(scheme-macro-expand-command): New user options.
	(scheme-trace-procedure, scheme-expand-current-form): New commands.
	(scheme-form-at-point, scheme-start-file)
	(scheme-interactively-start-process): New functions.
	(scheme-get-process): New function, extracted from `scheme-proc'.
	(run-scheme): Call `scheme-start-file' to get start file, and pass
	it to `make-comint'.
	(switch-to-scheme, scheme-proc):
	Call `scheme-interactively-start-process' if no Scheme buffer/process
	is available.

2005-08-06  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Use `compilation-text-face', `compilation-info-text-face' and
	`compilation-error-text-face' instead of `font-lock-keyword-face'.
	(compilation-error): New face.
	(compilation-error-file-name): Inherit from
	`compilation-error' instead of `font-lock-warning-face'.
	(compilation-warning-file-name): Inherit from
	`compilation-warning' instead of `font-lock-warning-face'.
	(compilation-info, compilation-error-file-name)
	(compilation-warning-file-name, compilation-info-file-name)
	(compilation-line-number, compilation-column-number): Doc fix.
	(compilation-error-text-face, compilation-warning-text-face)
	(compilation-info-text-face): New face variables.
	(compilation-line-face, compilation-column-face)
	(compilation-enter-directory-face)
	(compilation-leave-directory-face): Doc fix.
	(compilation-text-face): New function.

	* progmodes/grep.el (grep-regexp-alist): Set 5th arg `TYPE' to 0
	instead of 1 to display binary file names as info file links.
	(grep-error-face): Use `compilation-error-face' instead of
	`font-lock-keyword-face'.
	(grep-mode-font-lock-keywords): Use `compilation-info-text-face'
	and `compilation-warning-text-face' instead of
	`font-lock-keyword-face'.  Use `compilation-error-text-face'
	instead of `grep-error-face'.

2005-08-05  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el: Add autoload cookies for all coding
	systems.

2005-08-04  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Put undo.c where it alphabetically belongs.

2005-08-04  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-map):
	* progmodes/grep.el (grep-mode-map):
	Bind TAB to `compilation-next-error' and [backtab] to
	`compilation-previous-error'.

	* progmodes/grep.el (grep-regexp-alist): Replace complex regexp
	matching line numbers, column numbers and their ranges with regexp
	matching only line numbers.
	(grep-context-face): New face variable.
	(grep-mode-font-lock-keywords): Use it.

	* faces.el (read-face-name): Delete duplicate faces.

2005-08-02  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-find-image): Don't make variables
	automatically buffer local.
	(thumbs-current-tmp-filename, thumbs-current-image-filename)
	(thumbs-image-num): Make automatically buffer local.
	(thumbs-show-thumbs-list): Use `make-local-variable', not
	`make-variable-buffer-local'.
	(thumbs-insert-image): Make `thumbs-current-image-size' buffer-local.

	* play/doctor.el (doctor-type-symbol): "?\ " -> "?\s".
	(**mad**, *debug*, *print-space*, *print-upcase*, abuselst)
	(abusewords, account, afraidof, arerelated, areyou, bak, beclst)
	(bother, bye, canyou, chatlst, continue, deathlst, describe)
	(drnk, drugs, eliza-flag, elizalst, famlst, feared, fears)
	(feelings-about, foullst, found, hello, history, howareyoulst)
	(howdyflag, huhlst, ibelieve, improve, inter, isee, isrelated)
	(lincount, longhuhlst, lover, machlst, mathlst, maybe, moods)
	(neglst, obj, object, owner, please, problems, qlist)
	(random-adjective, relation, remlst, repetitive-shortness)
	(replist, rms-flag, schoollst, sent, sexlst, shortbeclst)
	(shortlst, something, sportslst, stallmanlst, states, subj)
	(suicide-flag, sure, things, thlst, toklst, typos, verb, want)
	(whatwhen, whereoutp, whysay, whywant, zippy-flag, zippylst):
	Defvar at compile time.

	* progmodes/ada-mode.el (ada-mode): Use `make-local-variable',
	not `make-variable-buffer-local'.

2005-08-02  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--highlight-rectangle): Only show
	rectangle overlay in selected window.

2005-08-01  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Put `indicate-empty-lines' in fringe group
	instead of display group.  Make `indicate-buffer-boundaries'
	customizable through Custom.

2005-08-01  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/gdb-ui.el (gdb-frame-address, gdb-var-changed)
	(gdb-output-sink, gdba, gdb-cpp-define-alist-program)
	(gdb-set-gud-minor-mode, gdb-exited, gdb-setup-windows)
	(gdb-put-string): Fix typos in docstrings.

2005-08-01  Nick Roberts  <nickrob@snap.net.nz>

	Update copyright notices of files in progmodes directory for
	release of Emacs 22.1.

	* progmodes/gdb-ui.el (gdb-enable-debug-log): Add autoload cookie.

	* progmodes/gud.el (gud-tooltip-mode): Add autoload cookie.
	Don't barf if the GUD buffer has been killed.

2005-08-01  Kim F. Storm  <storm@cua.dk>

	* textmodes/table.el (table-yank-handler): Change defcustom to defvar.

2005-07-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (next-error-follow-minor-mode):
	make-variable-buffer-local -> make-local-variable.

	* emacs-lisp/cl-extra.el: Require CL also when compiling.

	* emacs-lisp/bytecomp.el (byte-compile-make-variable-buffer-local)
	(byte-compile-form-make-variable-buffer-local): New functions to warn
	about misuses of make-variable-buffer-local where make-local-variable
	was meant.

2005-07-29  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs-attributes-list): Doc fix.
	(bs): Update url-link.

	* desktop.el (desktop-save-buffer): Fix typos in docstring.
	(desktop-load-default): Simplify.

	* ibuffer.el (ibuffer-columnize-and-insert-list)
	(ibuffer-mouse-toggle-mark, ibuffer-count-marked-lines)
	(ibuffer-unmark-all, ibuffer-toggle-marks)
	(ibuffer-unmark-forward, ibuffer-unmark-backward)
	(ibuffer-compile-make-format-form, ibuffer-format-column)
	(ibuffer-current-buffers-with-marks)
	(ibuffer-update-title-and-summary): "?\ " -> "?\s".
	(ibuffer): Doc fix.
	(ibuffer-mode): Fix typo in docstring.
	(ibuffer-hooks, ibuffer-mode-hooks): Make obsolete and declare
	with `define-obsolete-variable-alias'.
	(ibuffer-elide-long-columns): Mark as obsolete.  Doc fix.

2005-07-29  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-message-coding-system):
	Be sure to use LF for end-of-line.  If no coding system is decided,
	return iso-8859-1-unix.

2005-07-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-gateway-fatal-msgs)
	(ange-ftp-pending-error-line): New vars.
	(ange-ftp-process-handle-line, ange-ftp-process-filter): Use them
	to handle the non-fatal no-route-to-host messages.
	(internal-ange-ftp-mode): Make the no-match regexp more efficient.

2005-07-28  Juanma Barranquero  <lekktu@gmail.com>

	* isearch.el (isearch-mode-map, isearch-other-meta-char)
	(isearch-quote-char, isearch-printing-char)
	(isearch-text-char-description): "?\ " -> "?\s".
	(isearch-lazy-highlight-cleanup)
	(isearch-lazy-highlight-initial-delay)
	(isearch-lazy-highlight-interval)
	(isearch-lazy-highlight-max-at-a-time)
	(isearch-lazy-highlight-face, isearch-lazy-highlight-cleanup):
	Declare with define-obsolete-*-alias macros.
	(isearch-forward): Fix typo in docstring.
	(search-invisible, search-ring-yank-pointer)
	(regexp-search-ring-yank-pointer): Doc fixes.

	* recentf.el (recentf-menu-append-commands-p): Declare with
	`define-obsolete-variable-alias'.
	(recentf-max-saved-items, recentf-menu-filter)
	(recentf-arrange-by-rule-subfilter): Doc fixes.
	(recentf-menu-append-commands-flag)
	(recentf-initialize-file-name-history, recentf-expand-file-name)
	(recentf-clear-data): Fix typos in docstrings.

2005-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Smarten comments.
	(gdb-info-breakpoints-custom): Use nowarn when finding file.

2005-07-27  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/apollo.el (terminal-init-apollo): New function containing
	all former top level forms in the file.
	* term/bobcat.el (terminal-init-bobcat):
	* term/cygwin.el (terminal-init-cygwin):
	* term/iris-ansi.el (terminal-init-iris-ansi):
	* term/linux.el (terminal-init-linux):
	* term/news.el (terminal-init-news):
	* term/rxvt.el (terminal-init-rxvt):
	* term/sun.el (terminal-init-sun):
	* term/tvi970.el (terminal-init-tvi970):
	* term/vt100.el (terminal-init-vt100):
	* term/vt102.el (terminal-init-vt102):
	* term/vt125.el (terminal-init-vt125):
	* term/vt200.el (terminal-init-vt200):
	* term/vt201.el (terminal-init-vt201):
	* term/vt220.el (terminal-init-vt220):
	* term/vt240.el (terminal-init-vt240):
	* term/vt300.el (terminal-init-vt300):
	* term/vt320.el (terminal-init-vt320):
	* term/vt400.el (terminal-init-vt400):
	* term/vt420.el (terminal-init-vt420):
	* term/wyse50.el (terminal-init-wyse50):
	* term/xterm.el (terminal-init-xterm): Likewise.

	* term/README: Describe the terminal-init-* functionality.

	* startup.el (command-line): After loading the terminal initialization
	file call the corresponding terminal initialization function.

2005-07-27  Kenichi Handa  <handa@m17n.org>

	* ps-bdf.el (bdf-read-font-info): Ignore glyphs whose ENCODING is
	negative.

	* ps-mule.el (ps-mule-bitmap-prologue): Fix arguments to setcharwidth.
	(ps-mule-composition-prologue): Fix for the case that
	RelativeCompose is false.

2005-07-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-ediff): Use insert-buffer-substring.

	* descr-text.el (describe-char): Handle the case where the list of
	chars is displayed in a separate frame.
	Be a bit more discriminating when looking for the char.

2005-07-26  Juanma Barranquero  <lekktu@gmail.com>

	* bookmark.el (bookmark-automatically-show-annotations)
	(bookmark-read-annotation-text-func): Doc fixes.
	(bookmark-save): Improve argument/docstring consistency.
	(bookmark-get-bookmark, bookmark-get-bookmark-record)
	(bookmark-alist-from-buffer)
	(bookmark-upgrade-file-format-from-0)
	(bookmark-grok-file-format-version)
	(bookmark-maybe-upgrade-file-format, bookmark-kill-line)
	(bookmark-read-annotation-mode)
	(bookmark-insert-current-bookmark, bookmark-jump)
	(bookmark-exit-hook): Fix typos in docstrings.
	(bookmark-exit-hooks): Define as obsolete alias.
	(bookmark-exit-hook-internal): Run `bookmark-exit-hook',
	not `bookmark-exit-hooks'.  Fix docstring.
	(bookmark-bmenu-select): "?\ " -> "?\s".

2005-07-25  Ari Roponen  <arjuropo@cc.jyu.fi>  (tiny change)

	* startup.el (command-line): Fix typo.

2005-07-24  Richard M. Stallman  <rms@gnu.org>

	* tooltip.el (tooltip-mode): Test emacs-basic-display,
	not emacs-quick-startup.

2005-07-24  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/re-builder.el (reb-with-current-window): Delete.
	(reb-next-match, reb-show-subexp): Use `with-selected-window'
	instead of `reb-with-current-window'.
	(reb-prev-match): Likewise.  Also, don't move left if the search
	was unsuccessful.
	(reb-initialize-buffer): New function.
	(re-builder, reb-change-syntax): Use it.

	* man.el (Man-goto-page): Make second argument NOERROR optional.

2005-07-23  Richard M. Stallman  <rms@gnu.org>

	* man.el (Man-bgproc-sentinel): Check here for failure to find
	any man page in the output, and report the error here.
	(Man-arguments): Make it permanent local.
	(Man-goto-page): New arg NOERROR.  Never kill the current buffer.
	(Man-mode): Pass t for NOERROR.

	* progmodes/grep.el (grep-error-face): Use font-lock-keyword-face.
	(grep-mode-font-lock-keywords):
	Don't use compilation-...-face for messages that are not file names.

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Don't use compilation-...-face for messages that are not file names.

2005-07-22  Juri Linkov  <juri@jurta.org>

	* startup.el (normal-splash-screen): Update menu name.

	* tempo.el (tempo-insert-template): Fix 2005-07-16 change.

2005-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el: Load term/rxvt if the terminal is actually an
	rxvt terminal.
	(xterm-rxvt-set-background-mode): Remove, not used anymore.

	* term/rxvt.el (function-key-map): Use substitute-key-definition
	to bind {C,S,C-S}-{f1-f10}.  Add a few missing key bindings.

	* term/cygwin.el: New file.

2005-07-22  Kim F. Storm  <storm@cua.dk>

	* image-file.el (insert-image-file, image-file-yank-handler):
	Fix last change to maintain a (unique) yank-handler on yanked images.

2005-07-22  Eduardo Muñoz  <emufer@terra.es>  (tiny change)

	* dired.el (dired-move-to-filename-regexp): Recognize the B suffix
	of the file size (as in "177B" for 177 bytes).  This happens with
	"ls -lh" on FreeBSD.

2005-07-22  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (highlight-changes-global-initial-state)
	(highlight-compare-buffers, hilit-chg-turn-on-maybe)
	(hilit-chg-fixup, highlight-changes-mode):
	Fix typos in docstrings.
	(highlight-changes-global-modes, highlight-changes-rotate-faces):
	Doc fixes.

2005-07-21  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Never call the
	mode function using `eval-after-load'.

2005-07-21  Kim F. Storm  <storm@cua.dk>

	* mail/emacsbug.el (report-emacs-bug): Request that backtraces are
	included when reporting an Emacs crash, and tell about the DEBUG file.

	* image-file.el (insert-image-file): Add yank-handler.
	(image-file-yank-handler): Yank handler to make unique copies of
	images when they are yanked into a buffer next to each other.

2005-07-21  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-use-prompt-regexp, comint-send-input)
	(comint-source-default, comint-extract-string)
	(comint-get-source, comint-word, comint-completion)
	(comint-source, comint-prompt-read-only, comint-update-fence):
	Fix typos in docstrings.
	(comint-use-prompt-regexp-instead-of-fields, comint-kill-output):
	Declare with define-obsolete-*-alias macros.
	(comint-previous-matching-input-from-input)
	(comint-next-matching-input-from-input)
	(comint-previous-matching-input, comint-next-matching-input)
	(comint-forward-matching-input):
	Improve argument/docstring consistency.

	* desktop.el (desktop-clear-preserve-buffers-regexp):
	Also preserve the *server* buffer.

	* simple.el (clone-indirect-buffer): Doc fix.
	(fixup-whitespace, just-one-space)
	(backward-delete-char-untabify, lambda): "?\ " -> "?\s".
	(next-error, next-error-highlight)
	(next-error-highlight-no-select, next-error-last-buffer)
	(next-error-buffer-p, next-error-find-buffer, next-error)
	(previous-error, next-error-no-select, previous-error-no-select)
	(open-line, split-line, minibuffer-prompt-width, kill-new)
	(binary-overwrite-mode): Fix typos in docstrings.
	(set-fill-column): Fix typo in message.

	* skeleton.el (skeleton-proxy-new): Doc fix.

	* strokes.el (strokes-load-hook): Doc fix.
	(strokes-grid-resolution, strokes-get-grid-position)
	(strokes-renormalize-to-grid, strokes-read-stroke)
	(strokes-read-complex-stroke, strokes-file, strokes-last-stroke)
	(strokes-global-map): Fix typos in docstrings.
	(strokes-help): Doc fix.  Fix help message and pass it through
	`substitute-command-keys'.

	* tempo.el (tempo-insert-prompt, tempo-interactive)
	(tempo-show-completion-buffer, tempo-tags, tempo-match-finder)
	(tempo-insert-string-functions, tempo-local-tags)
	(tempo-define-template, tempo-insert-template)
	(tempo-insert-prompt-compat, tempo-is-user-element)
	(tempo-insert-mark, tempo-find-match-string, tempo-complete-tag):
	Fix typos in docstrings.

	* vcursor.el (vcursor-other-window, vcursor-bind-keys)
	(vcursor-key-bindings, vcursor-use-vcursor-map)
	(vcursor-find-window, vcursor-scroll-down)
	(vcursor-disable, vcursor-beginning-of-buffer)
	(vcursor-end-of-buffer): Fix typos in docstrings.
	(vcursor-relative-move, vcursor-get-char-count):
	Improve argument/docstring consistency.

	* version.el: "?\ " -> "?\s".

	* wid-edit.el (widget-default-create, widget-after-change)
	(widget-default-format-handler, widget-checklist-add-item)
	(widget-radio-add-item, widget-choose, widget-specify-secret)
	(widget-field-value-create, widget-field-value-get)
	(widget-editable-list-format-handler)
	(widget-editable-list-entry-create, widget-group-value-create)
	(widget-documentation-link-add)
	(widget-documentation-string-value-create): "?\ " -> "?\s".
	(widget-convert-text): Doc fix.
	(widget-narrow-to-field, widget-field-find)
	(widget-url-link-action, widget-emacs-library-link-action)
	(widget-color-notify): Fix typos in docstrings.

	* w32-fns.el (w32-shell-name): Use `bound-and-true-p'.
	(x-select-text, set-w32-system-coding-system)
	(w32-add-charset-info): Fix typos in docstrings.

	* emulation/cua-base.el (cua-mode, cua-enable-register-prefix)
	(cua-enable-cua-keys, cua-use-hyper-key)
	(cua-virtual-rectangle-edges): Fix typos in docstrings.
	(cua--M/H-key, cua--init-keymaps): "?\ " -> "?\s".

	* net/tramp.el (tramp-handle-load): Fix typo in error message.

	* emacs-lisp/re-builder.el (regexp-builder): Declare with
	`defalias' instead of faking it.

	* eshell/em-ls.el (eshell-ls-decorated-name): Doc fix.
	(eshell-ls-missing, eshell-ls-dired-initial-args)
	(eshell-ls-use-in-dired): Fix typos in docstrings.

2005-07-20  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-mode): Improve doc string.

2005-07-20  Juanma Barranquero  <lekktu@gmail.com>

	* abbrev.el (expand-region-abbrevs): Doc fix.
	(inverse-add-mode-abbrev, inverse-add-global-abbrev):
	Improve argument/docstring consistency.

	* arc-mode.el (archive-get-descr, archive-alternate-display):
	Doc fixes.
	(archive-l-e): Improve argument/docstring consistency.
	(archive-tmpdir, archive-unixdate, archive-unixtime)
	(archive-chmod-entry): Fix typos in docstrings.
	(archive-unflag, archive-unflag-backwards)
	(archive-unmark-all-files): "?\ " -> "?\s".

	* buff-menu.el (Buffer-menu-unmark): Doc fix.
	(Buffer-menu-not-modified, Buffer-menu-execute)
	(Buffer-menu-toggle-read-only, Buffer-menu-buffer+size)
	(list-buffers-noselect, Buffer-menu-select): "?\ " -> "?\s".

	* composite.el (compose-string, encode-composition-rule)
	(compose-last-chars): Fix typos in docstrings.

	* desktop.el (desktop-enable, desktop-basefilename):
	Declare with `define-obsolete-variable-alias'.
	(desktop-internal-v2s): Don't quote keywords.
	(desktop-clear): "?\ " -> "?\s".

	* dired.el (dired-align-file, dired-flag-backup-files)
	(dired-change-marks, dired-unmark-all-files): "?\ " -> "?\s".
	(dired-listing-switches, dired-ls-F-marks-symlinks)
	(dired-dwim-target, dired-load-hook, dired-mode-hook)
	(dired-directory, dired-faces, dired, dired-revert)
	(dired-mode, dired-summary, dired-view-file)
	(dired-copy-filename-as-kill, dired-delete-file)
	(dired-no-confirm, dired-unmark-all-marks)
	(dired-sort-by-date-regexp, dired-sort-by-name-regexp)
	(dired-sort-inhibit, dired-sort-other): Fix typos in docstrings.
	(dired-undo, dired-get-file-for-visit, dired-sort-toggle-or-edit):
	Fix typos in message strings.

	* dired-x.el (virtual-dired): Declare with `defalias'.
	(dired-mark-unmarked-files, dired-local-variables-file)
	(dired-omit-here-always): Doc fix.
	(dired-omit-mode, dired-find-subdir)
	(dired-enable-local-variables, dired-clean-up-buffers-too)
	(dired-extra-startup, dired-mark-extension, dired-jump)
	(dired-jump-other-window, dired-omit-localp, dired-virtual-mode)
	(dired-smart-shell-command, dired-guess-shell-alist-user)
	(dired-man, dired-initial-position, dired-x-hands-off-my-keys)
	(dired-x-bind-find-file, dired-x-submit-report):
	Fix typos in docstrings.
	(dired-mark-unmarked-files): "?\ " -> "?\s".

	* dirtrack.el (dirtrack-list): Fix typos in docstring.

	* faces.el (describe-face): "?\ " -> "?\s".
	(read-all-face-attributes, read-face-font, modify-face)
	(face-attr-construct, italic): Fix typos in docstrings.
	(frame-update-face-colors): Declare with
	`define-obsolete-function-alias'.

	* files.el (find-file-noselect, recode-file-name): Doc fixes.
	(insert-directory, kill-some-buffers): "?\ " -> "?\s".
	(magic-mode-alist, buffer-file-numbers-unique)
	(write-file-functions, get-free-disk-space):
	Fix typos in docstrings.
	(find-file-not-found-hooks, find-file-hooks, write-file-hooks)
	(write-contents-hooks, write-file-hooks):
	Declare with `define-obsolete-variable-alias'.

	* forms-d2.el (arch-rj): Fix typo in docstrings.
	(arch-tocol): Likewise.  "?\ " -> "?\s".

	* frame.el (set-frame-font, cursor-in-non-selected-windows):
	Fix typo in docstring.
	(set-screen-width, set-screen-height): Delete redundant info in
	docstrings.
	(new-frame, screen-height, screen-width): Declare with
	`define-obsolete-function-alias'.
	(delete-frame-hook, blink-cursor): Declare with
	`define-obsolete-variable-alias'.

	* paths.el (prune-directory-list): Fix typos in docstring.

	* pcvs-util.el (cvs-flags-query, cvs-strings->string)
	(cvs-prefix-get): Fix typos in docstrings.

	* ps-print.el (ps-extend-face-list, ps-extend-face)
	(ps-print-background-image): Fix typos in docstrings.
	(ps-default-fg, ps-default-bg): Doc fixes.

	* s-region.el (s-region-bind): Doc fix.
	(s-region-move-p1, s-region-move-p2): Fix typos in docstrings.

	* textmodes/org.el (org-table-formula-substitute-names)
	(org-table-get-vertical-vector): Doc fixes.
	(org-table-recalculate): Remove unused argument to `message'.

2005-07-19  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-table-column-names)
	(org-table-column-name-regexp)
	(org-table-named-field-locations): New variables.
	(org-archive-subtree): Protect `this-command' when calling
	`org-copy-subtree' and `org-cut-subtree', to avoid appending to
	the kill buffer.
	(org-complete): Remove fixed-formula completion.
	(org-edit-formulas-map): New variable.
	(org-table-edit-formulas): New command.
	(org-finish-edit-formulas, org-abort-edit-formulas)
	(org-show-variable, org-table-get-vertical-vector): New functions.
	(org-table-maybe-eval-formula): Handle `:=' fields.
	(org-table-get-stored-formulas, org-table-store-formulas)
	(org-table-get-formula, org-table-modify-formulas)
	(org-table-replace-in-formulas): Handle named field formulas.
	(org-table-get-specials): Store locations of named fields.

2005-07-19  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep-regexp-alist)
	(grep-mode-font-lock-keywords, grep-process-setup):
	Use default GNU grep match color "01;31m" instead of "01;41m".
	(grep-regexp-alist, grep-mode-font-lock-keywords):
	Use `\\[[0-9]*m' instead of `\\[00m'.
	(grep-regexp-alist): Move `\\(?:\033\\[K\\)?' from sgr_end to
	sgr_start where its handling is more important.  Use the real
	length of sgr_start instead of constant 8.
	(grep-mode-font-lock-keywords): Don't delete `\\(?:\033\\[K\\)?'
	specially.  Delete all remaining escape sequences.
	(grep-process-setup): Set "GREP_COLORS" for GNU grep 2.5.1-cvs.
	(grep-regexp-alist): Make hyperlink only for binary file name
	instead of the whole line.
	(grep-mode-map): Bind `backtab' to `compilation-previous-file'.
	(grep-mode): Add autoload.

	* emacs-lisp/find-func.el (find-function-regexp):
	Add `define-compilation-mode'.

2005-07-19  Juri Linkov  <juri@jurta.org>

	* compare-w.el (compare-ignore-whitespace, compare-windows-sync)
	(compare-windows-sync-string-size, compare-windows-recenter)
	(compare-windows-highlight, compare-windows): Add version 22.1.
	(compare-windows) <defface>: Inherit from lazy-highlight instead
	of duplicating its default value.

	* cus-edit.el (custom-mode-map): Bind `C-c C-c' to `Custom-set'.
	(Custom-mode-menu): Use `info' instead of `Info-goto-node'.

	* descr-text.el (describe-char): Create link buttons for `charset'
	and `code point'.  Add the current input method name with a link
	button to `to input' field.  Print face names of display table
	characters in `The display table entry is displayed by' section
	instead of printing face-id in the `display' field.
	Guess hardcoded faces and create a link button for them.
	Skip empty fields when calculating max-width.
	Treat `widget-create' specially while inserting strings from the
	collected field list.
	(describe-char-after): Made obsolete in version 22.1, not 21.5.

	* diff-mode.el (diff-file-header): Change foreground color from
	yellow to green on light backgrounds.
	(diff-context): Inherit from `shadow' only for color/grayscale
	with more than 88 colors.
	(diff-indicator-removed, diff-indicator-added)
	(diff-indicator-changed): New faces.
	(diff-font-lock-keywords): Use new faces.  Regroup rules.
	Add "^---$" for `normal' diff format.  Fontify `#' lines with
	font-lock-comment-delimiter-face and font-lock-comment-face.
	Add `#' to ^[^...] in the rule for `diff-context-face'.

	* faces.el (mode-line-highlight): Replace RoyalBlue4 with
	a button-like box.  Inherit from `highlight' on low colors.
	(shadow): Use shades of gray only for color/grayscale with
	more than 88 colors.  Use green for light backgrounds with
	8 colors, and yellow for dark backgrounds with 8 colors.

	* font-lock.el (font-lock-regexp-grouping-backslash):
	Don't inherit from escape-glyph (use bold for all cases).

	* info.el (info-xref-visited): Use light foreground color `violet'
	for dark backgrounds instead of dark color `magenta3'.
	(info-title-1): Use `yellow' color for dark backgrounds.

	* isearch.el (isearch): Use not-too-dark magenta3 instead of
	too-light magenta2.

	* replace.el (match): Use slightly more light RoyalBlue3 instead
	of dark RoyalBlue4.

	* wid-edit.el (widget-inactive): Inherit from `shadow'.

2005-07-19  Juanma Barranquero  <lekktu@gmail.com>

	* novice.el (disabled-command-hook): Declare it with
	`define-obsolete-variable-alias'.

	* desktop.el (desktop-enable, desktop-buffer-modes-to-save)
	(desktop-buffer-misc-functions, desktop-buffer-handlers)
	(desktop-load-default): Add release to obsolescence info.
	(desktop-globals-to-clear, desktop-buffer-mode-handlers)
	(desktop-append-buffer-args, desktop-read):
	Fix typos in docstrings.
	(desktop-kill): Fix typo in message.
	(desktop-save): Doc fix.

2005-07-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-escape-to-state): Bug fix.
	(viper-envelop-ESC-key): Change the definition of fast
	keysequence so it'll work with keyboard macros.

	* ediff.el (ediff-patch-buffer): Change the docstring.

2005-07-19  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system): Try to
	use an auto-coding (if any) before anything else.  If the found
	auto-coding is invalid, show a warning message.

	* international/mule.el (find-auto-coding): New function created
	by modifying the body of set-auto-coding.
	(set-auto-coding): Use find-auto-coding to find a coding.

2005-07-18  Richard M. Stallman  <rms@gnu.org>

	* allout.el (allout-isearch-expose): Use isearch-mode-end-hook-quit,
	not isearch-mode-end-hook-error.
	(allout-before-change-protect): Fix error message.

2005-07-18  Juri Linkov  <juri@jurta.org>

	* allout.el (allout-mode):
	* calculator.el (calculator-copy):
	* custom.el (custom-known-themes):
	* dired.el (dired-desktop-buffer-misc-data)
	(dired-restore-desktop-buffer):
	* dired-x.el (dired-omit-marker-char):
	* files.el (basic-save-buffer):
	* font-core.el (font-lock-mode):
	* calendar/calendar.el (calendar-goto-hebrew-date)
	(calendar-goto-coptic-date, calendar-goto-ethiopic-date)
	(calendar-goto-persian-date):
	* language/ethio-util.el (ethio-sera-to-fidel-region):
	* textmodes/picture.el (picture-mode):
	Delete duplicate duplicate words.

2005-07-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-mode-map): Remove key bindings for regexp
	chars * ? } |.
	(isearch-fallback): Don't call `isearch-process-search-char'.
	(isearch-*-char, isearch-}-char, isearch-|-char): Remove functions.
	(isearch-process-search-char): Call `isearch-fallback' for regexp
	chars * ? } |.
	(isearch-return-char): Make obsolete with `make-obsolete' instead
	of simply documenting it as obsolete in the docstring.
	(isearch-fallback): Refill docstring.

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters): Remove unneeded
	`concat'.  Add intermediate values to `junk-hist' instead of
	`minibuffer-history'.  Test the length of `str'.

2005-07-18  Juanma Barranquero  <lekktu@gmail.com>

	* allout.el (allout-resolve-xref): Fix typos in error strings.
	(allout-before-change-protect): Remove unneeded `concat'.

	* array.el (array-mode, array-reconfigure-rows)
	(untabify-backward): Fix typos in docstrings.
	(array-reconfigure-rows): Use `insert-buffer-substring', not
	`insert-buffer'.

	* calendar/icalendar.el (icalendar--get-unfolded-buffer):
	* progmodes/ada-mode.el (ada-make-body):
	Use `insert-buffer-substring' and `goto-char', not `insert-buffer'.

	* dired.el (dired-log):
	* tar-mode.el (tar-subfile-save-buffer):
	* play/zone.el (zone-pgm-stress-destress):
	Use `insert-buffer-substring', not `insert-buffer'.

2005-07-17  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-auth-supported): Prefer PLAIN over LOGIN.

2005-07-16  Jose E. Marchesi  <jemarch@gnu.org>

	* mail/smtpmail.el (smtpmail-auth-supported): Add plain auth method.
	(smtpmail-try-auth-methods): Add AUTH PLAIN dialog.

2005-07-17  Kim F. Storm  <storm@cua.dk>

	* ido.el (dired-other-window): Add ido property.

2005-07-16  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/bytecomp.el (byte-compile-maybe-guarded):
	Fix typo in docstring.
	(byte-compile-interactive-only-functions): Add `insert-buffer' and
	`insert-file-literally'.

	* emacs-lisp/edebug.el (def-edebug-form-spec): Add obsolescence
	info and delete redundant message.  Doc fix.
	(edebug-install-custom-print-funcs, edebug-reset-print-funcs)
	(edebug-uninstall-custom-print-funcs): Define as obsolete aliases.

2005-07-16  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-and-recursion): New function.
	(byte-compile-and): Use byte-compile-and-recursion.
	(byte-compile-or-recursion): New function.
	(byte-compile-or): Use that.
	(byte-compile-if): Guard the else-clause too.
	(byte-compile-maybe-guarded): Handle (not (featurep 'emacs)).

	* isearch.el (isearch-mode-end-hook-quit): New variable.
	(isearch-done): Bind it.
	(isearch-mode-end-hook): Doc fix.

	* allout.el (allout-isearch-did-quit): Variable deleted.
	(allout-real-isearch-abort): Function name no longer used.
	(allout-mode): Do allout-enwrap-isearch whenever feature is wanted.
	(allout-isearch-rectification): isearch-mode always exists.
	Don't set allout-isearch-did-quit.
	(allout-isearch-expose): Check isearch-mode-end-hook-error, not
	allout-isearch-did-quit.
	(allout-enwrap-isearch): Just add the hook.
	(allout-isearch-abort): Function deleted.
	(allout-pre-command-business): Avoid warning.

	* progmodes/pascal.el (pascal-outline-map): Use fboundp, not boundp.
	Correctly avoid warnings.
	(pascal-outline): Likewise.

	* progmodes/f90.el (f90-abbrev-start): Avoid warning.

	* progmodes/asm-mode.el (asm-comment): Use with-no-warnings.

	* play/tetris.el (tetris-mode): Avoid warning.

	* play/snake.el (snake-mode): Avoid warning.

	* play/gamegrid.el (gamegrid-shared-game-dir): Add defvar.
	(gamegrid-set-display-table): Avoid warning.
	(gamegrid-set-timer): Likewise.
	(gamegrid-make-mono-tty-face): Use set-face-inverse-video-p.
	(gamegrid-add-score-with-update-game-score-1): Take FILE
	as argument.
	(gamegrid-add-score-with-update-game-score): Pass that argument.
	Rename have-shared-game-dir to gamegrid-shared-game-dir.

	* net/eudc-hotlist.el (eudc-hotlist-mode): Avoid warnings.

	* net/eudc-bob.el (eudc-jump-to-event): Avoid warning.
	(eudc-bob-display-jpeg, eudc-bob-can-display-inline-images): Likewise.

	* mail/uce.el (uce-reply-to-uce): Replace beginning-of-buffer
	and insert-file.

	* mail/supercite.el (sc-no-blank-line-or-header): Avoid warning.
	(sc-ask): Avoid warnings.

	* eshell/em-hist.el (eshell-rebind-keys-alist): Add defvar.
	(eshell-hist-initialize): Use that var the natural way.

	* emulation/viper-init.el (viper-activate-input-method): Avoid warning.

	* emacs-lisp/re-builder.el (reb-cook-regexp):
	Avoid warning calling lre-compile-string.
	(reb-color-display-p): Avoid warning.

	* calculator.el (calculator-last-input): Guard uses
	of event-key and key-press-event-p.
	(event-key, key-press-event-p): Delete definitions.

	* emacs-lisp/find-gc.el (find-gc-unsafe-list)
	(find-gc-source-directory, find-gc-subrs-callers)
	(find-gc-noreturn-list, find-gc-source-files)
	(find-gc-subrs-called): Vars renamed and defvar'd.

	* emacs-lisp/checkdoc.el (checkdoc-make-overlay)
	(checkdoc-overlay-put, checkdoc-delete-overlay)
	(checkdoc-overlay-start, checkdoc-overlay-end)
	(checkdoc-mode-line-update, checkdoc-char=):
	Define such that compiler knows they are defined.
	(checkdoc-call-eval-buffer): Delete.  Use eval-buffer directly.
	(checkdoc-read-event): Delete.  Use read-event directly.

	* whitespace.el (whitespace-make-overlay)
	(whitespace-overlay-put, whitespace-delete-overlay)
	(whitespace-overlay-start, whitespace-overlay-end):
	Define such that compiler knows they are defined.
	(whitespace): Move conditional inside.

	* tempo.el (tempo-insert-template): Suppress warning.

	* ediff-diff.el (longlines-mode): Add defvar.

2005-07-16  Gary Howell  <g1howell-list@yahoo.com>  (tiny change)

	* server.el: Bind "C-x #" in a way that works even if C-x is
	redefined to a command key, not a prefix key.

2005-07-16  Johan Bockgård  <bojohan@users.sourceforge.net>  (tiny change)

	* emacs-lisp/cl-macs.el (cl-make-type-test): Defer evaluation of
	cl-make-type-test till execution time.

2005-07-16  Markus Rost  <rost@math.uni-bielefeld.de>

	* dired-x.el (dired-do-relsymlink-regexp): Add missing optional
	arg ARG and use it.

2005-07-16  Johan Bockgård  <bojohan@users.sourceforge.net>  (tiny change)

	* emacs-lisp/cl-macs.el (cl-make-type-test): Add `atom' type.

2005-07-15  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Avoid constructing
	a defcustom with two :set or :type keywords.

2005-07-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Don't give ^M comment-end syntax.

2005-07-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-update, gdb-var-update-handler):
	Don't consider gdbmi (gdb-mi.el has its own update functions).
	(gdb-var-delete): Make it work for gdbmi as well.
	(gdb-speedbar-expand-node): Move var-update here for gdbmi.

	* progmodes/gud.el (etags, sdb): Only require etags when needed.
	(gud-speedbar-menu-items): Correct logic for enabling items.

2005-07-15  Kim F. Storm  <storm@cua.dk>

	* ido.el: Fix commentary.
	(ido-define-mode-map): Move ido-next-work-file to C-M-o.
	Use with-no-warnings around ffap-guesser.
	(ido-file-internal, ido-read-file-name, ido-read-directory-name):
	Let bind minibuffer-completing-file-name to t.

2005-07-15  Juanma Barranquero  <lekktu@gmail.com>

	* startup.el (site-run-file, keyboard-type): Doc fixes.
	(command-line): Check for "--basic-display" argument; also for
	"--quick", not "--bare-bones" (which was renamed).
	(fancy-splash-text): Add missing item "Getting New Versions".
	(normal-splash-screen): Fix typos and improve consistency with
	`fancy-splash-text'.  Update copyright year.

	* hexl.el (hexl-mode-map): Recognize also `ehelp-command' as a
	valid binding for `help-char'.

	* emacs-lisp/derived.el (derived-mode-hook-name): Doc fix.

2005-07-14  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-mode): Disable cua-mode for term buffers.

2005-07-14  Juanma Barranquero  <lekktu@gmail.com>

	* add-log.el (add-log-mailing-address, change-log-merge):
	Doc fixes.
	(change-log-get-method-definition): Fix typo in docstring.

2005-07-14  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el:
	(cua--pre-command-handler-1, cua--pre-command-handler)
	(cua--post-command-handler-1, cua--post-command-handler):
	Split in two.  Check (buffer local) value of cua-mode.
	(cua-selection-mode): New command.

2005-07-13  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-initialize-safe-set)
	(custom-initialize-safe-default): Doc fixes.

	* frame.el (blink-cursor-mode): Use `custom-initialize-safe-default'
	and simplify :init-value again.

	* tooltip.el (tooltip-mode): Use `custom-initialize-safe-default'
	and simplify :init-value again.  Delete autoload.

	* startup.el (command-line): Use `custom-reevaluate-setting' again
	for tooltip-mode.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Avoid constructing
	a defcustom with two :initialize keywords.

2005-07-13  Juanma Barranquero  <lekktu@gmail.com>

	* allout.el (my-mark-marker, allout-isearch-prior-pos)
	(allout-unprotected, allout-undo-aggregation, allout-snug-back)
	(allout-post-command-business, allout-flag-region)
	(isearch-reenable-font-lock, allout-yank)
	(allout-insert-latex-header, allout-insert-latex-trailer)
	(allout-latex-verbatim-quote-curr-line, allout-latexify-exposed)
	(allout-latex-verb-quote): Fix typos in docstrings.
	(allout-enwrap-isearch, regexp-sans-escapes): Doc fixes.
	(allout-unprotected, allout-prefix-data):
	Improve argument/docstring consistency.
	(allout-chart-subtree): Fix argument spec.
	(allout-open-topic): Rename `use_sib_bullet' argument to
	`use-sib-bullet'.  Doc fix.

	* whitespace.el (whitespace-check-buffer-leading)
	(whitespace-check-buffer-trailing)
	(whitespace-check-buffer-indent)
	(whitespace-check-buffer-spacetab)
	(whitespace-check-buffer-ateol, whitespace-highlighted-space)
	(whitespace-check-leading-whitespace)
	(whitespace-check-trailing-whitespace)
	(whitespace-check-spacetab-whitespace)
	(whitespace-check-indent-whitespace)
	(whitespace-check-ateol-whitespace, whitespace-abort-on-error)
	(whitespace-modes): Fix typos in docstrings.
	(defgroup, defcustom): Doc fixes.

	* winner.el (winner-mode, winner-boring-buffers)
	(winner-pending-undo-ring): Doc fixes.
	(winner-ring): Remove unneeded `progn'.
	(winner-equal): `defsubst' it.
	(winner-redo): Fix message.

2005-07-13  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Always use vertical-motion to
	do the last (or only) line move to ensure some movement.
	Undo 2005-06-23 change--don't check for overlays.

2005-07-13  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (ccl-encode-mac-roman-font)
	(ccl-encode-mac-centraleurroman-font)
	(ccl-encode-mac-cyrillic-font, ccl-encode-mac-symbol-font):
	(ccl-encode-mac-dingbats-font): Remove check for ASCII.
	Change charset-id boundary of dimension to ?\xef.
	(mac-char-fontspec-list): New constant.
	(fontset-add-mac-fonts): Use it.  Accept non-string `base-family'
	argument.  Nil uses itself as family in font-spec.  Previous
	behavior for nil is now provided by non-nil non-string argument.
	All callers changed.  Add font-specs for Mac fonts to
	"fontset-default" unless iso8859-1 fonts are installed.

2005-07-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-get-indent-info): Only indent
	a continuation line if the \ is preceded by SPC or TAB.
	(sh-get-indent-info): Simplify.
	(sh-mark-init, sh-learn-buffer-indent, sh-add-completer):
	Use with-current-buffer.

	* font-lock.el (font-lock-fontify-keywords-region): Avoid inf-loops
	when the matched text is empty.

2005-07-12  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Revert to previous handling of
	tooltip-mode.  Explain in comment why the complexity is needed.

	* tooltip.el (tooltip-mode): Revert to previous implementation of
	its defcustom.

	* frame.el (blink-cursor-mode): Revert to previous implementation
	of its defcustom.  Update comment.

2005-07-12  Lars Hansen  <larsh@soem.dk>

	* desktop.el: Update e-mail address.

2005-07-12  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-services-mail-selection)
	(mac-services-mail-to): New functions.
	(mac-application-menu-map): Bind them.

2005-07-12  Milton Wulei  <milton@wulei.net>  (tiny change)

	* progmodes/gdb-ui.el: Add note about buffering with Windows.

2005-07-11  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-reevaluate-setting): Doc fix.

2005-07-11  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-embedded-announce-formula-alist)
	(calc-embedded-open-close-plain-alist)
	(calc-embedded-open-close-mode-alist): Add checks for additional
	major modes (due to Robert J. Chassell <bob@rattlesnake.com>).

2005-07-11  Juanma Barranquero  <lekktu@gmail.com>

	* custom.el (custom-enable-theme): Don't add theme to
	`custom-enabled-themes' with `push' because there is no
	setf-method for `delq'.

2005-07-11  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-declare-variable): Doc fix.

	* dired-aux.el (dired-compare-directories): Remove "." and ".."
	from the alists.

	* emacs-lisp/edebug.el (edebug-slow-after, edebug-slow-before):
	Do nothing if edebug-active.

	* emacs-lisp/edebug.el (edebug-enter): Don't with-timeout-suspend here.
	(edebug-display): Do it here instead.

2005-07-10  Richard M. Stallman  <rms@gnu.org>

	* cus-face.el (custom-theme-set-faces): Make it work.
	(custom-reset-faces): Doc fix.
	(custom-theme-reset-internal-face, custom-theme-face-value):
	Functions deleted.

	* custom.el (custom-push-theme): Maintain list of the settings
	of a given theme in its theme-settings property.
	Maintain position of old settings in the theme-value
	or theme-face property.
	(custom-enabled-themes): New variable.
	(custom-theme-enabled-p): New function.
	(provide-theme): Update custom-enabled-themes.
	Disable and reenable the `user' theme.
	(require-theme): Doc fix.
	(custom-do-theme-reset, custom-remove-theme): Functions deleted.
	(custom-theme-value, custom-theme-variable-value): Likewise.
	(custom-theme-reset-internal): Likewise.
	(custom-theme-load-themes): Fix bugs and use custom-disable-theme.
	(custom-enable-theme, custom-disable-theme): New functions.
	(custom-variable-theme-value, custom-face-theme-value): Likewise.
	(custom-theme-recalc-variable, custom-theme-recalc-face): Likewise.
	(custom-theme-reset-variables): Simplify.
	(deftheme, custom-declare-theme, custom-make-theme-feature):
	Definitions moved.

2005-07-10  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-show-region)
	(longlines-unshow-hard-newlines): Recognize hard newlines by
	non-nil hard property, instead of t.

2005-07-10  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper--key-maps): New variable.
	(viper-normalize-minor-mode-map-alist): Use viper--key-maps and
	emulation-mode-map-alists.
	(viper-envelop-ESC-key): Use viper-subseq.
	(viper-search-forward/backward/next): Disable debug-on-error.

	* emulation/viper-keym.el (viper-toggle-key, viper-quoted-insert-key)
	(viper-ESC-key): New defcustoms.

	* emulation/viper-macs.el (ex-map-read-args): Use viper-subseq.

	* emulation/viper-util.el (viper-key-to-emacs-key): Use viper-subseq.
	(viper-subseq): Copy of subseq from cl.el.

	* emulation/viper.el (viper-go-away, viper-set-hooks): Use
	emulation-mode-map-alists, advise self-insert-command, add-minor-mode.

	* emulation/viper-mous.el (viper-current-frame-saved): Use defvar.

	* emulation/viper-init.el: Get rid of -face in face names.

	* ediff-diff.el (ediff-extract-diffs, ediff-extract-diffs3):
	Make it work with longlines mode.

	* ediff-mult.el (ediff-meta-mode-hook): New variable.

	* ediff-ptch.el (ediff-file-name-sans-prefix): Quote regexp.

	* ediff-init.el: Get rid of -face in face names.

2005-07-10  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/edebug.el (edebug-enter): Call with-timeout-suspend
	and with-timeout-unsuspend.

	* emacs-lisp/debug.el (debug): Call with-timeout-suspend
	and with-timeout-unsuspend.

	* emacs-lisp/timer.el (with-timeout-timers): New variable.
	(with-timeout): Bind that variable to record timers.
	(with-timeout-suspend, with-timeout-unsuspend): New functions.

	* emacs-lisp/debug.el (debug-help-follow): New function.
	(debugger-mode-map): Use that instead of help-follow.
	(debugger-setup-buffer): Use eval-buffer-list
	to handle eval-buffer frames.

2005-07-10  N. Raghavendra  <raghu@mri.ernet.in>  (tiny change)

	* timezone.el (timezone-parse-date): Change first regexp
	so it will not mistakenly match dates with no time zone.

2005-07-10  Jeff Dwork  <jeff.dwork@amd.com>  (tiny change)

	* facemenu.el (facemenu-read-color): Do case-insensitive matching.

2005-07-10  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-initialize-safe-set)
	(custom-initialize-safe-default): New functions.

	* frame.el (blink-cursor-mode): Use `custom-initialize-safe-default'
	and simplify :init-value.

	* tooltip.el (tooltip-mode): Use `custom-initialize-safe-default'
	and simplify :init-value.  Delete obsolete comment.

	* startup.el (command-line): Use `custom-reevaluate-setting' to
	handle `tooltip-mode'.  Delete obsolete comment.

	* files.el (set-visited-file-name): Avoid calling
	`file-name-nondirectory' with a nil argument.

2005-07-09  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/debug.el (debugger-setup-buffer): When eval-buffer
	was called with nil for the buffer, handle the read position right.
	Handle read position for eval-region, too.

2005-07-09  Juri Linkov  <juri@jurta.org>

	* fringe.el (fringe-mode): Add period in docstring.
	(fringe-query-style): Build prompt depending on `all-frames' arg.

	* dired.el (dired-marker-char): Avoid quotations for `do' and `mark'
	to not create links to unrelated functions in the Help buffer.

	* progmodes/compile.el (compilation-mode-hook, compilation-mode):
	Doc fix.

	* simple.el (next-error-hook): New variable.
	(next-error): Use it.  Doc fix.

	* textmodes/ispell.el (ispell-command-loop): Add current
	dictionary name and program name to mode-line-format.
	(ispell-region, ispell-process-line): Add current dictionary name
	and program name to messages.

2005-07-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-embedded-announce-formula-alist)
	(calc-embedded-open-close-formula-alist)
	(calc-embedded-open-close-word-alist)
	(calc-embedded-open-close-plain-alist)
	(calc-embedded-open-close-new-formula-alist)
	(calc-embedded-open-close-mode-alist)
	(calc-embedded-new-buffer-hook, calc-embedded-new-formula-hook)
	(calc-embedded-mode-hook): New variables.

	* calc/calc-embed.el (calc-embedded-firsttime)
	(calc-embedded-firsttime-buf, calc-embedded-firsttime-formula):
	New variables.
	(calc-do-embedded): Use calc-embedded-firsttime,
	calc-embedded-firsttime-buf and calc-embedded-firsttime-formula to
	determine whether or not to run hooks.
	(calc-embedded-make-info): Set calc-embedded-firsttime-buf and
	calc-embedded-firsttime-formula appropriately.
	Set calc-embedded delimiter variables according to mode.

2005-07-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-proper-noun-list):
	Check for "emacs", etc., as entire symbol, not just as word.
	(checkdoc-file-comments-engine): Use regexp-quote on FN.

	* files.el (set-visited-file-name): Report the error
	for "empty filename" earlier.
	(kill-some-buffers): Ignore buffers already dead.

	* fringe.el (fringe-mode): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-maybe-guarded):
	Check for (featurep 'xemacs) and turn off warnings in what it guards.
	Use unwind-protect to ensure byte-compile-unresolved-functions
	is updated.

	* whitespace.el (whitespace-buffer-leading-cleanup):
	Simplify w/ skip-chars-forward.
	(whitespace-buffer-trailing-cleanup): Simplify w/ skip-chars-backward.

	* mail/rmail.el (rmail-only-expunge): Fix paren error.
	Unconditionally try to leave point at the same old place.

2005-07-08  Ralf Angeli  <angeli@iwi.uni-sb.de>  (tiny change)

	* comint.el (comint-postoutput-scroll-to-bottom)
	(comint-show-maximum-output): Take scroll-margin into consideration.

2005-07-08  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-use-filename-at-point): New choice `guess'.
	(ido-file-internal): Try ffap-guesser if selected.

	* ido.el (ido-before-fallback-functions): New hook.
	(ido-buffer-internal, ido-file-internal, ido-read-buffer)
	(ido-read-file-name): Run it.

2005-07-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/hideif.el (hide-ifdef-use-define-alist): Pass a list of
	strings rather than a list of symbols to the completion function.

2005-07-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-apply-units): Change the places in
	which units are simplified.

2005-07-07  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-option, customize-option-other-window):
	Make them handle aliases.

	* custom.el (custom-variable-p): Make it recursively follow
	aliases.  Mention that in the docstring.

2005-07-07  Richard M. Stallman  <rms@gnu.org>

	* cus-start.el (exec-path): Use `directory' instead of `file'.
	Fix tag for nil.

2005-07-07  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-rename-buffer): Use `generate-new-buffer' also
	when called non-interactively.  Doc fix.

2005-07-07  Lute Kamstra  <lute@gnu.org>

	* elide-head.el (elide-head-headers-to-hide): Recognize the FSF's
	new address as well.

2005-07-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el: Require font-lock for displaying errors.
	Used by gdb-ui.el.

2005-07-07  Juanma Barranquero  <lekktu@gmail.com>

	* hi-lock.el (hi-lock-find-patterns): Protect also against invalid
	values for the pattern lists which are `read'able but not
	`append'able (like symbols).

2005-07-06  Richard M. Stallman  <rms@gnu.org>

	* progmodes/flymake.el (flymake-float-time): Instead of
	with-no-warnings, test for XEmacs.
	(flymake-replace-regexp-in-string): Test fboundp of replace-in-string
	to avoid warning.

2005-07-06  Juanma Barranquero  <lekktu@gmail.com>

	* w32-vars.el (w32-fixed-font-alist): Fix typo in `defcustom' tag.

2005-07-05  Lute Kamstra  <lute@gnu.org>

	* battery.el: Add support for Darwin (with much debugging help
	from Samuel Lauber <sam124@operamail.com>).
	(battery-status-function, battery-echo-area-format)
	(battery-mode-line-format): Add support for pmset on Darwin.
	(battery-load-low, battery-load-critical): New user options.
	(battery-pmset): New function.

2005-07-05  Lute Kamstra  <lute@gnu.org>

	Update FSF's address in GPL notices.

	* textmodes/page-ext.el: Update FSF's address.

2005-07-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Prevent adaptive
	filling from using prefix when filling a single-line docstring.

	* progmodes/flymake.el: Remove useless eval-when-compile.

	* arc-mode.el (archive-lzh-ogm): Reorder save excursion/restriction.

2005-07-04  Richard M. Stallman  <rms@gnu.org>

	* textmodes/org.el (org-file-apps-defaults-gnu):
	Rename from org-file-apps-defaults-linux.
	(org-default-apps): Don't test system-type for `linux'.
	(org-file-apps): Doc fix.

2005-07-04  David Ponce  <david@dponce.com>

	* tree-widget.el: Improve header Commentary section.
	(tree-widget) [defgroup]
	(tree-widget-image-enable, tree-widget-themes-directory)
	(tree-widget-theme, tree-widget-image-properties-emacs)
	(tree-widget-image-properties-xemacs, tree-widget-create-image)
	(tree-widget-image-formats, tree-widget-control)
	(tree-widget-empty-control, tree-widget-leaf-control)
	(tree-widget-guide, tree-widget-end-guide, tree-widget-no-guide)
	(tree-widget-handle, tree-widget-no-handle, tree-widget-p)
	(tree-widget-keep, tree-widget-after-toggle-functions)
	(tree-widget-open-node, tree-widget-close-node): Doc fix.
	(tree-widget-open-control, tree-widget-close-control): Fix doc and
	:help-echo message.
	(tree-widget-set-theme): Doc fix.  Use `string-equal'.
	(tree-widget-image-properties): Doc fix.  Clearer implementation.
	(tree-widget--cursors): New constant.
	(tree-widget-lookup-image): New function split from
	`tree-widget-find-image'.  Clearer implementation.
	(tree-widget-find-image): Use it.
	(tree-widget-button-keymap): Use `set-keymap-parent'.
	(tree-widget) [define-widget]: Use `widget-children-value-delete'.
	Define the sub-widgets here.
	(tree-widget-node): Check that :node is not a tree-widget.
	(tree-widget-get-super, tree-widget-open-control)
	(tree-widget-close-control, tree-widget-empty-control)
	(tree-widget-leaf-control, tree-widget-guide)
	(tree-widget-end-guide, tree-widget-no-guide, tree-widget-handle)
	(tree-widget-no-handle, tree-widget-value-delete)
	(tree-widget-map): Remove.
	(tree-widget-children-value-save): Doc fix.  Simplified.
	(tree-widget-value-create): Update according to previous changes.

2005-07-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Leading space replaced by TABS.
	(org-recalc-marks, org-table-rotate-recalc-marks)
	(org-table-get-specials): Treat "^" and "_" marks.
	(org-table-justify-field-maybe): Optional argument NEW.
	(org-table-eval-formula): Parsing of the format simplified.
	New modes C,I.  Honor the %= parameter in the current table.
	Avoid unnecessary re-align by using the NEW argument to
	`org-table-justify-field-maybe'.
	(org-calc-default-modes): Default for date-format mimics org-mode.
	(org-agenda, org-timeline): Quote argument in org-agenda-redo-command.

2005-07-03  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-face.el (custom-theme-set-faces): Make it handle face
	aliases whose alias declarations are pre- or autoloaded.

2005-07-04  Juri Linkov  <juri@jurta.org>

	* faces.el (read-face-name): Put the code for getting a face name
	from the buffer before adding the faces from the `face' property.
	Use `completing-read-multiple' instead of `completing-read'.
	Require `crm'.  Add default value and post-process the returned
	list of faces.

	* emacs-lisp/crm.el (crm-find-current-element)
	(crm-minibuffer-complete-and-exit): Handle minibuffer prompt.

	* emacs-lisp/lisp-mode.el (eval-defun-1):
	* emacs-lisp/edebug.el (edebug-eval-defun):
	Remove unnecessary quotes.

2005-07-04  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/prolog.el (prolog-eof-string): Doc fixes.
	(prolog-indent-level): Fix typo in docstring.

	* info.el (Info-history, Info-history-forward)
	(Info-history-list, Info-speedbar-fetch-file-nodes): Doc fixes.

	* add-log.el (add-change-log-entry):
	* comint.el (comint-dynamic-list-input-ring)
	(comint-dynamic-list-completions):
	* dabbrev.el (dabbrev-expand):
	* delim-col.el (delimit-columns-rectangle-line):
	* diff-mode.el (diff-context->unified, diff-reverse-direction)
	(diff-unified->context):
	* ediff-init.el (ediff-abbrev-jobname):
	* ediff-mult.el (ediff-replace-session-status-in-meta-buffer)
	(ediff-replace-session-activity-marker-in-meta-buffer):
	* info.el (Info-summary):
	* lpr.el (printify-region):
	* printing.el (pr-create-interface):
	* ps-print.el (ps-print-quote):
	* ses.el (ses-column-widths, ses-print-cell)
	(ses-adjust-print-width, ses-center):
	* shell.el (shell-file-name-quote-list):
	* strokes.el (strokes-read-stroke, strokes-read-complex-stroke)
	(strokes-fill-current-buffer-with-whitespace)
	(strokes-xpm-for-stroke, strokes-list-strokes)
	(strokes-xpm-char-bit-p, strokes-xpm-for-compressed-string):
	* term.el (term-dynamic-list-input-ring)
	(term-dynamic-list-completions):
	* calc/calc.el (math-format-stack-value):
	* emacs-lisp/edebug.el (edebug-display-freq-count):
	* progmodes/delphi.el (delphi-indent-line, delphi-fill-comment)
	(delphi-new-comment-line):
	* progmodes/ebnf2ps.el (ebnf-eps-filename, ebnf-trim-right):
	* progmodes/executable.el (executable-set-magic):
	* progmodes/python.el (inferior-python-mode):
	* progmodes/scheme.el (scheme-mode-syntax-table):
	* progmodes/sh-script.el (sh-maybe-here-document):
	* progmodes/sql.el (sql-copy-column):
	* progmodes/tcl.el (tcl-comment-indent, tcl-quote):
	* textmodes/bibtex.el (bibtex-mode):
	* textmodes/sgml-mode.el (html-imenu-index, sgml-attributes)
	(sgml-auto-attributes):
	* textmodes/table.el (table-insert, table-shorten-cell)
	(table--generate-source-scan-lines, table-delete-row)
	(*table--cell-delete-char, table--spacify-frame)
	(table--horizontally-shift-above-and-below)
	(table--cell-insert-char, table--cell-blank-str)
	(table--fill-region-strictly):
	* textmodes/tex-mode.el (tex-insert-quote, latex-find-indent):
	* textmodes/texinfo.el (texinfo-insert-quote): "?\ " -> "?\s".

	* add-log.el (change-log):
	* apropos.el (apropos):
	* comint.el (comint-completion, comint-source):
	* dabbrev.el (dabbrev):
	* delim-col.el (columns):
	* diff-mode.el (diff-mode):
	* ediff.el (ediff):
	* ediff-diff.el (ediff-diff):
	* ediff-init.el (ediff-highlighting, ediff-merge, ediff-hook):
	* ediff-mult.el (ediff-mult):
	* ediff-ptch.el (ediff-ptch):
	* ediff-wind.el (ediff-window):
	* facemenu.el (facemenu):
	* indent.el (indent):
	* info.el (info):
	* jka-cmpr-hook.el (compression, jka-compr):
	* lpr.el (lpr):
	* outline.el (outlines):
	* pcmpl-cvs.el (pcmpl-cvs):
	* pcmpl-rpm.el (pcmpl-rpm):
	* printing.el (printing):
	* ps-print.el (postscript, ps-print, ps-print-horizontal)
	(ps-print-vertical, ps-print-headers, ps-print-font)
	(ps-print-color, ps-print-face, ps-print-n-up, ps-print-zebra)
	(ps-print-background, ps-print-printer, ps-print-page)
	(ps-print-miscellany):
	* ses.el (ses):
	* shell.el (shell, shell-directories, shell-faces):
	* startup.el (initialization):
	* strokes.el (strokes):
	* term.el (term):
	* uniquify.el (uniquify):
	* w32-vars.el (w32):
	* calc/calc.el (calc):
	* emacs-lisp/bytecomp.el (bytecomp):
	* emacs-lisp/cl-indent.el (lisp-indent):
	* emacs-lisp/edebug.el (edebug):
	* emacs-lisp/elp.el (elp):
	* emacs-lisp/testcover.el (testcover):
	* emacs-lisp/trace.el (trace):
	* emulation/viper-ex.el (viper-ex):
	* emulation/viper-mous.el (viper-mouse):
	* mail/mailalias.el (mailalias):
	* mail/supercite.el (supercite, supercite-frames)
	(supercite-attr, supercite-cite, supercite-hooks):
	* net/rcompile.el (remote-compile):
	* net/rlogin.el (rlogin):
	* obsolete/ooutline.el (outlines):
	* progmodes/delphi.el (delphi):
	* progmodes/ebnf2ps.el (postscript, ebnf2ps, ebnf-special)
	(ebnf-except, ebnf-repeat, ebnf-terminal, ebnf-non-terminal)
	(ebnf-production, ebnf-shape, ebnf-displacement, ebnf-syntactic)
	(ebnf-optimization):
	* progmodes/etags.el (etags):
	* progmodes/executable.el (executable):
	* progmodes/idlwave.el (idlwave):
	* progmodes/pascal.el (pascal):
	* progmodes/prolog.el (prolog):
	* progmodes/python.el (python):
	* progmodes/scheme.el (scheme):
	* progmodes/sh-script.el (sh, sh-script):
	* progmodes/sql.el (SQL):
	* progmodes/tcl.el (tcl):
	* textmodes/bibtex.el (bibtex, bibtex-autokey):
	* textmodes/enriched.el (enriched):
	* textmodes/makeinfo.el (makeinfo):
	* textmodes/sgml-mode.el (sgml):
	* textmodes/table.el (table-hooks):
	* textmodes/tex-mode.el (tex-file, tex-run, tex-view):
	* textmodes/texinfo.el (texinfo):
	* textmodes/two-column.el (two-column):
	Finish `defgroup' description with period.

	* emacs-lisp/cl-indent.el (lisp-indent-maximum-backtracking):
	* eshell/esh-var.el (eshell-var):
	* progmodes/vhdl-mode.el (vhdl-testbench):
	* textmodes/org.el (org): Fix typos in docstrings.

	* emacs-lisp/timer.el (with-timeout): Improve argument/docstring
	consistency.

	* progmodes/flymake.el (flymake-find-file): Remove.
	(flymake-float-time): Use `with-no-warnings'.
	(flymake-check-start-time, flymake-check-was-interrupted)
	(flymake-err-info, flymake-is-running, flymake-last-change-time)
	(flymake-new-err-info): `defvar' at compile time.

2005-07-03  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-hook): Doc fix.
	(occur-1): Don't call `occur-hook' if there are no matches.

2005-07-03  Richard M. Stallman  <rms@gnu.org>

	* emulation/tpu-edt.el (tpu-original-global-map): Don't copy
	global-map, save the same map.
	(global-map): Don't alter it at top level.
	(tpu-edt-on): Save global map in tpu-original-global-map, then copy.
	Then alter it here instead.
	(tpu-edt-off): Set global-map to the saved one.

	* emulation/tpu-edt.el (tpu-emacs19-p): Var deleted.
	All references simplified.
	(tpu-lucid-emacs-p): Rename from tpu-lucid-emacs19-p.  Uses changed.
	(zmacs-regions): Add defvar.
	(repeat-complex-command-map): Everything about that deleted.

	* textmodes/artist.el (artist-key-is-drawing)
	(artist-key-endpoint1, artist-key-poly-point-list)
	(artist-key-shape, artist-key-draw-how, artist-popup-menu-table)
	(artist-key-compl-table, artist-rb-save-data)
	(artist-arrow-point-1, artist-arrow-point-2): Move defvars up.
	Don't put them in eval-when-compile.
	(artist-set-arrow-points-for-poly): Use `last', not `artist-last'.

	* progmodes/ebrowse.el (ebrowse-revert-tree-buffer-from-file):
	Use with-no-warnings.

	* net/browse-url.el (dos-windows-version): Add defvar.

	* mail/supercite.el (filladapt-prefix-table): Add defvar.

	* mail/rmailsum.el (rmail-summary-redo): Add defvar.
	(rmail-summary-mode-map, rmail-summary-overlay): Defvars moved up.
	(rmail-new-summary-line-count): Rename from new-summary-line-count.
	Add defvar.
	(rmail-summary-beginning-of-message): Use with-no-warnings.
	(rmail-summary-first-message, rmail-summary-last-message): Likewise.

	* emulation/vip.el (vip-replace-string, ex-map, ex-read):
	Use with-no-warnings.

	* emulation/vi.el (vi-mark-region): Use c-mark-function.
	(c-mark-function): Add point-moving-unit property.
	(vi-goto-line): Use with-no-warnings.

	* emulation/edt.el (edt-last-copied-word): Add defvar.
	(zmacs-region-stays): Likewise.
	(edt-mark-section-wisely): Use c-mark-function for C.
	Use mark-defun for Fortran.
	(time-string): defvar deleted.
	(edt-display-the-time): Don't set time-string.

	* emacs-lisp/macroexp.el (macroexp-accumulate): Rename arg to var+list.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn):
	Don't warn when name is not constant
	or for defining the group `emacs'.

	* tooltip.el (gud-tooltip-mode): Add defvar.

	* startup.el (default-frame-background-mode): Add defvar.

	* smerge-mode.el (smerge-mode): Add duplicate defvar near top.

	* info.el (tool-bar-map): Add defvar.

	* dired.el (dnd-protocol-alist): Add defvar.

	* dired-aux.el (dired-query): Display question with answer, when
	the user answers.

	* custom.el (custom-add-option): Doc fix.

	* bookmark.el (Info-current-node, Info-suffix-list): Add defvars.

2005-07-03  Eli Zaretskii  <eliz@gnu.org>

	* font-lock.el (font-lock-regexp-grouping-construct): Fix the
	bogus name from the last change.

2005-07-02  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-declare-variable): Fix typos in comment.
	(custom-known-themes): Doc fix.
	(custom-theme-directory): New defcustom.
	(require-theme): Make it check `custom-theme-directory'.

	* cus-theme.el (custom-new-theme-mode): New function.
	(custom-theme-name, custom-theme-variables, custom-theme-faces)
	(custom-theme-description): Add compiler defvars.
	(customize-create-theme): Add doc to the "*New Custom Theme*"
	buffer.  Use `custom-new-theme-mode'.
	(custom-theme-write): Put the created buffer in emacs-lisp-mode
	and save it to the `custom-theme-directory'.  Make this the
	default directory of the buffer.

2005-07-02  David Hunter  <hunterd_42@comcast.net>  (tiny change)

	* progmodes/flymake.el (flymake-mode, flymake-mode-off):
	Fix unbalanced parentheses.

2005-07-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-mode-on, flymake-mode-off): Move body
	into flymake-mode and delegate to flymake-mode.

	* find-file.el (ff-which-function-are-we-in): Clean up.

2005-07-02  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-rename-buffer): Fix docstring.

	* emulation/edt.el (*EDT-keys*, edt-default-global-map)
	(edt-last-copied-word, edt-learn-macro-count)
	(edt-orig-page-delimiter, edt-orig-transient-mark-mode)
	(edt-rect-start-point, edt-user-global-map, rect-start-point)
	(time-string, zmacs-region-stays):
	* emulation/edt-mapper.el (edt-save-function-key-map)
	(EDT-key-name): `defvar' to silence the byte-compiler.

2005-07-02  Martin Rudalics  <rudalics@gmx.at>

	* font-lock.el (font-lock-regexp-grouping-backslash): Rename from
	font-lock-regexp-backslash.  Doc fix.
	(font-lock-regexp-backslash-grouping-construct): Rename from
	font-lock-regexp-backslash-construct.  Doc fix.
	(lisp-font-lock-keywords-2): Fix highlighting of Elisp regexp
	grouping constructs.

2005-07-02  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (bootstrap): Remove the $(EMACS) binary after
	updating all the prerequisites.

2005-07-01  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/org.el (org-agenda-start-on-weekday)
	(org-calendar-to-agenda-key, org-agenda-sorting-strategy)
	(org-agenda-use-time-grid, org-archive-location)
	(org-allow-space-in-links, org-usenet-links-prefer-google)
	(org-enable-table-editor, org-export-default-language)
	(org-export-html-show-new-buffer, org-fill-paragraph)
	(org-cycle, org-goto-ret, org-goto-left, org-goto-right)
	(org-goto-quit, org-occur, org-eval-in-calendar)
	(org-agenda-cleanup-fancy-diary, org-agenda-no-heading-message)
	(org-agenda-diary-entry, org-remember-help)
	(org-table-convert-region, org-at-table-p)
	(org-table-move-row-down, org-table-move-row-up)
	(org-table-copy-region, org-table-toggle-vline-visibility)
	(org-table-get-stored-formulas, org-table-get-specials)
	(org-recalc-commands, org-table-eval-formula)
	(org-table-formula-substitute-names, orgtbl-make-binding)
	(org-format-org-table-html, org-format-table-table-html)
	(org-format-table-table-html-using-table-generate-source)
	(org-customize): Fix typos in docstrings.
	(org-level-2, org-at-timestamp-p, org-agenda-day-view)
	(org-agenda-toggle-diary, org-agenda-toggle-time-grid)
	(org-back-to-heading): Doc fixes.
	(org-agenda-toggle-time-grid, org-cmp-category, org-cmp-time)
	(org-agenda-change-all-lines, org-get-header):
	Improve argument/docstring consistency.
	(orgtbl-error): Fix error message.

	* progmodes/flymake.el (flymake-find-possible-master-files)
	(flymake-master-file-compare, flymake-get-line-err-count)
	(flymake-highlight-line, flymake-gui-warnings-enabled):
	Fix typos in docstrings.
	(flymake-parse-line, flymake-get-project-include-dirs-function)
	(flymake-get-prev-err-line-no, flymake-goto-prev-error):
	Doc fixes.
	(flymake-get-project-include-dirs-function)
	(flymake-make-err-menu-data):
	Improve argument/docstring consistency.

2005-07-01  Lute Kamstra  <lute@gnu.org>

	* battery.el (battery-linux-proc-apm): Fix typo in docstring.
	Catch errors with ignore-errors.  Use temporary buffer.
	(battery-linux-proc-acpi): Fix typo in docstring.  Document `%r'.

	* facemenu.el (facemenu-unlisted-faces): Delete foreground and
	background color faces.
	(facemenu-set-foreground, facemenu-set-background):
	Use facemenu-set-face-from-menu.
	(facemenu-set-face-from-menu): Treat face names that start with
	"fg:" or "bg:" as special.
	(facemenu-add-new-color): Don't create faces.  Simplify.

2005-06-30  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/crm.el (crm-do-completion): Handle minibuffer prompt.
	(crm-find-current-element): Likewise.

2005-06-30  Johan Bockgård  <bojohan@users.sourceforge.net>

	* help-fns.el (help-do-arg-highlight): Regexp-quote argument names.

2005-06-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* arc-mode.el (archive-extract): Make it work as a mouse binding.
	(archive-mouse-extract): Make it an obsolete alias.
	(archive-mode-map): Don't use archive-mouse-extract any more.
	(archive-mode, archive-extract): write-contents-hooks ->
	write-contents-functions.
	(archive-arc-rename-entry, archive-lzh-rename-entry): Remove unused
	first arg.
	(archive-rename-entry): Update the call.
	(archive-zip-summarize): Remove unused var `method'.
	(archive-lzh-summarize): Remove unused var `creator'.

	* emacs-lisp/debug.el (debug): Quieten Drew Adams by killing the
	dedicated frame upon exit.

	* arc-mode.el: Bind inhibit-read-only rather than buffer-read-only.
	(archive-zip-extract, archive-zip-expunge)
	(archive-zip-update, archive-zip-update-case): Use executable-find.
	(archive-resummarize, archive-flag-deleted, archive-unmark-all-files):
	Use restore-buffer-modified-p.
	(archive-extract, archive-add-new-member, archive-write-file-member):
	Use with-current-buffer.
	(archive-lzh-ogm, archive-zip-chmod-entry): Use dolist.

2005-06-30  Andreas Schwab  <schwab@suse.de>

	* progmodes/gud.el (gud-filter): Remove unneeded progn.

2005-06-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/sh-script.el (sh-get-kw): `&' also separates words.

2005-06-30  Juri Linkov  <juri@jurta.org>

	* faces.el (vertical-border): Inherit from mode-line-inactive
	only on tty.

2005-06-30  Juanma Barranquero  <lekktu@gmail.com>

	* help-fns.el (help-do-arg-highlight): Highlight also -ARG (for
	example, -NLINES in the `occur' docstring).

	* replace.el (occur-1): When no matches are found, do not set the
	`buffer-read-only' and modified flags for the occur buffer,
	because it is deleted.

	* emulation/cua-base.el (cua-check-pending-input)
	(cua-repeat-replace-region, cua-mode, cua-debug)
	(cua-auto-tabify-rectangles, cua-inhibit-cua-keys):
	Fix typos in docstrings.

	* emulation/cua-gmrk.el (cua-toggle-global-mark)
	(cua-cut-region-to-global-mark)
	(cua--cut-rectangle-to-global-mark):
	Remove period from end of messages.

	* emulation/cua-rect.el (cua-do-rectangle-padding):
	Remove period from end of messages.
	(cua--rectangle-seq-format): Fix typo in docstring.
	(cua-sequence-rectangle, cua-fill-char-rectangle):
	Improve argument/docstring consistency.

2005-06-29  Juri Linkov  <juri@jurta.org>

	* faces.el (default-frame-background-mode): New internal variable.
	(frame-set-background-mode): Use it.

	* startup.el (normal-top-level): Set default-frame-background-mode
	instead of frame-background-mode.  Before setting it, test for its
	nil value.  Remove tests for frame-background-mode and frame
	parameter `reverse'.  Add test for "unspecified-fg".

	* term/xterm.el (xterm-rxvt-set-background-mode):
	* term/rxvt.el (rxvt-set-background-mode):
	Set default-frame-background-mode instead of frame-background-mode.

2005-06-29  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (set-variable): Warn about obsolete user variables.

	* imenu.el (imenu--completion-buffer):
	* mouse.el (mouse-buffer-menu-alist):
	* msb.el (msb-invisible-buffer-p):
	* calendar/diary-lib.el (diary-header-line-format):
	* emacs-lisp/pp.el (pp-buffer):
	* progmodes/cperl-mode.el (cperl-do-auto-fill):
	* textmodes/picture.el (picture-replace-match):
	Change space constants followed by a sexp to "?\s ".

	* play/decipher.el (decipher-loop-with-breaks):
	* textmodes/texinfo.el (texinfo-insert-@item): Change space
	constants "protected" from end of line by a comment to "?\s".

2005-06-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (save-buffer-state): Use `declare'.

	* progmodes/cperl-mode.el (cperl-find-pods-heres): Don't gratuitously
	reset the syntax-table to cperl-mode-syntax-table.
	(cperl-mode): Make _ into word-syntax during font-locking so "print" in
	"foo_print_bar" is not matched as a reserved keyword.

2005-06-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (orgtbl-setup): New function, for delayed
	setup for the orgtbl commands.
	(org-calc-default-modes): New option.
	(orgtbl-make-binding): Use `defun' to get better help display.
	(org-diary): Call `org-compile-prefix-format'.
	(org-table-formula-substitute-names): New function.
	(org-agenda-day-view, org-agenda-week-view): New commands.
	(org-agenda-toggle-week-view): Command removed.
	(org-tbl-menu): Split off from org-org-menu.
	(org-mode): Move removal of outline-mode menus to here.
	(org-table-formula-debug): New option.
	(org-table-insert-row): Keep first field if just "#" or "*".
	(org-mode): Paragraph regexps fixed.
	(org-table-recalculate-regexp): New constant.
	(org-table-justify-field-maybe): Avoid replace if not necessary.
	(org-copy-special, org-cut-special): Use `call-interactively'.
	(org-table-copy-region): Take region from `interactive' call.
	(org-trim): Return string even if no match.
	(org-formula): New face.
	(org-set-font-lock-defaults): No longer highlight "FIXME".
	But highlight formula-related fields in table.
	(org-table-p): Use regexp, not fontification.
	(org-table-align): Handle white space at end of line.
	(org-table-formula-evaluate-inline): New option.
	(org-mode): Auto-wrapping in comment lines turned off.
	(org-table-copy-down): Evaluate only in copied field, not in
	destination.
	(org-table-current-formula): Variable removed.
	(org-table-store-formulas, org-table-get-stored-formulas)
	(org-table-modify-formulas, org-table-replace-in-formulas)
	(org-table-maybe-eval-formula): New functions.
	(org-table-get-formula): Modify to use stored formulas.
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column): Call `org-table-modify-formulas'.
	(org-complete): Add completion for keyword formulas.
	(orgtbl-mode): Pull orgtbl-mode-map to start of
	minor-mode-map-alist.

2005-06-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-check): Require `compile' before
	modifying its variables.

	* newcomment.el (comment-indent-default): Don't get fooled by an early
	end of buffer.

2005-06-28  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-print-version): Fix version number.

2005-06-28  Luc Teirlinck  <teirllm@auburn.edu>

	* textmodes/ispell.el (ispell-word): Remove stray parenthesis.

2005-06-28  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-use-local-map): Variable deleted.
	(flyspell-local-mouse-map): Declaration deleted.
	(flyspell-mouse-map): Bind only mouse-2.
	(flyspell-mode-map): Don't test flyspell-use-local-map.
	(flyspell-overlay-keymap-property-name): Var deleted.
	(flyspell-mode-on): Don't make local bindings for
	flyspell-mouse-map and flyspell-mode-map.
	(make-flyspell-overlay): Unconditionally put on `keymap' text prop.

	* textmodes/ispell.el (ispell-word): Do not ignore short words.

	* progmodes/compile.el (compilation-next-error-function):
	Don't switch buffers; operate on the current buffer.

	* progmodes/compile.el (compilation-error-file-name)
	(compilation-warning-file-name, compilation-info-file-name)
	(compilation-line-number, compilation-column-number): New faces.
	(compilation-error-face, compilation-warning-face)
	(compilation-info-face, compilation-line-face)
	(compilation-column-face): Use them.

	* facemenu.el (facemenu-add-face): Warn when font-lock is active.

	* comint.el (comint-password-prompt-regexp): Accept ", try again".

	* bindings.el (global-map): Bind insertchar and its variants.

2005-06-27  Richard M. Stallman  <rms@gnu.org>

	* textmodes/artist.el (artist-text-overwrite)
	(artist-figlet-get-extra-args, artist-text-see-thru): Use read-string.

2005-06-27  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: It was not working the page selection for printing.
	Reported by Sebastian Tennant <sebyte@smolny.plus.com>.
	(ps-print-version): New version 6.6.7.
	(ps-end-sheet): New fun.
	(ps-header-sheet, ps-end-job): Call it.

2005-06-27  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (add-to-list, add-to-ordered-list): Doc fixes.

2005-06-27  Lute Kamstra  <lute@gnu.org>

	* facemenu.el (facemenu-unlisted-faces): Add foreground and
	background color faces.
	(facemenu-get-face): Delete function.
	(facemenu-set-face-from-menu): Don't call facemenu-get-face.
	(facemenu-add-new-color): Make second argument mandatory.
	Create the appropriate face and return it.  Simplify.
	(facemenu-set-foreground, facemenu-set-background): Don't check if
	color is defined.  Use return value of facemenu-add-new-color.

2005-06-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-filter): Add missing argument to
	with-selected-window.

2005-06-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Don't automatically add
	a :require to the defcustom.

	* emacs-lisp/autoload.el (make-autoload): Add the :setter for
	defcustoms corresponding to minor modes.

2005-06-26  David Ponce  <david@dponce.com>

	* recentf.el: Require tree-widget instead of wid-edit.
	(recentf-filename-handler): Fix widget :type.
	(recentf-cancel-dialog, recentf-open-more-files)
	(recentf-open-files-action): Doc fix.
	(recentf-dialog-goto-first): New function.
	(recentf-dialog-mode-map): Set parent keymap first.
	(recentf-dialog-mode): Define with define-derived-mode.
	Don't display continuation lines in dialogs.
	(recentf-edit-list): Rename from recentf-edit-selected-items.
	(recentf-edit-list-select): Rename from recentf-edit-list-action.
	Simplify.
	(recentf-edit-list-validate): New function.
	(recentf-edit-list): Update accordingly.
	(recentf-open-files-item-shift): Remove.
	(recentf-open-files-item): Convert menu elements into tree and
	link widgets.  Don't create the widgets.
	(recentf-open-files): Update accordingly.
	(recentf-save-list): Untabify.

2005-06-25  Luc Teirlinck  <teirllm@auburn.edu>

	* replace.el (keep-lines-read-args): Add INTERACTIVE arg.
	(keep-lines): Add INTERACTIVE arg.  Never delete lines only
	partially contained in the active region.  Do not take active
	region into account when called from Lisp, unless INTERACTIVE arg
	is non-nil.  Use `forward-line' instead of `beginning-of-line' to
	avoid trouble with fields.  Make marker point nowhere when no
	longer used.  Always return nil.  Doc fix.
	(flush-lines): Add INTERACTIVE arg.  Do not take active region
	into account when called from Lisp, unless INTERACTIVE arg is
	non-nil.  Use `forward-line' instead of `beginning-of-line' to
	avoid trouble with fields.  Make marker point nowhere when no
	longer used.  Always return nil.  Doc fix.
	(how-many): Add INTERACTIVE arg.  Make RSTART and REND args
	interchangeable.  Do not take active region into account when
	called from Lisp, unless INTERACTIVE arg is non-nil.  Do not print
	message in echo area when called from Lisp, unless INTERACTIVE arg
	is non-nil.  Avoid saying "1 occurrences".  Do not use markers.
	Return the number of matches.  Doc fix.
	(occur): Doc fix.
	(perform-replace): Make comment follow double space convention for
	the sake of `outline-minor-mode'.

	* faces.el (facep): Doc fix.

2005-06-25  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-enable-faces-p): New function.
	(facemenu-background-menu, facemenu-foreground-menu)
	(facemenu-face-menu): Add menu-enable property.

	* jka-compr.el (jka-compr-insert-file-contents):
	Special handling if cannot find the uncompression program.

	* cus-face.el (custom-face-attributes): Add autoload.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Bind comment-indent-function locally.

	* window.el (save-selected-window): Use save-current-buffer.

	* subr.el (with-selected-window): Use save-current-buffer.

	* progmodes/gud.el (gud-filter): Simplify using with-selected-window
	and with-current-buffer.

2005-06-24  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move-1): Fix previous change.

2005-06-24  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-1): Set `buffer-read-only' and the
	buffer-modified flag before running `occur-hook' to protect
	against unintentional buffer switches that can lead to data loss.

2005-06-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-print-command): Indent properly.
	(gud-gdb-marker-filter): Use font-lock-warning-face for any
	initial error.

	* progmodes/gdb-ui.el (gdb-send): Remove warning face from errors
	after fresh input.
	(gdb-var-create-handler): Put name of expression in quotes.

2005-06-23  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/ring.el (ring-elements): Make it return a list of the
	elements of RING in order, and without bogus nil elements.

2005-06-23  Richard M. Stallman  <rms@gnu.org>

	* simple.el (set-variable): Args renamed; doc fix.
	(line-move-1): When there are overlays around, use vertical-motion.

	* faces.el (escape-glyph): Use brown against light background.
	(nobreak-space): Rename from no-break-space.
	Fix previous change.

	* dired-aux.el (dired-do-copy): Fix arg prompt.

	* mail/sendmail.el (mail-setup-with-from): Fix custom type.

2005-06-23  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* mail/emacsbug.el (report-emacs-bug): Use "X server distributor"
	rather than "Distributor".

2005-06-23  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-special-form-p): New defun.
	(debug-on-entry): Use it.  New interactive declaration that uses
	function-called-at-point.

2005-06-23  Kim F. Storm  <storm@cua.dk>

	* subr.el (save-match-data): Add comment about using evaporate arg
	to set-match-data.

2005-06-22  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* cus-edit.el (customize-face)
	(customize-face-other-window): Handle face aliases.

	* faces.el (face-documentation, set-face-attribute)
	(face-spec-set): Handle face aliases.

2005-06-22  Juanma Barranquero  <lekktu@gmail.com>

	* help-mode.el (help-make-xrefs): If a symbol representing a face
	name is not followed by the word "face", it could still be a
	function or variable name, so don't bypass other checks.

2005-06-22  Juri Linkov  <juri@jurta.org>

	* ps-print.el (ps-face-foreground-name, ps-face-background-name):
	Replace aliased functions with calls where second arg `inherit' is t.

2005-06-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-error): New variable.
	(gdb-error): New function.
	(gdb-annotation-rules): Act on error-begin and error annotations.
	(gdb-concat-output): Use font-lock-warning-face for errors.

2005-06-22  Miles Bader  <miles@gnu.org>

	* bindings.el (propertized-buffer-identification): Use renamed
	`Buffer-menu-buffer' face.

	* faces.el (vertical-border): Rename from `vertical-divider'.
	(escape-glyph): Change dark-background color back to `cyan'.

2005-06-21  Juri Linkov  <juri@jurta.org>

	* faces.el (face-user-default-spec): Try getting `customized-face'
	prior to `saved-face'.
	(frame-background-mode): Refill docstring.

	* emacs-lisp/lisp-mode.el (eval-defun-1):
	* emacs-lisp/edebug.el (edebug-eval-defun):
	Set `saved-face' temporarily to nil before calling form.
	Set `customized-face' to the new spec after that.

2005-06-21  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (1value, lambda, key-substitution-in-progress):
	Doc fixes.

	* autoinsert.el (auto-insert-alist):
	* ses.el (ses-call-printer):
	* subr.el (noreturn):
	* emacs-lisp/lisp.el (check-parens):
	* emacs-lisp/byte-opt.el (byte-optimize-pure-func):
	* net/browse-url.el (browse-url-mosaic):
	* progmodes/cc-defs.el (c-safe-scan-lists):
	* progmodes/ebnf-abn.el (ebnf-abn-lex):
	* progmodes/ebnf-bnf.el (ebnf-bnf-lex):
	* progmodes/ebnf-dtd.el (ebnf-dtd-lex):
	* progmodes/ebnf-ebx.el (ebnf-ebx-lex):
	* progmodes/ebnf-iso.el (ebnf-iso-lex):
	* progmodes/ebnf-yac.el (ebnf-yac-lex): Fix spellings.

2005-06-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* pcvs-defs.el (cvs-menu): Add cvs-mode-mark and cvs-mode-unmark.

2005-06-21  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/appt.el (appt-make-list): Activate the package, if
	not already active (for backwards compatibility).

2005-06-20  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-ordered-list): Test membership with eq.  Simplify.

2005-06-20  Miles Bader  <miles@gnu.org>

	* faces.el (vertical-divider): New face.

2005-06-20  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (kill-whole-line): Doc fix.
	(next-error-buffer-p, next-error-find-buffer)
	(clone-indirect-buffer): Fix typos in docstrings.
	(comment-line-break-function): Doc fix: don't say variable
	is automatically buffer-local (it isn't).

2005-06-19  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-ftp.el (top):
	* net/tramp-smb.el (top):
	* net/tramp-util.el (top):
	* net/tramp-uu.el (top):
	* net/tramp-vc.el (top):
	* net/tramp.el (top): Revert copyright years back to original
	ones.  Tramp has a life outside GNU Emacs.

2005-06-19  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-use-echo-area): Don't make it obsolete.

2005-06-18  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep-regexp-alist): Use backreference at the
	end of first regexp to limit the match to the position between
	line number and source line with same separator character as used
	between file name and line number.  In the second regexp limit
	mouse-face area to file name and line number by adding new group
	for them and referring it in HYPERLINK arg.
	(grep-regexp-alist, grep-mode-font-lock-keywords): Use shy group.
	(grep-mode): Set font-lock-lines-before to 0 to not refontify the
	previous line where grep markers may be already removed.

2005-06-18  Peter Kleiweg  <p.c.j.kleiweg@rug.nl>

	* progmodes/ps-mode.el: Update version and maintainer's email address.

2005-06-18  Steve Youngs  <steve@xemacs.org>

	* net/browse-url.el (browse-url-browser-function)
	(browse-url-default-browser): Add firefox.
	(browse-url-firefox-program, browse-url-firefox-arguments)
	(browse-url-firefox-startup-arguments)
	(browse-url-firefox-new-window-is-tab): New defcustoms.
	(browse-url-firefox, browse-url-firefox-sentinel): New functions.

2005-06-17  Richard M. Stallman  <rms@gnu.org>

	* startup.el (command-line): Warn if specified user name has
	no home directory.

	* term.el (term-get-old-input, term-input-filter, term-input-sender)
	(term-mode-hook, term-exec-hook, term-escape-char): Doc fixes.

	* longlines.el (longlines-mode, longlines-show-hard-newlines):
	Doc fixes.

	* faces.el (underline): Try bold if terminal doesn't support underline.

	* mail/sendmail.el (mail-setup-with-from): New variable.
	(mail-insert-from-field): New function.
	(sendmail-send-it): Call it.
	(mail-setup): Optionally call it here.

	* term/linux.el: Call tty-no-underline.

2005-06-17  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/edebug.el (edebug-goto-here): Doc fix.

2005-06-17  Miles Bader  <miles@gnu.org>

	* ediff-init.el (ediff-current-diff-A, ediff-current-diff-B)
	(ediff-current-diff-C, ediff-current-diff-Ancestor)
	(ediff-fine-diff-A, ediff-fine-diff-B, ediff-fine-diff-C)
	(ediff-fine-diff-Ancestor, ediff-even-diff-A, ediff-even-diff-B)
	(ediff-even-diff-C, ediff-even-diff-Ancestor, ediff-odd-diff-A)
	(ediff-odd-diff-B, ediff-odd-diff-C, ediff-odd-diff-Ancestor):
	Remove "-face" suffix from face names.
	(ediff-current-diff-face-A, ediff-current-diff-face-B)
	(ediff-current-diff-face-C, ediff-current-diff-face-Ancestor)
	(ediff-fine-diff-face-A, ediff-fine-diff-face-B)
	(ediff-fine-diff-face-C, ediff-fine-diff-face-Ancestor)
	(ediff-even-diff-face-A, ediff-even-diff-face-B)
	(ediff-even-diff-face-C, ediff-even-diff-face-Ancestor)
	(ediff-odd-diff-face-A, ediff-odd-diff-face-B)
	(ediff-odd-diff-face-C, ediff-odd-diff-face-Ancestor):
	New backward-compatibility aliases for renamed faces.
	(ediff-current-diff-face-A, ediff-current-diff-face-B)
	(ediff-current-diff-face-C, ediff-current-diff-face-Ancestor)
	(ediff-fine-diff-face-A, ediff-fine-diff-face-B)
	(ediff-fine-diff-face-C, ediff-fine-diff-face-Ancestor)
	(ediff-even-diff-face-A, ediff-even-diff-face-B)
	(ediff-even-diff-face-C, ediff-even-diff-face-Ancestor)
	(ediff-odd-diff-face-A, ediff-odd-diff-face-B)
	(ediff-odd-diff-face-C, ediff-odd-diff-face-Ancestor):
	Use renamed ediff faces.

	* eshell/esh-test.el (eshell-test-ok, eshell-test-failed):
	Remove "-face" suffix from face names.
	(eshell-test-ok-face, eshell-test-failed-face):
	New backward-compatibility aliases for renamed faces.
	(eshell-run-test): Use renamed eshell-test faces.

	* eshell/em-prompt.el (eshell-prompt): Remove "-face" suffix from
	face name.
	(eshell-prompt-face): New backward-compatibility alias for renamed
	face.
	(eshell-emit-prompt): Use renamed eshell-prompt face.

	* eshell/em-ls.el (eshell-ls-directory, eshell-ls-symlink)
	(eshell-ls-executable, eshell-ls-readonly, eshell-ls-unreadable)
	(eshell-ls-special, eshell-ls-missing, eshell-ls-archive)
	(eshell-ls-backup, eshell-ls-product, eshell-ls-clutter):
	Remove "-face" suffix from face names.
	(eshell-ls-directory-face, eshell-ls-symlink-face)
	(eshell-ls-executable-face, eshell-ls-readonly-face)
	(eshell-ls-unreadable-face, eshell-ls-special-face)
	(eshell-ls-missing-face, eshell-ls-archive-face)
	(eshell-ls-backup-face, eshell-ls-product-face)
	(eshell-ls-clutter-face):
	New backward-compatibility aliases for renamed faces.
	(eshell-ls-decorated-name): Use renamed eshell-ls faces.

	* progmodes/cc-fonts.el (c-nonbreakable-space-face):
	Remove "-face" suffix from face name.
	(c-cpp-matchers): Use the variable `c-nonbreakable-space-face'
	instead of literal face.

2005-06-17  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/warnings.el (display-warning, lwarn)
	(warning-minimum-log-level): Doc fixes.
	(warning-minimum-level, warning-minimum-log-level):
	Add :debug to :type choices.

	* progmodes/ada-mode.el (ada-format-paramlist)
	(ada-get-indent-case, ada-check-matching-start)
	(ada-check-defun-name, ada-goto-matching-decl-start)
	(ada-goto-matching-start, ada-goto-matching-end, ada-tab)
	(ada-untab, ada-move-to-start, ada-fill-comment-paragraph)
	(ada-make-subprogram-body): Follow error conventions.
	(ada-case-exception-file, ada-indent-comment-as-code)
	(ada-indent-handle-comment-special, ada-indent-renames)
	(ada-indent-return, ada-search-directories-internal)
	(ada-tab-policy, ada-case-exception-substring)
	(ada-other-file-alist, ada-matching-start-re)
	(ada-matching-decl-start-re, ada-contextual-menu-last-point)
	(ada-imenu-generic-expression, ada-compile-goto-error)
	(ada-in-comment-p, ada-in-string-p, ada-in-string-or-comment-p)
	(ada-popup-menu, ada-add-extensions, ada-mode)
	(ada-region-selected, ada-create-case-exception)
	(ada-create-case-exception-substring, ada-after-keyword-p)
	(ada-activate-keys-for-case, ada-adjust-case-region)
	(ada-adjust-case-buffer, ada-format-paramlist)
	(ada-scan-paramlist, ada-insert-paramlist)
	(ada-indent-newline-indent)
	(ada-indent-newline-indent-conditional)
	(ada-justified-indent-current, ada-goto-previous-word)
	(ada-indent-current, ada-get-indent-open-paren)
	(ada-get-indent-paramlist, ada-get-indent-end)
	(ada-get-indent-case, ada-get-indent-when, ada-get-indent-if)
	(ada-get-indent-block-start, ada-get-indent-subprog)
	(ada-get-indent-noindent, ada-get-indent-label)
	(ada-get-indent-loop, ada-get-indent-type, ada-goto-stmt-start)
	(ada-search-prev-end-stmt, ada-goto-next-non-ws)
	(ada-goto-stmt-end, ada-goto-next-word)
	(ada-check-matching-start, ada-check-defun-name)
	(ada-goto-matching-decl-start, ada-goto-matching-start)
	(ada-goto-matching-end, ada-search-ignore-string-comment)
	(ada-in-decl-p, ada-looking-at-semi-or)
	(ada-looking-at-semi-private, ada-in-paramlist-p)
	(ada-in-open-paren-p, ada-tab, ada-indent-current-function)
	(ada-untab-hard, ada-move-to-start, ada-move-to-end)
	(ada-next-procedure, ada-previous-procedure, ada-next-package)
	(ada-previous-package, ada-create-menu)
	(ada-fill-comment-paragraph-justify)
	(ada-fill-comment-paragraph-postfix, ada-fill-comment-paragraph)
	(ada-other-file-name, ada-last-which-function-line)
	(ada-last-which-function-subprog, ada-which-function)
	(ada-get-body-name, ada-outline-level, ada-narrow-to-defun)
	(ada-gen-treat-proc, ada-check-emacs-version)
	(ada-continuation-indent, ada-align-region-separate):
	Fix typos in docstrings.
	(ada-adjust-case, ada-adjust-case-interactive): Doc fixes.

2005-06-16  Lute Kamstra  <lute@gnu.org>

	* simple.el (fundamental-mode): Run after-change-major-mode-hook
	conditionally.

2005-06-16  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-replace-by-expanded-filename)
	(comint-prompt-regexp, comint-delimiter-argument-list)
	(comint-preinput-scroll-to-bottom):
	* info.el (Info-hide-cookies-node):
	* ls-lisp.el (ls-lisp-classify):
	* find-file.el (ff-search-directories, ff-special-constructs)
	(ff-find-other-file):
	* font-lock.el (font-lock-keywords):
	* shell.el (shell-prompt-pattern)
	(shell-dynamic-complete-functions, shell-mode)
	(shell-delimiter-argument-list):
	* term.el (term-replace-by-expanded-filename)
	(term-prompt-regexp, term-delimiter-argument-list):
	* woman.el (woman-ignore, woman0-if):
	* emacs-lisp/derived.el (derived-mode-init-mode-variables):
	* emacs-lisp/elint.el (elint-init-env):
	* emacs-lisp/regexp-opt.el (regexp-opt-depth):
	* eshell/esh-mode.el (eshell-preinput-scroll-to-bottom):
	* language/ethio-util.el (ethio-tilde-escape)
	(ethio-use-three-dot-question):
	* net/zone-mode.el (zone-mode-load-time-setup):
	* progmodes/cc-align.el (c-lineup-argcont):
	* progmodes/cc-awk.el (c-awk-beginning-of-defun):
	* progmodes/cperl-mode.el (cperl-set-style-back):
	* progmodes/inf-lisp.el (inferior-lisp-prompt):
	* progmodes/vhdl-mode.el (vhdl-beginning-of-libunit):
	Fix spellings in docstrings.

	* textmodes/sgml-mode.el (sgml-calculate-indent, html-tag-help):
	* progmodes/modula2.el (m2-for): Fix spellings.

	* menu-bar.el (menu-bar-games-menu): Fix typo in menu help string.

	* simple.el (undo-more): Don't use `format' on `error' arguments.
	Improve argument/docstring consistency.
	(pending-undo-list): Doc fix.

	* smerge-mode.el (smerge-ensure-match):
	* emulation/vip.el (vip-ex):
	* net/zone-mode.el (zone-mode-update-serial):
	* progmodes/idlwave.el (idlwave-complete):
	* progmodes/vhdl-mode.el (vhdl-visit-file)
	(vhdl-compose-wire-components):
	Don't use `format' on `error' arguments.

	* tooltip.el (tooltip-start-delayed-tip, tooltip-timeout)
	(tooltip-use-echo-area, tooltip-process-prompt-regexp)
	(tooltip-help-tips): Fix typos in docstrings.

2005-06-16  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Simplify last change.

2005-06-15  Matt Hodges  <MPHodges@member.fsf.org>

	* ido.el (ido-incomplete-regexp): New variable.
	(ido-set-matches-1): Handle invalid-regexp error and set
	ido-incomplete-regexp.
	(ido-incomplete-regexp): New face.
	(ido-completions): Use it.
	(ido-complete, ido-exit-minibuffer, ido-completions):
	Handle incomplete regexps.
	(ido-completions): Add check for complete match when entering a regexp.

2005-06-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (add-to-ordered-list): Use a weak hash-table to avoid leaks.

2005-06-15  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-Preamble): Enclose BibTeX preamble
	by field delimiters.

2005-06-15  David Ponce  <david@dponce.com>

	* tree-widget.el: eval-and-compile inlined functions so they will
	be available at run-time too.
	(tree-widget-super-format-handler)
	(tree-widget-format-handler): Remove.
	(tree-widget-value-create): Handle the :indent property.

2005-06-15  Miles Bader  <miles@gnu.org>

	* progmodes/which-func.el (which-func): Only inherit
	`font-lock-function-name-face' when that makes sense against the
	default mode-line face, otherwise set the face color explicitly.

	* progmodes/cperl-mode.el (cperl-init-faces): Use literal cperl
	faces instead of (non-existent) variables.

2005-06-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* iswitchb.el (iswitchb-to-end): Replace mapcar with dolist.
	(iswitchb-get-matched-buffers): Likewise.  Simplify.

2005-06-14  Miles Bader  <miles@gnu.org>

	* progmodes/ld-script.el (ld-script-location-counter):
	Remove "-face" suffix from face name.
	(ld-script-location-counter-face):
	New backward-compatibility alias for renamed face.
	(ld-script-location-counter-face): Use renamed face.

	* progmodes/cperl-mode.el (cperl-nonoverridable, cperl-array)
	(cperl-hash): Remove "-face" suffix from face names.
	(cperl-nonoverridable-face, cperl-array-face, cperl-hash-face):
	New backward-compatibility aliases for renamed faces.
	(cperl-find-pods-heres, cperl-init-faces, cperl-ps-print-init)
	(cperl-ps-print-face-properties): Use renamed cperl-mode faces.

	* progmodes/which-func.el (which-func): Remove "-face" suffix from face
	name.
	(which-func-face): New backward-compatibility alias for renamed face.
	(which-func-format): Use renamed which-func face.

	* progmodes/vhdl-mode.el (vhdl-prompt, vhdl-attribute, vhdl-enumvalue)
	(vhdl-function, vhdl-directive, vhdl-reserved-word)
	(vhdl-translate-off): Remove "-face" suffix and "font-lock-" from face
	names.
	(vhdl-speedbar-entity, vhdl-speedbar-architecture)
	(vhdl-speedbar-configuration, vhdl-speedbar-package)
	(vhdl-speedbar-library, vhdl-speedbar-instantiation)
	(vhdl-speedbar-subprogram, vhdl-speedbar-entity-selected)
	(vhdl-speedbar-architecture-selected)
	(vhdl-speedbar-configuration-selected)
	(vhdl-speedbar-package-selected)
	(vhdl-speedbar-instantiation-selected): Remove "-face" suffix from face
	names.
	(vhdl-font-lock-keywords-2, vhdl-font-lock-keywords-5):
	Use renamed faces.
	(vhdl-prompt-face, vhdl-attribute-face, vhdl-enumvalue-face)
	(vhdl-function-face, vhdl-directive-face, vhdl-reserved-words-face)
	(vhdl-translate-off-face): Variables renamed to remove "font-lock-".
	Use renamed faces.
	(syntax-alist): Don't use "font-lock-" or "-face" in generated face
	names.
	(vhdl-font-lock-init, vhdl-ps-print-settings): Use renamed faces.
	(vhdl-speedbar-insert-hierarchy, vhdl-speedbar-expand-entity)
	(vhdl-speedbar-expand-package, vhdl-speedbar-update-current-unit)
	(vhdl-speedbar-make-inst-line, vhdl-speedbar-make-pack-line)
	(vhdl-speedbar-make-subpack-line, vhdl-speedbar-make-subprogram-line)
	(vhdl-speedbar-item-info, vhdl-speedbar-check-unit): Use renamed faces.

	* progmodes/sh-script.el (sh-heredoc): Remove "-face" suffix from
	face name.
	(sh-heredoc-face): New backward-compatibility alias for renamed face.
	(sh-heredoc-face): Use renamed sh-heredoc face.

	* progmodes/idlw-help.el (idlwave-help-link):
	Remove "-face" suffix from face name.
	(idlwave-help-link-face):
	New backward-compatibility alias for renamed face.
	(idlwave-highlight-linked-completions): Use renamed idlwave-help faces.

	* progmodes/idlw-shell.el (idlwave-shell-bp-face)
	(idlwave-shell-disabled-bp): Remove "-face" suffix from face names.
	(idlwave-shell-bp-face, idlwave-shell-disabled-bp):
	New backward-compatibility aliases for renamed faces.
	(idlwave-shell-disabled-breakpoint-face)
	(idlwave-shell-breakpoint-face): Use renamed idlwave-shell faces.

	* progmodes/flymake.el (flymake-errline, flymake-warnline):
	Remove "-face" suffix from face names.
	(flymake-errline-face, flymake-warnline-face):
	New backward-compatibility aliases for renamed faces.
	(flymake-highlight-line): Use renamed flymake faces.

	* progmodes/ebrowse.el (ebrowse-tree-mark, ebrowse-root-class)
	(ebrowse-file-name, ebrowse-default, ebrowse-member-attribute)
	(ebrowse-member-class, ebrowse-progress):
	Remove "-face" suffix from face names.
	(ebrowse-tree-mark-face, ebrowse-root-class-face)
	(ebrowse-file-name-face, ebrowse-default-face)
	(ebrowse-member-attribute-face, ebrowse-member-class-face)
	(ebrowse-progress-face):
	New backward-compatibility aliases for renamed faces.
	(ebrowse-show-progress, ebrowse-show-file-name-at-point)
	(ebrowse-set-mark-props, ebrowse-draw-tree-fn)
	(ebrowse-draw-member-buffer-class-line, ebrowse-draw-member-long-fn)
	(ebrowse-draw-member-short-fn): Use renamed ebrowse faces.

	* progmodes/antlr-mode.el (antlr-default, antlr-keyword, antlr-syntax)
	(antlr-ruledef, antlr-tokendef, antlr-ruleref, antlr-tokenref)
	(antlr-literal): Remove "-face" suffix and "font-lock-" from face
	names.
	(antlr-font-lock-default-face, antlr-font-lock-keyword-face)
	(antlr-font-lock-syntax-face, antlr-font-lock-ruledef-face)
	(antlr-font-lock-tokendef-face, antlr-font-lock-ruleref-face)
	(antlr-font-lock-tokenref-face, antlr-font-lock-literal-face): New
	backward-compatibility aliases for renamed faces.
	(antlr-default-face, antlr-keyword-face, antlr-syntax-face)
	(antlr-ruledef-face, antlr-tokendef-face, antlr-ruleref-face)
	(antlr-tokenref-face, antlr-literal-face): Variables renamed to
	remove "font-lock-".  Use renamed antlr-mode faces.
	(antlr-font-lock-additional-keywords): Use renamed faces.  Replace
	literal face-names with face variable references.

	* buff-menu.el (Buffer-menu-buffer): Remove "-face" suffix from
	face name.
	(Buffer-menu-buffer-face): New backward-compatibility alias for
	renamed face.
	(list-buffers-noselect): Use renamed Buffer-menu-buffer face.

2005-06-15  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-space, makefile-makepp-perl):
	Eliminate "-face" suffix.
	(makefile-targets): Inherit from font-lock-function-name-face and
	eliminate "-face" suffix.
	(makefile-shell): Remove attributes and eliminate "-face" suffix.
	(makefile-*-font-lock-keywords): Append makefile-targets in rule
	actions, instead of prepending, to make it less visible.
	(makefile-previous-dependency, makefile-match-dependency):
	Don't match a target on a continuation line.

	* files.el (auto-mode-alist): Put Makefile in gmake mode.

2005-06-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (menu): Re-order menu items.
	(gdb-tooltip-print): Respect tooltip-use-echo-area.

	* progmodes/gud.el (tooltip-use-echo-area): Remove alias.
	Define in tooltip.el.
	(gud-tooltip-process-output): Respect tooltip-use-echo-area.
	(gud-tooltip-tips): Respect tooltip-use-echo-area and
	gud-tooltip-echo-area.

	* tooltip.el (tooltip-use-echo-area): Restore from gud.el for
	backward compatibility and make obsolete.
	(tooltip-help-tips): Use tooltip-use-echo-area.
	(tooltip-show-help-function): Rename to...
	(tooltip-show-help): ...this, because it is a function.
	(tooltip-mode, tooltip-help-message): Call tooltip-show-help.

2005-06-14  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/edebug.el (edebug-all-defs, edebug-initial-mode)
	(edebug-print-length, edebug-print-level, edebug-print-circle)
	(edebug-modify-breakpoint, edebug-eval-last-sexp)
	(edebug-eval-print-last-sexp): Doc fixes.

2005-06-14  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Make a new keymap every time we enable ido,
	as the coverage buffer/file/both may change.

2005-06-14  Lute Kamstra  <lute@gnu.org>

	* net/ange-ftp.el (internal-ange-ftp-mode): Use delay-mode-hooks
	and run-mode-hooks.  Simplify.

	* mail/rmailedit.el (rmail-edit-mode):
	* progmodes/octave-inf.el (inferior-octave-mode):
	* progmodes/sql.el (sql-interactive-mode): Use delay-mode-hooks.

	* recentf.el (recentf-dialog-mode): Use kill-all-local-variables
	and run-mode-hooks.
	(recentf-edit-list, recentf-open-files): Don't call
	kill-all-local-variables directly.

	* emacs-lisp/debug.el (debug-on-entry): Fix docstring.

2005-06-14  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/byte-run.el (make-obsolete)
	(define-obsolete-function-alias): Rename arguments FUNCTION and
	NEW to OBSOLETE-NAME and CURRENT-NAME respectively.
	(make-obsolete-variable, define-obsolete-variable-alias):
	Rename arguments VARIABLE and NEW to OBSOLETE-NAME and CURRENT-NAME
	respectively.

	* isearchb.el (isearchb-activate):
	* pcvs.el (cvs-mode):
	* ses.el (ses-load):
	* vc-arch.el (vc-arch-checkin, vc-arch-diff):
	* net/tramp.el (tramp-find-file-exists-command)
	(tramp-find-shell):
	* progmodes/ada-mode.el (ada-create-case-exception)
	(ada-create-case-exception-substring, ada-make-subprogram-body):
	* progmodes/idlw-shell.el (idlwave-shell-move-to-bp):
	* progmodes/idlwave.el (idlwave-complete-class-structure-tag-help):
	* progmodes/vhdl-mode.el (vhdl-speedbar-place-component):
	* textmodes/org.el (org-promote, org-evaluate-time-range)
	(org-agenda-next-date-line, org-agenda-previous-date-line)
	(org-agenda-error, org-open-at-point, org-table-move-row)
	(org-format-table-table-html-using-table-generate-source)
	(org-shiftcursor-error, org-ctrl-c-ctrl-c):
	* textmodes/reftex.el (reftex-access-scan-info):
	* textmodes/reftex-toc.el (reftex-toc-dframe-p)
	(reftex-toc-promote-prepare): Follow error conventions.

	* diff-mode.el (diff-mode): Fix typo in docstring.

	* forms.el (forms--intuit-from-file): Fix reference to
	`forms-number-of-fields' in error message.
	(forms-print): Fix quoting in error message.

	* forms.el (forms-mode):
	* emulation/vi.el (vi-goto-insert-state):
	* progmodes/flymake.el (flymake-new-err-info)
	(flymake-start-syntax-check-for-current-buffer)
	(flymake-simple-cleanup):
	* eshell/esh-var.el (eshell/export):
	* progmodes/gud.el (xdb):
	* textmodes/flyspell.el (flyspell-incorrect-hook)
	(flyspell-maybe-correct-transposition)
	(flyspell-maybe-correct-doubling): Fix quoting in docstring.

2005-06-13  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/debug.el (cancel-debug-on-entry): Mention default in
	minibuffer prompt.

2005-06-13  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-ordered-list): New defun.

	* emulation/cua-base.el (cua-mode): Use add-to-ordered-list to
	add cua--keymap-alist to emulation-mode-map-alists.

2005-06-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (complete-in-turn): New macro.
	(dynamic-completion-table, lazy-completion-table): Add debug info.

	* faces.el (read-face-name): Use complete-in-turn complete non-aliases
	in preference to face aliases.

	* textmodes/fill.el (fill-match-adaptive-prefix): New function.
	(fill-context-prefix): Use it to avoid guessing absurdly long prefixes.
	Remove unused vars `start' and `firstline'.
	(fill-nobreak-p): Fix line-move-invisible -> line-move-invisible-p.
	(justify-current-line, fill-individual-paragraphs): Remove unused vars.

2005-06-13  Eli Zaretskii  <eliz@gnu.org>

	* cus-start.el (all): Don't complain about missing GTK-related
	variables, unless either `gtk' is boundp or this isn't a
	`windows-nt' build.

2005-06-13  Lute Kamstra  <lute@gnu.org>

	* abbrev.el (edit-abbrevs-mode): Use kill-all-local-variables and
	run-mode-hooks.

	* ediff-mult.el (ediff-meta-mode):
	* ediff-util.el (ediff-mode): Use run-mode-hooks.

	* ledit.el (ledit-mode): Use delay-mode-hooks.

	* woman.el (woman-mode-line-format): Delete constant.
	(woman-mode-map): Initialize it properly.
	(woman-mode): Set mode-class property to special.
	Use delay-mode-hooks and run-mode-hooks.  Use the right keymap.
	Set major-mode and mode-name.  Don't set mode-line-format directly.
	(Man-getpage-in-background): Don't reference woman-mode-line-format.

	* emacs-lisp/debug.el (cancel-debug-on-entry): Make the empty
	string argument obsolete.

2005-06-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-CUA-compatible): New option.
	(org-disputed-keys): New variable.
	(org-key): New function.
	(orgtbl-make-binding): Add docstring to the created function.
	(org-mode): Set paragraph start/separate regexps.
	(orgtbl-mode): Don't start `orgtbl-mode' in `org-mode' buffers.
	(org-archive-location, org-archive-mark-done)
	(org-archive-stamp-time): New options.
	(org-archive-subtree): New command.
	(org-fill-paragraph): New function.
	(org-mode): Set `fill-paragraph-function' to `org-fill-paragraph'.
	(org-fake-empty-table-line): Function removed.
	(org-format-org-table-html): Do not create empty table lines at
	separator lines.  Improved table header treatment.
	(org-link-format): New option.
	(org-make-link): New function.
	(org-insert-link, org-store-link): Use org-make-link.
	(org-open-file): Quote file name for shell command, to allow
	spaces in file names.
	(org-link-regexp): Fix bug with mailto link.
	(org-link-maybe-angles-regexp, org-protected-link-regexp):
	New constants.
	(org-export-as-html): Deal with the optional angles around a link.
	Better treatment of file: links.
	(org-open-at-point): Replace @{ and @} with < and >.
	(org-run-mode-hooks): Function removed.
	(org-agenda-mode): No longer use `org-run-mode-hooks'.

2005-06-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-registers-mode): Let gdbmi use
	MI command -data-list-register-values.
	(gdb-post-prompt): Indent properly.

2005-06-13  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (highlight-changes-colors): Rename from
	`highlight-changes-colours'.
	(highlight-changes-colours): Keep as obsolete alias.
	(highlight-changes-face-list): Doc fix.
	(hilit-chg-make-list): Use `highlight-changes-colors'.

2005-06-12  Mark A. Hershberger  <mah@everybody.org>

	* progmodes/cperl-mode.el (cperl-mode): Remove stray paren in
	defun-prompt-regexp.

2005-06-12  Eli Zaretskii  <eliz@gnu.org>

	* loadup.el: Don't say we are dumping under 2 names on windows-nt
	and cygwin.

	* makefile.w32-in (bootstrap-clean-CMD, bootstrap-clean-SH):
	Don't use an old loaddefs.el, as in Makefile.in.

2005-06-12  Lute Kamstra  <lute@gnu.org>

	* Makefile.in (bootstrap-prepare): Don't use an old loaddefs.el.

	* man.el (Man-mode-map): Initialize it properly.
	(Man-mode): Set mode-class property to special.

	* calendar/calendar.el (calendar-mode): Use run-mode-hooks.

2005-06-11  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-make-toggle): Remove stray backslash.
	A newline is needed in the docstring there.

	* emacs-lisp/debug.el (debug-on-entry, cancel-debug-on-entry):
	Doc fixes.

2005-06-11  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* printing.el: Doc fix.  The menubar is no more changed when printing
	is loaded, it only changes when pr-menu-bind or pr-update-menus is
	called.  Now, the menubar changing will work in Emacs 20, 21 and 22.
	(pr-version): New version number (6.8.4).
	(pr-menu-bind): New command.
	(pr-update-menus): Docstring and code fix.
	(pr-menu-print-item): Now is a global var in Emacs and XEmacs.
	Docstring fix.
	(pr-txt-printer-alist, pr-ps-printer-alist, pr-gv-command)
	(pr-gs-command, pr-gs-switches, pr-ps-utility-alist): Docstring fix.

2005-06-11  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el: Doc fixes for public funcs:
	"Returns" to "return", document useful return values, etc.

2005-06-11  Alan Mackenzie  <acm@muc.de>

	* textmodes/fill.el (fill-context-prefix): Try `adaptive-fill-function'
	BEFORE `adaptive-fill-regexp' when determining a fill prefix.
	(adaptive-file-function): Minor amendment to doc-string.

2005-06-11  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* thumbs.el (thumbs-per-line, thumbs-thumbsdir-max-size)
	(thumbs-relief, thumbs-margin, thumbs-image-resizing-step):
	Fix :type--it is `integer', not `string'.

	* faces.el (modeline-highlight): Rename from (the erroneous)
	`modeline-higilight'.

2005-06-11  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/edebug.el (edebug-eval-mode-map): Don't copy
	lisp-interaction-mode-map but make it the parent.
	(edebug-eval-mode): Use define-derived-mode.

2005-06-11  Andreas Schwab  <schwab@suse.de>

	* bindings.el: Add binding of `ESC functionkey' for every
	`M-functionkey'.
	* hexl.el (hexl-mode-map): Likewise.

2005-06-10  Michael Hotchin  <michael@hotchin.net>  (tiny change)

	* progmodes/compile.el (compilation-error-regexp-alist-alist)
	[msft]: update regexp for newer msft compilers.

2005-06-10  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (start-chars, xml-parse-dtd): Add the ability to skip
	ATTLIST portions of included DTDs.
	(xml-parse-dtd): Eliminate use of inefficient match-data.

2005-06-10  Miles Bader  <miles@gnu.org>

	* play/mpuz.el (mpuz-unsolved, mpuz-solved, mpuz-trivial)
	(mpuz-text): Remove "-face" suffix from face names.
	(mpuz-unsolved-face, mpuz-solved-face, mpuz-trivial-face)
	(mpuz-text-face): New backward-compatibility aliases for renamed faces.
	(mpuz-create-buffer, mpuz-paint-digit): Use renamed mpuz faces.

	* play/gomoku.el (gomoku-O, gomoku-X):
	Remove "-face" suffix from face names.
	(gomoku-font-lock-O-face, gomoku-font-lock-X-face):
	New backward-compatibility aliases for renamed faces.
	(gomoku-font-lock-keywords): Use renamed gomoku faces.

2005-06-10  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el: Fixes for changes of 2005-06-09.
	(thumbs-thumbsdir): Force `thumbs-thumbsdir' to be interpretable
	as a directory.
	(thumbs-thumbname): Remove directory separator from format string;
	`thumbs-thumbsdir' now returns a valid directory name.
	(thumbs-temp-dir): New defsubst.
	(thumbs-temp-file, thumbs-resize-image, thumbs-modify-image):
	Use it.

	* cus-edit.el (minibuffer):
	* files.el (make-backup-file-name-function):
	* filesets.el (filesets-external-viewers):
	* hilit-chg.el (highlight-changes-colours)
	(highlight-changes-face-list, highlight-changes-rotate-faces):
	* ielm.el (ielm-dynamic-return, inferior-emacs-lisp-mode):
	* kmacro.el (kmacro-call-macro):
	* log-edit.el (log-edit-changelog-full-paragraphs):
	* mouse.el (mouse-1-click-follows-link):
	* skeleton.el (skeleton-autowrap):
	* subr.el (insert-for-yank-1):
	* tempo.el (tempo-insert-region):
	* terminal.el (terminal-emulator):
	* time.el (display-time-mail-face):
	* vc.el (vc-annotate):
	* vcursor.el (vcursor-copy-line):
	* woman.el (woman-bold-headings, woman-ignore)
	(woman-default-faces, woman-monochrome-faces):
	* calendar/todo-mode.el (todo-insert-threshold):
	* emulation/pc-select.el (pc-select-selection-keys-only)
	(pc-selection-mode):
	* emulation/vip.el (vip-find-char-forward):
	* emulation/viper-cmd.el (viper-find-char-forward):
	* international/mule-cmds.el
	(select-safe-coding-system-accept-default-p)
	(input-method-exit-on-invalid-key):
	* international/mule-diag.el (describe-coding-system):
	* international/ucs-tables.el (unify-8859-on-encoding-mode):
	* net/browse-url.el (browse-url-xterm-program):
	* obsolete/lazy-lock.el (lazy-lock-mode):
	* progmodes/cperl-mode.el (cperl-info-on-command-no-prompt)
	(cperl-mode):
	* progmodes/cpp.el (cpp-face-light-name-list)
	(cpp-face-dark-name-list):
	* progmodes/delphi.el (delphi-newline-always-indents):
	Fix spellings in docstrings.

	* ido.el (ido-mode, ido-file-extensions-order)
	(ido-default-file-method, ido-default-buffer-method)
	(ido-max-prospects, ido-slow-ftp-hosts, ido-setup-hook)
	(ido-decorations, ido-read-file-name-as-directory-commands)
	(ido-read-file-name-non-ido, ido-work-directory-list)
	(ido-ignore-item-temp-list, ido-current-directory)
	(ido-magic-forward-char, ido-enter-find-file)
	(ido-enter-switch-buffer, ido-visit-buffer, ido-switch-buffer)
	(ido-find-file, ido-read-buffer): Fix typos in docstrings.

2005-06-10  Lute Kamstra  <lute@gnu.org>

	* play/dunnet.el (dun-mode): Use define-derived-mode.
	(dungeon-mode-map): Rename to dun-mode-map.  Keep old name as an
	obsolete alias.

	* play/doctor.el (doctor-mode-map): Remove defvar.
	(doctor-mode): Use define-derived-mode.

	* mail/mspools.el (mspools-mode):
	* net/eudc-hotlist.el (eudc-hotlist-mode):
	* play/blackbox.el (blackbox-mode): Use run-mode-hooks.

2005-06-10  Miles Bader  <miles@gnu.org>

	* textmodes/flyspell.el (flyspell-incorrect, flyspell-duplicate):
	Remove "-face" suffix from face names.
	(flyspell-incorrect-face, flyspell-duplicate-face):
	New backward-compatibility aliases for renamed faces.
	(flyspell-mode-on, make-flyspell-overlay)
	(flyspell-highlight-incorrect-region)
	(flyspell-highlight-duplicate-region)
	(flyspell-display-next-corrections)
	(flyspell-auto-correct-previous-word): Use renamed flyspell faces.

	* textmodes/texinfo.el (texinfo-heading): Remove "-face" suffix
	from face name.
	(texinfo-heading-face): New backward-compatibility alias for
	renamed face.
	(texinfo-heading-face): Use renamed texinfo-heading face.

	* textmodes/tex-mode.el (tex-math, tex-verbatim): Remove "-face"
	suffix from face names.
	(tex-math-face, tex-verbatim-face):
	New backward-compatibility aliases for renamed faces.
	(tex-math-face, tex-verbatim-face): Use renamed tex-mode faces.
	(tex-insert-quote): Use `tex-verbatim-face' variable instead of
	literal face name.

	* textmodes/table.el (table-cell): Remove "-face" suffix from face
	name.
	(table-cell-face): New backward-compatibility alias for renamed face.
	(table--put-cell-face-property, table--update-cell-face):
	Use renamed table-cell face.

	* textmodes/sgml-mode.el (sgml-namespace): Remove "-face" suffix
	from face name.
	(sgml-namespace-face): New backward-compatibility alias for
	renamed face.
	(sgml-namespace-face): Use renamed sgml-namespace face.

	* textmodes/org.el (org-level-1, org-level-2, org-level-3)
	(org-level-4, org-level-5, org-level-6, org-level-7)
	(org-level-8, org-warning, org-headline-done)
	(org-deadline-announce, org-scheduled-today)
	(org-scheduled-previously, org-link, org-done, org-table)
	(org-time-grid): Remove "-face" suffix from face names.
	(org-level-1-face, org-level-2-face, org-level-3-face)
	(org-level-4-face, org-level-5-face, org-level-6-face)
	(org-level-7-face, org-level-8-face, org-warning-face)
	(org-headline-done-face, org-deadline-announce-face)
	(org-scheduled-today-face, org-scheduled-previously-face)
	(org-link-face, org-done-face, org-table-face)
	(org-time-grid-face):
	New backward-compatibility aliases for renamed faces.
	(org-level-faces, org-set-font-lock-defaults, org-timeline)
	(org-agenda, org-agenda-get-todos, org-agenda-get-deadlines)
	(org-agenda-get-timestamps, org-agenda-get-scheduled)
	(org-agenda-add-time-grid-maybe, org-table-p): Use renamed org faces.

	* emulation/viper-init.el (viper-search, viper-replace-overlay)
	(viper-minibuffer-emacs, viper-minibuffer-insert)
	(viper-minibuffer-vi): Remove "-face" suffix from face names.
	(viper-search-face, viper-replace-overlay-face)
	(viper-minibuffer-emacs-face, viper-minibuffer-insert-face)
	(viper-minibuffer-vi-face):
	New backward-compatibility aliases for renamed faces.
	(viper-search-face, viper-replace-overlay-face)
	(viper-minibuffer-emacs-face, viper-minibuffer-insert-face)
	(viper-minibuffer-vi-face): Use renamed viper faces.

	* emacs-lisp/testcover.el (testcover-nohits, testcover-1value):
	Remove "-face" suffix from face names.
	(testcover-nohits-face, testcover-1value-face):
	New backward-compatibility aliases for renamed faces.
	(testcover-mark): Use renamed testcover faces.

	* calendar/diary-lib.el (diary-button): Remove "-face" suffix from
	face name.
	(diary-button-face): New backward-compatibility alias for renamed face.
	(diary-entry): Use renamed diary-button face.

	* calendar/calendar.el (diary, calendar-today, holiday)
	(mark-visible-calendar-date): Remove "-face" suffix from face names.
	(diary-face, calendar-today-face, holiday-face):
	New backward-compatibility aliases for renamed faces.
	(eval-after-load "facemenu", diary-entry-marker)
	(calendar-today-marker, calendar-holiday-marker, diary-face):
	Use renamed calendar faces.

	* compare-w.el (compare-windows): Remove "-face" suffix from face name.
	(compare-windows-face): New backward-compatibility alias for
	renamed face.
	(compare-windows-highlight): Use renamed compare-windows face.

	* strokes.el (strokes-char): Remove "-face" suffix from face name.
	(strokes-char-face): New backward-compatibility alias for renamed face.
	(strokes-encode-buffer): Use renamed strokes-char face.

	* pcvs-info.el (cvs-header, cvs-filename, cvs-unknown)
	(cvs-handled, cvs-need-action, cvs-marked, cvs-msg):
	Remove "-face" suffix from face names.
	(cvs-header-face, cvs-filename-face, cvs-unknown-face)
	(cvs-handled-face, cvs-need-action-face, cvs-marked-face)
	(cvs-msg-face): New backward-compatibility aliases for renamed faces.
	(cvs-fi-up-to-date-face, cvs-fi-unknown-face, cvs-fileinfo-pp):
	Use renamed pcvs faces.
	* pcvs.el (cvs-mode-find-file): Use renamed pcvs faces.
	* pcvs-defs.el (cvs-mode-map): Likewise.
	* cvs-status.el (cvs-status-font-lock-keywords): Likewise.

	* info.el (info-title-1, info-title-2, info-title-3)
	(info-title-4): Remove "-face" suffix from and downcase face names.
	(Info-title-1-face, Info-title-2-face, Info-title-3-face)
	(Info-title-4-face):
	New backward-compatibility aliases for renamed faces.
	(Info-fontify-node): Use renamed info faces.

	* hilit-chg.el (highlight-changes, highlight-changes-delete):
	Remove "-face" suffix from face names.
	(highlight-changes-face, highlight-changes-delete-face):
	New backward-compatibility aliases for renamed faces.
	(hilit-chg-cust-fix-changes-face-list, hilit-chg-make-ov)
	(hilit-chg-make-list): Use renamed highlight-changes faces.

	* generic-x.el (show-tabs-tab, show-tabs-space):
	Remove "-face" suffix from face names.
	(show-tabs-tab-face, show-tabs-space-face):
	New backward-compatibility aliases for renamed faces.
	(show-tabs-generic-mode-font-lock-defaults-1)
	(show-tabs-generic-mode-font-lock-defaults-2):
	Use renamed show-tabs faces.

	* smerge-mode.el (smerge-mine, smerge-other, smerge-base)
	(smerge-markers): Remove "-face" suffix from face names.
	(smerge-mine-face, smerge-other-face, smerge-base-face)
	(smerge-markers-face):
	New backward-compatibility aliases for renamed faces.
	(smerge-mine-face, smerge-other-face, smerge-base-face)
	(smerge-markers-face): Use renamed smerge faces.

	* log-view.el (log-view-file, log-view-message): Remove "-face"
	suffix from face names.
	(log-view-file-face, log-view-message-face):
	New backward-compatibility aliases for renamed faces.
	(log-view-file-face, log-view-message-face): Use renamed log-view
	faces.

	* paren.el (show-paren-match, show-paren-mismatch):
	Remove "-face" suffix from face names.
	(show-paren-match-face, show-paren-mismatch-face):
	New backward-compatibility aliases for renamed faces.
	(show-paren-function): Use renamed show-paren faces.

	* ruler-mode.el (ruler-mode-default, ruler-mode-pad)
	(ruler-mode-margins, ruler-mode-fringes)
	(ruler-mode-column-number, ruler-mode-fill-column)
	(ruler-mode-comment-column, ruler-mode-goal-column)
	(ruler-mode-tab-stop, ruler-mode-current-column): Remove "-face"
	suffix from face names.
	(ruler-mode-default-face, ruler-mode-pad-face)
	(ruler-mode-margins-face, ruler-mode-fringes-face)
	(ruler-mode-column-number-face, ruler-mode-fill-column-face)
	(ruler-mode-comment-column-face, ruler-mode-goal-column-face)
	(ruler-mode-tab-stop-face, ruler-mode-current-column-face):
	New backward-compatibility aliases for renamed faces.
	(ruler-mode-pad, ruler-mode-margins, ruler-mode-fringes)
	(ruler-mode-column-number, ruler-mode-fill-column)
	(ruler-mode-comment-column, ruler-mode-goal-column)
	(ruler-mode-tab-stop, ruler-mode-current-column)
	(ruler-mode-mouse-grab-any-column, ruler-mode-ruler): Use renamed
	faces.

	* whitespace.el (whitespace-highlight): Remove "-face" suffix from
	face name.
	(whitespace-highlight-the-space): Use renamed face.
	(whitespace-highlight-face): New backward-compatibility alias for
	renamed face.

	* woman.el (woman-italic, woman-bold, woman-unknown)
	(woman-addition, woman-symbol-face):
	Remove "-face" suffix from face names.
	(woman-italic-face, woman-bold-face, woman-unknown-face)
	(woman-addition-face):
	New backward-compatibility aliases for renamed faces.
	(woman-default-faces, woman-monochrome-faces, woman-man-buffer)
	(woman-decode-region, woman-replace-match)
	(woman-display-extended-fonts, woman-special-characters)
	(woman-font-alist, woman-change-fonts, woman2-TH, woman2-SH):
	Use renamed woman faces.

	* longlines.el (longlines-visible-face): Face removed.

	* diff-mode.el (diff-header, diff-file-header, diff-index)
	(diff-hunk-header, diff-removed, diff-added, diff-changed)
	(diff-function, diff-context, diff-nonexistent): Remove "-face"
	suffix from face names.
	(diff-header-face, diff-file-header-face, diff-index-face)
	(diff-hunk-header-face, diff-removed-face, diff-added-face)
	(diff-changed-face, diff-function-face, diff-context-face)
	(diff-nonexistent-face): New backward-compatibility aliases for
	renamed faces.
	(diff-header-face, diff-file-header-face)
	(diff-index, diff-index-face, diff-hunk-header)
	(diff-hunk-header-face, diff-removed, diff-removed-face)
	(diff-added, diff-added-face, diff-changed-face, diff-function)
	(diff-function-face, diff-context-face, diff-nonexistent)
	(diff-nonexistent-face): Use renamed diff-mode faces.

	* progmodes/compile.el (compilation-warning-face)
	(compilation-info-face): Remove "-face" suffix from face names.
	(compilation-warning-face, compilation-info-face):
	New backward-compatibility aliases for renamed faces.
	(compilation-warning-face, compilation-info-face):
	Use renamed compilation faces.

	* add-log.el (change-log-date, change-log-name)
	(change-log-email, change-log-file, change-log-list)
	(change-log-conditionals, change-log-function)
	(change-log-acknowledgement): Remove "-face" suffix from face names.
	(change-log-date-face, change-log-name-face)
	(change-log-email-face, change-log-file-face)
	(change-log-list-face, change-log-conditionals-face)
	(change-log-function-face, change-log-acknowledgement-face):
	New backward-compatibility aliases for renamed faces.
	(change-log-font-lock-keywords): Use renamed change-log faces.

	* cus-edit.el (custom-invalid, custom-rogue, custom-modified)
	(custom-set, custom-changed, custom-saved, custom-button)
	(custom-button-pressed, custom-documentation, custom-state)
	(custom-comment, custom-comment-tag, custom-variable-tag)
	(custom-variable-button, custom-face-tag, custom-group-tag-1)
	(custom-group-tag): Remove "-face" suffix from face names.
	(custom-magic-alist, custom-magic-value-create)
	(custom-group-sample-face-get, custom-mode): Use renamed custom faces.
	(custom-invalid-face, custom-rogue-face, custom-modified-face)
	(custom-set-face, custom-changed-face, custom-saved-face)
	(custom-button-face, custom-button-pressed-face)
	(custom-documentation-face, custom-state-face)
	(custom-comment-face, custom-comment-tag-face)
	(custom-variable-tag-face, custom-variable-button-face)
	(custom-face-tag-face, custom-group-tag-face-1)
	(custom-group-tag-face):
	New backward-compatibility aliases for renamed faces.

	* wid-edit.el (widget-documentation, widget-button)
	(widget-field, widget-single-line-field, widget-inactive)
	(widget-button-pressed): "-face" suffix removed from face names.
	(widget-documentation-face, widget-button-face)
	(widget-field-face, widget-single-line-field-face)
	(widget-inactive-face, widget-button-pressed-face):
	New backward-compatibility aliases for renamed faces.
	(widget-documentation-face, widget-button-face)
	(widget-button-pressed-face, widget-specify-field)
	(widget-specify-inactive): Use renamed widget faces.

2005-06-10  Kenichi Handa  <handa@m17n.org>

	* term/x-win.el (x-clipboard-yank): Remove condition-case
	wrapping.

2005-06-11  Kenichi Handa  <handa@m17n.org>

	* add-log.el (change-log-font-lock-keywords): Make the regexp for
	date lines stricter.

2005-06-10  Zhang Wei  <id.brep@gmail.com>

	* term/x-win.el (x-clipboard-yank): Use x-selection-value instead
	of x-get-selection.

2005-06-10  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-mode, comint-snapshot-last-prompt):
	* frame.el (frame-current-scroll-bars):
	* term.el (term-mode, term-check-proc, term-input-sender)
	(term-simple-send, term-extract-string, term-word)
	(term-match-partial-filename):
	* window.el (window-current-scroll-bars):
	* emulation/cua-base.el (cua-normal-cursor-color)
	(cua-read-only-cursor-color, cua-overwrite-cursor-color)
	(cua-global-mark-cursor-color):
	* mail/undigest.el (rmail-forward-separator-regex):
	Fix typos in docstrings.

	* comint.el (comint-check-proc, make-comint-in-buffer)
	(comint-source-default): Doc fixes.

	* term.el (term-send-string): Improve argument/docstring consistency.

2005-06-09  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-send-input): Bind `inhibit-read-only' around
	call to `delete-region'.
	(comint-mode-hook): Do not enable Font Lock by default.

2005-06-09  Lute Kamstra  <lute@gnu.org>

	* textmodes/ispell.el (ispell-menu-map-needed): flyspell-mode
	could be void.

2005-06-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debugger-will-be-back): New var.
	(debug): Use it.
	(debugger-step-through, debugger-continue, debugger-jump)
	(debugger-return-value): Set it when needed.
	(debugger-make-xrefs, debugger-frame, debugger-frame-clear):
	Use inhibit-read-only.

2005-06-09  Juanma Barranquero  <lekktu@gmail.com>

	* window.el (shrink-window-if-larger-than-buffer)
	(window-size-fixed): Fix typo in docstring.

	* thumbs.el: Don't set `auto-image-file-mode'.  Do not create the
	thumbnails directory on loading.
	(thumbs-conversion-program): Use `eq' to check the system type,
	not `equal'.
	(thumbs-temp-dir): Initialize to `temporary-file-directory',
	not "/tmp".  Fix docstring.
	(thumbs-thumbsdir): New function to return the thumbnails
	directory, creating it if needed.
	(thumbs-cleanup-thumbsdir, thumbs-thumbname): Use it.
	(thumbs-temp-file): Delete variable and make it into a function.
	(thumbs-resize-image, thumbs-modify-image): Use it.
	(thumbs-kill-buffer): Simplify.
	(thumbs-gensym): Defalias or duplicate CL `gensym'.
	(thumbs-resize-image, thumbs-resize-interactive): Fix typos in
	docstrings.

2005-06-09  Kim F. Storm  <storm@cua.dk>

	* subr.el (save-match-data): Add RESEAT arg `evaporate' to
	set-match-data to free markers in match-data.

	* replace.el (replace-match-data): Pass RESEAT arg `t' to
	match-data to unchain markers in match-data.

2005-06-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug): Don't iconify if we know we'll re-enter
	the debugger immediately anyway.  Undo the 2005-06-06 change, rendered
	unnecessary now.

2005-06-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): If BODY is empty,
	give the variable a doc string that doesn't say don't set it directly.

	* textmodes/ispell.el (ispell-check-version):
	Use match-string-no-properties.
	(ispell-region, ispell-buffer-local-parsing, ispell-buffer-local-dict)
	(ispell-buffer-local-words): Likewise.

	* progmodes/make-mode.el (makefile-shell-face): Make this a no-op
	except on terminals with enough colors to really display it.
	(makefile-dependency-regex): Delete spurious `bb'.

	* faces.el (escape-glyph): Use blue once again in last case.
	(no-break-space): Redefine so that it isn't invisible on a tty.

2005-06-08  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-file-name): Fallback to read-file-name on C-f
	also when reading directory name.

2005-06-08  Lute Kamstra  <lute@gnu.org>

	* textmodes/flyspell.el (flyspell-mode): Use define-minor-mode.
	(flyspell-mode-line-string): Remove autoload cookie.
	(flyspell-mode): Remove defvar.

2005-06-07  Lute Kamstra  <lute@gnu.org>

	* textmodes/org.el (org-run-mode-hooks): New function.
	(org-agenda-mode): Use it.

2005-06-07  David McCabe  <davemccabe@gmail.com>  (tiny change)

	* emacs-lisp/lisp-mode.el (defstruct): Set `doc-string-elt' property.

2005-06-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/iso-cvt.el (iso-sgml2iso-trans-tab): Add NBSP.

2005-06-06  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el (font-lock-add-keywords): Doc fix.

2005-06-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-guess-mode): Add RequirePackage.
	(tex-compile-default): In the absence of any history, use the order in
	tex-compile-alist to choose the preferred command.
	(tex-compile-commands): Reorder a bit.

	* textmodes/flyspell.el (flyspell-auto-correct-binding)
	(flyspell-incorrect-face, flyspell-duplicate-face):
	Use (X)Emacs-agnostic code.
	(flyspell-mode-map): Don't overwrite at each load.  Remove code
	redundant with the subsequent add-minor-mode.  Merge Emacs and
	XEmacs code.
	(flyspell-word): Minor simplification.
	(flyspell-math-tex-command-p): Quieten the byte-compiler.
	(flyspell-external-point-words): Remove unused vars `size' and `start'.
	(flyspell-do-correct): Rename from flyspell-xemacs-correct.
	Merge the corresponding Emacs code.
	(flyspell-correct-word, flyspell-xemacs-popup):
	Use flyspell-do-correct.

	* emacs-lisp/debug.el (debug): Don't bury the buffer unless it's in
	a dedicated window.

	* international/latexenc.el (latexenc-find-file-coding-system):
	Undo part of last patch, to turn off a compiler warning.

2005-06-06  Juri Linkov  <juri@jurta.org>

	* tmm.el (tmm-inactive, tmm-remove-inactive-mouse-face):
	Rename `tmm-inactive-face' to `tmm-inactive'.

2005-06-06  Matt Hodges  <MPHodges@member.fsf.org>

	* iswitchb.el: Rename faces.

2005-06-06  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-rectangle, cua-rectangle-noselect)
	(cua-global-mark): Remove -face suffix from face names.

	* emulation/cua-gmrk.el (cua--init-global-mark):
	Remove cua-global-mark face setup.

2005-06-06  Richard M. Stallman  <rms@gnu.org>

	* progmodes/make-mode.el (makefile-dependency-regex): Handle whitespace
	just like other allowed characters.
	(makefile-match-dependency): Exclude leading and training whitespace
	from the range of regexp subexp 1.
	(makefile-macroassign-regex): Don't try to match the body,
	just the name of the macro being defined.

	* info.el (Info-read-node-name-2): New function.
	(Info-read-node-name-1): Use that.
	Add a completion-base-size-function property.

	* simple.el (completion-setup-function): Look for
	completion-base-size-function property of minibuffer-completion-table.

	* files.el (locate-file-completion): Doc fix.

	* printing.el: Don't call pr-update-menus; user must do that.

	* emacs-lisp/debug.el (debugger-window): New variable.
	(debug): Use debugger-window if it is set and still alive.
	Record debugger-window for next entry.

	* mail/supercite.el (sc-mail-glom-frame): Mark as risky.

2005-06-06  Matthias Förste  <slashdevslashnull@gmx.net>

	* files.el (hack-local-variables-confirm): New arg FLAG-TO-CHECK.
	(hack-one-local-variable, hack-local-variables)
	(hack-local-variables-prop-line): Pass that arg.

2005-06-06  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-first-match, ido-only-match, ido-subdir)
	(ido-indicator): Remove -face suffix from face names.

2005-06-06  Juri Linkov  <juri@jurta.org>

	* font-lock.el (font-lock-regexp-backslash)
	(font-lock-regexp-backslash-construct): New faces.
	(lisp-font-lock-keywords-2): Use new faces.  Match `?:' only
	after `('.  Add `while-no-input' to control structures.

	* faces.el (no-break-space, shadow): New faces.
	(escape-glyph): Use less loud colors pink2 and red4.

	* diff-mode.el (diff-context-face)
	* dired.el (dired-ignored)
	* rfn-eshadow.el (file-name-shadow)
	* tmm.el (tmm-inactive-face): Inherit from `shadow' face.

	* info.el (Info-title-1-face): Use green instead of yellow because
	bold yellow is not readable on light backgrounds.

	* progmodes/compile.el (compilation-start): Move `erase-buffer' up
	before selecting the desired mode to not spend time fontifying
	old contents.

2005-06-06  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbsdir-max-size, thumbs-image-resizing-step)
	(thumbs-thumbsdir-auto-clean): Fix typos in docstrings.

	* ps-print.el (ps-default-fg, ps-default-bg):
	Fix typos in docstrings.

	* isearchb.el (isearchb): Don't pass a spurious second argument to
	`iswitchb-completions'.

2005-06-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-locals-handler): Use window point
	to preserve point.
	(gdb-find-file-hook): Add doc string.

	* progmodes/gud.el (gdb, gud-menu-map): Add command to evaluate
	C dereferenced pointer expression.
	(gud-tool-bar-map): Put it on the tool bar.  Re-order icons.

	* toolbar/gud-pstar.xpm, toolbar/gud-pstar.pbm: New files.

	* toolbar/gud-break.xpm, toolbar/gud-cont.xpm, toolbar/gud-down.xpm
	* toolbar/gud-finish.xpm, toolbar/gud-ni.xpm, toolbar/gud-n.xpm
	* toolbar/gud-print.xpm, toolbar/gud-remove.xpm, toolbar/gud-run.xpm
	* toolbar/gud-si.xpm, toolbar/gud-s.xpm, toolbar/gud-until.xpm
	* toolbar/gud-up.xpm, toolbar/gud-watch.xpm:
	Make background transparent.

2005-06-04  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el (font-lock-add-keywords): Doc fix.  Comment change.
	(font-lock-remove-keywords): Doc fix.
	(font-lock-mode-major-mode): Compiler defvar.
	(font-lock-set-defaults): Use `font-lock-mode-major-mode'.

	* font-core.el (font-lock-mode-major-mode): Compiler defvar.
	(font-lock-mode): Update `font-lock-mode-major-mode'.
	(font-lock-set-defaults): Compiler defvar.
	(font-lock-default-function): Take `font-lock-mode-major-mode'
	into account.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode): Make it
	keep track of which major mode it enabled the minor mode for.
	Use find-file-hook again.  Update docstring.

	* simple.el (eval-expression-print-level)
	(eval-expression-print-length, eval-expression-debug-on-error):
	Doc fixes.

2005-06-04  Matt Hodges  <MPHodges@member.fsf.org>

	* iswitchb.el (iswitchb-single-match-face)
	(iswitchb-current-match-face, iswitchb-virtual-matches-face)
	(iswitchb-invalid-regexp-face): New faces.
	(iswitchb-completions): Use them.
	(iswitchb-use-faces): Rename from iswitchb-use-fonts, which is
	now marked as an obsolete alias.
	(iswitchb-read-buffer): Remove check for bound font variables.
	(iswitchb-invalid-regexp): New free variable.
	(iswitchb-get-matched-buffers): Catch invalid-regexp errors and
	set iswitchb-invalid-regexp.
	(iswitchb, iswitchb-complete, iswitchb-completions): Deal with
	invalid regexps.
	(iswitchb-completions): Add check for complete match when entering
	a regexp.
	(iswitchb-completions): Remove require-match argument.
	(iswitchb-exhibit): Fix caller.
	(iswitchb-common-match-inserted): New variable.
	(iswitchb-complete, iswitchb-completion-help): Use it.

2005-06-04  David Reitter  <david.reitter@gmail.com>  (tiny change)

	* url/url-http.el (url-http-chunked-encoding-after-change-function):
	Use `url-http-debug' instead of `message'.

2005-06-04  Thierry Emery  <thierry.emery@free.fr>  (tiny change)

	* url/url-http.el (url-http-parse-headers): Pass redirected URL
	as a callback argument.

2005-06-04  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Only call sit-for when moving backwards.

	* ido.el (ido-make-merged-file-list-1): New defun split from
	ido-make-merged-file-list.
	(ido-make-merged-file-list): Bind throw-on-input around call to
	ido-make-merged-file-list-1.  Return input-pending-p if
	interrupted by more input available.
	(ido-read-internal): Handle input-pending-p return value from
	ido-make-merged-file-list.

2005-06-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/flyspell.el (flyspell-check-word-p): Simplify silly
	compatibility code.

	* international/latexenc.el (latexenc-find-file-coding-system):
	Don't inherit the EOL part of the coding-system from the
	tex-main buffer.  Fit within 80 columns.

2005-06-03  Matt Hodges  <MPHodges@member.fsf.org>

	* tmm.el (tmm-inactive-face): New face.
	(tmm-remove-inactive-mouse-face): New function.
	(tmm-prompt, tmm-add-one-shortcut)
	(tmm-add-prompt, tmm-get-keymap): Make active menu items visible
	but not selectable.

2005-06-03  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (face-equal): Improve argument/docstring consistency.

2005-06-03  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-targets-face)
	(makefile-shell-face, makefile-makepp-perl-face): Add :version.
	(makefile-bsdmake-dependency-regex)
	(makefile-makepp-rule-action-regex)
	(makefile-bsdmake-rule-action-regex): New constants.
	(makefile-makepp-mode, makefile-bsdmake-mode): Use them.

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Allow (...) within `...' for makepp messages.

2005-06-03  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-same-contents): Eliminate CL-type functions.

	* ediff-mult.el (ediff-intersect-directories): Make sure that ".." and
	"." files are deleted from all file lists before comparison.

	* emulation/viper-keym.el (viper-toggle-key, viper-quoted-insert-key)
	(viper-ESC-key): Made them customizable.

	* emulation/viper.el (viper-non-hook-settings):
	Fix the names of defadvices.

2005-06-01  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-buffers): Use save-match-data.

2005-06-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easymenu.el (easy-menu-return-item): Quick fix to find
	menu items with a nil command binding.

2005-06-01  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-macs.el (defsetf):
	Improve argument/docstring consistency.

	* faces.el (list-faces-display): Improve the formatting by
	computing the maximum length required for any face-name (reworked
	patch of 1999-01-11, accidentally deleted on 1999-07-21).
	(internal-find-face): Remove redundant info in docstring.

2005-06-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-1)
	(gdb-info-breakpoints-custom, gdb-delete-breakpoint)
	(gdb-goto-breakpoint, gdb-source-info, gdb-get-location)
	(gdb-assembler-custom): Improve regexps.
	(def-gdb-auto-update-handler): Use window point to preserve point.

2005-05-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* thumbs.el (thumbs-mode): Fix misuse of make-variable-buffer-local.

2005-05-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-word): Change argument passed
	to calc-embedded.
	(calc-embedded-make-info): Have plain prefix argument select
	entire line.

2005-05-31  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (list-faces-display): Signal error if passed a regexp
	that matches no face name.

	* simple.el (filter-buffer-substring): Fix typo in docstring.

2005-05-31  Richard M. Stallman  <rms@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-fill-region): Test ARG, not INTERACTIVE.
	(vhdl-emacs-21): Doc fix.
	(vhdl-mode): Unconditionally set comment-padding.
	(vhdl-fixup-whitespace-region): Insert spaces only where
	there are none.
	(vhdl-statistics-buffer): Make the Emacs 21 behavior universal.

2005-05-30  John Wiegley  <johnw@newartisans.com>

	* eshell/em-cmpl.el, eshell/em-dirs.el, eshell/em-glob.el
	* eshell/em-unix.el, eshell/esh-ext.el, eshell/esh-io.el
	* eshell/esh-util.el, eshell/esh-var.el: Change all uses of
	`directory-sep-char' to ?/, and all uses of `string-to-int' to
	`string-to-number'.

2005-05-30  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-bug-address): Fix docstring.
	(calc-window-hook, calc-trail-window-hook): New variables.
	(calc-trail-display): Restore use of calc-trail-window-hook.
	(calc): Restore use of calc-window-hook.

2005-05-31  Masatake YAMATO  <jet@gyve.org>

	* emacs-lisp/find-func.el (find-function-noselect): Handle subroutines.

	* help-fns.el (help-C-file-name): Add autoload mark for
	`find-function-noselect'.

2005-05-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-compile-commands, tex-compile)
	(tex-start-tex): Undo all but the last part of the 2005-05-28 change.

2005-05-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (mark-included-diary-files): Only kill
	included diary buffer if it was not already being visited.
	Reported by Stephen Berman <Stephen.Berman@gmx.net>.

	* calendar/icalendar.el (top-level): Do not require appt.

	* mail/supercite.el (sc-select-attribution): Only use a list
	element from sc-attrib-selection-list if it returns a string.
	Reported by Davide G. M. Salvetti <salve@debian.org>.

2005-05-30  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbname): The resulting thumbname now
	includes a hash value to improve its uniqueness, and has a ".jpg"
	extension.  Also, it is now a valid filename on all systems.
	(thumbs-make-thumb): Use `let', not `let*'.
	(thumbs-show-thumbs-list): Check for JPEG availability.

2005-05-30  Richard M. Stallman  <rms@gnu.org>

	* filesets.el (filesets-menu-ensure-use-cached):
	Prevent warning when emacs-version>= is undefined.

	* printing.el (pr-interactive-n-up): Use string-to-number.

	* emulation/tpu-mapper.el: Use eval-buffer, not eval-current-buffer.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn):
	Warn only when name to be defined is quoted.

2005-05-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-toggle-breakpoint):
	Make regexp more robust.
	(gdb-display-assembler-buffer, gdb-frame-assembler-buffer):
	Force regeneration of disassembly.

2005-05-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-user-invocation): Check if
	calc-invocation-macro is non-nil.

2005-05-29  Juri Linkov  <juri@jurta.org>

	* add-log.el (change-log-font-lock-keywords):
	Add `+' to e-mail regexp to accept mail address with keywords.

	* man.el (Man-name-regexp): Add `:' to accept qualified names.

2005-05-29  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp-mode): Use delay-mode-hooks.

	* ielm.el (inferior-emacs-lisp-mode): Ditto.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-auto-correct-previous-word):
	Undo the change that moves to end of the current word.

2005-05-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-memory-set-repeat-count):
	Throw error when count <= 0 to ensure input is a number.
	(gdb-read-memory-custom): Pick up address from buffer.
	(gdb-memory-mode): Allow user to increment and decrement
	memory address from header line.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-version): Function deleted.
	(flyspell-auto-correct-previous-hook): Doc fix.

	* jit-lock.el (jit-lock-function, jit-lock-after-change):
	Do nothing if memory is full.

	* font-lock.el (font-lock-fontify-syntactically-region):
	Pass t for GREEDY to looking-back.

	* saveplace.el (save-place-alist-to-file): Write the file
	using write-region.

	* subr.el (looking-back): New argument GREEDY.

	* progmodes/compile.el (compilation-start): Set the mode
	before inserting the initial text.

	* progmodes/which-func.el (which-func-update-1): Turn the mode
	off in case of error by setting which-func-mode.

2005-05-29  Peter Heslin  <p.j.heslin@durham.ac.uk>  (tiny change)

	* textmodes/flyspell.el (flyspell-auto-correct-previous-word):
	Narrow down to what's on the screen, and recenter overlays
	at the end of the next word.

2005-05-29  Manuel Serrano  <Manuel.Serrano@sophia.inria.fr>

	* textmodes/flyspell.el (flyspell-emacs, flyspell-use-local-map):
	8Vars moved up.
	(flyspell-default-delayed-commands): Add backward-delete-char-untabify.
	(flyspell-abbrev-p): Default to nil.
	(flyspell-use-global-abbrev-table-p): Doc fix.
	(flyspell-large-region): Allow nil as value.
	(flyspell-use-meta-tab, flyspell-auto-correct-binding): New variables.

	(mail-mode-flyspell-verify): More robust handling
	of `mail-header-separator'.  More efficient signature detection.
	Allow for regexp metacharacters in message-header-separator.
	Adding `To' not to be checked in mail-mode-flyspell-verify.

	(flyspell-prog-mode): Run flyspell-prog-mode-hook.
	(flyspell-mouse-map): Bind M-TAB only if flyspell-use-meta-tab.
	Bind flyspell-auto-correct-binding.
	Bind C-. and C-, .
	(flyspell-mode-map): Likewise.
	(flyspell-mode): Doc fix.
	(flyspell-accept-buffer-local-defs): Preserve current buffer.
	(flyspell-mode-on): Bind flyspell-mouse-map and flyspell-mode-map.
	(flyspell-word-cache-result): New var, always local.
	(flyspell-check-pre-word-p): Doc fix.
	(flyspell-check-changed-word-p): Handle spc like newline.
	(flyspell-post-command-hook): Set flyspell-word-cache-result.
	(flyspell-word-search-backward, flyspell-word-search-forward):
	New functions.
	(flyspell-word): Return t if nothing to check.
	When parsing TeX code, check for after } or \.
	Use flyspell-word-search-backward to find previous word.
	Return nil if duplicated word.
	For word already checked, return same value as last time.
	Set flyspell-word-cache-result after checking.
	Don't clobber the return value.
	(flyspell-get-word): Major rewrite.
	(flyspell-external-point-words): New locals pword, pcount.
	Fix size used in progress message.
	Find the proper corresponding word in flyspell-large-region-buffer.
	(flyspell-region): Check for flyspell-large-region = nil.
	(flyspell-highlight-incorrect-region): Clean up overlays in region.
	(flyspell-auto-correct-word): Check that WORD is a cons.
	(flyspell-correct-word): Likewise.

2005-05-29  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-rule-action-regex)
	(makefile-macroassign-regex, makefile-makepp-mode)
	(makefile-bsdmake-mode): Continuation lines may be empty.
	Reported by Joshua Varner.
	(makefile-makepp-font-lock-keywords): Add $(stem).

2005-05-28  Karl Berry  <karl@gnu.org>

	* textmodes/tex-mode.el: Now that tex-send-command calls
	shell-quote-argument (2005-03-31 change), remove all calls to
	shell-quote-argument; they all end up invoking tex-send-command.
	The double quoting loses on filenames with non-safe characters,
	such as "@".  Reported by Frederik Fouvry.

2005-05-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-assembler-custom): Be more careful
	about preserving point.

2005-05-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-misc.el (calc-info-goto-node): Use info instead of
	Info-goto-node.

	* calc/calc-embed.el (calc-embed-arg): New variable.
	(calc-do-embedded-activate, calc-embedded-activate-formula)
	(calc-embedded-edit, calc-do-embedded-activate): Replace undeclared
	variable by new variable.
	(calc-embedded-make-info): Replace undeclared variable by new
	variable.  When selecting region with positive prefix
	argument, use end of previous line instead of beginning of line.

	* calc/calc-aent.el (calc-arg-values): Declare it.

	* calc/calc-ext.el (calc-help-map, calc-alg-map, calc-alg-esc-map):
	Declare them.

	* calc/calc-stuff.el (math-decls-cache-tag): Declare it.

	* calc/calc.el (calc-alg-map): Declare it.

	* calc/calcalg2.el (math-decls-cache, math-decls-all): Declare them.

2005-05-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-all-registers): New variable.
	(gdb-registers-buffer, toggle-gdb-all-registers):
	Toggle display of floating point registers.
	(gdb-registers-mode-map): Bind SPC to toggle-gdb-all-registers.

	* progmodes/gud.el (gud-goto-info): Use info.  Don't use require.
	(toggle-gud-tooltip-dereference):
	Rename from gud-toggle-tooltip-dereference.

2005-05-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* info.el (Info-goto-node): Revert autoload addition (2004-06-12).

2005-05-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-kbd-report): Remove.
	(calc-kbd-query): Rewrite.

2005-05-27  Juanma Barranquero  <lekktu@gmail.com>

	* image.el (image-library-alist): Move to image.c.
	(image-type-available-p): Doc fix.

2005-05-27  Lute Kamstra  <lute@gnu.org>

	* calc/calc.el (calc):
	* outline.el (outline-1, outline-2, outline-3, outline-4)
	(outline-5, outline-6, outline-7, outline-8):
	* textmodes/dns-mode.el (dns-mode):
	* textmodes/sgml-mode.el (sgml-namespace-face):
	* textmodes/tex-mode.el (superscript, subscript, tex-math-face)
	(tex-verbatim-face, tex-use-reftex):
	* textmodes/texinfo.el (texinfo-heading-face):
	Specify customization group.

	* longlines.el: Don't require easy-mmode.
	(longlines-visible-face): Specify customization group.

2005-05-27  Kenichi Handa  <handa@m17n.org>

	* language/cyrillic.el: Add cyrillic-iso8859-5 characters in the
	encoding table of windows-1251.

	* international/ucs-tables.el (ucs-set-table-for-input):
	If translation-table-for-input of a coding system is a symbol, get
	its translation-table property.

	* international/code-pages.el: Don't register a coding system into
	non-iso-charset-alist more than once.
	(cp-make-coding-system): Likewise.

2005-05-26  John Wiegley  <johnw@newartisans.com>

	* eshell/esh-cmd.el (eshell-eval-command): If the return value of
	`eshell-resume-eval' is wrapped in a list, it indicates that the
	command was run asynchronously.  In that case, unwrap the value
	before checking the delimiter value.

	* eshell/em-cmpl.el (eshell-complete-parse-arguments): If the
	character before a space at the end of a line is \, assume the space
	is part of the last argument rather than a final argument separator.

	* eshell/esh-io.el (eshell-get-target): If `eshell-buffer-shorthand'
	is in use, and the target is `t' or `nil' (which are the most common
	values), don't assume that the symbol target is a buffer.

2005-05-26  Luc Teirlinck  <teirllm@auburn.edu>

	* calendar/calendar.el (calendar-mode-line-format):
	Use mode-line-highlight as mouse-face.

	* time.el (display-time-string-forms, display-time-update):
	Use mode-line-highlight as mouse-face.

2005-05-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-language-alist): Remove extra defvar.

2005-05-26  Lute Kamstra  <lute@gnu.org>

	* arc-mode.el (archive-mode):
	* bookmark.el (bookmark-read-annotation-mode)
	(bookmark-edit-annotation-mode, bookmark-bmenu-mode):
	* bs.el (bs-mode):
	* calc/calc-yank.el (calc-edit-mode):
	* calc/calc.el (calc-mode, calc-trail-mode):
	* calculator.el (calculator-mode):
	* chistory.el (command-history-mode):
	* comint.el:
	* cus-edit.el (custom-mode):
	* descr-text.el (describe-text-mode):
	* ebuff-menu.el (Electric-buffer-menu-mode):
	* ediff-util.el (ediff-mode):
	* emacs-lisp/re-builder.el (reb-mode):
	* emulation/vi.el (vi-mode-setup):
	* emulation/ws-mode.el (wordstar-mode):
	* eshell/esh-mode.el (eshell-mode):
	* forms.el (forms-mode):
	* help-mode.el (help-mode):
	* hexl.el (hexl-mode):
	* ibuffer.el (ibuffer-mode):
	* ielm.el (inferior-emacs-lisp-mode):
	* info.el (Info-mode, Info-edit-mode):
	* international/swedish.el:
	* ledit.el (ledit-from-lisp-mode):
	* locate.el (locate-mode):
	* mail/rmail.el (rmail-mode):
	* mail/rmailedit.el (rmail-edit-mode):
	* mail/rmailsum.el (rmail-summary-mode):
	* mail/supercite.el (sc-electric-mode):
	* net/eudc.el (eudc-mode):
	* net/quickurl.el (quickurl-list-mode):
	* net/snmp-mode.el (snmp-mode, snmpv2-mode):
	* obsolete/ooutline.el (outline-mode):
	* obsolete/options.el (Edit-options-mode):
	* obsolete/rnews.el (news-mode):
	* obsolete/rnewspost.el (news-reply-mode):
	* play/5x5.el (5x5-mode):
	* play/decipher.el (decipher-mode, decipher-stats-mode):
	* play/gomoku.el (gomoku-mode):
	* play/snake.el (snake-mode):
	* play/solitaire.el (solitaire-mode):
	* play/tetris.el (tetris-mode):
	* progmodes/ada-mode.el (ada-mode):
	* progmodes/antlr-mode.el (antlr-mode):
	* progmodes/autoconf.el (autoconf-mode):
	* progmodes/dcl-mode.el (dcl-mode):
	* progmodes/delphi.el (delphi-mode):
	* progmodes/ebrowse.el (ebrowse-tree-mode)
	(ebrowse-electric-list-mode, ebrowse-member-mode)
	(ebrowse-electric-position-mode):
	* progmodes/f90.el (f90-mode):
	* progmodes/fortran.el (fortran-mode):
	* progmodes/icon.el (icon-mode):
	* progmodes/idlw-help.el (idlwave-help-mode):
	* progmodes/idlw-shell.el (idlwave-shell-mode):
	* progmodes/idlwave.el (idlwave-mode):
	* progmodes/inf-lisp.el (inferior-lisp-mode):
	* progmodes/m4-mode.el (m4-mode):
	* progmodes/meta-mode.el (metafont-mode, metapost-mode):
	* progmodes/modula2.el (modula-2-mode):
	* progmodes/octave-inf.el (inferior-octave-mode):
	* progmodes/octave-mod.el (octave-mode):
	* progmodes/pascal.el (pascal-mode):
	* progmodes/sh-script.el (sh-mode):
	* progmodes/sql.el (sql-mode, sql-interactive-mode):
	* progmodes/vhdl-mode.el (vhdl-mode):
	* progmodes/xscheme.el (scheme-interaction-mode):
	* replace.el (occur-mode):
	* ses.el (ses-mode):
	* simple.el (completion-list-mode):
	* skeleton.el:
	* speedbar.el (speedbar-mode):
	* term.el (term-mode):
	* terminal.el (terminal-edit-mode):
	* textmodes/reftex-index.el (reftex-index-mode)
	(reftex-index-phrases-mode):
	* textmodes/reftex-sel.el (reftex-select-label-mode)
	(reftex-select-bib-mode):
	* textmodes/reftex-toc.el (reftex-toc-mode):
	* wdired.el (wdired-change-to-wdired-mode):
	* wid-browse.el (widget-browse-mode):
	Use run-mode-hooks.

	* array.el (array-mode):
	* calendar/todo-mode.el (todo-mode):
	* man.el (Man-mode):
	* play/landmark.el (lm-mode):
	* play/mpuz.el (mpuz-mode):
	Use kill-all-local-variables and run-mode-hooks.

	* subr.el (delay-mode-hooks): Specify indentation.

2005-05-26  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-substitute-special): Don't die for undefined xml
	entities.

2005-05-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-user-define-edit): Don't find substring
	of nil.

2005-05-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-frame-address):
	Rename from gdb-current-address.
	(gdb-previous-frame-address): Rename from gdb-previous-address.
	(gdb-selected-frame): Rename from gdb-current-frame.
	(gdb-get-selected-frame): Rename from gdb-get-current-frame.
	(gdb-frame-number): Rename from gdb-current-stack-level.
	(gdb-ann3): Match new mode-name for disassembly buffer.
	Extend initialization of variables.
	(gdb-post-prompt): Update disassembly from gdb-frame-handler.
	(gdb-memory-mode): Use mouse-face in header line.
	(gdb-assembler-buffer-name): Call it disassembly and give frame
	in mode line.
	(gdb-source-spec-regexp, gdb-assembler-custom)
	(gdb-invalidate-assembler, gdb-frame-handler):
	Make robust to leading zeroes in address format.

2005-05-26  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode): Use `define-derived-mode' to
	define `org-mode'.
	(org-agenda-mode): Use `run-mode-hooks' instead of `run-hooks'.

2005-05-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-edit.el (log-edit-changelog-entries): Distinguish between
	filenames like xfns.c and fns.c.

2005-05-25  Luc Teirlinck  <teirllm@auburn.edu>

	* buff-menu.el (Buffer-menu-revert-function): Improve handling of
	point after reverting.
	(Buffer-menu-make-sort-button): Handle the case where
	`Buffer-menu-use-header-line' is nil.

2005-05-25  Thien-Thi Nguyen  <ttn@gnu.org>

	* vms-patch.el (vms-magic-right-square-brace, vms-magic-colon):
	New funcs.  In minibuffer-local-completion-map bind `]', `/'
	and `:' to them.

2005-05-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* startup.el (normal-top-level): Allow modification of load-path while
	we're iterating over it.

2005-05-25  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbsdir-max-size, thumbs-temp-file)
	(thumbs-cleanup-thumbsdir, thumbs-call-convert)
	(thumbs-resize-interactive, thumbs-insert-image)
	(thumbs-insert-thumb, thumbs-dired-show-marked)
	(thumbs-find-image-at-point, thumbs-delete-images)
	(thumbs-rename-images, thumbs-next-image, thumbs-dired-setroot)
	(thumbs-increment-image-size, thumbs-decrement-image-size):
	Fix typos in docstrings.

2005-05-24  Andre Spiegel  <spiegel@gnu.org>

	* progmodes/cperl-mode.el (cperl-vc-header-alist): Obsolete.
	(cperl-vc-rcs-header, cperl-vc-sccs-header): New user options.
	(cperl-mode): Use them.

2005-05-24  Juanma Barranquero  <lekktu@gmail.com>

	* window.el (quit-window, shrink-window-if-larger-than-buffer):
	Doc fixes.

2005-05-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-inferior-io-mode-map):
	Bind C-d to gdb-inferior-io-eof.

	* dired.el (dired-dnd-popup-notice): Use message-box.

2005-05-23  Masatake YAMATO  <jet@gyve.org>

	* bindings.el (mode-line-major-mode-keymap):
	Bind [mode-line down-mouse-1] to `mouse-major-mode-menu'.

	* faces.el (mode-line-highlight): New face.

	* ruler-mode.el (ruler-mode-ruler): Use mode-line-highlight
	as mouse-face.

	* bindings.el (top-level, help-echo, mode-line-modified)
	(mode-line-mule-info, mode-line-eol-desc): Use mode-line-highlight
	as mouse-face.

2005-05-23  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Remove spurious call to `zerop'.

	* emacs-lisp/cl.el (acons, pairlis): Add docstring.

2005-05-23  Martin Stjernholm  <bug-cc-mode@gnu.org>

	CC Mode update to 5.30.10:

	* progmodes/cc-fonts.el (c-font-lock-declarators): Fix bug where
	the point could go past the limit in decoration level 2, thereby
	causing errors during interactive fontification.

	* progmodes/cc-mode.el (c-make-inherited-keymap): Fix cc-bytecomp
	bug when the file is evaluated interactively.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Handle operator
	declarations somewhat better in C++.

	* progmodes/cc-styles.el, cc-mode.el (c-run-mode-hooks):
	New helper macro to make use of `run-mode-hooks'
	which has been added in Emacs 21.1.
	(c-mode, c++-mode, objc-mode, java-mode, idl-mode, pike-mode)
	(awk-mode): Use it.
	(make-local-hook): Suppress warning about obsolescence.

	* progmodes/cc-engine.el, cc-align.el, cc-cmds.el
	(c-append-backslashes-forward, c-delete-backslashes-forward)
	(c-find-decl-spots, c-semi&comma-no-newlines-before-nonblanks):
	Compensate for return value from `forward-line' when it has moved
	but not to a different line due to eob.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Fix anchoring in
	`objc-method-intro' and `objc-method-args-cont'.

2005-05-23  Alan Mackenzie  <bug-cc-mode@gnu.org>

	CC Mode update to 5.30.10:

	* progmodes/cc-mode.el, cc-engine.el, cc-align.el: Change the FSF's
	address in the copyright statement.  Incidentally, change "along with
	GNU Emacs" to "along with this program" where it occurs.

	* progmodes/cc-mode.el: Add a fourth parameter `t' to the awk-mode
	autoload, so that it is interactive, hence can be found by M-x awk-mode
	whilst cc-mode is yet to be loaded.  Reported by Glenn Morris
	<gmorris+emacs@ast.cam.ac.uk>.

	* progmodes/cc-awk.el: Add character classes (e.g. "[:alpha:]") into AWK
	Mode's regexps.

2005-05-23  Kevin Ryde  <user42@zip.com.au>

	* progmodes/cc-align.el (c-lineup-argcont): Ignore conses for {} pairs
	from c-parse-state, to avoid a lisp error (on bad code).

2005-05-23  Lute Kamstra  <lute@gnu.org>

	* subr.el (font-lock-defaults): Remove defvar as it's already
	defined in font-core.el.

	* font-lock.el (font-lock-beginning-of-syntax-function): Fix docstring.

2005-05-23  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-locals-handler): Make regexps
	more general and work when GDB variable "print pretty" is on,
	as with Emacs, for example.

2005-05-22  Luc Teirlinck  <teirllm@auburn.edu>

	* font-core.el: Update comment.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode):
	Use `after-change-major-mode-hook' instead of `find-file-hook'.

	* buff-menu.el (Buffer-menu-mode): Use `run-mode-hooks'.

2005-05-22  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (yank, yank-pop): Mention `yank-excluded-properties'
	and `yank-handler' in the doc strings.

2005-05-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/cl.el (eql): Remove.  It's a builtin already.

2005-05-22  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key): Move print-help-return-message call
	out of conditional.

	* progmodes/etags.el (list-tags): Use with-no-warnings.

	* mail/smtpmail.el (smtpmail-open-stream): Use with-no-warnings.
	(smtpmail-send-queued-mail): Avoid beginning-of-buffer.
	(starttls-extra-args, starttls-extra-arguments): Add defvars.

	* mail/mailalias.el (mail-get-names): Avoid beginning-of-buffer.

	* language/viet-util.el (viet-viscii-nonascii-translation-table):
	Add defvar.

	* emulation/viper-ex.el (viper-ex-work-buf, viper-ex-print-buf):
	Use defvar, not defconst.

	* hexl.el (hexl-follow-line): Use with-no-warnings.

	* emulation/tpu-extras.el: Use write-file-functions instead of
	write-file-hooks.

	* dired.el (dired-font-lock-keywords): Fontify files with junk
	extensions even if marked by -F.

2005-05-22  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl.el (pushnew, cl-macroexpand, floatp-safe, plusp)
	(minusp, oddp, evenp, mapcar*, list*, copy-list, adjoin, subst):
	* emacs-lisp/cl-extra.el (coerce, map, maplist, cl-mapc, mapl)
	(mapcan, mapcon, some, every, notany, notevery, signum, isqrt)
	(concatenate, list-length, get*, getf, cl-remprop):
	* emacs-lisp/cl-macs.el (function*, case, ecase, typecase)
	(etypecase, progv, lexical-let, lexical-let*)
	(multiple-value-bind, multiple-value-setq, shiftf):
	Improve argument/docstring consistency.

	* subr.el (focus-frame, unfocus-frame): Revert deletion on 2005-05-01.

2005-05-22  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-checkout-model): Handle the case where FILE
	doesn't exist.

	* vc.el (vc-trunk-p): Add autoload cookie.  The function is used in
	vc-rcs.el when vc-mistrust-permissions is t, which is not the default.

2005-05-22  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/bytecomp.el: Remove make-obsolete-variable for
	already deleted variables: auto-fill-hook, blink-paren-hook,
	lisp-indent-hook, inhibit-local-variables, unread-command-event,
	suspend-hooks, comment-indent-hook, meta-flag,
	before-change-function, after-change-function,
	font-lock-doc-string-face.

2005-05-21  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/derived.el (define-derived-mode): Doc fix.

2005-05-21  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-reply): Filter the list in reply-to through
	rmail-dont-reply-to.

2005-05-21  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/sendmail.el (mail-send): Use [[:space:]] instead of a
	literal blank when splitting new-header-values.

2005-05-21  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/cal-menu.el (cal-menu-update): Add separator as a
	string so that tmm doesn't create a completion entry for it.

	* textmodes/table.el (table-disable-menu): Ditto.

2005-05-21  Richard M. Stallman  <rms@gnu.org>

	* progmodes/idlwave.el (idlwave-doc-header): Use insert-file-contents.

	* progmodes/flymake.el (flymake-makehash): Use with-no-warnings.

	* net/rcompile.el (remote-compile): Use compilation-start.

	* tmm.el (tmm-shortcut): Avoid using beginning-of-buffer.

2005-05-21  Daniel Pfeiffer  <occitan@esperanto.org>

	* files.el (auto-mode-alist): Check GNUmakefile before makefile.
	Default to makefile-bsdmake-mode on BSD systems.

	* imenu.el (imenu-generic-expression, imenu--generic-function'):
	REGEXP may also be a search function now.  The part of doc-string
	for describing the structure was 95% identical to that of
	`imenu--generic-function'.  Unify it there.

	* progmodes/make-mode.el (makefile-imenu-generic-expression):
	Use function to find dependencies, because regexp alone is so complex,
	it easily goes into an endless loop.
	(makefile-makepp-mode): Also add submenu for Perl functions
	defined in the makefile.
	(makefile-bsdmake-mode): Special imenu-generic-expression no
	longer needed, due to function call.
	(makefile-match-dependency): Take BOUND into account when checking
	if we're through.

2005-05-20  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (calc-invalidate-units-table):
	Use inhibit-read-only.
	(math-build-units-table-buffer): Use view-mode.

2005-05-20  David Kastrup  <dak@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-add): Correct docstring since
	easy-menu-add is not a nop on Emacs; and clarify when to call it.

2005-05-20  Lute Kamstra  <lute@gnu.org>

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-index-face, diff-hunk-header-face, diff-removed-face)
	(diff-added-face, diff-changed-face, diff-function-face)
	(diff-context-face, diff-nonexistent-face): Put them in the
	diff-mode customization group.

2005-05-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/vhdl-mode.el (vhdl-font-lock-match-item): Simplify regexp.

	* progmodes/sh-script.el (sh-mode, sh-get-word): Minor regexp fixes.

	* font-lock.el (lisp-font-lock-keywords-2): Don't error.
	Minor regexp-optimization.

2005-05-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-toggle-time-grid): New command.
	(org-agenda-use-time-grid, org-agenda-time-grid): New options.
	(org-agenda-add-time-grid-maybe): New function.
	(org-agenda): Call `org-agenda-add-time-grid-maybe'.
	(org-table-create): `dotimes' instead of `mapcar'.
	(org-xor): Simplify implementation.
	(org-agenda): `inhibit-redisplay' turned on.
	(org-agenda-change-all-lines): Use `org-format-agenda-item' to get
	a consistent line after a state change.
	(org-agenda-remove-times-when-in-prefix): New option.
	(org-prefix-has-time): New variable.
	(org-parse-time-string): Optional argument NODEFAULT.
	(org-format-agenda-item): Parse items for time-of-day
	specifications and move these into the prefix if possible.
	(org-agenda-priority): Get current heading, not previous heading
	during agenda remote editing.

2005-05-20  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-seq.el (reduce, fill, replace, remove*)
	(remove-if, remove-if-not, delete*, delete-if, delete-if-not)
	(remove-duplicates, delete-duplicates, substitute)
	(substitute-if, substitute-if-not, nsubstitute, nsubstitute-if)
	(nsubstitute-if-not, find, find-if, find-if-not, position)
	(position-if, position-if-not, count, count-if, count-if-not)
	(mismatch, search, sort*, stable-sort, merge, member*)
	(member-if, member-if-not, assoc*, assoc-if, assoc-if-not)
	(rassoc*, rassoc-if, rassoc-if-not, union, nunion)
	(intersection, nintersection, set-difference, nset-difference)
	(set-exclusive-or, nset-exclusive-or, subsetp, subst-if)
	(subst-if-not, nsubst, nsubst-if, nsubst-if-not, sublis)
	(nsublis, tree-equal): Improve argument/docstring consistency.

	* subr.el (send-string, send-region): Remove obsolescence declaration.
	(window-dot, set-window-dot, read-input, show-buffer)
	(eval-current-buffer, string-to-int):
	Add release number to obsolescence declarations.

2005-05-19  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-magic-forward-char): Enter ido-find-file at end of input.
	(ido-magic-backward-char): Enter ido-switch-buffer at start of input.

2005-05-20  Matt Hodges  <MPHodges@member.fsf.org>

	* faces.el (list-faces-display): Make back button respect optional
	regexp arg.

2005-05-19  Juanma Barranquero  <lekktu@gmail.com>

	* calculator.el (calculator-radix-grouping-mode)
	(calculator-radix-grouping-digits, calculator-displayer)
	(calculator-radix-grouping-separator, calculator-copy-displayer):
	* dabbrev.el (dabbrev-search-these-buffers-only):
	* diff-mode.el (diff-jump-to-old-file, diff-update-on-the-fly)
	(diff-advance-after-apply-hunk, diff-mode-hook)
	(diff-minor-mode-prefix):
	* imenu.el (imenu-use-popup-menu):
	* jit-lock.el (jit-lock-context-time):
	* newcomment.el (comment-fill-column, comment-column)
	(comment-style, comment-padding, comment-multi-line)
	(comment-empty-lines, comment-auto-fill-only-comments):
	* reveal.el (reveal-around-mark):
	* uniquify.el (uniquify-buffer-name-style)
	(uniquify-after-kill-buffer-p)
	(uniquify-ask-about-buffer-names-p, uniquify-ignore-buffers-re)
	(uniquify-min-dir-content, uniquify-separator)
	(uniquify-trailing-separator-p, uniquify-strip-common-suffix):
	* w32-vars.el (w32-fixed-font-alist):
	* emacs-lisp/testcover.el (testcover-potentially-1value-functions):
	* obsolete/rsz-mini.el (resize-minibuffer-frame-max-height):
	* progmodes/antlr-mode.el (antlr-font-lock-maximum-decoration):
	* progmodes/perl-mode.el (perl-indent-level)
	(perl-continued-statement-offset, perl-continued-brace-offset)
	(perl-brace-offset, perl-brace-imaginary-offset)
	(perl-label-offset, perl-indent-continued-arguments)
	(perl-tab-always-indent, perl-tab-to-comment, perl-nochange):
	* progmodes/tcl.el (tcl-indent-level)
	(tcl-continued-indent-level, tcl-auto-newline)
	(tcl-tab-always-indent, tcl-electric-hash-style)
	(tcl-help-directory-list, tcl-use-smart-word-finder)
	(tcl-application, tcl-command-switches, tcl-prompt-regexp)
	(inferior-tcl-source-command):
	* textmodes/fill.el (enable-kinsoku):
	* textmodes/reftex-vars.el (reftex-index-phrases-wrap-long-lines):
	* textmodes/table.el (table-yank-handler):
	Specify missing group (and type, if simple) in defcustom.

2005-05-19  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/compile.el (compilation-finish-function): Fix defvar.

2005-05-19  Richard M. Stallman  <rms@gnu.org>

	* progmodes/make-mode.el (makefile-mode): Use run-mode-hooks.

	* subr.el (event-basic-type): Don't get an error.
	(left-fringe-p): Function deleted.

	* buff-menu.el (Buffer-menu-buffer-face): In group Buffer-menu.
	(list-buffers-noselect): Set `font-lock-face' property, not `face'.

	* dired-aux.el (dired-copy-file-recursive): Handle symlinks
	in recursive copy.

	* frame.el (show-trailing-whitespace): In group `whitespace-faces'.

	* emacs-lisp/byte-run.el (eval-when-compile): Doc fix.

	* emacs-lisp/bytecomp.el
	(byte-compile-file-form-custom-declare-variable):
	Call byte-compile-nogroup-warn if appropriate.

	* progmodes/compile.el (compilation-finish-function): Mark obsolete.
	(compilation-set-window): Don't call left-fringe-p; do it directly.

2005-05-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-graph.el (calc-graph-format-data): Make sure
	var-PlotRejects is bound before trying to check its value.

2005-05-19  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-isearch-minor-mode): Move the
	definition of this variable from reftex-global.el to reftex.el,
	because it is needed in the menu.

2005-05-19  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/copyright.el (copyright-fix-years): Make sure all
	years are fixed.  Don't insert a space after a dash.

2005-05-19  Kim F. Storm  <storm@cua.dk>

	* emulation/crisp.el (crisp-home, crisp-end): Put CUA property.

2005-05-19  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (lisp-font-lock-keywords-2): Do \\) only in
	strings, because (eq ... ?\\) is fairly frequent.

	* progmodes/make-mode.el (makefile-add-this-line-targets):
	Simplify and integrate into `makefile-pickup-targets'.
	(makefile-add-this-line-macro): Simplify and integrate into
	`makefile-pickup-macros'.
	(makefile-pickup-filenames-as-targets): Simplify.
	(makefile-previous-dependency, makefile-match-dependency):
	Don't stumble over `::'.

2005-05-19  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (post-command-idle-hook, post-command-idle-delay):
	Remove obsolescence of post-command-idle-hook and
	post-command-idle-delay.

	* faces.el (list-faces-display): Provide button when describe-face
	is called to take user back to the list of faces.

	* help-fns.el (describe-variable): Remove hyperlinks in a
	variable's value as these are quite frequently inappropriate.

	* follow.el (follow-submit-feedback, follow-mode):
	Remove references to post-command-idle-hook.

2005-05-18  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-previous-dependency)
	(makefile-match-dependency): Check for := (and in bsd mode also
	!=) to give a better result, even when font-lock is not on.

2005-05-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-s-prefix-help):
	Add `calc-copy-special-constant' to help string.

2005-05-18  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/eldoc.el (eldoc-mode): Doc fix.

2005-05-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-poly.el (math-factor-poly-coefs): Make sure the terms
	in linear factors are in proper order.

2005-05-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	Support for jurabib.

	* textmodes/reftex.el (featurep): Define aliases for overlay
	commands, for XEmacs compatibility, and use these aliases in
	overlay initializations.
	(reftex-highlight): Use `reftex-move-overlay'.
	(reftex-unhighlight): Use `reftex-delete-overlay'.
	(reftex-uniq): Function removed.  Use `reftex-uniquify' instead.
	(reftex-access-search-path): Use `reftex-uniquify' instead of
	`reftex-uniq'.

	* textmodes/reftex-sel.el (reftex-select-unmark): Overlay
	`before-string' property modification enables for Emacs as well.
	(reftex-select-item): Use `reftex-delete-overlay'.
	(reftex-select-mark): Use `reftex-make-overlay' and
	`reftex-overlay-put'.
	(reftex-select-unmark): Use `reftex-delete-overlay' and
	`reftex-overlay-put'.

2005-05-18  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp.el (check-parens): Fix docstring.

2005-05-18  Juanma Barranquero  <lekktu@gmail.com>

	* add-log.el (add-change-log-entry):
	* array.el (array-make-template, array-reconfigure-rows)
	(array-init-max-row, array-init-max-column)
	(array-init-columns-per-line, array-init-field-width):
	* replace.el (replace-match-maybe-edit, perform-replace):
	* textmodes/spell.el (spell-region):
	Replace `read-input' by `read-string'.

	* forms.el (forms-mode):
	* finder.el (finder-compile-keywords):
	* shadowfile.el (shadow-read-files):
	Replace `eval-current-buffer' by `eval-buffer'.

	* terminal.el (te-pass-through):
	* net/ange-ftp.el (ange-ftp-process-filter, ange-ftp-gwp-filter)
	(ange-ftp-raw-send-cmd):
	* net/telnet.el (telnet-interrupt-subjob, telnet-c-z)
	(send-process-next-char, telnet-initial-filter, telnet):
	Replace `send-string' by `process-send-string'.

	* progmodes/prolog.el (inferior-prolog-mode): Doc fix.
	(prolog-consult-region): Replace `send-string' by
	`process-send-string'; replace `send-region' by `process-send-region'.

	* progmodes/delphi.el (delphi-log-msg):
	Replace `set-window-dot' by `set-window-point'.

	* subr.el (window-dot, set-window-dot, read-input, send-string)
	(send-region, show-buffer, eval-current-buffer):
	Make really obsolete, as the comment says.

2005-05-17  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-use-hyper-key): Doc fix.
	(cua--init-keymaps): Bind C-return instead of S-return to set
	rectangle mark.

	* emulation/cua-rect.el (cua--init-rectangles): Bind C-return
	instead of S-return to toggle/clear rectangle mark.

2005-05-17  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-dependency-skip): New variable.
	(makefile-macroassign-regex, makefile-make-font-lock-keywords):
	Also fontify plain strings assigned to variables, mostly so that a
	colon has a face and is thus not taken as a dependency separator.
	(makefile-previous-dependency): Inline the new matcher, because it
	is too complex to work in both directions.
	(makefile-match-dependency): Eliminate `backward' arg (see above).
	Completely reimplemented so as to not sometimes go into an endless
	loop.  It should also be more efficient, because first it only
	searches for `:', instead of applying the very complex regexp.
	(makefile-mode): Cancel `font-lock-support-mode', because blocks
	to be fontified in one piece can be too long for JIT.
	Makefiles are never *that* big.

2005-05-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* dired.el (dired-mode): Simplify.

2005-05-17  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Don't generate a
	defcustom for the mode hook variable.

	* emacs-lisp/authors.el (authors): Do parse the ChangeLogs of the
	Emacs Lisp Reference Manual.

2005-05-17  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl.el (eql, floatp-safe, plusp, minusp, oddp)
	(evenp, list*):
	* emacs-lisp/cl-macs.el (macrolet, symbol-macrolet):
	* emacs-lisp/cl-seq.el (subsetp, tree-equal): Doc fixes.

	* net/tramp-smb.el (tramp-smb-open-connection):
	Pass `tramp-chunksize' as fifth (required) argument.

2005-05-16  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (lisp-font-lock-keywords-1):
	Set `font-lock-negation-char-face' for [^...] char group.
	(lisp-font-lock-keywords-2): Highlight regexp's \\( \\| \\).

	* progmodes/make-mode.el (makefile-dependency-regex): Turn it into
	a var, and refine it to mask one more level of nested vars.
	(makefile-rule-action-regex): Turn it into a var, and refine it so
	it recognizes backslashed continuation lines as belonging to the
	same command.
	(makefile-macroassign-regex): Refine it so it recognizes
	backslashed continuation lines as belonging to the same command.
	(makefile-var-use-regex): Don't look at the next char, because it
	might be the same one to be skipped by the initial [^$], leading
	to an overlooked variable use.
	(makefile-make-font-lock-keywords): Remove two parameters, which
	are now variables that some of the modes set locally.
	Handle dependency and rule action matching through functions, because
	regexps alone match too often.  Dependency matching now comes
	last, so it can check, whether a colon already matched something else.
	(makefile-mode): Inform that font-lock improves makefile parsing
	capabilities.
	(makefile-match-dependency, makefile-match-action): New functions.

2005-05-16  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-extra.el (equalp): Doc fix.

	* align.el (align-regexp):
	* ansi-color.el (ansi-color-get-face):
	* array.el (array-reconfigure-rows, array-init-max-row)
	(array-init-max-column, array-init-columns-per-line)
	(array-init-field-width):
	* dired-aux.el (dired-trample-file-versions):
	* dired-x.el (dired-mark-sexp):
	* ediff-diff.el (ediff-extract-diffs, ediff-get-diff3-group):
	* edmacro.el (edmacro-finish-edit, edmacro-parse-keys):
	* emerge.el (emerge-extract-diffs, emerge-get-diff3-group):
	* faces.el (face-read-integer):
	* files.el (backup-extract-version, insert-directory):
	* hexl.el (hexl-insert-decimal-char):
	* server.el (server-process-filter):
	* shell.el (shell-extract-num):
	* startup.el (command-line-1):
	* term.el (term-command-hook):
	* time-stamp.el (time-stamp, time-stamp-string-preprocess)
	(time-stamp-do-number):
	* time.el (display-time-update):
	* timezone.el (timezone-parse-date, timezone-zone-to-minute)
	(timezone-fix-time):
	* vms-patch.el (vms-suspend-resume-hook):
	* calendar/appt.el (appt-convert-time):
	* calendar/cal-bahai.el (mark-bahai-diary-entries):
	* calendar/cal-hebrew.el (mark-hebrew-diary-entries):
	* calendar/cal-islam.el (mark-islamic-diary-entries):
	* calendar/calendar.el (calendar-cursor-to-date)
	(calendar-star-date):
	* calendar/diary-lib.el (diary-attrtype-convert)
	(mark-diary-entries, diary-entry-time):
	* calendar/solar.el (solar-get-number):
	* emacs-lisp/lisp-mnt.el (lm-last-modified-date):
	* emacs-lisp/re-builder.el (reb-display-subexp):
	* emulation/edt.el (edt-set-scroll-margins):
	* emulation/tpu-extras.el (tpu-set-scroll-margins):
	* emulation/vip.el (vip-get-ex-token, vip-get-ex-buffer)
	(vip-get-ex-count):
	* emulation/viper-ex.el (viper-get-ex-token)
	(viper-get-ex-buffer, viper-get-ex-count, ex-next):
	* international/fontset.el (fontset-plain-name):
	* mail/feedmail.el (feedmail-look-at-queue-directory):
	* mail/mailalias.el (mail-get-names):
	* mail/rmail.el (rmail-convert-to-babyl-format):
	* mail/rmailsum.el (rmail-make-basic-summary-line)
	(rmail-summary-next-same-subject, rmail-summary-rmail-update)
	(rmail-summary-goto-msg):
	* mail/smtpmail.el (smtpmail-read-response):
	* net/ange-ftp.el (ange-ftp-guess-hash-mark-size)
	(ange-ftp-vms-add-file-entry):
	* play/gametree.el (gametree-looking-at-ply)
	(gametree-current-branch-score):
	* progmodes/ada-xref.el (ada-prj-find-prj-file)
	(ada-xref-find-in-modified-ali, ada-find-in-src-path):
	* progmodes/cperl-mode.el (condition-case):
	* progmodes/ebrowse.el (ebrowse-set-tree-indentation)
	(ebrowse-set-member-buffer-column-width)
	(ebrowse-select-1st-to-9nth):
	* progmodes/etags.el (etags-snarf-tag):
	* progmodes/flymake.el (flymake-parse-line):
	* progmodes/idlw-shell.el (idlwave-shell-parse-line)
	(idlwave-shell-filter-bp, idlwave-shell-goto-next-error)
	(idlwave-shell-menu-def):
	* progmodes/ps-mode.el (ps-run-goto-error):
	* progmodes/vhdl-mode.el (vhdl-read-offset, vhdl-load-cache)
	(vhdl-speedbar-contract-level):
	* term/mac-win.el (x-handle-numeric-switch):
	* term/sun-mouse.el (sun-get-frame-data):
	* term/w32-win.el (x-handle-numeric-switch):
	* term/x-win.el (x-handle-numeric-switch):
	* textmodes/ispell.el (ispell-parse-output):
	* textmodes/nroff-mode.el (nroff-outline-level):
	* textmodes/reftex-cite.el (reftex-bib-sort-year)
	(reftex-bib-sort-year-reverse, reftex-format-citation):
	* textmodes/reftex-parse.el (reftex-init-section-numbers)
	(reftex-section-number):
	* textmodes/texinfmt.el (texinfo-paragraphindent):
	Replace `string-to-int' by `string-to-number'.

	* international/latexenc.el: Add page marker to force the "Local
	Variables:" string out of the last page.

2005-05-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-mode): Add gud prefix to
	tooltip-change-major-mode.
	(gud-tooltip-print-command): Remove case where gud-minor-mode
	is gdb ("--fullname").
	(gud-tooltip-tips): Turn GUD tooltips off for this case and
	explain to user.

2005-05-16  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-copy-special-constant): New function.

	* calc/calc-ext.el (calc-init-extensions): Add binding for
	`calc-copy-special-constant'.

	* calc/calc-prog.el (calc-edit-format-macro-buffer): Add a case
	for the `calc-copy-special-constant' command.

2005-05-16  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (left-fringe-p): New function.

	* progmodes/compile.el (compilation-setup): Set local value of
	overlay-arrow-string to "" always.
	(compilation-set-window): Left fringe then don't scroll.
	No left fringe then no arrow and scroll message to top.
	(compilation-context-lines): Adjust doc string accordingly.

2005-05-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-magic-forward-char, ido-magic-backward-char)
	(ido-magic-delete-char): New commands for C-f, C-b, C-d.
	(ido-wide-find-dir-or-delete-dir): New command for M-d.
	(ido-define-mode-map): Bind them.  Add C-x prefix to fallback commands.
	(ido-read-file-name): Handle commands with ido property value
	equal to find-file as reading a file name, to allow C-d to enter dired.
	(ibuffer-find-file): Add ido property with value find-file.

2005-05-15  Kim F. Storm  <storm@cua.dk>

	* subr.el (open-network-stream-nowait): Remove.
	(open-network-stream-server): Remove.

2005-05-15  Richard M. Stallman  <rms@gnu.org>

	* faces.el (describe-face): Output a definition link button.

	* help-mode.el (help-face-def): New button type.

	* emacs-lisp/copyright.el (copyright-fix-years):
	Match properly if the first year is 2-digit.
	Don't mess up the whitespace after the years by filling.

	* dired-aux.el (dired-mark-confirm):
	Pass t to dired-get-marked-files for DISTINGUISH-ONE-MARKED.

	* dired.el (dired-map-over-marks): New arg DISTINGUISH-ONE-MARKED.
	(dired-get-marked-files): New arg DISTINGUISH-ONE-MARKED.
	(dired-mark-pop-up): Handle FILES = (t FILE) specially.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set font-lock-comment-start-skip.

	* font-lock.el (font-lock-comment-start-skip): New variable.
	(font-lock-comment-end-skip): New variable.
	(font-lock-fontify-syntactically-region): Use them if non-nil.

2005-05-15  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-store-value): Return a string rather
	than display it as a message.
	Use calc-var-name for variable name.
	(calc-store-into): Add the result of calc-store-value to message.
	(calc-copy-variable): Add a message.
	(calc-store-exchange): Improve error messages.
	(calc-store-binary, calc-store-map): Don't reset the values of
	special constants.

2005-05-14  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/derived.el (define-derived-mode): Add link to Elisp
	manual to docstring.

	* files.el (hack-local-variables-confirm): Add STRING argument.
	Make the function handle non file visiting buffers correctly.
	(hack-local-variables-prop-line, hack-local-variables)
	(hack-one-local-variable): Use STRING arg of
	`hack-local-variables-confirm'.

2005-05-14  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.49.

	* net/tramp.el (tramp-handle-dired-call-process)
	(tramp-handle-insert-directory): `insert-buffer' cannot be used
	because the contents of the Tramp buffer is changed before
	insertion (`expand-file' and alike).
	(tramp-handle-insert-directory): If `localname' has an empty
	nondirectory name, it must not be quoted.
	(tramp-pre-connection): Add parameter CHUNKSIZE.  Make local
	variable `tramp-chunksize'.  Change callees.
	(tramp-open-connection-setup-interactive-shell): Check remote host
	for buggy `send-process-string' implementation.
	Set `tramp-chunksize' if found.  Reported by Michael Kifer
	<kifer@cs.sunysb.edu> (and a lot of other people all the years).
	(tramp-handle-shell-command): `insert-buffer' cannot be used
	because the contents of the Tramp buffer is changed before
	insertion (`expand-file' and alike).  Reported by Frédéric Bothamy
	<frederic.bothamy@free.fr>.
	(tramp-set-auto-save): Actions should be done for Tramp file name
	handler only.  Ange-FTP has its own auto-save mechanism.
	Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
	(tramp-set-auto-save-file-modes): Set file modes of
	`buffer-auto-save-file-name' to ?\600 as fallback solution.
	Reported by Ferenc Wagner <wferi@tba.elte.hu>.
	(tramp-bug): Remove obsolete variable.
	(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
	for presence of `mml-mode'.  Make it running for older Emacsen as well.

2005-05-14  John Paul Wallington  <jpw@pobox.com>

	* ibuf-ext.el (define-ibuffer-filter filename):
	If `dired-directory' is a list, use its car.

2005-05-14  Daniel Brockman  <daniel@brockman.se>  (tiny change)

	* ibuffer.el (define-ibuffer-column filename):
	If `dired-directory' is a list, use its car.

2005-05-14  Richard M. Stallman  <rms@gnu.org>

	* subr.el (symbol-file): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn): New function.
	(byte-compile-form): Call byte-compile-nogroup-warn.
	(byte-compile-warning-types): Doc fix.

	* eshell/esh-mode.el (eshell-find-tag): Use with-no-warnings.

	* progmodes/cc-engine.el (c-literal-faces):
	Add font-lock-comment-delimiter-face.

	* net/net-utils.el (dig): Use with-no-warnings.

	* mail/supercite.el (sc-cite-frame-alist, sc-uncite-frame-alist)
	(sc-recite-frame-alist, sc-default-cite-frame)
	(sc-default-uncite-frame, sc-default-recite-frame)
	(sc-attrib-selection-list, sc-rewrite-header-list):
	Mark as risky-local-variable.

	* international/ogonek.el (ogonek-jak, ogonek-how):
	Don't use beginning-of-buffer.

	* emacs-lisp/eldoc.el (eldoc-documentation-function): Add autoload.

	* calendar/solar.el (solar-data-list): Move definition up.

	* dnd.el (dnd-protocol-alist): Add autoload.

	* progmodes/sh-script.el: Many doc usage fixes.
	(sh-indent-after-do): Change default to match common styles.

2005-05-13  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (interpreter-mode-alist)
	(auto-mode-interpreter-regexp): Doc fixes.

2005-05-13  Matt Hodges  <MPHodges@member.fsf.org>

	* tmm.el (tmm-get-keymap): Include only active menus and menu items.

	* emacs-lisp/easymenu.el (easy-menu-define): Doc fixes.

2005-05-13  Jan Djärv  <jan.h.d@swipnet.se>

	* dired.el (dired-mode): make-variable-buffer-local =>
	make-local-variable.

2005-05-13  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-select-convert-to-string): Try coding
	systems in mac-script-code-coding-systems if specified one cannot
	encode string for `com.apple.traditional-mac-plain-text'.

2005-05-13  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-targets-face)
	(makefile-shell-face, makefile-makepp-perl-face): New faces.
	(makefile-dependency-regex): Fix it to not make the colon in
	$(var:a=b) special.
	(makefile-rule-action-regex): New regexp for highlighting embedded
	Shell strings.
	(makefile-macroassign-regex): Handle != for highlighting as
	embedded Shell strings.
	(makefile-var-use-regex): New const.
	(makefile-statements, makefile-automake-statements)
	(makefile-gmake-statements, makefile-makepp-statements)
	(makefile-bsdmake-statements): New consts.
	(makefile-make-font-lock-keywords): New function.
	(makefile-automake-font-lock-keywords)
	(makefile-gmake-font-lock-keywords)
	(makefile-makepp-font-lock-keywords)
	(makefile-bsdmake-font-lock-keywords): New consts.
	(makefile-mode-map): Add switchers between the various submodes.
	(makefile-mode): Document the availability of the variants.
	(makefile-automake-mode, makefile-gmake-mode)
	(makefile-makepp-mode, makefile-bsdmake-mode): New derived modes.

	* files.el (auto-mode-alist, interpreter-mode-alist): Set up the
	new variants of makefile-mode.

2005-05-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-comment-delimiter-face): Fix up
	the inheritance.

2005-05-12  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp-mode-hook)
	(inferior-lisp-load-hook): Convert defcustoms back to defvars.

	* files.el (normal-mode): Extend the scope of the
	`enable-local-variables' binding to include the `set-auto-mode' call.
	(magic-mode-alist): Doc fix.

2005-05-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-comment-delimiter-face): Inherit from
	font-lock-comment-face rather than copying its setting.

2005-05-12  Andreas Schwab  <schwab@suse.de>

	* eshell/esh-mode.el (eshell-send-input): Doc fix.

2005-05-12  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el (define-generic-mode): Don't generate a
	defcustom for the mode hook variable.  Delete the last argument.
	* generic-x.el: Fix callers of define-generic-mode.
	(generic-x-modes): Delete group.
	(show-tabs-tab-face, show-tabs-space-face): Put them in the
	generic-x customization group.

2005-05-12  Kim F. Storm  <storm@cua.dk>

	* font-lock.el (font-lock-negation-char-face): Default to "off".

	* progmodes/cc-fonts.el (c-basic-matchers-before): Don't apply
	font-lock-negation-char-face to ! in !=.

2005-05-12  Masatake YAMATO  <jet@gyve.org>

	* add-log.el (find-change-log): Fix typos in the docstring
	of function.

2005-05-11  Arne Jørgensen  <arne@arnested.dk>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Avoid `re-search-forward' when looking for input encoding because
	of speed and safety.  Better regular expressions for recognizing
	input encoding.  Limit a search for TeX-master/tex-main-file to
	the local variable section.

2005-05-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/sh-script.el (sh-mode-default-syntax-table): Set the
	syntax of $ to "'" (quote).

2005-05-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* dnd.el (dnd-protocol-alist): Improve custom type.

	* dired.el (dired-dnd-protocol-alist): New variable.
	(dired-mode): Use `dired-dnd-protocol-alist'.  Move call of
	`dired-mode-hook' to the end.

2005-05-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-fontify-syntactically-region): Don't use
	comment-end if comment-start-skip is not set.
	Obey the font-lock-comment-delimiter-face variables.

2005-05-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (executable-find): Move from executable.el.  Use
	locate-file.
	* progmodes/executable.el (executable-find): Move to files.el.

	* font-lock.el (font-lock-fontify-keywords-region): Use a marker
	when trying to ensure forward progress.

2005-05-11  Chong Yidong  <cyd@stupidchicken.com>

	* mouse-sel.el (mouse-sel-follow-link-p): New function.
	(mouse-select, mouse-select-internal, mouse-extend-internal):
	Use it to implement mouse-1-click-follows-link functionality.

2005-05-11  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-fontify-syntactically-region):
	Use font-lock-comment-delimiter-face for comment delimiters.

2005-05-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-m-prefix-help): Add mention of
	preserving embedded modes.

2005-05-10  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-indent-for-do): Default to 0.

	* progmodes/ada-mode.el (ada-adjust-case-skeleton):
	Move from ada-stmt.el.
	(ada-mode): Add ada-adjust-case-skeleton to skeleton-end-hook.

	* progmodes/ada-stmt.el (ada-adjust-case-skeleton):
	Move to ada-mode.el.
	(ada-stmt-mode-hook): Delete; do the work in ada-mode.

	* cus-edit.el (custom-file): Call file-chase-links.

	* files.el (read-directory-name): Fix previous change.
	(hack-local-variables-confirm): New function.
	(hack-local-variables-prop-line, hack-local-variables)
	(hack-one-local-variable): Use it.

2005-05-10  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-keywords-alist)
	(font-lock-removed-keywords-alist): Clarify docstrings.

2005-05-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-macro-info): New variable.
	(gdb-source-info): Check for preprocessor info.
	(gdb-tooltip-print-1): New function.  Don't print tooltip if it is
	a macro for a function.
	(gdb-info-breakpoints-custom): Try to find file again if not already
	found (user might have used GDB dir command).
	(gdb-get-location): Update gdb-location-alist correctly for change
	to gdb-info-breakpoints-custom.

	* progmodes/gud.el (gud-tooltip-mode): Require tooltip to be safe.
	(gud-tooltip-print-command): Add gdbmi case.
	(gud-tooltip-tips): Call gdb-tooltip-print-1 first if there is
	preprocessor info.

2005-05-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* startup.el (fancy-splash-insert): Fix typo in doc string.

2005-05-09  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/float.el (string-to-float):
	* obsolete/hilit19.el (hilit-add-pattern):
	* obsolete/rnews.el (news-parse-range, news-select-message)
	(news-get-pruned-list-of-files): Replace `string-to-int' by
	`string-to-number'.

	* obsolete/uncompress.el: Set `find-file-not-found-functions', not
	`find-file-not-found-hooks'; use `add-hook'.
	(uncompress-while-visiting): Set `write-file-functions', not
	`write-file-hooks'; use `add-hook'.

2005-05-09  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-copy-region, cua-cut-region)
	(cua-paste): Handle clipboard action.
	(cua--init-keymaps): Remap clipboard-kill-region and
	clipboard-kill-ring-save.

2005-05-08  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-pretty-mode-name):
	Improve commentary.

	* simple.el (next-error-overlay-arrow-position): Revert the change
	made on 2005-04-30.

2005-05-07  Jay Belanger  <belanger@truman.edu>

	* calc/calcsel2.el (calc-commute-left, calc-commute-right)
	(calc-sel-unpack, calc-sel-isolate): Rename variable `reselect' to
	`calc-sel-reselect'.

	* calc/calc-mode.el (calc-save-modes): Reset the modes list if
	Calc is in embedded mode.

2005-05-07  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/compile.el (compilation-setup):
	Set overlay-arrow-string to an empty string on text terminals.

	* textmodes/ispell.el (ispell-program-name): Try looking for
	"aspell" along exec-path, and if found, use it as the default
	speller program.

2005-05-07  Jirka Kosek  <jirka@kosek.cz>  (tiny change)

	* international/mule.el (sgml-xml-auto-coding-function):
	Recognize encoding='FOO' in single quotes as well as in double quotes.

2005-05-07  Johan Bockgård  <bojohan@dd.chalmers.se>

	* emacs-lisp/cl-macs.el (cl-transform-lambda): Recognize `declare'
	as well as `interactive', so that defmacro* would recognize
	`declare' forms.

2005-05-07  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-pretty-mode-name):
	Explain more about the LIGHTER arg's usage in the doc string.
	Add commentary to clarify what the code does.  Fix the regexp that
	strips whitespace from LIGHTER.  Quote LIGHTER before using it,
	since it could have characters special to regular expressions.

2005-05-07  Matt Hodges  <MPHodges@member.fsf.org>  (tiny change)

	* replace.el (occur-1): Bind inhibit-read-only so that
	erase-buffer doesn't barf on read-only text properties (likewise
	for add-text-properties in occur-engine).  Mark buffer as unmodified.
	(occur-engine): Don't set buffer-read-only here.

2005-05-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-mode-commit, cvs-mode-edit-log): Don't fiddle with
	list-buffers-directory.  This caused the *cvs-commit* buffer to be
	sometimes mistakenly reused as a *cvs* buffer.

2005-05-07  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el: Move code for GUD tooltips into gud.el.
	(require): CL no longer needed to compile case.
	(tooltip-mode): Do not toggle functions for GUD tooltips.
	(tooltip-gud-tips-p): Remove.  Replace with minor mode
	gud-tooltip-mode in gud.el.
	(tooltip-gud-modes, tooltip-gud-display, tooltip-gud-echo-area)
	(tooltip-gud-toggle-dereference): Rename in gud.el by replacing
	tooltip-gud prefix with gud-tooltip and obsolete.
	(tooltip-change-major-mode, tooltip-activate-mouse-motions-if-enabled)
	(tooltip-mouse-motions-active, tooltip-activate-mouse-motions)
	(tooltip-mouse-motion): Mouse movement functions/variable.
	Rename in gud.el by adding gud prefix.
	(tooltip-gud-original-filter, tooltip-gud-dereference)
	(tooltip-gud-event, tooltip-toggle-gud-tips)
	(tooltip-gud-process-output, tooltip-gud-print-command)
	(tooltip-gud-tips): GUD tooltip functions/variables.  Rename in
	gud.el by replacing tooltip-gud prefix with gud-tooltip.
	(gdb-tooltip-print): Move to gdb-ui.el.

	* progmodes/gud.el: Move code for GUD tooltips from tooltip.el.
	(require): CL needed to compile case.
	(gud-tooltip-mode): Use to toggle GUD tooltips instead of
	tooltip-gud-tips-p.  Make it a minor-mode.
	(gud-find-file): Only prepare GUD tooltips if gud-tooltip-mode is t.
	(gud-menu-map): GUD tooltips use gud-tooltip-mode now.
	(gud-tooltip-modes, gud-tooltip-display, gud-tooltip-echo-area)
	(gud-tooltip-change-major-mode)
	(gud-tooltip-activate-mouse-motions-if-enabled)
	(gud-tooltip-mouse-motions-active, gud-tooltip-activate-mouse-motions)
	(gud-tooltip-mouse-motion, gud-tooltip-toggle-dereference)
	(gud-tooltip-original-filter, gud-tooltip-dereference)
	(gud-tooltip-event, tooltip-toggle-gud-tips)
	(gud-tooltip-process-output, gud-tooltip-print-command)
	(gud-tooltip-tips): Move from tooltip.el.

	* progmodes/gdb-ui.el (gdb-tooltip-print): Move from tooltip.el.
	(gdb-cpp-define-alist-flags): Doc fix.
	(gdb-set-gud-minor-mode-1): Only prepare GUD tooltips if
	gud-tooltip-mode is t.

2005-05-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/goto-addr.el (goto-address-fontify): Make sure the overlays
	evaporate if their text is deleted.
	(goto-address-at-point): Make it work as a mouse binding as well.
	(goto-address-at-mouse): Obsolete it.  Update users.

2005-05-06  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/appt.el (top-level): No longer activate on load.

2005-05-06  Juanma Barranquero  <lekktu@gmail.com>

	* calendar/cal-bahai.el (mark-bahai-diary-entries):
	* net/webjump.el (webjump):
	* progmodes/idlw-help.el (idlwave-do-context-help1)
	(idlwave-highlight-linked-completions):
	* textmodes/po.el (po-find-file-coding-system-guts):
	Replace `assoc-ignore-case' by `assoc-string'.

2005-05-06  Eli Zaretskii  <eliz@gnu.org>

	* files.el (locate-file): Doc fix.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-program): Doc fix.
	Remove the redundant test for ms-dos.

	* progmodes/cmacexp.el (c-macro-preprocessor): Use locate-file to
	look for the preprocessor with exec-suffixes.  If not found in
	standard places, look in exec-path.  Remove most of the tests that
	used system-type.

	* loadup.el: Load jka-cmpr-hook instead of jka-comp-hook.

	* jka-compr.el (jka-compr-uninstall): Add autoload cookie.

	* jka-cmpr-hook.el: Renamed from jka-comp-hook.el, to avoid
	file-name clash with jka-compr.el on 8+3 filesystems.

2005-05-06  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Don't define or bind scroll bar functions if
	x-toolkit-scroll-bars is t.
	(x-select-text, x-get-selection-value): Clear
	x-last-selected-text-clipboard if x-select-enable-clipboard is
	nil.
	(PRIMARY): Put mac-scrap-name property.
	(mac-select-convert-to-file-url): New function.
	(public.file-url): New selection target type.  Add to
	selection-converter-alist.
	(x-get-selection, x-selection-value): Handle it.
	(x-cut-buffer-or-selection-value): New alias.

2005-05-05  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-summary): Use current BibTeX
	entry to avoid calling bibtex-find-entry with arg global
	being t.  Remove arg key.
	(bibtex-summary-function, bibtex-complete-crossref-cleanup)
	(bibtex-copy-summary-as-kill): Change accordingly.

2005-05-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/org.el (org-get-entries-from-diary): Remove unused vars.
	(org-agenda-date-later): Use with-current-buffer.

2005-05-05  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias)
	(define-obsolete-variable-alias): Doc Fixes.

2005-05-06  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Fix 2005-04-26 change.  Must still use
	vertical-motion when selective-display is active.

	* ido.el (ido-setup-hook): New hook.
	(ido-define-mode-map-hook): Remove hook; use ido-setup-hook instead.
	(ido-input-stack): New var.
	(ido-define-mode-map): Bind M-b to ido-push-dir.  Move old
	ido-next-work-file binding to M-O.
	Bind M-f to ido-wide-find-file-or-pop-dir.
	(ido-define-mode-map): Don't run ido-define-mode-map-hook.
	(ido-read-internal): Run ido-setup-hook.
	Catch quit in read-file-name and read-string to cancel edit.
	Handle new push, pop, and pop-all exit codes (for M-b/M-f).
	Automatically pop-all when completing a directory name (RET).
	(ido-file-internal): Add with-no-warnings around ffap and dired code.
	(ido-exit-minibuffer): Use exit-minibuffer instead of throw.
	(ido-wide-find-file, ido-wide-find-dir): Catch quit to cancel find.
	(ido-push-dir, ido-pop-dir, ido-wide-find-file-or-pop-dir):
	New functions for M-b/M-f to move among the directory components.
	(ido-make-merged-file-list): Catch quit to cancel merge.
	(ido-make-dir-list): Delete "." when ido-input-stack is non-empty.
	(ido-completion-help): No warnings for ido-completion-buffer-full.

2005-05-05  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (font-lock-negation-char-face): New face and variable.
	* progmodes/cc-fonts.el (c-cpp-matchers): Use it.
	* progmodes/sh-script.el (sh-font-lock-keywords): Use it.
	* progmodes/cperl-mode.el (cperl-init-faces): Use it.
	* progmodes/make-mode.el (makefile-font-lock-keywords): Use it.

2005-05-05  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias):
	Fix typo in docstring.

	* progmodes/ebrowse.el (ebrowse-install-1-to-9-keys)
	(ebrowse-print-statistics-line)
	(ebrowse-electric-position-mode-hook): Fix typo in docstring.

	* term/w32-win.el (image-library-alist): Add additional name for
	Xpm library.

2005-05-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cmacexp.el (c-macro-preprocessor): Update for BSD and
	use gcc instead of cpp.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-flags): New variable.
	(gdb-create-define-alist): Use it.
	(gdb-cpp-define-alist-program): Update for MS-DOS.

2005-05-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cmacexp.el (c-macro-preprocessor): Update for Mac OS X.

2005-05-04  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key): No error when UNTRANSLATED is nil.

	* simple.el (line-move-1): Fix previous change to signal errors
	appropriately.

2005-05-03  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Now at 0.12.
	(icalendar-duration-correction): Remove.
	(icalendar--get-event-properties): Split result at commas.
	(icalendar--decode-isoduration): New optional argument
	DURATION-CORRECTION.
	(icalendar--convert-ordinary-to-ical, icalendar--convert-sexp-to-ical)
	(icalendar--convert-yearly-to-ical, icalendar--convert-weekly-to-ical)
	(icalendar--convert-block-to-ical, icalendar--convert-float-to-ical)
	(icalendar--convert-date-to-ical, icalendar--convert-cyclic-to-ical)
	(icalendar--convert-anniversary-to-ical): New functions, extracted
	from icalendar-export-region, with bug fixes.
	(icalendar-export-region): Use the above functions.
	(icalendar-import-buffer): Check before saving diary file.
	(icalendar--convert-recurring-to-diary)
	(icalendar--convert-non-recurring-all-day-to-diary)
	(icalendar--convert-non-recurring-not-all-day-to-diary): New functions,
	extracted from icalendar--convert-ical-to-diary, with bug fixes.
	(icalendar--convert-ical-to-diary): Use the above functions.

2005-05-03  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-define-alist, cc-create-define-alist):
	Remove these recent additions.
	(c-mode): Restore to before 2005-04-28.

	* progmodes/cc-vars.el (cc-define-list-program): Remove this
	recent addition.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-program)
	(gdb-define-alist): New variables.
	(gdb-create-define-alist): New function.
	(gdb-set-gud-minor-mode-1): Handle gdb-define-alist.
	(gdb-source, gdb-memory-set-repeat-count): Replace string-to-int
	with string-to-number.
	(gdb-reset): Kill gdb-define-alist.  Move assignments outside loop.

	* progmodes/gud.el: Replace string-to-int with string-to-number.
	(gud-find-file): Handle gdb-define-alist.

	* tooltip.el (tooltip-gud-tips): Use gdb-define-alist.

2005-05-02  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token):
	* calc/calc-bin.el (calc-word-size):
	* calc/calc-ext.el (calc-read-number-fancy):
	* calc/calc-forms.el (calc-time, calc-date-notation, math-this-year)
	(math-parse-date, math-parse-standard-date, calcFunc-tzone):
	* calc/calc-frac.el (calc-over-notation):
	* calc/calc-graph.el (calc-graph-plot, calc-graph-set-styles)
	(calc-graph-num-points, calc-graph-init):
	* calc/calc-prog.el (calc-read-parse-table-part)
	(calc-edit-macro-repeats):
	* calc/calc-yank.el (calc-do-grab-rectangle):
	* calc/calc.el (calcDigit-key, math-read-number, math-read-bignum):
	Replace `string-to-int' by `string-to-number'.

2005-05-02  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: Use executing-kbd-macro-index variable.

2005-05-02  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/rlogin.el (rlogin-parse-words): Delete func.
	(rlogin): Use split-string, not rlogin-parse-words.
	Also, if there are option-like elements in the parsed args,
	take the host to be the first arg immediately following them.
	Suggested by Michael Mauger.

2005-05-01  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (executing-macro): Use `define-obsolete-variable-alias'.

2005-05-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): Use a shell.
	(cc-mode-cpp-program): Rename to cc-define-list-program and
	move to cc-vars.el.

	* progmodes/cc-vars.el (cc-define-list-program):
	Change to "gcc -E -dM -".  Make customizable.

2005-05-02  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Fix check for CUA-mode if no init file.

2005-05-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-mode-cpp-program): Change to "gcc -E".

	* international/mule-util.el (truncate-string): Remove alias and
	obsolete declaration.

	* international/mule-cmds.el (update-iso-coding-systems):
	Remove alias and obsolete declaration.

	* international/mule.el (coding-system-parent): Remove alias and
	obsolete declaration.

	* subr.el (define-function, sref): Remove aliases and obsolete
	declarations.
	(chars-in-region): Remove obsolete declaration.

2005-05-01  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-mode): Set widen-automatically to nil, locally.

	* simple.el (widen-automatically): New variable.
	(pop-global-mark): Obey widen-automatically.

2005-05-01  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Call substitute-key-definition
	before the keymap size is increased by a lot of define-key calls.

2005-05-01  Richard M. Stallman  <rms@gnu.org>

	* subr.el (add-to-invisibility-spec, remove-from-invisibility-spec):
	Rename ARG to ELEMENT.  Doc fix.

2005-05-01  Nick Roberts  <nickrob@snap.net.nz>

	* allout.el (allout-exposure): Remove macro and obsolete declaration.
	Remove references to allout-exposure/change to allout-new-exposure.

	* emacs-lisp/bytecomp.el (dot, dot-min, dot-max): Don't create
	bytecode symbols.

	* subr.el (dot, dot-marker, dot-min, dot-max, buffer-flush-undo)
	(compiled-function-p, focus-frame, unfocus-frame):
	Remove aliases and obsolete declarations.
	Back out inadvertent changes from previous commit.

2005-05-01  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (require-final-newline): Make Custom tags consistent
	with mode-require-final-newline.
	(mode-require-final-newline): Doc fix.

2005-05-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Fix regular expressions.

2005-05-01  David Kastrup  <dak@gnu.org>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Fix regular expressions.

2005-05-01  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (string-to-int): Make obsolete.

2005-04-30  Richard M. Stallman  <rms@gnu.org>

	* simple.el (next-error-overlay-arrow-position): Turn off, for ttys.

	* loadup.el: Load jka-comp-hook.

	* jka-compr.el: Many functions and vars moved to jka-comp-hook.el.
	(jka-compr-handler): Add autoload.  `put' calls moved
	to jka-comp-hook.el.
	(compression, jka-compr): defgroups moved to jka-comp-hook.el.
	(jka-compr-inhibit): Autoload.

	* jka-comp-hook.el: New file.
	Enable the mode by default.

	* files.el (backup-buffer-copy): Use copy-file instead
	of write-region, and put back the 'excl.

2005-04-30  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/flymake.el (flymake-split-string)
	(flymake-split-string, flymake-log, flymake-pid-to-names)
	(flymake-reg-names, flymake-get-source-buffer-name)
	(flymake-unreg-names, flymake-add-line-err-info)
	(flymake-add-err-info): Clarify docstrings.
	(flymake-popup-menu, flymake-make-emacs-menu)
	(flymake-make-xemacs-menu): Add docstrings.
	(flymake-get-buffer-*, flymake-set-buffer-*): Functions deleted.
	Set variables directly throughout.

2005-04-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): Check that file
	exists.  Initialize cc-define-alist.
	(c-mode): Add cc-create-define-alist locally to after-save-hook.
	If there is no file (Macroexpansion) don't create an alist.

2005-04-29  Sam Steingold  <sds@gnu.org>

	* progmodes/cc-mode.el (cc-mode-cpp-program): New user variable.
	(cc-create-define-alist): Use it instead of the hard-coded string.

2005-04-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-conf.el (file-coding-system-alist): Fix regexp
	for latexenc.

2005-04-29  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el: Improve commentary section.
	(define-generic-mode): Improve docstring.

2005-04-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (many places): Change to quiet the byte compiler.
	(org-prefix-format-compiled): New variable.
	(org-compile-prefix-format): New function.
	(org-timeline, org-agenda, org-diary): Call org-compile-prefix-format.
	(org-agenda-prefix-format, org-timeline-prefix-format): New options.
	(org-agenda-get-scheduled): Check if file is opened in `org-mode'.
	(org-get-entries-from-diary): Use `org-get-time-of-day' for
	consistency with entries from `org-mode' files.
	(org-get-time-of-day): Fix bug with partial matches early in a line.
	(org-non-link-chars): New constant.
	(org-link-regexp): Respect `org-non-link-chars'.
	(org-agenda-day-view): Remove command.
	(org-agenda-toggle-week-view): Rename from `org-agenda-week-view'.
	(org-follow-bbdb-link, org-store-link): Search also company field.
	(org-highlight-overlay): New variable.
	(org-highlight, org-unhighlight): New functions.
	(org-agenda-mode): Add pre-command-hook to remove highlight.
	(org-evaluate-time-range): Behavior depends upon whether time stamp
	contains a time or not.
	(org-show-subtree, org-show-entry): New functions.
	(org-agenda-cleanup-fancy-diary): Remove empty lines.

2005-04-28  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-output-filter-functions): Add autoload cookie.

2005-04-28  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Fix last change.

2005-04-28  Arne Jørgensen  <arne@arnested.dk>

	* international/latexenc.el: New file.
	* international/mule-conf.el (file-coding-system-alist): For .tex,
	.ltx, .dtx and .drv extensions, use `latexenc-find-file-coding-system'.

2005-04-28  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-add-keywords)
	(font-lock-remove-keywords): Clarify docstring.
	(font-lock-keywords-alist, font-lock-removed-keywords-alist):
	Don't start docstrings with a `*'.
	(font-lock-update-removed-keyword-alist): Give it a docstring.

	* generic-x.el: Update commentary section.
	Only require font-lock when compiling.
	Define all modes conditionally.
	Place all generic modes in the generic-x-modes customization group.
	(generic-x-modes): New customization group.
	(generic-default-modes, generic-mswindows-modes)
	(generic-unix-modes, generic-other-modes): New constants.
	(generic-define-mswindows-modes, generic-define-unix-modes):
	Update docstrings.  Make them obsolete.
	(generic-extras-enable-list): New default value.  Update docstring.
	Improve :type.  Change :set function.
	(bat-generic-mode-syntax-table, rul-generic-mode-syntax-table):
	Fix docstring.

	* emacs-lisp/generic.el (generic-mode-internal):
	Simplify font-lock-defaults.
	(define-generic-mode): Fix docstring.

2005-04-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/grep.el (grep-mode-font-lock-keywords): Use the
	font-lock-face property to highlight matches.

2005-04-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): New function.
	(cc-define-alist): New variable.
	(c-mode): Make it local and initialize it.

	* progmodes/gdb-ui.el (gdb-active-process): New variable.
	(gdb-exited): New function.
	(gdb-annotation-rules): Use it.
	(gdb-starting): Set gdb-active-process to t.
	(gdb-stopping): Amend doc string.
	(gdb-reset): Set gdb-active-process to nil.

	* tooltip.el (tooltip-gud-tips): Show the associated #define
	directives when a C program under GDB is not executing.

2005-04-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cperl-mode.el (cperl-mode): Don't precompile the
	font-lock-fontify-syntactic-keywords.

	* font-lock.el (font-lock-default-fontify-region): Don't force
	parse-sexp-lookup-properties to nil.

2005-04-27  Alexander Klimov  <alserkli@inbox.ru>  (tiny change)

	* man.el (man-mode-syntax-table): Set up `:' to have
	word-constituent syntax.

2005-04-27  Lute Kamstra  <lute@gnu.org>

	* novice.el (disable-command): Don't add spurious newlines to the
	init file.  Reported by Dan Jacobson <jidanni@jidanni.org>.

2005-04-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-finish): Make sure there is more
	than one window before deleting window.

2005-04-26  Luc Teirlinck  <teirllm@auburn.edu>

	* shell.el (shell-prompt-pattern): Doc fix.
	(shell-mode): Set paragraph-separate buffer locally to "\\'".

	* comint.el (comint-prompt-regexp, comint-get-old-input)
	(comint-use-prompt-regexp)
	(comint-use-prompt-regexp-instead-of-fields)
	(comint-replace-by-expanded-history, comint-send-input)
	(comint-output-filter, comint-get-old-input-default)
	(comint-line-beginning-position, comint-bol, comint-show-output)
	(comint-backward-matching-input, comint-forward-matching-input)
	(comint-next-prompt, comint-previous-prompt):
	Rename `comint-use-prompt-regexp-instead-of-fields' to
	`comint-use-prompt-regexp'.  Keep old name as alias and declare
	obsolete.
	(comint-use-prompt-regexp): Shorten first line of doc string.

	* ielm.el (inferior-emacs-lisp-mode): Adapt to above name change.
	Set paragraph-separate buffer locally to "\\'".

	* hippie-exp.el (try-expand-line, try-expand-line-all-buffers):
	Adapt to above name change.

	* net/net-utils.el (nslookup-prompt-regexp, ftp-prompt-regexp)
	(smbclient-prompt-regexp): Ditto.

	* progmodes/inf-lisp.el (inferior-lisp-prompt): Ditto.

2005-04-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-location-alist): Rename from
	gdb-location-list.
	Break lines that are over 80 characters wide.

2005-04-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-info.el (cvs-fileinfo->full-path, cvs-display-full-path):
	New fun and var, to preserve compatibility.

	* pcvs.el, pcvs-info.el: Rename "full-path" -> "full-name".

2005-04-26  Dominique de Waleffe  <ddw@missioncriticalit.com>  (tiny change)

	* pcvs-info.el (cvs-fileinfo->backup-file): Don't pass the full file
	name to file-newer-than-file-p.

2005-04-26  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move-1): Avoid using vertical-motion in easy cases.

	* progmodes/python.el (python-mode):
	Use new name eldoc-documentation-function.

	* hexl.el (hexl-mode): Use new name eldoc-documentation-function.

	* emacs-lisp/eldoc.el (eldoc-mode): Doc fix.
	(eldoc-documentation-function):
	Rename from eldoc-print-current-symbol-info-function.  Calls changed.

2005-04-26  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias): New macro.

2005-04-25  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Fix strings for
	{C,S,A,C-S}-f[1-4].  Use substitute-key-definition to bind
	{C,S,A,C-S}-{f1-f12}.

2005-04-26  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Fix previous change.

2005-04-26  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Fix docstring.

	* font-lock.el (font-lock-fontify-region-function): Fix docstring.
	(font-lock-comment-delimiter-face): Ditto.

	* calc/calc.el (calc-trail-mode): Don't set font-lock-defaults.

2005-04-25  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-view-news): Let-bind inhibit-read-only
	to t while inserting information; use help-mode.

2005-04-25  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (ansi-term-color-vector): Use the xterm colors.
	(term-raw-map): Don't add mappings for \eO and \e[.  Map deletechar.

2005-04-25  Lute Kamstra  <lute@gnu.org>

	* font-core.el (font-lock-defaults): Fix docstring.

	* font-lock.el (font-lock-syntactic-face-function): Fix docstring.

2005-04-25  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Don't check consistency with coding: spec, etc if raw-text or
	no-conversion was found to be safe.

2005-04-24  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-font-lock-keywords): Match any number of
	citation markers at start of each line.

	* mail/rmail.el (rmail-font-lock-keywords): Match any number of
	citation markers at start of each line.

	* font-lock.el (font-lock-comment-delimiter-face): Doc fix.

	* files.el (mode-require-final-newline): Fix previous change.
	(require-final-newline): Fix type label.

2005-04-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-calculate-indent): Fix treatment of first
	statement in buffer (broken by 2004-11-24 change).

2005-04-24  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Save and restore old read-buffer-function
	and read-file-name-function values.  Don't overwrite existing
	non-nil values if ido-mode is enabled without ido-everywhere.

2005-04-24  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (mode-require-final-newline): Minor doc fix.

2005-04-24  Eli Zaretskii  <eliz@gnu.org>

	* subr.el (syntax-after): Doc fix.
	(syntax-class): If argument is nil, return nil.  Mask off upper 16
	bits, not 8 bits.

	* files.el (mode-require-final-newline): Doc fix.
	(backup-buffer-copy): Fix last change.

2005-04-24  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Require select.  Set selection-coding-system to
	mac-system-coding-system.  Call menu-bar-enable-clipboard.
	(x-last-selected-text-clipboard, x-last-selected-text-primary)
	(x-select-enable-clipboard): New variables.
	(x-select-text, x-get-selection, x-selection-value)
	(x-get-selection-value, mac-select-convert-to-string)
	(mac-services-open-file, mac-services-open-selection)
	(mac-services-insert-text): New functions.
	(CLIPBOARD, FIND): Put mac-scrap-name property.
	(com.apple.traditional-mac-plain-text, public.utf16-plain-text)
	(public.tiff): Put mac-ostype property.
	(selection-converter-alist): Add entries for them.
	(mac-application-menu-map): New keymap.
	(interprogram-cut-function, interprogram-paste-function): Set to
	x-select-text and x-get-selection-value, respectively.
	(split-window-keep-point): Set to t.

2005-04-23  Richard M. Stallman  <rms@gnu.org>

	* files.el (read-directory-name): Always pass non-nil
	DEFAULT-FILENAME arg to read-file-name.
	(backup-buffer-copy, basic-save-buffer-2): Take care against
	writing thru an unexpected existing symlink.
	(revert-buffer): In indirect buffer, revert the base buffer.
	(magic-mode-alist): Doc fix.
	(buffer-stale-function): Doc fix.
	(minibuffer-with-setup-hook): Avoid warning.
	(mode-require-final-newline): Doc and custom fix.

	* follow.el (follow-end-of-buffer): Use with-no-warnings.

	* font-lock.el (font-lock-comment-face): On terminals with few colors,
	use the default appearance.
	(font-lock-comment-delimiter-face): New face, new variable.

	* imenu.el (imenu--generic-function): The official position of a
	definition is the start of the line that BEG is in.

	* midnight.el (midnight-timer): Move defvar up.

	* mouse.el (mouse-drag-region-1): Delete some debugging code.

	* saveplace.el (save-place-to-alist): Use with-no-warnings.

	* startup.el (command-line): Use with-no-warnings.

	* window.el (window-size-fixed): New defvar.

	* emacs-lisp/easymenu.el (easy-menu-do-define): Use defalias, not fset.

	* mail/rmail.el (rmail-font-lock-keywords):
	Use font-lock-comment-delimiter-face.

	* mail/sendmail.el (mail-font-lock-keywords):
	Use font-lock-comment-delimiter-face.

	* progmodes/compile.el (next-error-highlight-timer): New defvar.

2005-04-23  SAITO Takuya  <tabmore@rivo.mediatti.net>  (tiny change)

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Specify t for LAXMATCH when matching directories.
	Save match data around compilation-compat-error-properties form.

2005-04-23  David Kastrup  <dak@gnu.org>

	* textmodes/tex-mode.el (TeX-mode, plain-TeX-mode, LaTeX-mode):
	Mention that the autoloaded aliases should be kept for AUCTeX.

2005-04-23  Andreas Schwab  <schwab@suse.de>

	* isearch.el (isearch-forward): Doc fix.

2005-04-23  Eli Zaretskii  <eliz@gnu.org>

	* jit-lock.el (jit-lock-stealth-time): Change default value to 16.
	(jit-lock-stealth-nice): Change default value to 0.5.

2005-04-23  Eric Hanchrow  <offby1@blarg.net>

	* abbrev.el (write-abbrev-file): Write table entries in
	alphabetical order by table name.

2005-04-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-internal): Fix `list' completion.

2005-04-22  Kenichi Handa  <handa@m17n.org>

	* recentf.el (recentf-save-file-coding-system): New variable.
	(recentf-save-list): Encode the file by
	recentf-save-file-coding-system and add coding: tag.

2005-04-22  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/byte-run.el (define-obsolete-variable-alias): New macro.

2005-04-21  Lute Kamstra  <lute@gnu.org>

	* loadhist.el (unload-feature): Don't remove a function from hooks
	if it is about to be restored to an autoload .  Remove functions
	that will become unbound from auto-mode-alist.  Simplify the code.

	* subr.el (assq-delete-all): New implementation that is linear,
	not quadratic.  Suggested by David Kastrup <dak@gnu.org>.
	(rassq-delete-all): New function.

	* menu-bar.el (menu-bar-options-save, menu-bar-showhide-menu):
	Add size-indication-mode.

2005-04-21  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el: Add autoload for widget-value in
	eval-when-compile.

2005-04-21  Nick Roberts  <nickrob@snap.net.nz>

	* menu-bar.el (menu-bar-options-save, menu-bar-showhide-menu):
	Add tooltip-mode.

	* bindings.el (mode-line-mode-menu): Remove tooltip-mode.

2005-04-20  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp): New defgroup.
	(inferior-lisp-filter-regexp, inferior-lisp-program)
	(inferior-lisp-load-command, inferior-lisp-prompt)
	(inferior-lisp-mode-hook, lisp-source-modes)
	(inferior-lisp-load-hook): defvar->defcustom.
	(inferior-lisp-program, inferior-lisp-prompt)
	(inferior-lisp-load-hook): Doc fixes.
	(inferior-lisp-install-letter-bindings): Small change in
	introductory comment.

2005-04-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el (vc-annotate-color-map): Change some colors so that text
	using them as foreground is readable on both white and black
	backgrounds.

2005-04-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-conf.el (translation-table-for-input):
	Remove redundant declaration.

2005-04-20  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Add tooltip-toggle-gud-tips.

	* tooltip.el (tooltip-gud-tips-p): Expand documentation.
	(tooltip-toggle-gud-tips): New function.

2005-04-20  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-symbol-encoder): Fix mappings of left and
	right angle brackets.

2005-04-20  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-use-echo-area): Replace as alias and deprecate.

2005-04-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-get-absolute-file-name-basedir):
	Remove.  Update callers to use expand-file-name instead.

	* subr.el (syntax-class): New function.

	* simple.el (blink-matching-open): Use it.

	* paren.el (show-paren-function): Use it to recognize parens that are
	also used in 2-char comment markers.

2005-04-19  Lute Kamstra  <lute@gnu.org>

	* loadhist.el (unload-feature): Update for new format of
	load-history.  Simplify the code.

2005-04-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add coding: tag and set it to iso-2022-7bit.
	(mac-add-charset-info): New function.  Initialize variable
	mac-charset-info-alist using it.
	(mac-centraleurroman, mac-cyrillic): Do not use UCS in table data
	for translation.
	(mac-symbol-encoder, mac-dingbats-encoder): New translation table.
	(mac-font-encoder-list): Add entries for mac-symbol and mac-dingbats.
	(ccl-encode-mac-symbol-font, ccl-encode-mac-dingbats-font):
	New CCL programs.

2005-04-19  Kim F. Storm  <storm@cua.dk>

	* simple.el (next-buffer, prev-buffer, next-error)
	(scroll-other-window, keyboard-quit, keyboard-escape-quit)
	(clone-indirect-buffer-other-window): Move bindings to bindings.el.

	* bindings.el (next-buffer, prev-buffer, next-error)
	(scroll-other-window, keyboard-quit, keyboard-escape-quit)
	(clone-indirect-buffer-other-window): Move bindings from simple.el.
	(next-buffer, prev-buffer): Add C-x C-right and C-x C-left bindings.
	(next-error, previous-error): Add M-g M-n/n and M-g M-p/p bindings.

2005-04-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* isearch.el (isearch-edit-string): Make the search-ring available for
	minibuffer history commands.
	(minibuffer-local-isearch-map): Remove bindings for M-p and M-n,
	the default history commands now work just as well.
	(isearch-ring-retreat-edit, isearch-ring-advance-edit): Remove.

2005-04-18  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler): Add more
	elaborate check for shift modifier on non-window systems.

2005-04-18  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el: Make "--no-desktop" turn off `desktop-save-mode'.

2005-04-18  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show): Change second arg to USE-ECHO-AREA
	and make it optional.  Don't test tooltip-gud-echo-area here.
	(tooltip-gud-process-output, gdb-tooltip-print):
	Pass tooltip-gud-echo-area to tooltip-show.
	(tooltip-help-tips): Remove second optional arg to tooltip-show.

2005-04-18  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* tooltip.el (tooltip-mode): `emacs-quick-startup' and
	`display-graphic-p' may not be bound yet.

2005-04-17  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): No longer enable Xterm Mouse mode by
	default in terminals compatible with xterm.

	* xt-mouse.el (xterm-mouse-mode): Set init value back to nil.

2005-04-18  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-gud-echo-area): Rename from
	tooltip-use-echo-area.
	(tooltip-show, tooltip-gud-process-output, gdb-tooltip-print)
	(tooltip-help-tips): Allow GUD tooltips to be displayed in echo
	area independently of where help tooltips are displayed.

2005-04-17  David Kastrup  <dak@gnu.org>

	* cus-theme.el (custom-theme-write-variables): Quote variables
	where necessary.

2005-04-17  Richard M. Stallman  <rms@gnu.org>

	* simple.el (yank-excluded-properties): Add follow-link to value.

	* jka-compr.el (jka-compr-compression-info-list): Fix custom type.

	* startup.el (fancy-splash-max-time): Just 30 seconds.
	(fancy-splash-delay): Just 7.
	(fancy-splash-screens): No time limit other than fancy-splash-max-time.

	* loadhist.el (unload-feature): Update for new format of load-history.
	Simplify the code.

	* mail/rmail.el (rmail-ignored-headers): Ignore more headers.
	(rmail-font-lock-keywords): Don't fontify the text of a citation.

	* mail/sendmail.el (mail-font-lock-keywords):
	Don't fontify subject text.
	Don't fontify the text of a citation.

2005-04-17  Mark H. Weaver  <mhw@netris.org>  (tiny change)

	* comint.el (comint-output-filter): Run comint-output-filter-functions
	with point where the user had it.

2005-04-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/ucs-tables.el (ucs-set-table-for-input):
	Disable when using unify-on-decoding.

2005-04-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* emulation/cua-base.el (cua-global-mark-face): Add special case
	for displays supporting a high number of colors.

2005-04-16  Matt Hodges  <MPHodges@member.fsf.org>  (tiny change)

	* repeat.el (repeat): Invoke pre-command-hook and post-command-hook.

2005-04-16  Chong Yidong  <cyd@stupidchicken.com>

	* filesets.el (filesets-add-buffer): If user supplies a name of a
	non-existing fileset, create a new fileset.

2005-04-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-up-heading-all): Fix bug with
	`outline-up-heading-all'.

2005-04-16  Andreas Schwab  <schwab@suse.de>

	* files.el (auto-mode-alist): Handle /etc/sysconfig/*,
	/etc/permissions.d/* and /etc/aliases.d/*.

2005-04-16  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (cp-make-coding-system):
	Set `translation-table-for-input' property value to the symbol
	ucs-mule-to-mule-unicode, not to that value.
	(pt154): Escape guillemet by `\'.

2005-04-15  Luc Teirlinck  <teirllm@auburn.edu>

	* loadup.el: Load tooltip if x-show-tip is fboundp.

	* startup.el (command-line): Add comment.

	* tooltip.el (tooltip-mode): Specify correct standard value for
	Custom in init-value.

2005-04-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-goto-info): Use existing Info buffer, if
	possible.

2005-04-15  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-date-prompt): Rename from
	`org-agenda-date-today'.
	(org-evaluate-time-range): Insert at point instead of directly
	after time range.
	(org-first-headline-recenter, org-subtree-end-visible-p)
	(org-optimize-window-after-visibility-change): New functions.
	(org-agenda-post-command-hook): Don't allow point at end of line,
	to make sure it always hits the text properties.
	(org-agenda-next-date-line, org-agenda-previous-date-line):
	New commands.
	(org-set-regexps-and-options): Category may contain white space.
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Improve marker positions.
	(org-agenda-new-marker): Argument POS made optional.
	(org-agenda-get-timestamps): Deadlines which are done are listed
	in org-done-face now.
	(org-agenda-get-todos, org-agenda-get-timestamps)
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Set `undone-face' and `done-face' properties.
	(org-last-todo-state-is-todo): New variable.
	(org-todo): Set `org-last-todo-state-is-todo'.
	(org-agenda-todo): Change face according to
	`org-last-todo-state-is-todo'.  And change other lines referring to
	the same entry.
	(org-calendar-goto-agenda): New command.
	(org-calendar-to-agenda-key): New option.
	(org-startup-folded): New allowed value `content'.
	(org-set-regexps-and-options): Accept new value `content' for
	`org-startup-folded'.
	(org-get-current-options): Handle new value `content' for
	`org-startup-folded'.
	(org-insert-todo-heading): New command.
	(org-mode): Insert first line "*-* mode: org-mode -*-" when called
	interactively in empty file and option
	`org-insert-mode-line-in-empty-file' has been set.
	(org-agenda-todo, org-agenda-priority): Modify to use
	`org-agenda-change-all-lines'.
	(org-warning-face): Change color on dark background.

2005-04-14  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* international/mule-cmds.el (set-locale-environment): On Mac OS,
	use preferences AppleLocale and AppleLanguages, and variable
	mac-system-locale for default locale.  On Mac OS Classic, use
	mac-system-coding-system for default coding systems.

	* term/mac-win.el: Don't set file-name-coding-system.
	Decode variables system-name, emacs-build-system, user-login-name, and
	user-full-name by mac-system-coding-system on Mac OS Classic.
	(mac-system-coding-system): New variable.

2005-04-13  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Handle `xterm-mouse-mode' before
	reading init file.

	* xt-mouse.el (xterm-mouse-mode): Adapt to above change.

2005-04-13  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/sh-script.el (sh-here-document-word): Make it a
	defcustom.  Doc fix.
	(sh-add): Bash uses $(( )) for arithmetic.
	(sh-while-getopts) <sh>: Set OPTIND back to 1 at end.
	(sh-maybe-here-document): Remove quotes and leading whitespace
	from heredoc word when closing.  Indent heredoc with tabs if word
	starts with "-".

2005-04-13  Richard M. Stallman  <rms@gnu.org>

	* simple.el (undo): Fix previous change.

	* custom.el (defface): Doc fix.

2005-04-13  Lute Kamstra  <lute@gnu.org>

	* Makefile.in (DONTCOMPILE): Remove list.
	(compile, compile-always): Don't use DONTCOMPILE.
	(update-authors): Load the library in which batch-update-authors
	is defined.
	* makefile.w32-in (DONTCOMPILE): Remove list.
	(compile, compile-always): Fix comments.
	(update-authors): Load the library in which batch-update-authors
	is defined.

	* generic-x.el (generic-mode-ini-file-find-file-hook):
	Rename to ini-generic-mode-find-file-hook.
	Keep generic-mode-ini-file-find-file-hook as an alias.
	(ini-generic-mode-find-file-hook): Rename from
	generic-mode-ini-file-find-file-hook.  Fix docstring.
	(ini-generic-mode): Docstring change.
	(bat-generic-mode-run-as-comint): Silence the byte compiler.

	* help.el (describe-key-briefly): UNTRANSLATED can be nil when
	called from lisp.

	* generic.el: Move to the emacs-lisp subdir.

2005-04-12  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Add mappings for A-, C-, S-
	and C-S- function and cursor motion keys.

2005-04-12  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Enable Xterm Mouse mode by default.
	* xt-mouse.el (xterm-mouse-mode): Provide correct standard value
	for Custom.  No longer show "Mouse" in mode line when enabled.
	Doc fix.

2005-04-12  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-rectangle-face)
	(cua-rectangle-noselect-face): Define face attributes here.

	* emulation/cua-rect.el (cua--init-rectangles): Remove face setup.

2005-04-12  Jan Djärv  <jan.h.d@swipnet.se>

	* startup.el (command-line): Turn off blinking cursor if
	cursorBlink in resources is off or false.

2005-04-12  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (dnd): Require dnd.
	(mac-drag-n-drop): Call dnd-handle-one-url.
	(kTextEncodingMacRoman, kTextEncodingISOLatin1)
	(kTextEncodingISOLatin2): Remove constants.
	(mac-script-code-coding-systems): New constant.
	(mac-handle-language-change): New function.
	(special-event-map): Bind it to `language-change' event.
	(mac-centraleurroman, mac-cyrillic): New coding systems.
	(mac-font-encoder-list, ccl-encode-mac-centraleurroman-font)
	(ccl-encode-mac-cyrillic-font): Rename mac-centraleurroman-encoder
	and mac-cyrillic-encoder to encode-mac-centraleurroman and
	encode-mac-cyrillic, respectively.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el, progmodes/gdb-ui.el (gdb-assembler-mode):
	Don't set overlay-arrow-string to "=>" as this is done
	globally in C now.

2005-04-12  Lute Kamstra  <lute@gnu.org>

	* generic-x.el (rc-generic-mode, rul-generic-mode):
	Fix auto-mode-alist entries.
	(etc-fstab-generic-mode): Tweak fontification.

	* generic.el (generic-make-keywords-list): Fix docstring.
	(generic-mode-internal): Simplify generic-font-lock-keywords.

2005-04-11  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-buffer-leading)
	(whitespace-buffer-trailing): Revert the incorrect test inversion.
	However, fix the highlight area for the leading and
	trailing whitespaces to show space.

2005-04-11  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-version): Bump to 3.5.

	(whitespace-buffer-leading, whitespace-buffer-trailing):
	Invert sense of the test to highlight the whitespace.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-display-line): GUD uses its own
	overlay arrow now so don't set overlay-arrow-string.
	(gud-pdb-command-name): Revert back to "pdb" (2004-04-26).

2005-04-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-ansi-current-bold, term-ansi-current-underline)
	(term-ansi-current-reverse, term-ansi-current-invisible)
	(term-ansi-face-already-done): Change to boolean.
	(term-reset-terminal, term-handle-colors-array): Handle the above
	vars accordingly.
	(term-buffer-vertical-motion): Rename from buffer-vertical-motion.
	(term-emulate-terminal): Use the new name.

	* faces.el (secondary-selection): Use yellow1, not yellow.
	(trailing-whitespace): Use red1, not red.

2005-04-11  Jan Djärv  <jan.h.d@swipnet.se>

	* dired.el (dired-mode): Use dnd-* instead of x-dnd-*.
	(dired-dnd-handle-local-file): Call dnd-get-local-file-name.
	(dired-dnd-handle-file): Call dnd-get-local-file-uri.

	* cus-edit.el (dnd): New group.

	* term/w32-win.el (dnd): Require dnd.
	(w32-drag-n-drop): Call dnd-handle-one-url.

	* x-dnd.el: Require dnd.
	(x-dnd-handle-uri-list, x-dnd-handle-file-name):
	Call dnd-handle-one-url.
	(x-dnd-types-alist, x-dnd-insert-utf8-text)
	(x-dnd-insert-utf16-text, x-dnd-insert-ctext): Change x-dnd-insert-text
	to dnd-insert-text.
	(x-dnd-protocol-alist, x-dnd-open-file-other-window)
	(x-dnd-handle-one-url, x-dnd-get-local-file-uri)
	(x-dnd-get-local-file-name, x-dnd-open-local-file)
	(x-dnd-open-file, x-dnd-insert-text): Move to dnd.el (without x-).

	* dnd.el (dnd-protocol-alist): New file with generic DND functions.

2005-04-11  Juan León Lahoz García  <juanleon1@gmail.com>

	* wdired.el: Doc fixes.
	(wdired-confirm-overwrite): Rename from wdired-is-ok-overwrite.
	(wdired-use-dired-vertical-movement): Rename from
	wdired-always-move-to-filename-beginning.
	(wdired-mode-map): Use `ignore' instead of `wdired-newline'.
	(wdired-change-to-wdired-mode): Change mode name.
	(wdired-newline): Delete.

2005-04-11  Richard M. Stallman  <rms@gnu.org>

	* whitespace.el (whitespace-highlight-the-space):
	Don't call whitespace-unhighlight-the-space here.

	* simple.el (undo): Record t in undo-equiv-table
	for the redo record made by an undo-in-region.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-display-inferior-io-buffer)
	(gdb-frame-inferior-io-buffer): New Functions to control
	display of separate IO buffer.
	(menu): Add them to menu-bar.
	(gdb-display-buffer): Check for buffer another frame.
	Protect GUD buffer.
	(gdb-setup-windows): Create IO buffer if not already there.
	(gdb-memory-mode): Remove purecopy noops.

2005-04-11  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-electric-insert): Add optional prefix arg,
	and pass to self-insert-command.

2005-04-11  Lute Kamstra  <lute@gnu.org>

	* generic.el: Commentary section cleanup.
	(generic): Delete.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(default-generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Move to generic-x.el.
	* generic-x.el (generic-x): Docstring fix.  Put it in the data group.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(default-generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Move from generic.el.

2005-04-10  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-write-file): Catch errors writing file.
	This is the same change as revision 1.30 of saveplace.el.

2005-04-10  Richard M. Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-tail): Update copyright year.
	(command-line): Split part of -Q into -D.
	(emacs-basic-display): New defvar.
	(fancy-splash-text): Correct name of menu item.

	* saveplace.el (save-place-alist-to-file): Catch errors writing file.

	* info.el (Info-fontify-node): Handle fontification of multiple * Menu
	lines in one node.

	* comint.el (comint-send-input): New arg ARTIFICIAL.
	Callers in this file changed.

	* abbrev.el (define-abbrevs): Read system abbrevs properly.

	* emacs-lisp/map-ynp.el (map-y-or-n-p): Clarify RET/q in help message.

2005-04-10  Chong Yidong  <cyd@stupidchicken.com>

	* url/url-ldap.el (url-ldap): Add docstring.  Fix call to
	`ldap-search-internal'.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (set-auto-mode-1): Use line-end-position.

	* international/latin-1.el:
	* international/latin-2.el:
	* international/latin-3.el:
	* international/latin-4.el:
	* international/latin-5.el:
	* international/latin-8.el:
	* international/latin-9.el: Give punctuation syntax to NBSP.

	* textmodes/bibtex.el (bibtex-autokey-titleword-ignore)
	(bibtex-reference-key, bibtex-autokey-demangle-name, bibtex-mode):
	Use char-classes to accept non-ascii letters, accepted in some recent
	bibtex implementations.

2005-04-10  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-set-minor-mode): Any non-nil value for the
	variable should enable the mode when set through Custom.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/vhdl-mode.el (vhdl-mode-map-init): Don't override default
	TAB binding so tab-always-indent is obeyed.
	(vhdl-minibuffer-local-map): Move initialization into declaration.
	(vhdl-mode-abbrev-table-init): Mark the abbrevs as `system'.
	(vhdl-run-when-idle, vhdl-create-mode-menu, vhdl-character-to-event)
	(vhdl-hooked-abbrev): Avoid test for XEmacs.
	(vhdl-current-line): Use line-beginning-position.
	(vhdl-doc-variable, vhdl-doc-mode): Call help-setup-xref before
	with-output-to-temp-buffer, so the current position can be recorded.

2005-04-10  Masatake YAMATO  <jet@gyve.org>

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Add regexp for gcov.

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* calendar/time-date.el (time-to-seconds, seconds-to-time)
	(days-to-time, time-subtract, time-add): Don't use the #xhhhh
	syntax which Emacs 20 doesn't support.

2005-04-09  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key-briefly, describe-key):
	Replace strings as event types with "(any string)".

2005-04-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* arc-mode.el (archive-mode-map): Move initialization into
	the declaration.  Override *all* bindings of `undo'.
	(archive-lemacs): Remove, use (featurep 'xemacs) instead.

2005-04-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-standard-units): Redefine Watt hour as W*hr.

2005-04-09  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (xterm-rgb-convert-to-16bit): Simplify.
	(xterm-register-default-colors): Update color values computation
	to match xterm-200.

2005-04-09  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (iso-latin-7): Fix the map.

2005-04-08  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/lisp.el (defun-prompt-regexp)
	(parens-require-spaces, buffer-end, end-of-defun)
	(insert-parentheses): Doc fixes.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* comint.el (comint-highlight-prompt): Fix face spec.
	* hi-lock.el (hi-green): Likewise.

2005-04-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* cus-edit.el (custom-modified-face):
	* comint.el (comint-highlight-input): Fix previous changes.
	* term.el (term-handle-ansi-escape): Add a comment.

2005-04-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* whitespace.el (whitespace-highlight-the-space): Put the same overlay
	in the buffer and in whitespace-highlighted-space.
	(whitespace-unhighlight-the-space): Simplify.
	(whitespace-buffer): Simplify.

2005-04-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* textmodes/table.el (table-cell-face): Add special case for
	displays supporting a high number of colors.
	* progmodes/vhdl-mode.el (vhdl-font-lock-prompt-face)
	(vhdl-font-lock-reserved-words-face)
	(vhdl-speedbar-architecture-face)
	(vhdl-speedbar-instantiation-face)
	(vhdl-speedbar-architecture-selected-face)
	(vhdl-speedbar-instantiation-selected-face): Likewise.
	* progmodes/sh-script.el (sh-heredoc-face): Likewise.
	* progmodes/idlw-help.el (idlwave-help-link-face): Likewise.
	* progmodes/ebrowse.el (ebrowse-tree-mark-face)
	(ebrowse-root-class-face, ebrowse-member-attribute-face)
	(ebrowse-progress-face): Likewise.
	* progmodes/compile.el (compilation-info-face): Likewise.
	* progmodes/cc-fonts.el (c-invalid-face): Likewise.
	* emacs-lisp/re-builder.el (reb-match-3): Likewise.
	* calendar/calendar.el (diary-face): Likewise.
	* woman.el (woman-italic-face, woman-bold-face)
	(woman-unknown-face): Likewise.
	* wid-edit.el (widget-button-pressed-face): Likewise.
	* whitespace.el (whitespace-highlight-face): Likewise.
	* smerge-mode.el (smerge-mine-face, smerge-base-face): Likewise.
	* pcvs-info.el (cvs-marked-face): Likewise.
	* info.el (info-xref): Likewise.
	* ido.el (ido-subdir-face, ido-indicator-face): Likewise.
	* hilit-chg.el (highlight-changes-face)
	(highlight-changes-delete-face): Likewise.
	* hi-lock.el (hi-yellow, hi-green, hi-blue-b, hi-green-b)
	(hi-red-b): Likewise.
	* generic-x.el (show-tabs-tab-face, show-tabs-space-face): Likewise.
	* font-lock.el (font-lock-keyword-face)
	(font-lock-function-name-face, font-lock-warning-face): Likewise.
	* cus-edit.el (custom-invalid-face, custom-modified-face)
	(custom-set-face, custom-changed-face, custom-variable-tag-face)
	(custom-group-tag-face-1, custom-group-tag-face): Likewise.
	* comint.el (comint-highlight-prompt): Likewise.

2005-04-08  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-keywords): Docstring fixes.

2005-04-08  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-show-warning): If the number of unprintable
	chars are more than a limit, print " and more..." at the tail.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Update list.
	(authors-ignored-files): New list.
	(authors-fixed-entries): Fix typo.
	(authors-renamed-files-alist): Update list.
	(authors-add): Check authors-ignored-files.

2005-04-08  Carsten Dominik  <dominik@science.uva.nl>

	* calendar/diary-lib.el (add-to-diary-list): MARKER argument made
	optional, to ensure backward compatibility.

2005-04-08  Stephen Eglen  <stephen@gnu.org>

	* textmodes/flyspell.el (flyspell-large-region): Doc fix.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* buff-menu.el (Buffer-menu-mode-map): Map follow-link to mouse-face.

	* mouse.el (mouse-on-link-p): Doc fix.

2005-04-07  Luc Teirlinck  <teirllm@auburn.edu>

	* ielm.el (ielm-prompt-read-only): Doc fix.

	* comint.el (comint-prompt-read-only): Doc fix.

2005-04-07  Benjamin Rutt  <brutt@bloomington.in.us>

	* ffap.el (ffap-pass-wildcards-to-dired): New user option to
	ensure dired always handles wildcards passed to ffap.
	(find-file-at-point): Use it.
	(ffap-dired-wildcards): Doc fix.

2005-04-07  Juri Linkov  <juri@jurta.org>

	* simple.el (next-error-overlay-arrow-position): New defvar.
	Put "=>" on its property `overlay-arrow-string'.  Add it to
	`overlay-arrow-variable-list'.

	* progmodes/compile.el (compilation-setup):
	Set `next-error-overlay-arrow-position' to nil.  Also set it to
	nil in the local hook `kill-buffer-hook'.  Make local variable
	`overlay-arrow-string' and set it to "=>".
	(compilation-goto-locus): Set BOL position to
	`next-error-overlay-arrow-position' instead of
	`overlay-arrow-position'.

	* info.el (Info-mode): Add `Info-kill-buffer' to `kill-buffer-hook'
	locally instead of adding it to the global hook.
	(Info-kill-buffer): Move up.

2005-04-06  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (xterm-standard-colors): Update color values from
	xterm-200.

2005-04-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2): Add \bfseries.

	* fast-lock.el:
	* lazy-lock.el: Move them to the obsolete subdir.

2005-04-06  Juan León Lahoz García  <juanleon1@gmail.com>

	* wdired.el (wdired-advise-functions, wdired-add-skip-in-replace)
	(wdired-add-replace-advice): Remove.
	(wdired-change-to-wdired-mode): Use query-replace-skip-read-only.

2005-04-06  Kim F. Storm  <storm@cua.dk>

	* startup.el (command-line): Add --bare-bones alias for -Q.

2005-04-06  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Use create-fontset-from-mac-roman-font to
	create the startup fontset if a font specification ends with
	`mac-roman'.

2005-04-06  Lute Kamstra  <lute@gnu.org>

	* add-log.el (change-log-font-lock-keywords): Complete 2005-04-03
	change.

	* emacs-lisp/copyright.el (copyright-update-year): Replace the
	right subexpression.  Suggested by Jay Bingham <jay.bingham@hp.com>.

2005-04-05  Lute Kamstra  <lute@gnu.org>

	* generic.el (generic-mode-internal): Fix 2005-03-31 change.
	(define-generic-mode): Ditto.  Fix debug declaration.

	* generic-x.el (show-tabs-tab-face, show-tabs-space-face):
	Put them in the generic-x group.

	* calendar/timeclock.el (timeclock): Doc fix.

	* generic.el (define-generic-mode): Don't use custom-current-group.
	Document default :group value.
	* emacs-lisp/easy-mmode.el (define-minor-mode): Ditto.
	(define-global-minor-mode): Don't use custom-current-group.

2005-04-05  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* startup.el (command-line-1): Display startup-echo-area-message
	when fancy splash screen is in use.

	* progmodes/sh-script.el (sh-builtins) <bash>: Add `caller'.
	(sh-escaped-newline): New face.
	(sh-font-lock-keywords) <shell>: Improve regexp for escaped
	newline, and use sh-escaped-newline face.

	* progmodes/tcl.el (tcl-escaped-newline): New face.
	(tcl-builtin-list): New variable.
	(tcl-set-font-lock-keywords): Add builtins, variables, and escaped
	newlines.  Fix keywords subexpression number.

2005-04-05  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-diary-default-entry): Fix call to
	`add-to-diary-entry'.

2005-04-05  Kim F. Storm  <storm@cua.dk>

	* ediff-init.el: Use (featurep 'xemacs).

2005-04-05  David Ponce  <david@dponce.com>

	* cus-edit.el (face): Derive from symbol widget.  Display sample
	of the current face on the fly.
	(widget-face-sample-face-get, widget-face-notify): New functions.
	(widget-face-value-create): Remove.

	* wid-edit.el (widget-field-end): Temporarily remove field
	narrowing before to call `get-char-property'.

2005-04-04  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-replacement-list): Add subscripts.
	(math-read-subscripts): New variable.
	(math-read-preprocess-string): Process subscripts.

2005-04-04  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-prompt-read-only): Doc fix.

	* dired.el (dired-copy-filename-as-kill): Make `-' arg behave like
	`-1'.  Doc fix.

2005-04-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-insert-mode-line-in-empty-file):
	Change default value to nil.

2005-04-04  Lute Kamstra  <lute@gnu.org>

	* autorevert.el (auto-revert-mode): Specify :group.
	* battery.el (display-battery-mode): Specify :group.
	* diff-mode.el (diff-minor-mode): Specify :group.
	* font-core.el (font-lock-mode): Specify :group.
	* hl-line.el (hl-line-mode): Specify :group.
	* iimage.el (iimage): New customization group.
	(iimage-mode): Specify :group.
	* longlines.el (longlines-mode): Specify :group.
	* master.el: Don't require easy-mmode.
	(master): New customization group.
	(master-mode): Specify :group.
	* msb.el (msb-mode): Specify :group.
	* reveal.el (reveal-mode): Specify :group.
	* simple.el (next-error-follow-minor-mode): Specify :group.
	* smerge-mode.el (smerge-mode): Specify :group.
	* emacs-lisp/eldoc.el (eldoc-mode): Specify :group.
	* emulation/cua-base.el (cua-mode): Specify :group.
	* international/encoded-kb.el (encoded-kbd-mode): Specify :group.
	* language/thai-util.el (thai-auto-composition-mode)
	(thai-word-mode): Specify :group.
	* mail/supercite.el (sc-minor-mode): Specify :group.
	* progmodes/cwarn.el (cwarn-mode): Specify :group.
	* progmodes/flymake.el (flymake-mode): Specify :group.
	* progmodes/glasses.el (glasses-mode): Specify :group.
	* progmodes/hideif.el (hide-ifdef-mode): Specify :group.
	* textmodes/enriched.el (enriched-mode): Specify :group.
	* textmodes/refill.el (refill-mode): Specify :group.

	* add-log.el (change-log-font-lock-keywords): Names in
	parenthesized lists can contain spaces.

2005-04-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* startup.el (fancy-splash-text): Shorten default text of
	"Emacs Tutorial" line.  Also, if the current language env
	indicates an available tutorial file other than TUTORIAL,
	extract its title and append it to the line in parentheses.
	(fancy-splash-insert): If arg is a thunk, funcall it.

2005-04-04  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-language-alist): Add tags to customization type.

2005-04-03  Luc Teirlinck  <teirllm@auburn.edu>

	* xt-mouse.el (xterm-mouse-mode): Add explicit Custom group, mouse.
	Doc fix.

2005-04-03  Marcelo Toledo  <marcelo@gnu.org>

	* add-log.el (change-log-font-lock-keywords): The manual
	describing a Change Log entry, says: (...) "Aside from these
	header lines, every line in the change log starts with a space or
	a tab.".  The font-lock was not highlighting lines started with
	spaces, added support for it.

2005-04-03  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-url): Use format to generate the url.
	(bibtex-generate-url-list): Update docstring accordingly.  Put the
	complex example in the docstring.
	(bibtex-font-lock-url): Use pop.

2005-04-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/tcl.el (tcl-set-font-lock-keywords): Use new \_< ops.

	* pcvs.el (cvs-checkout): Prompt for cvsroot as well.

2005-04-03  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* filesets.el (filesets-set-default): Doc fix.

2005-04-03  Lute Kamstra  <lute@gnu.org>

	* generic.el (define-generic-mode): Add argument to specify
	keywords for defcustom.
	(default-generic-mode): Specify :group.

	* generic-x.el: Specify :group for all generic modes.

	* desktop.el (desktop-no-desktop-file-hook)
	(desktop-after-read-hook): Doc fix.

2005-04-02  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (visible-mode): Use explicit :group keyword.
	This changes the group of `visible-mode-hook' from paren-blinking
	to editing-basics.

2005-04-02  Sergey Poznyakoff  <gray@Mirddin.farlep.net>  (tiny change)

	* mail/rmail.el (rmail-parse-url): Bugfix.  Parse traditional
	mailbox specifications as well as URLs.
	(rmail-insert-inbox-text): Remove unused conditional branches.

2005-04-01  Jay Belanger  <belanger@truman.edu>

	* calc/calc-graph.el (calc-gnuplot-name, calc-gnuplot-plot-command)
	(calc-gnuplot-print-command): Move definitions to calc.el.

	* calc/calc-embed.el (calc-embedded-announce-formula)
	(calc-embedded-open-formula, calc-embedded-close-formula)
	(calc-embedded-open-word, calc-embedded-close-word)
	(calc-embedded-open-plain, calc-embedded-close-plain)
	(calc-embedded-open-new-formula, calc-embedded-close-new-formula)
	(calc-embedded-open-mode, calc-embedded-close-mode):
	Move definitions to calc.el.

	* calc/calc.el (calc-settings-file, calc-language-alist):
	Make customizable.
	(calc-embedded-announce-formula, calc-embedded-open-formula)
	(calc-embedded-close-formula, calc-embedded-open-word)
	(calc-embedded-close-word, calc-embedded-open-plain)
	(calc-embedded-close-plain, calc-embedded-open-new-formula)
	(calc-embedded-close-new-formula, calc-embedded-open-mode)
	(calc-embedded-close-mode, calc-gnuplot-name)
	(calc-gnuplot-plot-command, calc-gnuplot-print-command): Move here
	from other files and make customizable.

2005-04-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-temp-buffer, cvs-mode-kill-process, cvs-buffer-check):
	Use buffer-live-p.
	(cvs-mode-run): Don't call cvs-update-header here.
	(cvs-run-process): Call cvs-update-header.
	Use process properties for cvs-postprocess and cvs-buffer so that
	the sentinel can behave better if the temp buffer is killed.
	Use a pipe rather than a tty, to better handle unexpected prompts.
	(cvs-sentinel): Rewrite.  Call cvs-update-header.

2005-04-01  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-workfile-unchanged-p): Disable mtime check when
	we go via Tramp or Ange-FTP.  Suggested by Kai Grossjohann.

2005-03-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* generic.el (define-generic-mode): Add indentation rule.

2005-03-31  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (mode-require-final-newline): Make Custom correctly
	report a nil value and allow to set it to nil via Custom.
	Doc fix.

2005-04-01  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Enable the correct case setting for
	dotless-i and dotted-I.

2005-04-01  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-internal): Fall back to non-ido command if
	initial directory is on slow ftp (or tramp) host.

2005-03-31  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/autoload.el (make-autoload):
	Handle define-global-minor-mode.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode):
	Rename from easy-mmode-define-global-mode.
	(easy-mmode-define-global-mode): Alias for define-global-minor-mode.

	* progmodes/scheme.el (scheme-mode-syntax-table):
	Update syntax of | and # for two-character comment syntax.

2005-03-31  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode)
	(define-minor-mode): Call custom-current-group at load-time.

	* generic.el (define-generic-mode): Add debug declaration.
	Add defcustom for the mode hook.
	(generic-mode-internal): Use run-mode-hooks.

2005-03-31  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-1-click-follows-link): Increase to 450 ms.
	(mouse-fixup-help-message): New defun called by show_help_echo
	to fixup mouse-2 prefix in help messages when applicable.

	* tooltip.el (tooltip-show-help-function): Don't fixup message here.

2005-03-31  Kenichi Handa  <handa@m17n.org>

	* language/thai-word.el (thai-find-word-ends): Pay attention to
	the case that we reach the end of buffer.

	* textmodes/fill.el (fill-text-properties-at): New function.
	(fill-newline): Use fill-text-properties-at instead of
	text-properties-at.

2005-03-31  Olive Lin  <olive.lin@versateladsl.be>  (tiny change)

	* textmodes/tex-mode.el (tex-start-tex): Use shell-quote-argument,
	not comint-quote-filename.

2005-03-31  Thien-Thi Nguyen  <ttn@gnu.org>

	* help-fns.el (help-with-tutorial): Revert last change.

2005-03-31  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-scroll-down): Add CUA property.

2005-03-30  Paul Eggert  <eggert@cs.ucla.edu>

	* calendar/cal-china.el: Update reference to "Calendrical
	Calculations" book; there's a new edition.
	* calendar/cal-coptic.el: Likewise.
	* calendar/cal-french.el: Likewise.
	* calendar/cal-hebrew.el: Likewise.
	* calendar/cal-islam.el: Likewise.
	* calendar/cal-iso.el: Likewise.
	* calendar/cal-julian.el: Likewise.
	* calendar/cal-mayan.el: Likewise.
	* calendar/cal-persia.el: Likewise.
	* calendar/calendar.el: Likewise.
	* calendar/holidays.el: Likewise.
	* calendar/lunar.el: Likewise.
	* calendar/solar.el: Likewise.

	* calendar/calendar.el (calendar-day-abbrev-array): Remove trailing
	white space from doc string.

2005-03-30  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-full-help): Remove email address.

2005-03-30  Thien-Thi Nguyen  <ttn@gnu.org>

	* help-fns.el (help-with-tutorial): Delete title line.

2005-03-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/cal-x.el (calendar-one-frame-setup)
	(calendar-only-one-frame-setup, calendar-two-frame-setup): Use t
	rather than `symbol' for set-window-dedicated-p.

	* calendar/appt.el (appt-buffer-name): Make it a constant.
	(appt-add): Doc fix.

	* filesets.el (filesets-menu-path, filesets-menu-before)
	(filesets-menu-in-menu): Doc fix.  Now valid in GNU Emacs.
	(filesets-menu-cache-file): Use directory ~/.emacs.d.
	(filesets-add-submenu): Delete and use add-submenu instead.

2005-03-30  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-phases-of-moon)
	(org-agenda-sunrise-sunset, org-agenda-convert-date)
	(org-agenda-goto-calendar): New commands.
	(org-diary-default-entry): New function.
	(org-get-entries-from-diary): Better parsing of diary entries.
	(org-agenda-check-no-diary): New function.
	("diary-lib"): Advice to function `add-to-diary-list', to allow
	linking to diary entries.
	(org-agenda-execute-calendar-command): New function.
	(org-agenda): Improve visible section in window.
	Use `org-fit-agenda-window'.
	(org-fit-agenda-window): New option.
	(org-move-subtree-down): Better handling of empty lines
	at end of subtree.
	(org-cycle): Numeric prefix is interpreted now as show-subtree N
	levels up.
	(org-fontify-done-headline): New option.
	(org-headline-done-face): New face.
	(org-set-font-lock-defaults): Use `org-headline-done-face'.
	(org-table-copy-down): Rename from `org-table-copy-from-above'.
	When current field is non-empty, it is copied to next row.
	(org-table-copy-from-above): Fix bug which made it
	impossible to copy fields containing only a single non-white character.

2005-03-30  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-end-macro): Isearch may store this command
	into the macro -- so ignore it when executing keyboard macro.

2005-03-30  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-gud-display): Use gud-overlay-arrow-position.

2005-03-29  Kenichi Handa  <handa@m17n.org>

	* language/thai.el ("Thai"): Set setup-function and exit-function
	for Thai language environment.

	* language/thai-util.el: Require thai-word.
	(thai-word-mode-map): New variable.
	(thai-word-mode): New minor mode.
	(setup-thai-language-environment-internal): New function.
	(exit-thai-language-environment-internal): New function.

	* language/thai-word.el (thai-word-table): Declare it by defvar,
	use dolist to initialize it.
	(thai-kill-word, thai-backward-kill-word, thai-transpose-words)
	(thai-fill-find-break-point): New functions.

2005-03-29  Richard M. Stallman  <rms@gnu.org>

	* simple.el (idle-update-delay): Move definition up.
	(set-mark): Doc fix.

2005-03-29  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el: New file.

	* simple.el (buffer-substring-filters): New variable.
	(filter-buffer-substring): New function.
	(kill-region, copy-region-as-kill): Use it.

	* register.el (copy-to-register, append-to-register)
	(prepend-to-register): Use filter-buffer-substring.

2005-03-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): (Re)-initialize gud-filter-pending-text.
	(gud-filter-pending-text): Move in front of gdb.
	(gud-overlay-arrow-position): New variable.
	(gud-sentinel, gud-display-line): Use it in place of
	overlay-arrow-position.

2005-03-29  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-if-indent): Doc fix.
	(fortran-font-lock-keywords-2): Add "where", "elsewhere".
	(fortran-font-lock-keywords-4): New variable.
	(fortran-blocks-re, fortran-end-block-re)
	(fortran-start-block-re): New constants, for hideshow.
	(hs-special-modes-alist): Add a Fortran entry.
	(fortran-mode-map): Bind fortran-end-of-block,
	fortran-beginning-of-block to \M-\C-n, \M-\C-p.
	(fortran-mode): Doc fix.  Add fortran-font-lock-keywords-4.
	(fortran-looking-at-if-then, fortran-end-of-block)
	(fortran-beginning-of-block): New functions, for hideshow.

	* progmodes/f90.el (f90-end-block-re, f90-start-block-re):
	Doc fix.  Tweak regexp.
	(f90-beginning-of-block): Push mark first.

2005-03-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el: Update copyright date.
	(calc-version): Increase to 2.1.
	(calc-version-date): Remove.

	* calc/calc-help.el: Update copyright date.
	(calc-full-help): Remove reference to calc-version-date.
	Update copyright date.

2005-03-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-do-command): Use a pipe for async processes, so password
	prompts don't show up at places where the user can't reply.

2005-03-29  Olive Lin  <olive.lin@versateladsl.be>  (tiny change)

	* textmodes/tex-mode.el (tex-send-command): shell-quote-argument
	on the file name we pass to the inferior shell.

2005-03-29  Stephan Stahl  <stahl@eos.franken.de>  (tiny change)

	* progmodes/which-func.el (which-function): Be robust in the face of an
	imenu--make-index-alist failure.

2005-03-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-mode-map): Don't override C-a and C-e.

	* progmodes/python.el (python-preoutput-filter): Fix last change.

2005-03-29  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-on-entry): Handle autoloaded
	functions and compiled macros.
	(debug-convert-byte-code): Handle macros too.
	(debug-on-entry-1): Don't signal an error when trying to clear a
	function that is not set to debug on entry.

2005-03-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el: Add functions to math-function-table
	properties of tex and math.

2005-03-29  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-plot-string): Translate characters by
	ps-print-translation-table.
	(ps-mule-begin-job): Call find-charset-region/string with
	ps-print-translation-table.
	(ps-mule-printable-p): Return t if CHARSET is ascii or latin-iso8859-1.

	* ps-print.el (ps-print-translation-table): New variable.
	(ps-plot-region): Translate characters by ps-print-translation-table.

2005-03-29  Juri Linkov  <juri@jurta.org>

	* simple.el (next-error-highlight-timer): New variable.

	* progmodes/compile.el (compilation-goto-locus):
	Use `next-error-highlight-timer' instead of `sit-for'.

2005-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mail/supercite.el (sc-mail-field): Use assoc-string.
	(sc-get-address): Simplify regexps.

	* files.el (minibuffer-with-setup-hook): New macro.
	(find-file-read-args): Use it to avoid let-binding
	minibuffer-with-setup-hook (which breaks turning on/off
	file-name-shadow-mode while in the prompt).

	* complete.el (PC-read-include-file-name-internal):
	Use test-completion.

2005-03-28  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el: Bind `font-lock-fontify-block' to M-o M-o.

2005-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (window-buffer-height): Use count-screen-lines.

	* progmodes/python.el (python-preoutput-leftover): New var.
	(python-preoutput-filter): Use it.
	(python-send-receive): Loop until all the result has been received.

2005-03-28  Juri Linkov  <juri@jurta.org>

	* dired.el (dired-mode-map): Add ellipsis to "Compare directories".

	* menu-bar.el (menu-bar-file-menu): Remove ellipsis from
	"Recover Crashed Session".
	(menu-bar-search-menu): Add ellipsis to "Search tagged files".
	(menu-bar-replace-menu): Add ellipsis to "Replace in tagged files".
	(menu-bar-goto-menu): Add ellipsis to "Set Tags File Name".
	(menu-bar-goto-menu): Add ellipsis to "Tags Apropos".
	(menu-bar-options-menu): Add ellipsis to "Set Font/Fontset".
	(menu-bar-manuals-menu): Add ellipsis to "Find Command in Manual".
	(menu-bar-manuals-menu): Add ellipsis to "Find Key in Manual".
	(menu-bar-help-menu): Remove ellipsis from "Find Emacs Packages".

	* ediff-hook.el (menu-bar-ediff-misc-menu, ediff-misc-menu):
	Remove ellipsis from "Ediff Manual", "Customize Ediff", "List
	Ediff Sessions", "Toggle use of separate control buffer frame",
	"Use separate frame for Ediff control buffer".

	* bookmark.el (menu-bar-bookmark-map): Add ellipsis to "Jump to
	Bookmark", "Set Bookmark", "Insert Contents", "Insert Location",
	"Rename Bookmark", "Delete Bookmark".

	* info.el (Info-mode-menu): Remove ellipsis from "Index".
	Add ellipsis to "Lookup a String", "Lookup a string in all indices".
	Add `:active Info-index-alternatives' to "Next Matching Item".

	* wdired.el (wdired-change-to-wdired-mode):
	Mention `wdired-abort-changes' key in the initial message.

	* international/mule.el (auto-coding-alist): Associate non-ascii
	image filename extensions with `no-conversion'.

2005-03-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/iso-acc.el:
	* obsolete/iso-acc.el: Move iso-acc to the obsolete subdir.

2005-03-26  Luc Teirlinck  <teirllm@auburn.edu>

	* textmodes/sgml-mode.el (html-mode): Doc update.

	* autorevert.el (auto-revert-check-vc-info): Minor doc fix.

2005-03-26  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-move-columns): Fix face after extending a line.
	(term-insert-spaces): Likewise.
	(term-reset-terminal): Fix off by one error.

2005-03-26  Eli Zaretskii  <eliz@gnu.org>

	* international/mule.el (auto-coding-alist): Add .xpi files.

	* files.el (auto-mode-alist): Add .xpi files.

2005-03-26  Jure Cuhalev  <gandalf@owca.info>  (tiny change)

	* textmodes/ispell.el (ispell-dictionary-alist-6): Add slovenian.

2005-03-26  Eli Zaretskii  <eliz@gnu.org>

	* term/bobcat.el: Don't use keyswap.el, since it is now obsolete.

2005-03-26  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/cal-menu.el (top level): Delete local C-down-mouse-3
	binding.  Suggested by Stephan Stahl <stahl@eos.franken.de>.

	* calendar/cal-move.el (calendar-beginning-of-year): Move the
	cursor to Jan 1 when needed.
	(calendar-end-of-year): Fix -/+ typo.
	Reported by Chong Yidong <cyd@stupidchicken.com>.

2005-03-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-mode): Add autoload cookie.

	* emacs-lisp/debug.el (debugger-record-expression): Add a missing
	format to `message'.  Inspired by Deepak Goel <deego@gnufans.org>.

2005-03-25  Richard M. Stallman  <rms@gnu.org>

	* filesets.el (filesets-init): Add autoload.

	* mail/mailalias.el (mail-directory): Doc fix.

2005-03-25  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/mailalias.el (mail-directory-process): Do nothing if
	mail-directory-process is an atom.
	(mail-get-names): Ignore mail-directory-names if it is an atom.
	(mail-directory-process defvar): Doc fix.
	(mail-names): Doc fix.

2005-03-25  Johan Bockgård  <bojohan@dd.chalmers.se>  (tiny change)

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Fix regexp syntax.

2005-03-26  Kenichi Handa  <handa@m17n.org>

	* international/mule-util.el (detect-coding-with-priority):
	Call update-coding-systems-internal before detect-coding-region.

2005-03-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-breakpoints-mode-map)
	(gdb-frames-mode-map): Add follow-link property.

2005-03-25  Jay Belanger  <belanger@truman.edu>

	* calc/calcalg2.el (calc-solve-for): Use "Variable(s)" to prompt
	for variables.

2005-03-25  Juri Linkov  <juri@jurta.org>

	* image-mode.el: Optimize image filename extension regexps in
	autoload cookies.  Associate .x[bp]m with `image-mode-maybe'
	in `auto-mode-alist'.
	(image-mode): Add `image-toggle-display-text' to local hook
	`change-major-mode-hook'.  Display the image as an image by
	default.  Set `cursor-type' and `truncate-lines' if the image
	is already displayed.  Take into account the current mode (image
	or text) in message.
	(image-minor-mode): New minor mode.
	(image-mode-maybe, image-toggle-display-text): New functions.
	(image-toggle-display): Use called-interactively-p.
	Let-bind `inhibit-read-only' to t.

	* image-mode.el (image-minor-mode): Set `cursor-type' and
	`truncate-lines' if the image is already displayed.  Add turning
	image-minor-mode off to `change-major-mode-hook'.  Add message.
	Call `image-toggle-display-text' after turning image-minor-mode off.

2005-03-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-cmds.el (set-locale-environment): For Mac OS X's
	Terminal.app, use utf-8.
	(set-display-table-and-terminal-coding-system): Add coding-system arg.
	(set-locale-environment): Use it.

	* term/xterm.el: Undo last change, better done in mule-cmds.el.

	* emacs-lisp/rx.el (rx-constituents): Add symbol-start and symbol-end.

	* progmodes/python.el (python-close-block-statement-p)
	(python-outdent-p, python-current-defun): Use symbol-end.

2005-03-25  Karl Chen  <quarl@cs.berkeley.edu>

	* files.el (save-some-buffers): Doc fix.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* complete.el, thumbs.el: Replace `legal' with `valid'.
	* calendar/calendar.el: Replace `legal' with `valid'.
	* emacs-lisp/advice.el: Replace `legal' with `valid'.
	* mail/supercite.el: Replace `legal' with `valid'.
	* progmodes/cperl-mode.el, progmodes/idlw-shell.el
	* progmodes/idlwave.el, progmodes/vhdl-mode.el:
	Replace `legal' with `valid'.
	* textmodes/reftex-vars.el, textmodes/reftex.el:
	Replace `legal' with `valid'.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* calc/calc-forms.el, calc/calc-sel.el
	* midnight.el, vc-cvs.el
	* emacs-lisp/cl-macs.el
	* emulation/vip.el
	* eshell/esh-io.el, eshell/esh-var.el
	* mail/supercite.el
	* progmodes/ebnf-abn.el, progmodes/ebnf-bnf.el
	* progmodes/ebnf-ebx.el, progmodes/ebnf-dtd.el, progmodes/ebnf-iso.el
	* progmodes/ebnf-yac.el, progmodes/ebnf2ps.el, progmodes/idlwave.el
	* progmodes/sh-script.el, progmodes/xscheme.el
	* textmodes/refbib.el, textmodes/refer.el, textmodes/reftex-cite.el
	* textmodes/reftex-index.el, textmodes/reftex-parse.el
	* textmodes/reftex-ref.el, textmodes/reftex-vars.el
	* textmodes/reftex.el, textmodes/org.el:
	Replace `illegal' with `invalid'.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-get-file-name-mode-and-masks)
	(flymake-find-buildfile, flymake-find-possible-master-files)
	(flymake-check-include, flymake-parse-line): Replace loops over the
	length of lists, by loops over lists, to remove silly O(n²) behavior.

	* progmodes/flymake.el (flymake-ensure-ends-with-slash): Remove.
	Substitute file-name-as-directory in the rest of the file.
	(flymake-get-common-file-prefix): Rewrite, using compare-strings.
	(flymake-replace-region): Remove unused arg `buffer'.
	(flymake-check-patch-master-file-buffer): Update calls to it.
	(flymake-add-err-info): Remove unused var `count'.
	(flymake-mode): Use define-minor-mode.

	* progmodes/flymake.el: Use with-current-buffer.
	(flymake-float-time, flymake-get-temp-dir, flymake-line-end-position)
	flymake-replace-regexp-in-string, flymake-line-beginning-position)
	(flymake-popup-menu, flymake-current-row, flymake-selected-frame):
	Avoid testing for `xemacs'.
	(flymake-nop): Move.
	(flymake-region-has-flymake-overlays): Return the computed value.
	(flymake-reformat-err-line-patterns-from-compile-el): Use dolist.
	Remove unused var `endline'.
	(flymake-get-line-count): Remove unused function.
	(flymake-display-err-menu-for-current-line): Unused var move-mouse-pos.

	* emulation/vi.el:
	* generic.el:
	* hilit-chg.el (global-highlight-changes):
	* hi-lock.el (hi-lock-mode):
	* follow.el: find-file-hooks -> find-file-hook.

	* comint.el (comint-insert-input): Obey mouse-yank-at-point.

2005-03-24  Juri Linkov  <juri@jurta.org>

	* dired.el (dired-mode-map): Add menu item "Compare directories"
	for dired-compare-directories.

	* dired-aux.el (dired-compare-directories): Add autoload cookie.
	Doc fix.  Replace `read-file-name' with `read-directory-name'.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* term/xterm.el: If running in Terminal.app set coding-system to utf-8.

2005-03-24  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-mode-change): Save all
	relevant mode settings in calc-embedded-original-modes when modes
	are permanently changed.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* autoinsert.el: find-file-hooks -> find-file-hook.

2005-03-24  Lute Kamstra  <lute@gnu.org>

	* generic.el (generic-font-lock-defaults): Make it obsolete.
	(generic-font-lock-keywords): New variable to replace
	generic-font-lock-defaults.
	(generic-mode-set-font-lock): Delete it.
	(generic-mode-internal): Don't call generic-mode-set-font-lock.
	(generic-bracket-support): Add docstring.

	* generic-x.el: Rename generic-font-lock-defaults to
	generic-font-lock-keywords throughout.
	(mailagent-rules-setup-function): Delete it.
	(mailagent-rules-generic-mode): Use anonymous function instead.
	(show-tabs-generic-mode-font-lock-defaults-1)
	(show-tabs-generic-mode-font-lock-defaults-2): Make them constants.
	Quote faces.
	(show-tabs-tab-face, show-tabs-space-face): Specify background,
	not foreground.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression):
	Recognize define-generic-mode.

2005-03-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* icomplete.el (icomplete-simple-completing-p): Don't turn on icomplete
	if there's no completion table.

2005-03-23  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Remove tty-specific variants, as they're no longer needed.

2005-03-23  Lute Kamstra  <lute@gnu.org>

	* generic-x.el: Code cleanup: make args constant whenever possible.
	(installshield-statement-keyword-list)
	(installshield-system-functions-list)
	(installshield-system-variables-list, installshield-types-list)
	(installshield-funarg-constants-list): Make them constants.

	* generic.el (generic-make-keywords-list): Add autoload cookie.

	* calendar/time-date.el: Add comment on time value formats.
	Don't require parse-time.
	(with-decoded-time-value): New macro.
	(encode-time-value): New function.
	(time-to-seconds, time-less-p, time-subtract, time-add): Use them.
	(days-to-time): Return a valid time value when arg is huge.
	(time-since): Use time-subtract.
	(time-to-number-of-days): Use time-to-seconds.

2005-03-23  David Ponce  <david@dponce.com>

	* recentf.el (recentf-keep): New option.
	(recentf-menu-action): Default to `find-file'.
	(recentf-keep-non-readable-files-flag)
	(recentf-keep-non-readable-files-p)
	(recentf-file-readable-p, recentf-find-file)
	(recentf-cleanup-remote): Remove.
	(recentf-include-p): More robust.
	(recentf-keep-p): New function.
	(recentf-remove-if-non-kept): Rename from
	`recentf-remove-if-non-readable'.  Use `recentf-keep-p'.
	All callers updated.
	(recentf-menu-items-for-commands): Fix help string.
	(recentf-track-closed-file): Update.  Doc fix.
	(recentf-cleanup): Update.  Count removed files.  Doc fix.

2005-03-23  Kim F. Storm  <storm@cua.dk>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Don't inherit from fringe face (now happens automatically).

2005-03-22  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show-help-function): Ignore negative mouse
	position values.

2005-03-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* menu-bar.el (showhide-date-time): Remove.
	(menu-bar-showhide-menu): Use menu-bar-make-mm-toggle.
	(menu-bar-make-mm-toggle): Simplify.

2005-03-22  Juan León Lahoz García  <juanleon1@gmail.com>

	* progmodes/perl-mode.el (perl-font-lock-keywords-2):
	Accept qualified variable and function names.

2005-03-22  Thien-Thi Nguyen  <ttn@gnu.org>

	* bindings.el (completion-ignored-extensions):
	Remove ".lis" for `vax-vms'.

2005-03-22  Andreas Schwab  <schwab@suse.de>

	* generic-x.el: Revert last change.
	* ldefs-boot.el: Update.

2005-03-22  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-original-modes): New variable.
	(calc-embedded-save-original-modes)
	(calc-embedded-restore-original-modes): New functions.
	(calc-do-embedded): Save original modes when entering embedded mode
	and restore when leaving embedded mode.
	(calc-embedded-modes-change): Change the value of
	calc-embedded-original-modes to reflect permanent changes.

2005-03-22  Lute Kamstra  <lute@gnu.org>

	* generic-x.el: Require generic again.

2005-03-22  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Tweak details to look good on both ttys and bitmap displays, light
	or dark background, etc.

2005-03-21  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show-help-function): Check car and cdr of
	mouse position.

2005-03-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* icomplete.el: Don't forcibly turn on the mode upon load.
	(icomplete-mode): Use define-minor-mode.
	(icomplete-eoinput): Default to nil.
	(icomplete-minibuffer-setup): Remove autoload.
	(icomplete-tidy): Simplify.
	(icomplete-exhibit): Use buffer-undo-list to determine if we're still
	in the initial state or if the user has modified the field.
	Fix handling of icomplete-max-delay-chars.
	Remove code that handles the oddball case where
	minibuffer-completion-table is an integer.
	Wrap icomplete-completions in while-no-input in case building
	completions takes more time than expected.
	(icomplete-completions): Simplify.

2005-03-21  Richard M. Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-really-do-compress):
	Make variable buffer-local.

	* image-mode.el: Handle .xpm files too.
	(image-toggle-display): Preserve modification flag.

	* help.el (where-is): Don't mention aliases with no key bindings.

2005-03-21  Lute Kamstra  <lute@gnu.org>

	* generic.el: Fix commentary section.  Don't require cl for
	compilation.
	(generic-mode-list): Add autoload cookie.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Fix docstrings.
	(define-generic-mode): Make it a defmacro.  Fix docstring.
	(generic-mode-internal): Code cleanup.  Add autoload cookie.
	(generic-mode-set-comments): Code cleanup.
	* generic-x.el: Don't prevent compilation.  Don't require generic.
	Follow coding conventions.  Minor code cleanup.
	(etc-fstab-generic-mode): Add some keywords.
	* font-lock.el (lisp-font-lock-keywords-1): Font lock a call to
	define-generic-mode like a function declaration.

2005-03-21  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-do-embedded): Put data on stack before
	changing modes.

2005-03-21  Sam Steingold  <sds@gnu.org>

	* add-log.el (add-log-current-defun): Support more C DEFUN forms.

2005-03-21  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/dcl-mode.el (dcl-font-lock-keywords):
	Add underscore to "f$ lexicals" regexp.

2005-03-20  Juri Linkov  <juri@jurta.org>

	* subr.el (progress-reporter-do-update): When `min-value' is equal
	to `max-value', set `percentage' to 0 and prevent division by zero.

2005-03-20  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.48.

	* net/tramp.el (all): Change all addresses to .gnu.org.
	(tramp-append-tramp-buffers): New defun.
	(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
	Catch `dont-send' signal.
	(tramp-set-auto-save-file-modes): Set always permissions, because
	there might be an old auto-saved file belonging to another
	original file.  This could be a security threat.  Reported by
	Kjetil Kjernsmo <kjetil@kjernsmo.net>.
	Check for Emacs 21.3.50 removed.

	* net/tramp-smb.el (all): Remove debug construct for
	`with-parsed-tramp-file-name'.
	(tramp-smb-prompt): Prompt can contain spaces inside directory names.
	(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
	No error message if DIRECTORY or FILENAME doesn't exist.
	(tramp-smb-open-connection): Check existence of
	`tramp-smb-program'.

2005-03-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/perl-mode.el (perl-font-lock-syntactic-face-function):
	Properly handle the case where the `m' or `s' command's argument is not
	yet terminated.
	(perl-indent-new-calculate): New function.
	(perl-indent-line): Use it.

2005-03-20  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (gdb-put-breakpoint-icon): Use breakpoint faces
	in text-mode too.  Change to new face names.
	(breakpoint-enabled): Rename from `breakpoint-enabled-bitmap-face'.
	Add `:weight bold' attribute.
	(breakpoint-disabled): Rename from `breakpoint-disabled-bitmap-face'.

2005-03-19  Juri Linkov  <juri@jurta.org>

	* files.el (auto-mode-alist): Add comment.  Optimize jar/ear/war.

	* international/mule.el (auto-coding-alist): Sync with
	`auto-mode-alist' by adding upper case archive file extensions
	and adding ear/war to jar extension.

2005-03-19  David Casperson  <casper@unbc.ca>  (tiny change)

	* textmodes/tex-mode.el (tex-view): If tex-shell process is not
	running, restart it.

2005-03-19  Yoichi NAKAYAMA  <yoichi@geiin.org>  (tiny changes)

	* finder.el (finder-current-item): Throw an error on an empty line.

	* man.el (Man-follow-manual-reference): If current-word returns
	nil, use "".

2005-03-19  Matt Hodges  <MPHodges@member.fsf.org>

	* simple.el (goto-line): Doc fix.

2005-03-19  Aaron S. Hawley  <Aaron.Hawley@uvm.edu>

	* files.el (save-buffer): Doc fix.

2005-03-19  Michael R. Mauger  <mmaug@yahoo.com>

	* recentf.el (recentf-cleanup-remote): New variable.
	(recentf-cleanup): Use it to conditionally check availability of
	remote files.

2005-03-19  Joe Edmonds  <joe-bugs-debian-org@elem.com>  (tiny change)

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Recognize `@' in
	function names.

2005-03-19  Eli Zaretskii  <eliz@gnu.org>

	* language/thai-word.el: New file.

2005-03-19  Juan León Lahoz García  <juanleon1@gmail.com>

	* files.el (backup-buffer): If the file's directory is not
	writable, use copy instead of move to backup the file.

2005-03-19  Eli Zaretskii  <eliz@gnu.org>

	* obsolete/keyswap.el: Moved to obsolete/ from term/.

2005-03-19  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-generate-string-list, ps-generate-header-line):
	Use functionp instead of symbolp and fboundp.  Reported by Drkm
	<darkman_spam@yahoo.fr>.
	(ps-print-version): New version 6.6.6.

2005-03-18  Tak Ota  <Takaaki.Ota@am.sony.com>

	* textmodes/table.el (table--line-column-position): New idiom.
	(table--row-column-insertion-point-p): New function to test
	validity of row and column insertion operation at a location.
	(table-global-menu, table-cell-menu): Use above functions for
	deterministic test operation.
	(table--editable-cell-p): Behave in deterministic fashion.

2005-03-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-lazy-highlight-new-loop):
	Make arguments beg and end optional.
	(isearch-update): Remove optional arguments nil from
	isearch-lazy-highlight-new-loop.
	(isearch-lazy-highlight-search): Let-bind case-fold-search to
	isearch-lazy-highlight-case-fold-search instead of
	isearch-case-fold-search, and let-bind isearch-regexp to
	isearch-lazy-highlight-regexp.
	Use isearch-lazy-highlight-last-string instead of isearch-string.

	* replace.el (perform-replace): Remove bindings of global
	variables isearch-string, isearch-regexp, isearch-case-fold-search.
	Add three new arguments to `replace-highlight'.
	(replace-highlight): Add arguments string, regexp, case-fold.
	Let-bind isearch-string, isearch-regexp, isearch-case-fold-search
	to allow isearch-lazy-highlight-new-loop to use these values
	to set corresponding isearch-lazy-highlight-* internal
	variables whose values lazy highlighting will use regardless of
	changes to global variables isearch-string, isearch-regexp,
	isearch-case-fold-search during lazy highlighting loop.
	(replace-dehighlight): Rename `isearch-lazy-highlight-cleanup'
	to `lazy-highlight-cleanup'.

	* textmodes/ispell.el (ispell-lazy-highlight): New defcustom.
	(ispell-highlight-face): Set default face to `isearch' when
	lazy highlighting is enabled.
	(ispell-highlight-spelling-error-overlay): Set `ispell-overlay'
	priority to 1.  Add lazy highlighting.
	(ispell-highlight-spelling-error-xemacs): Remove obsolete arg
	from `isearch-dehighlight'.

2005-03-18  David Ponce  <david@dponce.com>

	* files.el (hack-local-variables): Do a case-insensitive search
	for End.

2005-03-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (lazy-highlight-cleanup) <command>: Rename from
	`isearch-lazy-highlight-cleanup', add alias to old name and
	declare obsolete.  Add release numbers to other obsolete vars.
	(isearch-done, isearch-lazy-highlight-new-loop):
	Rename `isearch-lazy-highlight-cleanup' to `lazy-highlight-cleanup'.
	(lazy-highlight-cleanup) <variable>: Doc fix.
	(isearch-lazy-highlight-update): Rename obsolete
	`isearch-lazy-highlight-face' to `lazy-highlight-face'.

2005-03-18  Kenichi Handa  <handa@m17n.org>

	* language/thai-util.el: Fix categorization of Thai characters in
	thai-category-table.
	(thai-composition-pattern): Adjust it for the above change.
	(thai-self-insert-command, thai-compose-syllable): New functions.
	(thai-compose-region): Use thai-compose-syllable.
	(thai-compose-string): Likewise.
	(thai-composition-function): Likewise.
	(thai-auto-composition): New function.
	(thai-auto-composition-mode): New minor mode.

	* language/thai.el: Fix patterns to be registered in
	composition-function-table.

	* international/quail.el (quail-input-method): Locally bind
	inhibit-modification-hooks to t.

2005-03-17  Richard M. Stallman  <rms@gnu.org>

	* progmodes/perl-mode.el (perl-mode-hook): Defvar it.
	(perl-mode): Use run-mode-hooks.

	* mail/rmail.el (rmail-movemail-program, rmail-pop-password)
	(rmail-pop-password-required, rmail-remote-password): Doc fixes.
	(rmail-preserve-inbox, rmail-probe, rmail-autodetect): Doc fix.

	* mail/sendmail.el (sendmail-send-it): Reenable the code
	to compute resend-to-address and use it.

	* tar-mode.el (tar-mode): Turn off undo unconditionally.

	* image-mode.el: New file.

	* image.el (insert-sliced-image): Add autoload cookie.

	* font-lock.el (font-lock-lines-before): New user option.
	(font-lock-after-change-function): Obey it.

	* bindings.el (esc-map): Make M-g a prefix.
	Bind M-g g and M-g M-g to goto-line.

	* faces.el (face-id): Doc fix.

2005-03-17  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/rmail.el (rmail-unknown-mail-followup-to): New function.
	(rmail-show-message): Use rmail-unknown-mail-followup-to.
	(rmail-reply): Recognize Mail-Followup-To and Mail-Reply-To headers.

	* mail/sendmail.el (mail-yank-ignored-headers)
	(mail-font-lock-keywords, mail-mode-fill-paragraph):
	Add Mail-Followup-To and Mail-Reply-To headers.
	(mail-citation-hook): Add autoload cookie.
	(mail-mode): Doc fix.
	(mail-mode-map): Bind mail-mail-followup-to and mail-mail-reply-to.
	(mail-send): Compute Mail-Followup-To and Mail-Reply-To headers.
	(mail-mode-fill-paragraph): Handle those headers.
	(mail-mailing-lists): New variable.
	(mail-mail-reply-to, mail-mail-followup-to): New functions.

2005-03-17  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-fallback): Check for `(car previous)'
	before calling `isearch-other-end-state'.

2005-03-17  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): Move to beginning of buffer
	line, as well as beginning of screen line.

2005-03-16  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (mark-diary-entries): Use new optional
	argument REDRAW rather than calendar-redrawing variable.
	* calendar/calendar.el (calendar-redrawing): Delete.
	(redraw-calendar): Do not bind calendar-redrawing.

2005-03-16  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/diary-lib.el (diary-redraw-calendar): Preserve point in
	diary-file buffer.

2005-03-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (describe-mode): Allow a :minor-mode-function property to
	specify a different minor mode toggle function than the variable.
	* simple.el (auto-fill-function):
	* subr.el (add-minor-mode): Use it.

2005-03-16  Kenichi Handa  <handa@m17n.org>

	* language/ethio-util.el (sera-being-called-by-w3): New variable.
	(ethio-sera-to-fidel-ethio): Check also sera-being-called-by-w3.
	(ethio-fidel-to-sera-buffer): Likewise.

2005-03-16  Juri Linkov  <juri@jurta.org>

	* emacs-lisp/find-func.el (find-function-regexp):
	Add defun-emitting macro `menu-bar-make-toggle'.

	* isearch.el: Put `isearch-scroll' property to
	`split-window-horizontally'.

	* info.el: Update error messages for `debug-ignored-errors'.
	(Info-isearch-search): Doc fix.
	(Info-find-node): Move up code to go into info buffer before
	recording the node to the history.
	(Info-fontify-node): Fontify titles only if the next line
	has two or more `*', `=', `-', `.'.
	Display "go to this node" for empty (match-string 3).

2005-03-16  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add mouse pointer shape constants.

2005-03-15  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): Use vertical-motion.

2005-03-15  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-error): New variable.
	(isearch-invalid-regexp, isearch-within-brackets): Remove.
	(isearch-error-state): Rename from `isearch-invalid-regexp-state'.
	(isearch-within-brackets-state): Remove.
	(isearch-case-fold-search-state, isearch-pop-fun-state):
	Decrease frame index.
	(isearch-mode, isearch-top-state, isearch-push-state)
	(isearch-edit-string, isearch-abort, isearch-search-and-update)
	(isearch-fallback, isearch-message-prefix, isearch-message-suffix)
	(isearch-search, isearch-lazy-highlight-new-loop):
	Replace `isearch-invalid-regexp' with `isearch-error'.
	Remove `isearch-within-brackets'.
	(isearch-search): Add `search-failed' handler to `condition-case'.
	(isearch-lazy-highlight-search): Add `condition-case' to catch
	errors and allow `isearch-lazy-highlight-update' to try
	highlighting from the beginning of the window.
	(isearch-repeat): Move up code to set isearch-wrapped to t
	before calling isearch-wrap-function.

	* info.el (Info-isearch-initial-node): New internal variable.
	(Info-search): Signal an error in isearch mode when search leaves
	the initial node.  Signal an error when `bound' is non-nil and
	nothing was found in the current subfile.
	(Info-isearch-search): Remove `condition-case'.
	(Info-isearch-wrap): Don't wrap when search failed during leaving
	the initial node.  If `Info-isearch-search' is nil, wrap around
	the current node.
	(Info-isearch-start): New fun.
	(Info-mode): Add buffer-local hook `Info-isearch-start' to
	`isearch-mode-hook'.

2005-03-15  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* simple.el (normal-erase-is-backspace): Set default to t if
	running on Mac.

	* term/mac-win.el (function-key-map): Sync with x-win.el.

2005-03-15  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (locale-language-names): Modify the
	format of elements and add more entries.
	(locale-preferred-coding-systems): Add more entries.
	(set-locale-environment): Adjust for the change of
	locale-language-names.

2005-03-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (smerge-ediff): Remove bogus autoload.

2005-03-14  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs): Docstring fix.
	Ignore a `*' at the beginning of a line.

	* subr.el (macro-declaration-function): Move to emacs-lisp/byte-run.el.
	* emacs-lisp/byte-run.el (macro-declaration-function): Move from
	subr.el.
	(dont-compile, eval-when-compile, eval-and-compile): Use declare
	to specify indentation.

	* generic.el (define-generic-mode): Let generic-mode-list be a
	list of strings; test membership with equal.

2005-03-14  Kim F. Storm  <storm@cua.dk>

	* simple.el (next-line, previous-line): Add optional try-vscroll
	arg to recognize interactive use.  Pass it on to line-move.
	(line-move): Don't perform auto-window-vscroll when defining or
	executing keyboard macro to ensure consistent behavior.

2005-03-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-util.el (cvs-string->strings): Strip trailing whitespace.

2005-03-13  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug): Set debug-on-exit before calling
	debugger-setup-buffer so that backtrace marks the frames set to
	debug-on-exit and we don't have to do it manually.  Set an extra
	debug-on-exit for macro's.
	(debugger-setup-buffer): Don't mark the top frame manually.

2005-03-12  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/byte-run.el: Replace lisp-indent-hook with
	lisp-indent-function throughout.
	(with-no-warnings): Set lisp-indent-function property.

2005-03-12  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/dcl-mode.el (dcl-mode-syntax-table):
	Add entry for backslash.

2005-03-12  Juri Linkov  <juri@jurta.org>

	* info.el (Info-search): Four fixes for backward search.

2005-03-11  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-language-alist): New variable.
	* calc/calc-embed.el (calc-embedded-language-alist): Remove.
	(calc-embedded-find-modes): Use calc-language-alist instead of
	calc-embedded-language-alist.

2005-03-11  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (calendar-redrawing): New internal
	variable.
	(redraw-calendar): Remove bogus save-excursion from previous
	change.  Bind calendar-redrawing to t for mark-diary-entries.
	* calendar/diary-lib.el (mark-diary-entries): No need to redraw
	calendar if that is why we were called.

2005-03-11  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (make-coding-system): Set property
	coding-system-define-form to nil.
	(define-coding-system-alias): Likewise.

2005-03-11  Kenichi Handa  <handa@m17n.org>

	These changes are suggested by Dave Love <fx@gnu.org>.

	* textmodes/fill.el: Change encoding to iso-2022-7bit and add
	coding: tag.
	(adaptive-fill-regexp): Add more bullets.
	(fill-french-nobreak-p): Add Latin-1 and Latin-9 guillemets in
	regexps.

2005-03-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (describe-mode): Properly handle non-trivial lighters.
	Don't ignore minor modes that are not listed in minor-mode-list.

	* tooltip.el (tooltip-mode): Don't complain that you can't turn the
	feature ON when the user requests to turn it OFF.

2005-03-10  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-entry-code): Delete it.
	(implement-debug-on-entry): New function to replace debug-entry-code.
	(debug-on-entry-1): Use implement-debug-on-entry.  Delete the
	second argument as the 2005-03-07 change makes it obsolete.
	(debug-on-entry, cancel-debug-on-entry): Update call to
	debug-on-entry-1.
	(debug, debugger-setup-buffer): Comment update.
	(debugger-frame-number): Update to work with implement-debug-on-entry.

2005-03-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (math-ms-args): Declare it.
	(calc-embedded-eval-expr, calc-embedded-eval-get-var): Use variable
	math-ms-args.
	(calc-embedded-subst): Use math-multi-subst-rec to substitute
	variables.

2005-03-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler, gdb-get-location):
	Use message-box.

	* tooltip.el (tooltip-mode): Use define-minor-mode and simplify.
	(tooltip-activate-mouse-motions-if-enabled): Use dolist.
	(tooltip-gud-tips): Simplify.
	(tooltip-gud-tips-p): Remove superfluous :set.
	(tooltip-gud-modes): Add fortran-mode.
	(gdb-tooltip-print): Remove newline for tooltip-use-echo-area.

	* bindings.el (mode-line-mode-menu): Add tooltip-mode to mode-line.

2005-03-09  Kim F. Storm  <storm@cua.dk>

	* play/animate.el (animate-place-char): Use forward-line instead
	of next-line to improve performance.

2005-03-09  Simon Josefsson  <jas@extundo.com>

	* net/browse-url.el (browse-url-default-browser): Doc fix.

2005-03-09  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-variable-ref)
	(byte-compile-obsolete): Change " since VER" to " (as of Emacs VER)".

2005-03-09  Kenichi Handa  <handa@m17n.org>

	* international/latin-1.el: Set case and syntax for 255 only if
	set-case-syntax-set-multibyte is nil.

	* textmodes/ispell.el (ispell-insert-word): New function.
	(ispell-word): Use ispell-insert-word to insert a new word.
	(ispell-process-line): Likewise.
	(ispell-complete-word): Likewise.

2005-03-09  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (redraw-calendar): Preserve point.
	Reported by Matt Hodges <MPHodges@member.fsf.org>.
	(calendar-week-start-day): Move after definition of
	redraw-calendar.  Delete buffer test, since redraw-calendar has
	that now.

	* calendar/diary-lib.el (mark-diary-entries): Only call
	redraw-calendar in the first of any recursive calls.
	Reported by Alan Shutko <ats@acm.org>.

2005-03-08  Juri Linkov  <juri@jurta.org>

	* textmodes/sgml-mode.el (sgml-tag, html-tag-alist)
	(html-horizontal-rule, html-line, html-image, html-checkboxes)
	(html-radio-buttons): Add a space before the trailing `/>' where
	sgml-xml-mode is non-nil.
	(sgml-delete-tag): Check if the tag ends with `/>' to not delete
	the subsequent tag of the empty XML tag.
	(html-href-anchor): Don't set initial input to "http:".
	(html-image): Ask for the image URL and set point inside alt="".
	(html-name-anchor): Duplicate the name in the `id' attribute when
	sgml-xml-mode is non-nil.
	(html-paragraph): Remove \n before <p>.
	(html-checkboxes, html-radio-buttons): Insert `checked="checked"'
	instead of `checked' when sgml-xml-mode is non-nil.

	* facemenu.el (list-colors-print): Print #RRGGBB in default face.
	Remove 1 space before #RRGGBB to not truncate it on terminal
	windows w/o fringes.  Remove 1 space between bg and fg examples
	to get more space.
	(list-colors-duplicates): Replace `and' with `if' for `boundp' to
	avoid byte-compile warnings.

	* image-file.el (image-file-handler): Put `safe-magic' property to
	`image-file-handler'.

	* info.el (Info-isearch-search): Emulate word search in
	isearching through multiple Info nodes with Info-search.
	(Info-isearch-wrap): Allow isearch-word.

2005-03-08  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-step-through): Make sure that
	stepping into the debugger's code is not possible.
	(debugger-jumping-flag): Docstring update.

2005-03-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-do-embedded): Reset mode line when
	embedded mode begins.
	(calc-embedded-language-alist): New variable.
	(calc-embedded-find-modes): Use calc-embedded-language-alist to
	set default language mode.

2005-03-08  Kenichi Handa  <handa@m17n.org>

	* international/ccl.el (define-ccl-program): Fix docstring about
	extra 256 bytes assured for the output buffer.

	* international/utf-16.el (ccl-encode-mule-utf-16le-with-signature):
	Fix BUFFER_MAGNIFICATION to 2.
	(ccl-encode-mule-utf-16be-with-signature): Likewise.

2005-03-07  Karl Chen  <quarl@cs.berkeley.edu>

	* align.el (align-rules-list): Added an alignment rule for CSS
	declarations (applies to css-mode and html-mode buffers).

2005-03-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug-on-entry-1): Fix handling of macros.

2005-03-07  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): New command.

	* bindings.el (global-map): Bind C-a to move-beginning-of-line.

	* reveal.el (reveal-mode-map): Bind C-a to beginning-of-line.

	* emulation/cua-base.el: Put CUA move property on move-end-of-line
	and move-beginning-of-line.

	* apropos.el (apropos-print): Omit command from M-x ... RET.

2005-03-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler): Handle just MI case.
	(gdb-send, gdb-send-item): Log items sent from gdb-send too.

2005-03-06  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (esc-map): Bind M-g to goto-line.

	* facemenu.el (global-map): Bind M-o, not M-g.

2005-03-06  Jan Djärv  <jan.h.d@swipnet.se>

	* menu-bar.el (menu-bar-file-menu): Add the same :enable to
	"Open Directory" as for "Open File".

2005-03-06  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (activate-mark-hook, deactivate-mark-hook): Add defvars.
	(push-mark-command): Run activate-mark-hook.

2005-03-06  Richard M. Stallman  <rms@gnu.org>

	* help-mode.el (help-mode-finish): Don't alter the element
	in view-return-to-alist if there already is one.

	* jit-lock.el (jit-lock-stealth-fontify): When calling sit-for,
	make sure the current buffer is the expected one.

	* novice.el (disabled-command-function): Output in *Disabled Command*.
	Explicitly ignore non-keyboard events, and explicitly handle C-g.

	* textmodes/flyspell.el (flyspell-large-region):
	Pass args differently for aspell.

	* files.el (mode-require-final-newline): Doc fix.

2005-03-03  Stephan Stahl  <stahl@eos.franken.de>  (tiny change)

	* progmodes/which-func.el (which-function):
	Specify NOERROR when calling imenu--make-index-alist.

2005-03-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (normal-erase-is-backspace): Define default value.

	* custom.el (custom-theme-set-variables): Remove unused var
	`immediate'.
	(custom-reevaluate-setting): Simple function to handle variables
	that are defined before their default value can really be
	computed.

	* startup.el (command-line): Use it for temporary-file-directory,
	small-temporary-file-directory, auto-save-file-name-transforms,
	blink-cursor-mode, and normal-erase-is-backspace.

	* font-lock.el (font-lock-fontify-keywords-region): Ensure forward
	progress, even with buggy anchored keywords.

2005-03-05  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (goto-line): Remove unbalanced final parenthesis.

2005-03-05  Richard M. Stallman  <rms@gnu.org>

	* simple.el (goto-line): Use a number at point as the default.
	With C-u as arg, switch buffers.

2005-03-05  Juri Linkov  <juri@jurta.org>

	* frame.el (blink-cursor-mode): Replace `emacs-quick-startup'
	with `no-blinking-cursor'.

	* startup.el (no-blinking-cursor): New defvar.
	(command-line): Add `--no-blinking-cursor' to longopts.
	Set `no-blinking-cursor' to t for command line arguments
	-Q, -nbc, --no-blinking-cursor.  Replace `emacs-quick-startup'
	with `no-blinking-cursor' in the condition for calling
	`blink-cursor-mode'.

2005-03-04  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-make-mm-toggle): Doc fix.
	(menu-bar-options-save): Add blink-cursor-mode.
	(menu-bar-options-menu): Add blink-cursor-mode.

2005-03-04  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Increase to 0.11.
	(icalendar-export-file, icalendar-export-region)
	(icalendar-import-file, icalendar-import-buffer): Add autoload cookies.
	(icalendar--convert-ical-to-diary): Fix problem with DURATION.

2005-03-04  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-step-after-exit): Make it a defvar.
	(debug-function-list): Ditto.

2005-03-04  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-append-refill):
	Redefine the types of line to which @refill
	is not appended by replacing a search for `@refill\\|@bye' with
	`@refill\\|^[ \t]*@'.  The intent is to solve both the `@end
	itemize@refill' bug and the unfilled long lines bug.
	(texinfmt-version): Update number and date.

2005-03-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* international/code-pages.el (windows-1250, windows-125[2-8])
	(iso-8859-10, -13, -16, georgian-ps): Add autoload cookies.

2005-03-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el (blink-cursor-mode): `emacs-quick-startup' may not be
	bound yet.

2005-03-02  Romain Francoise  <romain@orebokech.com>

	* ibuf-ext.el (ibuffer-filter-disable): Move back to the current
	buffer after removing limits.
	(ibuffer-pop-filter): Ditto.
	Update copyright.

2005-03-02  Miles Bader  <miles@gnu.org>

	* button.el (make-text-button): If the user doesn't specify a
	type, use the default.  Rewrite to use `add-text-properties' and
	plist functions.

2005-03-01  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (inhibit-debug-on-entry): Add docstring.
	(debugger-jumping-flag): New var.
	(debug-entry-code): Use it.
	(debugger-jump): Use debugger-jumping-flag and add
	debugger-reenable to post-command-hook.
	(debugger-reenable): Use debugger-jumping-flag and remove itself
	from post-command-hook.
	(debug, debug-on-entry, cancel-debug-on-entry): Remove call to
	debugger-reenable.

2005-03-01  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-no-refill-regexp): Comment out
	inclusion of "itemize\\|", which may be unnecessary, is certainly
	inelegant, and stops refilling in itemize lists when formatting
	Japanese Texinfo files to Info.
	Update copyright to 2005.

2005-03-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-get-location): Use a warning instead
	of an error if GDB can't find the source file.

2005-03-01  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (redraw-calendar): Work from any buffer,
	not just the calendar.

	* calendar/diary-lib.el (mark-diary-entries): Remove any old marks
	first.
	(diary-redraw-calendar): New function.
	(make-diary-entry): Add diary-redraw-calendar to local
	write-contents-functions.  Turn off selective display before
	inserting in diary.

2005-03-01  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/copyright.el (copyright-fix-years): New command.

2005-03-01  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-on-entry-1): Reimplement to make sure
	that debug-entry-code can be safely removed from a function while
	this code is being evaluated.  Revert the 2005-02-27 change as the
	new implementation no longer requires it.  Make sure that a
	function body containing just a string is not mistaken for a docstring.
	(debug): Skip one more frame in case of debug on entry.
	(debugger-setup-buffer): Delete one more frame line in case of
	debug on entry.
	(debugger-frame-number): Update to use the new text introduced by
	the 1999-11-03 change.  Skip one more frame in case of debug on entry.

2005-02-28  Kim F. Storm  <storm@cua.dk>

	* double.el (double-translate-key): Call force-window-update after
	read-event to avoid crash in redisplay.

2005-02-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (inhibit-debug-on-entry): New var.
	(debug): Use it.  Move the inhibit-trace earlier.
	(debug-entry-code): New const.
	(debug-on-entry-1): Use it.

2005-02-28  Chong Yidong  <cyd@stupidchicken.com>

	* international/utf-16.el (ccl-encode-mule-utf-16le):
	Fix BUFFER_MAGNIFICATION to 2.
	(ccl-encode-mule-utf-16be): Likewise.

2005-02-28  Kenichi Handa  <handa@m17n.org>

	* international/utf-16.el (ccl-encode-mule-utf-16le-with-signature):
	Fix BUFFER_MAGNIFICATION to 4.
	(ccl-encode-mule-utf-16be-with-signature): Likewise.

2005-02-28  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-update-flag): Doc fix.
	(speedbar-show-info-under-mouse): Give set-mouse-position the right
	argument.

2005-02-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-post-command): Don't try to reveal overlays which
	have a non-nil `invisible' property but are actually visible.

	* progmodes/perl-mode.el (perl-imenu-generic-expression): Add entries
	for perldoc sections.
	(perl-outline-regexp, perl-outline-level): New var and function.
	(perl-mode): Use them.

2005-02-27  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (diary-remind): Discard any mark portion
	from diary-entry.  Reported by Andrew Kemp <ajwk@pell.uklinux.net>.

2005-02-27  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el: Comment change.
	(custom-buffer-create-internal): Slightly reword text at top of
	Custom buffers.  Mention there that saving an option edits the
	init file.  Add link to Emacs manual node on `custom-file'.
	(custom-magic-alist): Rewrite individual State messages to use
	capitalized keywords.  Doc fix.

2005-02-27  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/calendar.el (calendar-buffer): Move above
	calendar-week-start-day.
	(calendar-week-start-day): Doc fix.  Add :set function.
	(calendar-minimum-window-height): New variable.
	(generate-calendar-window): Only resize window if selected-window
	is displaying the calendar buffer.  Use new variable
	calendar-minimum-window-height.
	(generate-calendar): Reword error message.
	(calendar-mode-map): Bind DEL to scroll-other-window-down.

2005-02-27  Andreas Schwab  <schwab@suse.de>

	* vc.el (vc-do-command): Don't run command asynchronously when
	operating in a remote directory.

	* net/tramp.el (tramp-file-name-for-operation): Fix misapplied
	change from sync with Tramp 2.0.47.

2005-02-27  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-change-dictionary): Doc fix.

	* textmodes/flyspell.el (flyspell-mode-on):
	Call ispell-change-dictionary only if necessary.

	* emacs-lisp/re-builder.el (regexp-builder): New function.

	* register.el (describe-register-1): Explicitly handle
	yank-excluded-properties = t.

	* cus-edit.el (custom-buffer-create-internal): Improve progress msgs.
	(custom-magic-alist): Change the status descriptions again.
	(face widget-type): Total rewrite based on `restricted-sexp'
	to eliminate the confusing double hiding levels.

	* emacs-lisp/debug.el (debug-on-entry-1):
	If function body is empty, add nil as body form.

2005-02-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/trace.el (inhibit-trace): New var.
	(trace-make-advice): Use it.

	* emacs-lisp/debug.el (debug): Put back the inhibit-trace.

2005-02-26  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-1-click-in-non-selected-windows): New defcustom.
	(mouse-on-link-p, mouse-drag-region-1): Use it.

2005-02-25  Lute Kamstra  <lute@gnu.org>

	* replace.el (query-replace-read-from): Fix 2005-02-19 change.

2005-02-24  Luc Teirlinck  <teirllm@auburn.edu>

	* frame.el (blink-cursor-mode): Add :group keyword.

2005-02-24  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar--decode-isodatetime):
	New optional argument DAY-SHIFT.
	(icalendar-export-region): Fix coding-system-for-write.
	(icalendar--convert-ical-to-diary): Shift end-day of all-day
	events by one.

2005-02-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-keywords-3): #n is atomic.

2005-02-24  Kim F. Storm  <storm@cua.dk>

	* international/iso-acc.el (iso-accents-compose): Fix crash
	during redisplay.  Call force-window-update after read-event
	and delete-region to signal that window is not accurate.

2005-02-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug): Hide the buffer if it's not killed.
	Remove unused and nonexistent var `inhibit-trace'.
	(debugger-mode): Use run-mode-hooks.
	(debugger-list-functions): Add buttons; setup xref stack.

2005-02-23  Richard M. Stallman  <rms@gnu.org>

	* calendar/appt.el (appt-time-msg-list): 3rd elt of each
	appointment says it was explicitly made.
	(appt-add): Set the 3rd element.
	(appt-make-list): Preserve explicit appointments.

	* subr.el (find-tag-default): Catch errors in forward-sexp.

2005-02-23  Juri Linkov  <juri@jurta.org>

	* info.el (Info-isearch-search): New defcustom.
	(Info-isearch-search): Call the default isearch function
	when Info-isearch-search is nil.
	(Info-isearch-wrap): Use variable Info-isearch-search.

2005-02-22  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el: Comment change.

2005-02-22  Kim F. Storm  <storm@cua.dk>

	* progmodes/hideif.el (hide-ifdef-use-define-alist):
	Use completing-read.  Suggested by Juan León Lahoz García.

2005-02-22  Simon Josefsson  <jas@extundo.com>

	* net/browse-url.el (browse-url-netscape-new-window-is-tab):
	New variable.
	(browse-url-netscape): Use it.  Suggested by "Johann 'Myrkraverk'
	Oskarsson" <myrkraverk@users.sourceforget.net>.

2005-02-22  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-on-link-p): If arg POS is a mouse event,
	check that window of that event is the selected window.
	(mouse-drag-region-1): Compare mouse event window to selected
	window before setting point.

	* tooltip.el (tooltip-show-help-function): Pass event to
	mouse-on-link-p so it can check selected window.

2005-02-22  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-header-string-charsets): Delete it.
	(ps-mule-show-warning): New function.
	(ps-mule-begin-job): Use ps-mule-show-warning if unprintable
	characters are found.

	* ps-print.el (ps-header-footer-string): Return a list of header
	and footer strings.

2005-02-21  Wolfgang Jenkner  <wjenkner@inode.at>  (tiny change)

	* pcvs.el (cvs-retrieve-revision): Fix thinko.

2005-02-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el (blink-cursor-mode): Use define-minor-mode.

	* term/mac-win.el (function-key-map): Use char-names more consistently.
	(file-name-coding-system): Only set it for MacOS-9.  The other case is
	already handled in mule-cmds.el (where it also works when mac-win.el
	is not used).

2005-02-21  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (ctext-pre-write-conversion): Always use
	" *code-converting-work*" buffer for work.

	* textmodes/ispell.el (ispell-dictionary-alist): Fix docstring.

2005-02-20  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/scheme.el (scheme-font-lock-keywords-2): Handle named-let.

2005-02-20  Jonathan Yavner  <jyavner@member.fsf.org>

	* ses.el (undo-more): Restore defadvice, but only the part that
	allows changes outside the restricted area of the buffer.

2005-02-20  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Add fourth optional arg try-vscroll which
	must be set to perform auto-window-vscroll.
	When moving backwards and doing auto-window-vscroll, automatically
	vscroll to the last part of lines which are taller than the window.
	(next-line, previous-line): Set try-vscroll arg on line-move.

2005-02-19  Dan Nicolaescu  <dann@ics.uci.edu>

	* replace.el (query-replace, query-replace-regexp)
	(replace-string, replace-regexp): When operating on region, make
	the minibuffer prompt say so.

	* isearch.el (isearch-forward): Document isearch-query-replace and
	isearch-query-replace-regexp keybindings.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Add local variable.

	* calc/calc-prog.el (calc-user-define-edit): Add local variable.
	(calc-edit-top): Move declaration to earlier in file.
	(calc-edit-macro-repeats): Add local variables.

	* calc/calcalg2.el: Add differentiation rule for calcFunc-coth.
	Adjust differentiation rules for calcFunc-tan, calcFunc-cot,
	calcFunc-tanh.
	Adjust integration rule for calcFunc-tan.

2005-02-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-prefix-commands): Make into a defconst.
	(viper-exec-buffer-search): Use regexp-quote to quote buffer string.
	(viper-minibuffer-setup-sentinel): Make some variables buffer-local.
	(viper-skip-separators): Bug fix.
	(viper-set-searchstyle-toggling-macros): Allow to unset macros in a
	particular major mode.
	(viper-del-backward-char-in-replace): Don't put deleted char on the
	kill ring.

	* emulation/viper-ex.el (viper-color-display-p): New function.
	(viper-has-face-support-p): Use viper-color-display-p.

	* emulation/viper-keym.el (viper-gnus-modifier-map): New keymap.

	* emulation/viper-macs.el (viper-unrecord-kbd-macro): Bug fix.

	* emulation/viper-util.el (viper-glob-unix-files):
	Fix shell status check.
	(viper-file-remote-p): Make equivalent to file-remote-p.

	* emulation/viper.el (viper-major-mode-modifier-list):
	Use viper-gnus-modifier-map.

2005-02-19  David Kastrup  <dak@gnu.org>

	* subr.el (subregexp-context-p): Fix garbled doc string by adding
	quoting.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-math.el (calc-arctan, calc-tanh, calc-arctanh):
	Remove extra definitions.
	(calc-coth): New function.
	(calcFunc-cot): Fix `let'.

2005-02-19  Eli Zaretskii  <eliz@gnu.org>

	* faces.el (escape-glyph, minibuffer-prompt): Add commentary for
	the reasons we use "type pc" in these faces.

	* button.el (button): Ditto.

2005-02-19  Michael Mauger  <mmaug@yahoo.com>

	* replace.el (query-replace-read-from): Set the value of
	query-replace-from-history-variable to handle the case of an empty
	string entered to accept the suggested default.

	* net/tramp.el (tramp-file-name-for-operation):
	Use dired-call-process instead of dired-call-process-command.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-trig-inverses, math-div-trig)
	(math-div-non-trig): New variables.
	(math-combine-prod-trig, math-div-new-trig, math-div-new-non-trig)
	(math-div-isolate-trig, math-div-isolate-trig-term): New functions.
	(math-combine-prod, math-div-symb-fancy): Add simplifications for
	trig expressions.

2005-02-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-update-handler)
	(gdb-speedbar-timer-fn): Ensure speedbar updates with new values
	for watch expressions.
	(gdb-var-create-handler): Don't set speedbar-update-flag.
	(gdb-post-prompt): Simplify test for speedbar.

2005-02-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff.el (ediff-set-diff-overlays-in-one-buffer)
	(ediff-set-fine-overlays-in-one-buffer, ediff-goto-word): Make sure
	we use the syntax table of the correct buffer.
	(ediff-same-file-contents, ediff-same-contents): Enhancements thanks to
	Felix Gatzemeier.

	* ediff-init.el (ediff-hide-face): Check for definedness of functions.
	(ediff-file-remote-p): Make synonymous with file-remote-p.
	In all deffaces ediff-*-face-*, use min-colors.

	* ediff-mult.el (ediff-meta-mark-equal-files): Make use of
	ediff-recurse-to-subdirectories.
	(ediff-mark-if-equal): Check that the arguments are strings, use
	ediff-same-contents (after to Felix Gatzemeier).

	* ediff.el (ediff-merge-on-startup): Don't set buffer-modified-p to
	nil.

2005-02-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-message-re): Fix up Subversion regexp.

2005-02-18  David Kastrup  <dak@gnu.org>

	* progmodes/meta-mode.el (meta-mark-active): Fix condition to just
	use `mark-active' when defined.

2005-02-18  Kenichi Handa  <handa@m17n.org>

	* ps-print.el (ps-font-info-database): New entry
	ZapfChancery-MediumItalic with correct font name.  Fix font name
	of the entry Zapf-Chancery-MediumItalic.

2005-02-16  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-stop-on-user-input): Further doc fix.

2005-02-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-fallback-command): Pass user input to fallback command.

2005-02-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-existing-buffers)
	(gdb-find-file-hook): Add server prefix.

2005-02-16  Richard M. Stallman  <rms@gnu.org>

	* replace.el (perform-replace): Pass new args to replace-highlight.
	(replace-highlight): Take region args,
	and pass them to isearch-lazy-highlight-new-loop.

	* novice.el (disabled-command-hook): Autoload the defalias
	and the make-obsolete-variable call.

	* menu-bar.el (menu-bar-select-frame): FRAME defaults to selected.

	* isearch.el (isearch-lazy-highlight-start-limit)
	(isearch-lazy-highlight-end-limit): New variables limit
	the region for highlighting.
	(isearch-lazy-highlight-new-loop): New args BEG and END.
	(isearch-lazy-highlight-search): Use the new vars.
	(isearch-lazy-highlight-update): Likewise.

	* dired.el (dired-build-subdir-alist): Bind buffer-undo-list to t.

	* cus-start.el (all): Use default-boundp.

2005-02-15  David Casperson  <casper@unbc.ca>  (tiny change)

	* menu-bar.el (menu-bar-select-frame): Handle current frame.

2005-02-15  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-stop-on-user-input)
	(auto-revert-verbose): Doc fixes.

2005-02-15  Benjamin Riefenstahl  <Benjamin.Riefenstahl@epost.de>

	* international/mule-cmds.el (set-locale-environment): Remove call
	to set-selection-coding-system on Windows.

2005-02-15  Jay Belanger  <belanger@truman.edu>

	* calc/calc-alg.el: Add simplification rules for calcFunc-sec,
	calcFunc-csc, calcFunc-cot, calcFunc-sech, calcFunc-csch, and
	calcFunc-coth.
	(math-simplify-sqrt): Add simplifications.

	* calc/calc-arith.el (math-real-if-arg-functions): Add functions
	to list.

	* calc/calc-ext.el: Add functions to autoloads.

	* calc/calc-math.el (calc-sec, calc-csc, calc-cot, calc-sech)
	(calc-csch, calc-coth, calcFunc-sec, calcFunc-csc, calcFunc-cot)
	(calcFunc-sech, calcFunc-csch, calcFunc-coth, math-sec-raw)
	(math-csc-raw, math-cot-raw): New functions.

	* calc/calc-rules.el (calc-DistribRules, calc-NegateRules): Add rules.

	* calc/calc-undo.el (calc-handle-undo): Remove prefix from
	the variable name in a message.

	* calc/calc-units.el: Add simplification rules for calcFunc-sec,
	calcFunc-csc, calcFunc-cot.

	* calc/calcalg2.el: Add derivative and integration rules for
	calcFunc-sec, calcFunc-csc, calcFunc-cot, calcFunc-sech,
	calcFunc-csch, calcFunc-coth.
	(math-do-integral-methods): Add to checks for when to use
	substitutions.

	* calc/calccomp.el (math-eqn-special-funcs): Add functions to list.

2005-02-15  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Add ;;;###autoload to `outline-regexp'.  Suggested by Stefan Monnier
	<monnier@iro.umontreal.ca>.
	(lisp-outline-level): Improve efficiency.  Suggested by David
	Kastrup <dak@gnu.org>.

2005-02-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-find-file-unhook): New variable.
	(gdb-set-gud-minor-mode, gdb-set-gud-minor-mode-1)
	(gdb-set-gud-minor-mode-existing-buffers): New functions.
	(gdb-find-file-hook): New hook.  Add it to find-file-hook.
	(gdb-info-breakpoints-custom, gdb-source-info): Simplify.

2005-02-14  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Comment change.

2005-02-14  Lute Kamstra  <lute@gnu.org>

	* cus-start.el (all): Check if symbol is void.

2005-02-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-cite.el (reftex-do-citation): Cleanup single
	optional argument to \cite.

2005-02-14  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-buffer-create-internal): Update help message.
	(custom-magic-alist): Update help messages.

	* cus-start.el (all): Allow a var to specify a standard value.

2005-02-12  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-theme-set-variables): Handle variable aliases.

	* frame.el (blink-cursor-timer): Doc fix.
	(blink-cursor): Make it an alias for `blink-cursor-mode' and
	declare obsolete.
	(blink-cursor-mode): Define with defcustom and use correct
	standard expression in that defcustom.
	* startup.el (command-line): Adapt to above changes in frame.el.

2005-02-11  Lute Kamstra  <lute@gnu.org>

	* apropos.el (apropos-score-doc): Prevent division by zero.

2005-02-11  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar--get-event-property): Doc fix.
	(icalendar--get-event-property-attributes)
	(icalendar--get-event-properties)
	(icalendar--datetime-to-diary-date): New functions.
	(icalendar--split-value): Doc fix.
	(icalendar--datetime-to-noneuropean-date)
	(icalendar--datetime-to-european-date): New optional argument
	SEPARATOR.  Return result as a string instead of a list.
	(icalendar--get-weekday-number): Check if ABBREVWEEKDAY is nil.
	(icalendar--convert-string-for-export): Rename arg S to STRING.
	(icalendar-export-region): Doc fix.  Change name of error buffer.
	Save output buffer.
	(icalendar-import-file): Add blank at end of prompt.
	(icalendar-import-buffer): Doc fix.  Do not switch to error
	buffer.  Indicate status in return value.
	(icalendar--convert-ical-to-diary): Doc fix.  Change name of error
	buffer.  Save output buffer.  Handle exception from recurrence
	rules (EXDATE, EXRULE).  Handle start- and end-date of recurring
	events.  Fix problems with weekly all-day events.

2005-02-10  Richard M. Stallman  <rms@gnu.org>

	* simple.el (eval-expression-print-format):
	Avoid warning about edebug-active.

	* help.el (help-for-help-internal): Rename from help-for-help.
	(help-for-help): Define with defalias.

	* font-core.el (font-lock-default-function): Use with-no-warnings.

	* cus-edit.el (custom-buffer-create-internal): Improve help-echo.

	* custom.el (defface): Doc fix.

2005-02-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-ann3): Re-instate GDB command "set
	width 0" to prevent word wrapping problems.

2005-02-09  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-extensions-order): New defcustom.
	(ido-file-extension-lessp, ido-file-extension-aux)
	(ido-file-extension-order): New advanced file ordering.
	(ido-file-lessp): New simple file ordering.
	(ido-sort-list): Remove.
	(ido-make-file-list): Use ido-file-lessp or ido-file-extension-lessp.
	(ido-make-dir-list, ido-completion-help): Use ido-file-lessp.

2005-02-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/grep.el (grep-regexp-alist): Match an optional ^[[K
	that some versions of grep produce.
	(grep-mode-font-lock-keywords): Likewise.

2005-02-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-location-list): New variable.
	(gdb-cdir): Delete.
	(gdb-info-breakpoints-custom, gdb-goto-breakpoint)
	(gdb-source-info): Treat case when source file is in another
	directory properly.
	(gdb-get-location): New function.

2005-02-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-write-parse-table-part)
	(calc-fix-token-name): Fix a check for language type.

	* calc/calccomp.el (math-compose-expr): Fix a check for language type.

2005-02-07  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-make-version-backup): Ignore file-errors such
	as directory not writable.

2005-02-07  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-max-undo, cua-undo): Remove.
	(cua--standard-movement-commands): Remove list.
	Instead, set CUA property value to move for movement commands.
	(cua-movement-commands): Remove.  Users must set CUA prop instead.
	(cua--pre-command-handler): Check CUA property.
	(cua--init-keymaps): Don't remap undo commands.
	(cua-mode): Don't call cua--rectangle-on-off.

	* emulation/cua-rect.el (cua--undo-list, cua--tidy-undo-counter)
	(cua--rect-undo, cua--tidy-undo-lists, cua--rectangle-on-off): Remove.
	(cua--rect-undo-set-point): New var.
	(cua--rectangle-undo-boundary): Setup undo apply entry.
	(cua--rect-undo-handler): New function for rectangle undo.
	(cua--rect-start-position, cua--rect-end-position): Add.
	(cua--rectangle-post-command): Call cua--rectangle-set-corners
	for restored rectangle.  Set point if cua--rect-undo-set-point.

2005-02-06  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el (calc-tex-language): Display more information
	in messages.

	* calc/calccomp.el (math-compose-expr): Allow multiline matrices
	in TeX mode.

2005-02-06  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp.el (buffer-end): Doc fix.

2005-02-05  Arne Jørgensen  <arne@arnested.dk>  (tiny change)

	* net/ldap.el (ldap-search-internal): Support attributes with
	optional descriptions separated by a semi-colon, as in
	"userCertificate;binary".

2005-02-05  Jan Djärv  <jan.h.d@swipnet.se>

	* x-dnd.el (x-dnd-handle-xdnd): Handle the case where the flags
	isn't a cons (i.e. the version is 0).

2005-02-05  Eli Zaretskii  <eliz@gnu.org>

	* help.el (help-for-help): Doc fix.

2005-02-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Update copyright.  Put GDB-Frames before
	GDB-Windows on the menu-bar as this works better.

2005-02-04  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-update): Don't put in
	unnecessary newlines.  Adjust the end of formula marker.

	* calc/calc-lang.el (math-latex-parse-frac): Don't use arguments.
	(math-latex-parse-two-args): New function.

2005-02-03  Lute Kamstra  <lute@gnu.org>

	* help-fns.el (help-with-tutorial): Make sure that users cannot
	remove the entire text of the tutorial by means of `undo'.

2005-02-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/ispell.el (ispell-internal-change-dictionary): Fix problem
	in recent changes, where the ispell process was repeatedly
	killed & restarted.

	* international/mule-cmds.el (set-locale-environment): Set file-name
	coding system to utf-8 on Darwin systems.
	(set-default-coding-systems): Don't set default-file-name-coding-system
	on Darwin systems.

2005-02-03  Richard M. Stallman  <rms@gnu.org>

	* hi-lock.el (hi-lock-mode): Turning on Hi-Lock turns on Font-Lock.

2005-02-03  Matt Hodges  <MPHodges@member.fsf.org>

	* faces.el (list-faces-display): Add optional argument.

2005-02-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-core.el (font-lock-default-function): Handle the rare case where
	only font-lock-keywords is set.

2005-02-02  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Cancel previous change for
	I-WITH-DOT-ABOVE and DOTLESS-i.

	* international/latin-5.el: Cancel previous change.

2005-02-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el: Correction to syntax in gud-menu-map.

2005-02-02  Kenichi Handa  <handa@m17n.org>

	* international/latin-5.el (tbl): Setup cases of I-WITH-DOT-ABOVE,
	DOTLESS-i.

	* international/characters.el: Setup cases of GREEK-FINAL-SIGMA,
	Y-WITH-DIAERESIS, I-WITH-DOT-ABOVE, DOTLESS-i.

	* case-table.el (get-upcase-table): New function.
	(copy-case-table): Copy upcase table too if non-nil.
	(set-case-syntax-delims): Maintain upcase table too.
	(set-case-syntax-pair): Likewise.
	(set-upcase-syntax, set-downcase-syntax): New functions.
	(set-case-syntax): Maintain upcase table too.

2005-02-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-goto-info): Delete.

	* progmodes/gud.el (gud-goto-info): New function.
	(gud-tool-bar-map): Use correct icon.

2005-02-01  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Fix bug:
	When delegating, order args in the funcall correctly.

2005-02-01  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Doc fix.

2005-02-01  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-access-scan-info): Error out in a
	buffer not visiting a file.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-find-bounds): Set the formula
	bound on the line with the formula.

2005-01-31  Kim F. Storm  <storm@cua.dk>

	* ses.el (ses-create-cell-variable-range)
	(ses-destroy-cell-variable-range, ses-reset-header-string)
	(ses-set-with-undo, ses-unset-with-undo, ses-aset-with-undo)
	(ses-insert-row): Fix format of apply undo entries.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Separate the TeX and LaTeX
	parts.

	* calc/calc-embed.el (calc-embedded-open-formula)
	(calc-embedded-close-formula): Ignore matrix environments.

	* calc/calc-ext.el (math-read-big-expr): Make LaTeX the default
	TeX mode.

	* calc/calc-lang.el (math-function-table, math-oper-table)
	(math-variable-table): Adjust the LaTeX portions.

	* calc/calc.el (math-tex-ignore-words): Remove LaTeX portion.
	(math-latex-ignore-words): New constant.

2005-01-31  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-local-dictionary-overridden): New var.
	(ispell-local-dictionary): Doc fix.
	(ispell-dictionary-alist): Don't include ispell-local-dictionary-alist.
	Don't reinitialize at run time.  Don't defcustom.
	All uses changed to append ispell-local-dictionary-alist,
	or check it first.
	(ispell-current-dictionary): New variable for dictionary in use.
	(ispell-dictionary): Now used only for global default.
	(ispell-start-process): Set ispell-current-dictionary,
	not ispell-dictionary.
	(ispell-change-dictionary): Use this only for setting
	user preferences.
	(ispell-internal-change-dictionary): New function
	to change the current dictionary in use.
	(ispell-region, ispell-process-line, ispell-buffer-local-dict):
	Use ispell-current-dictionary.
	Handle ispell-local-dictionary-overridden.
	(ispell-buffer-local-dict): Call ispell-internal-change-dictionary.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Add support for LaTeX.

	* calc/calc-ext.el: Add calc-latex-language to autoloads.
	(calc-mode-map): Add calc-latex-language.

	* calc/calc-lang.el (calc-latex-language, math-latex-parse-frac)
	(math-latex-print-frac): New functions.
	(math-oper-table, math-function-table, math-variable-table)
	(math-complex-format, math-input-filter): Add latex properties.
	(calc-set-language): Set math-expr-special-function-mapping.

	* calc/calc-prog.el (calc-edit-user-syntax, calc-fix-token-name)
	(calc-write-parse-table-part): Add LaTeX support.

	* calc/calc.el (calc-language): Adjust docstring.
	(calc-set-mode-line): Add LaTeX support.
	(math-expr-special-function-mapping): New variable.
	(math-tex-ignore-words): Add to list.

	* calc/calccomp.el (math-compose-expr, math-compose-rows):
	Add LaTeX support.
	(math-compose-expr): Add support for special functions.

	* calc/calc-help.el (calc-d-prefix-help): Add LaTeX.

2005-01-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-memory-address)
	(gdb-memory-repeat-count, gdb-memory-format, gdb-memory-unit)
	(gdb-memory-mode-map, gdb-memory-format-keymap)
	(gdb-memory-format-menu, gdb-memory-unit-keymap)
	(gdb-memory-unit-menu): New variables for a buffer
	that lets the user examine program memory.
	(gdb-memory-set-address, gdb-memory-set-repeat-count)
	(gdb-memory-format-binary, gdb-memory-format-octal)
	(gdb-memory-format-unsigned, gdb-memory-format-signed)
	(gdb-memory-format-hexadecimal, gdb-memory-format-menu)
	(gdb-memory-format-menu-1, gdb-memory-unit-giant)
	(gdb-memory-unit-word, gdb-memory-unit-halfword)
	(gdb-memory-unit-byte, gdb-memory-unit-menu)
	(gdb-memory-unit-menu-1, gdb-make-header-line-mouse-map)
	(gdb-memory-mode, gdb-memory-buffer-name)
	(gdb-display-memory-buffer, gdb-frame-memory-buffer):
	New functions for above buffer.

2005-01-30  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-bury-buffer): Function deleted.
	(custom-buffer-done-function): Option deleted.
	(custom-buffer-done-kill): New replacement option.
	(Custom-buffer-done): Call quit-window.
	(custom-buffer-create-internal): Update for above changes.

2005-01-29  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (undo-ask-before-discard): New var.
	(undo-outer-limit-truncate): Implement it.
	(undo-extra-outer-limit): Doc update.

2005-01-29  Richard M. Stallman  <rms@gnu.org>

	* ses.el (undo-more): Delete defadvice.
	(ses-begin-change): Doc fix.

	* dired.el (dired-mode-map): Remap `undo' and `advertised-undo'
	instead of rebinding C-x u and C-_.

	* files.el (normal-backup-enable-predicate): Return nil for files
	in /tmp, regardless of temporary-file-directory.

	* man.el (Man-getpage-in-background): Disable undo in Man buffer.

	* rect.el (delete-rectangle-line, delete-extract-rectangle-line)
	(open-rectangle, delete-whitespace-rectangle-line)
	(clear-rectangle-line): If FILL, pass t instead of FILL
	for move-to-column's 2nd arg.

	* simple.el (undo): Fix the test for continuing a series of undos.
	(undo-more): Set pending-undo-list to t when we reach end.
	(pending-undo-list): Move up defvar.

	* wid-edit.el (widget-button-click):
	Shorten the range of the track-mouse binding.

	* comint.el (comint-insert-input): Undo previous changes;
	use last-input-event in interactive spec.

2005-01-29  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/compile.el (compilation-start): Bind buffer-read-only
	to nil before invoking call-process.  Reset buffer's modified flag
	after fontifying it in the no-async branch.

	* wid-edit.el (widget-specify-button): If mouse pointer shape
	cannot be changed, use mouse face instead.

2005-01-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom)
	(gdb-goto-breakpoint): Make breakpoint handling work on template
	functions in C++.  Reported by Martin Reed <mjreed@essex.ac.uk>.
	(gdb-assembler-custom): Update to recognize breakpoint information
	added on 2005-01-19.

2005-01-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/scheme.el (scheme-mode-variables): Set comment-add.
	(dsssl-mode): Use define-derived-mode.
	(scheme-mode-initialize): Remove.
	(scheme-mode): Use run-mode-hooks.

	* cus-edit.el (customize-group-other-window)
	(custom-buffer-create-other-window): Don't override special-display-*.
	(custom-mode-map): Make it dense.

	* emacs-lisp/lisp-mode.el (eval-defun-1): Make sure `defvar' always
	sets the default value.

2005-01-28  Eli Zaretskii  <eliz@gnu.org>

	* descr-text.el: Add more keywords.

2005-01-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* speedbar.el: Avoid unnecessary use of locate-library.

	* international/mule-cmds.el (standard-display-european-internal):
	Don't fiddle with latin-1 non-break space any more since it's now
	special cased in the C code.
	Don't "do&undo" setting for 160 (especially, don't undo incorrectly).

2005-01-26  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Add `undo-outer-limit'.

2005-01-25  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-format-entry):
	Use `bibtex-empty-field-re' only on the text of fields, not on entire
	field lines.
	(bibtex-autofill-entry): Use `bibtex-empty-field-re' on a string,
	not on part of a buffer.

2005-01-25  Lute Kamstra  <lute@gnu.org>

	* textmodes/bibtex.el (bibtex-empty-field-re): Don't match
	nonempty field text strings like "{letters\\macro{}more letters}".
	Clarify docstring.
	(bibtex-sort-entry-class, bibtex-autokey-titleword-ignore)
	(bibtex-entry-offset, bibtex-parse-association)
	(bibtex-parse-field-name): Fix typos in docstrings.
	(bibtex-field-list, bibtex-find-crossref): Fix typos in error messages.

2005-01-24  Dan Nicolaescu  <dann@ics.uci.edu>
            Juri Linkov  <juri@jurta.org>

	* textmodes/reftex-global.el (reftex-isearch-push-state-function)
	(reftex-isearch-pop-state-function, reftex-isearch-isearch-search)
	(reftex-isearch-switch-to-next-file, reftex-isearch-turn-off)
	(reftex-isearch-turn-on, reftex-isearch-minor-mode): New functions.

	* textmodes/reftex.el (reftex-mode-menu): Add entry for reftex
	isearch minor mode.

2005-01-24  Luc Teirlinck  <teirllm@auburn.edu>

	* help-at-pt.el (help-at-pt-display-when-idle): Add autoload cookie.

2005-01-24  Lute Kamstra  <lute@gnu.org>

	* textmodes/ispell.el (ispell-dictionary-alist-4): Rewrite the
	CASECHARS and NOT-CASECHARS regular expressions of the
	"nederlands" and "nederlands8" dictionaries to prevent a "Range
	striding over charsets" error.

2005-01-24  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-declare-variable): Use calc-var-name to
	display variable name.

2005-01-24  Kenichi Handa  <handa@m17n.org>

	* international/encoded-kb.el (encoded-kbd-iso2022-single-shift):
	Fix setting of the element of encoded-kbd-iso2022-invocations.

2005-01-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-goto-breakpoint, gdb-frames-select)
	(gdb-threads-select): Change to also accept mouse events.
	(gdb-mouse-goto-breakpoint, gdb-frames-mouse-select)
	(gdb-threads-mouse-select): Delete.

2005-01-23  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (insert-directory): Take care of empty directory,
	listed without -a switch.

2005-01-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/refill.el (refill-post-command-function):
	Add `indent-new-comment-line' and `reindent-then-newline-and-indent'
	to the list of functions that we should be careful not to undo.
	(refill-late-fill-paragraph-function): Remove.
	(refill-saved-state): New var.
	(refill-mode): Use it to save fill-paragraph-function.
	Save also the value of auto-fill-function.

	* term/w32-win.el: Simplify code.

2005-01-23  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Adapt to new return value from
	pos-visible-in-window-p.

	* simple.el (line-move): Fix last change.  Check partial
	visibility at point rather than at window-start.

2005-01-22  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (xw-defined-colors): Remove debug-message.

2005-01-22  David Kastrup  <dak@gnu.org>

	* progmodes/grep.el: Add alias `find-grep' for `grep-find'.

2005-01-22  Eli Zaretskii  <eliz@gnu.org>

	* type-break.el (type-break-mode): Add a test for
	type-break-file-name being non-nil.

2005-01-22  Toby Allsopp  <Toby.Allsopp@navman.com>  (tiny change)

	* net/eudc.el (top level): Call (message "") via progn, so that
	eudc-options-file is loaded.

2005-01-22  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Rename from line-move.
	(line-move): New function that adjusts vscroll for partially
	visible rows, and calls line-move-1 otherwise.

2005-01-21  René Kyllingstad  <listmailxemacs@kyllingstad.com>

	* pcomplete.el: Define pcomplete-read-event instead of read-event,
	since it's not a complete read-event implementation.

2005-01-20  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-fancy-prefix-other-key): Set prefix arg
	for called function.

2005-01-20  Steven Tamm  <steventamm@mac.com>

	* term/mac-win.el (process-connection-type): Remove.
	Controlled now by s/darwin.h:PTY_ITERATION.

2005-01-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (handle-select-window): Don't switch window when we're
	in the minibuffer.

2005-01-10  Paul Pogonyshev  <pogonyshev@gmx.net>

	* subr.el (dotimes-with-progress-reporter): New macro.

	* ses.el (ses-dotimes-msg): Remove macro.
	Use `dotimes-with-progress-reporter' instead.

2005-01-19  Steven Tamm  <steventamm@mac.com>

	* term/mac-win.el (process-connection-type): Use new
	operating-system-release variable to use ptys on Darwin 7 (OS X
	10.3) when using carbon build.

2005-01-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-fancy-prefix-other-key): Don't clear
	flags if the last command was a tab or M-tab.

	* calc/calc-prog.el (calc-user-define-edit): Put original formula
	in formula editing buffer.

2005-01-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-put-breakpoint-icon): Add help-echo for
	breakpoint image symbol in margin.

2005-01-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-execute-kbd-macro):
	Ignore calc-keep-arg-flag.

2005-01-19  Kenichi Handa  <handa@m17n.org>

	* textmodes/ispell.el (ispell-looking-at): New function.
	(ispell-process-line): Use ispell-looking-at to compare the ispell
	output and the buffer contents.

2005-01-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-display-raw): Fix docstring.

2005-01-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (blink-matching-open): Strip extra info from syntax.

	* progmodes/sh-script.el (sh-here-doc-open-re): Don't allow | or other
	funny chars in the end-of-here-doc marker.

2005-01-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-put-string): Copy/create strings so
	that enable/disabled state of breakpoints is shown correctly in
	fringe and on ttys.
	(gdb-put-breakpoint-icon, gdb-info-breakpoints-custom):
	Add breakpoint information as text properties.
	(gdb-mouse-toggle-breakpoint):
	Rename to gdb-mouse-set-clear-breakpoint.
	(gdb-mouse-toggle-breakpoint): New function.  Enable/disable
	breakpoints in the margin.
	(gdb-remove-strings): Simplify.

2005-01-17  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-mode): Inhibit read-only when
	erasing buffer.

2005-01-17  Richard M. Stallman  <rms@gnu.org>

	* progmodes/grep.el (grep-find): Copy from `grep' the condition
	for calling grep-compute-defaults.

	* play/decipher.el (decipher-mode): Don't call decipher-read-alphabet
	if buffer is empty.

	* emacs-lisp/lisp.el (backward-kill-sexp, kill-sexp): Doc fixes.

2005-01-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* hilit-chg.el (highlight-changes-mode): Don't autoload.

	* bindings.el (mode-line-mode-menu): Use bound-and-true-p for all the
	non-preloaded variables.

2005-01-17  Steven Tamm  <steventamm@mac.com>

	* textmodes/tex-mode.el (tex-start-shell): Adding -i to the
	tex-shell cause to force interactivity when using pipes.

2005-01-17  Kim F. Storm  <storm@cua.dk>

	* simple.el (just-one-space): Make arg optional.

2005-01-17  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Set new optional fourth arg in
	posn-at-x-y to t to access left-margin.

2005-01-16  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.47.

	* net/tramp.el (tramp-operation-not-permitted-regexp): New defcustom,
	catching keep-date problems in cp/scp operations.
	(tramp-handle-copy-file): Don't call `set-file-modes'
	unconditionally.  Specialized functions should know better what is
	necessary.  This improves performance a little bit, and the
	functions could catch errors with `cp -p' and `scp -p'.
	(tramp-do-copy-or-rename-file-via-buffer)
	(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
	when appropriate.
	(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.
	Call `set-file-modes' when appropriate.
	(tramp-action-out-of-band): Mask `scp -p' error.  Reported by Isak
	Johnsson <isak@hypergene.com>.
	(tramp-get-buffer, tramp-get-debug-buffer): Discard the undo list
	of both Tramp buffer and debug buffer.  Reported by Joakim Verona
	<joakim@verona.se>.
	(tramp-file-name-for-operation): Mark `shell-command' as magic for
	Emacs only.

	* net/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
	`find-file-hooks' and `dired-mode-hook'.
	(tramp-minor-mode-map): Respective map.  Add remapping for
	`compile' and `recompile'.
	(tramp-remap-command, tramp-recompile): New defuns.
	(tramp-compile): Enable `tramp-minor-mode' and `compilation-mode'
	in buffer "*Compilation*".  Call the commands asynchronously.

	* net/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
	(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
	`shell-command', because it isn't magic in XEmacs.  Reported by
	Adrian Aichner <adrian@xemacs.org>.

	* net/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
	`substitute-in-file-name'.
	(tramp-smb-handle-substitute-in-file-name): New defun.
	(tramp-smb-advice-PC-do-completion): Delete advice.

2005-01-16  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* net/tramp.el (tramp-wait-for-output): Fix typo in echo processing.
	Fix error in deleting region.

2005-01-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-with-file): Use Lisp mode in temp buffer.
	In non-temp buffer, switch syntax table temporarily.

	* emacs-lisp/lisp-mode.el (indent-pp-sexp): Doc fix.

	* replace.el (occur-accumulate-lines, occur-engine): Avoid warnings.

	* tar-mode.el (tar-extract): Bind buffer-undo-list to t.

	* imenu.el (imenu--split-menu): Copy menulist before sorting.
	(imenu--generic-function): Use START, not BEG, as pos of definition.

	* simple.el (just-one-space): Argument specifies number of spaces.

	* simple.el (eval-expression-print-format): Avoid warning
	about edebug-active.

2005-01-15  James R. Van Zandt  <jrvz@comcast.net>  (tiny change)

	* progmodes/sh-script.el: Code copied from make-mode.el
	with small changes.
	(sh-mode-map): Bind C-c C-\.
	(sh-backslash-column, sh-backslash-align): New variables.
	(sh-backslash-region, sh-append-backslash): New functions.

2005-01-15  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	* mail/rmail.el: Updated to work with movemail from GNU Mailutils.
	(rmail-pop-password, rmail-pop-password-required): Move to
	rmail-obsolete group.
	(rmail-set-pop-password): Rename to rmail-set-remote-password.
	All callers updated.
	(rmail-get-pop-password): Rename to rmail-get-remote-password.
	Take an argument specifying whether it is POP or IMAP mailbox we
	are using.  All callers updated.
	(rmail-pop-password-error): Rename to
	rmail-remote-password-error.  Added mailutils-specific error message.
	(rmail-movemail-search-path)
	(rmail-movemail-variant-in-use): New variables.
	(rmail-remote-password, rmail-remote-password-required):
	New customization variables.
	(rmail-probe, rmail-autodetect, rmail-movemail-variant-p): New funs.
	(rmail-parse-url): New function.
	(rmail-get-new-mail, rmail-insert-inbox-text): Update for use
	with GNU mailutils movemail.

2005-01-15  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (c-mode/symbol): Add ^` to prefix, and change
	suffix to space, $ or '$, to correctly position point when going
	to @table style constants like DBL_MAX.

2005-01-15  Jorgen Schaefer  <forcer@forcix.cx>  (tiny change)

	* type-break.el (type-break-mode, type-break-file-time)
	(type-break-file-keystroke-count, type-break-choose-file):
	Don't store data in or load data from the file if type-break-file-name
	is nil.
	(type-break-file-name): Doc update as per the above.

2005-01-15  Stephen Eglen  <S.J.Eglen@damtp.cam.ac.uk>  (tiny change)

	* woman.el (woman-dired-define-key-maybe): If KEY is undefined,
	lookup-key might return nil; handle that.

2005-01-15  Alan Mackenzie  <acm@muc.de>

	* progmodes/ebrowse.el (ebrowse-class-in-tree):
	Return the tail of the tree rather than the element found,
	thus enabling the tree to be setcar'd.

2005-01-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-show-following-heading): New option.
	(org-show-hierarchy-above): Use `org-show-following-heading'.
	(org-cycle): Documentation fix.

	* textmodes/org.el (orgtbl-optimized): New option.
	(orgtbl-mode): New command, a minor mode.
	(orgtbl-mode-map): New variable.
	(turn-on-orgtbl, orgtbl-mode, orgtbl-make-binding)
	(orgtbl-error, orgtbl-self-insert-command)
	(orgtbl-delete-backward-char, orgtbl-delete-char): New functions.

	* textmodes/org.el (org-mode): `org-table-may-need-update' is now
	a local variable in each org-mode buffer.

	* textmodes/org.el (org-set-regexps-and-options): Rename from
	`org-set-regexps'.  Added checking for STARTUP keyword.
	(org-get-current-options): Add STARTUP options.
	(org-table-insert-row): Make mode intelligent about when
	realignment is needed.
	(org-self-insert-command, org-delete-backward-char, org-delete-char):
	New commands.
	(org-enable-table-editor): New default value `optimized'.
	(org-table-blank-field): Support blanking regions if active.

2005-01-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-cite.el (reftex-bib-sort-year): Catch the case
	if the year is not given.

	* textmodes/reftex-ref.el (reftex-replace-prefix-escapes):
	Add new escapes %m and %M, fixed bug with %F by adding
	save-match-data.
	(reftex-reference): Remove ?. from list of spaces.
	(reftex-label-info): Add automatic label prefix recognition.

	* textmodes/reftex-index.el (reftex-index-next-phrase):
	Add slave parameter to call of `reftex-index-this-phrase'.
	(reftex-index-this-phrase): New optional argument.
	(reftex-index-region-phrases): Add slave parameter to call of
	`reftex-index-this-phrase'.
	(reftex-display-index): New argument redo.
	(reftex-index-rescan): Add `redo' to arguments of
	`reftex-display-index'.
	(reftex-index-Rescan, reftex-index-revert)
	(reftex-index-switch-index-tag): Add `redo' to arguments of
	`reftex-display-index'.
	(reftex-index-make-phrase-regexp): Fix bug with case-sensitive
	indexing.  Fix bug with matching is there is a quote before or
	after the word.

	* textmodes/reftex-cite.el (reftex-all-used-citation-keys):
	Fix bug when collecting citation keys in lines with comments.
	(reftex-citation): Prefix argument no longer rescans the document,
	but forces prompting for optional arguments of cite macros.
	(reftex-do-citation): Prompting for optional arguments implemented.

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	Add optional arguments to most cite commands.
	(reftex-cite-cleanup-optional-args): New option.
	(reftex-cite-prompt-optional-args): New option.
	(reftex-trust-label-prefix): New option.

	* textmodes/reftex-toc.el (reftex-toc-find-section):
	Add push-mark before changing the position in the buffer.

	* textmodes/reftex.el (reftex-prefix-to-typekey-alist): New variable.
	(reftex-compile-variables): Compute reftex-prefix-to-typekey-alist.

2005-01-14  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Compute window co-ordinates
	more carefully.

2005-01-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/sgml-mode.el (sgml-fill-nobreak): New fun.
	(sgml-mode): Use it.
	(sgml-get-context): Better keep track of implicitly closed tags.

2005-01-13  Kenichi Handa  <handa@m17n.org>

	* textmodes/ispell.el: These changes are to fix misalignment error
	caused by equivalent characters of different Emacs charsets.
	(ispell-unified-chars-table): New variable.
	(ispell-get-decoded-string): New function.
	(ispell-get-casechars, ispell-get-not-casechars)
	(ispell-get-otherchars): Call ispell-get-decoded-string.

2005-01-12  Johan Bockgård  <bojohan@users.sourceforge.net>

	* custom.el (custom-declare-variable): Just put symbol instead
	of (defvar . symbol) in `current-load-list'.

2005-01-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* emacs-lisp/elint.el: Fixed typo in Commentary section.

2005-01-12  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-describe-key): Use temporary info buffer
	to create a Calc summary.

2005-01-12  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-on-link-p): Change functionality and doc
	string to comply with latest description in lisp ref.

2005-01-12  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-translate, xterm-mouse-event):
	Enable mouse clicks on mode-line, header-line and margin.
	(event-type): Give mouse event symbols an `event-kind' property
	with value `mouse-click'.

2005-01-12  Juri Linkov  <juri@jurta.org>

	* facemenu.el (list-colors-display): Add new arg buffer-name.
	Use it.  Fix docstring.  Replace code for identifying duplicate
	colors by the name with call to `list-colors-duplicates' which
	identifies duplicate colors by the value unless the color
	is one of special Windows colors.  Set truncate-lines to t.
	Print sorted duplicate color names on each line.  Indent to 22
	\(the longest color name in rgb.txt) instead of 20.  Optimize.
	(list-colors-duplicates): New function.
	(facemenu-color-name-equal): Delete function.

	* facemenu.el (list-colors-print): New function created from code
	in list-colors-display.  Print #RRGGBB at the window right edge.
	(list-colors-display): When temp-buffer-show-function is not
	defined, call list-colors-print from temp-buffer-show-hook
	to get the right value of window-width in list-colors-print
	after the buffer is displayed.

	* simple.el (pop-mark): Move deactivate-mark out of conditional
	part to deactivate the active mark regardless of the state of the
	mark ring.

	* desktop.el (desktop-save): Add `mode: emacs-lisp' to the local
	variables line in desktop files.

2005-01-12  Juri Linkov  <juri@jurta.org>

	* isearch.el (search-highlight, isearch, isearch-lazy-highlight):
	Bring together isearch highlight related options.
	(lazy-highlight): Replace group `replace' by `matching'.
	(lazy-highlight-cleanup, lazy-highlight-initial-delay)
	(lazy-highlight-interval, lazy-highlight-max-at-a-time)
	(lazy-highlight): Add aliases to old names isearch-lazy-highlight-...
	and declare them obsolete.
	(lazy-highlight-face): Rename from isearch-lazy-highlight-face.
	(isearch-faces): Remove defgroup.
	(isearch-overlay, isearch-highlight, isearch-dehighlight):
	Move isearch highlighting code closer to lazy highlighting code.

	* replace.el (query-replace-lazy-highlight): Add lazy-highlight group.
	(query-replace-highlight, query-replace-lazy-highlight)
	(query-replace): Move definitions to the beginning of the file.

2005-01-11  Juri Linkov  <juri@jurta.org>

	* toolbar/back_arrow.xpm, toolbar/back_arrow.pbm
	* toolbar/lc-back_arrow.xpm, toolbar/lc-fwd_arrow.xpm
	* toolbar/fwd_arrow.xpm, toolbar/fwd_arrow.pbm: New icons.

	* info.el (Info-history-forward): New variable.
	(Info-select-node): Reset Info-history-forward to nil.
	(Info-last): Turn into defalias.
	(Info-history-back): Rename from Info-last.
	Add current node to Info-history-forward.
	(Info-history-forward): New fun.
	(Info-mode-map): Replace Info-last by Info-history-back.
	Bind Info-history-forward to "r".
	(Info-mode-menu): Replace Info-last by Info-history-back.
	Fix menu item text.  Add menu item for Info-history-forward.
	(info-tool-bar-map): Replace Info-last by Info-history-back.
	Replace its icon "undo" by "back_arrow".  Add icon "fwd_arrow"
	for Info-history-forward.
	(Info-mode): Replace Info-last by Info-history-back in docstring.
	Add local variable Info-history-forward.
	(Info-goto-emacs-command-node): Replace Info-last by Info-history-back.

2005-01-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-drag-mode-line-1, mouse-drag-vertical-line)
	(mouse-drag-region, mouse-drag-region-1, mouse-drag-secondary):
	Ignore select-window events rather than fiddle with
	mouse-autoselect-window.

2005-01-11  Matthew Mundell  <matt@mundell.ukfsn.org>

	* type-break.el (type-break-mode): Fix previous change.

2005-01-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-reset): Reset when inside embedded
	calculator; only reset when point is inside a calculator.
	Don't adjust the window height if the window takes up the whole height
	of the frame.

2005-01-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* ebuff-menu.el (Electric-buffer-menu-mode):
	Preserve value of buffer-local var header-line-format.

2005-01-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-mode-var-list-restore-saved-values):
	Make sure settings file exists before accessing it.

	* calc/calc-embed.el (calc-embedded-subst):
	Replace math-multi-subst-rec, which is only supposed to be called
	by math-multi-subst, by math-multi-subst.

2005-01-09  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-allow-async-revert): New user option.
	(vc-disable-async-diff): New internal variable.
	(vc-revert-buffer): Use them to disable asynchronous diff.

	* vc-cvs.el, vc-arch.el, vc-svn.el, vc-mcvs.el (vc-cvs-diff)
	(vc-arch-diff, vc-svn-diff, vc-mcvs-diff): Don't diff
	asynchronously if vc-disable-async-diff is t.

2005-01-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (defcalcmodevar): New macro.
	(calc-mode-var-list-restore-default-values)
	(calc-mode-var-list-restore-saved-values): New functions.
	(calc-mode-var-list): Use defcalcmodevar to define it.
	(calc-always-load-extensions, calc-line-numbering)
	(calc-line-breaking, calc-display-just, calc-display-origin)
	(calc-number-radix, calc-leading-zeros, calc-group-digits)
	(calc-group-char, calc-point-char, calc-frac-format)
	(calc-prefer-frac, calc-hms-format, calc-date-format)
	(calc-float-format, calc-full-float-format, calc-complex-format)
	(calc-complex-mode, calc-infinite-mode, calc-display-strings)
	(calc-matrix-just, calc-break-vectors, calc-full-vectors)
	(calc-full-trail-vectors, calc-vector-commas, calc-vector-brackets)
	(calc-matrix-brackets, calc-language, calc-language-option)
	(calc-left-label, calc-right-label, calc-word-size)
	(calc-previous-modulo, calc-simplify-mode, calc-auto-recompute)
	(calc-display-raw, calc-internal-prec, calc-angle-mode)
	(calc-algebraic-mode, calc-incomplete-algebraic-mode)
	(calc-symbolic-mode, calc-matrix-mode, calc-shift-prefix)
	(calc-window-height, calc-display-trail, calc-show-selections)
	(calc-use-selections, calc-assoc-selections)
	(calc-display-working-message, calc-auto-why, calc-timing)
	(calc-mode-save-mode, calc-standard-date-formats, calc-autorange-units)
	(calc-was-keypad-mode, calc-full-mode, calc-user-parse-tables)
	(calc-gnuplot-default-device, calc-gnuplot-default-output)
	(calc-gnuplot-print-device, calc-gnuplot-print-output)
	(calc-gnuplot-geometry, calc-graph-default-resolution)
	(calc-graph-default-resolution-3d, calc-invocation-macro)
	(calc-show-banner): Use defcalcmodevar to declare them and set
	their default values.

	* calc/calc-ext.el (calc-reset): Restore saved values of variables
	instead of default values (but restore default values if there is
	an argument of 0).

2005-01-09  David Kastrup  <dak@gnu.org>

	* desktop.el (desktop-restore-eager): Fix typo in type.

2005-01-08  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (customize): Delete :link.

2005-01-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-mode): Remove the extension from the
	`calc-settings-file' file name when loading it.

2005-01-08  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-mode-map, Info-next-link-keymap)
	(Info-prev-link-keymap, Info-up-link-keymap):
	Map follow-link to mouse-face.
	(Info-fontify-node): Add "mouse-2: " prefix to tooltip.

2005-01-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-settings-file): Change default value.
	Suggested by cgw in a comment in calc-mode.el.

	* calc/calc-mode.el (calc-settings-file-name):
	Compare calc-settings-file to user-init-file instead of ~/.emacs.
	Replace ~/.emacs in a prompt by calc-settings-file.

2005-01-07  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el (desktop-restore-eager, desktop-lazy-verbose)
	(desktop-lazy-idle-delay): New customizable variables.
	(desktop-buffer-args-list): New variable.
	(desktop-append-buffer-args): New function.
	(desktop-save): Call desktop-append-buffer-args for some buffers.
	(desktop-lazy-create-buffer): New function.
	(desktop-idle-create-buffers): New function.
	(desktop-read): Add message about buffers to restore lazily.
	(desktop-lazy-abort): New command.
	(desktop-clear): Call desktop-lazy-abort.
	(desktop-lazy-complete): New command.

2005-01-06  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/find-func.el (find-face-definition):
	Rename from find-face.

2005-01-06  Kim F. Storm  <storm@cua.dk>

	* simple.el (completion-list-mode-map): Map follow-link to mouse-face.

	* man.el (Man-xref-man-page, Man-xref-header-file)
	(Man-xref-normal-file): Add follow-link property.

2005-01-06  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el: Make sure the proper macro definitions are
	available when compiling.

2005-01-06  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-lazy-highlight-update):
	Rename `isearch-lazy-highlight-interval' to `lazy-highlight-interval'.

2005-01-06  Miles Bader  <miles@gnu.org>

	* isearch.el (lazy-highlight): Rename from `lazy-highlight-face'.
	(isearch-lazy-highlight-face): Use new name.

2005-01-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Re-add an interactive spec.
	(uniquify-rationalize-file-buffer-names): Fix corner case when renaming
	to the same name.

	* isearch.el (isearch-dehighlight): Remove unused arg `totally'.
	(isearch-update, isearch-done): Adjust calls accordingly.

2005-01-05  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-set-variables, custom-theme-set-variables):
	Clarify documentation.

	* emacs-lisp/find-func.el (find-variable)
	(find-variable-other-window, find-variable-other-frame):
	Fix the TYPE args to find-function-read and find-function-do-it.
	(find-function): Doc fix.
	(find-function-at-point): Replace function-at-point alias.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* cus-face.el (custom-declare-face):
	Record defface in current-load-list.

	* help-fns.el (variable-at-point): New arg ANY-SYMBOL.

	* emacs-lisp/find-func.el: Doc fixes.
	(find-face-regexp): New variable.
	(find-function-regexp-alist): New variable.
	(find-function-C-source): Third arg is now TYPE.
	(find-function-search-for-symbol): Handle general TYPE.
	(find-function-read, find-function-do-it): Handle general TYPE.
	(find-definition-noselect, find-face): New functions.
	(function-at-point): Alias deleted.

2005-01-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* battery.el (display-battery-mode): Rename from display-battery.
	Handle the case where it gets turned off.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (customize): Make :link point to user doc.

	* man.el (Man-fontify-manpage): Turn off undo generation.

	* add-log.el (change-log-font-lock-keywords): Don't match just "From".

2005-01-04  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Only look for error lines in
	inserted text.  Don't move too far after processing --dired markers.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (sendmail-pre-abbrev-expand-hook):
	Don't expand if the character is @, period, dash, etc.
	(define-mail-abbrev): Quote names that contain problem characters.

2005-01-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el: No longer require `cl'; `dolist' is standard.

2005-01-03  Richard M. Stallman  <rms@gnu.org>

	* replace.el (replace-dehighlight): Use lazy-highlight-cleanup.
	(query-replace-highlight, query-replace-lazy-highlight)
	(query-replace): Definitions moved up.  Doc fix.

2005-01-03  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (lazy-highlight): Group renamed from isearch-lazy-...
	(lazy-highlight-cleanup, lazy-highlight-initial-delay)
	(lazy-highlight-interval, lazy-highlight-max-at-a-time)
	(lazy-highlight-face): Rename from isearch-lazy-...
	Change all references to them.

2005-01-03  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-file): Doc fix for defcustom.
	(custom-file): The function no longer sets the variable
	`custom-file' to its return value.

	* startup.el (command-line): No longer load `custom-file'.

2005-01-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/find-func.el (find-variable-regexp): Avoid defface.

	* progmodes/perl-mode.el (perl-nochange, perl-calculate-indent):
	Don't confuse module-prefixed identifiers for labels.
	Reported by Juan León Lahoz García <juanleon1@gmail.com>.

2005-01-02  Richard M. Stallman  <rms@gnu.org>

	* files.el (basic-save-buffer-1): Fix previous change.

	* loadhist.el (file-loadhist-lookup): New function.
	(file-provides, file-requires): Use it.

	* electric.el (Electric-pop-up-window): Use fit-window-to-buffer
	instead of calculating the right size.

2005-01-02  Karl Chen  <quarl@cs.berkeley.edu>

	* vc-svn.el (vc-svn-diff): Stay local if possible.

2005-01-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-arch.el (vc-arch-workfile-version): Handle the empty-branch case.

	* files.el (hack-local-variables): Fix last change.

2005-01-02  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-top): New variable.
	(calc-edit-mode): Set calc-edit-top to be the beginning of the edited
	object.  Change header properties.
	(calc-edit-finish, calc-edit-finish-stack-object)
	(calc-edit-show-buffer): Use calc-edit-top to find the beginning of the
	edited object.
	* calc/calc-sel.el (calc-finish-selection-edit): Use calc-edit-top
	for the beginning of the edited object.
	* calc/calc-embed.el (calc-embedded-finish-edit): Use calc-edit-top
	for the beginning of the edited object.
	* calc/calc-prog.el (calc-edit-macro-finish-edit)
	(calc-finish-formula-edit, calc-macro-repeats)
	(calc-edit-macro-adjust-buffer, calc-edit-format-macro-buffer)
	(calc-edit-macro-pre-finish-edit): Use calc-edit-top for the
	beginning of the edited object.
	(calc-user-define-edit): Change the header for editing macros.
	Remove unnecessary variable.

2005-01-01  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-mode): Change default header.
	(calc-edit-finish, calc-show-edit-buffer): Adjust to handle new header.
	* calc/calc-store.el (calc-edit-variable): Change title to match new
	header.
	* calc/calc-prog.el (calc-edit-user-syntax): Change title in edit
	mode to match new header.
	(calc-user-define-edit): Change titles to include names of commands.
	(calc-finish-formula-edit): Adjust to handle new header.
	(calc-finish-macro-edit): Remove.
	(calc-edit-macro-repeats, calc-edit-macro-adjust-buffer)
	(calc-edit-macro-command, calc-edit-macro-command-type)
	(calc-edit-macro-combine-alg-ent, calc-edit-macro-combine-ext-command)
	(calc-edit-macro-combine-var-name, calc-edit-macro-combine-digits)
	(calc-edit-format-macro-buffer, calc-edit-macro-pre-finish-edit)
	(calc-edit-macro-finish-edit): New functions.
	(calc-user-define-edit): Use new functions to edit named calc macros.

2005-01-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (hack-local-variables): Cleanup prefix/suffix matching.

	* ses.el (copy-region-as-kill): Deactivate mark.

2005-01-01  Richard M. Stallman  <rms@gnu.org>

	* replace.el (occur-1): If the output buffer is also an input,
	don't kill it, rename it.

	* faces.el (set-face-background, set-face-foreground): Doc fix.

	* cus-face.el (custom-face-attributes): Fix :help-echo strings
	for :foreground and :background.

	* dired.el (dired-view-command-alist): Variable deleted.
	(dired-view-file, dired-mouse-find-file-other-window):
	Delete the code to use it.

2005-01-01  Kim F. Storm  <storm@cua.dk>

	* image.el (insert-sliced-image): Use t for line-height property.

See ChangeLog.11 for earlier changes.

;; Local Variables:
;; coding: utf-8
;; add-log-time-zone-rule: t
;; End:

    Copyright (C) 2005-2012 Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.
